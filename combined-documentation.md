# Combined Markdown Files


---
## File: ./content/developer/reference.md

  - nosearch

  - types  
    reference

# Reference

<div class="toctree" data-titlesonly="">

reference/addons reference/javascript reference/cli
reference/external\_api reference/extract\_api

</div>


---
## File: ./content/developer/howtos.md

  - show-content

  - hide-page-toc

# How-to guides

<div class="toctree" data-titlesonly="">

howtos/profilecode howtos/company howtos/localization
howtos/translations howtos/connect\_device

</div>

<div class="cards">

<div class="card" target="howtos/profilecode">

Profiling Odoo code

Learn more about Odoo's embedded code profiler.

</div>

<div class="card" target="howtos/company">

Multi-company guidelines

Learn how to manage multiple companies and deal with the records-related
specificities of a multi-company environment.

</div>

<div class="card" target="howtos/localization">

Accounting localization

Learn how to build a localization module, create bank operation models
and dynamic reports.

</div>

<div class="card" target="howtos/translations">

Translating modules

Learn how to provide translation abilities to your module.

</div>

<div class="card" target="howtos/connect_device">

Connect with a device

Learn how to enable a module to detect and communicate with an IoT
device.

</div>

</div>


---
## File: ./content/developer/glossary.md

  - orphan  
    true

# Glossary

<div class="glossary">

external id external identifier external identifiers string identifier
stored in `ir.model.data`, can be used to refer to a record regardless
of its database identifier during data imports or export/import
roundtrips.

> External identifiers are in the form `{module}.{id}` (e.g.
> `account.invoice_graph`). From within a module, the `{module}.` prefix
> can be left out.
> 
> Sometimes referred to as "xml id" or `xml_id` as XML-based
> `reference/data` make extensive use of them.

  - format string  
    inspired by [jinja
    variables](http://jinja.pocoo.org/docs/dev/templates/#variables),
    format strings allow more easily mixing literal content and computed
    content (expressions): content between `{{` and `}}` is interpreted
    as an expression and evaluated, other content is interpreted as
    literal strings and displayed as-is

GIS Geographic Information System any computer system or subsystem to
capture, store, manipulate, analyze, manage or present spatial and
geographical data.

minified minification process of removing extraneous/non-necessary
sections of files (comments, whitespace) and possibly recompiling them
using equivalent but shorter structures ([ternary
operator](http://en.wikipedia.org/wiki/%3F:) instead of `if/else`) in
order to reduce network traffic

</div>


---
## File: ./content/developer/tutorials.md

  - show-content

  - hide-page-toc

# Tutorials

<div class="toctree" data-titlesonly="">

tutorials/getting\_started tutorials/define\_module\_data
tutorials/restrict\_data\_access tutorials/unit\_tests
tutorials/pdf\_reports tutorials/dashboards

</div>

<div class="cards">

<div class="card" target="tutorials/getting_started" data-tag="Beginner" data-large="">

Getting started

Develop your own module with the Odoo framework. This step-by-step
tutorial is crafted for newcomers and any other individual curious about
Odoo development.

</div>

<div class="card" target="tutorials/define_module_data" data-tag="Beginner">

Define module data

Define master and demo data for an Odoo module, leveraging the strengths
of the CSV and XML file formats to accommodate specific data
requirements.

</div>

<div class="card" target="tutorials/restrict_data_access" data-tag="Beginner">

Restrict access to data

Implement security measures to restrict access to sensitive data with
the help of groups, access rights, and record rules.

</div>

<div class="card" target="tutorials/unit_tests" data-tag="Beginner">

Safeguard your code with unit tests

Write effective unit tests in Python to ensure the resilience of your
code and safeguard it against unexpected behaviors and regressions.

</div>

<div class="card" target="tutorials/pdf_reports">

Build PDF reports

Use QWeb, Odoo's powerful templating engine, to create custom PDF
reports for your documents.

</div>

<div class="card" target="tutorials/dashboards">

Visualize data in dashboards

Create data visualization dashboards using the enterprise edition
"Dashboard" view and so-called "SQL views".

</div>

</div>


---
## File: ./content/developer/tutorials/unit_tests.md

# Safeguard your code with unit tests

<div class="important">

<div class="title">

Important

</div>

This tutorial is an extension of the `getting_started` tutorial. Make
sure you have completed it and use the
<span class="title-ref">estate</span> module you have built as a base
for the exercises in this tutorial.

</div>

**Reference**: [Odoo's Test Framework: Learn Best
Practices](https://www.youtube.com/watch?v=JEIscps0OOQ) (Odoo Experience
2020) on YouTube.

Writing tests is a necessity for multiple reasons. Here is a
non-exhaustive list:

  - Ensure it will not be broken in the future
  - Define the scope of your code
  - Give examples of use cases
  - It is one way to technically document the code
  - Help you develop by defining your goal before working towards it

## Running Tests

Before knowing how to write tests, we need to know how to run them.

``` console
$ odoo-bin -h
Usage: odoo-bin [options]

Options:
--version             show program's version number and exit
-h, --help            show this help message and exit

[...]

Testing Configuration:
  --test-file=TEST_FILE
                      Launch a python test file.
  --test-enable       Enable unit tests.
  --test-tags=TEST_TAGS
                      Comma-separated list of specs to filter which tests to
                      execute. Enable unit tests if set. A filter spec has
                      the format: [-][tag][/module][:class][.method] The '-'
                      specifies if we want to include or exclude tests
                      matching this spec. The tag will match tags added on a
                      class with a @tagged decorator (all Test classes have
                      'standard' and 'at_install' tags until explicitly
                      removed, see the decorator documentation). '*' will
                      match all tags. If tag is omitted on include mode, its
                      value is 'standard'. If tag is omitted on exclude
                      mode, its value is '*'. The module, class, and method
                      will respectively match the module name, test class
                      name and test method name. Example: --test-tags
                      :TestClass.test_func,/test_module,external  Filtering
                      and executing the tests happens twice: right after
                      each module installation/update and at the end of the
                      modules loading. At each stage tests are filtered by
                      --test-tags specs and additionally by dynamic specs
                      'at_install' and 'post_install' correspondingly.
  --screencasts=DIR   Screencasts will go in DIR/{db_name}/screencasts.
  --screenshots=DIR   Screenshots will go in DIR/{db_name}/screenshots.
                      Defaults to /tmp/odoo_tests.

$ # run all the tests of account, and modules installed by account
$ # the dependencies already installed are not tested
$ # this takes some time because you need to install the modules, but at_install
$ # and post_install are respected
$ odoo-bin -i account --test-enable
$ # run all the tests in this file
$ odoo-bin --test-file=addons/account/tests/test_account_move_entry.py
$ # test tags can help you filter quite easily
$ odoo-bin --test-tags=/account:TestAccountMove.test_custom_currency_on_account_1
```

## Integration Bots

<div class="note">

<div class="title">

Note

</div>

This section is only for Odoo employees and people that are contributing
to <span class="title-ref">github.com/odoo</span>. We highly recommend
having your own CI if it is not the case.

</div>

When a test is written, it is important to make sure it always passes
when modifications are applied to the source code. To automate this
task, we use a development practice called Continuous Integration (CI).
This is why we have some bots running all the tests at different
moments. Whether you are working at Odoo or not, if you are trying to
merge something inside <span class="title-ref">odoo/odoo</span>,
<span class="title-ref">odoo/enterprise</span>,
<span class="title-ref">odoo/upgrade</span> or on odoo.sh, you will have
to go through the CI. If you are working on another project, you should
think of adding your own CI.

### Runbot

**Reference**: the documentation related to this topic can be found in
[Runbot FAQ](https://runbot.odoo.com/doc).

Most of the tests are run on [Runbot](https://runbot.odoo.com) every
time a commit is pushed on GitHub.

You can see the state of a commit/branch by filtering on the runbot
dashboard.

A **bundle** is created for each branch. A bundle consists of a
configuration and contains the batches.

A **batch** is a set of builds, depending on the parameters of the
bundle. A batch is green (i.e. passes the tests) if all the builds are
green.

A **build** is when we launch a server. It can be divided in sub-builds.
Usually there are builds for the community version, the enterprise
version (only if there is an enterprise branch but you can force the
build), and the migration of the branch. A build is green if every
sub-build is green.

A **sub-build** only does some parts of what a full build does. It is
used to speed up the CI process. Generally it is used to split the post
install tests in 4 parallel instances. A sub-build is green if all the
tests are passing and there are no errors/warnings logged.

<div class="note">

<div class="title">

Note

</div>

\* All tests are run whatever the modifications done. Correcting a typo
in an error message or refactoring a whole module triggers the same
tests. It will install all the modules. This means something might not
work if Runbot green but your changes depend on something you don't
depend on. \* The localization modules (i.e. country-specific modules)
are not installed on Runbot (except the generic one), some modules with
external dependencies can be excluded also. \* There is a nightly build
running additional tests, like module operations, localization, single
module installs, multi-builds for nondeterministic bugs, etc. These are
not kept in the standard CI to shorten the time of execution.

</div>

You can also login on a build built by Runbot. There are 3 users usable:
<span class="title-ref">admin</span>,
<span class="title-ref">demo</span> and
<span class="title-ref">portal</span>. The password is the same as the
login. This is useful to quickly test things on different versions
without having to build it locally. The full logs are also available;
these are used for monitoring.

### Robodoo

You will most likely have to gain a little bit more experience before
having the rights to summon robodoo, but here are a few remarks anyways.

Robodoo is the guy spamming the CI status as tags on your PRs, but he is
also the guy that kindly integrates your commits on the main
repositories.

When the last batch is green, the reviewer can ask robodoo to merge your
PR (actually it is more a <span class="title-ref">rebase</span> than a
<span class="title-ref">merge</span>). It will then go to the mergebot.

### Mergebot

[Mergebot](https://mergebot.odoo.com) is the last testing phase before
merging a PR.

It will take the commits in your branch not yet present on the target,
stage it and rerun the tests one more time, including the enterprise
version even if you are only changing something in community.

This step can fail with a <span class="title-ref">Staging failed</span>
error message. This could be due to

  - a nondeterministic bug that is already on the target. If you are an
    Odoo employee, you can check those here:
    <https://runbot.odoo.com/runbot/errors>
  - a nondeterministic bug that you introduced but wasn't detected in
    the CI before
  - an incompatibility with another commit merged right before and what
    you are trying to merge
  - an incompatibility with the enterprise repository if you only did
    changes in the community repo

Always check that the issue does not come from you before asking the
merge bot to retry: rebase your branch on the target and rerun the tests
locally.

## Modules

Because Odoo is modular, the tests need to be also modular. This means
tests are defined in the module that adds the functionality you are
adding in, and tests cannot depend on functionality coming from modules
your module doesn't depend on.

**Reference**: the documentation related to this topic can be found in
`Special Tags<reference/testing/tags>`.

``` python
from odoo.tests.common import SavepointCase
from odoo.tests import tagged

# The CI will run these tests after all the modules are installed,
# not right after installing the one defining it.
@tagged('post_install', '-at_install')  # add `post_install` and remove `at_install`
class PostInstallTestCase(SavepointCase):
    def test_01(self):
        ...

@tagged('at_install')  # this is the default
class AtInstallTestCase(SavepointCase):
    def test_01(self):
        ...
```

If the behavior you want to test can be changed by the installation of
another module, you need to ensure that the tag
<span class="title-ref">at\_install</span> is set; otherwise, you can
use the tag <span class="title-ref">post\_install</span> to speed up the
CI and ensure it is not changed if it shouldn't.

## Writing a test

**Reference**: the documentation related to this topic can be found in
[Python unittest](https://docs.python.org/3/library/unittest.html) and
`Testing Odoo<reference/testing>`.

Here are a few things to take into consideration before writing a test

  - The tests should be independent of the data currently in the
    database (including demo data)
  - Tests should not impact the database by leaving/changing residual
    data. This is usually done by the test framework by doing a
    rollback. Therefore, you must never call `cr.commit` in a test (nor
    anywhere else in the business code).
  - For a bug fix, the test should fail before applying the fix and pass
    after.
  - Don't test something that is already tested elsewhere; you can trust
    the ORM. Most of the tests in business modules should only test the
    business flows.
  - You shouldn't need to flush data into the database.

<div class="note">

<div class="title">

Note

</div>

Remember that `onchange` only applies in the Form views, not by changing
the attributes in python. This also applies in the tests. If you want to
emulate a Form view, you can use `odoo.tests.common.Form`.

</div>

The tests should be in a `tests` folder at the root of your module. Each
test file name should start with <span class="title-ref">test\_</span>
and be imported in the `__init__.py` of the test folder. You shouldn't
import the test folder/module in the `__init__.py` of the module.

``` bash
estate
├── models
│   ├── *.py
│   └── __init__.py
├── tests
│   ├── test_*.py
│   └── __init__.py
├── __init__.py
└── __manifest__.py
```

<div class="note">

<div class="title">

Note

</div>

Some older tests are extending `odoo.tests.common.TransactionCase`, but
they are less scalable. The difference is that the setup is done per
test method and not per test class. The data changed are rollbacked
between each test in <span class="title-ref">SavepointCase</span> to
have the same behavior as in
<span class="title-ref">TransactionCase</span>.

</div>

All the tests should extend `odoo.tests.common.SavepointCase`. You
usually define a `setUpClass`, and the tests. After doing the
<span class="title-ref">setUpClass</span>, you have an
<span class="title-ref">env</span> available on the class and can start
interacting with the ORM.

These test classes are built on top of the `unittest` python module.

``` python
from odoo.tests.common import SavepointCase
from odoo.exceptions import UserError
from odoo.tests import tagged

# The CI will run these tests after all the modules are installed,
# not right after installing the one defining it.
@tagged('post_install', '-at_install')
class EstateTestCase(SavepointCase):

    @classmethod
    def setUpClass(cls):
        # add env on cls and many other things
        super(EstateTestCase, cls).setUpClass()

        # create the data for each tests. By doing it in the setUpClass instead
        # of in a setUp or in each test case, we reduce the testing time and
        # the duplication of code.
        cls.properties = cls.env['estate.property'].create([...])

    def test_creation_area(self):
        """Test that the total_area is computed like it should."""
        self.properties.living_area = 20
        self.assertRecordValues(self.properties, [
           {'name': ..., 'total_area': ...},
           {'name': ..., 'total_area': ...},
        ])


    def test_action_sell(self):
        """Test that everything behaves like it should when selling a property."""
        self.properties.action_sold()
        self.assertRecordValues(self.properties, [
           {'name': ..., 'state': ...},
           {'name': ..., 'state': ...},
        ])

        with self.assertRaises(UserError):
            self.properties.forbidden_action_on_sold_property()
```

<div class="note">

<div class="title">

Note

</div>

For better readability, split your tests into multiple files depending
on the scope of the tests. You can also have a Common class that most of
the tests should inherit from; this common class can define the whole
setup for the module. For instance, in
[account](%7BGITHUB_PATH%7D/addons/account/tests/common.py).

</div>

<div class="exercise">

Ensure no one can create an offer for a sold Property, and create a test
for it.

</div>

<div class="exercise">

Someone keeps breaking the reset of Garden Area and Orientation when you
uncheck the Garden checkbox. Make sure it doesn't happen again.

<div class="tip">

<div class="title">

Tip

</div>

Tip: remember the note about <span class="title-ref">Form</span> a
little bit above.

</div>

</div>


---
## File: ./content/developer/tutorials/pdf_reports.md

# Build PDF Reports

<div class="important">

<div class="title">

Important

</div>

This tutorial is an extension of the `getting_started` tutorial. Make
sure you have completed it and use the
<span class="title-ref">estate</span> module you have built as a base
for the exercises in this tutorial.

</div>

We were previously `introduced to QWeb
<tutorials/getting_started/15_qwebintro>` where it was used to build a
kanban view. Now we will expand on one of QWeb's other main uses:
creating PDF reports. A common business requirement is the ability to
create documents to send to customers and to use internally. These
reports can be used to summarize and display information in an organized
template to support the business in different ways. Odoo can
additionally add our company's header and footer to our reports with
minimal extra effort.

The documentation related to this topic can be found in
`reference/qweb`, `reference/reports/report`, and the
`reference/actions/report` section of the Actions reference.

## File Structure

The bulk of a PDF report is its QWeb template. It also typically needs a
corresponding `ir.actions.report` to include the report within a
module's business logic. There is no strict rule for the file names or
where they are located, but these two parts are typically stored in 2
separate files within a `report` folder at the top level of your
module's directory. If a module has many or multiple long report
templates, then they are often organized logically across different
files named after the report(s) they contain. All actions for the
reports are usually stored in the same file ending with `_reports.xml`,
regardless of the number of reports it contains.

Therefore, it is expected that your work tree will look something like
this:

``` bash
estate
├── models
│   ├── *.py
│   └── __init__.py
├── report
│   ├── estate_report_templates.xml
│   └── estate_report_views.xml
├── security
│   └── ir.model.access.csv
├── views
│   └── *.xml
├── __init__.py
└── __manifest__.py
```

Note that you will often see other non-QWeb and non-XML files containing
"report" in their name also within the report folder. These are
unrelated to the reports covered in this tutorial and are covered in the
`dashboards` tutorial. For now you can think of them as customized views
that use direct SQL queries (sometimes referred to as SQL Views).

Don't forget to add whatever files your template and action view will be
into to your `__manifest__.py`. In this case, you will want to add the
files to the `data` list and remember that the files listed in a
manifest are loaded sequentially\!

## Basic Report

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, we will can print a report that
displays all offers for a property.

![Simple PDF report](pdf_reports/simple_report.png)

</div>

In our real estate example there are many useful reports that we could
create. One simple report we can create is one that displays all of a
property's offers.

### Report Data

Before we do anything we first need some data to populate our reports or
else this tutorial won't be very interesting. When creating reports, you
will need some data to test your report code and check that the
resulting look is as expected. It is a good idea to test with data that
will cover most or all of your expected use cases. A good representation
set for our simple report is:

  - At least 3 properties where 1 is "sold", 1 is "offer received" and 1
    is "new".
  - At least 2-3 offers for our "sold" and "offer received" properties

If you don't have a set of data like this already, you can either:

  - Complete the `define_module_data` tutorial (if you haven't done so
    already) and add the extra cases to your demo data (you may need to
    create a new database to load in the demo data).
  - Manually create the data in your database.
  - Copy this [data
    file](https://github.com/odoo/technical-training-solutions/blob/%7BCURRENT_MAJOR_BRANCH%7D-J_reports/estate/data/estate_demo.xml)
    into a new directory (data) in your estate module and copy [these
    lines](https://github.com/odoo/technical-training-solutions/blob/%7BCURRENT_MAJOR_BRANCH%7D-J_reports/estate/__manifest__.py#L21-L23)
    into your \_\_manifest\_\_.py file (you may need to create a new
    database to load in the demo data).

Before continuing, click through your data in your database and make
sure your data is as expected. Of course you can add the data after you
write your report code, but then you will not be able to incrementally
test portions of your code as you write it. This can make checking for
mistakes and debugging your code more difficult in the long run for
complicated reports.

### Minimal Template

A minimal viable template is viewable under the "Minimal viable
template" section of the `reference/reports/templates` documentation. We
can modify this example to build our minimal property offers template
file:

``` xml
<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="report_property_offers">
        <t t-foreach="docs" t-as="property">
            <t t-call="web.html_container">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2>
                            <span t-field="property.name"/>
                        </h2>
                        <div>
                            <strong>Expected Price: </strong>
                            <span t-field="property.expected_price"/>
                        </div>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Price</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="offers" t-value="property.mapped('offer_ids')"/>
                                <tr t-foreach="offers" t-as="offer">
                                    <td>
                                        <span t-field="offer.price"/>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </t>
            </t>
        </t>
    </template>
</odoo>
```

Most of the Odoo specific (i.e. non-HTML) items in our file are
explained in the minimal viable template section. Some additional
features in our template are:

  - The use of the `class="table"` attribute, so our table has some nice
    formatting. Twitter Bootstrap (we're using its table class in this
    case), and Font Awesome (useful for adding icons) classes can be
    used in your report template.
  - The use of `t-set`, `t-value`, `t-foreach`, and `t-as` so that we
    can loop over all the `offer_ids`.

If you are already familiar with website templating engines, then the
QWeb directives (i.e. the <span class="title-ref">t-</span> commands)
probably don't need much explanation and you can just look at its
`documentation <reference/qweb>` and skip ahead to the next subsection.

Otherwise you are encouraged to read more about them (
[Wikipedia](https://en.wikipedia.org/wiki/Template_processor) has a good
high level description), but the general idea is that QWeb provides the
ability to dynamically generate web code based on Odoo data and simple
commands. I.e. QWeb can access recordset data (and methods) and process
simple programming operations such as setting and accessing temporary
variables. For example, in the above example:

  - `t-set` creates a temporary variable called "offers" that has its
    value set by `t-value` to the current `estate.property` recordset's
    `offer_ids`.
  - The `t-foreach` and `t-as` usage is the equivalent to the Python:

<!-- end list -->

``` Python
for offer in offers:
```

### Report Action

Now that we have a template, we need to make it accessible in our app
via a `ir.actions.report`. A practical example of `ir.actions.report` is
[here](https://github.com/odoo/odoo/blob/0e12fa135882cd5095dbf15fe2f64231c6a84336/addons/event/report/event_event_reports.xml#L20-L30)
corresponding to [this
template](https://github.com/odoo/odoo/blob/0e12fa135882cd5095dbf15fe2f64231c6a84336/addons/event/report/event_event_templates.xml#L5).
Its contents are all explained in `the documentation
<reference/actions/report>`.

An `ir.actions.report` is primarily used via the Print menu of a model's
view. In the practical example, the `binding_model_id` specifies which
model's views the report should show, and Odoo will auto-magically add
it for you. Another common use case of the report action is to link it
to a button as we learned in `tutorials/getting_started/10_actions`.
This is handy for reports that only make sense under specific
conditions. For example, if we wanted to make a "Final Sale" report,
then we can link it to a "Print Sale Info" button that appears in the
form view only when the property is "Sold".

![Print Menu Button](pdf_reports/print_menu.png)

You may have noticed or are wondered why our report template loops
through a recordset. When our template is passed more than one record,
it can produce one PDF report for all the records. Using the Print menu
in the list view with multiple records selected will demonstrate this.

### Make a Report

Finally, you now know where to create your files and how the content of
the files should look. Happy report making\!

<div class="exercise">

Make a report.

  - Add the property offers report from the minimal template subsection
    to the Print menu of the Property views.
  - Improve the report by adding more data. Refer to the **Goal** of
    this section to see what additional data you can add and feel free
    to add even more.
  - Bonus: Make an extra flexible report by adding in some logic so that
    when there are no offers on a property then we don't create a table
    and instead write something about how there are no offers yet. Hint:
    you will need to use `t-if` and `t-else`.

Remember to check that your PDF reports match your data as expected.

</div>

## Sub-templates

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, we will have a sub-template that
we use in 2 reports.

![Report using a subtemplate](pdf_reports/report_subtemplate.png)

</div>

There are two main reasons for using sub-templates. One is to make the
code easier to read when working with extra-long or complicated
templates. The other is to reuse code where possible. Our simple
property offers report is useful, but listing property offers
information can be useful for more than just one report template. One
example is a report that lists all of a salesman's properties' offers.

See if you can understand how to call a sub-template by reading the
`documentation <reference/qweb/sub-templates>` on it and/or by looking
at an
[example](https://github.com/odoo/odoo/blob/0e12fa135882cd5095dbf15fe2f64231c6a84336/addons/portal/static/src/xml/portal_chatter.xml#L147-L160)
(remember QWeb uses the same control flows regardless if it is for a
report or a view in Odoo.)

<div class="exercise">

Create and use a sub-template.

  - Split the table portion of the offers into its own template.
    Remember to check that your original report still prints correctly
    afterwards.

  - Add a new report for `res.users` that allows you to print all of the
    Real Estate Properties that are visible in their form view (i.e. in
    the "Settings" app). Include the offers for each of those saleman's
    properties in the same report. Hint: since the `binding_model_id` in
    this case will not be within the estate module, you will need to use
    `ref="base.model_res_users"`.
    
    Your end result should look similar to the image in the **Goal** of
    this section.

Remember to check that your reports match your data as expected\!

</div>

## Report Inheritance

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, we will inherit the property
report in the `estate_account` module.

![An inherited report](pdf_reports/inherited_report.png)

</div>

Inheritance in QWeb uses the same `xpath` elements as `views inheritance
<reference/views/inheritance>`. A QWeb template refers to its parent
template in a different way though. It is even easier to do by just
adding the `inherit_id` attribute to the `template` element and setting
it equal to the *module.parent\_template\_id*.

We didn't add any new fields to any of the estate models in
<span class="title-ref">estate\_account</span>, but we can still add
information to our existing property report. For example, we know that
any "Sold" properties will already have an invoice created for them, so
we can add this information to our report.

<div class="exercise">

Inherit a report.

  - Extend the property report to include some information about the
    invoice. You can look at the **Goal** of this section for
    inspiration (i.e. print a line when the property is Done, otherwise
    print nothing).

Again, remember to check that your reports match your data as expected\!

</div>

## Additional Features

All the following extra features are described further in the
`reference/reports/report` documentation, including how to implement
each of them.

### Translations

We all know Odoo is used in multiple languages thanks to automated and
manual translating. QWeb reports are no exception\! Note that sometimes
the translations do not work properly if there are unnecessary spaces in
your template's text content, so try to avoid them when possible
(especially leading spaces).

### Reports are web pages

You probably are tired of hearing that QWeb creates HTML, but we're
saying it again\! One of the neat features of reports being written in
QWeb is they can be viewed within the web browser. This can be useful if
you want to embed a hyperlink that leads to a specific report. Note that
the usual security checks will still apply to prevent unauthorized users
from accessing the reports.

### Barcodes

Odoo has a built-in barcode image creator that allows for barcodes to be
embedded in your reports. Check out the corresponding
[code](https://github.com/odoo/odoo/blob/0e12fa135882cd5095dbf15fe2f64231c6a84336/addons/web/controllers/main.py#L2044-L2046)
to see all the supported barcode types.


---
## File: ./content/developer/tutorials/website.md

  - orphan

# Building a Website

<div class="danger">

<div class="title">

Danger

</div>

This tutorial is outdated. We recommend reading `getting_started`
instead.

</div>

<div class="warning">

<div class="title">

Warning

</div>

  - This guide assumes [basic knowledge of
    Python](http://docs.python.org/2/tutorial/)
  - This guide assumes `an installed Odoo
    <../../administration/install>`

</div>

## Creating a basic module

In Odoo, tasks are performed by creating modules.

Modules customize the behavior of an Odoo installation, either by adding
new behaviors or by altering existing ones (including behaviors added by
other modules).

`Odoo's scaffolding <reference/cmdline/scaffold>` can setup a basic
module. To quickly get started simply invoke:

``` console
$ ./odoo-bin scaffold Academy my-modules
```

This will automatically create a `my-modules` *module directory* with an
`academy` module inside. The directory can be an existing module
directory if you want, but the module name must be unique within the
directory.

## A demonstration module

We have a "complete" module ready for installation.

Although it does absolutely nothing we can install it:

  - start the Odoo server
    
    ``` console
    $ ./odoo-bin --addons-path addons,my-modules
    ```

  - go to <http://localhost:8069>

  - create a new database including demonstration data

  - to go `Settings --> Modules --> Modules`

  - in the top-right corner remove the *Installed* filter and search for
    *academy*

  - click the `Install` button for the *Academy* module

## To the browser

`Controllers <reference/controllers>` interpret browser requests and
send data back.

Add a simple controller and ensure it is imported by `__init__.py` (so
Odoo can find it):

``` python
# -*- coding: utf-8 -*-
from odoo import http

class Academy(http.Controller):

    @http.route('/academy/academy/', auth='public')
    def index(self, **kw):
        return "Hello, world"
```

Shut down your server (`^C`) then restart it:

``` console
$ ./odoo-bin --addons-path addons,my-modules
```

and open a page to <http://localhost:8069/academy/academy/>, you should
see your "page" appear:

![](website/helloworld.png)

## Templates

Generating HTML in Python isn't very pleasant.

The usual solution is
[templates](http://en.wikipedia.org/wiki/Web_template), pseudo-documents
with placeholders and display logic. Odoo allows any Python templating
system, but provides its own `QWeb <reference/qweb>` templating system
which integrates with other features.

Create a template and ensure the template file is registered in the
`__manifest__.py` manifest, and alter the controller to use our
template:

``` python
class Academy(http.Controller):

    @http.route('/academy/academy/', auth='public')
    def index(self, **kw):
        return http.request.render('academy.index', {
            'teachers': ["Diana Padilla", "Jody Caroll", "Lester Vaughn"],
        })
```

``` xml
<odoo>

    <template id="index">
        <title>Academy</title>
        <t t-foreach="teachers" t-as="teacher">
            <p><t t-esc="teacher"/></p>
        </t>
    </template>

</odoo>
```

The templates iterates (`t-foreach`) on all the teachers (passed through
the *template context*), and prints each teacher in its own paragraph.

Finally restart Odoo and update the module's data (to install the
template) by going to `Settings --> Modules --> Modules -->
Academy` and clicking `Upgrade`.

<div class="tip">

<div class="title">

Tip

</div>

Alternatively, Odoo can be restarted `and update modules at
the same time<odoo-bin -u>`:

``` console
$ odoo-bin --addons-path addons,my-modules -d academy -u academy
```

</div>

Going to <http://localhost:8069/academy/academy/> should now result in:

![image](website/basic-list.png)

## Storing data in Odoo

`Odoo models <reference/orm/model>` map to database tables.

In the previous section we just displayed a list of string entered
statically in the Python code. This doesn't allow modifications or
persistent storage so we'll now move our data to the database.

### Defining the data model

Define a teacher model, and ensure it is imported from `__init__.py` so
it is correctly loaded:

``` python
from odoo import models, fields, api

class Teachers(models.Model):
    _name = 'academy.teachers'

    name = fields.Char()
```

Then setup `basic access control <reference/security/acl>` for the model
and add them to the manifest:

``` python
# always loaded
'data': [
    'security/ir.model.access.csv',
    'templates.xml',
],
```

``` csv
id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink
access_academy_teachers,access_academy_teachers,model_academy_teachers,,1,0,0,0
```

this simply gives read access (`perm_read`) to all users (`group_id:id`
left empty).

<div class="note">

<div class="title">

Note

</div>

`Data files <reference/data>` (XML or CSV) must be added to the module
manifest, Python files (models or controllers) don't but have to be
imported from `__init__.py` (directly or indirectly)

</div>

<div class="warning">

<div class="title">

Warning

</div>

the administrator user bypasses access control, they have access to all
models even if not given access

</div>

### Demonstration data

The second step is to add some demonstration data to the system so it's
possible to test it easily. This is done by adding a `demo` `data file
<reference/data>`, which must be linked from the manifest:

``` xml
<odoo>

    <record id="padilla" model="academy.teachers">
        <field name="name">Diana Padilla</field>
    </record>
    <record id="carroll" model="academy.teachers">
        <field name="name">Jody Carroll</field>
    </record>
    <record id="vaughn" model="academy.teachers">
        <field name="name">Lester Vaughn</field>
    </record>

</odoo>
```

<div class="tip">

<div class="title">

Tip

</div>

`Data files <reference/data>` can be used for demo and non-demo data.
Demo data are only loaded in "demonstration mode" and can be used for
flow testing and demonstration, non-demo data are always loaded and used
as initial system setup.

In this case we're using demonstration data because an actual user of
the system would want to input or import their own teachers list, this
list is only useful for testing.

</div>

### Accessing the data

The last step is to alter model and template to use our demonstration
data:

1.  fetch the records from the database instead of having a static list
2.  Because `~odoo.models.Model.search` returns a set of records
    matching the filter ("all records" here), alter the template to
    print each teacher's `name`

<!-- end list -->

``` python
class Academy(http.Controller):

     @http.route('/academy/academy/', auth='public')
     def index(self, **kw):
         Teachers = http.request.env['academy.teachers']
         return http.request.render('academy.index', {
             'teachers': Teachers.search([])
         })
```

``` xml
<odoo>

    <template id="index">
         <title>Academy</title>
         <t t-foreach="teachers" t-as="teacher">
             <p><t t-esc="teacher.id"/> <t t-esc="teacher.name"/></p>
         </t>
    </template>

</odoo>
```

Restart the server and update the module (in order to update the
manifest and templates and load the demo file) then navigate to
<http://localhost:8069/academy/academy/>. The page should look slightly
different: names should simply be prefixed by a number (the database
identifier for the teacher).

## Website support

Odoo bundles a module dedicated to building websites.

So far we've used controllers fairly directly, but Odoo 8 added deeper
integration and a few other services (e.g. default styling, theming) via
the `website` module.

1.  first, add `website` as a dependency to `academy`
2.  then add the `website=True` flag on the controller, this sets up a
    few new variables on `the request object <reference/http/request>`
    and allows using the website layout in our template
3.  use the website layout in the template

<!-- end list -->

``` python
'version': '0.1',

# any module necessary for this one to work correctly
'depends': ['website'],

# always loaded
'data': [
```

``` python
class Academy(http.Controller):

     @http.route('/academy/academy/', auth='public', website=True)
     def index(self, **kw):
         Teachers = http.request.env['academy.teachers']
         return http.request.render('academy.index', {
             'teachers': Teachers.search([])
         })
```

``` xml
<odoo>

    <template id="index">
        <t t-call="website.layout">
            <t t-set="title">Academy</t>
            <div class="oe_structure">
                <div class="container">
                    <t t-foreach="teachers" t-as="teacher">
                        <p><t t-esc="teacher.id"/> <t t-esc="teacher.name"/></p>
                    </t>
                </div>
            </div>
        </t>
    </template>

</odoo>
```

After restarting the server while updating the module (in order to
update the manifest and template) access
<http://localhost:8069/academy/academy/> should yield a nicer looking
page with branding and a number of built-in page elements (top-level
menu, footer, …)

![image](website/layout.png)

The website layout also provides support for editing tools: click `Sign
In` (in the top-right), fill the credentials in (`admin` / `admin` by
default) then click `Log In`.

You're now in Odoo "proper": the administrative interface. For now click
on the `Website` menu item (top-left corner.

We're back in the website but as an administrator, with access to
advanced editing features provided by the *website* support:

  - a template code editor (`Customize --> HTML Editor`) where you can
    see and edit all templates used for the current page
  - the `Edit` button in the top-left switches to "editing mode" where
    blocks (snippets) and rich text editing are available
  - a number of other features such as mobile preview or `SEO (Search
    Engine Optimization)`

## URLs and routing

Controller methods are associated with *routes* via the
`~odoo.http.route` decorator which takes a routing string and a number
of attributes to customise its behavior or security.

We've seen a "literal" routing string, which matches a URL section
exactly, but routing strings can also use [converter
patterns](http://werkzeug.pocoo.org/docs/routing/#rule-format) which
match bits of URLs and make those available as local variables. For
instance we can create a new controller method which takes a bit of URL
and prints it out:

``` python
# New route
@http.route('/academy/<name>/', auth='public', website=True)
def teacher(self, name):
    return '<h1>{}</h1>'.format(name)
```

restart Odoo, access <http://localhost:8069/academy/Alice/> and
<http://localhost:8069/academy/Bob/> and see the difference.

As the name indicates, [converter
patterns](http://werkzeug.pocoo.org/docs/routing/#rule-format) don't
just do extraction, they also do *validation* and *conversion*, so we
can change the new controller to only accept integers:

``` python
@http.route('/academy/<int:id>/', auth='public', website=True)
def teacher(self, id):
    return '<h1>{} ({})</h1>'.format(id, type(id).__name__)
```

Restart Odoo, access <http://localhost:8069/academy/2>, note how the old
value was a string, but the new one was converted to an integers. Try
accessing <http://localhost:8069/academy/Carol/> and note that the page
was not found: since "Carol" is not an integer, the route was ignored
and no route could be found.

Odoo provides an additional converter called `model` which provides
records directly when given their id. Let's use this to create a generic
page for teacher biographies:

``` python
@http.route('/academy/<model("academy.teachers"):teacher>/', auth='public', website=True)
def teacher(self, teacher):
    return http.request.render('academy.biography', {
        'person': teacher
    })
```

``` xml
<template id="biography">
    <t t-call="website.layout">
        <t t-set="title">Academy</t>
        <div class="oe_structure"/>
        <div class="oe_structure">
            <div class="container">
                <h3><t t-esc="person.name"/></h3>
            </div>
        </div>
        <div class="oe_structure"/>
    </t>
</template>
```

then change the list of model to link to our new controller:

``` xml
<template id="index">
    <t t-call="website.layout">
        <t t-set="title">Academy</t>
        <div class="oe_structure">
            <div class="container">
                <t t-foreach="teachers" t-as="teacher">
                    <p>
                        <a t-attf-href="/academy/{{ slug(teacher) }}">
                        <t t-esc="teacher.name"/></a>
                    </p>
                </t>
            </div>
        </div>
    </t>
</template>
```

Restart Odoo and upgrade the module, then you can visit each teacher's
page. As an exercise, try adding blocks to a teacher's page to write a
biography, then go to another teacher's page and so forth. You will
discover, that your biography is shared between all teachers, because
blocks are added to the *template*, and the *biography* template is
shared between all teachers, when one page is edited they're all edited
at the same time.

## Field editing

Data which is specific to a record should be saved on that record, so
let us add a new biography field to our teachers:

``` python
class Teachers(models.Model):
    _name = 'academy.teachers'

    name = fields.Char()
    biography = fields.Html()
```

``` xml
<template id="biography">
    <t t-call="website.layout">
        <t t-set="title">Academy</t>
        <div class="oe_structure"/>
        <div class="oe_structure">
            <div class="container">
                <h3><t t-esc="person.name"/></h3>
                <div><t t-esc="person.biography"/></div>
            </div>
        </div>
        <div class="oe_structure"/>
    </t>
</template>
```

Restart Odoo and update the views, reload the teacher's page and… the
field is invisible since it contains nothing.

<div class="todo">

the view has been set to noupdate because modified previously, force via
`-i` or do something else?

</div>

For record fields, templates can use a special `t-field` directive which
allows editing the field content from the website using field-specific
interfaces. Change the *person* template to use `t-field`:

``` xml
<div class="oe_structure">
    <div class="container">
        <h3 t-field="person.name"/>
        <div t-field="person.biography"/>
    </div>
</div>
```

Restart Odoo and upgrade the module, there is now a placeholder under
the teacher's name and a new zone for blocks in `Edit` mode. Content
dropped there is stored in the corresponding teacher's `biography`
field, and thus specific to that teacher.

The teacher's name is also editable, and when saved the change is
visible on the index page.

`t-field` can also take formatting options which depend on the exact
field. For instance if we display the modification date for a teacher's
record:

``` xml
<div class="oe_structure">
    <div class="container">
        <h3 t-field="person.name"/>
        <p>Last modified: <i t-field="person.write_date"/></p>
        <div t-field="person.biography"/>
    </div>
</div>
```

it is displayed in a very "computery" manner and hard to read, but we
could ask for a human-readable version:

``` xml
<div class="oe_structure">
    <div class="container">
        <h3 t-field="person.name"/>
        <p>Last modified: <i t-field="person.write_date" t-options='{"format": "long"}'/></p>
        <div t-field="person.biography"/>
    </div>
</div>
```

or a relative display:

``` xml
<div class="oe_structure">
    <div class="container">
        <h3 t-field="person.name"/>
        <p>Last modified: <i t-field="person.write_date" t-options='{"widget": "relative"}'/></p>
        <div t-field="person.biography"/>
    </div>
</div>
```

## Administration and ERP integration

### A brief and incomplete introduction to the Odoo administration

The Odoo administration was briefly seen during the [website
support](#website-support) section. We can go back to it using
`Administrator --> Administrator` in the menu (or `Sign In` if you're
signed out).

The conceptual structure of the Odoo backend is simple:

1.  first are menus, a tree (menus can have sub-menus) of records. Menus
    without children map to…
2.  actions. Actions have various types: links, reports, code which Odoo
    should execute or data display. Data display actions are called
    *window actions*, and tell Odoo to display a given *model* according
    to a set of views…
3.  a view has a type, a broad category to which it corresponds (a list,
    a graph, a calendar) and an *architecture* which customises the way
    the model is displayed inside the view.

### Editing in the Odoo administration

By default, an Odoo model is essentially invisible to a user. To make it
visible it must be available through an action, which itself needs to be
reachable, generally through a menu.

Let's create a menu for our model:

``` python
# always loaded
'data': [
    'security/ir.model.access.csv',
    'templates.xml',
    'views.xml',
],
```

``` xml
<odoo>
    <record id="action_academy_teachers" model="ir.actions.act_window">
        <field name="name">Academy teachers</field>
        <field name="res_model">academy.teachers</field>
    </record>

    <menuitem sequence="0" id="menu_academy" name="Academy"/>
    <menuitem id="menu_academy_content" parent="menu_academy"
                name="Academy Content"/>
    <menuitem id="menu_academy_content_teachers"
                parent="menu_academy_content"
                action="action_academy_teachers"/>
</odoo>
```

then accessing <http://localhost:8069/web/> in the top left should be a
menu `Academy`, which is selected by default, as it is the first menu,
and having opened a listing of teachers. From the listing it is possible
to `Create` new teacher records, and to switch to the "form" by-record
view.

If there is no definition of how to present records (a `view
<reference/views>`) Odoo will automatically create a basic one
on-the-fly. In our case it works for the "list" view for now (only
displays the teacher's name) but in the "form" view the HTML `biography`
field is displayed side-by-side with the `name` field and not given
enough space. Let's define a custom form view to make viewing and
editing teacher records a better experience:

``` xml
<record id="academy_teacher_form" model="ir.ui.view">
    <field name="name">Academy teachers: form</field>
    <field name="model">academy.teachers</field>
    <field name="arch" type="xml">
        <form>
            <sheet>
                <field name="name"/>
                <field name="biography"/>
            </sheet>
        </form>
    </field>
</record>
```

### Relations between models

We have seen a pair of "basic" fields stored directly in the record.
There are `a number of basic fields <reference/fields/basic>`. The
second broad categories of fields are `relational
<reference/fields/relational>` and used to link records to one another
(within a model or across models).

For demonstration, let's create a *courses* model. Each course should
have a `teacher` field, linking to a single teacher record, but each
teacher can teach many courses:

``` python
class Courses(models.Model):
    _name = 'academy.courses'

    name = fields.Char()
    teacher_id = fields.Many2one('academy.teachers', string="Teacher")
```

``` csv
id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink
access_academy_teachers,access_academy_teachers,model_academy_teachers,,1,0,0,0
access_academy_courses,access_academy_courses,model_academy_courses,,1,0,0,0
```

let's also add views so we can see and edit a course's teacher:

``` xml
<record id="action_academy_courses" model="ir.actions.act_window">
    <field name="name">Academy courses</field>
    <field name="res_model">academy.courses</field>
</record>
<record id="academy_course_search" model="ir.ui.view">
    <field name="name">Academy courses: search</field>
    <field name="model">academy.courses</field>
    <field name="arch" type="xml">
        <search>
            <field name="name"/>
            <field name="teacher_id"/>
        </search>
    </field>
</record>
<record id="academy_course_list" model="ir.ui.view">
    <field name="name">Academy courses: list</field>
    <field name="model">academy.courses</field>
    <field name="arch" type="xml">
        <tree string="Courses">
            <field name="name"/>
            <field name="teacher_id"/>
        </tree>
    </field>
</record>
<record id="academy_course_form" model="ir.ui.view">
    <field name="name">Academy courses: form</field>
    <field name="model">academy.courses</field>
    <field name="arch" type="xml">
        <form>
            <sheet>
                <field name="name"/>
                <field name="teacher_id"/>
            </sheet>
        </form>
    </field>
</record>

<menuitem sequence="0" id="menu_academy" name="Academy"/>
<menuitem id="menu_academy_content" parent="menu_academy"
            name="Academy Content"/>
<menuitem id="menu_academy_content_courses"
            parent="menu_academy_content"
            action="action_academy_courses"/>
<menuitem id="menu_academy_content_teachers"
            parent="menu_academy_content"
            action="action_academy_teachers"/>
```

It should also be possible to create new courses directly from a
teacher's page, or to see all the courses they teach, so add `the
inverse relationship <odoo.fields.One2many>` to the *teachers* model:

``` python
class Teachers(models.Model):
    _name = 'academy.teachers'

    name = fields.Char()
    biography = fields.Html()

    course_ids = fields.One2many('academy.courses', 'teacher_id', string="Courses")

class Courses(models.Model):
    _name = 'academy.courses'

    name = fields.Char()
    teacher_id = fields.Many2one('academy.teachers', string="Teacher")
```

``` xml
<record id="academy_teacher_form" model="ir.ui.view">
    <field name="name">Academy teachers: form</field>
    <field name="model">academy.teachers</field>
    <field name="arch" type="xml">
        <form>
            <sheet>
                <field name="name"/>
                <field name="biography"/>
                <field name="course_ids">
                    <tree Sstring="Courses" editable="bottom">
                        <field name="name"/>
                    </tree>
                </field>
            </sheet>
        </form>
    </field>
</record>
```

### Discussions and notifications

Odoo provides technical models, which don't directly fulfill business
needs but which add capabilities to business objects without having to
build them by hand.

One of these is the *Chatter* system, part of Odoo's email and messaging
system, which can add notifications and discussion threads to any model.
The model simply has to `~odoo.models.Model._inherit` `mail.thread`, and
add the `message_ids` field to its form view to display the discussion
thread. Discussion threads are per-record.

For our academy, it makes sense to allow discussing courses to handle
e.g. scheduling changes or discussions between teachers and assistants:

``` python
'version': '0.1',

# any module necessary for this one to work correctly
'depends': ['website', 'mail'],

# always loaded
'data': [
```

``` python
class Courses(models.Model):
    _name = 'academy.courses'
    _inherit = 'mail.thread'

    name = fields.Char()
    teacher_id = fields.Many2one('academy.teachers', string="Teacher")
```

``` xml
<record id="academy_course_form" model="ir.ui.view">
    <field name="name">Academy courses: form</field>
    <field name="model">academy.courses</field>
    <field name="arch" type="xml">
        <form>
            <sheet>
                <field name="name"/>
                <field name="teacher_id"/>
            </sheet>
            <div class="oe_chatter">
                <field name="message_follower_ids" widget="mail_followers"/>
                <field name="message_ids" widget="mail_thread"/>
            </div>
        </form>
    </field>
</record>
```

At the bottom of each course form, there is now a discussion thread and
the possibility for users of the system to leave messages and follow or
unfollow discussions linked to specific courses.

### Selling courses

Odoo also provides business models which allow using or opting in
business needs more directly. For instance the `website_sale` module
sets up an e-commerce site based on the products in the Odoo system. We
can easily make course subscriptions sellable by making our courses
specific kinds of products.

Rather than the previous classical inheritance, this means replacing our
*course* model by the *product* model, and extending products in-place
(to add anything we need to it).

First of all we need to add a dependency on `website_sale` so we get
both products (via `sale`) and the ecommerce interface:

``` python
'version': '0.1',

# any module necessary for this one to work correctly
'depends': ['mail', 'website_sale'],

# always loaded
'data': [
```

restart Odoo, update your module, there is now a `Shop` section in the
website, listing a number of pre-filled (via demonstration data)
products.

The second step is to replace the *courses* model by `product.template`,
and add a new category of product for courses:

``` python
'security/ir.model.access.csv',
'templates.xml',
'views.xml',
'data.xml',
],
# only loaded in demonstration mode
'demo': [
```

``` xml
<odoo>
    <record model="product.public.category" id="category_courses">
        <field name="name">Courses</field>
        <field name="parent_id" ref="website_sale.categ_others"/>
    </record>
</odoo>
```

``` xml
<record id="course0" model="product.template">
    <field name="name">Course 0</field>
    <field name="teacher_id" ref="padilla"/>
    <field name="public_categ_ids" eval="[(4, ref('academy.category_courses'), False)]"/>
    <field name="website_published">True</field>
    <field name="list_price" type="float">0</field>
    <field name="type">service</field>
</record>
<record id="course1" model="product.template">
    <field name="name">Course 1</field>
    <field name="teacher_id" ref="padilla"/>
    <field name="public_categ_ids" eval="[(4, ref('academy.category_courses'), False)]"/>
    <field name="website_published">True</field>
    <field name="list_price" type="float">0</field>
    <field name="type">service</field>
</record>
<record id="course2" model="product.template">
    <field name="name">Course 2</field>
    <field name="teacher_id" ref="vaughn"/>
    <field name="public_categ_ids" eval="[(4, ref('academy.category_courses'), False)]"/>
    <field name="website_published">True</field>
    <field name="list_price" type="float">0</field>
    <field name="type">service</field>
</record>
```

``` python
class Courses(models.Model):
    _name = 'academy.courses'
    _inherit = ['mail.thread', 'product.template']

    name = fields.Char()
    teacher_id = fields.Many2one('academy.teachers', string="Teacher")
```

With this installed, a few courses are now available in the `Shop`,
though they may have to be looked for.

<div class="note">

<div class="title">

Note

</div>

  - to extend a model in-place, it's `inherited
    <odoo.models.Model._inherit>` without giving it a new
    `~odoo.models.Model._name`
  - `product.template` already uses the discussions system, so we can
    remove it from our extension model
  - we're creating our courses as *published* by default so they can be
    seen without having to log in

</div>

### Altering existing views

So far, we have briefly seen:

  - the creation of new models
  - the creation of new views
  - the creation of new records
  - the alteration of existing models

We're left with the alteration of existing records and the alteration of
existing views. We'll do both on the `Shop` pages.

View alteration is done by creating *extension* views, which are applied
on top of the original view and alter it. These alteration views can be
added or removed without modifying the original, making it easier to try
things out and roll changes back.

Since our courses are free, there is no reason to display their price on
the shop page, so we're going to alter the view and hide the price if
it's 0. The first task is finding out which view displays the price,
this can be done via `Customize --> HTML Editor` which lets us read the
various templates involved in rendering a page. Going through a few of
them, "Product item" looks a likely culprit.

Altering view architectures is done in 3 steps:

1.  Create a new view
2.  Extend the view to modify by setting the new view's `inherit_id` to
    the modified view's external id
3.  In the architecture, use the `xpath` tag to select and alter
    elements from the modified view

<!-- end list -->

``` xml
<template id="product_item_hide_no_price" inherit_id="website_sale.products_item">
    <xpath expr="//div[hasclass('product_price')]/b" position="attributes">
        <attribute name="t-if">product.price &gt; 0</attribute>
    </xpath>
</template>
```

The second thing we will change is making the product categories sidebar
visible by default: `Customize --> Product Categories` lets you toggle a
tree of product categories (used to filter the main display) on and off.

This is done via the `customize_show` and `active` fields of extension
templates: an extension template (such as the one we've just created)
can be *customize\_show=True*. This choice will display the view in the
`Customize` menu with a check box, allowing administrators to activate
or disable them (and easily customize their website pages).

We simply need to modify the *Product Categories* record and set its
default to *active="True"*:

``` xml
<record id="website_sale.products_categories" model="ir.ui.view">
    <field name="active" eval="True"/>
</record>
```

With this, the *Product Categories* sidebar will automatically be
enabled when the *Academy* module is installed.


---
## File: ./content/developer/tutorials/define_module_data.md

# Define module data

<div class="important">

<div class="title">

Important

</div>

This tutorial is an extension of the `getting_started` tutorial. Make
sure you have completed it and use the
<span class="title-ref">estate</span> module you have built as a base
for the exercises in this tutorial.

</div>

## Data Types

### Master Data

Master data is usually part of the technical or business requirements
for the module. In other words, such data is often necessary for the
module to work properly. This data will always be installed when
installing the module.

We already met technical data previously since we have defined `views
<reference/views>` and `actions <reference/actions>`. Those are one kind
of master data.

On top of technical data, business data can be defined: countries,
currencies, units of measure but also complete country localization
(legal reports, tax definitions, chart of account), and much more...

### Demo Data

Next to master data which are requirements for the modules to work
properly, we also like having data for demonstration purpose setups:

  - Help the sales representatives to make their demos quickly.
  - Have a set of working data for developers to test the new features
    and see what it looks like with something they might not have
    created without it.
  - Test that the data is loaded correctly, without raising an error.
  - Be ready to use most of the features quickly when creating a new
    database.

Demo data is automatically loaded when you start the server if you
didn't say explicitly you don't want it. This can be done in the
database manager or with the command line.

``` console
$ ./odoo-bin -h
Usage: odoo-bin [options]

Options:
--version             show program's version number and exit
-h, --help            show this help message and exit

Common options:
  [...]
  --without-demo=WITHOUT_DEMO
                      disable loading demo data for modules to be installed
                      (comma-separated, use "all" for all modules). Requires
                      -d and -i. Default is none
[...]

$ ./odoo-bin --addons-path=... -d db -i account --without-demo=all
```

## Data Declaration

### Manifest

**Reference**: the documentation related to this topic can be found in
`Module Manifests<reference/module/manifest>`.

The data is declared either in CSV either in XML. Each file containing
data must be added in the manifest for them to be loaded.

The keys to use in the manifest to add new data are `data` for the
master data and `demo` for the demo data. Both values should be a list
of strings representing the relative path to the files declaring the
data.

Usually, the demo data is set in a `demo` folder, the views and actions
are put in a `views` folder, the security related data is put in a
`security` folder, and the other data is set in a `data` folder.

If your work tree looks like this:

``` bash
estate
├── data
│   └── master_data.xml
├── demo
│   └── demo_data.xml
├── models
│   ├── *.py
│   └── __init__.py
├── security
│   └── ir.model.access.csv
├── views
│   └── estate_property_offer_views.xml
├── __init__.py
└── __manifest__.py
```

Your manifest should look like this:

``` python
# -*- coding: utf-8 -*-

{
    "name": "Real Estate",
    "depends": [
        ...
    ],
    "data": [
        "security/ir.model.access.csv",  # CSV and XML files are loaded at the same place
        "views/estate_property_offer_views.xml",  # Views are data too
        "data/master_data.xml",  # Split the data in multiple files depending on the model
    ],
    "demo": [
        "demo/demo_data.xml",
    ]
    "application": True,
}
```

### CSV

**Reference**: the documentation related to this topic can be found in
`CSV data files<reference/data/csvdatafiles>`.

The easiest way to declare simple data is by using the CSV format. This
is however limited in terms of features: use it for long lists of simple
models, but prefer XML in the other cases.

``` text
id,field_a,field_b,related_id:id
id1,valueA1,valueB1,module.relatedid
id2,valueA2,valueB2,module.relatedid
```

<div class="tip">

<div class="title">

Tip

</div>

Your IDE has probably an extension to have a syntax highlighting of the
CSV files

  - [Atom](https://atom.io/packages/rainbow-csv).
  - [PyCharm/IntelliJ](https://plugins.jetbrains.com/plugin/10037-csv-plugin).
  - [Vim](https://github.com/mechatroner/rainbow_csv).
  - [Visual
    Studio](https://marketplace.visualstudio.com/items?itemName=mechatroner.rainbow-csv).

</div>

<div class="exercise">

Add some standard Real Estate Property Types for the
<span class="title-ref">estate</span> module: Residential, Commercial,
Industrial and Land. These should always be installed.

</div>

### XML

**Reference**: the documentation related to this topic can be found in
`Data Files<reference/data>`.

When the data to create is a bit more complex it can be useful, or even
needed, to do it in XML.

``` xml
<odoo>
  <record id="id1" model="tutorial.example">
    <field name="field_a">valueA1</field>
    <field name="field_b">valueB1</field>
  </record>

  <record id="id2" model="tutorial.example">
    <field name="field_a">valueA2</field>
    <field name="field_b">valueB2</field>
  </record>
</odoo>
```

<div class="exercise">

Create some demo data for the <span class="title-ref">estate</span>
module.

| Field                                          | Values                 | Values                 |
| ---------------------------------------------- | ---------------------- | ---------------------- |
| name                                           | Big Villa              | Trailer home           |
| state                                          | New                    | Canceled               |
| description                                    | A nice and big villa   | Home in a trailer park |
| postcode                                       | 12345                  | 54321                  |
| date\_availability                             | 2020-02-02             | 1970-01-01             |
| expected\_price selling\_price                 | 1,600,000              | 100,000 120,000        |
| bedrooms                                       | 6                      | 1                      |
| living\_area                                   | 100                    | 10                     |
| facades                                        | 4                      | 4                      |
| garage garden garden\_area garden\_orientation | True True 100000 South | False                  |

</div>

#### Data Extension

During the Core Training, we saw in the
`tutorials/getting_started/13_inheritance` chapter we could inherit
(extend) an existing view. This was a special case of data extension:
any data can be extended in a module.

When you are adding new fields to an existing model in a new module, you
might want to populate those fields on the records created in the
modules you are depending on. This is done by giving the
<span class="title-ref">xml\_id</span> of the record you want to extend.
It won't replace it, in this case we will set the `field_c` to the given
value for both records.

``` xml
<odoo>
  <record id="id1" model="tutorial.example">
    <field name="field_c">valueC1</field>
  </record>

  <record id="id2" model="tutorial.example">
    <field name="field_c">valueC2</field>
  </record>
</odoo>
```

#### `ref`

Related fields can be set using the `ref` key. The value of that key is
the `xml_id` of the record you want to link. Remember the `xml_id` is
composed of the name of the module where the data is first declared,
followed by a dot, followed by the `id` of the record (just the `id`
works too if you are in the module declaring it).

``` xml
<odoo>
  <record id="id1" model="tutorial.example">
    <field name="related_id" ref="module.relatedid"/>
  </record>
</odoo>
```

<div class="exercise">

Create some demo data offers for the properties you created.

Create offers using the partners defined in `base`

| Partner        | Estate    | Price   | Validity |
| -------------- | --------- | ------- | -------- |
| Azure Interior | Big Villa | 10000   | 14       |
| Azure Interior | Big Villa | 1500000 | 14       |
| Deco Addict    | Big Villa | 1500001 | 14       |

</div>

<div class="exercise">

Both properties should be Residential properties.

</div>

#### `eval`

The value to assign to a field is not always a simple string and you
might need to compute it. It can also be used to optimize the insertion
of related values, or because a constraint forces you to add the related
values in batch. See :`Add X2many fields
<tutorials/getting_started/C_data/x2m>`.

``` xml
<odoo>
  <record id="id1" model="tutorial.example">
    <field name="year" eval="datetime.now().year+1"/>
  </record>
</odoo>
```

<div class="exercise">

The offers you added should always be in a date relative to the
installation of the module.

</div>

#### `search`

Sometimes, you need to call the ORM to do a `search`. This is not
feasible with the CSV format.

``` xml
<odoo>
  <record id="id1" model="account.move.line">
    <field name="account_id" search="[
      ('user_type_id', '=', ref('account.data_account_type_direct_costs')),
      ('company_id', '=', obj().env.company.id)]
    "/>
  </record>
</odoo>
```

In this code snippet, it is needed because the master data actually
depends on the localization installed.

#### `function`

You might also need to execute python code when loading the data.

``` xml
<function model="tutorial.example" name="action_validate">
    <value eval="[ref('demo_invoice_1')]"/>
</function>
```

<div class="exercise">

Validate one of the demo data offers by using the "Accept Offer" button.
Refuse the others.

</div>

### Add X2many fields

**Reference**: the documentation related to this topic can be found in
`Common ORM methods<reference/orm/models/crud>`.

If you need to add related data in a One2many or a Many2many field, you
can do so by using the common ORM methods.

``` xml
<odoo>
  <record id="id1" model="tutorial.example">
    <field name="related_ids" eval="[
        (0, 0, {
            'name': 'My name',
        }),
        (0, 0, {
            'name': 'Your name',
        }),
        (4, ref('model.xml_id')),
    ]"/>
  </record>
</odoo>
```

``` text
id,parent_id:id,name
"child1","module.parent","Name1"
"child2","module.parent","Name2"
"child3","module.parent","Name3"
```

<div class="exercise">

Create one new Property, but this time with some offers created directly
inside the One2many field linking to the Offers.

</div>

## Accessing the data

<div class="warning">

<div class="title">

Warning

</div>

You should never access demo data outside of the demo data declaration,
not even in tests.

</div>

There are multiple ways to access the master/demo data.

In python code, you can use the `env.ref(self, xml_id,
raise_if_not_found=True)` method. It returns the recordset linked to the
`xml_id` you specify.

In XML, you can use the <span class="title-ref">ref</span> key like this

``` xml
<odoo>
  <record id="id1" model="tutorial.example">
    <field name="related_id" ref="module.relatedid"/>
  </record>
</odoo>
```

It will call the ref method, and store the id of the record returned on
the field `related_id` of the record of type `tutorial.example` with id
`id1`.

In CSV, the title of the column must be suffixed with `:id` or `/id`.

``` text
id,parent_id:id,name
"child1","module.parent","Name1"
"child2","module.parent","Name2"
"child3","module.parent","Name3"
```

In SQL, it is more complicated, see `the advanced section
<tutorials/getting_started/C_data/xml_id>`.

<div class="warning">

<div class="title">

Warning

</div>

Data can always be deleted by the user. Always code defensively, taking
this into account.

</div>

## Advanced

### What is the XML id?

Because we don't want a column `xml_id` in every single SQL table of the
database, we need a mechanism to store it. This is done with the
`ir.model.data` model.

It contains the name of the record (the `xml_id`) along with the module
in which it is defined, the model defining it, and the id of it.

### No update

The records created with the `noupdate` flag won't be updated when
upgrading the module that created them, but it will be created if it
didn't exist yet.

<div class="note">

<div class="title">

Note

</div>

`odoo-bin -i module` will bypass this setting and always load the data.
But normally one shouldn't do this on a production database.

</div>

``` xml
<odoo noupdate="1">
  <record id="id1" model="model">
    <field name="fieldA" eval="True"/>
  </record>
</odoo>
```

### Import as SQL

In some cases, it makes sense to do the import directly in SQL. This is
however discouraged as it bypasses all the features of the ORM, computed
fields (including metadata) and python constraints.

<div class="note">

<div class="title">

Note

</div>

Generally using raw SQL also bypasses ACLs and increases the risks of
injections.

**Reference**: `Security in Odoo<reference/security>`

</div>

  - It can help to speed the import time by a lot [with huge
    files](https://github.com/odoo/enterprise/blob/d46cceef8c594b9056d0115edb7169e207a5986f/product_unspsc/hooks.py#L19).
  - For more complex imports like for the
    [translations](https://github.com/odoo/odoo/blob/e1f8d549895cd9c459e6350430f30d541d02838a/odoo/addons/base/models/ir_translation.py#L24).
  - It can be necessary to [initialize the
    database](https://github.com/odoo/odoo/blob/e1f8d549895cd9c459e6350430f30d541d02838a/odoo/addons/base/data/base_data.sql).


---
## File: ./content/developer/tutorials/getting_started.md

  - show-content

# Getting started

<div class="toctree" data-titlesonly="" data-glob="">

getting\_started/\*

</div>

Welcome to the Getting Started Odoo tutorial\! If you reached this page
that means you are interested in the development of your own Odoo
module. It might also mean that you recently joined the Odoo company for
a rather technical position. In any case, your journey to the technical
side of Odoo starts here.

The goal of this tutorial is for you to get an insight of the most
important parts of the Odoo development framework while developing your
own Odoo module to manage real estate assets. The chapters should be
followed in their given order since they cover the development of a new
Odoo application from scratch in an incremental way. In other words,
each chapter depends on the previous one.

<div class="attention">

<div class="title">

Attention

</div>

Are you following this tutorial as part of your technical onboarding as
an Odoo employee? Then, we ask you to complete all the chapters before
joining your new team.

</div>

Ready? Let's get started\!

  - `getting_started/01_architecture`
  - `getting_started/02_setup`
  - `getting_started/03_newapp`
  - `getting_started/04_basicmodel`
  - `getting_started/05_securityintro`
  - `getting_started/06_firstui`
  - `getting_started/07_basicviews`
  - `getting_started/08_relations`
  - `getting_started/09_compute_onchange`
  - `getting_started/10_actions`
  - `getting_started/11_constraints`
  - `getting_started/12_sprinkles`
  - `getting_started/13_inheritance`
  - `getting_started/14_other_module`
  - `getting_started/15_qwebintro`
  - `getting_started/16_final_word`


---
## File: ./content/developer/tutorials/backend.md

  - orphan

# Building a Module<span id="howto/base"></span>

<div class="danger">

<div class="title">

Danger

</div>

This tutorial is outdated. We recommend reading `getting_started`
instead.

</div>

<div class="warning">

<div class="title">

Warning

</div>

This tutorial requires `having installed Odoo
<../../administration/install>`

</div>

## Start/Stop the Odoo server

Odoo uses a client/server architecture in which clients are web browsers
accessing the Odoo server via RPC.

Business logic and extension is generally performed on the server side,
although supporting client features (e.g. new data representation such
as interactive maps) can be added to the client.

In order to start the server, simply invoke the command `odoo-bin
<reference/cmdline>` in the shell, adding the full path to the file if
necessary:

``` bash
odoo-bin
```

The server is stopped by hitting `Ctrl-C` twice from the terminal, or by
killing the corresponding OS process.

## Build an Odoo module

Both server and client extensions are packaged as *modules* which are
optionally loaded in a *database*.

Odoo modules can either add brand new business logic to an Odoo system,
or alter and extend existing business logic: a module can be created to
add your country's accounting rules to Odoo's generic accounting
support, while the next module adds support for real-time visualisation
of a bus fleet.

Everything in Odoo thus starts and ends with modules.

### Composition of a module

An Odoo module can contain a number of elements:

  - Business objects  
    Declared as Python classes, these resources are automatically
    persisted by Odoo based on their configuration

  - `Object views <reference/views>`  
    Definition of business objects UI display

  - `Data files <reference/data>`  
    XML or CSV files declaring the model metadata :
    
      - `views <reference/views>` or `reports <reference/reports>`,
      - configuration data (modules parametrization, `security rules
        <reference/security>`),
      - demonstration data
      - and more

  - `Web controllers <reference/controllers>`  
    Handle requests from web browsers

  - Static web data  
    Images, CSS or javascript files used by the web interface or website

### Module structure

Each module is a directory within a *module directory*. Module
directories are specified by using the `--addons-path <odoo-bin
--addons-path>` option.

<div class="tip aphorism">

<div class="title">

Tip

</div>

most command-line options can also be set using `a configuration file
<reference/cmdline/config>`

</div>

An Odoo module is declared by its `manifest
<reference/module/manifest>`.

A module is also a [Python
package](http://docs.python.org/2/tutorial/modules.html#packages) with a
`__init__.py` file, containing import instructions for various Python
files in the module.

For instance, if the module has a single `mymodule.py` file
`__init__.py` might contain:

    from . import mymodule

Odoo provides a mechanism to help set up a new module, `odoo-bin
<reference/cmdline/server>` has a subcommand `scaffold
<reference/cmdline/scaffold>` to create an empty module:

``` console
$ odoo-bin scaffold <module name> <where to put it>
```

The command creates a subdirectory for your module, and automatically
creates a bunch of standard files for a module. Most of them simply
contain commented code or XML. The usage of most of those files will be
explained along this tutorial.

<div class="exercise">

Module creation

Use the command line above to create an empty module Open Academy, and
install it in Odoo.

</div>

### Object-Relational Mapping

A key component of Odoo is the `ORM (Object-Relational Mapping)` layer.
This layer avoids having to write most `SQL (Structured Query Language)`
by hand and provides extensibility and security services\[1\].

Business objects are declared as Python classes extending
`~odoo.models.Model` which integrates them into the automated
persistence system.

Models can be configured by setting a number of attributes at their
definition. The most important attribute is `~odoo.models.Model._name`
which is required and defines the name for the model in the Odoo system.
Here is a minimally complete definition of a model:

    from odoo import models
    class MinimalModel(models.Model):
        _name = 'test.model'

### Model fields

Fields are used to define what the model can store and where. Fields are
defined as attributes on the model class:

    from odoo import models, fields
    
    class LessMinimalModel(models.Model):
        _name = 'test.model2'
    
        name = fields.Char()

#### Common Attributes

Much like the model itself, its fields can be configured, by passing
configuration attributes as parameters:

    name = fields.Char(required=True)

Some attributes are available on all fields, here are the most common
ones:

  - `~odoo.fields.Field.string` (`unicode`, default: field's name)  
    The label of the field in UI (visible by users).

  - `~odoo.fields.Field.required` (`bool`, default: `False`)  
    If `True`, the field can not be empty, it must either have a default
    value or always be given a value when creating a record.

  - `~odoo.fields.Field.help` (`unicode`, default: `''`)  
    Long-form, provides a help tooltip to users in the UI.

  - `~odoo.fields.Field.index` (`bool`, default: `False`)  
    Requests that Odoo create a [database
    index](http://use-the-index-luke.com/sql/preface) on the column.

#### Simple fields

There are two broad categories of fields: "simple" fields which are
atomic values stored directly in the model's table and "relational"
fields linking records (of the same model or of different models).

Example of simple fields are `~odoo.fields.Boolean`,
`~odoo.fields.Date`, `~odoo.fields.Char`.

#### Reserved fields

Odoo creates a few fields in all models\[2\]. These fields are managed
by the system and shouldn't be written to. They can be read if useful or
necessary:

  - `~odoo.fields.Model.id` (`~odoo.fields.Id`)  
    The unique identifier for a record in its model.

  - `~odoo.fields.Model.create_date` (`~odoo.fields.Datetime`)  
    Creation date of the record.

  - `~odoo.fields.Model.create_uid` (`~odoo.fields.Many2one`)  
    User who created the record.

  - `~odoo.fields.Model.write_date` (`~odoo.fields.Datetime`)  
    Last modification date of the record.

  - `~odoo.fields.Model.write_uid` (`~odoo.fields.Many2one`)  
    user who last modified the record.

#### Special fields

By default, Odoo also requires a `name` field on all models for various
display and search behaviors. The field used for these purposes can be
overridden by setting `~odoo.models.Model._rec_name`.

<div class="exercise">

Define a model

Define a new data model *Course* in the *openacademy* module. A course
has a title and a description. Courses must have a title.

</div>

### Data files

Odoo is a highly data driven system. Although behavior is customized
using [Python](http://python.org) code part of a module's value is in
the data it sets up when loaded.

<div class="tip aphorism">

<div class="title">

Tip

</div>

some modules exist solely to add data into Odoo

</div>

Module data is declared via `data files <reference/data>`, XML files
with `<record>` elements. Each `<record>` element creates or updates a
database record.

``` xml
<odoo>

        <record model="{model name}" id="{record identifier}">
            <field name="{a field name}">{a value}</field>
        </record>

</odoo>
```

  - `model` is the name of the Odoo model for the record.
  - `id` is an `external identifier`, it allows referring to the record
    (without having to know its in-database identifier).
  - `<field>` elements have a `name` which is the name of the field in
    the model (e.g. `description`). Their body is the field's value.

Data files have to be declared in the manifest file to be loaded, they
can be declared in the `'data'` list (always loaded) or in the `'demo'`
list (only loaded in demonstration mode).

<div class="exercise">

Define demonstration data

Create demonstration data filling the *Courses* model with a few
demonstration courses.

</div>

<div class="tip">

<div class="title">

Tip

</div>

The content of the data files is only loaded when a module is installed
or updated.

After making some changes, do not forget to use `odoo-bin -u openacademy
<reference/cmdline>` to save the changes to your database.

</div>

### Actions and Menus

Actions and menus are regular records in database, usually declared
through data files. Actions can be triggered in three ways:

1.  by clicking on menu items (linked to specific actions)
2.  by clicking on buttons in views (if these are connected to actions)
3.  as contextual actions on object

Because menus are somewhat complex to declare there is a `<menuitem>`
shortcut to declare an `ir.ui.menu` and connect it to the corresponding
action more easily.

``` xml
<record model="ir.actions.act_window" id="action_list_ideas">
    <field name="name">Ideas</field>
    <field name="res_model">idea.idea</field>
    <field name="view_mode">tree,form</field>
</record>
<menuitem id="menu_ideas" parent="menu_root" name="Ideas" sequence="10"
          action="action_list_ideas"/>
```

<div class="danger aphorism">

<div class="title">

Danger

</div>

The action must be declared before its corresponding menu in the XML
file.

Data files are executed sequentially, the action's `id` must be present
in the database before the menu can be created.

</div>

<div class="exercise">

Define new menu entries

Define new menu entries to access courses under the OpenAcademy menu
entry. A user should be able to:

  - display a list of all the courses
  - create/modify courses

</div>

## Basic views

Views define the way the records of a model are displayed. Each type of
view represents a mode of visualization (a list of records, a graph of
their aggregation, …). Views can either be requested generically via
their type (e.g. *a list of partners*) or specifically via their id. For
generic requests, the view with the correct type and the lowest priority
will be used (so the lowest-priority view of each type is the default
view for that type).

`View inheritance <reference/views/inheritance>` allows altering views
declared elsewhere (adding or removing content).

### Generic view declaration

A view is declared as a record of the model `ir.ui.view`. The view type
is implied by the root element of the `arch` field:

``` xml
<record model="ir.ui.view" id="view_id">
    <field name="name">view.name</field>
    <field name="model">object_name</field>
    <field name="priority" eval="16"/>
    <field name="arch" type="xml">
        <!-- view content: <form>, <tree>, <graph>, ... -->
    </field>
</record>
```

<div class="danger aphorism">

<div class="title">

Danger

</div>

The view's content is XML.

The `arch` field must thus be declared as `type="xml"` to be parsed
correctly.

</div>

### Tree views

Tree views, also called list views, display records in a tabular form.

Their root element is `<tree>`. The simplest form of the tree view
simply lists all the fields to display in the table (each field as a
column):

``` xml
<tree string="Idea list">
    <field name="name"/>
    <field name="inventor_id"/>
</tree>
```

### Form views

Forms are used to create and edit single records.

Their root element is `<form>`. They are composed of high-level
structure elements (groups, notebooks) and interactive elements (buttons
and fields):

``` xml
<form string="Idea form">
    <group colspan="4">
        <group colspan="2" col="2">
            <separator string="General stuff" colspan="2"/>
            <field name="name"/>
            <field name="inventor_id"/>
        </group>

        <group colspan="2" col="2">
            <separator string="Dates" colspan="2"/>
            <field name="active"/>
            <field name="invent_date" readonly="1"/>
        </group>

        <notebook colspan="4">
            <page string="Description">
                <field name="description" nolabel="1"/>
            </page>
        </notebook>

        <field name="state"/>
    </group>
</form>
```

<div class="exercise">

Customise form view using XML

Create your own form view for the Course object. Data displayed should
be: the name and the description of the course.

</div>

<div class="exercise">

Notebooks

In the Course form view, put the description field under a tab, such
that it will be easier to add other tabs later, containing additional
information.

</div>

Form views can also use plain HTML for more flexible layouts:

``` xml
<form string="Idea Form">
    <header>
        <button string="Confirm" type="object" name="action_confirm"
                states="draft" class="oe_highlight" />
        <button string="Mark as done" type="object" name="action_done"
                states="confirmed" class="oe_highlight"/>
        <button string="Reset to draft" type="object" name="action_draft"
                states="confirmed,done" />
        <field name="state" widget="statusbar"/>
    </header>
    <sheet>
        <div class="oe_title">
            <label for="name" class="oe_edit_only" string="Idea Name" />
            <h1><field name="name" /></h1>
        </div>
        <separator string="General" colspan="2" />
        <group colspan="2" col="2">
            <field name="description" placeholder="Idea description..." />
        </group>
    </sheet>
</form>
```

### Search views

Search views customize the search field associated with the list view
(and other aggregated views). Their root element is `<search>` and
they're composed of fields defining which fields can be searched on:

``` xml
<search>
    <field name="name"/>
    <field name="inventor_id"/>
</search>
```

If no search view exists for the model, Odoo generates one which only
allows searching on the `name` field.

<div class="exercise">

Search courses

Allow searching for courses based on their title or their description.

</div>

## Relations between models

A record from a model may be related to a record from another model. For
instance, a sale order record is related to a client record that
contains the client data; it is also related to its sale order line
records.

<div class="exercise">

Create a session model

For the module Open Academy, we consider a model for *sessions*: a
session is an occurrence of a course taught at a given time for a given
audience.

Create a model for *sessions*. A session has a name, a start date, a
duration and a number of seats. Add an action and a menu item to display
them. Make the new model visible via a menu item.

</div>

### Relational fields

Relational fields link records, either of the same model (hierarchies)
or between different models.

Relational field types are:

  - `Many2one(other_model, ondelete='set null')
    <odoo.fields.Many2one>`  
    A simple link to an other object:
    
        print(foo.other_id.name)
    
    <div class="seealso">
    
    [foreign
    keys](http://www.postgresql.org/docs/9.3/static/tutorial-fk.html)
    
    </div>

  - `One2many(other_model, related_field) <odoo.fields.One2many>`  
    A virtual relationship, inverse of a `~odoo.fields.Many2one`. A
    `~odoo.fields.One2many` behaves as a container of records, accessing
    it results in a (possibly empty) set of records:
    
        for other in foo.other_ids:
            print(other.name)
    
    <div class="danger">
    
    <div class="title">
    
    Danger
    
    </div>
    
    Because a `~odoo.fields.One2many` is a virtual relationship, there
    *must* be a `~odoo.fields.Many2one` field in the `{other_model}`,
    and its name *must* be `{related_field}`
    
    </div>

  - `Many2many(other_model) <odoo.fields.Many2many>`  
    Bidirectional multiple relationship, any record on one side can be
    related to any number of records on the other side. Behaves as a
    container of records, accessing it also results in a possibly empty
    set of records:
    
        for other in foo.other_ids:
            print(other.name)

<div class="exercise">

Many2one relations

Using a many2one, modify the *Course* and *Session* models to reflect
their relation with other models:

  - A course has a *responsible* user; the value of that field is a
    record of the built-in model `res.users`.
  - A session has an *instructor*; the value of that field is a record
    of the built-in model `res.partner`.
  - A session is related to a *course*; the value of that field is a
    record of the model `openacademy.course` and is required.
  - Adapt the views.

</div>

<div class="exercise">

Inverse one2many relations

Using the inverse relational field one2many, modify the models to
reflect the relation between courses and sessions.

</div>

<div class="exercise">

Multiple many2many relations

Using the relational field many2many, modify the *Session* model to
relate every session to a set of *attendees*. Attendees will be
represented by partner records, so we will relate to the built-in model
`res.partner`. Adapt the views accordingly.

</div>

## Inheritance

### Model inheritance

Odoo provides two *inheritance* mechanisms to extend an existing model
in a modular way.

The first inheritance mechanism allows a module to modify the behavior
of a model defined in another module:

  - add fields to a model,
  - override the definition of fields on a model,
  - add constraints to a model,
  - add methods to a model,
  - override existing methods on a model.

The second inheritance mechanism (delegation) allows to link every
record of a model to a record in a parent model, and provides
transparent access to the fields of the parent record.

![image](../reference/addons/orm/inheritance_methods.png)

<div class="seealso">

\* `~odoo.models.Model._inherit` \* `~odoo.models.Model._inherits`

</div>

### View inheritance

Instead of modifying existing views in place (by overwriting them), Odoo
provides view inheritance where children "extension" views are applied
on top of root views, and can add or remove content from their parent.

An extension view references its parent using the `inherit_id` field,
and instead of a single view its `arch` field is composed of any number
of `xpath` elements selecting and altering the content of their parent
view:

``` xml
<!-- improved idea categories list -->
<record id="idea_category_list2" model="ir.ui.view">
    <field name="name">id.category.list2</field>
    <field name="model">idea.category</field>
    <field name="inherit_id" ref="id_category_list"/>
    <field name="arch" type="xml">
        <!-- find field description and add the field
             idea_ids after it -->
        <xpath expr="//field[@name='description']" position="after">
          <field name="idea_ids" string="Number of ideas"/>
        </xpath>
    </field>
</record>
```

  - `expr`  
    An [XPath](http://w3.org/TR/xpath) expression selecting a single
    element in the parent view. Raises an error if it matches no element
    or more than one

  - `position`  
    Operation to apply to the matched element:
    
      - `inside`  
        appends `xpath`'s body at the end of the matched element
    
      - `replace`  
        replaces the matched element with the `xpath`'s body, replacing
        any `$0` node occurrence in the new body with the original
        element
    
      - `before`  
        inserts the `xpath`'s body as a sibling before the matched
        element
    
      - `after`  
        inserts the `xpaths`'s body as a sibling after the matched
        element
    
      - `attributes`  
        alters the attributes of the matched element using special
        `attribute` elements in the `xpath`'s body

<div class="tip">

<div class="title">

Tip

</div>

When matching a single element, the `position` attribute can be set
directly on the element to be found. Both inheritances below will give
the same result.

``` xml
<xpath expr="//field[@name='description']" position="after">
    <field name="idea_ids" />
</xpath>

<field name="description" position="after">
    <field name="idea_ids" />
</field>
```

</div>

<div class="exercise">

Alter existing content

  - Using model inheritance, modify the existing *Partner* model to add
    an `instructor` boolean field, and a many2many field that
    corresponds to the session-partner relation
  - Using view inheritance, display this fields in the partner form view

</div>

#### Domains

In Odoo, `reference/orm/domains` are values that encode conditions on
records. A domain is a list of criteria used to select a subset of a
model's records. Each criteria is a triple with a field name, an
operator and a value.

For instance, when used on the *Product* model the following domain
selects all *services* with a unit price over *1000*:

    [('product_type', '=', 'service'), ('unit_price', '>', 1000)]

By default criteria are combined with an implicit AND. The logical
operators `&` (AND), `|` (OR) and `!` (NOT) can be used to explicitly
combine criteria. They are used in prefix position (the operator is
inserted before its arguments rather than between). For instance to
select products "which are services *OR* have a unit price which is
*NOT* between 1000 and 2000":

    ['|',
        ('product_type', '=', 'service'),
        '!', '&',
            ('unit_price', '>=', 1000),
            ('unit_price', '<', 2000)]

A `domain` parameter can be added to relational fields to limit valid
records for the relation when trying to select records in the client
interface.

<div class="exercise">

Domains on relational fields

When selecting the instructor for a *Session*, only instructors
(partners with `instructor` set to `True`) should be visible.

</div>

<div class="exercise">

More complex domains

Create new partner categories *Teacher / Level 1* and *Teacher / Level
2*. The instructor for a session can be either an instructor or a
teacher (of any level).

</div>

## Computed fields and default values

So far fields have been stored directly in and retrieved directly from
the database. Fields can also be *computed*. In that case, the field's
value is not retrieved from the database but computed on-the-fly by
calling a method of the model.

To create a computed field, create a field and set its attribute
`~odoo.fields.Field.compute` to the name of a method. The computation
method should simply set the value of the field to compute on every
record in `self`.

<div class="danger aphorism">

<div class="title">

Danger

</div>

`self` is a collection

The object `self` is a *recordset*, i.e., an ordered collection of
records. It supports the standard Python operations on collections, like
`len(self)` and `iter(self)`, plus extra set operations like `recs1 +
recs2`.

Iterating over `self` gives the records one by one, where each record is
itself a collection of size 1. You can access/assign fields on single
records by using the dot notation, like `record.name`.

</div>

``` python
import random
from odoo import models, fields, api

class ComputedModel(models.Model):
    _name = 'test.computed'

    name = fields.Char(compute='_compute_name')

    def _compute_name(self):
        for record in self:
            record.name = str(random.randint(1, 1e6))
```

### Dependencies

The value of a computed field usually depends on the values of other
fields on the computed record. The ORM expects the developer to specify
those dependencies on the compute method with the decorator
`~odoo.api.depends`. The given dependencies are used by the ORM to
trigger the recomputation of the field whenever some of its dependencies
have been modified:

    from odoo import models, fields, api
    
    class ComputedModel(models.Model):
        _name = 'test.computed'
    
        name = fields.Char(compute='_compute_name')
        value = fields.Integer()
    
        @api.depends('value')
        def _compute_name(self):
            for record in self:
                record.name = "Record with value %s" % record.value

<div class="exercise">

Computed fields

  - Add the percentage of taken seats to the *Session* model
  - Display that field in the tree and form views
  - Display the field as a progress bar

</div>

### Default values

Any field can be given a default value. In the field definition, add the
option `default=X` where `X` is either a Python literal value (boolean,
integer, float, string), or a function taking a recordset and returning
a value:

    name = fields.Char(default="Unknown")
    user_id = fields.Many2one('res.users', default=lambda self: self.env.user)

<div class="note">

<div class="title">

Note

</div>

The object `self.env` gives access to request parameters and other
useful things:

  - `self.env.cr` or `self._cr` is the database *cursor* object; it is
    used for querying the database
  - `self.env.uid` or `self._uid` is the current user's database id
  - `self.env.user` is the current user's record
  - `self.env.context` or `self._context` is the context dictionary
  - `self.env.ref(xml_id)` returns the record corresponding to an XML id
  - `self.env[model_name]` returns an instance of the given model

</div>

<div class="exercise">

Active objects – Default values

  - Define the start\_date default value as today (see
    `~odoo.fields.Date`).
  - Add a field `active` in the class Session, and set sessions as
    active by default.

</div>

## Onchange

The "onchange" mechanism provides a way for the client interface to
update a form whenever the user has filled in a value in a field,
without saving anything to the database.

For instance, suppose a model has three fields `amount`, `unit_price`
and `price`, and you want to update the price on the form when any of
the other fields is modified. To achieve this, define a method where
`self` represents the record in the form view, and decorate it with
`~odoo.api.onchange` to specify on which field it has to be triggered.
Any change you make on `self` will be reflected on the form.

``` xml
<!-- content of form view -->
<field name="amount"/>
<field name="unit_price"/>
<field name="price" readonly="1"/>
```

``` python
# onchange handler
@api.onchange('amount', 'unit_price')
def _onchange_price(self):
    # set auto-changing field
    self.price = self.amount * self.unit_price
    # Can optionally return a warning and domains
    return {
        'warning': {
            'title': "Something bad happened",
            'message': "It was very bad indeed",
        }
    }
```

For computed fields, valued `onchange` behavior is built-in as can be
seen by playing with the *Session* form: change the number of seats or
participants, and the `taken_seats` progressbar is automatically
updated.

<div class="exercise">

Warning

Add an explicit onchange to warn about invalid values, like a negative
number of seats, or more participants than seats.

</div>

## Model constraints

Odoo provides two ways to set up automatically verified invariants:
`Python constraints <odoo.api.constrains>` and `SQL constraints
<odoo.models.Model._sql_constraints>`.

A Python constraint is defined as a method decorated with
`~odoo.api.constrains`, and invoked on a recordset. The decorator
specifies which fields are involved in the constraint, so that the
constraint is automatically evaluated when one of them is modified. The
method is expected to raise an exception if its invariant is not
satisfied:

    from odoo.exceptions import ValidationError
    
    @api.constrains('age')
    def _check_something(self):
        for record in self:
            if record.age > 20:
                raise ValidationError("Your record is too old: %s" % record.age)
        # all records passed the test, don't return anything

<div class="exercise">

Add Python constraints

Add a constraint that checks that the instructor is not present in the
attendees of his/her own session.

</div>

SQL constraints are defined through the model attribute
`~odoo.models.Model._sql_constraints`. The latter is assigned to a list
of triples of strings `(name, sql_definition, message)`, where `name` is
a valid SQL constraint name, `sql_definition` is a
[table\_constraint](http://www.postgresql.org/docs/9.3/static/ddl-constraints.html)
expression, and `message` is the error message.

<div class="exercise">

Add SQL constraints

With the help of [PostgreSQL's
documentation](http://www.postgresql.org/docs/9.3/static/ddl-constraints.html)
, add the following constraints:

1.  CHECK that the course description and the course title are different
2.  Make the Course's name UNIQUE

</div>

<div class="exercise">

Exercise 6 - Add a duplicate option

Since we added a constraint for the Course name uniqueness, it is not
possible to use the "duplicate" function anymore (`Form -->
Duplicate`).

Re-implement your own "copy" method which allows to duplicate the Course
object, changing the original name into "Copy of \[original name\]".

</div>

## Advanced Views

### Tree views

Tree views can take supplementary attributes to further customize their
behavior:

  - `decoration-{$name}`  
    allow changing the style of a row's text based on the corresponding
    record's attributes.
    
    Values are Python expressions. For each record, the expression is
    evaluated with the record's attributes as context values and if
    `true`, the corresponding style is applied to the row. Here are some
    of the other values available in the context:
    
      - `uid`: the id of the current user,
      - `today`: the current local date as a string of the form
        `YYYY-MM-DD`,
      - `now`: same as `today` with the addition of the current time.
        This value is formatted as `YYYY-MM-DD hh:mm:ss`.
    
    `{$name}` can be `bf` (`font-weight: bold`), `it` (`font-style:
    italic`), or any [bootstrap contextual
    color](https://getbootstrap.com/docs/3.3/components/#available-variations)
    (`danger`, `info`, `muted`, `primary`, `success` or `warning`).
    
    ``` xml
    <tree string="Idea Categories" decoration-info="state=='draft'"
        decoration-danger="state=='trashed'">
        <field name="name"/>
        <field name="state"/>
    </tree>
    ```

  - `editable`  
    Either `"top"` or `"bottom"`. Makes the tree view editable in-place
    (rather than having to go through the form view), the value is the
    position where new rows appear.

<div class="exercise">

List coloring

Modify the Session tree view in such a way that sessions lasting less
than 5 days are colored blue, and the ones lasting more than 15 days are
colored red.

</div>

### Calendars

Displays records as calendar events. Their root element is `<calendar>`
and their most common attributes are:

  - `color`  
    The name of the field used for *color segmentation*. Colors are
    automatically distributed to events, but events in the same color
    segment (records which have the same value for their `@color` field)
    will be given the same color.

  - `date_start`  
    record's field holding the start date/time for the event

  - `date_stop` (optional)  
      record's field holding the end date/time for the event

  - `string`  
    record's field to define the label for each calendar event

<!-- end list -->

``` xml
<calendar string="Ideas" date_start="invent_date" color="inventor_id">
    <field name="name"/>
</calendar>
```

<div class="exercise">

Calendar view

Add a Calendar view to the *Session* model enabling the user to view the
events associated to the Open Academy.

</div>

### Search views

Search view `<field>` elements can have a `@filter_domain` that
overrides the domain generated for searching on the given field. In the
given domain, `self` represents the value entered by the user. In the
example below, it is used to search on both fields `name` and
`description`.

Search views can also contain `<filter>` elements, which act as toggles
for predefined searches. Filters must have one of the following
attributes:

  - `domain`  
    add the given domain to the current search

  - `context`  
    add some context to the current search; use the key `group_by` to
    group results on the given field name

<!-- end list -->

``` xml
<search string="Ideas">
    <field name="name"/>
    <field name="description" string="Name and description"
           filter_domain="['|', ('name', 'ilike', self), ('description', 'ilike', self)]"/>
    <field name="inventor_id"/>
    <field name="country_id" widget="selection"/>

    <filter name="my_ideas" string="My Ideas"
            domain="[('inventor_id', '=', uid)]"/>
    <group string="Group By">
        <filter name="group_by_inventor" string="Inventor"
                context="{'group_by': 'inventor_id'}"/>
    </group>
</search>
```

To use a non-default search view in an action, it should be linked using
the `search_view_id` field of the action record.

The action can also set default values for search fields through its
`context` field: context keys of the form `search_default_{field_name}`
will initialize *field\_name* with the provided value. Search filters
must have an optional `@name` to have a default and behave as booleans
(they can only be enabled by default).

<div class="exercise">

Search views

1.  Add a button to filter the courses for which the current user is the
    responsible in the course search view. Make it selected by default.
2.  Add a button to group courses by responsible user.

</div>

### Gantt

<div class="warning">

<div class="title">

Warning

</div>

The gantt view requires the web\_gantt module which is present in the
`enterprise edition
<install/editions>` version.

</div>

Horizontal bar charts typically used to show project planning and
advancement, their root element is `<gantt>`.

``` xml
<gantt string="Ideas"
       date_start="invent_date"
       date_stop="date_finished"
       progress="progress"
       default_group_by="inventor_id" />
```

<div class="exercise">

Gantt charts

Add a Gantt Chart enabling the user to view the sessions scheduling
linked to the Open Academy module. The sessions should be grouped by
instructor.

</div>

### Graph views

Graph views allow aggregated overview and analysis of models, their root
element is `<graph>`.

<div class="note">

<div class="title">

Note

</div>

Pivot views (element `<pivot>`) a multidimensional table, allows the
selection of filers and dimensions to get the right aggregated dataset
before moving to a more graphical overview. The pivot view shares the
same content definition as graph views.

</div>

Graph views have 4 display modes, the default mode is selected using the
`@type` attribute.

  - Bar (default)  
    a bar chart, the first dimension is used to define groups on the
    horizontal axis, other dimensions define aggregated bars within each
    group.
    
    By default bars are side-by-side, they can be stacked by using
    `@stacked="True"` on the `<graph>`

  - Line  
    2-dimensional line chart

  - Pie  
    2-dimensional pie

Graph views contain `<field>` with a mandatory `@type` attribute taking
the values:

  - `row` (default)  
    the field should be aggregated by default

  - `measure`  
    the field should be aggregated rather than grouped on

<!-- end list -->

``` xml
<graph string="Total idea score by Inventor">
    <field name="inventor_id"/>
    <field name="score" type="measure"/>
</graph>
```

<div class="warning">

<div class="title">

Warning

</div>

Graph views perform aggregations on database values, they do not work
with non-stored computed fields.

</div>

<div class="exercise">

Graph view

Add a Graph view in the Session object that displays, for each course,
the number of attendees under the form of a bar chart.

</div>

### Kanban

Used to organize tasks, production processes, etc… their root element is
`<kanban>`.

A kanban view shows a set of cards possibly grouped in columns. Each
card represents a record, and each column the values of an aggregation
field.

For instance, project tasks may be organized by stage (each column is a
stage), or by responsible (each column is a user), and so on.

Kanban views define the structure of each card as a mix of form elements
(including basic HTML) and `reference/qweb`.

<div class="exercise">

Kanban view

Add a Kanban view that displays sessions grouped by course (columns are
thus courses).

</div>

## Security

Access control mechanisms must be configured to achieve a coherent
security policy.

### Group-based access control mechanisms

Groups are created as normal records on the model `res.groups`, and
granted menu access via menu definitions. However even without a menu,
objects may still be accessible indirectly, so actual object-level
permissions (read, write, create, unlink) must be defined for groups.
They are usually inserted via CSV files inside modules. It is also
possible to restrict access to specific fields on a view or object using
the field's groups attribute.

### Access rights

Access rights are defined as records of the model `ir.model.access`.
Each access right is associated to a model, a group (or no group for
global access), and a set of permissions: read, write, create, unlink.
Such access rights are usually created by a CSV file named after its
model: `ir.model.access.csv`.

``` text
id,name,model_id/id,group_id/id,perm_read,perm_write,perm_create,perm_unlink
access_idea_idea,idea.idea,model_idea_idea,base.group_user,1,1,1,0
access_idea_vote,idea.vote,model_idea_vote,base.group_user,1,1,1,0
```

<div class="exercise">

Add access control through the Odoo interface

Create a new user "John Smith". Then create a group "OpenAcademy /
Session Read" with read access to the *Session* model.

</div>

<div class="exercise">

Add access control through data files in your module

Using data files,

  - Create a group *OpenAcademy / Manager* with full access to all
    OpenAcademy models
  - Make *Session* and *Course* readable by all users

</div>

### Record rules

A record rule restricts the access rights to a subset of records of the
given model. A rule is a record of the model `ir.rule`, and is
associated to a model, a number of groups (many2many field), permissions
to which the restriction applies, and a domain. The domain specifies to
which records the access rights are limited.

Here is an example of a rule that prevents the deletion of leads that
are not in state `cancel`. Notice that the value of the field `groups`
must follow the same convention as the method `~odoo.models.Model.write`
of the ORM.

``` xml
<record id="delete_cancelled_only" model="ir.rule">
    <field name="name">Only cancelled leads may be deleted</field>
    <field name="model_id" ref="crm.model_crm_lead"/>
    <field name="groups" eval="[(4, ref('sales_team.group_sale_manager'))]"/>
    <field name="perm_read" eval="0"/>
    <field name="perm_write" eval="0"/>
    <field name="perm_create" eval="0"/>
    <field name="perm_unlink" eval="1" />
    <field name="domain_force">[('state','=','cancel')]</field>
</record>
```

<div class="exercise">

Record rule

Add a record rule for the model Course and the group "OpenAcademy /
Manager", that restricts `write` and `unlink` accesses to the
responsible of a course. If a course has no responsible, all users of
the group must be able to modify it.

</div>

## Wizards

Wizards describe interactive sessions with the user (or dialog boxes)
through dynamic forms. A wizard is simply a model that extends the class
`~odoo.models.TransientModel` instead of `~odoo.models.Model`. The class
`~odoo.models.TransientModel` extends `~odoo.models.Model` and reuse all
its existing mechanisms, with the following particularities:

  - Wizard records are not meant to be persistent; they are
    automatically deleted from the database after a certain time. This
    is why they are called *transient*.
  - Wizard records may refer to regular records or wizard records
    through relational fields(many2one or many2many), but regular
    records *cannot* refer to wizard records through a many2one field.

We want to create a wizard that allow users to create attendees for a
particular session, or for a list of sessions at once.

<div class="exercise">

Define the wizard

Create a wizard model with a many2one relationship with the *Session*
model and a many2many relationship with the *Partner* model.

</div>

### Launching wizards

Wizards are simply `window actions <howtos/module/actions>` with a
`target` field set to the value `new`, which opens the view (usually `a
form <howtos/module/views/form>`) in a separate dialog. The action may
be triggered via a menu item, but is more generally triggered by a
button.

An other way to launch wizards is through the `Action` menu of a tree or
form view. This is done through the `binding_model_id` field of the
action. Setting this field will make the action appear on the views of
the model the action is "bound" to.

``` xml
<record id="launch_the_wizard" model="ir.actions.act_window">
    <field name="name">Launch the Wizard</field>
    <field name="res_model">wizard.model.name</field>
    <field name="view_mode">form</field>
    <field name="target">new</field>
    <field name="binding_model_id" ref="model_context_model_ref"/>
</record>
```

<div class="tip">

<div class="title">

Tip

</div>

While wizards use regular views and buttons, normally clicking any
button in a form would first save the form then close the dialog.
Because this is often undesirable in wizards, a special attribute
`special="cancel"` is available which immediately closes the wizard
without saving the form.

</div>

<div class="exercise">

Launch the wizard

1.  Define a form view for the wizard.
2.  Add the action to launch it in the context of the *Session* model.
3.  Define a default value for the session field in the wizard; use the
    context parameter `self._context` to retrieve the current session.

</div>

<div class="exercise">

Register attendees

Add buttons to the wizard, and implement the corresponding method for
adding the attendees to the given session.

</div>

<div class="exercise">

Register attendees to multiple sessions

Modify the wizard model so that attendees can be registered to multiple
sessions.

</div>

## Internationalization

Each module can provide its own translations within the i18n directory,
by having files named LANG.po where LANG is the locale code for the
language, or the language and country combination when they differ (e.g.
pt.po or pt\_BR.po). Translations will be loaded automatically by Odoo
for all enabled languages. Developers always use English when creating a
module, then export the module terms using Odoo's gettext POT export
feature (`Settings --> Translations --> Import/Export --> Export
Translation` without specifying a language), to create the module
template POT file, and then derive the translated PO files. Many IDE's
have plugins or modes for editing and merging PO/POT files.

<div class="tip">

<div class="title">

Tip

</div>

The Portable Object files generated by Odoo are published on
[Transifex](https://www.transifex.com/odoo/public/), making it easy to
translate the software.

</div>

``` text
|- idea/ # The module directory
   |- i18n/ # Translation files
      | - idea.pot # Translation Template (exported from Odoo)
      | - fr.po # French translation
      | - pt_BR.po # Brazilian Portuguese translation
      | (...)
```

<div class="tip">

<div class="title">

Tip

</div>

By default Odoo's POT export only extracts labels inside XML files or
inside field definitions in Python code, but any Python string can be
translated this way by surrounding it with the function `odoo._` (e.g.
`_("Label")`)

</div>

<div class="exercise">

Translate a module

Choose a second language for your Odoo installation. Translate your
module using the facilities provided by Odoo.

</div>

## Reporting

### Printed reports

Odoo uses a report engine based on `reference/qweb`, [Twitter
Bootstrap](http://getbootstrap.com) and
[Wkhtmltopdf](http://wkhtmltopdf.org).

A report is a combination two elements:

  - an `ir.actions.report` which configures various basic parameters for
    the report (default type, whether the report should be saved to the
    database after generation,…)
    
    ``` xml
    <record id="account_invoices" model="ir.actions.report">
        <field name="name">Invoices</field>
        <field name="model">account.invoice</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">account.report_invoice</field>
        <field name="report_file">account.report_invoice</field>
        <field name="attachment_use" eval="True"/>
        <field name="attachment">(object.state in ('open','paid')) and
            ('INV'+(object.number or '').replace('/','')+'.pdf')</field>
        <field name="binding_model_id" ref="model_account_invoice"/>
        <field name="binding_type">report</field>
    </record>
    ```
    
    <div class="tip">
    
    <div class="title">
    
    Tip
    
    </div>
    
    Because it largerly a standard action, as with `howto/module/wizard`
    it is generally useful to add the report as a *contextual item* on
    the tree and / or form views of the model being reported on via the
    `binding_model_id` field.
    
    Here we are also using `binding_type` in order for the report to be
    in the *report* contextual menu rather than the *action* one. There
    is no technical difference but putting elements in the right place
    helps users.
    
    </div>

  - A standard `QWeb view <reference/views/qweb>` for the actual report:
    
    ``` xml
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="web.external_layout">
                <div class="page">
                    <h2>Report title</h2>
                </div>
            </t>
        </t>
    </t>
    ```
    
    the standard rendering context provides a number of elements, the
    most important being:
    
      - `docs`  
        the records for which the report is printed
    
      - `user`  
        the user printing the report

Because reports are standard web pages, they are available through a URL
and output parameters can be manipulated through this URL, for instance
the HTML version of the *Invoice* report is available through
<http://localhost:8069/report/html/account.report_invoice/1> (if
`account` is installed) and the PDF version through
<http://localhost:8069/report/pdf/account.report_invoice/1>.

<div id="reference/backend/reporting/printed-reports/pdf-without-styles">

<div class="danger">

<div class="title">

Danger

</div>

If it appears that your PDF report is missing the styles (i.e. the text
appears but the style/layout is different from the html version),
probably your [wkhtmltopdf](http://wkhtmltopdf.org) process cannot reach
your web server to download them.

If you check your server logs and see that the CSS styles are not being
downloaded when generating a PDF report, most surely this is the
problem.

The [wkhtmltopdf](http://wkhtmltopdf.org) process will use the
`web.base.url` system parameter as the *root path* to all linked files,
but this parameter is automatically updated each time the Administrator
is logged in. If your server resides behind some kind of proxy, that
could not be reachable. You can fix this by adding one of these system
parameters:

  - `report.url`, pointing to an URL reachable from your server
    (probably `http://localhost:8069` or something similar). It will be
    used for this particular purpose only.
  - `web.base.url.freeze`, when set to `True`, will stop the automatic
    updates to `web.base.url`.

</div>

</div>

<div class="exercise">

Create a report for the Session model

For each session, it should display session's name, its start and end,
and list the session's attendees.

</div>

### Dashboards

<div class="exercise">

Define a Dashboard

Define a dashboard containing the graph view you created, the sessions
calendar view and a list view of the courses (switchable to a form
view). This dashboard should be available through a menuitem in the
menu, and automatically displayed in the web client when the OpenAcademy
main menu is selected.

</div>

## WebServices

The web-service module offer a common interface for all web-services :

  - XML-RPC
  - JSON-RPC

Business objects can also be accessed via the distributed object
mechanism. They can all be modified via the client interface with
contextual views.

Odoo is accessible through XML-RPC/JSON-RPC interfaces, for which
libraries exist in many languages.

### XML-RPC Library

The following example is a Python 3 program that interacts with an Odoo
server with the library `xmlrpc.client`:

    import xmlrpc.client
    
    root = 'http://%s:%d/xmlrpc/' % (HOST, PORT)
    
    uid = xmlrpc.client.ServerProxy(root + 'common').login(DB, USER, PASS)
    print("Logged in as %s (uid: %d)" % (USER, uid))
    
    # Create a new note
    sock = xmlrpc.client.ServerProxy(root + 'object')
    args = {
        'color' : 8,
        'memo' : 'This is a note',
        'create_uid': uid,
    }
    note_id = sock.execute(DB, uid, PASS, 'note.note', 'create', args)

<div class="exercise">

Add a new service to the client

Write a Python program able to send XML-RPC requests to a PC running
Odoo (yours, or your instructor's). This program should display all the
sessions, and their corresponding number of seats. It should also create
a new session for one of the courses.

<div class="only">

solutions

``` python
import functools
import xmlrpc.client
HOST = 'localhost'
PORT = 8069
DB = 'openacademy'
USER = 'admin'
PASS = 'admin'
ROOT = 'http://%s:%d/xmlrpc/' % (HOST,PORT)

# 1. Login
uid = xmlrpc.client.ServerProxy(ROOT + 'common').login(DB,USER,PASS)
print("Logged in as %s (uid:%d)" % (USER,uid))

call = functools.partial(
    xmlrpc.client.ServerProxy(ROOT + 'object').execute,
    DB, uid, PASS)

# 2. Read the sessions
sessions = call('openacademy.session','search_read', [], ['name','seats'])
for session in sessions:
    print("Session %s (%s seats)" % (session['name'], session['seats']))
# 3.create a new session
session_id = call('openacademy.session', 'create', {
    'name' : 'My session',
    'course_id' : 2,
})
```

Instead of using a hard-coded course id, the code can look up a course
by name:

    # 3.create a new session for the "Functional" course
    course_id = call('openacademy.course', 'search', [('name','ilike','Functional')])[0]
    session_id = call('openacademy.session', 'create', {
        'name' : 'My session',
        'course_id' : course_id,
    })

</div>

</div>

### JSON-RPC Library

The following example is a Python 3 program that interacts with an Odoo
server with the standard Python libraries `urllib.request` and `json`.
This example assumes the **Productivity** app (`note`) is installed:

    import json
    import random
    import urllib.request
    
    HOST = 'localhost'
    PORT = 8069
    DB = 'openacademy'
    USER = 'admin'
    PASS = 'admin'
    
    def json_rpc(url, method, params):
        data = {
            "jsonrpc": "2.0",
            "method": method,
            "params": params,
            "id": random.randint(0, 1000000000),
        }
        req = urllib.request.Request(url=url, data=json.dumps(data).encode(), headers={
            "Content-Type":"application/json",
        })
        reply = json.loads(urllib.request.urlopen(req).read().decode('UTF-8'))
        if reply.get("error"):
            raise Exception(reply["error"])
        return reply["result"]
    
    def call(url, service, method, *args):
        return json_rpc(url, "call", {"service": service, "method": method, "args": args})
    
    # log in the given database
    url = "http://%s:%s/jsonrpc" % (HOST, PORT)
    uid = call(url, "common", "login", DB, USER, PASS)
    
    # create a new note
    args = {
        'color': 8,
        'memo': 'This is another note',
        'create_uid': uid,
    }
    note_id = call(url, "object", "execute", DB, uid, PASS, 'note.note', 'create', args)

Examples can be easily adapted from XML-RPC to JSON-RPC.

<div class="note">

<div class="title">

Note

</div>

There are a number of high-level APIs in various languages to access
Odoo systems without *explicitly* going through XML-RPC or JSON-RPC,
such as:

  - <https://github.com/akretion/ooor>
  - <https://github.com/OCA/odoorpc>
  - <https://github.com/nicolas-van/openerp-client-lib>
  - <http://pythonhosted.org/OdooRPC>
  - <https://github.com/abhishek-jaiswal/php-openerp-lib>

</div>

1.  writing raw SQL queries is possible, but requires care as it
    bypasses all Odoo authentication and security mechanisms.

2.  it is possible to `disable the automatic creation of some
    fields <reference/fields/automatic/log_access>`


---
## File: ./content/developer/tutorials/web.md

  - orphan

# Customizing the web client

<div class="danger">

<div class="title">

Danger

</div>

This tutorial is outdated.

</div>

<div class="default-domain">

js

</div>

This guide is about creating modules for Odoo's web client.

To create websites with Odoo, see `website`; to add business
capabilities or extend existing business systems of Odoo, see `backend`.

<div class="warning">

<div class="title">

Warning

</div>

This guide assumes knowledge of:

  - Javascript basics and good practices
  - [jQuery](http://jquery.org)
  - [Underscore.js](http://underscorejs.org)

It also requires `an installed Odoo <../../administration/install>`, and
[Git](http://git-scm.com).

</div>

## A Simple Module

Let's start with a simple Odoo module holding basic web component
configuration and letting us test the web framework.

The example module is available online and can be downloaded using the
following command:

``` console
$ git clone http://github.com/odoo/petstore
```

This will create a `petstore` folder wherever you executed the command.
You then need to add that folder to Odoo's `addons path <odoo-bin
--addons-path>`, create a new database and install the `oepetstore`
module.

If you browse the `petstore` folder, you should see the following
content:

``` text
oepetstore
|-- images
|   |-- alligator.jpg
|   |-- ball.jpg
|   |-- crazy_circle.jpg
|   |-- fish.jpg
|   `-- mice.jpg
|-- __init__.py
|-- oepetstore.message_of_the_day.csv
|-- __manifest__.py
|-- petstore_data.xml
|-- petstore.py
|-- petstore.xml
`-- static
    `-- src
        |-- css
        |   `-- petstore.css
        |-- js
        |   `-- petstore.js
        `-- xml
            `-- petstore.xml
```

The module already holds various server customizations. We'll come back
to these later, for now let's focus on the web-related content, in the
`static` folder.

Files used in the "web" side of an Odoo module must be placed in a
`static` folder so they are available to a web browser, files outside
that folder can not be fetched by browsers. The `src/css`, `src/js` and
`src/xml` sub-folders are conventional and not strictly necessary.

  - `oepetstore/static/css/petstore.css`  
    Currently empty, will hold the
    [CSS](http://www.w3.org/Style/CSS/Overview.en.html) for pet store
    content

  - `oepetstore/static/xml/petstore.xml`  
    Mostly empty, will hold `reference/qweb` templates

  - `oepetstore/static/js/petstore.js`  
    The most important (and interesting) part, contains the logic of the
    application (or at least its web-browser side) as javascript. It
    should currently look like:
    
    ``` javascript
    odoo.oepetstore = function(instance, local) {
        var _t = instance.web._t,
            _lt = instance.web._lt;
        var QWeb = instance.web.qweb;
    
        local.HomePage = instance.Widget.extend({
            start: function() {
                console.log("pet store home page loaded");
            },
        });
    
        instance.web.client_actions.add(
            'petstore.homepage', 'instance.oepetstore.HomePage');
    }
    ```

Which only prints a small message in the browser's console.

The files in the `static` folder, need to be defined within the module
in order for them to be loaded correctly. Everything in `src/xml` is
defined in `__manifest__.py` while the contents of `src/css` and
`src/js` are defined in `petstore.xml`, or a similar file.

<div class="warning">

<div class="title">

Warning

</div>

All JavaScript files are concatenated and `minified` to improve
application load time.

One of the drawback is debugging becomes more difficult as individual
files disappear and the code is made significantly less readable. It is
possible to disable this process by enabling the "developer mode": log
into your Odoo instance (user *admin* password *admin* by default) open
the user menu (in the top-right corner of the Odoo screen) and select
`About Odoo` then `Activate
the developer mode`:

![image](web/about_odoo.png)

![image](web/devmode.png)

This will reload the web client with optimizations disabled, making
development and debugging significantly more comfortable.

</div>

<div class="todo">

qweb files hooked via \_\_manifest\_\_.py, but js and CSS use bundles

</div>

## Odoo JavaScript Module

Javascript doesn't have built-in modules. As a result variables defined
in different files are all mashed together and may conflict. This has
given rise to various module patterns used to build clean namespaces and
limit risks of naming conflicts.

The Odoo framework uses one such pattern to define modules within web
addons, in order to both namespace code and correctly order its loading.

`oepetstore/static/js/petstore.js` contains a module declaration:

``` javascript
odoo.oepetstore = function(instance, local) {
    local.xxx = ...;
}
```

In Odoo web, modules are declared as functions set on the global `odoo`
variable. The function's name must be the same as the addon (in this
case `oepetstore`) so the framework can find it, and automatically
initialize it.

When the web client loads your module it will call the root function and
provide two parameters:

  - the first parameter is the current instance of the Odoo web client,
    it gives access to various capabilities defined by the Odoo
    (translations, network services) as well as objects defined by the
    core or by other modules.
  - the second parameter is your own local namespace automatically
    created by the web client. Objects and variables which should be
    accessible from outside your module (either because the Odoo web
    client needs to call them or because others may want to customize
    them) should be set inside that namespace.

## Classes

Much as modules, and contrary to most object-oriented languages,
javascript does not build in *classes*\[1\] although it provides roughly
equivalent (if lower-level and more verbose) mechanisms.

For simplicity and developer-friendliness Odoo web provides a class
system based on John Resig's [Simple JavaScript
Inheritance](http://ejohn.org/blog/simple-javascript-inheritance/).

New classes are defined by calling the `~odoo.web.Class.extend` method
of `odoo.web.Class`:

``` javascript
var MyClass = instance.web.Class.extend({
    say_hello: function() {
        console.log("hello");
    },
});
```

The `~odoo.web.Class.extend` method takes a dictionary describing the
new class's content (methods and static attributes). In this case, it
will only have a `say_hello` method which takes no parameters.

Classes are instantiated using the `new` operator:

``` javascript
var my_object = new MyClass();
my_object.say_hello();
// print "hello" in the console
```

And attributes of the instance can be accessed via `this`:

``` javascript
var MyClass = instance.web.Class.extend({
    say_hello: function() {
        console.log("hello", this.name);
    },
});

var my_object = new MyClass();
my_object.name = "Bob";
my_object.say_hello();
// print "hello Bob" in the console
```

Classes can provide an initializer to perform the initial setup of the
instance, by defining an `init()` method. The initializer receives the
parameters passed when using the `new` operator:

``` javascript
var MyClass = instance.web.Class.extend({
    init: function(name) {
        this.name = name;
    },
    say_hello: function() {
        console.log("hello", this.name);
    },
});

var my_object = new MyClass("Bob");
my_object.say_hello();
// print "hello Bob" in the console
```

It is also possible to create subclasses from existing (used-defined)
classes by calling `~odoo.web.Class.extend` on the parent class, as is
done to subclass `~odoo.web.Class`:

``` javascript
var MySpanishClass = MyClass.extend({
    say_hello: function() {
        console.log("hola", this.name);
    },
});

var my_object = new MySpanishClass("Bob");
my_object.say_hello();
// print "hola Bob" in the console
```

When overriding a method using inheritance, you can use `this._super()`
to call the original method:

``` javascript
var MySpanishClass = MyClass.extend({
    say_hello: function() {
        this._super();
        console.log("translation in Spanish: hola", this.name);
    },
});

var my_object = new MySpanishClass("Bob");
my_object.say_hello();
// print "hello Bob \n translation in Spanish: hola Bob" in the console
```

<div class="warning">

<div class="title">

Warning

</div>

`_super` is not a standard method, it is set on-the-fly to the next
method in the current inheritance chain, if any. It is only defined
during the *synchronous* part of a method call, for use in asynchronous
handlers (after network calls or in `setTimeout` callbacks) a reference
to its value should be retained, it should not be accessed via `this`:

``` javascript
// broken, will generate an error
say_hello: function () {
    setTimeout(function () {
        this._super();
    }.bind(this), 0);
}

// correct
say_hello: function () {
    // don't forget .bind()
    var _super = this._super.bind(this);
    setTimeout(function () {
        _super();
    }.bind(this), 0);
}
```

</div>

## Widgets Basics

The Odoo web client bundles [jQuery](http://jquery.org) for easy DOM
manipulation. It is useful and provides a better API than standard [W3C
DOM](http://www.w3.org/TR/DOM-Level-3-Core/)\[2\], but insufficient to
structure complex applications leading to difficult maintenance.

Much like object-oriented desktop UI toolkits (e.g.
[Qt](http://qt-project.org),
[Cocoa](https://developer.apple.com/technologies/mac/cocoa.html) or
[GTK](http://www.gtk.org)), Odoo Web makes specific components
responsible for sections of a page. In Odoo web, the base for such
components is the `~odoo.Widget` class, a component specialized in
handling a page section and displaying information for the user.

### Your First Widget

The initial demonstration module already provides a basic widget:

``` javascript
local.HomePage = instance.Widget.extend({
    start: function() {
        console.log("pet store home page loaded");
    },
});
```

It extends `~odoo.Widget` and overrides the standard method
`~odoo.Widget.start`, which — much like the previous `MyClass` — does
little for now.

This line at the end of the file:

``` javascript
instance.web.client_actions.add(
    'petstore.homepage', 'instance.oepetstore.HomePage');
```

registers our basic widget as a client action. Client actions will be
explained later, for now this is just what allows our widget to be
called and displayed when we select the `Pet Store --> Pet Store -->
Home Page` menu.

<div class="warning">

<div class="title">

Warning

</div>

because the widget will be called from outside our module, the web
client needs its "fully qualified" name, not the local version.

</div>

### Display Content

Widgets have a number of methods and features, but the basics are
simple:

  - set up a widget
  - format the widget's data
  - display the widget

The `HomePage` widget already has a `~odoo.Widget.start` method. That
method is part of the normal widget lifecycle and automatically called
once the widget is inserted in the page. We can use it to display some
content.

All widgets have a `~odoo.Widget.$el` which represents the section of
page they're in charge of (as a [jQuery](http://jquery.org) object).
Widget content should be inserted there. By default, `~odoo.Widget.$el`
is an empty `<div>` element.

A `<div>` element is usually invisible to the user if it has no content
(or without specific styles giving it a size) which is why nothing is
displayed on the page when `HomePage` is launched.

Let's add some content to the widget's root element, using jQuery:

``` javascript
local.HomePage = instance.Widget.extend({
    start: function() {
        this.$el.append("<div>Hello dear Odoo user!</div>");
    },
});
```

That message will now appear when you open `Pet Store
--> Pet Store --> Home Page`

<div class="note">

<div class="title">

Note

</div>

to refresh the javascript code loaded in Odoo Web, you will need to
reload the page. There is no need to restart the Odoo server.

</div>

The `HomePage` widget is used by Odoo Web and managed automatically. To
learn how to use a widget "from scratch" let's create a new one:

``` javascript
local.GreetingsWidget = instance.Widget.extend({
    start: function() {
        this.$el.append("<div>We are so happy to see you again in this menu!</div>");
    },
});
```

We can now add our `GreetingsWidget` to the `HomePage` by using the
`GreetingsWidget`'s `~odoo.Widget.appendTo` method:

``` javascript
local.HomePage = instance.Widget.extend({
    start: function() {
        this.$el.append("<div>Hello dear Odoo user!</div>");
        var greeting = new local.GreetingsWidget(this);
        return greeting.appendTo(this.$el);
    },
});
```

  - `HomePage` first adds its own content to its DOM root
  - `HomePage` then instantiates `GreetingsWidget`
  - Finally it tells `GreetingsWidget` where to insert itself,
    delegating part of its `~odoo.Widget.$el` to the `GreetingsWidget`.

When the `~odoo.Widget.appendTo` method is called, it asks the widget to
insert itself at the specified position and to display its content. The
`~odoo.Widget.start` method will be called during the call to
`~odoo.Widget.appendTo`.

To see what happens under the displayed interface, we will use the
browser's DOM Explorer. But first let's alter our widgets slightly so we
can more easily find where they are, by `adding a class to their root
elements
<odoo.Widget.className>`:

``` javascript
local.HomePage = instance.Widget.extend({
    className: 'oe_petstore_homepage',
    ...
});
local.GreetingsWidget = instance.Widget.extend({
    className: 'oe_petstore_greetings',
    ...
});
```

If you can find the relevant section of the DOM (right-click on the text
then `Inspect Element`), it should look like this:

``` html
<div class="oe_petstore_homepage">
    <div>Hello dear Odoo user!</div>
    <div class="oe_petstore_greetings">
        <div>We are so happy to see you again in this menu!</div>
    </div>
</div>
```

Which clearly shows the two `<div>` elements automatically created by
`~odoo.Widget`, because we added some classes on them.

We can also see the two message-holding divs we added ourselves

Finally, note the `<div class="oe_petstore_greetings">` element which
represents the `GreetingsWidget` instance is *inside* the `<div
class="oe_petstore_homepage">` which represents the `HomePage` instance,
since we appended

### Widget Parents and Children

In the previous part, we instantiated a widget using this syntax:

``` javascript
new local.GreetingsWidget(this);
```

The first argument is `this`, which in that case was a `HomePage`
instance. This tells the widget being created which other widget is its
*parent*.

As we've seen, widgets are usually inserted in the DOM by another widget
and *inside* that other widget's root element. This means most widgets
are "part" of another widget, and exist on behalf of it. We call the
container the *parent*, and the contained widget the *child*.

Due to multiple technical and conceptual reasons, it is necessary for a
widget to know who is its parent and who are its children.

  - `~odoo.Widget.getParent`  
    can be used to get the parent of a widget:
    
    ``` javascript
    local.GreetingsWidget = instance.Widget.extend({
        start: function() {
            console.log(this.getParent().$el );
            // will print "div.oe_petstore_homepage" in the console
        },
    });
    ```

  - `~odoo.Widget.getChildren`  
    can be used to get a list of its children:
    
    ``` javascript
    local.HomePage = instance.Widget.extend({
        start: function() {
            var greeting = new local.GreetingsWidget(this);
            greeting.appendTo(this.$el);
            console.log(this.getChildren()[0].$el);
            // will print "div.oe_petstore_greetings" in the console
        },
    });
    ```

When overriding the `~odoo.Widget.init` method of a widget it is *of the
utmost importance* to pass the parent to the `this._super()` call,
otherwise the relation will not be set up correctly:

``` javascript
local.GreetingsWidget = instance.Widget.extend({
    init: function(parent, name) {
        this._super(parent);
        this.name = name;
    },
});
```

Finally, if a widget does not have a parent (e.g. because it's the root
widget of the application), `null` can be provided as parent:

``` javascript
new local.GreetingsWidget(null);
```

### Destroying Widgets

If you can display content to your users, you should also be able to
erase it. This is done via the `~odoo.Widget.destroy` method:

``` javascript
greeting.destroy();
```

When a widget is destroyed it will first call `~odoo.Widget.destroy` on
all its children. Then it erases itself from the DOM. If you have set up
permanent structures in `~odoo.Widget.init` or `~odoo.Widget.start`
which must be explicitly cleaned up (because the garbage collector will
not handle them), you can override `~odoo.Widget.destroy`.

<div class="danger">

<div class="title">

Danger

</div>

when overriding `~odoo.Widget.destroy`, `_super()` *must always* be
called otherwise the widget and its children are not correctly cleaned
up leaving possible memory leaks and "phantom events", even if no error
is displayed

</div>

## The QWeb Template Engine

In the previous section we added content to our widgets by directly
manipulating (and adding to) their DOM:

``` javascript
this.$el.append("<div>Hello dear Odoo user!</div>");
```

This allows generating and displaying any type of content, but gets
unwieldy when generating significant amounts of DOM (lots of
duplication, quoting issues, ...)

As many other environments, Odoo's solution is to use a [template
engine](http://en.wikipedia.org/wiki/Web_template_system). Odoo's
template engine is called `reference/qweb`.

QWeb is an XML-based templating language, similar to
[Genshi](http://en.wikipedia.org/wiki/Genshi_\(templating_language\)),
[Thymeleaf](http://en.wikipedia.org/wiki/Thymeleaf) or
[Facelets](http://en.wikipedia.org/wiki/Facelets). It has the following
characteristics:

  - It's implemented fully in JavaScript and rendered in the browser
  - Each template file (XML files) contains multiple templates
  - It has special support in Odoo Web's `~odoo.Widget`, though it can
    be used outside of Odoo's web client (and it's possible to use
    `~odoo.Widget` without relying on QWeb)

<div class="note">

<div class="title">

Note

</div>

The rationale behind using QWeb instead of existing javascript template
engines is the extensibility of pre-existing (third-party) templates,
much like Odoo `views <reference/views>`.

Most javascript template engines are text-based which precludes easy
structural extensibility where an XML-based templating engine can be
generically altered using e.g. XPath or CSS and a tree-alteration DSL
(or even just XSLT). This flexibility and extensibility is a core
characteristic of Odoo, and losing it was considered unacceptable.

</div>

### Using QWeb

First let's define a simple QWeb template in the almost-empty
`oepetstore/static/src/xml/petstore.xml` file:

``` xml
<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="HomePageTemplate">
        <div style="background-color: red;">This is some simple HTML</div>
    </t>
</templates>
```

Now we can use this template inside of the `HomePage` widget. Using the
`QWeb` loader variable defined at the top of the page, we can call to
the template defined in the XML file:

``` javascript
local.HomePage = instance.Widget.extend({
    start: function() {
        this.$el.append(QWeb.render("HomePageTemplate"));
    },
});
```

`QWeb.render` looks for the specified template, renders it to a string
and returns the result.

However, because `~odoo.Widget` has special integration for QWeb the
template can be set directly on the widget via its
`~odoo.Widget.template` attribute:

``` javascript
local.HomePage = instance.Widget.extend({
    template: "HomePageTemplate",
    start: function() {
        ...
    },
});
```

Although the result looks similar, there are two differences between
these usages:

  - with the second version, the template is rendered right before
    `~odoo.Widget.start` is called
  - in the first version the template's content is added to the widget's
    root element, whereas in the second version the template's root
    element is directly *set as* the widget's root element. Which is why
    the "greetings" sub-widget also gets a red background

<div class="warning">

<div class="title">

Warning

</div>

templates should have a single non-`t` root element, especially if
they're set as a widget's `~odoo.Widget.template`. If there are multiple
"root elements", results are undefined (usually only the first root
element will be used and the others will be ignored)

</div>

#### QWeb Context

QWeb templates can be given data and can contain basic display logic.

For explicit calls to `QWeb.render`, the template data is passed as
second parameter:

``` javascript
QWeb.render("HomePageTemplate", {name: "Klaus"});
```

with the template modified to:

``` xml
<t t-name="HomePageTemplate">
    <div>Hello <t t-esc="name"/></div>
</t>
```

will result in:

``` html
<div>Hello Klaus</div>
```

When using `~odoo.Widget`'s integration it is not possible to provide
additional data to the template. The template will be given a single
`widget` context variable, referencing the widget being rendered right
before `~odoo.Widget.start` is called (the widget's state will
essentially be that set up by `~odoo.Widget.init`):

``` xml
<t t-name="HomePageTemplate">
    <div>Hello <t t-esc="widget.name"/></div>
</t>
```

``` javascript
local.HomePage = instance.Widget.extend({
    template: "HomePageTemplate",
    init: function(parent) {
        this._super(parent);
        this.name = "Mordecai";
    },
    start: function() {
    },
});
```

Result:

``` html
<div>Hello Mordecai</div>
```

#### Template Declaration

We've seen how to *render* QWeb templates, let's now see the syntax of
the templates themselves.

A QWeb template is composed of regular XML mixed with QWeb *directives*.
A QWeb directive is declared with XML attributes starting with `t-`.

The most basic directive is `t-name`, used to declare new templates in a
template file:

``` xml
<templates>
    <t t-name="HomePageTemplate">
        <div>This is some simple HTML</div>
    </t>
</templates>
```

`t-name` takes the name of the template being defined, and declares that
it can be called using `QWeb.render`. It can only be used at the
top-level of a template file.

#### Escaping

The `t-esc` directive can be used to output text:

``` xml
<div>Hello <t t-esc="name"/></div>
```

It takes a Javascript expression which is evaluated, the result of the
expression is then HTML-escaped and inserted in the document. Since it's
an expression it's possible to provide just a variable name as above, or
a more complex expression like a computation:

``` xml
<div><t t-esc="3+5"/></div>
```

or method calls:

``` xml
<div><t t-esc="name.toUpperCase()"/></div>
```

#### Outputting HTML

To inject HTML in the page being rendered, use `t-raw`. Like `t-esc` it
takes an arbitrary Javascript expression as parameter, but it does not
perform an HTML-escape step.

``` xml
<div><t t-raw="name.link(user_account)"/></div>
```

<div class="danger">

<div class="title">

Danger

</div>

`t-raw` *must not* be used on any data which may contain non-escaped
user-provided content as this leads to [cross-site
scripting](http://en.wikipedia.org/wiki/Cross-site_scripting)
vulnerabilities

</div>

#### Conditionals

QWeb can have conditional blocks using `t-if`. The directive takes an
arbitrary expression, if the expression is falsy (`false`, `null`, `0`
or an empty string) the whole block is suppressed, otherwise it is
displayed.

``` xml
<div>
    <t t-if="true == true">
        true is true
    </t>
    <t t-if="true == false">
        true is not true
    </t>
</div>
```

<div class="note">

<div class="title">

Note

</div>

QWeb doesn't have an "else" structure, use a second `t-if` with the
original condition inverted. You may want to store the condition in a
local variable if it's a complex or expensive expression.

</div>

#### Iteration

To iterate on a list, use `t-foreach` and `t-as`. `t-foreach` takes an
expression returning a list to iterate on `t-as` takes a variable name
to bind to each item during iteration.

``` xml
<div>
    <t t-foreach="names" t-as="name">
        <div>
            Hello <t t-esc="name"/>
        </div>
    </t>
</div>
```

<div class="note">

<div class="title">

Note

</div>

`t-foreach` can also be used with numbers and objects (dictionaries)

</div>

#### Defining attributes

QWeb provides two related directives to define computed attributes:
`t-att-{name}` and `t-attf-{name}`. In either case, *name* is the name
of the attribute to create (e.g. `t-att-id` defines the attribute `id`
after rendering).

`t-att-` takes a javascript expression whose result is set as the
attribute's value, it is most useful if all of the attribute's value is
computed:

``` xml
<div>
    Input your name:
    <input type="text" t-att-value="defaultName"/>
</div>
```

`t-attf-` takes a *format string*. A format string is literal text with
interpolation blocks inside, an interpolation block is a javascript
expression between `{{` and `}}`, which will be replaced by the result
of the expression. It is most useful for attributes which are partially
literal and partially computed such as a class:

``` xml
<div t-attf-class="container {{ left ? 'text-left' : '' }} {{ extra_class }}">
    insert content here
</div>
```

#### Calling other templates

Templates can be split into sub-templates (for simplicity,
maintainability, reusability or to avoid excessive markup nesting).

This is done using the `t-call` directive, which takes the name of the
template to render:

``` xml
<t t-name="A">
    <div class="i-am-a">
        <t t-call="B"/>
    </div>
</t>
<t t-name="B">
    <div class="i-am-b"/>
</t>
```

rendering the `A` template will result in:

``` xml
<div class="i-am-a">
    <div class="i-am-b"/>
</div>
```

Sub-templates inherit the rendering context of their caller.

#### To Learn More About QWeb

For a QWeb reference, see `reference/qweb`.

#### Exercise

<div class="exercise">

Usage of QWeb in Widgets

Create a widget whose constructor takes two parameters aside from
`parent`: `product_names` and `color`.

  - `product_names` should an array of strings, each one the name of a
    product
  - `color` is a string containing a color in CSS color format (ie:
    `#000000` for black).

The widget should display the given product names one under the other,
each one in a separate box with a background color with the value of
`color` and a border. You should use QWeb to render the HTML. Any
necessary CSS should be in `oepetstore/static/src/css/petstore.css`.

Use the widget in `HomePage` with half a dozen products.

<div class="only">

solutions

``` javascript
odoo.oepetstore = function(instance, local) {
    var _t = instance.web._t,
        _lt = instance.web._lt;
    var QWeb = instance.web.qweb;

    local.HomePage = instance.Widget.extend({
        start: function() {
            var products = new local.ProductsWidget(
                this, ["cpu", "mouse", "keyboard", "graphic card", "screen"], "#00FF00");
            products.appendTo(this.$el);
        },
    });

    local.ProductsWidget = instance.Widget.extend({
        template: "ProductsWidget",
        init: function(parent, products, color) {
            this._super(parent);
            this.products = products;
            this.color = color;
        },
    });

    instance.web.client_actions.add(
        'petstore.homepage', 'instance.oepetstore.HomePage');
}
```

``` xml
<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="ProductsWidget">
        <div>
            <t t-foreach="widget.products" t-as="product">
                <span class="oe_products_item"
                      t-attf-style="background-color: {{ widget.color }};">
                    <t t-esc="product"/>
                </span>
                <br/>
            </t>
        </div>
    </t>
</templates>
```

``` css
.oe_products_item {
    display: inline-block;
    padding: 3px;
    margin: 5px;
    border: 1px solid black;
    border-radius: 3px;
}
```

![image](web/qweb.png)

</div>

</div>

## Widget Helpers

### `Widget`'s jQuery Selector

Selecting DOM elements within a widget can be performed by calling the
`find()` method on the widget's DOM root:

``` javascript
this.$el.find("input.my_input")...
```

But because it's a common operation, `~odoo.Widget` provides an
equivalent shortcut through the `~odoo.Widget.$` method:

``` javascript
local.MyWidget = instance.Widget.extend({
    start: function() {
        this.$("input.my_input")...
    },
});
```

<div class="warning">

<div class="title">

Warning

</div>

The global jQuery function `$()` should *never* be used unless it is
absolutely necessary: selection on a widget's root are scoped to the
widget and local to it, but selections with `$()` are global to the
page/application and may match parts of other widgets and views, leading
to odd or dangerous side-effects. Since a widget should generally act
only on the DOM section it owns, there is no cause for global selection.

</div>

### Easier DOM Events Binding

We have previously bound DOM events using normal jQuery event handlers
(e.g. `.click()` or `.change()`) on widget elements:

``` javascript
local.MyWidget = instance.Widget.extend({
    start: function() {
        var self = this;
        this.$(".my_button").click(function() {
            self.button_clicked();
        });
    },
    button_clicked: function() {
        ..
    },
});
```

While this works it has a few issues:

1.  it is rather verbose
2.  it does not support replacing the widget's root element at runtime
    as the binding is only performed when `start()` is run (during
    widget initialization)
3.  it requires dealing with `this`-binding issues

Widgets thus provide a shortcut to DOM event binding via
`~odoo.Widget.events`:

``` javascript
local.MyWidget = instance.Widget.extend({
    events: {
        "click .my_button": "button_clicked",
    },
    button_clicked: function() {
        ..
    }
});
```

`~odoo.Widget.events` is an object (mapping) of an event to the function
or method to call when the event is triggered:

  - the key is an event name, possibly refined with a CSS selector in
    which case only if the event happens on a selected sub-element will
    the function or method run: `click` will handle all clicks within
    the widget, but `click .my_button` will only handle clicks in
    elements bearing the `my_button` class

  - the value is the action to perform when the event is triggered
    
    It can be either a function:
    
    ``` javascript
    events: {
        'click': function (e) { /* code here */ }
    }
    ```
    
    or the name of a method on the object (see example above).
    
    In either case, the `this` is the widget instance and the handler is
    given a single parameter, the [jQuery event
    object](http://api.jquery.com/category/events/event-object/) for the
    event.

## Widget Events and Properties

### Events

Widgets provide an event system (separate from the DOM/jQuery event
system described above): a widget can fire events on itself, and other
widgets (or itself) can bind themselves and listen for these events:

``` javascript
local.ConfirmWidget = instance.Widget.extend({
    events: {
        'click button.ok_button': function () {
            this.trigger('user_chose', true);
        },
        'click button.cancel_button': function () {
            this.trigger('user_chose', false);
        }
    },
    start: function() {
        this.$el.append("<div>Are you sure you want to perform this action?</div>" +
            "<button class='ok_button'>Ok</button>" +
            "<button class='cancel_button'>Cancel</button>");
    },
});
```

This widget acts as a facade, transforming user input (through DOM
events) into a documentable internal event to which parent widgets can
bind themselves.

`~odoo.Widget.trigger` takes the name of the event to trigger as its
first (mandatory) argument, any further arguments are treated as event
data and passed directly to listeners.

We can then set up a parent event instantiating our generic widget and
listening to the `user_chose` event using `~odoo.Widget.on`:

``` javascript
local.HomePage = instance.Widget.extend({
    start: function() {
        var widget = new local.ConfirmWidget(this);
        widget.on("user_chose", this, this.user_chose);
        widget.appendTo(this.$el);
    },
    user_chose: function(confirm) {
        if (confirm) {
            console.log("The user agreed to continue");
        } else {
            console.log("The user refused to continue");
        }
    },
});
```

`~odoo.Widget.on` binds a function to be called when the event
identified by `event_name` is. The `func` argument is the function to
call and `object` is the object to which that function is related if it
is a method. The bound function will be called with the additional
arguments of `~odoo.Widget.trigger` if it has any. Example:

``` javascript
start: function() {
    var widget = ...
    widget.on("my_event", this, this.my_event_triggered);
    widget.trigger("my_event", 1, 2, 3);
},
my_event_triggered: function(a, b, c) {
    console.log(a, b, c);
    // will print "1 2 3"
}
```

<div class="note">

<div class="title">

Note

</div>

Triggering events on an other widget is generally a bad idea. The main
exception to that rule is `odoo.web.bus` which exists specifically to
broadcasts evens in which any widget could be interested throughout the
Odoo web application.

</div>

### Properties

Properties are very similar to normal object attributes in that they
allow storing data on a widget instance, however they have the
additional feature that they trigger events when set:

``` javascript
start: function() {
    this.widget = ...
    this.widget.on("change:name", this, this.name_changed);
    this.widget.set("name", "Nicolas");
},
name_changed: function() {
    console.log("The new value of the property 'name' is", this.widget.get("name"));
}
```

  - `~odoo.Widget.set` sets the value of a property and triggers
    `change:{propname}` (where *propname* is the property name passed as
    first parameter to `~odoo.Widget.set`) and `change`
  - `~odoo.Widget.get` retrieves the value of a property.

### Exercise

<div class="exercise">

Widget Properties and Events

Create a widget `ColorInputWidget` that will display 3 `<input
type="text">`. Each of these `<input>` is dedicated to type a
hexadecimal number from 00 to FF. When any of these `<input>` is
modified by the user the widget must query the content of the three
`<input>`, concatenate their values to have a complete CSS color code
(ie: `#00FF00`) and put the result in a property named `color`. Please
note the jQuery `change()` event that you can bind on any HTML `<input>`
element and the `val()` method that can query the current value of that
`<input>` could be useful to you for this exercise.

Then, modify the `HomePage` widget to instantiate `ColorInputWidget` and
display it. The `HomePage` widget should also display an empty
rectangle. That rectangle must always, at any moment, have the same
background color as the color in the `color` property of the
`ColorInputWidget` instance.

Use QWeb to generate all HTML.

<div class="only">

solutions

``` javascript
odoo.oepetstore = function(instance, local) {
    var _t = instance.web._t,
        _lt = instance.web._lt;
    var QWeb = instance.web.qweb;

    local.ColorInputWidget = instance.Widget.extend({
        template: "ColorInputWidget",
        events: {
            'change input': 'input_changed'
        },
        start: function() {
            this.input_changed();
            return this._super();
        },
        input_changed: function() {
            var color = [
                "#",
                this.$(".oe_color_red").val(),
                this.$(".oe_color_green").val(),
                this.$(".oe_color_blue").val()
            ].join('');
            this.set("color", color);
        },
    });

    local.HomePage = instance.Widget.extend({
        template: "HomePage",
        start: function() {
            this.colorInput = new local.ColorInputWidget(this);
            this.colorInput.on("change:color", this, this.color_changed);
            return this.colorInput.appendTo(this.$el);
        },
        color_changed: function() {
            this.$(".oe_color_div").css("background-color", this.colorInput.get("color"));
        },
    });

    instance.web.client_actions.add('petstore.homepage', 'instance.oepetstore.HomePage');
}
```

``` xml
<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="ColorInputWidget">
        <div>
            Red: <input type="text" class="oe_color_red" value="00"></input><br />
            Green: <input type="text" class="oe_color_green" value="00"></input><br />
            Blue: <input type="text" class="oe_color_blue" value="00"></input><br />
        </div>
    </t>
    <t t-name="HomePage">
        <div>
            <div class="oe_color_div"></div>
        </div>
    </t>
</templates>
```

``` css
.oe_color_div {
    width: 100px;
    height: 100px;
    margin: 10px;
}
```

</div>

</div>

## Modify existing widgets and classes

The class system of the Odoo web framework allows direct modification of
existing classes using the `~odoo.web.Class.include` method:

``` javascript
var TestClass = instance.web.Class.extend({
    testMethod: function() {
        return "hello";
    },
});

TestClass.include({
    testMethod: function() {
        return this._super() + " world";
    },
});

console.log(new TestClass().testMethod());
// will print "hello world"
```

This system is similar to the inheritance mechanism, except it will
alter the target class in-place instead of creating a new class.

In that case, `this._super()` will call the original implementation of a
method being replaced/redefined. If the class already had sub-classes,
all calls to `this._super()` in sub-classes will call the new
implementations defined in the call to `~odoo.web.Class.include`. This
will also work if some instances of the class (or of any of its
sub-classes) were created prior to the call to `~odoo.Widget.include`.

## Translations

The process to translate text in Python and JavaScript code is very
similar. You could have noticed these lines at the beginning of the
`petstore.js` file:

``` javascript
var _t = instance.web._t,
    _lt = instance.web._lt;
```

These lines are simply used to import the translation functions in the
current JavaScript module. They are used thus:

``` javascript
this.$el.text(_t("Hello user!"));
```

In Odoo, translations files are automatically generated by scanning the
source code. All piece of code that calls a certain function are
detected and their content is added to a translation file that will then
be sent to the translators. In Python, the function is `_()`. In
JavaScript the function is `~odoo.web._t` (and also `~odoo.web._lt`).

`_t()` will return the translation defined for the text it is given. If
no translation is defined for that text, it will return the original
text as-is.

<div class="note">

<div class="title">

Note

</div>

To inject user-provided values in translatable strings, it is
recommended to use
[\_.str.sprintf](http://gabceb.github.io/underscore.string.site/#sprintf)
with named arguments *after* the translation:

``` javascript
this.$el.text(_.str.sprintf(
    _t("Hello, %(user)s!"), {
    user: "Ed"
}));
```

This makes translatable strings more readable to translators, and gives
them more flexibility to reorder or ignore parameters.

</div>

`~odoo.web._lt` ("lazy translate") is similar but somewhat more complex:
instead of translating its parameter immediately, it returns an object
which, when converted to a string, will perform the translation.

It is used to define translatable terms before the translations system
is initialized, for class attributes for instance (as modules are loaded
before the user's language is configured and translations are
downloaded).

## Communication with the Odoo Server

### Contacting Models

Most operations with Odoo involve communicating with *models*
implementing business concern, these models will then (potentially)
interact with some storage engine (usually
[PostgreSQL](http://en.wikipedia.org/wiki/PostgreSQL)).

Although [jQuery](http://jquery.org) provides a
[$.ajax](http://api.jquery.com/jquery.ajax/) function for network
interactions, communicating with Odoo requires additional metadata whose
setup before every call would be verbose and error-prone. As a result,
Odoo web provides higher-level communication primitives.

To demonstrate this, the file `petstore.py` already contains a small
model with a sample method:

``` python
class message_of_the_day(models.Model):
    _name = "oepetstore.message_of_the_day"

    @api.model
    def my_method(self):
        return {"hello": "world"}

    message = fields.Text(),
    color = fields.Char(size=20),
```

This declares a model with two fields, and a method `my_method()` which
returns a literal dictionary.

Here is a sample widget that calls `my_method()` and displays the
result:

``` javascript
local.HomePage = instance.Widget.extend({
    start: function() {
        var self = this;
        var model = new instance.web.Model("oepetstore.message_of_the_day");
        model.call("my_method", {context: new instance.web.CompoundContext()}).then(function(result) {
            self.$el.append("<div>Hello " + result["hello"] + "</div>");
            // will show "Hello world" to the user
        });
    },
});
```

The class used to call Odoo models is `odoo.Model`. It is instantiated
with the Odoo model's name as first parameter
(`oepetstore.message_of_the_day` here).

`~odoo.web.Model.call` can be used to call any (public) method of an
Odoo model. It takes the following positional arguments:

  - `name`  
    The name of the method to call, `my_method` here

  - `args`  
    an array of [positional
    arguments](https://docs.python.org/2/glossary.html#term-argument) to
    provide to the method. Because the example has no positional
    argument to provide, the `args` parameter is not provided.
    
    Here is an other example with positional arguments:
    
    ``` python
    @api.model
    def my_method2(self, a, b, c): ...
    ```
    
    ``` javascript
    model.call("my_method", [1, 2, 3], ...
    // with this a=1, b=2 and c=3
    ```

  - `kwargs`  
    a mapping of [keyword
    arguments](https://docs.python.org/2/glossary.html#term-argument) to
    pass. The example provides a single named argument `context`.
    
    ``` python
    @api.model
    def my_method2(self, a, b, c): ...
    ```
    
    ``` javascript
    model.call("my_method", [], {a: 1, b: 2, c: 3, ...
    // with this a=1, b=2 and c=3
    ```

`~odoo.Widget.call` returns a deferred resolved with the value returned
by the model's method as first argument.

### CompoundContext

The previous section used a `context` argument which was not explained
in the method call:

``` javascript
model.call("my_method", {context: new instance.web.CompoundContext()})
```

The context is like a "magic" argument that the web client will always
give to the server when calling a method. The context is a dictionary
containing multiple keys. One of the most important key is the language
of the user, used by the server to translate all the messages of the
application. Another one is the time zone of the user, used to compute
correctly dates and times if Odoo is used by people in different
countries.

The `argument` is necessary in all methods, otherwise bad things could
happen (such as the application not being translated correctly). That's
why, when you call a model's method, you should always provide that
argument. The solution to achieve that is to use
`odoo.web.CompoundContext`.

`~odoo.web.CompoundContext` is a class used to pass the user's context
(with language, time zone, etc...) to the server as well as adding new
keys to the context (some models' methods use arbitrary keys added to
the context). It is created by giving to its constructor any number of
dictionaries or other `~odoo.web.CompoundContext` instances. It will
merge all those contexts before sending them to the server.

``` javascript
model.call("my_method", {context: new instance.web.CompoundContext({'new_key': 'key_value'})})
```

``` python
@api.model
def my_method(self):
    print self.env.context
    // will print: {'lang': 'en_US', 'new_key': 'key_value', 'tz': 'Europe/Brussels', 'uid': 1}
```

You can see the dictionary in the argument `context` contains some keys
that are related to the configuration of the current user in Odoo plus
the `new_key` key that was added when instantiating
`~odoo.web.CompoundContext`.

### Queries

While `~odoo.Model.call` is sufficient for any interaction with Odoo
models, Odoo Web provides a helper for simpler and clearer querying of
models (fetching of records based on various conditions):
`~odoo.Model.query` which acts as a shortcut for the common combination
of :py`~odoo.models.Model.search` and ::py`~odoo.models.Model.read`. It
provides a clearer syntax to search and read models:

``` javascript
model.query(['name', 'login', 'user_email', 'signature'])
     .filter([['active', '=', true], ['company_id', '=', main_company]])
     .limit(15)
     .all().then(function (users) {
    // do work with users records
});
```

versus:

``` javascript
model.call('search', [['active', '=', true], ['company_id', '=', main_company]], {limit: 15})
    .then(function (ids) {
        return model.call('read', [ids, ['name', 'login', 'user_email', 'signature']]);
    })
    .then(function (users) {
        // do work with users records
    });
```

  - `~odoo.web.Model.query` takes an optional list of fields as
    parameter (if no field is provided, all fields of the model are
    fetched). It returns a `odoo.web.Query` which can be further
    customized before being executed
  - `~odoo.web.Query` represents the query being built. It is immutable,
    methods to customize the query actually return a modified copy, so
    it's possible to use the original and the new version side-by-side.
    See `~odoo.web.Query` for its customization options.

When the query is set up as desired, simply call `~odoo.web.Query.all`
to execute it and return a deferred to its result. The result is the
same as :py`~odoo.models.Model.read`'s, an array of dictionaries where
each dictionary is a requested record, with each requested field a
dictionary key.

## Exercises

<div class="exercise">

Message of the Day

Create a `MessageOfTheDay` widget displaying the last record of the
`oepetstore.message_of_the_day` model. The widget should fetch its
record as soon as it is displayed.

Display the widget in the Pet Store home page.

<div class="only">

solutions

``` javascript
odoo.oepetstore = function(instance, local) {
    var _t = instance.web._t,
        _lt = instance.web._lt;
    var QWeb = instance.web.qweb;

    local.HomePage = instance.Widget.extend({
        template: "HomePage",
        start: function() {
            return new local.MessageOfTheDay(this).appendTo(this.$el);
        },
    });

    instance.web.client_actions.add('petstore.homepage', 'instance.oepetstore.HomePage');

    local.MessageOfTheDay = instance.Widget.extend({
        template: "MessageOfTheDay",
        start: function() {
            var self = this;
            return new instance.web.Model("oepetstore.message_of_the_day")
                .query(["message"])
                .order_by('-create_date', '-id')
                .first()
                .then(function(result) {
                    self.$(".oe_mywidget_message_of_the_day").text(result.message);
                });
        },
    });

}
```

``` xml
<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="HomePage">
        <div class="oe_petstore_homepage">
        </div>
    </t>
    <t t-name="MessageOfTheDay">
        <div class="oe_petstore_motd">
            <p class="oe_mywidget_message_of_the_day"></p>
        </div>
    </t>
</templates>
```

``` css
.oe_petstore_motd {
    margin: 5px;
    padding: 5px;
    border-radius: 3px;
    background-color: #F0EEEE;
}
```

</div>

</div>

<div class="exercise">

Pet Toys List

Create a `PetToysList` widget displaying 5 toys (using their name and
their images).

The pet toys are not stored in a new model, instead they're stored in
`product.product` using a special category *Pet Toys*. You can see the
pre-generated toys and add new ones by going to `Pet Store --> Pet Store
--> Pet Toys`. You will probably need to explore `product.product` to
create the right domain to select just pet toys.

In Odoo, images are generally stored in regular fields encoded as
[base64](http://en.wikipedia.org/wiki/Base64), HTML supports displaying
images straight from base64 with `<img
src="data:{mime_type};base64,{base64_image_data}"/>`

The `PetToysList` widget should be displayed on the home page on the
right of the `MessageOfTheDay` widget. You will need to make some layout
with CSS to achieve this.

<div class="only">

solutions

``` javascript
odoo.oepetstore = function(instance, local) {
    var _t = instance.web._t,
        _lt = instance.web._lt;
    var QWeb = instance.web.qweb;

    local.HomePage = instance.Widget.extend({
        template: "HomePage",
        start: function () {
            return Promise.all([
                new local.PetToysList(this).appendTo(this.$('.oe_petstore_homepage_left')),
                new local.MessageOfTheDay(this).appendTo(this.$('.oe_petstore_homepage_right'))
            ]);
        }
    });
    instance.web.client_actions.add('petstore.homepage', 'instance.oepetstore.HomePage');

    local.MessageOfTheDay = instance.Widget.extend({
        template: 'MessageOfTheDay',
        start: function () {
            var self = this;
            return new instance.web.Model('oepetstore.message_of_the_day')
                .query(["message"])
                .order_by('-create_date', '-id')
                .first()
                .then(function (result) {
                    self.$(".oe_mywidget_message_of_the_day").text(result.message);
                });
        }
    });

    local.PetToysList = instance.Widget.extend({
        template: 'PetToysList',
        start: function () {
            var self = this;
            return new instance.web.Model('product.product')
                .query(['name', 'image'])
                .filter([['categ_id.name', '=', "Pet Toys"]])
                .limit(5)
                .all()
                .then(function (results) {
                    _(results).each(function (item) {
                        self.$el.append(QWeb.render('PetToy', {item: item}));
                    });
                });
        }
    });
}
```

``` xml
<?xml version="1.0" encoding="UTF-8"?>

<templates xml:space="preserve">
    <t t-name="HomePage">
        <div class="oe_petstore_homepage">
            <div class="oe_petstore_homepage_left"></div>
            <div class="oe_petstore_homepage_right"></div>
        </div>
    </t>
    <t t-name="MessageOfTheDay">
        <div class="oe_petstore_motd">
            <p class="oe_mywidget_message_of_the_day"></p>
        </div>
    </t>
    <t t-name="PetToysList">
        <div class="oe_petstore_pettoyslist">
        </div>
    </t>
    <t t-name="PetToy">
        <div class="oe_petstore_pettoy">
            <p><t t-esc="item.name"/></p>
            <p><img t-att-src="'data:image/jpg;base64,'+item.image"/></p>
        </div>
    </t>
</templates>
```

``` css
.oe_petstore_homepage {
    display: table;
}

.oe_petstore_homepage_left {
    display: table-cell;
    width : 300px;
}

.oe_petstore_homepage_right {
    display: table-cell;
    width : 300px;
}

.oe_petstore_motd {
    margin: 5px;
    padding: 5px;
    border-radius: 3px;
    background-color: #F0EEEE;
}

.oe_petstore_pettoyslist {
    padding: 5px;
}

.oe_petstore_pettoy {
    margin: 5px;
    padding: 5px;
    border-radius: 3px;
    background-color: #F0EEEE;
}
```

</div>

</div>

## Existing web components

### The Action Manager

In Odoo, many operations start from an `action <reference/actions>`:
opening a menu item (to a view), printing a report, ...

Actions are pieces of data describing how a client should react to the
activation of a piece of content. Actions can be stored (and read
through a model) or they can be generated on-the fly (locally to the
client by javascript code, or remotely by a method of a model).

In Odoo Web, the component responsible for handling and reacting to
these actions is the *Action Manager*.

#### Using the Action Manager

The action manager can be invoked explicitly from javascript code by
creating a dictionary describing `an action <reference/actions>` of the
right type, and calling an action manager instance with it.

`~odoo.Widget.do_action` is a shortcut of `~odoo.Widget` looking up the
"current" action manager and executing the action:

``` javascript
instance.web.TestWidget = instance.Widget.extend({
    dispatch_to_new_action: function() {
        this.do_action({
            type: 'ir.actions.act_window',
            res_model: "product.product",
            res_id: 1,
            views: [[false, 'form']],
            target: 'current',
            context: {},
        });
    },
});
```

The most common action `type` is `ir.actions.act_window` which provides
views to a model (displays a model in various manners), its most common
attributes are:

  - `res_model`  
    The model to display in views

  - `res_id` (optional)  
    For form views, a preselected record in `res_model`

  - `views`  
    Lists the views available through the action. A list of `[view_id,
    view_type]`, `view_id` can either be the database identifier of a
    view of the right type, or `false` to use the view by default for
    the specified type. View types can not be present multiple times.
    The action will open the first view of the list by default.

  - `target`  
    Either `current` (the default) which replaces the "content" section
    of the web client by the action, or `new` to open the action in a
    dialog box.

  - `context`  
    Additional context data to use within the action.

<div class="exercise">

Jump to Product

Modify the `PetToysList` component so clicking on a toy replaces the
homepage by the toy's form view.

<div class="only">

solutions

``` javascript
local.PetToysList = instance.Widget.extend({
    template: 'PetToysList',
    events: {
        'click .oe_petstore_pettoy': 'selected_item',
    },
    start: function () {
        var self = this;
        return new instance.web.Model('product.product')
            .query(['name', 'image'])
            .filter([['categ_id.name', '=', "Pet Toys"]])
            .limit(5)
            .all()
            .then(function (results) {
                _(results).each(function (item) {
                    self.$el.append(QWeb.render('PetToy', {item: item}));
                });
            });
    },
    selected_item: function (event) {
        this.do_action({
            type: 'ir.actions.act_window',
            res_model: 'product.product',
            res_id: $(event.currentTarget).data('id'),
            views: [[false, 'form']],
        });
    },
});
```

``` xml
<t t-name="PetToy">
    <div class="oe_petstore_pettoy" t-att-data-id="item.id">
        <p><t t-esc="item.name"/></p>
        <p><img t-attf-src="data:image/jpg;base64,{{item.image}}"/></p>
    </div>
</t>
```

</div>

</div>

### Client Actions

Throughout this guide, we used a simple `HomePage` widget which the web
client automatically starts when we select the right menu item. But how
did the Odoo web know to start this widget? Because the widget is
registered as a *client action*.

A client action is (as its name implies) an action type defined almost
entirely in the client, in javascript for Odoo web. The server simply
sends an action tag (an arbitrary name), and optionally adds a few
parameters, but beyond that *everything* is handled by custom client
code.

Our widget is registered as the handler for the client action through
this:

``` javascript
instance.web.client_actions.add('petstore.homepage', 'instance.oepetstore.HomePage');
```

`instance.web.client_actions` is a `~odoo.web.Registry` in which the
action manager looks up client action handlers when it needs to execute
one. The first parameter of `~odoo.web.Registry.add` is the name (tag)
of the client action, and the second parameter is the path to the widget
from the Odoo web client root.

When a client action must be executed, the action manager looks up its
tag in the registry, walks the specified path and displays the widget it
finds at the end.

<div class="note">

<div class="title">

Note

</div>

a client action handler can also be a regular function, in which case
it'll be called and its result (if any) will be interpreted as the next
action to execute.

</div>

On the server side, we had simply defined an `ir.actions.client` action:

``` xml
<record id="action_home_page" model="ir.actions.client">
    <field name="tag">petstore.homepage</field>
</record>
```

and a menu opening the action:

``` xml
<menuitem id="home_page_petstore_menu" parent="petstore_menu"
          name="Home Page" action="action_home_page"/>
```

### Architecture of the Views

Much of Odoo web's usefulness (and complexity) resides in views. Each
view type is a way of displaying a model in the client.

#### The View Manager

When an `ActionManager` instance receive an action of type
`ir.actions.act_window`, it delegates the synchronization and handling
of the views themselves to a *view manager*, which will then set up one
or multiple views depending on the original action's requirements:

![image](web/viewarchitecture.png)

#### The Views

Most `Odoo views <reference/views>` are implemented through a subclass
of `odoo.web.View` which provides a bit of generic basic structure for
handling events and displaying model information.

The *search view* is considered a view type by the main Odoo framework,
but handled separately by the web client (as it's a more permanent
fixture and can interact with other views, which regular views don't
do).

A view is responsible for loading its own description XML (using
:py`~odoo.models.Model.fields_view_get`) and any other data source it
needs. To that purpose, views are provided with an optional view
identifier set as the `~odoo.web.View.view_id` attribute.

Views are also provided with a `~odoo.web.DataSet` instance which holds
most necessary model information (the model name and possibly various
record ids).

Views may also want to handle search queries by overriding
`~odoo.web.View.do_search`, and updating their `~odoo.web.DataSet` as
necessary.

### The Form View Fields

A common need is the extension of the web form view to add new ways of
displaying fields.

All built-in fields have a default display implementation, a new form
widget may be necessary to correctly interact with a new field type
(e.g. a `GIS` field) or to provide new representations and ways to
interact with existing field types (e.g. validate :py`~odoo.fields.Char`
fields which should contain email addresses and display them as email
links).

To explicitly specify which form widget should be used to display a
field, simply use the `widget` attribute in the view's XML description:

``` xml
<field name="contact_mail" widget="email"/>
```

<div class="note">

<div class="title">

Note

</div>

  - the same widget is used in both "view" (read-only) and "edit" modes
    of a form view, it's not possible to use a widget in one and an
    other widget in the other
  - and a given field (name) can not be used multiple times in the same
    form
  - a widget may ignore the current mode of the form view and remain the
    same in both view and edit modes

</div>

<div class="todo">

most of this should probably move to an advanced form view guide

</div>

Fields are instantiated by the form view after it has read its XML
description and constructed the corresponding HTML representing that
description. After that, the form view will communicate with the field
objects using some methods. These methods are defined by the
`FieldInterface` interface. Almost all fields inherit the
`AbstractField` abstract class. That class defines some default
mechanisms that need to be implemented by most fields.

Here are some of the responsibilities of a field class:

  - The field class must display and allow the user to edit the value of
    the field.
  - It must correctly implement the 3 field attributes available in all
    fields of Odoo. The `AbstractField` class already implements an
    algorithm that dynamically calculates the value of these attributes
    (they can change at any moment because their value change according
    to the value of other fields). Their values are stored in *Widget
    Properties* (the widget properties were explained earlier in this
    guide). It is the responsibility of each field class to check these
    widget properties and dynamically adapt depending of their values.
    Here is a description of each of these attributes:
      - `required`: The field must have a value before saving. If
        `required` is `true` and the field doesn't have a value, the
        method `is_valid()` of the field must return `false`.
      - `invisible`: When this is `true`, the field must be invisible.
        The `AbstractField` class already has a basic implementation of
        this behavior that fits most fields.
      - `readonly`: When `true`, the field must not be editable by the
        user. Most fields in Odoo have a completely different behavior
        depending on the value of `readonly`. As example, the
        `FieldChar` displays an HTML `<input>` when it is editable and
        simply displays the text when it is read-only. This also means
        it has much more code it would need to implement only one
        behavior, but this is necessary to ensure a good user
        experience.
  - Fields have two methods, `set_value()` and `get_value()`, which are
    called by the form view to give it the value to display and get back
    the new value entered by the user. These methods must be able to
    handle the value as given by the Odoo server when a `read()` is
    performed on a model and give back a valid value for a `write()`.
    Remember that the JavaScript/Python data types used to represent the
    values given by `read()` and given to `write()` is not necessarily
    the same in Odoo. As example, when you read a many2one, it is always
    a tuple whose first value is the id of the pointed record and the
    second one is the name get (ie: `(15, "Agrolait")`). But when you
    write a many2one it must be a single integer, not a tuple anymore.
    `AbstractField` has a default implementation of these methods that
    works well for simple data type and set a widget property named
    `value`.

Please note that, to better understand how to implement fields, you are
strongly encouraged to look at the definition of the `FieldInterface`
interface and the `AbstractField` class directly in the code of the Odoo
web client.

#### Creating a New Type of Field

In this part we will explain how to create a new type of field. The
example here will be to re-implement the `FieldChar` class and
progressively explain each part.

##### Simple Read-Only Field

Here is a first implementation that will only display text. The user
will not be able to modify the content of the field.

``` javascript
local.FieldChar2 = instance.web.form.AbstractField.extend({
    init: function() {
        this._super.apply(this, arguments);
        this.set("value", "");
    },
    render_value: function() {
        this.$el.text(this.get("value"));
    },
});

instance.web.form.widgets.add('char2', 'instance.oepetstore.FieldChar2');
```

In this example, we declare a class named `FieldChar2` inheriting from
`AbstractField`. We also register this class in the registry
`instance.web.form.widgets` under the key `char2`. That will allow us to
use this new field in any form view by specifying `widget="char2"` in
the `<field/>` tag in the XML declaration of the view.

In this example, we define a single method: `render_value()`. All it
does is display the widget property `value`. Those are two tools defined
by the `AbstractField` class. As explained before, the form view will
call the method `set_value()` of the field to set the value to display.
This method already has a default implementation in `AbstractField`
which simply sets the widget property `value`. `AbstractField` also
watch the `change:value` event on itself and calls the `render_value()`
when it occurs. So, `render_value()` is a convenience method to
implement in child classes to perform some operation each time the value
of the field changes.

In the `init()` method, we also define the default value of the field if
none is specified by the form view (here we assume the default value of
a `char` field should be an empty string).

##### Read-Write Field

Read-only fields, which only display content and don't allow the user to
modify it can be useful, but most fields in Odoo also allow editing.
This makes the field classes more complicated, mostly because fields are
supposed to handle both editable and non-editable mode, those modes are
often completely different (for design and usability purpose) and the
fields must be able to switch between modes at any moment.

To know in which mode the current field should be, the `AbstractField`
class sets a widget property named `effective_readonly`. The field
should watch for changes in that widget property and display the correct
mode accordingly. Example:

``` javascript
local.FieldChar2 = instance.web.form.AbstractField.extend({
    init: function() {
        this._super.apply(this, arguments);
        this.set("value", "");
    },
    start: function() {
        this.on("change:effective_readonly", this, function() {
            this.display_field();
            this.render_value();
        });
        this.display_field();
        return this._super();
    },
    display_field: function() {
        var self = this;
        this.$el.html(QWeb.render("FieldChar2", {widget: this}));
        if (! this.get("effective_readonly")) {
            this.$("input").change(function() {
                self.internal_set_value(self.$("input").val());
            });
        }
    },
    render_value: function() {
        if (this.get("effective_readonly")) {
            this.$el.text(this.get("value"));
        } else {
            this.$("input").val(this.get("value"));
        }
    },
});

instance.web.form.widgets.add('char2', 'instance.oepetstore.FieldChar2');
```

``` xml
<t t-name="FieldChar2">
    <div class="oe_field_char2">
        <t t-if="! widget.get('effective_readonly')">
            <input type="text"></input>
        </t>
    </div>
</t>
```

In the `start()` method (which is called immediately after a widget has
been appended to the DOM), we bind on the event
`change:effective_readonly`. That allows us to redisplay the field each
time the widget property `effective_readonly` changes. This event
handler will call `display_field()`, which is also called directly in
`start()`. This `display_field()` was created specifically for this
field, it's not a method defined in `AbstractField` or any other class.
We can use this method to display the content of the field depending on
the current mode.

From now on the conception of this field is typical, except there is a
lot of verifications to know the state of the `effective_readonly`
property:

  - In the QWeb template used to display the content of the widget, it
    displays an `<input type="text" />` if we are in read-write mode and
    nothing in particular in read-only mode.
  - In the `display_field()` method, we have to bind on the `change`
    event of the `<input type="text" />` to know when the user has
    changed the value. When it happens, we call the
    `internal_set_value()` method with the new value of the field. This
    is a convenience method provided by the `AbstractField` class. That
    method will set a new value in the `value` property but will not
    trigger a call to `render_value()` (which is not necessary since the
    `<input type="text" />` already contains the correct value).
  - In `render_value()`, we use a completely different code to display
    the value of the field depending if we are in read-only or in
    read-write mode.

<div class="exercise">

Create a Color Field

Create a `FieldColor` class. The value of this field should be a string
containing a color code like those used in CSS (example: `#FF0000` for
red). In read-only mode, this color field should display a little block
whose color corresponds to the value of the field. In read-write mode,
you should display an `<input type="color" />`. That type of `<input />`
is an HTML5 component that doesn't work in all browsers but works well
in Google Chrome. So it's OK to use as an exercise.

You can use that widget in the form view of the `message_of_the_day`
model for its field named `color`. As a bonus, you can change the
`MessageOfTheDay` widget created in the previous part of this guide to
display the message of the day with the background color indicated in
the `color` field.

<div class="only">

solutions

``` javascript
local.FieldColor = instance.web.form.AbstractField.extend({
    events: {
        'change input': function (e) {
            if (!this.get('effective_readonly')) {
                this.internal_set_value($(e.currentTarget).val());
            }
        }
    },
    init: function() {
        this._super.apply(this, arguments);
        this.set("value", "");
    },
    start: function() {
        this.on("change:effective_readonly", this, function() {
            this.display_field();
            this.render_value();
        });
        this.display_field();
        return this._super();
    },
    display_field: function() {
        this.$el.html(QWeb.render("FieldColor", {widget: this}));
    },
    render_value: function() {
        if (this.get("effective_readonly")) {
            this.$(".oe_field_color_content").css("background-color", this.get("value") || "#FFFFFF");
        } else {
            this.$("input").val(this.get("value") || "#FFFFFF");
        }
    },
});
instance.web.form.widgets.add('color', 'instance.oepetstore.FieldColor');
```

``` xml
<t t-name="FieldColor">
    <div class="oe_field_color">
        <t t-if="widget.get('effective_readonly')">
            <div class="oe_field_color_content" />
        </t>
        <t t-if="! widget.get('effective_readonly')">
            <input type="color"></input>
        </t>
    </div>
</t>
```

``` css
.oe_field_color_content {
    height: 20px;
    width: 50px;
    border: 1px solid black;
}
```

</div>

</div>

### The Form View Custom Widgets

Form fields are used to edit a single field, and are intrinsically
linked to a field. Because this may be limiting, it is also possible to
create *form widgets* which are not so restricted and have less ties to
a specific lifecycle.

Custom form widgets can be added to a form view through the `widget`
tag:

``` xml
<widget type="xxx" />
```

This type of widget will simply be created by the form view during the
creation of the HTML according to the XML definition. They have
properties in common with the fields (like the `effective_readonly`
property) but they are not assigned a precise field. And so they don't
have methods like `get_value()` and `set_value()`. They must inherit
from the `FormWidget` abstract class.

Form widgets can interact with form fields by listening for their
changes and fetching or altering their values. They can access form
fields through their `~odoo.web.form.FormWidget.field_manager`
attribute:

``` javascript
local.WidgetMultiplication = instance.web.form.FormWidget.extend({
    start: function() {
        this._super();
        this.field_manager.on("field_changed:integer_a", this, this.display_result);
        this.field_manager.on("field_changed:integer_b", this, this.display_result);
        this.display_result();
    },
    display_result: function() {
        var result = this.field_manager.get_field_value("integer_a") *
                     this.field_manager.get_field_value("integer_b");
        this.$el.text("a*b = " + result);
    }
});

instance.web.form.custom_widgets.add('multiplication', 'instance.oepetstore.WidgetMultiplication');
```

`~odoo.web.form.FormWidget` is generally the `~odoo.web.form.FormView`
itself, but features used from it should be limited to those defined by
`~odoo.web.form.FieldManagerMixin`, the most useful being:

  - `~odoo.web.form.FieldManagerMixin.get_field_value(field_name)` which
    returns the value of a field.
  - `~odoo.web.form.FieldManagerMixin.set_values(values)` sets multiple
    field values, takes a mapping of `{field_name: value_to_set}`
  - An event `field_changed:{field_name}` is triggered any time the
    value of the field called `field_name` is changed

<div class="exercise">

Show Coordinates on Google Map

Add two fields to `product.product` storing a latitude and a longitude,
then create a new form widget to display the latitude and longitude of a
product's origin on a map

To display the map, use Google Map's embedding:

``` html
<iframe width="400" height="300" src="https://maps.google.com/?ie=UTF8&amp;ll=XXX,YYY&amp;output=embed">
</iframe>
```

where `XXX` should be replaced by the latitude and `YYY` by the
longitude.

Display the two position fields and a map widget using them in a new
notebook page of the product's form view.

<div class="only">

solutions

``` javascript
local.WidgetCoordinates = instance.web.form.FormWidget.extend({
    start: function() {
        this._super();
        this.field_manager.on("field_changed:provider_latitude", this, this.display_map);
        this.field_manager.on("field_changed:provider_longitude", this, this.display_map);
        this.display_map();
    },
    display_map: function() {
        this.$el.html(QWeb.render("WidgetCoordinates", {
            "latitude": this.field_manager.get_field_value("provider_latitude") || 0,
            "longitude": this.field_manager.get_field_value("provider_longitude") || 0,
        }));
    }
});

instance.web.form.custom_widgets.add('coordinates', 'instance.oepetstore.WidgetCoordinates');
```

``` xml
<t t-name="WidgetCoordinates">
    <iframe width="400" height="300"
        t-attf-src="https://maps.google.com/?ie=UTF8&amp;ll={{latitude}},{{longitude}}&amp;output=embed">
    </iframe>
</t>
```

</div>

</div>

<div class="exercise">

Get the Current Coordinate

Add a button resetting the product's coordinates to the location of the
user, you can get these coordinates using the [javascript geolocation
API](http://diveintohtml5.info/geolocation.html).

Now we would like to display an additional button to automatically set
the coordinates to the location of the current user.

To get the coordinates of the user, an easy way is to use the
geolocation JavaScript API. [See the online documentation to know how to
use it]().

Please also note that the user should not be able to click on that
button when the form view is in read-only mode. So, this custom widget
should handle correctly the `effective_readonly` property just like any
field. One way to do this would be to make the button disappear when
`effective_readonly` is true.

<div class="only">

solutions

``` javascript
local.WidgetCoordinates = instance.web.form.FormWidget.extend({
    events: {
        'click button': function () {
            navigator.geolocation.getCurrentPosition(
                this.proxy('received_position'));
        }
    },
    start: function() {
        var sup = this._super();
        this.field_manager.on("field_changed:provider_latitude", this, this.display_map);
        this.field_manager.on("field_changed:provider_longitude", this, this.display_map);
        this.on("change:effective_readonly", this, this.display_map);
        this.display_map();
        return sup;
    },
    display_map: function() {
        this.$el.html(QWeb.render("WidgetCoordinates", {
            "latitude": this.field_manager.get_field_value("provider_latitude") || 0,
            "longitude": this.field_manager.get_field_value("provider_longitude") || 0,
        }));
        this.$("button").toggle(! this.get("effective_readonly"));
    },
    received_position: function(obj) {
        this.field_manager.set_values({
            "provider_latitude": obj.coords.latitude,
            "provider_longitude": obj.coords.longitude,
        });
    },
});

instance.web.form.custom_widgets.add('coordinates', 'instance.oepetstore.WidgetCoordinates');
```

``` xml
<t t-name="WidgetCoordinates">
    <iframe width="400" height="300"
        t-attf-src="https://maps.google.com/?ie=UTF8&amp;ll={{latitude}},{{longitude}}&amp;output=embed">
    </iframe>
    <button>Get My Current Coordinate</button>
</t>
```

</div>

</div>

1.  as a separate concept from instances. In many languages classes are
    full-fledged objects and themselves instance (of metaclasses) but
    there remains two fairly separate hierarchies between classes and
    instances

2.  as well as papering over cross-browser differences, although this
    has become less necessary over time


---
## File: ./content/developer/tutorials/restrict_data_access.md

# Restrict access to data

<div class="important">

<div class="title">

Important

</div>

This tutorial is an extension of the `getting_started` tutorial. Make
sure you have completed it and use the
<span class="title-ref">estate</span> module you have built as a base
for the exercises in this tutorial.

</div>

So far we have mostly concerned ourselves with implementing useful
features. However in most business scenarios *security* quickly becomes
a concern: currently,

  - Any employee (which is what `group_user` stands for) can create,
    read, update or delete properties, property types, or property tags.
  - If `estate_account` is installed then only agents allowed to
    interact with invoicing can confirm sales as that's necessary to
    `create an
    invoice <tutorials/getting_started/14_other_module/create>`.

However:

  - We do not want third parties to be able to access properties
    directly.
  - Not all our employees may be real-estate agents (e.g. administrative
    personnel, property managers, ...), we don't want non-agents to see
    the available properties.
  - Real-estate agents don't need or get to decide what property types
    or tags are *available*.
  - Real-estate agents can have *exclusive* properties, we do not want
    one agent to be able to manage another's exclusivities.
  - All real-estate agents should be able to confirm the sale of a
    property they can manage, but we do not want them to be able to
    validate or mark as paid any invoice in the system.

<div class="note">

<div class="title">

Note

</div>

We may actually be fine with some or most of these for a small business.

Because it's easier for users to disable unnecessary security rules than
it is to create them from nothing, it's better to err on the side of
caution and limiting access: users can relax that access if necessary or
convenient.

</div>

## Groups

<div class="seealso">

The documentation related to this topic can be found in `the security
reference <reference/security>`.

`/contributing/development/coding_guidelines` document the format and
location of master data items.

</div>

<div class="admonition">

**Goal**

At the end of this section,

  - We can make employees *real-estate agents* or *real-estate
    managers*.
  - The `admin` user is a real-estate manager.
  - We have a new *real-estate agent* employee with no access to
    invoicing or administration.

</div>

It would not be practical to attach individual security rules to
employees any time we need a change so *groups* link security rules and
users. They correspond to roles that can be assigned to employees.

For most Odoo applications\[1\] a good baseline is to have *user* and
*manager* (or administrator) roles: the manager can change the
configuration of the application and oversee the entirety of its use
while the user can well, use the application\[2\].

This baseline seems sufficient for us:

  - Real estate managers can configure the system (manage available
    types and tags) as well as oversee every property in the pipeline.
  - Real estate agents can manage the properties under their care, or
    properties which are not specifically under the care of any agent.

In keeping with Odoo's data-driven nature, a group is no more than a
record of the `res.groups` model. They are normally part of a module's
`master data
<define_module_data>`, defined in one of the module's data files.

As simple example [can be found
here](https://github.com/odoo/odoo/blob/532c083cbbe0ee6e7a940e2bdc9c677bd56b62fa/addons/hr/security/hr_security.xml#L9-L14).

<div class="exercise">

1.  Create the `security.xml` file in the appropriate folder and add it
    to the `__manifest__.py` file.
2.  If not already, add a `'category'` field to your `__manifest__.py`
    with value `Real Estate/Brokerage`.
3.  Add a record creating a group with the id `estate_group_user`, the
    name "Agent" and the category
    `base.module_category_real_estate_brokerage`.
4.  Below that, add a record creating a group with the id
    `estate_group_manager`, the name "Manager" and the category
    `base.module_category_real_estate_brokerage`. The
    `estate_group_manager` group needs to imply `estate_group_user`.

<div class="note">

<div class="title">

Note

</div>

Where does that **category** comes from ? It's a *module category*. Here
we used the category id `base.module_category_real_estate_brokerage`
which was automatically generated by Odoo based on the
<span class="title-ref">category</span> set in the `__manifest__.py` of
the module. You can also find here the list of [default module
categories](https://github.com/odoo/odoo/blob/71da80deb044852a2af6b111d695f94aad7803ac/odoo/addons/base/data/ir_module_category_data.xml)
provided by Odoo.

</div>

<div class="tip">

<div class="title">

Tip

</div>

Since we modified data files, remember to restart Odoo and update the
module using `-u estate`.

</div>

If you go to `Settings --> Manage Users` and open the `admin` user
("Mitchell Admin"), you should see a new section:

![](restrict_data_access/groups.png)

Set the admin user to be a *Real Estate manager*.

</div>

<div class="exercise">

Via the web interface, create a new user with only the "real estate
agent" access. The user should not have any Invoicing or Administration
access.

Use a private tab or window to log in with the new user (remember to set
a password), as the real-estate agent you should only see the real
estate application, and possibly the Discuss (chat) application:

![](restrict_data_access/agent.png)

</div>

## Access Rights

<div class="seealso">

The documentation related to this topic can be found at
`reference/security/acl`.

</div>

<div class="admonition">

**Goal**

At the end of this section,

  - Employees who are not at least real-estate agents will not see the
    real-estate application.
  - Real-estate agents will not be able to update the property types or
    tags.

</div>

Access rights were first introduced in
`tutorials/getting_started/05_securityintro`.

Access rights are a way to give users access to models *via* groups:
associate an access right to a group, then all users with that group
will have the access.

For instance we don't want real-estate agents to be able to modify what
property types are available, so we would not link that access to the
"user" group.

Access rights can only give access, they can't remove it: when access is
checked, the system looks to see if *any* access right associated with
the user (via any group) grants that access.

<table>
<thead>
<tr class="header">
<th>group</th>
<th>create</th>
<th>read</th>
<th>update</th>
<th>delete</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>A B C</p></td>
<td><blockquote>
<p>X</p>
</blockquote></td>
<td><blockquote>
<p>X X</p>
</blockquote></td>
<td><blockquote>
<p>X</p>
</blockquote></td>
<td></td>
</tr>
</tbody>
</table>

A user with the groups A and C will be able to do anything but delete
the object while one with B and C will be able to read and update it,
but not create or delete it.

<div class="note">

<div class="title">

Note

</div>

  - The group of an access right can be omitted, this means the ACL
    applies to *every user*, this is a useful but risky fallback as
    depending on the applications installed it can grant even non-users
    access to the model.
  - If no access right applies to a user, they are not granted access
    (default-deny).
  - If a menu item points to a model to which a user doesn't have access
    and has no submenus which the user can see, the menu will not be
    displayed.

</div>

<div class="exercise">

Update the access rights file to:

  - Give full access to all objects to your Real Estate Manager group.
  - Give agents (real estate users) only read access to types and tags.
  - Give nobody the right to delete properties.
  - Check that your agent user is not able to alter types or tags, or to
    delete properties, but that they can otherwise create or update
    properties.

<div class="warning">

<div class="title">

Warning

</div>

Remember to give different xids to your `ir.model.access` records
otherwise they will overwrite one another.

</div>

</div>

Since the "demo" user was not made a real-estate agent or manager, they
should not even be able to see the real-estate application. Use a
private tab or window to check for this (the "demo" user has the
password "demo").

## Record Rules

<div class="seealso">

The documentation related to this topic can be found at
`reference/security/rules`.

</div>

<div class="admonition">

**Goal**

At the end of this section, agents will not be able to see the
properties exclusive to their colleagues; but managers will still be
able to see everything.

</div>

Access rights can grant access to an entire model but often we need to
be more specific: while an agent can interact with properties in general
we may not want them to update or even see properties managed by one of
their colleagues.

Record *rules* provide that precision: they can grant or reject access
to individual records:

``` xml
<record id="rule_id" model="ir.rule">
    <field name="name">A description of the rule's role</field>
    <field name="model_id" ref="model_to_manage"/>
    <field name="perm_read" eval="False"/>
    <field name="groups" eval="[(4, ref('base.group_user'))]"/>
    <field name="domain_force">[
        '|', ('user_id', '=', user.id),
             ('user_id', '=', False)
    ]</field>
</record>
```

The `reference/orm/domains` is how access is managed: if the record
passes then access is granted, otherwise access is rejected.

<div class="tip">

<div class="title">

Tip

</div>

Because rules tends to be rather complex and not created in bulk,
they're usually created in XML rather than the CSV used for access
rights.

</div>

The rule above:

  - Only applies to the "create", "update" (write) and "delete" (unlink)
    operations: here we want every employee to be able to see other
    users' records but only the author / assignee can update a record.
  - Is `non-global <reference/security/rules/global>` so we can provide
    an additional rule for e.g. managers.
  - Allows the operation if the current user (`user.id`) is set (e.g.
    created, or is assigned) on the record, or if the record has no
    associated user at all.

<div class="note">

<div class="title">

Note

</div>

If no rule is defined or applies to a model and operation, then the
operation is allowed (*default-allow*), this can have odd effects if
access rights are not set up correctly (are too permissive).

</div>

<div class="exercise">

Define a rule which limits agents to only being able to see or modify
properties which have no salesperson, or for which they are the
salesperson.

You may want to create a second real-estate agent user, or create a few
properties for which the salesperson is a manager or some other user.

Verify that your real estate manager(s) can still see all properties. If
not, why not? Remember:

> The `estate_group_manager` group needs to imply `estate_group_user`.

</div>

## Security Override

### Bypassing Security

<div class="admonition">

**Goal**

At the end of this section, agents should be able to confirm property
sales without needing invoicing access.

</div>

If you try to mark a property as "sold" as the real estate agent, you
should get an access error:

![](restrict_data_access/error.png)

This happens because `estate_account` tries to create an invoice during
the process, but creating an invoice requires the right to all invoice
management.

We want agents to be able to confirm a sale without them having full
invoicing access, which means we need to *bypass* the normal security
checks of Odoo in order to create an invoice *despite* the current user
not having the right to do so.

There are two main ways to bypass existing security checks in Odoo,
either wilfully or as a side-effect:

  - The `sudo()` method will create a new recordset in "sudo mode", this
    ignores all access rights and record rules (although hard-coded
    group and user checks may still apply).
  - Performing raw SQL queries will bypass access rights and record
    rules as a side-effect of bypassing the ORM itself.

<div class="exercise">

Update `estate_account` to bypass access rights and rules when creating
the invoice.

</div>

<div class="danger">

<div class="title">

Danger

</div>

These features should generally be avoided, and only used with extreme
care, after having checked that the current user and operation should be
able to bypass normal access rights validation.

Operations performed in such modes should also rely on user input as
little as possible, and should validate it to the maximum extent they
can.

</div>

### Programmatically checking security

<div class="admonition">

**Goal**

At the end of this section, the creation of the invoice should be
resilient to security issues regardless to changes to `estate`.

</div>

In Odoo, access rights and record rules are only checked *when
performing data access via the ORM* e.g. creating, reading, searching,
writing, or unlinking a record via ORM methods. Other methods do *not*
necessarily check against any sort of access rights.

In the previous section, we bypassed the record rules when creating the
invoice in `action_sold`. This bypass can be reached by any user without
any access right being checked:

  - Add a print to `action_sold` in `estate_account` before the creation
    of the invoice (as creating the invoice accesses the property,
    therefore triggers an ACL check) e.g.:
    
        print(" reached ".center(100, '='))

You should see `reached` in your Odoo log, followed by an access error.

<div class="danger">

<div class="title">

Danger

</div>

Just because you're already in Python code does not mean any access
right or rule has or will be checked.

</div>

*Currently* the accesses are implicitly checked by accessing data on
`self` as well as calling `super()` (which does the same and *updates*
`self`), triggering access errors and cancelling the transaction
"uncreating" our invoice.

*However* if this changes in the future, or we add side-effects to the
method (e.g. reporting the sale to a government agency), or bugs are
introduced in `estate`, ... it would be possible for non-agents to
trigger operations they should not have access to.

Therefore when performing non-CRUD operations, or legitimately bypassing
the ORM or security, or when triggering other side-effects, it is
extremely important to perform *explicit security checks*.

Explicit security checks can be performed by:

  - Checking who the current user is (`self.env.user`) and match them
    against specific models or records.
  - Checking that the current user has specific groups hard-coded to
    allow or deny an operation (`self.env.user.has_group`).
  - Calling the `check_access_rights(operation)` method on a recorset,
    this verifies whether the current user has access to the model
    itself.
  - Calling `check_access_rule(operations)` on a non-empty recorset,
    this verifies that the current user is allowed to perform the
    operation on *every* record of the set.

<div class="warning">

<div class="title">

Warning

</div>

Checking access rights and checking record rules are separate
operations, if you're checking record rules you usually want to also
check access rights beforehand.

</div>

<div class="exercise">

Before creating the invoice, use `check_access_rights` and
`check_access_rule` to ensure that the current user can update
properties in general, and this specific property in particular.

Re-run the bypass script, check that the error occurs before the print.

</div>

## Multi-company security

<div class="seealso">

`reference/howtos/company` for an overview of multi-company facilities
in general, and `multi-company security rules <howto/company/security>`
this in particular.

Documentation on rules in general can, again, be found at
`reference/security/rules`.

</div>

<div class="admonition">

**Goal**

At the end of this section, agents should only have access to properties
of their agency (or agencies).

</div>

For one reason or an other we might need to manage our real-estate
business as multiple companies e.g. we might have largely autonomous
agencies, or a franchise setup, or multiple brands (possibly from having
acquired other real-estate businesses) which remain legally or
financially separate from one another.

Odoo can be used to manage multiple companies inside the same system,
however the actual handling is up to individual modules: Odoo itself
provides the tools to manage the issue like company-dependent fields and
*multi-company rules*, which is what we're going to concern ourselves
with.

We want different agencies to be "siloed" from one another, with
properties belonging to a given agency and users (whether agents or
managers) only able to see properties linked to their agency.

As before, because this is based on non-trivial records it's easier for
a user to relax rules than to tighten them so it makes sense to default
to a relatively stronger security model.

Multi-company rules are simply record rules based on the `company_ids`
or `company_id` fields:

  - `company_ids` is all the companies to which the current user has
    access
  - `company_id` is the currently active company (the one the user is
    currently working in / for).

Multi-company rules will *usually* use the former i.e. check if the
record is associated with *one* of the companies the user has access to:

``` xml
<record model="ir.rule" id="hr_appraisal_plan_comp_rule">
    <field name="name">Appraisal Plan multi-company</field>
    <field name="model_id" ref="model_hr_appraisal_plan"/>
    <field name="domain_force">[
        '|', ('company_id', '=', False),
             ('company_id', 'in', company_ids)
    ]</field>
</record>
```

<div class="danger">

<div class="title">

Danger

</div>

Multi-company rules are usually `global
<reference/security/rules/global>`, otherwise there is a high risk that
additional rules would allow bypassing the muti-company rules.

</div>

<div class="exercise">

  - Add a `company_id` field to `estate.property`, it should be required
    (we don't want agency-less properties), and should default to the
    current user's current company.
  - Create a new company, with a new estate agent in that company.
  - The manager should be a member of both companies.
  - The old agent should only be a member of the old company.
  - Create a few properties in each company (either use the company
    selector as the manager or use the agents). Unset the default
    salesman to avoid triggering *that* rule.
  - All agents can see all companies, which is not desirable, add the
    record rule restricting this behaviour.

</div>

<div class="warning">

<div class="title">

Warning

</div>

remember to `--update` your module when you change its model or data

</div>

## Visibility \!= security

<div class="admonition">

**Goal**

At the end of this section, real-estate agents should not see the
Settings menu of the rea-estate application, but should still be able to
set the property type or tags.

</div>

Specific Odoo models can be associated directly with groups (or
companies, or users). It is important to figure out whether this
association is a *security* or a *visibility* feature before using it:

  - *Visibility* features mean a user can still access the model or
    record otherwise, either through an other part of the interface or
    by `perform
    operations remotely using RPC <../reference/external_api>`, things
    might just not be visible in the web interface in some contexts.
  - *Security* features mean a user can not access records, fields or
    operations.

Here are some examples:

  - Groups on *model fields* (in Python) are a security feature, users
    outside the group will not be able to retrieve the field, or even
    know it exists.
    
    Example: in server actions, [only system users can see or update
    Python
    code](https://github.com/odoo/odoo/blob/7058e338a980268df1c502b8b2860bdd8be9f727/odoo/addons/base/models/ir_actions.py#L414-L417).

  - Groups on *view elements* (in XML) are a visibility feature, users
    outside the group will not be able to see the element or its content
    in the form but they will otherwise be able to interact with the
    object (including that field).
    
    Example: [only managers have an immediate filter to see their teams'
    leaves](https://github.com/odoo/odoo/blob/8e19904bcaff8300803a7b596c02ec45fcf36ae6/addons/hr_holidays/report/hr_leave_reports.xml#L16).

  - Groups on menus and actions are visibility features, the menu or
    action will not be shown in the interface but that doesn't prevent
    directly interacting with the underlying object.
    
    Example: [only system administrators can see the elearning settings
    menu](https://github.com/odoo/odoo/blob/ff828a3e0c5386dc54e6a46fd71de9272ef3b691/addons/website_slides/views/website_slides_menu_views.xml#L64-L69).

<div class="exercise">

Real Estate agents can not add property types or tags, and can see their
options from the Property form view when creating it.

The Settings menu just adds noise to their interface, it should only be
visible to managers.

</div>

Despite not having access to the Property Types and Property Tags menus
anymore, agents can still access the underlying objects since they can
still select tags or a type to set on their properties.

1.  An Odoo Application is a group of related modules covering a
    business area or field, usually composed of a base module and a
    number of expansions on that base to add optional or specific
    features, or link to other business areas.

2.  For applications which would be used by most or every employees, the
    "application user" role might be done away with and its abilities
    granted to all employees directly e.g. generally all employees can
    submit expenses or take time off.


---
## File: ./content/developer/tutorials/dashboards.md

# Visualize data in dashboards

<div class="important">

<div class="title">

Important

</div>

This tutorial is an extension of the `getting_started` tutorial. Make
sure you have completed it and use the
<span class="title-ref">estate</span> module you have built as a base
for the exercises in this tutorial.

</div>

The term "Dashboard" is used in Odoo for objects that display data, but
involves different implementations. This tutorial will only focus on the
Enterprise view that is used to provide aggregated data visualization.
They can be added as a `view_mode` to an existing model (i.e. a view you
can switch to via the view buttons in the top right of a view), but they
are also often used as a view for to a special model customized for data
visualization. You may hear these special views referred to as SQL
views.

It is useful to note there is a "Dashboard" app in Odoo Community. This
app allows users to create their own customized view of data, but the
customization is only visible to each user and can only be viewed within
the "Dashboard" app. Technically it is possible to make global
dashboards using this `board` module, but it is much easier to do as an
Enterprise view. Plus it looks nicer and has extra features not
available in `board`. Some other dashboards within Odoo also exist, but
they are custom made and are beyond the scope of this tutorial.

The documentation related to this topic can be found in
`reference/views/dashboard`.

## File Structure

You probably have already guessed that since dashboard views are an
Enterprise view, they must have a dependency on an Enterprise module.
The Enterprise module is `web_dashboard`. Don't forget to add it to your
manifest file\! It is standard to add dashboards intended to be used as
a `view_mode` for one of your module's models (in the `model` folder) to
the views directory (i.e. the same file that contains the other views
for the same model).

It is standard to create a separate Enterprise module to add extra
Enterprise views and features to a Community module. This is done in a
similar manner as the module link technique covered within
`tutorials/getting_started/14_other_module`. The difference is that
instead of linking 2 different modules, we are extending our
<span class="title-ref">estate</span> module. We do this by creating a
new module and adding both the Community module and its necessary
Enterprise module dependencies to its manifest. You will commonly see
"enterprise" in the module's directory name. To keep this tutorial
simple, we will add dashboards to our existing `estate` module.

SQL Views have 2 parts: their xml file (don't forget to add it to your
manifest file) and their Python file (don't forget to add it to the
appropriate `__init.py__` files). The former is the same format as the
`view_mode` xml while the latter contains a custom model and SQL code to
populate its fields. It is standard to add SQL view files to the
`report/` directory. It is also common to include "report" in the name
of the SQL view's files. You may be wondering why do we put the files in
a report directory? We saw earlier that the dashboard is for data
visualization, therefore it is not editable. You can think of dashboards
as interactive reports where you can click on statistics, graphs, and
charts to see the specific data contributing to them. Note it is also
standard to store the xml code for `PDF report templates
<pdf_reports>` in the report directory.

It is expected that your work tree will look something like:

``` bash
estate
├── models
│   ├── *.py
│   └── __init__.py
├── report
│   ├── __init__.py
│   ├── estate_report.py
│   └── estate_report_views.xml
├── security
│   └── ir.model.access.csv
├── views
│   ├── *.xml
│   └── estate_property_views.xml
├── __init__.py
└── __manifest__.py
```

## Dashboard View

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, we will have a new dashboard view
that displays different property statistics.

![Basic Dashboard view](dashboards/simple_dashboard.png)

</div>

Dashboards can display data in different ways, including:

  - showing an `aggregate` of a field
  - using aggregated fields in a `formula`
  - using a `widget`
  - using another `view` as a subview

There are many useful statistics and visuals we can provide for our real
estate example using these options. A full example to reference while
doing the exercises in this section is [viewable
here](https://github.com/odoo/enterprise/blob/6fd3244ae168dc73c348a9c1870796e89d8ef594/crm_enterprise/views/crm_lead_views.xml#L106-L133)
(restricted github repository link).

### Data

To fully enjoy our dashboard view, we will need good test data to
populate it. Test data will allow us to check that the resulting look
and statistics are correct. It is a good idea to test with data that
will cover most or all of your expected use cases, but is also easy to
verify with that your statistics are correct. In our goal's case we are
looking at count, sum, average, minimum, and maximum statistics,
therefore a good representation set for our dashboard is:

  - At least 3 properties with different property types, expected
    prices, and average living area.
  - At least 1 sold property and at least 1 canceled property

If you don't have a set of data like this already, you can either:

  - Complete `define_module_data` (if you haven't done so already) and
    add the extra cases to your demo data (you may need to create a new
    database to load in the demo data).
  - Manually create the data in your database.
  - Copy this [data
    file](https://github.com/odoo/technical-training-solutions/blob/%7BCURRENT_MAJOR_BRANCH%7D-K_dashboard/estate/data/estate_demo.xml)
    into a new directory called `data` in your estate module and copy
    [these
    lines](https://github.com/odoo/technical-training-solutions/blob/%7BCURRENT_MAJOR_BRANCH%7D-K_dashboard/estate/__manifest__.py#L21-L23)
    into your \_\_manifest\_\_.py file (you may need to create a new
    database to load in the demo data).

Click through your database data and make sure it is what you expect. Of
course you can add the data after you write your dashboard code and then
test that your view is working as expected.

### Aggregations

Building a dashboard view is very similar to what you have previously
done in `tutorials/getting_started/07_basicviews`. For the dashboard
view, we use the <span class="title-ref">dashboard</span> root element
and choose from its possible tags (see all the possibilities and their
attributes in the `reference/views/dashboard` documentation). So a
simple dashboard example is:

``` xml
<dashboard>
    <group>
        <aggregate name="min_expected_price" string="Min Expected Price" field="expected_price"
            group_operator="min" help="Lowest expected price."/>
    </group>
</dashboard>
```

In this example, `<group>` adds styling and `<aggregate>` declares an
aggregation. We indicate which `field` we want to aggregate, what
`string` to display with the value, and how to aggregate it with the
<span class="title-ref">group\_operator</span> attribute. The
<span class="title-ref">group\_operator</span> can use any valid
PostgreSQL aggregate function plus the special Odoo defined
`count_distinct`.

Hopefully you remember how to add views to a window action
<span class="title-ref">view\_mode</span> (hint, it was covered in
`tutorials/getting_started/06_firstui`). Now let's make some
dashboards\!

<div class="exercise">

Make a dashboard view.

  - Create a dashboard of aggregated values for the `estate.property`
    model. You can look at the **Goal** of this section for some
    inspiration. Remember to check that your statistics are calculating
    as you expect and note that the calculated values take into
    consideration any applied view filters\!
  - Bonus: Add in some aggregations that need a
    <span class="title-ref">domain</span> to make sense (remember
    domains were also covered in
    `tutorials/getting_started/07_basicviews`).

</div>

### Pie Charts

Adding pie charts to dashboards is a piece of cake using the
<span class="title-ref">\<widget\></span> element. An example is:

``` xml
<dashboard>
    <group>
      <widget name="pie_chart" title="Property Types" attrs="{'groupby': 'property_type_id'}"/>
    </group>
</dashboard>
```

In this example, we indicate that we're using the
<span class="title-ref">pie\_chart</span> widget with the
<span class="title-ref">name</span> attribute and the `title` for the
pie chart, and that we're grouping it by property type.

<div class="exercise">

Add some pie charts.

  - Add the pie charts from the **Goal** of this section to your
    dashboard. Hint: you will need to add
    <span class="title-ref">'measure': selling\_price</span> to your pie
    chart <span class="title-ref">attrs</span> if you want to show
    selling prices grouped by property type.
  - Hover over and click on the pie charts to check your charts counts
    values and don't forget that filters will also apply to the charts.
  - Bonus: Add a domain to your selling price pie chart to only include
    "sold" properties (i.e. not "offer\_accepted" ones). Note that the
    <span class="title-ref">'</span> will need to be escaped since it is
    declared as part of the <span class="title-ref">attrs</span>.

</div>

### Subviews

Similar to how we can use the list view within the form view (we saw
this automatically happen for One2many relationships in
`tutorials/getting_started/08_relations`), we can add other views within
our dashboard view. The most commonly added are the pivot and graph
views, but the cohort view is also an option. A dashboard with only
subviews is:

``` xml
<dashboard>
    <view type="graph"/>
    <view type="pivot"/>
</dashboard>
```

The <span class="title-ref">ref</span> attribute can be added to
<span class="title-ref">\<view\></span> elements to use a specific XML
id for that view. If no XML id is provided for a graph or pivot view,
then the default view will be used. The cohort view will not work in the
dashboard without a specific XML id. If you have already created some of
these views, then you are welcome to add them to your dashboard\! Sample
graph and pivot views are included in the [solution
code](https://github.com/odoo/technical-training-solutions/blob/%7BCURRENT_MAJOR_BRANCH%7D-K_dashboard/estate/views/estate_property_views.xml#L169-L191)
that you are welcome to use as well.

<div class="exercise">

Add subviews.

  - Add in a graph and a pivot view to your dashboard. Try playing
    around with the layout of your subviews in relation to your pie
    charts and aggregated values and refer to the **Goal** of this
    section for an often used layout. Remember to check that your
    subviews are displaying your data as expected (and yes, they are
    also affected by the filters\!).

</div>

## SQL Views

<div class="warning">

<div class="title">

Warning

</div>

This section expects you to have a basic knowledge of SQL. If you have
little to no SQL knowledge then [this is a good tutorial to start
with](https://selectstarsql.com/) and these
[exercises](https://www.pgexercises.com/) are good for those who need a
refresher or extra practice.

</div>

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, we will have a new SQL view that
displays different property statistics.

![SQL view](dashboards/report_dashboard.png)

</div>

Occasionally we want to show data that goes beyond what our model
already has in it. We could add a lot of stored computed or related
fields (non-stored fields cannot be aggregated or displayed in pie
charts), but it would be impractical to store a bunch of fields only for
this purpose. We can instead add a custom SQL view to minimize the
computational load and keep our model clean of unnecessary fields.

### Model

We will start with the more difficult part: our special report model.
This file starts the same as any other model, except that we add 2
attributes `_auto` and `_rec_name`:

    from odoo import fields, models, tools
    
    
    class EstateReport(models.Model):
        _name = 'estate.report'
        _description = "Stock Report"
        _rec_name = 'id'
        _auto = False

`_auto = False` indicates that we do not want to store the model in the
database, and we will create a custom table by overriding the
`BaseModel.init()` method. `_rec_name` indicates which of the model's
fields represents a record's name (i.e. the name that will be used in
the navigation breadcrumb when opening a record's form view). In this
case, I left it as 'id' because our property offers don't have a name.
We will need the <span class="title-ref">tools</span> import later (i.e.
`odoo/odoo/tools`, which is full of all sorts of useful helper methods
you will probably use in the future). Note that it is standard to
include `report` in the model's name.

Remember, your new model will need to be added to your security file, as
you learned in `tutorials/getting_started/05_securityintro`\!

Then we define the fields we need for our dashboard the same way as any
other model (like you learned in
`tutorials/getting_started/04_basicmodel`), except that every field is
`readonly=True`. After all, our model is for read-only purposes only.

Now we override the `BaseModel.init()` method mentioned earlier:

    def init(self):
        tools.drop_view_if_exists(self.env.cr, self._table)
        self.env.cr.execute("""CREATE or REPLACE VIEW %s as (
                               SELECT
                                  %s
                               FROM
                                  %s
              )""" % (self._table, self._select(), self._from()))

We use `tools.drop_view_if_exists` to ensure that we don't create a
conflicting view and then execute the SQL query. It is standard to
separate the different parts of the query to allow for easier model
extension. Exactly how the query is split up across methods is not
standardized, but you will often see at minimum `_select` and `_from`
methods \[or something similar\], and of course all these methods will
return strings. The columns from the SELECT will populate our model's
fields, so ensure that your column names match your field names or use
alias names that match.

<div class="exercise">

Create report model.

  - Create a report model with the following fields:
    
    | Field              | Type      | Note                                              |
    | ------------------ | --------- | ------------------------------------------------- |
    | id                 | Integer   | Corresponds to `id` of `estate.property.offer`    |
    | offer\_state       | Selection | Equals `state` choices of `estate.property.offer` |
    | property\_id       | Many2one  | `estate.property`                                 |
    | property\_state    | Selection | Equals `state` choices of `estate.property`       |
    | property\_type\_id | Many2one  | `estate.property.type`                            |
    

    and write the SQL query necessary to populate the fields (hint, you
    will need 2 JOINs).
    
    You won't be able to check if your model is correct until we create
    a view for it, but you are welcome to check your query directly in
    your database to see if the results are as you expect. If you
    struggle with this exercise, then [here is an
    example](https://github.com/odoo/odoo/blob/7417d8fc138b9de550bc631435bcc08628c29bed/addons/crm/report/crm_activity_report.py)
    to reference.

</div>

### View

Now that we have our model, we can make its dashboard view. There is no
difference in how it's made, except that its file is located in the
`report` folder. Since it is a new model not linked to any other model,
we will also have to add a new menuitem to view our dashboard.
Typically, SQL views are added under a first-level menu called
`Reporting` (because it's a report, surprise\!). Do you remember how to
add a `menuitem`? If not, revisit `tutorials/getting_started/06_firstui`
again.

<div class="exercise">

Create report view.

  - Recreate the dashboard in the **Goal** of this section. Hint: it
    uses the `formula` element, which we did not need for our previous
    dashboard.
  - Bonus: Create `list` and `form` views for your new report model so
    we don't have to see the ugly defaults when you click on your pie
    charts.

</div>

### Extra Tips

**Tip 1** A common mistake in SQL views is not considering the
duplication of certain data due to table JOINs. For example, in our
**Goal**, we have a pie chart of the offers' property types. We may be
tempted to add a similar pie chart with a domain to only include
canceled properties, so we think we are only counting the number of
canceled properties by property type. In reality, we are still looking
at all the offers per property, so any property with more than 1 offer
will be counted per offer. This example is easily double-checked by
clicking on the pie chart to see its list view:

> ![Pie chart list view](dashboards/report_list_detail.png)

But for cases such as average aggregations or using a subview such as
the pivot view, it is easy to miss this mistake. It is also easy to miss
this mistake when you have insufficient test data. To add a number of
properties canceled by property type pie chart to this report, we would
either have to do a hack (too advanced for this tutorial) or simply
exclude it from this report.

**Tip 2** If you have a field that you do not want as a measure (i.e. in
your pivot or graph views), then you can add `store=False` to it, and it
will not show.


---
## File: ./content/developer/tutorials/getting_started/05_securityintro.md

# Chapter 5: Security - A Brief Introduction

In the `previous chapter <tutorials/getting_started/04_basicmodel>`, we
created our first table intended to store business data. In a business
application such as Odoo, one of the first questions to consider is
who\[1\] can access the data. Odoo provides a security mechanism to
allow access to the data for specific groups of users.

The topic of security is covered in more detail in
`../restrict_data_access`. This chapter aims to cover the minimum
required for our new module.

## Data Files (CSV)

Odoo is a highly data driven system. Although behavior is customized
using Python code, part of a module's value is in the data it sets up
when loaded. One way to load data is through a CSV file. One example is
the [list of country
states](https://github.com/odoo/odoo/blob/master/odoo/addons/base/data/res.country.state.csv)
which is loaded at installation of the `base` module.

``` text
"id","country_id:id","name","code"
state_us_1,us,"Alabama","AL"
state_us_2,us,"Alaska","AK"
state_us_3,us,"Arizona","AZ"
state_us_4,us,"Arkansas","AR"
...
```

  - `id` is an `external identifier`. It can be used to refer to the
    record (without knowing its in-database identifier).
  - `country_id:id` refers to the country by using its `external
    identifier`.
  - `name` is the name of the state.
  - `code` is the code of the state.

These three fields are
[defined](https://github.com/odoo/odoo/blob/2ad2f3d6567b6266fc42c6d2999d11f3066b282c/odoo/addons/base/models/res_country.py#L108-L111)
in the `res.country.state` model.

By convention, a file importing data is located in the `data` folder of
a module. When the data is related to security, it is located in the
`security` folder. When the data is related to views and actions (we
will cover this later), it is located in the `views` folder.
Additionally, all of these files must be declared in the `data` list
within the `__manifest__.py` file. Our example file is defined [in the
manifest of the base
module](https://github.com/odoo/odoo/blob/e8697f609372cd61b045c4ee2c7f0fcfb496f58a/odoo/addons/base/__manifest__.py#L29).

Also note that the content of the data files is only loaded when a
module is installed or updated.

<div class="warning">

<div class="title">

Warning

</div>

The data files are sequentially loaded following their order in the
`__manifest__.py` file. This means that if data `A` refers to data `B`,
you must make sure that `B` is loaded before `A`.

In the case of the country states, you will note that the [list of
countries](https://github.com/odoo/odoo/blob/e8697f609372cd61b045c4ee2c7f0fcfb496f58a/odoo/addons/base/__manifest__.py#L22)
is loaded **before** the [list of country
states](https://github.com/odoo/odoo/blob/e8697f609372cd61b045c4ee2c7f0fcfb496f58a/odoo/addons/base/__manifest__.py#L29).
This is because the states refer to the countries.

</div>

Why is all this important for security? Because all the security
configuration of a model is loaded through data files, as we'll see in
the next section.

## Access Rights

**Reference**: the documentation related to this topic can be found in
`reference/security/acl`.

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, the following warning should not
appear anymore:

``` text
WARNING rd-demo odoo.modules.loading: The model estate.property has no access rules...
```

</div>

When no access rights are defined on a model, Odoo determines that no
users can access the data. It is even notified in the log:

``` text
WARNING rd-demo odoo.modules.loading: The model estate.property has no access rules, consider adding one. E.g. access_estate_property,access_estate_property,model_estate_property,base.group_user,1,0,0,0
```

Access rights are defined as records of the model `ir.model.access`.
Each access right is associated with a model, a group (or no group for
global access) and a set of permissions: create, read, write and
unlink\[2\]. Such access rights are usually defined in a CSV file named
`ir.model.access.csv`.

Here is an example for our previous \`test\_model\`:

``` text
id,name,model_id/id,group_id/id,perm_read,perm_write,perm_create,perm_unlink
access_test_model,access_test_model,model_test_model,base.group_user,1,0,0,0
```

  - `id` is an `external identifier`.
  - `name` is the name of the `ir.model.access`.
  - `model_id/id` refers to the model which the access right applies to.
    The standard way to refer to the model is `model_<model_name>`,
    where `<model_name>` is the `_name` of the model with the `.`
    replaced by `_`. Seems cumbersome? Indeed it is...
  - `group_id/id` refers to the group which the access right applies to.
  - `perm_read,perm_write,perm_create,perm_unlink`: read, write, create
    and unlink permissions

<div class="exercise">

Add access rights.

Create the `ir.model.access.csv` file in the appropriate folder and
define it in the `__manifest__.py` file.

Give the read, write, create and unlink permissions to the group
`base.group_user`.

Tip: the warning message in the log gives you most of the solution ;-)

</div>

Restart the server and the warning message should have disappeared\!

It's now time to finally `interact with the UI
<tutorials/getting_started/06_firstui>`\!

1.  meaning which Odoo user (or group of users)

2.  'unlink' is the equivalent of 'delete'


---
## File: ./content/developer/tutorials/getting_started/10_actions.md

# Chapter 10: Ready For Some Action?

So far we have mostly built our module by declaring fields and views. We
just introduced business logic in the `previous chapter
<tutorials/getting_started/09_compute_onchange>` thanks to computed
fields and onchanges. In any real business scenario, we would want to
link some business logic to action buttons. In our real estate example,
we would like to be able to:

  - cancel or set a property as sold
  - accept or refuse an offer

One could argue that we can already do these things by changing the
state manually, but this is not really convenient. Moreover, we want to
add some extra processing: when an offer is accepted we want to set the
selling price and the buyer for the property.

## Action Type

**Reference**: the documentation related to this topic can be found in
`reference/actions` and `reference/exceptions`.

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section:

  - You should be able to cancel or set a property as sold:

![Cancel and set to sold](10_actions/property.gif)

A canceled property cannot be sold and a sold property cannot be
canceled. For the sake of clarity, the `state` field has been added on
the view.

  - You should be able to accept or refuse an offer:

![Accept or refuse an offer](10_actions/offer_01.gif)

  - Once an offer is accepted, the selling price and the buyer should be
    set:

![Accept an offer](10_actions/offer_02.gif)

</div>

In our real estate module, we want to link business logic with some
buttons. The most common way to do this is to:

  - Add a button in the view, for example in the `header` of the view:

<!-- end list -->

``` xml
<form>
    <header>
        <button name="action_do_something" type="object" string="Do Something"/>
    </header>
    <sheet>
        <field name="name"/>
    </sheet>
</form>
```

  - and link this button to business logic:

<!-- end list -->

``` python
from odoo import fields, models

class TestAction(models.Model):
    _name = "test.action"

    name = fields.Char()

    def action_do_something(self):
        for record in self:
            record.name = "Something"
        return True
```

By assigning `type="object"` to our button, the Odoo framework will
execute a Python method with `name="action_do_something"` on the given
model.

The first important detail to note is that our method name isn't
prefixed with an underscore (`_`). This makes our method a **public**
method, which can be called directly from the Odoo interface (through an
RPC call). Until now, all methods we created (compute, onchange) were
called internally, so we used **private** methods prefixed by an
underscore. You should always define your methods as private unless they
need to be called from the user interface.

Also note that we loop on `self`. Always assume that a method can be
called on multiple records; it's better for reusability.

Finally, a public method should always return something so that it can
be called through XML-RPC. When in doubt, just `return True`.

There are hundreds of examples in the Odoo source code. One example is
this [button in a
view](https://github.com/odoo/odoo/blob/cd9af815ba591935cda367d33a1d090f248dd18d/addons/crm/views/crm_lead_views.xml#L9-L11)
and its [corresponding Python
method](https://github.com/odoo/odoo/blob/cd9af815ba591935cda367d33a1d090f248dd18d/addons/crm/models/crm_lead.py#L746-L760)

<div class="exercise">

Cancel and set a property as sold.

  - Add the buttons 'Cancel' and 'Sold' to the `estate.property` model.
    A canceled property cannot be set as sold, and a sold property
    cannot be canceled.
    
    Refer to the first image of the **Goal** for the expected result.
    
    Tip: in order to raise an error, you can use the
    `UserError<reference/exceptions>` function. There are plenty of
    examples in the Odoo source code ;-)

  - Add the buttons 'Accept' and 'Refuse' to the `estate.property.offer`
    model.
    
    Refer to the second image of the **Goal** for the expected result.
    
    Tip: to use an icon as a button, have a look [at this
    example](https://github.com/odoo/odoo/blob/cd9af815ba591935cda367d33a1d090f248dd18d/addons/event/views/event_views.xml#L521).

  - When an offer is accepted, set the buyer and the selling price for
    the corresponding property.
    
    Refer to the third image of the **Goal** for the expected result.
    
    Pay attention: in real life only one offer can be accepted for a
    given property\!

</div>

## Object Type

In `tutorials/getting_started/06_firstui`, we created an action that was
linked to a menu. You may be wondering if it is possible to link an
action to a button. Good news, it is\! One way to do it is:

``` xml
<button type="action" name="%(test.test_model_action)d" string="My Action"/>
```

We use `type="action"` and we refer to the `external identifier` in the
`name`.

In the `next chapter <tutorials/getting_started/11_constraints>` we'll
see how we can prevent encoding incorrect data in Odoo.


---
## File: ./content/developer/tutorials/getting_started/03_newapp.md

# Chapter 3: A New Application

The purpose of this chapter is to lay the foundation for the creation of
a completely new Odoo module. We will start from scratch with the
minimum needed to have our module recognized by Odoo. In the upcoming
chapters, we will progressively add features to build a realistic
business case.

## The Real Estate Advertisement module

Our new module will cover a business area which is very specific and
therefore not included in the standard set of modules: real estate. It
is worth noting that before developing a new module, it is good practice
to verify that Odoo doesn't already provide a way to answer the specific
business case.

Here is an overview of the main list view containing some
advertisements:

![List view 01](03_newapp/overview_list_view_01.png)

The top area of the form view summarizes important information for the
property, such as the name, the property type, the postcode and so on.
The first tab contains information describing the property: bedrooms,
living area, garage, garden...

![Form view 01](03_newapp/overview_form_view_01.png)

The second tab lists the offers for the property. We can see here that
potential buyers can make offers above or below the expected selling
price. It is up to the seller to accept an offer.

![Form view 02](03_newapp/overview_form_view_02.png)

Here is a quick video showing the workflow of the module.

Hopefully, this video will be recorded soon :-)

## Prepare the addon directory

**Reference**: the documentation related to this topic can be found in
`manifest <reference/module/manifest>`.

<div class="note">

<div class="title">

Note

</div>

**Goal**: the goal of this section is to have Odoo recognize our new
module, which will be an empty shell for now. It will be listed in the
Apps:

![The new module appears in the list](03_newapp/app_in_list.png)

</div>

The first step of module creation is to create its directory. In the
<span class="title-ref">technical-training-sandbox</span> directory, add
a new directory `estate`.

A module must contain at least 2 files: the `__manifest__.py` file and a
`__init__.py` file. The `__init__.py` file can remain empty for now and
we'll come back to it in the next chapter. On the other hand, the
`__manifest__.py` file must describe our module and cannot remain empty.
Its only required field is the `name`, but it usually contains much more
information.

Take a look at the [CRM
file](https://github.com/odoo/odoo/blob/fc92728fb2aa306bf0e01a7f9ae1cfa3c1df0e10/addons/crm/__manifest__.py#L1-L67)
as an example. In addition to providing the description of the module
(`name`, `category`, `summary`, `website`...), it lists its dependencies
(`depends`). A dependency means that the Odoo framework will ensure that
these modules are installed before our module is installed. Moreover, if
one of these dependencies is uninstalled, then our module and **any
other that depends on it will also be uninstalled**. Think about your
favorite Linux distribution package manager (`apt`, `dnf`, `pacman`...):
Odoo works in the same way.

<div class="exercise">

Create the required addon files.

Create the following folders and files:

  - `/home/$USER/src/technical-training-sandbox/estate/__init__.py`
  - `/home/$USER/src/technical-training-sandbox/estate/__manifest__.py`

The `__manifest__.py` file should only define the name and the
dependencies of our modules. The only necessary framework module for now
is `base`.

</div>

Restart the Odoo server and go to Apps. Click on Update Apps List,
search for `estate` and... tadaaa, your module appears\! Did it not
appear? Maybe try removing the default 'Apps' filter ;-)

<div class="warning">

<div class="title">

Warning

</div>

Remember to enable the `developer mode <developer-mode>` as explained in
the previous chapter. You won't see the `Update Apps List` button
otherwise.

</div>

<div class="exercise">

Make your module an 'App'.

Add the appropriate key to your `__manifest__.py` so that the module
appears when the 'Apps' filter is on.

</div>

You can even install the module\! But obviously it's an empty shell, so
no menu will appear.

All good? If yes, then let's `create our first model
<tutorials/getting_started/04_basicmodel>`\!


---
## File: ./content/developer/tutorials/getting_started/01_architecture.md

# Chapter 1: Architecture Overview

## Multitier application

Odoo follows a [multitier
architecture](https://en.wikipedia.org/wiki/Multitier_architecture),
meaning that the presentation, the business logic and the data storage
are separated. More specifically, it uses a three-tier architecture
(image from Wikipedia):

![Three-tier architecture](01_architecture/three_tier.svg)

The presentation tier is a combination of HTML5, JavaScript and CSS. The
logic tier is exclusively written in Python, while the data tier only
supports PostgreSQL as an RDBMS.

Depending on the scope of your module, Odoo development can be done in
any of these tiers. Therefore, before going any further, it may be a
good idea to refresh your memory if you don't have an intermediate level
in these topics.

In order to go through this tutorial, you will need a very basic
knowledge of HTML and an intermediate level of Python. Advanced topics
will require more knowledge in the other subjects. There are plenty of
tutorials freely accessible, so we cannot recommend one over another
since it depends on your background.

For reference this is the official [Python
tutorial](https://docs.python.org/3.6/tutorial/).

## Odoo modules

Both server and client extensions are packaged as *modules* which are
optionally loaded in a *database*. A module is a collection of functions
and data that target a single purpose.

Odoo modules can either add brand new business logic to an Odoo system
or alter and extend existing business logic. One module can be created
to add your country's accounting rules to Odoo's generic accounting
support, while a different module can add support for real-time
visualisation of a bus fleet.

Everything in Odoo starts and ends with modules.

Terminology: developers group their business features in Odoo *modules*.
The main user-facing modules are flagged and exposed as *Apps*, but a
majority of the modules aren't Apps. *Modules* may also be referred to
as *addons* and the directories where the Odoo server finds them form
the `addons_path`.

### Composition of a module

An Odoo module **can** contain a number of elements:

  - `Business objects <reference/orm>`  
    A business object (e.g. an invoice) is declared as a Python class.
    The fields defined in these classes are automatically mapped to
    database columns thanks to the `ORM (Object-Relational Mapping)`
    layer.

  - `Object views <reference/views>`  
    Define UI display

  - `Data files <reference/data>`  
    XML or CSV files declaring the model data:
    
      - `views <reference/views>` or `reports <reference/reports>`,
      - configuration data (modules parametrization, `security rules
        <reference/security>`),
      - demonstration data
      - and more

  - `Web controllers <reference/controllers>`  
    Handle requests from web browsers

  - Static web data  
    Images, CSS or JavaScript files used by the web interface or website

None of these elements are mandatory. Some modules may only add data
files (e.g. country-specific accounting configuration), while others may
only add business objects. During this training, we will create business
objects, object views and data files.

### Module structure

Each module is a directory within a *module directory*. Module
directories are specified by using the `--addons-path <odoo-bin
--addons-path>` option.

An Odoo module is declared by its `manifest
<reference/module/manifest>`.

When an Odoo module includes business objects (i.e. Python files), they
are organized as a [Python
package](https://docs.python.org/3/tutorial/modules.html#packages) with
a `__init__.py` file. This file contains import instructions for various
Python files in the module.

Here is a simplified module directory:

``` bash
module
├── models
│   ├── *.py
│   └── __init__.py
├── data
│   └── *.xml
├── __init__.py
└── __manifest__.py
```

## Odoo Editions

Odoo is available in [two versions](https://www.odoo.com/page/editions):
Odoo Enterprise (licensed & shared sources) and Odoo Community
(open-source). In addition to services such as support or upgrades, the
Enterprise version provides extra functionalities to Odoo. From a
technical point-of-view, these functionalities are simply new modules
installed on top of the modules provided by the Community version.

Ready to start? Before writing actual code, let's go to the `next
chapter <02_setup>` to review the Odoo installation process. Even if
Odoo is already running on your system, we strongly suggest you go
through this chapter to make sure we start on the same page during the
development of our new application.


---
## File: ./content/developer/tutorials/getting_started/13_inheritance.md

# Chapter 13: Inheritance

A powerful aspect of Odoo is its modularity. A module is dedicated to a
business need, but modules can also interact with one another. This is
useful for extending the functionality of an existing module. For
example, in our real estate scenario we want to display the list of a
salesperson's properties directly in the regular user view.

But before going through the specific Odoo module inheritance, let's see
how we can alter the behavior of the standard CRUD (Create, Retrieve,
Update or Delete) methods.

## Python Inheritance

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section:

  - It should not be possible to delete a property which is not new or
    canceled.

![Unlink](13_inheritance/unlink.gif)

  - When an offer is created, the property state should change to 'Offer
    Received'
  - It should not be possible to create an offer with a lower price than
    an existing offer

![Create](13_inheritance/create.gif)

</div>

In our real estate module, we never had to develop anything specific to
be able to do the standard CRUD actions. The Odoo framework provides the
necessary tools to do them. In fact, such actions are already included
in our model thanks to classical Python inheritance:

    from odoo import fields, models
    
    class TestModel(models.Model):
        _name = "test_model"
        _description = "Test Model"
    
        ...

Our `class TestModel` inherits from `~odoo.models.Model` which provides
`~odoo.models.Model.create`, `~odoo.models.Model.read`,
`~odoo.models.Model.write` and `~odoo.models.Model.unlink`.

These methods (and any other method defined on `~odoo.models.Model`) can
be extended to add specific business logic:

    from odoo import fields, models
    
    class TestModel(models.Model):
        _name = "test_model"
        _description = "Test Model"
    
        ...
    
        @api.model
        def create(self, vals):
            # Do some business logic, modify vals...
            ...
            # Then call super to execute the parent method
            return super().create(vals)

The decorator `~odoo.api.model` is necessary for the
`~odoo.models.Model.create` method because the content of the recordset
`self` is not relevant in the context of creation, but it is not
necessary for the other CRUD methods.

In Python 3, `super()` is equivalent to `super(TestModel, self)`. The
latter may be necessary when you need to call the parent method with a
modified recordset.

<div class="danger">

<div class="title">

Danger

</div>

  - It is very important to **always** call `super()` to avoid breaking
    the flow. There are only a few very specific cases where you don't
    want to call it.
  - Make sure to **always** return data consistent with the parent
    method. For example, if the parent method returns a `dict()`, your
    override must also return a `dict()`.

</div>

<div class="exercise">

Add business logic to the CRUD methods.

  - Prevent deletion of a property if its state is not 'New' or
    'Canceled'

Tip: override `~odoo.models.Model.unlink` and remember that `self` can
be a recordset with more than one record.

  - At offer creation, set the property state to 'Offer Received'. Also
    raise an error if the user tries to create an offer with a lower
    amount than an existing offer.

Tip: the `property_id` field is available in the `vals`, but it is an
`int`. To instantiate an `estate.property` object, use
`self.env[model_name].browse(value)`
([example](https://github.com/odoo/odoo/blob/136e4f66cd5cafe7df450514937c7218c7216c93/addons/gamification/models/badge.py#L57))

</div>

## Model Inheritance

**Reference**: the documentation related to this topic can be found in
`reference/orm/inheritance`.

In our real estate module, we would like to display the list of
properties linked to a salesperson directly in the Settings / Users &
Companies / Users form view. To do this, we need to add a field to the
`res.users` model and adapt its view to show it.

Odoo provides two *inheritance* mechanisms to extend an existing model
in a modular way.

The first inheritance mechanism allows modules to modify the behavior of
a model defined in an another module by:

  - adding fields to the model,
  - overriding the definition of fields in the model,
  - adding constraints to the model,
  - adding methods to the model,
  - overriding existing methods in the model.

The second inheritance mechanism (delegation) allows every record of a
model to be linked to a parent model's record and provides transparent
access to the fields of this parent record.

![Inheritance Methods](13_inheritance/inheritance_methods.png)

In Odoo, the first mechanism is by far the most used. In our case, we
want to add a field to an existing model, which means we will use the
first mechanism. For example:

    from odoo import fields, models
    
    class InheritedModel(models.Model):
        _inherit = "inherited.model"
    
        new_field = fields.Char(string="New Field")

A practical example where two fields are added to a model can be found
[here](https://github.com/odoo/odoo/blob/60e9410e9aa3be4a9db50f6f7534ba31fea3bc29/addons/account_fleet/models/account_move.py#L39-L47).

By convention, each inherited model is defined in its own Python file.
In our example, it would be `models/inherited_model.py`.

<div class="exercise">

Add a field to Users.

  - Add the following field to `res.users`:

| Field         | Type                                                                               |
| ------------- | ---------------------------------------------------------------------------------- |
| property\_ids | One2many inverse of the field that references the salesperson in `estate.property` |

  - Add a domain to the field so it only lists the available properties.

</div>

In the next section let's add the field to the view and check that
everything is working well\!

## View Inheritance

**Reference**: the documentation related to this topic can be found in
`reference/views/inheritance`.

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, the list of available properties
linked to a salesperson should be displayed in their user form view

![Users](13_inheritance/users.png)

</div>

Instead of modifying existing views in place (by overwriting them), Odoo
provides view inheritance where children 'extension' views are applied
on top of root views. These extension can both add and remove content
from their parent view.

An extension view references its parent using the `inherit_id` field.
Instead of a single view, its `arch` field contains a number of `xpath`
elements that select and alter the content of their parent view:

``` xml
<record id="inherited_model_view_form" model="ir.ui.view">
    <field name="name">inherited.model.form.inherit.test</field>
    <field name="model">inherited.model</field>
    <field name="inherit_id" ref="inherited.inherited_model_view_form"/>
    <field name="arch" type="xml">
        <!-- find field description and add the field
             new_field after it -->
        <xpath expr="//field[@name='description']" position="after">
          <field name="new_field"/>
        </xpath>
    </field>
</record>
```

  - `expr`  
    An [XPath](https://w3.org/TR/xpath) expression selecting a single
    element in the parent view. Raises an error if it matches no element
    or more than one

  - `position`  
    Operation to apply to the matched element:
    
      - `inside`  
        appends `xpath`'s body to the end of the matched element
    
      - `replace`  
        replaces the matched element with the `xpath`'s body, replacing
        any `$0` node occurrence in the new body with the original
        element
    
      - `before`  
        inserts the `xpath`'s body as a sibling before the matched
        element
    
      - `after`  
        inserts the `xpaths`'s body as a sibling after the matched
        element
    
      - `attributes`  
        alters the attributes of the matched element using the special
        `attribute` elements in the `xpath`'s body

When matching a single element, the `position` attribute can be set
directly on the element to be found. Both inheritances below have the
same result.

``` xml
<xpath expr="//field[@name='description']" position="after">
    <field name="idea_ids" />
</xpath>

<field name="description" position="after">
    <field name="idea_ids" />
</field>
```

An example of a view inheritance extension can be found
[here](https://github.com/odoo/odoo/blob/691d1f087040f1ec7066e485d19ce3662dfc6501/addons/account_fleet/views/account_move_views.xml#L3-L17).

<div class="exercise">

Add fields to the Users view.

Add the `property_ids` field to the `base.view_users_form` in a new
notebook page.

Tip: an example an inheritance of the users' view can be found
[here](https://github.com/odoo/odoo/blob/691d1f087040f1ec7066e485d19ce3662dfc6501/addons/gamification/views/res_users_views.xml#L5-L14).

</div>

Inheritance is extensively used in Odoo due to its modular concept. Do
not hesitate to read the corresponding documentation for more info\!

In the `next chapter <tutorials/getting_started/14_other_module>`, we
will learn how to interact with other modules.


---
## File: ./content/developer/tutorials/getting_started/02_setup.md

# Chapter 2: Development environment setup

Depending on the intended use case, there are multiple ways to install
Odoo. For developers of the Odoo community and Odoo employees alike, the
preferred way is to perform a source install (`running Odoo from the
source code`).

## Prepare the environment

First, follow the `contributing/development/setup` section of the
contributing guide to prepare your environment.

<div class="important">

<div class="title">

Important

</div>

The following steps are intended only for Odoo employees. The mentioned
repositories are not accessible to third parties.

</div>

By now, you should have downloaded the source code into two local
repositories, one for <span class="title-ref">odoo/odoo</span> and one
for <span class="title-ref">odoo/enterprise</span>. These repositories
are set up to push changes to pre-defined shared forks on GitHub. This
will prove to be convenient when you start contributing to the codebase,
but for the scope of this tutorial, we want to avoid polluting the
shared repositories with training material. Let's then develop your own
module in a third repository
<span class="title-ref">technical-training-sandbox</span>. Like the
first two repositories, it will be part of the
<span class="title-ref">addons-path</span> that references all
directories containing Odoo modules.

1.  Following the same process as with the
    <span class="title-ref">odoo/odoo</span> and
    <span class="title-ref">odoo/enterprise</span> repositories, visit
    [github.com/odoo/technical-training-sandbox](https://github.com/odoo/technical-training-sandbox)
    and click the `Fork` button to create a fork of the repository under
    your account.

2.  Clone the repository on your machine with:
    
    ``` console
    $ git clone git@github.com:odoo/technical-training-sandbox.git
    ```

3.  Configure the repository to push changes to your fork:
    
    ``` console
    $ cd technical-training-sandbox/
    $ git remote add dev git@github.com:<your_github_account>/technical-training-sandbox.git
    $ git remote set-url --push origin you_should_not_push_on_this_repository
    ```

That's it\! Your environment is now prepared to run Odoo from the
sources, and you have successfully created a repository to serve as an
addons directory. This will allow you to push your work to GitHub.

Now, make a small change in the
<span class="title-ref">technical-training-sandbox</span> repository,
such as updating the `README.md` file. Then, follow the
`contributing/development/first-contribution` section of the
contributing guide to push your changes to GitHub and create a `PR (Pull
Request)`. This will enable you to share your upcoming work and receive
feedback. Adjust the instructions to use the branch
<span class="title-ref">master</span> and the repository
<span class="title-ref">technical-training-sandbox</span>.

To ensure a continuous feedback loop, we recommend pushing a new commit
as soon as you reach a new milestone, such as completing a chapter of
the tutorial.

<div class="note">

<div class="title">

Note

</div>

The specific location of the repositories on your file system is not
crucial. However, for the sake of simplicity, we will assume that you
have cloned all the repositories under the same directory. If this is
not the case, make sure to adjust the following commands accordingly,
providing the appropriate relative path from the
<span class="title-ref">odoo/odoo</span> repository to the
<span class="title-ref">odoo/technical-training-sandbox</span>
repository.

</div>

## Run the server

### Launch with <span class="title-ref">odoo-bin</span>

Once all dependencies are set up, Odoo can be launched by running
<span class="title-ref">odoo-bin</span>, the command-line interface of
the server.

``` console
$ cd $HOME/src/odoo/
$ ./odoo-bin --addons-path="addons/,../enterprise/,../technical-training-sandbox" -d rd-demo
```

There are multiple `command-line arguments <reference/cmdline/server>`
that you can use to run the server. In this training you will only need
some of them.

<div class="option">

\-d \<database\>

The database that is going to be used.

</div>

<div class="option">

\--addons-path \<directories\>

A comma-separated list of directories in which modules are stored. These
directories are scanned for modules.

</div>

<div class="option">

\--limit-time-cpu \<limit\>

Prevent the worker from using more than \<limit\> CPU seconds for each
request.

</div>

<div class="option">

\--limit-time-real \<limit\>

Prevent the worker from taking longer than \<limit\> seconds to process
a request.

</div>

<div class="tip">

<div class="title">

Tip

</div>

\- The `--limit-time-cpu` and `--limit-time-real` arguments can be used
to prevent the worker from being killed when debugging the source code.
- | You may face an error similar to
<span class="title-ref">AttributeError: module '\<MODULE\_NAME\>' has no
attribute '\<$ATTRIBUTE'\></span>. In this case, you may need to
re-install the module with `$ pip
install --upgrade --force-reinstall <MODULE_NAME>`. | If this error
occurs with more than one module, you may need to re-install all the
requirements with `$ pip install --upgrade --force-reinstall -r
requirements.txt`. | You can also clear the python cache to solve the
issue:

``` console
$ cd $HOME/.local/lib/python3.8/site-packages/
$ find -name '*.pyc' -type f -delete
```

  - Other commonly used arguments are:

\- `-i <odoo-bin --init>`: Install some modules before running the
server (comma-separated list). - `-u <odoo-bin --update>`: Update some
modules before running the server (comma-separated list).

</div>

### Log in to Odoo

Open <http://localhost:8069/> on your browser. We recommend using
[Chrome](https://www.google.com/intl/en/chrome/),
[Firefox](https://www.mozilla.org/firefox/new/), or any other browser
with development tools.

To log in as the administrator user, use the following credentials:

  - email: <span class="title-ref">admin</span>
  - password: <span class="title-ref">admin</span>

## Enable the developer mode

The developer or debug mode is useful for training as it gives access to
additional (advanced) tools. In the next chapters, **we will always
assume that you have enabled the developer mode**.

`Enable the developer mode <developer-mode>` now. Choose the method that
you prefer; they are all equivalent.

<div class="note">

<div class="title">

Note

</div>

The main page of the Settings screen is only accessible if at least one
application is installed. You will be led into installing your own
application in the next chapter.

</div>

## Extra tools

### Useful Git commands

Here are some useful Git commands for your day-to-day work.

  - Switch branches:  
    When you switch branches, both repositories (odoo and enterprise)
    must be synchronized, i.e. both need to be in the same branch.
    
    ``` console
    $ cd $HOME/src/odoo
    $ git switch {CURRENT_MAJOR_BRANCH}
    
    $ cd $HOME/src/enterprise
    $ git switch {CURRENT_MAJOR_BRANCH}
    ```

  - Fetch and rebase:
    
    ``` console
    $ cd $HOME/src/odoo
    $ git fetch --all --prune
    $ git rebase --autostash odoo/{CURRENT_MAJOR_BRANCH}
    
    $ cd $HOME/src/enterprise
    $ git fetch --all --prune
    $ git rebase --autostash enterprise/{CURRENT_MAJOR_BRANCH}
    ```

### Code Editor

If you are working at Odoo, many of your colleagues are using
[VSCode](https://code.visualstudio.com),
[VSCodium](https://vscodium.com) (the open source equivalent),
[PyCharm](https://www.jetbrains.com/pycharm/download/#section=linux), or
[Sublime Text](https://www.sublimetext.com). However, you are free to
choose your preferred editor.

It is important to configure your linters correctly. Using a linter
helps you by showing syntax and semantic warnings or errors. Odoo source
code tries to respect Python's and JavaScript's standards, but some of
them can be ignored.

For Python, we use PEP8 with these options ignored:

  - \`E501\`: line too long
  - \`E301\`: expected 1 blank line, found 0
  - \`E302\`: expected 2 blank lines, found 1

For JavaScript, we use ESLint and you can find a [configuration file
example
here](https://github.com/odoo/odoo/wiki/Javascript-coding-guidelines#use-a-linter).

### Administrator tools for PostgreSQL

You can manage your PostgreSQL databases using the command line as
demonstrated earlier or using a GUI application such as
[pgAdmin](https://www.pgadmin.org/download/pgadmin-4-apt/) or
[DBeaver](https://dbeaver.io/).

To connect the GUI application to your database we recommend you connect
using the Unix socket.

  - Host name/address:
    <span class="title-ref">/var/run/postgresql</span>
  - Port: <span class="title-ref">5432</span>
  - Username: <span class="title-ref">$USER</span>

### Python Debugging

When facing a bug or trying to understand how the code works, simply
printing things out can go a long way, but a proper debugger can save a
lot of time.

You can use a classic Python library debugger
([pdb](https://docs.python.org/3/library/pdb.html),
[pudb](https://pypi.org/project/pudb/) or
[ipdb](https://pypi.org/project/ipdb/)), or you can use your editor's
debugger.

In the following example we use ipdb, but the process is similar with
other libraries.

1.  Install the library:
    
    ``` console
    pip install ipdb
    ```

2.  Place a trigger (breakpoint):
    
    ``` python
    import ipdb; ipdb.set_trace()
    ```
    
    <div class="example">
    
    ``` python
    def copy(self, default=None):
        import ipdb; ipdb.set_trace()
        self.ensure_one()
        chosen_name = default.get('name') if default else ''
        new_name = chosen_name or _('%s (copy)') % self.name
        default = dict(default or {}, name=new_name)
        return super(Partner, self).copy(default)
    ```
    
    </div>

Here is a list of commands:

<div class="option">

h(elp) \[command\]

Print the list of available commands if not argument is supplied. With a
command as an argument, print the help about that command.

</div>

<div class="option">

pp expression

The value of the <span class="title-ref">expression</span> is
pretty-printed using the <span class="title-ref">pprint</span> module.

</div>

<div class="option">

w(here)

Print a stack trace with the most recent frame at the bottom.

</div>

<div class="option">

d(own)

Move the current frame one level down in the stack trace (to a newer
frame).

</div>

<div class="option">

u(p)

Move the current frame one level up in the stack trace (to an older
frame).

</div>

<div class="option">

n(ext)

Continue the execution until the next line in the current function is
reached or it returns.

</div>

<div class="option">

c(ontinue)

Continue the execution and only stop when a breakpoint is encountered.

</div>

<div class="option">

s(tep)

Execute the current line. Stop at the first possible occasion (either in
a function that is called or on the next line in the current function).

</div>

<div class="option">

q(uit)

Quit the debugger. The program being executed is aborted.

</div>

Now that your server is running, it's time to start `writing your own
application
<tutorials/getting_started/03_newapp>`\!


---
## File: ./content/developer/tutorials/getting_started/11_constraints.md

# Chapter 11: Constraints

The `previous chapter <tutorials/getting_started/10_actions>` introduced
the ability to add some business logic to our model. We can now link
buttons to business code, but how can we prevent users from entering
incorrect data? For example, in our real estate module nothing prevents
users from setting a negative expected price.

Odoo provides two ways to set up automatically verified invariants:
`Python constraints <odoo.api.constrains>` and `SQL constraints
<odoo.models.Model._sql_constraints>`.

## SQL

**Reference**: the documentation related to this topic can be found in
`reference/orm/models` and in the [PostgreSQL's
documentation](https://www.postgresql.org/docs/current/ddl-constraints.html).

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section:

  - Amounts should be (strictly) positive

![Constraints on amounts](11_constraints/sql_01.gif)

  - Property types and tags should have a unique name

![Constraints on names](11_constraints/sql_02.gif)

</div>

SQL constraints are defined through the model attribute
`~odoo.models.Model._sql_constraints`. This attribute is assigned a list
of triples containing strings `(name, sql_definition, message)`, where
`name` is a valid SQL constraint name, `sql_definition` is a
[table\_constraint](https://www.postgresql.org/docs/current/ddl-constraints.html)
expression and `message` is the error message.

You can find a simple example
[here](https://github.com/odoo/odoo/blob/24b0b6f07f65b6151d1d06150e376320a44fd20a/addons/analytic/models/analytic_account.py#L20-L23).

<div class="exercise">

Add SQL constraints.

Add the following constraints to their corresponding models:

  - A property expected price must be strictly positive
  - A property selling price must be positive
  - An offer price must be strictly positive
  - A property tag name and property type name must be unique

Tip: search for the `unique` keyword in the Odoo codebase for examples
of unique names.

</div>

Restart the server with the `-u estate` option to see the result. Note
that you might have data that prevents a SQL constraint from being set.
An error message similar to the following might pop up:

``` text
ERROR rd-demo odoo.schema: Table 'estate_property_offer': unable to add constraint 'estate_property_offer_check_price' as CHECK(price > 0)
```

For example, if some offers have a price of zero, then the constraint
can't be applied. You can delete the problematic data in order to apply
the new constraints.

## Python

**Reference**: the documentation related to this topic can be found in
`~odoo.api.constrains`.

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, it will not possible to accept an
offer lower than 90% of the expected price.

![Python constraint](11_constraints/python.gif)

</div>

SQL constraints are an efficient way of ensuring data consistency.
However it may be necessary to make more complex checks which require
Python code. In this case we need a Python constraint.

A Python constraint is defined as a method decorated with
`~odoo.api.constrains` and is invoked on a recordset. The decorator
specifies which fields are involved in the constraint. The constraint is
automatically evaluated when any of these fields are modified . The
method is expected to raise an exception if its invariant is not
satisfied:

    from odoo.exceptions import ValidationError
    
    ...
    
    @api.constrains('date_end')
    def _check_date_end(self):
        for record in self:
            if record.date_end < fields.Date.today():
                raise ValidationError("The end date cannot be set in the past")
        # all records passed the test, don't return anything

A simple example can be found
[here](https://github.com/odoo/odoo/blob/274dd3bf503e1b612179db92e410b336bfaecfb4/addons/stock/models/stock_quant.py#L239-L244).

<div class="exercise">

Add Python constraints.

Add a constraint so that the selling price cannot be lower than 90% of
the expected price.

Tip: the selling price is zero until an offer is validated. You will
need to fine tune your check to take this into account.

<div class="warning">

<div class="title">

Warning

</div>

Always use the `~odoo.tools.float_utils.float_compare` and
`~odoo.tools.float_utils.float_is_zero` methods from
<span class="title-ref">odoo.tools.float\_utils</span> when working with
floats\!

</div>

Ensure the constraint is triggered every time the selling price or the
expected price is changed\!

</div>

SQL constraints are usually more efficient than Python constraints. When
performance matters, always prefer SQL over Python constraints.

Our real estate module is starting to look good. We added some business
logic, and now we make sure the data is consistent. However, the user
interface is still a bit rough. Let's see how we can improve it in the
`next chapter <tutorials/getting_started/12_sprinkles>`.


---
## File: ./content/developer/tutorials/getting_started/12_sprinkles.md

# Chapter 12: Add The Sprinkles

Our real estate module now makes sense from a business perspective. We
created `specific views <tutorials/getting_started/07_basicviews>`,
added several `action buttons <tutorials/getting_started/10_actions>`
and `constraints <tutorials/getting_started/11_constraints>`. However
our user interface is still a bit rough. We would like to add some
colors to the list views and make some fields and buttons conditionally
disappear. For example, the 'Sold' and 'Cancel' buttons should disappear
when the property is sold or canceled since it is no longer allowed to
change the state at this point.

This chapter covers a very small subset of what can be done in the
views. Do not hesitate to read the reference documentation for a more
complete overview.

**Reference**: the documentation related to this chapter can be found in
`reference/views`.

## Inline Views

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, a specific list of properties
should be added to the property type view:

![Inline list view](12_sprinkles/inline_view.png)

</div>

In the real estate module we added a list of offers for a property. We
simply added the field `offer_ids` with:

``` xml
<field name="offer_ids"/>
```

The field uses the specific view for `estate.property.offer`. In some
cases we want to define a specific list view which is only used in the
context of a form view. For example, we would like to display the list
of properties linked to a property type. However, we only want to
display 3 fields for clarity: name, expected price and state.

To do this, we can define *inline* list views. An inline list view is
defined directly inside a form view. For example:

``` python
from odoo import fields, models

class TestModel(models.Model):
    _name = "test_model"
    _description = "Test Model"

    description = fields.Char()
    line_ids = fields.One2many("test_model_line", "model_id")


class TestModelLine(models.Model):
    _name = "test_model_line"
    _description = "Test Model Line"

    model_id = fields.Many2one("test_model")
    field_1 = fields.Char()
    field_2 = fields.Char()
    field_3 = fields.Char()
```

``` xml
<form>
    <field name="description"/>
    <field name="line_ids">
        <tree>
            <field name="field_1"/>
            <field name="field_2"/>
        </tree>
    </field>
</form>
```

In the form view of the <span class="title-ref">test\_model</span>, we
define a specific list view for
<span class="title-ref">test\_model\_line</span> with fields `field_1`
and `field_2`.

An example can be found
[here](https://github.com/odoo/odoo/blob/0e12fa135882cd5095dbf15fe2f64231c6a84336/addons/event/views/event_tag_views.xml#L27-L33).

<div class="exercise">

Add an inline list view.

  - Add the `One2many` field `property_ids` to the
    `estate.property.type` model.
  - Add the field in the `estate.property.type` form view as depicted in
    the **Goal** of this section.

</div>

## Widgets

**Reference**: the documentation related to this section can be found in
`reference/js/widgets`.

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, the state of the property should
be displayed using a specific widget:

![Statusbar widget](12_sprinkles/widget.png)

Four states are displayed: New, Offer Received, Offer Accepted and Sold.

</div>

Whenever we've added fields to our models, we've (almost) never had to
worry about how these fields would look like in the user interface. For
example, a date picker is provided for a `Date` field and a `One2many`
field is automatically displayed as a list. Odoo chooses the right
'widget' depending on the field type.

However, in some cases, we want a specific representation of a field
which can be done thanks to the `widget` attribute. We already used it
for the `tag_ids` field when we used the `widget="many2many_tags"`
attribute. If we hadn't used it, then the field would have displayed as
a list.

Each field type has a set of widgets which can be used to fine tune its
display. Some widgets also take extra options. An exhaustive list can be
found in `reference/js/widgets`.

<div class="exercise">

Use the status bar widget.

Use the `statusbar` widget in order to display the `state` of the
`estate.property` as depicted in the **Goal** of this section.

Tip: a simple example can be found
[here](https://github.com/odoo/odoo/blob/0e12fa135882cd5095dbf15fe2f64231c6a84336/addons/account/views/account_bank_statement_views.xml#L136).

</div>

<div class="warning">

<div class="title">

Warning

</div>

Same field multiple times in a view

Add a field only **once** to a list or a form view. Adding it multiple
times is not supported.

</div>

## List Order

**Reference**: the documentation related to this section can be found in
`reference/orm/models`.

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, all lists should display by
default in a deterministic order. Property types can be ordered
manually.

</div>

During the previous exercises, we created several list views. However,
at no point did we specify which order the records had to be listed in
by default. This is a very important thing for many business cases. For
example, in our real estate module we would want to display the highest
offers on top of the list.

### Model

Odoo provides several ways to set a default order. The most common way
is to define the `_order` attribute directly in the model. This way, the
retrieved records will follow a deterministic order which will be
consistent in all views including when records are searched
programmatically. By default there is no order specified, therefore the
records will be retrieved in a non-deterministic order depending on
PostgreSQL.

The `_order` attribute takes a string containing a list of fields which
will be used for sorting. It will be converted to an
[order\_by](https://www.postgresql.org/docs/current/queries-order.html)
clause in SQL. For example:

``` python
from odoo import fields, models

class TestModel(models.Model):
    _name = "test_model"
    _description = "Test Model"
    _order = "id desc"

    description = fields.Char()
```

Our records are ordered by descending `id`, meaning the highest comes
first.

<div class="exercise">

Add model ordering.

Define the following orders in their corresponding models:

| Model                   | Order            |
| ----------------------- | ---------------- |
| `estate.property`       | Descending ID    |
| `estate.property.offer` | Descending Price |
| `estate.property.tag`   | Name             |
| `estate.property.type`  | Name             |

</div>

### View

Ordering is possible at the model level. This has the advantage of a
consistent order everywhere a list of records is retrieved. However, it
is also possible to define a specific order directly in a view thanks to
the `default_order` attribute
([example](https://github.com/odoo/odoo/blob/892dd6860733c46caf379fd36f57219082331b66/addons/crm/report/crm_activity_report_views.xml#L30)).

### Manual

Both model and view ordering allow flexibility when sorting records, but
there is still one case we need to cover: the manual ordering. A user
may want to sort records depending on the business logic. For example,
in our real estate module we would like to sort the property types
manually. It is indeed useful to have the most used types appear at the
top of the list. If our real estate agency mainly sells houses, it is
more convenient to have 'House' appear before 'Apartment'.

To do so, a `sequence` field is used in combination with the `handle`
widget. Obviously the `sequence` field must be the first field in the
`_order` attribute.

<div class="exercise">

Add manual ordering.

  - Add the following field:

| Model                  | Field    | Type    |
| ---------------------- | -------- | ------- |
| `estate.property.type` | Sequence | Integer |

  - Add the sequence to the `estate.property.type` list view with the
    correct widget.

Tip: you can find an example here:
[model](https://github.com/odoo/odoo/blob/892dd6860733c46caf379fd36f57219082331b66/addons/crm/models/crm_stage.py#L36)
and
[view](https://github.com/odoo/odoo/blob/892dd6860733c46caf379fd36f57219082331b66/addons/crm/views/crm_stage_views.xml#L23).

</div>

## Attributes and options

It would be prohibitive to detail all the available features which allow
fine tuning of the look of a view. Therefore, we'll stick to the most
common ones.

### Form

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, the property form view will have:

  - Conditional display of buttons and fields
  - Tag colors

![Form view with sprinkles](12_sprinkles/form.gif)

</div>

In our real estate module, we want to modify the behavior of some
fields. For example, we don't want to be able to create or edit a
property type from the form view. Instead we expect the types to be
handled in their appropriate menu. We also want to give tags a color. In
order to add these behavior customizations, we can add the `options`
attribute to several field widgets.

<div class="exercise">

Add widget options.

  - Add the appropriate option to the `property_type_id` field to
    prevent the creation and the editing of a property type from the
    property form view. Have a look at the `Many2one widget
    documentation <reference/js/widgets>` for more info.
  - Add the following field:

| Model                 | Field | Type    |
| --------------------- | ----- | ------- |
| `estate.property.tag` | Color | Integer |

Then add the appropriate option to the `tag_ids` field to add a color
picker on the tags. Have a look at the `FieldMany2ManyTags widget
documentation <reference/js/widgets>` for more info.

</div>

In `tutorials/getting_started/06_firstui`, we saw that reserved fields
were used for specific behaviors. For example, the `active` field is
used to automatically filter out inactive records. We added the `state`
as a reserved field as well. It's now time to use it\! A `state` field
is used in combination with a `states` attribute in the view to display
buttons conditionally.

<div class="exercise">

Add conditional display of buttons.

Use the `states` attribute to display the header buttons conditionally
as depicted in this section's **Goal** (notice how the 'Sold' and
'Cancel' buttons change when the state is modified).

Tip: do not hesitate to search for `states=` in the Odoo XML files for
some examples.

</div>

More generally, it is possible to make a field `invisible`, `readonly`
or `required` based on the value of other fields thanks to the `attrs`
attribute. Note that `invisible` can also be applied to other elements
of the view such as `button` or `group`.

The `attrs` is a dictionary with the property as a key and a domain as a
value. The domain gives the condition in which the property applies. For
example:

``` xml
<form>
    <field name="description" attrs="{'invisible': [('is_partner', '=', False)]}"/>
    <field name="is_partner" invisible="1"/>
</form>
```

This means that the `description` field is invisible when `is_partner`
is `False`. It is important to note that a field used in an `attrs`
**must** be present in the view. If it should not be displayed to the
user, we can use the `invisible` attribute to hide it.

<div class="exercise">

Use `attrs`.

  - Make the garden area and orientation invisible in the
    `estate.property` form view when there is no garden.
  - Make the 'Accept' and 'Refuse' buttons invisible once the offer
    state is set.
  - Do not allow adding an offer when the property state is 'Offer
    Accepted', 'Sold' or 'Canceled'. To do this use the `readonly`
    `attrs`.

</div>

<div class="warning">

<div class="title">

Warning

</div>

Using a (conditional) `readonly` attribute in the view can be useful to
prevent data entry errors, but keep in mind that it doesn't provide any
level of security\! There is no check done server-side, therefore it's
always possible to write on the field through a RPC call.

</div>

### List

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, the property and offer list views
should have color decorations. Additionally, offers and tags will be
editable directly in the list, and the availability date will be hidden
by default.

![List view with decorations and optional
field](12_sprinkles/decoration.png)

![Editable list](12_sprinkles/editable_list.gif)

</div>

When the model only has a few fields, it can be useful to edit records
directly through the list view and not have to open the form view. In
the real estate example, there is no need to open a form view to add an
offer or create a new tag. This can be achieved thanks to the `editable`
attribute.

<div class="exercise">

Make list views editable.

Make the `estate.property.offer` and `estate.property.tag` list views
editable.

</div>

On the other hand, when a model has a lot of fields it can be tempting
to add too many fields in the list view and make it unclear. An
alternative method is to add the fields, but make them optionally
hidden. This can be achieved thanks to the `optional` attribute.

<div class="exercise">

Make a field optional.

Make the field `date_availability` on the `estate.property` list view
optional and hidden by default.

</div>

Finally, color codes are useful to visually emphasize records. For
example, in the real estate module we would like to display refused
offers in red and accepted offers in green. This can be achieved thanks
to the `decoration-{$name}` attribute (see `reference/js/widgets` for a
complete list):

``` xml
<tree decoration-success="is_partner==True">
    <field name="name">
    <field name="is_partner" invisible="1">
</tree>
```

The records where `is_partner` is `True` will be displayed in green.

<div class="exercise">

Add some decorations.

On the `estate.property` list view:

  - Properties with an offer received are green
  - Properties with an offer accepted are green and bold
  - Properties sold are muted

On the `estate.property.offer` list view:

  - Refused offers are red
  - Accepted offers are green
  - The state should not be visible anymore

Tips:

  - Keep in mind that **all** fields used in attributes must be in the
    view\!
  - If you want to test the color of the "Offer Received" and "Offer
    Accepted" states, add the field in the form view and change it
    manually (we'll implement the business logic for this later).

</div>

### Search

**Reference**: the documentation related to this section can be found in
`reference/views/search` and `reference/views/search/defaults`.

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, the available properties will be
filtered by default, and searching on the living area returns results
where the area is larger than the given number.

![Default filters and domains](12_sprinkles/search.gif)

</div>

Last but not least, there are some tweaks we would like to apply when
searching. First of all, we want to have our 'Available' filter applied
by default when we access the properties. To make this happen, we need
to use the `search_default_{$name}` action context, where `{$name}` is
the filter name. This means that we can define which filter(s) will be
activated by default at the action level.

Here is an example of an
[action](https://github.com/odoo/odoo/blob/6decc32a889b46947db6dd4d42ef995935894a2a/addons/crm/report/crm_opportunity_report_views.xml#L115)
with its [corresponding
filter](https://github.com/odoo/odoo/blob/6decc32a889b46947db6dd4d42ef995935894a2a/addons/crm/report/crm_opportunity_report_views.xml#L68).

<div class="exercise">

Add a default filter.

Make the 'Available' filter selected by default in the `estate.property`
action.

</div>

Another useful improvement in our module would be the ability to search
efficiently by living area. In practice, a user will want to search for
properties of 'at least' the given area. It is unrealistic to expect
users would want to find a property of an exact living area. It is
always possible to make a custom search, but that's inconvenient.

Search view `<field>` elements can have a `filter_domain` that overrides
the domain generated for searching on the given field. In the given
domain, `self` represents the value entered by the user. In the example
below, it is used to search on both `name` and `description` fields.

``` xml
<search string="Test">
    <field name="description" string="Name and description"
           filter_domain="['|', ('name', 'ilike', self), ('description', 'ilike', self)]"/>
    </group>
</search>
```

<div class="exercise">

Change the living area search.

Add a `filter_domain` to the living area to include properties with an
area equal to or greater than the given value.

</div>

## Stat Buttons

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, there will be a stat button on the
property type form view which shows the list of all offers related to
properties of the given type when it is clicked on.

![Stat button](12_sprinkles/stat_button.gif)

</div>

If you've already used some functional modules in Odoo, you've probably
already encountered a 'stat button'. These buttons are displayed on the
top right of a form view and give a quick access to linked documents. In
our real estate module, we would like to have a quick link to the offers
related to a given property type as depicted in the **Goal** of this
section.

At this point of the tutorial we have already seen most of the concepts
to do this. However, there is not a single solution and it can still be
confusing if you don't know where to start from. We'll describe a
step-by-step solution in the exercise. It can always be useful to find
some examples in the Odoo codebase by looking for `oe_stat_button`.

The following exercise might be a bit more difficult than the previous
ones since it assumes you are able to search for examples in the source
code on your own. If you are stuck there is probably someone nearby who
can help you ;-)

The exercise introduces the concept of `reference/fields/related`. The
easiest way to understand it is to consider it as a specific case of a
computed field. The following definition of the `description` field:

``` python
...

partner_id = fields.Many2one("res.partner", string="Partner")
description = fields.Char(related="partner_id.name")
```

is equivalent to:

``` python
...

partner_id = fields.Many2one("res.partner", string="Partner")
description = fields.Char(compute="_compute_description")

@api.depends("partner_id.name")
def _compute_description(self):
    for record in self:
        record.description = record.partner_id.name
```

Every time the partner name is changed, the description is modified.

<div class="exercise">

Add a stat button to property type.

  - Add the field `property_type_id` to `estate.property.offer`. We can
    define it as a related field on `property_id.property_type_id` and
    set it as stored.

Thanks to this field, an offer will be linked to a property type when
it's created. You can add the field to the list view of offers to make
sure it works.

  - Add the field `offer_ids` to `estate.property.type` which is the
    One2many inverse of the field defined in the previous step.
  - Add the field `offer_count` to `estate.property.type`. It is a
    computed field that counts the number of offers for a given property
    type (use `offer_ids` to do so).

At this point, you have all the information necessary to know how many
offers are linked to a property type. When in doubt, add `offer_ids` and
`offer_count` directly to the view. The next step is to display the list
when clicking on the stat button.

  - Create a stat button on `estate.property.type` pointing to the
    `estate.property.offer` action. This means you should use the
    `type="action"` attribute (go back to the end of
    `tutorials/getting_started/10_actions` if you need a refresher).

At this point, clicking on the stat button should display all offers. We
still need to filter out the offers.

  - On the `estate.property.offer` action, add a domain that defines
    `property_type_id` as equal to the `active_id` (= the current
    record, [here is an
    example](https://github.com/odoo/odoo/blob/df37ce50e847e3489eb43d1ef6fc1bac6d6af333/addons/event/views/event_views.xml#L162))

</div>

Looking good? If not, don't worry, the `next chapter
<tutorials/getting_started/13_inheritance>` doesn't require stat buttons
;-)


---
## File: ./content/developer/tutorials/getting_started/08_relations.md

# Chapter 8: Relations Between Models

The `previous chapter <tutorials/getting_started/07_basicviews>` covered
the creation of custom views for a model containing basic fields.
However, in any real business scenario we need more than one model.
Moreover, links between models are necessary. One can easily imagine one
model containing the customers and another one containing the list of
users. You might need to refer to a customer or a user on any existing
business model.

In our real estate module, we want the following information for a
property:

  - the customer who bought the property
  - the real restate agent who sold the property
  - the property type: house, apartment, penthouse, castle...
  - a list of tags characterizing the property: cozy, renovated...
  - a list of the offers received

## Many2one

**Reference**: the documentation related to this topic can be found in
`~odoo.fields.Many2one`.

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section:

  - a new `estate.property.type` model should be created with the
    corresponding menu, action and views.

![Property type](08_relations/property_type.png)

  - three Many2one fields should be added to the `estate.property`
    model: property type, buyer and seller.

![Property](08_relations/property_many2one.png)

</div>

In our real estate module, we want to define the concept of property
type. A property type is, for example, a house or an apartment. It is a
standard business need to categorize properties according to their type,
especially to refine filtering.

A property can have **one** type, but the same type can be assigned to
**many** properties. This is supported by the **many2one** concept.

A many2one is a simple link to another object. For example, in order to
define a link to the `res.partner` in our test model, we can write:

    partner_id = fields.Many2one("res.partner", string="Partner")

By convention, many2one fields have the `_id` suffix. Accessing the data
in the partner can then be easily done with:

    print(my_test_object.partner_id.name)

<div class="seealso">

[foreign keys](https://www.postgresql.org/docs/current/tutorial-fk.html)

</div>

In practice a many2one can be seen as a dropdown list in a form view.

<div class="exercise">

Add the Real Estate Property Type table.

  - Create the `estate.property.type` model and add the following field:

| Field | Type | Attributes |
| ----- | ---- | ---------- |
| name  | Char | required   |

  - Add the menus as displayed in this section's **Goal**
  - Add the field `property_type_id` into your `estate.property` model
    and its form, tree and search views

This exercise is a good recap of the previous chapters: you need to
create a `model <tutorials/getting_started/04_basicmodel>`, set the
`model <tutorials/getting_started/05_securityintro>`, add an `action and
a menu <tutorials/getting_started/06_firstui>`, and `create a view
<tutorials/getting_started/07_basicviews>`.

Tip: do not forget to import any new Python files in `__init__.py`, add
new data files in `__manifest.py__` or add the access rights ;-)

</div>

Once again, restart the server and refresh to see the results\!

In the real estate module, there are still two missing pieces of
information we want on a property: the buyer and the salesperson. The
buyer can be any individual, but on the other hand the salesperson must
be an employee of the real estate agency (i.e. an Odoo user).

In Odoo, there are two models which we commonly refer to:

  - `res.partner`: a partner is a physical or legal entity. It can be a
    company, an individual or even a contact address.
  - `res.users`: the users of the system. Users can be 'internal', i.e.
    they have access to the Odoo backend. Or they can be 'portal', i.e.
    they cannot access the backend, only the frontend (e.g. to access
    their previous orders in eCommerce).

<div class="exercise">

Add the buyer and the salesperson.

Add a buyer and a salesperson to the `estate.property` model using the
two common models mentioned above. They should be added in a new tab of
the form view, as depicted in this section's **Goal**.

The default value for the salesperson must be the current user. The
buyer should not be copied.

Tip: to get the default value, check the note below or look at an
example
[here](https://github.com/odoo/odoo/blob/5bb8b927524d062be32f92eb326ef64091301de1/addons/crm/models/crm_lead.py#L92).

</div>

<div class="note">

<div class="title">

Note

</div>

The object `self.env` gives access to request parameters and other
useful things:

  - `self.env.cr` or `self._cr` is the database *cursor* object; it is
    used for querying the database
  - `self.env.uid` or `self._uid` is the current user's database id
  - `self.env.user` is the current user's record
  - `self.env.context` or `self._context` is the context dictionary
  - `self.env.ref(xml_id)` returns the record corresponding to an XML id
  - `self.env[model_name]` returns an instance of the given model

</div>

Now let's have a look at other types of links.

## Many2many

**Reference**: the documentation related to this topic can be found in
`~odoo.fields.Many2many`.

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section:

  - a new `estate.property.tag` model should be created with the
    corresponding menu and action.

![Property tag](08_relations/property_tag.png)

  - tags should be added to the `estate.property` model:

![Property](08_relations/property_many2many.png)

</div>

In our real estate module, we want to define the concept of property
tags. A property tag is, for example, a property which is 'cozy' or
'renovated'.

A property can have **many** tags and a tag can be assigned to **many**
properties. This is supported by the **many2many** concept.

A many2many is a bidirectional multiple relationship: any record on one
side can be related to any number of records on the other side. For
example, in order to define a link to the `account.tax` model on our
test model, we can write:

    tax_ids = fields.Many2many("account.tax", string="Taxes")

By convention, many2many fields have the `_ids` suffix. This means that
several taxes can be added to our test model. It behaves as a list of
records, meaning that accessing the data must be done in a loop:

    for tax in my_test_object.tax_ids:
        print(tax.name)

A list of records is known as a *recordset*, i.e. an ordered collection
of records. It supports standard Python operations on collections, such
as `len()` and `iter()`, plus extra set operations like `recs1 | recs2`.

<div class="exercise">

Add the Real Estate Property Tag table.

  - Create the `estate.property.tag` model and add the following field:

| Field | Type | Attributes |
| ----- | ---- | ---------- |
| name  | Char | required   |

  - Add the menus as displayed in this section's **Goal**
  - Add the field `tag_ids` to your `estate.property` model and in its
    form and tree views

Tip: in the view, use the `widget="many2many_tags"` attribute as
demonstrated
[here](https://github.com/odoo/odoo/blob/5bb8b927524d062be32f92eb326ef64091301de1/addons/crm_iap_lead_website/views/crm_reveal_views.xml#L36).
The `widget` attribute will be explained in detail in `a later chapter
of the training <tutorials/getting_started/12_sprinkles>`. For now, you
can try to adding and removing it and see the result ;-)

</div>

## One2many

**Reference**: the documentation related to this topic can be found in
`~odoo.fields.One2many`.

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section:

  - a new `estate.property.offer` model should be created with the
    corresponding form and tree view.
  - offers should be added to the `estate.property` model:

![Property offers](08_relations/property_offer.png)

</div>

In our real estate module, we want to define the concept of property
offers. A property offer is an amount a potential buyer offers to the
seller. The offer can be lower or higher than the expected price.

An offer applies to **one** property, but the same property can have
**many** offers. The concept of **many2one** appears once again.
However, in this case we want to display the list of offers for a given
property so we will use the **one2many** concept.

A one2many is the inverse of a many2one. For example, we defined on our
test model a link to the `res.partner` model thanks to the field
`partner_id`. We can define the inverse relation, i.e. the list of test
models linked to our partner:

    test_ids = fields.One2many("test_model", "partner_id", string="Tests")

The first parameter is called the `comodel` and the second parameter is
the field we want to inverse.

By convention, one2many fields have the `_ids` suffix. They behave as a
list of records, meaning that accessing the data must be done in a loop:

    for test in partner.test_ids:
        print(test.name)

<div class="danger">

<div class="title">

Danger

</div>

Because a `~odoo.fields.One2many` is a virtual relationship, there
*must* be a `~odoo.fields.Many2one` field defined in the comodel.

</div>

<div class="exercise">

Add the Real Estate Property Offer table.

  - Create the `estate.property.offer` model and add the following
    fields:

| Field                           | Type                                                            | Attributes                | Values            |
| ------------------------------- | --------------------------------------------------------------- | ------------------------- | ----------------- |
| price                           | Float                                                           |                           |                   |
| status partner\_id property\_id | Selection Many2one (`res.partner`) Many2one (`estate.property`) | no copy required required | Accepted, Refused |

  - Create a tree view and a form view with the `price`, `partner_id`
    and `status` fields. No need to create an action or a menu.
  - Add the field `offer_ids` to your `estate.property` model and in its
    form view as depicted in this section's **Goal**.

</div>

There are several important things to notice here. First, we don't need
an action or a menu for all models. Some models are intended to be
accessed only through another model. This is the case in our exercise:
an offer is always accessed through a property.

Second, despite the fact that the `property_id` field is required, we
did not include it in the views. How does Odoo know which property our
offer is linked to? Well that's part of the magic of using the Odoo
framework: sometimes things are defined implicitly. When we create a
record through a one2many field, the corresponding many2one is populated
automatically for convenience.

Still alive? This chapter is definitely not the easiest one. It
introduced a couple of new concepts while relying on everything that was
introduced before. The `next chapter
<tutorials/getting_started/09_compute_onchange>` will be lighter, don't
worry ;-)


---
## File: ./content/developer/tutorials/getting_started/07_basicviews.md

# Chapter 7: Basic Views

We have seen in the `previous chapter
<tutorials/getting_started/06_firstui>` that Odoo is able to generate
default views for a given model. In practice, the default view is
**never** acceptable for a business application. Instead, we should at
least organize the various fields in a logical manner.

Views are defined in XML files with actions and menus. They are
instances of the `ir.ui.view` model.

In our real estate module, we need to organize the fields in a logical
way:

  - in the list (tree) view, we want to display more than just the name.
  - in the form view, the fields should be grouped.
  - in the search view, we must be able to search on more than just the
    name. Specifically, we want a filter for the 'Available' properties
    and a shortcut to group by postcode.

## List

**Reference**: the documentation related to this topic can be found in
`reference/views/list`.

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, the list view should look like
this:

![List view](07_basicviews/list.png)

</div>

List views, also called tree views, display records in a tabular form.

Their root element is `<tree>`. The most basic version of this view
simply lists all the fields to display in the table (where each field is
a column):

``` xml
<tree string="Tests">
    <field name="name"/>
    <field name="last_seen"/>
</tree>
```

A simple example can be found
[here](https://github.com/odoo/odoo/blob/6da14a3aadeb3efc40f145f6c11fc33314b2f15e/addons/crm/views/crm_lost_reason_views.xml#L46-L54).

<div class="exercise">

Add a custom list view.

Define a list view for the `estate.property` model in the appropriate
XML file. Check the **Goal** of this section for the fields to display.

Tips:

  - do not add the `editable="bottom"` attribute that you can find in
    the example above. We'll come back to it later.
  - some field labels may need to be adapted to match the reference.

</div>

As always, you need to restart the server (do not forget the `-u`
option) and refresh the browser to see the result.

<div class="warning">

<div class="title">

Warning

</div>

You will probably use some copy-paste in this chapter, therefore always
make sure that the `id` remains unique for each view\!

</div>

## Form

**Reference**: the documentation related to this topic can be found in
`reference/views/form`.

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, the form view should look like
this:

![Form view](07_basicviews/form.png)

</div>

Forms are used to create and edit single records.

Their root element is `<form>`. They are composed of high-level
structure elements (groups and notebooks) and interactive elements
(buttons and fields):

``` xml
<form string="Test">
    <sheet>
        <group>
            <group>
                <field name="name"/>
            </group>
            <group>
                <field name="last_seen"/>
            </group>
            <notebook>
                <page string="Description">
                    <field name="description"/>
                </page>
            </notebook>
        </group>
    </sheet>
</form>
```

It is possible to use regular HTML tags such as `div` and `h1` as well
as the the `class` attribute (Odoo provides some built-in classes) to
fine-tune the look.

A simple example can be found
[here](https://github.com/odoo/odoo/blob/6da14a3aadeb3efc40f145f6c11fc33314b2f15e/addons/crm/views/crm_lost_reason_views.xml#L16-L44).

<div class="exercise">

Add a custom form view.

Define a form view for the `estate.property` model in the appropriate
XML file. Check the **Goal** of this section for the expected final
design of the page.

</div>

This might require some trial and error before you get to the expected
result ;-) It is advised that you add the fields and the tags one at a
time to help understand how it works.

In order to avoid relaunching the server every time you do a
modification to the view, it can be convenient to use the `--dev xml`
parameter when launching the server:

``` console
$ ./odoo-bin --addons-path=addons,../enterprise/,../technical-training-sandbox/ -d rd-demo -u estate --dev xml
```

This parameter allows you to just refresh the page to view your view
modifications.

## Search

**Reference**: the documentation related to this topic can be found in
`reference/views/search`.

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, the search view should look like
this:

![Search fields](07_basicviews/search_01.png)

![Filter](07_basicviews/search_02.png)

![Group By](07_basicviews/search_03.png)

</div>

Search views are slightly different from the list and form views since
they don't display *content*. Although they apply to a specific model,
they are used to filter other views' content (generally aggregated views
such as `reference/views/list`). Beyond the difference in use case, they
are defined the same way.

Their root element is `<search>`. The most basic version of this view
simply lists all the fields for which a shortcut is desired:

``` xml
<search string="Tests">
    <field name="name"/>
    <field name="last_seen"/>
</search>
```

The default search view generated by Odoo provides a shortcut to filter
by `name`. It is very common to add the fields which the user is likely
to filter on in a customized search view.

<div class="exercise">

Add a custom search view.

Define a search view for the `estate.property` model in the appropriate
XML file. Check the first image of this section's **Goal** for the list
of fields.

</div>

After restarting the server, it should be possible to filter on the
given fields.

Search views can also contain `<filter>` elements, which act as toggles
for predefined searches. Filters must have one of the following
attributes:

  - `domain`: adds the given domain to the current search
  - `context`: adds some context to the current search; uses the key
    `group_by` to group results on the given field name

A simple example can be found
[here](https://github.com/odoo/odoo/blob/715a24333bf000d5d98b9ede5155d3af32de067c/addons/delivery/views/delivery_view.xml#L30-L44).

Before going further in the exercise, it is necessary to introduce the
'domain' concept.

### Domains

**Reference**: the documentation related to this topic can be found in
`reference/orm/domains`.

In Odoo, a domain encodes conditions on records: a domain is a list of
criteria used to select a subset of a model's records. Each criterion is
a triplet with a *field name*, an *operator* and a *value*. A record
satisfies a criterion if the specified field meets the condition of the
operator applied to the value.

For instance, when used on the *Product* model the following domain
selects all *services* with a unit price greater than *1000*:

    [('product_type', '=', 'service'), ('unit_price', '>', 1000)]

By default criteria are combined with an implicit AND, meaning *every*
criterion needs to be satisfied for a record to match a domain. The
logical operators `&` (AND), `|` (OR) and `!` (NOT) can be used to
explicitly combine criteria. They are used in prefix position (the
operator is inserted before its arguments rather than between). For
instance, to select products 'which are services *OR* have a unit price
which is *NOT* between 1000 and 2000':

    ['|',
        ('product_type', '=', 'service'),
        '!', '&',
            ('unit_price', '>=', 1000),
            ('unit_price', '<', 2000)]

<div class="exercise">

Add filter and Group By.

The following should be added to the previously created search view:

  - a filter which displays available properties, i.e. the state should
    be 'New' or 'Offer Received'.
  - the ability to group results by postcode.

</div>

Looking good? At this point we are already able to create models and
design a user interface which makes sense business-wise. However, a key
component is still missing: the `link between models
<tutorials/getting_started/08_relations>`.


---
## File: ./content/developer/tutorials/getting_started/09_compute_onchange.md

# Chapter 9: Computed Fields And Onchanges

The `relations between models <tutorials/getting_started/08_relations>`
are a key component of any Odoo module. They are necessary for the
modelization of any business case. However, we may want links between
the fields within a given model. Sometimes the value of one field is
determined from the values of other fields and other times we want to
help the user with data entry.

These cases are supported by the concepts of computed fields and
onchanges. Although this chapter is not technically complex, the
semantics of both concepts is very important. This is also the first
time we will write Python logic. Until now we haven't written anything
other than class definitions and field declarations.

## Computed Fields

**Reference**: the documentation related to this topic can be found in
`reference/fields/compute`.

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section:

  - In the property model, the total area and the best offer should be
    computed:

![Compute fields](09_compute_onchange/compute.gif)

  - In the property offer model, the validity date should be computed
    and can be updated:

![Compute field with inverse](09_compute_onchange/compute_inverse.gif)

</div>

In our real estate module, we have defined the living area as well as
the garden area. It is then natural to define the total area as the sum
of both fields. We will use the concept of a computed field for this,
i.e. the value of a given field will be computed from the value of other
fields.

So far fields have been stored directly in and retrieved directly from
the database. Fields can also be *computed*. In this case, the field's
value is not retrieved from the database but computed on-the-fly by
calling a method of the model.

To create a computed field, create a field and set its attribute
`~odoo.fields.Field.compute` to the name of a method. The computation
method should set the value of the computed field for every record in
`self`.

By convention, `~odoo.fields.Field.compute` methods are private, meaning
that they cannot be called from the presentation tier, only from the
business tier (see `tutorials/getting_started/01_architecture`). Private
methods have a name starting with an underscore `_`.

### Dependencies

The value of a computed field usually depends on the values of other
fields in the computed record. The ORM expects the developer to specify
those dependencies on the compute method with the decorator
`~odoo.api.depends`. The given dependencies are used by the ORM to
trigger the recomputation of the field whenever some of its dependencies
have been modified:

    from odoo import api, fields, models
    
    class TestComputed(models.Model):
        _name = "test.computed"
    
        total = fields.Float(compute="_compute_total")
        amount = fields.Float()
    
        @api.depends("amount")
        def _compute_total(self):
            for record in self:
                record.total = 2.0 * record.amount

<div class="note aphorism">

<div class="title">

Note

</div>

`self` is a collection.

The object `self` is a *recordset*, i.e. an ordered collection of
records. It supports the standard Python operations on collections, e.g.
`len(self)` and `iter(self)`, plus extra set operations such as `recs1 |
recs2`.

Iterating over `self` gives the records one by one, where each record is
itself a collection of size 1. You can access/assign fields on single
records by using the dot notation, e.g. `record.name`.

</div>

Many examples of computed fields can be found in Odoo.
[Here](https://github.com/odoo/odoo/blob/713dd3777ca0ce9d121d5162a3d63de3237509f4/addons/account/models/account_move.py#L3420-L3423)
is a simple one.

<div class="exercise">

Compute the total area.

  - Add the `total_area` field to `estate.property`. It is defined as
    the sum of the `living_area` and the `garden_area`.
  - Add the field in the form view as depicted on the first image of
    this section's **Goal**.

</div>

For relational fields it's possible to use paths through a field as a
dependency:

    description = fields.Char(compute="_compute_description")
    partner_id = fields.Many2one("res.partner")
    
    @api.depends("partner_id.name")
    def _compute_description(self):
        for record in self:
            record.description = "Test for partner %s" % record.partner_id.name

The example is given with a `~odoo.fields.Many2one`, but it is valid for
`~odoo.fields.Many2many` or a `~odoo.fields.One2many`. An example can be
found
[here](https://github.com/odoo/odoo/blob/713dd3777ca0ce9d121d5162a3d63de3237509f4/addons/account/models/account_reconcile_model.py#L248-L251).

Let's try it in our module with the following exercise\!

<div class="exercise">

Compute the best offer.

  - Add the `best_price` field to `estate.property`. It is defined as
    the highest (i.e. maximum) of the offers' `price`.
  - Add the field to the form view as depicted in the first image of
    this section's **Goal**.

Tip: you might want to try using the `~odoo.models.BaseModel.mapped`
method. See
[here](https://github.com/odoo/odoo/blob/f011c9aacf3a3010c436d4e4f408cd9ae265de1b/addons/account/models/account_payment.py#L686)
for a simple example.

</div>

### Inverse Function

You might have noticed that computed fields are read-only by default.
This is expected since the user is not supposed to set a value.

In some cases, it might be useful to still be able to set a value
directly. In our real estate example, we can define a validity duration
for an offer and set a validity date. We would like to be able to set
either the duration or the date with one impacting the other.

To support this Odoo provides the ability to use an `inverse` function:

    from odoo import api, fields, models
    
    class TestComputed(models.Model):
        _name = "test.computed"
    
        total = fields.Float(compute="_compute_total", inverse="_inverse_total")
        amount = fields.Float()
    
        @api.depends("amount")
        def _compute_total(self):
            for record in self:
                record.total = 2.0 * record.amount
    
        def _inverse_total(self):
            for record in self:
                record.amount = record.total / 2.0

An example can be found
[here](https://github.com/odoo/odoo/blob/2ccf0bd0dcb2e232ee894f07f24fdc26c51835f7/addons/crm/models/crm_lead.py#L308-L317).

A compute method sets the field while an inverse method sets the field's
dependencies.

Note that the `inverse` method is called when saving the record, while
the `compute` method is called at each change of its dependencies.

<div class="exercise">

Compute a validity date for offers.

  - Add the following fields to the `estate.property.offer` model:

| Field                   | Type         | Default |
| ----------------------- | ------------ | ------- |
| validity date\_deadline | Integer Date | 7       |

Where `date_deadline` is a computed field which is defined as the sum of
two fields from the offer: the `create_date` and the `validity`. Define
an appropriate inverse function so that the user can set either the date
or the validity.

Tip: the `create_date` is only filled in when the record is created,
therefore you will need a fallback to prevent crashing at time of
creation.

  - Add the fields in the form view and the list view as depicted on the
    second image of this section's **Goal**.

</div>

### Additional Information

Computed fields are **not stored** in the database by default. Therefore
it is **not possible** to search on a computed field unless a `search`
method is defined. This topic is beyond the scope of this training, so
we won't cover it. An example can be found
[here](https://github.com/odoo/odoo/blob/f011c9aacf3a3010c436d4e4f408cd9ae265de1b/addons/event/models/event_event.py#L188).

Another solution is to store the field with the `store=True` attribute.
While this is usually convenient, pay attention to the potential
computation load added to your model. Lets re-use our example:

    description = fields.Char(compute="_compute_description", store=True)
    partner_id = fields.Many2one("res.partner")
    
    @api.depends("partner_id.name")
    def _compute_description(self):
        for record in self:
            record.description = "Test for partner %s" % record.partner_id.name

Every time the partner `name` is changed, the `description` is
automatically recomputed for **all the records** referring to it\! This
can quickly become prohibitive to recompute when millions of records
need recomputation.

It is also worth noting that a computed field can depend on another
computed field. The ORM is smart enough to correctly recompute all the
dependencies in the right order... but sometimes at the cost of degraded
performance.

In general performance must always be kept in mind when defining
computed fields. The more complex is your field to compute (e.g. with a
lot of dependencies or when a computed field depends on other computed
fields), the more time it will take to compute. Always take some time to
evaluate the cost of a computed field beforehand. Most of the time it is
only when your code reaches a production server that you realize it
slows down a whole process. Not cool :-(

## Onchanges

**Reference**: the documentation related to this topic can be found in
`~odoo.api.onchange`:

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, enabling the garden will set a
default area of 10 and an orientation to North.

![Onchange](09_compute_onchange/onchange.gif)

</div>

In our real estate module, we also want to help the user with data
entry. When the 'garden' field is set, we want to give a default value
for the garden area as well as the orientation. Additionally, when the
'garden' field is unset we want the garden area to reset to zero and the
orientation to be removed. In this case, the value of a given field
modifies the value of other fields.

The 'onchange' mechanism provides a way for the client interface to
update a form without saving anything to the database whenever the user
has filled in a field value. To achieve this, we define a method where
`self` represents the record in the form view and decorate it with
`~odoo.api.onchange` to specify which field it is triggered by. Any
change you make on `self` will be reflected on the form:

    from odoo import api, fields, models
    
    class TestOnchange(models.Model):
        _name = "test.onchange"
    
        name = fields.Char(string="Name")
        description = fields.Char(string="Description")
        partner_id = fields.Many2one("res.partner", string="Partner")
    
        @api.onchange("partner_id")
        def _onchange_partner_id(self):
            self.name = "Document for %s" % (self.partner_id.name)
            self.description = "Default description for %s" % (self.partner_id.name)

In this example, changing the partner will also change the name and the
description values. It is up to the user whether or not to change the
name and description values afterwards. Also note that we do not loop on
`self`, this is because the method is only triggered in a form view,
where `self` is always a single record.

<div class="exercise">

Set values for garden area and orientation.

Create an `onchange` in the `estate.property` model in order to set
values for the garden area (10) and orientation (North) when garden is
set to True. When unset, clear the fields.

</div>

### Additional Information

Onchanges methods can also return a non-blocking warning message
([example](https://github.com/odoo/odoo/blob/cd9af815ba591935cda367d33a1d090f248dd18d/addons/payment_authorize/models/payment.py#L34-L36)).

## How to use them?

There is no strict rule for the use of computed fields and onchanges.

In many cases, both computed fields and onchanges may be used to achieve
the same result. Always prefer computed fields since they are also
triggered outside of the context of a form view. Never ever use an
onchange to add business logic to your model. This is a **very bad**
idea since onchanges are not automatically triggered when creating a
record programmatically; they are only triggered in the form view.

The usual pitfall of computed fields and onchanges is trying to be 'too
smart' by adding too much logic. This can have the opposite result of
what was expected: the end user is confused from all the automation.

Computed fields tend to be easier to debug: such a field is set by a
given method, so it's easy to track when the value is set. Onchanges, on
the other hand, may be confusing: it is very difficult to know the
extent of an onchange. Since several onchange methods may set the same
fields, it easily becomes difficult to track where a value is coming
from.

When using stored computed fields, pay close attention to the
dependencies. When computed fields depend on other computed fields,
changing a value can trigger a large number of recomputations. This
leads to poor performance.

In the `next chapter <tutorials/getting_started/10_actions>`, we'll see
how we can trigger some business logic when buttons are clicked.


---
## File: ./content/developer/tutorials/getting_started/06_firstui.md

# Chapter 6: Finally, Some UI To Play With

Now that we've created our new `model
<tutorials/getting_started/04_basicmodel>` and its corresponding `access
rights <tutorials/getting_started/05_securityintro>`, it is time to
interact with the user interface.

At the end of this chapter, we will have created a couple of menus in
order to access a default list and form view.

## Data Files (XML)

**Reference**: the documentation related to this topic can be found in
`reference/data`.

In `tutorials/getting_started/05_securityintro`, we added data through a
CSV file. The CSV format is convenient when the data to load has a
simple format. When the format is more complex (e.g. load the structure
of a view or an email template), we use the XML format. For example,
this [help
field](https://github.com/odoo/odoo/blob/09c59012bf80d2ccbafe21c39e604d6cfda72924/addons/crm/views/crm_lost_reason_views.xml#L61-L69)
contains HTML tags. While it would be possible to load such data through
a CSV file, it is more convenient to use an XML file.

The XML files must be added to the same folders as the CSV files and
defined similarly in the `__manifest__.py`. The content of the data
files is also sequentially loaded when a module is installed or updated,
therefore all remarks made for CSV files hold true for XML files. When
the data is linked to views, we add them to the `views` folder.

In this chapter we will load our first action and menus though an XML
file. Actions and menus are standard records in the database.

<div class="note">

<div class="title">

Note

</div>

When performance is important, the CSV format is preferred over the XML
format. This is the case in Odoo where loading a CSV file is faster than
loading an XML file.

</div>

In Odoo, the user interface (actions, menus and views) is largely
defined by creating and composing records defined in an XML file. A
common pattern is Menu \> Action \> View. To access records the user
navigates through several menu levels; the deepest level is an action
which triggers the opening of a list of the records.

## Actions

**Reference**: the documentation related to this topic can be found in
`reference/actions`.

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, an action should be loaded in the
system. We won't see anything yet in the UI, but the file should be
loaded in the log:

``` text
INFO rd-demo odoo.modules.loading: loading estate/data/estate_property_views.xml
```

</div>

Actions can be triggered in three ways:

1.  by clicking on menu items (linked to specific actions)
2.  by clicking on buttons in views (if these are connected to actions)
3.  as contextual actions on object

We will only cover the first case in this chapter. The second case will
be covered in a `later chapter <tutorials/getting_started/10_actions>`
while the last is the focus of an advanced topic. In our Real Estate
example, we would like to link a menu to the `estate.property` model, so
we are able to create a new record. The action can be viewed as the link
between the menu and the model.

A basic action for our <span class="title-ref">test\_model</span> is:

``` xml
<record id="test_model_action" model="ir.actions.act_window">
    <field name="name">Test action</field>
    <field name="res_model">test_model</field>
    <field name="view_mode">tree,form</field>
</record>
```

  - `id` is an `external identifier`. It can be used to refer to the
    record (without knowing its in-database identifier).
  - `model` has a fixed value of `ir.actions.act_window`
    (`reference/actions/window`).
  - `name` is the name of the action.
  - `res_model` is the model which the action applies to.
  - `view_mode` are the views that will be available; in this case they
    are the list (tree) and form views. We'll see `later
    <tutorials/getting_started/15_qwebintro>` that there can be other
    view modes.

Examples can be found everywhere in Odoo, but
[this](https://github.com/odoo/odoo/blob/09c59012bf80d2ccbafe21c39e604d6cfda72924/addons/crm/views/crm_lost_reason_views.xml#L57-L70)
is a good example of a simple action. Pay attention to the structure of
the XML data file since you will need it in the following exercise.

<div class="exercise">

Add an action.

Create the `estate_property_views.xml` file in the appropriate folder
and define it in the `__manifest__.py` file.

Create an action for the model `estate.property`.

</div>

Restart the server and you should see the file loaded in the log.

## Menus

**Reference**: the documentation related to this topic can be found in
`reference/data/shortcuts`.

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, three menus should be created and
the default view is displayed:

![Root menus](06_firstui/estate_menu_root.png)

![First level and action menus](06_firstui/estate_menu_action.png)

![Default form view](06_firstui/estate_form_default.png)

</div>

To reduce the complexity in declaring a menu (`ir.ui.menu`) and
connecting it to the corresponding action, we can use the `<menuitem>`
shortcut .

A basic menu for our `test_model_action` is:

``` xml
<menuitem id="test_model_menu_action" action="test_model_action"/>
```

The menu `test_model_menu_action` is linked to the action
`test_model_action`, and the action is linked to the model
<span class="title-ref">test\_model</span>. As previously mentioned, the
action can be seen as the link between the menu and the model.

However, menus always follow an architecture, and in practice there are
three levels of menus:

1.  The root menu, which is displayed in the App switcher (the Odoo
    Community App switcher is a dropdown menu)

2.  The first level menu, displayed in the top bar

3.  The action menus
    
    ![Root menus](06_firstui/menu_01.png)
    
    ![First level and action menus](06_firstui/menu_02.png)

The easiest way to define the structure is to create it in the XML file.
A basic structure for our `test_model_action` is:

``` xml
<menuitem id="test_menu_root" name="Test">
    <menuitem id="test_first_level_menu" name="First Level">
        <menuitem id="test_model_menu_action" action="test_model_action"/>
    </menuitem>
</menuitem>
```

The name for the third menu is taken from the name of the `action`.

<div class="exercise">

Add menus.

Create the `estate_menus.xml` file in the appropriate folder and define
it in the `__manifest__.py` file. Remember the sequential loading of the
data files ;-)

Create the three levels of menus for the `estate.property` action
created in the previous exercise. Refer to the **Goal** of this section
for the expected result.

</div>

Restart the server and **refresh the browser**\[1\]. You should now see
the menus, and you'll even be able to create your first real estate
property advertisement\!

## Fields, Attributes And View

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, the selling price should be
read-only and the number of bedrooms and the availability date should
have default values. Additionally the selling price and availability
date values won't be copied when the record is duplicated.

![Interaction between model and
view](06_firstui/attribute_and_default.gif)

The reserved fields `active` and `state` are added to the
`estate.property` model.

</div>

So far we have only used the generic view for our real estate property
advertisements, but in most cases we want to fine tune the view. There
are many fine-tunings possible in Odoo, but usually the first step is to
make sure that:

  - some fields have a default value
  - some fields are read-only
  - some fields are not copied when duplicating the record

In our real estate business case, we would like the following:

  - The selling price should be read-only (it will be automatically
    filled in later)
  - The availability date and the selling price should not be copied
    when duplicating a record
  - The default number of bedrooms should be 2
  - The default availability date should be in 3 months

### Some New Attributes

Before moving further with the view design, let's step back to our model
definition. We saw that some attributes, such as `required=True`, impact
the table schema in the database. Other attributes will impact the view
or provide default values.

<div class="exercise">

Add new attributes to the fields.

Find the appropriate attributes (see `~odoo.fields.Field`) to:

  - set the selling price as read-only
  - prevent copying of the availability date and the selling price
    values

</div>

Restart the server and refresh the browser. You should not be able to
set any selling prices. When duplicating a record, the availability date
should be empty.

### Default Values

Any field can be given a default value. In the field definition, add the
option `default=X` where `X` is either a Python literal value (boolean,
integer, float, string) or a function taking a model and returning a
value:

    name = fields.Char(default="Unknown")
    last_seen = fields.Datetime("Last Seen", default=lambda self: fields.Datetime.now())

The `name` field will have the value 'Unknown' by default while the
`last_seen` field will be set as the current time.

<div class="exercise">

Set default values.

Add the appropriate default attributes so that:

  - the default number of bedrooms is 2
  - the default availability date is in 3 months

Tip: this might help you: `~odoo.fields.Date.today`

</div>

Check that the default values are set as expected.

### Reserved Fields

**Reference**: the documentation related to this topic can be found in
`reference/orm/fields/reserved`.

A few field names are reserved for pre-defined behaviors. They should be
defined on a model when the related behavior is desired.

<div class="exercise">

Add active field.

Add the `active` field to the `estate.property` model.

</div>

Restart the server, create a new property, then come back to the list
view... The property will not be listed\! `active` is an example of a
reserved field with a specific behavior: when a record has
`active=False`, it is automatically removed from any search. To display
the created property, you will need to specifically search for inactive
records.

![Inactive records](06_firstui/inactive.gif)

<div class="exercise">

Set a default value for active field.

Set the appropriate default value for the `active` field so it doesn't
disappear anymore.

</div>

Note that the default `active=False` value was assigned to all existing
records.

<div class="exercise">

Add state field.

Add a `state` field to the `estate.property` model. Five values are
possible: New, Offer Received, Offer Accepted, Sold and Canceled. It
must be required, should not be copied and should have its default value
set to 'New'.

Make sure to use the correct type\!

</div>

The `state` will be used later on for several UI enhancements.

Now that we are able to interact with the UI thanks to the default
views, the next step is obvious: we want to define `our own views
<tutorials/getting_started/07_basicviews>`.

1.  A refresh is needed since the web client keeps a cache of the
    various menus and views for performance reasons.


---
## File: ./content/developer/tutorials/getting_started/16_final_word.md

# Chapter 16: The final word

## Coding guidelines

We will start refactoring the code to match to the Odoo coding
guidelines. The guidelines aim to improve the quality of the Odoo Apps
code.

**Reference**: you will find the Odoo coding guidelines in
`/contributing/development/coding_guidelines`.

<div class="exercise">

Polish your code.

Refactor your code to respect the coding guidelines. Don't forget to
respect the module structure, the variable names, the method name
convention, the model attribute order and the xml ids.

</div>

## Additional Info for Odoo Staff

Now that you know the basics, here are some more useful pages if you
haven't seen them already:

  - Our [welcome](https://github.com/odoo/enterprise/wiki/Welcome) page
    has extra info about working at Odoo as well as additional
    [tutorials](https://github.com/odoo/enterprise/wiki/Welcome#3-technical-training)
    that are both language and Odoo specific.
  - Once you are ready to start doing tasks, it is important to note
    that Odoo follows a [rebasing workflow instead of
    merging](https://www.atlassian.com/git/tutorials/merging-vs-rebasing)
    for your PRs. [This
    cheatsheet](https://github.com/odoo/enterprise/wiki/GIT-Cheatsheet#pull-request-flow)
    describes how to do this flow. If you want to become more of a
    rebasing master, then [this
    tutorial](https://www.atlassian.com/git/tutorials/rewriting-history)
    is extra useful.

## Test on the runbot

Odoo has its own `CI (Continuous integration)` server named
[runbot](https://runbot.odoo.com/). All commits, branches and PR will be
tested to avoid regressions or breaking of the stable versions. All the
runs that pass the tests are deployed on their own server with demo
data.

<div class="exercise">

Play with the runbot.

Feel free to go to the runbot website and open the last stable version
of Odoo to check out all the available applications and functionalities.

</div>


---
## File: ./content/developer/tutorials/getting_started/15_qwebintro.md

# Chapter 15: A Brief History Of QWeb

So far the interface design of our real estate module has been rather
limited. Building a list view is straightforward since only the list of
fields is necessary. The same holds true for the form view: despite the
use of a few tags such as `<group>` or `<page>`, there is very little to
do in terms of design.

However, if we want to give a unique look to our application, it is
necessary to go a step further and be able to design new views.
Moreover, other features such as PDF reports or website pages need
another tool to be created with more flexibility: a
[templating](https://en.wikipedia.org/wiki/Template_processor) engine.

You might already be familiar with existing engines such as Jinja
(Python), ERB (Ruby) or Twig (PHP). Odoo comes with its own built-in
engine: `reference/qweb`. QWeb is the primary templating engine used by
Odoo. It is an XML templating engine and used mostly to generate HTML
fragments and pages.

You probably already have come across the [kanban
board](https://en.wikipedia.org/wiki/Kanban_board) in Odoo where the
records are displayed in a card-like structure. We will build such a
view for our real estate module.

## Concrete Example: A Kanban View

**Reference**: the documentation related to this topic can be found in
`reference/views/kanban`.

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section a Kanban view of the properties
should be created:

![Kanban view](15_qwebintro/kanban.png)

</div>

In our estate application, we would like to add a Kanban view to display
our properties. Kanban views are a standard Odoo view (like the form and
list views), but their structure is much more flexible. In fact, the
structure of each card is a mix of form elements (including basic HTML)
and QWeb. The definition of a Kanban view is similar to the definition
of the list and form views, except that their root element is
`<kanban>`. In its simplest form, a Kanban view looks like:

``` xml
<kanban>
    <templates>
        <t t-name="kanban-box">
            <div class="oe_kanban_global_click">
                <field name="name"/>
            </div>
        </t>
    </templates>
</kanban>
```

Let's break down this example:

  - `<templates>`: defines a list of `reference/qweb` templates. Kanban
    views *must* define at least one root template `kanban-box`, which
    will be rendered once for each record.
  - `<t t-name="kanban-box">`: `<t>` is a placeholder element for QWeb
    directives. In this case, it is used to set the `name` of the
    template to `kanban-box`
  - `<div class="oe_kanban_global_click">`: the `oe_kanban_global_click`
    makes the `<div>` clickable to open the record.
  - `<field name="name"/>`: this will add the `name` field to the view.

<div class="exercise">

Make a minimal kanban view.

Using the simple example provided, create a minimal Kanban view for the
properties. The only field to display is the `name`.

Tip: you must add `kanban` in the `view_mode` of the corresponding
`ir.actions.act_window`.

</div>

Once the Kanban view is working, we can start improving it. If we want
to display an element conditionally, we can use the `t-if` directive
(see `reference/qweb/conditionals`).

``` xml
<kanban>
    <field name="state"/>
    <templates>
        <t t-name="kanban-box">
            <div class="oe_kanban_global_click">
                <field name="name"/>
            </div>
            <div t-if="record.state.raw_value == 'new'">
                This is new!
            </div>
        </t>
    </templates>
</kanban>
```

We added a few things:

  - `t-if`: the `<div>` element is rendered if the condition is true.
  - `record`: an object with all the requested fields as its attributes.
    Each field has two attributes `value` and `raw_value`. The former is
    formatted according to current user parameters and the latter is the
    direct value from a `~odoo.models.Model.read`.

In the above example, the field `name` was added in the `<templates>`
element, but `state` is outside of it. When we need the value of a field
but don't want to display it in the view, it is possible to add it
outside of the `<templates>` element.

<div class="exercise">

Improve the Kanban view.

Add the following fields to the Kanban view: expected price, best price,
selling price and tags. Pay attention: the best price is only displayed
when an offer is received, while the selling price is only displayed
when an offer is accepted.

Refer to the **Goal** of the section for a visual example.

</div>

Let's give the final touch to our view: the properties must be grouped
by type by default. You might want to have a look at the various options
described in `reference/views/kanban`.

<div class="exercise">

Add default grouping.

Use the appropriate attribute to group the properties by type by
default. You must also prevent drag and drop.

Refer to the **Goal** of the section for a visual example.

</div>

Kanban views are a typical example of how it is always a good idea to
start from an existing view and fine tune it instead of starting from
scratch. There are many options and classes available, so... read and
learn\!


---
## File: ./content/developer/tutorials/getting_started/14_other_module.md

# Chapter 14: Interact With Other Modules

In the `previous chapter <tutorials/getting_started/13_inheritance>`, we
used inheritance to modify the behavior of a module. In our real estate
scenario, we would like to go a step further and be able to generate
invoices for our customers. Odoo provides an Invoicing module, so it
would be neat to create an invoice directly from our real estate module,
i.e. once a property is set to 'Sold', an invoice is created in the
Invoicing application.

## Concrete Example: Account Move

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section:

  - A new module `estate_account` should be created
  - When a property is sold, an invoice should be issued for the buyer

![Invoice creation](14_other_module/create_inv.gif)

</div>

Any time we interact with another module, we need to keep in mind the
modularity. If we intend to sell our application to real estate
agencies, some may want the invoicing feature but others may not want
it.

### Link Module

The common approach for such use cases is to create a 'link' module. In
our case, the module would depend on `estate` and `account` and would
include the invoice creation logic of the estate property. This way the
real estate and the accounting modules can be installed independently.
When both are installed, the link module provides the new feature.

<div class="exercise">

Create a link module.

Create the `estate_account` module, which depends on the `estate` and
`account` modules. For now, it will be an empty shell.

Tip: you already did this at the `beginning of the tutorial
<tutorials/getting_started/03_newapp>`. The process is very similar.

</div>

When the `estate_account` module appears in the list, go ahead and
install it\! You'll notice that the Invoicing application is installed
as well. This is expected since your module depends on it. If you
uninstall the Invoicing application, your module will be uninstalled as
well.

### Invoice Creation

It's now time to generate the invoice. We want to add functionality to
the `estate.property` model, i.e. we want to add some extra logic for
when a property is sold. Does that sound familiar? If not, it's a good
idea to go back to the `previous chapter
<tutorials/getting_started/13_inheritance>` since you might have missed
something ;-)

As a first step, we need to extend the action called when pressing the
`'Sold' button <tutorials/getting_started/10_actions>` on a property. To
do so, we need to create a `model inheritance
<tutorials/getting_started/13_inheritance>` in the
<span class="title-ref">estate\_account</span> module for the
`estate.property` model. For now, the overridden action will simply
return the `super` call. Maybe an example will make things clearer:

    from odoo import models
    
    class InheritedModel(models.Model):
        _inherit = "inherited.model"
    
        def inherited_action(self):
            return super().inherited_action()

A practical example can be found
[here](https://github.com/odoo/odoo/blob/f1f48cdaab3dd7847e8546ad9887f24a9e2ed4c1/addons/event_sale/models/account_move.py#L7-L16).

<div class="exercise">

Add the first step of invoice creation.

  - Create a `estate_property.py` file in the correct folder of the
    `estate_account` module.
  - `_inherit` the `estate.property` model.
  - Override the `action_sold` method (you might have named it
    differently) to return the `super` call.

Tip: to make sure it works, add a `print` or a debugger breakpoint in
the overridden method.

</div>

Is it working? If not, maybe check that all Python files are correctly
imported.

If the override is working, we can move forward and create the invoice.
Unfortunately, there is no easy way to know how to create any given
object in Odoo. Most of the time, it is necessary to have a look at its
model to find the required fields and provide appropriate values.

A good way to learn is to look at how other modules already do what you
want to do. For example, one of the basic flows of Sales is the creation
of an invoice from a sales order. This looks like a good starting point
since it does exactly what we want to do. Take some time to read and
understand the
[\_create\_invoices](https://github.com/odoo/odoo/blob/f1f48cdaab3dd7847e8546ad9887f24a9e2ed4c1/addons/sale/models/sale.py#L610-L717)
method. When you are done crying because this simple task looks awfully
complex, we can move forward in the tutorial.

To create an invoice, we need the following information:

  - a `partner_id`: the customer
  - a `move_type`: it has several [possible
    values](https://github.com/odoo/odoo/blob/f1f48cdaab3dd7847e8546ad9887f24a9e2ed4c1/addons/account/models/account_move.py#L138-L147)
  - a `journal_id`: the accounting journal

This is enough to create an empty invoice.

<div class="exercise">

Add the second step of invoice creation.

Create an empty `account.move` in the override of the `action_sold`
method:

  - the `partner_id` is taken from the current `estate.property`
  - the `move_type` should correspond to a 'Customer Invoice'

Tips:

  - to create an object, use `self.env[model_name].create(values)`,
    where `values` is a `dict`.
  - the `create` method doesn't accept recordsets as field values.

</div>

When a property is set to 'Sold', you should now have a new customer
invoice created in Invoicing / Customers / Invoices.

Obviously we don't have any invoice lines so far. To create an invoice
line, we need the following information:

  - `name`: a description of the line
  - `quantity`
  - `price_unit`

Moreover, an invoice line needs to be linked to an invoice. The easiest
and most efficient way to link a line to an invoice is to include all
lines at invoice creation. To do this, the `invoice_line_ids` field is
included in the `account.move` creation, which is a
`~odoo.fields.One2many`. One2many and Many2many use special 'commands'
described in `reference/orm/models/crud`. This format is a list of
triplets executed sequentially, where each triplet is a command to
execute on the set of records. Here is a simple example to include a
One2many field `line_ids` at creation of a `test_model`:

    def inherited_action(self):
        self.env["test_model"].create(
            {
                "name": "Test",
                "line_ids": [
                    (
                        0,
                        0,
                        {
                            "field_1": "value_1",
                            "field_2": "value_2",
                        },
                    )
                ],
            }
        )
        return super().inherited_action()

<div class="exercise">

Add the third step of invoice creation.

Add two invoice lines during the creation of the `account.move`. Each
property sold will be invoiced following these conditions:

  - 6% of the selling price
  - an additional 100.00 from administrative fees

Tip: Add the `invoice_line_ids` at creation following the example above.
For each line, we need a `name`, `quantity` and `price_unit`.

</div>

This chapter might be one of the most difficult that has been covered so
far, but it is the closest to what Odoo development will be in practice.
In the `next chapter
<tutorials/getting_started/15_qwebintro>`, we will introduce the
templating mechanism used in Odoo.


---
## File: ./content/developer/tutorials/getting_started/04_basicmodel.md

# Chapter 4: Models And Basic Fields

At the end of the `previous chapter
<tutorials/getting_started/03_newapp>`, we were able to create an Odoo
module. However, at this point it is still an empty shell which doesn't
allow us to store any data. In our real estate module, we want to store
the information related to the properties (name, description, price,
living area...) in a database. The Odoo framework provides tools to
facilitate database interactions.

Before moving forward in the exercise, make sure the `estate` module is
installed, i.e. it must appear as 'Installed' in the Apps list.

<div class="warning">

<div class="title">

Warning

</div>

Do not use mutable global variables.

A single Odoo instance can run several databases in parallel within the
same python process. Distinct modules might be installed on each of
these databases, therefore we cannot rely on global variables that would
be updated depending on installed modules.

</div>

## Object-Relational Mapping

**Reference**: the documentation related to this topic can be found in
the `reference/orm/model` API.

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, the table `estate_property` should
be created:

``` text
$ psql -d rd-demo
rd-demo=# SELECT COUNT(*) FROM estate_property;
count
-------
    0
(1 row)
```

</div>

A key component of Odoo is the
[ORM](https://en.wikipedia.org/wiki/Object-relational_mapping) layer.
This layer avoids having to manually write most
[SQL](https://en.wikipedia.org/wiki/SQL) and provides extensibility and
security services\[1\].

Business objects are declared as Python classes extending
`~odoo.models.Model`, which integrates them into the automated
persistence system.

Models can be configured by setting attributes in their definition. The
most important attribute is `~odoo.models.Model._name`, which is
required and defines the name for the model in the Odoo system. Here is
a minimum definition of a model:

    from odoo import models
    
    class TestModel(models.Model):
        _name = "test_model"

This definition is enough for the ORM to generate a database table named
<span class="title-ref">test\_model</span>. By convention all models are
located in a <span class="title-ref">models</span> directory and each
model is defined in its own Python file.

Take a look at how the `crm_recurring_plan` table is defined and how the
corresponding Python file is imported:

1.  The model is defined in the file `crm/models/crm_recurring_plan.py`
    (see
    [here](https://github.com/odoo/odoo/blob/e80911aaead031e7523173789e946ac1fd27c7dc/addons/crm/models/crm_recurring_plan.py#L1-L9))
2.  The file `crm_recurring_plan.py` is imported in
    `crm/models/__init__.py` (see
    [here](https://github.com/odoo/odoo/blob/e80911aaead031e7523173789e946ac1fd27c7dc/addons/crm/models/__init__.py#L15))
3.  The folder `models` is imported in `crm/__init__.py` (see
    [here](https://github.com/odoo/odoo/blob/e80911aaead031e7523173789e946ac1fd27c7dc/addons/crm/__init__.py#L5))

<div class="exercise">

Define the real estate properties model.

Based on example given in the CRM module, create the appropriate files
and folder for the `estate_property` table.

When the files are created, add a minimum definition for the
`estate.property` model.

</div>

Any modification of the Python files requires a restart of the Odoo
server. When we restart the server, we will add the parameters `-d` and
`-u`:

``` console
$ ./odoo-bin --addons-path=addons,../enterprise/,../technical-training-sandbox/ -d rd-demo -u estate
```

`-u estate` means we want to upgrade the `estate` module, i.e. the ORM
will apply database schema changes. In this case it creates a new table.
`-d rd-demo` means that the upgrade should be performed on the `rd-demo`
database. `-u` should always be used in combination with `-d`.

During the startup you should see the following warnings:

``` text
...
WARNING rd-demo odoo.models: The model estate.property has no _description
...
WARNING rd-demo odoo.modules.loading: The model estate.property has no access rules, consider adding one...
...
```

If this is the case, then you should be good\! To be sure, double check
with `psql` as demonstrated in the **Goal**.

<div class="exercise">

Add a description.

Add a `_description` to your model to get rid of one of the warnings.

</div>

## Model fields

**Reference**: the documentation related to this topic can be found in
the `reference/orm/fields` API.

Fields are used to define what the model can store and where they are
stored. Fields are defined as attributes in the model class:

    from odoo import fields, models
    
    class TestModel(models.Model):
        _name = "test_model"
        _description = "Test Model"
    
        name = fields.Char()

The `name` field is a `~odoo.fields.Char` which will be represented as a
Python unicode `str` and a SQL `VARCHAR`.

### Types

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, several basic fields should have
been added to the table `estate_property`:

``` text
$ psql -d rd-demo

rd-demo=# \d estate_property;
                                            Table "public.estate_property"
    Column       |            Type             | Collation | Nullable |                   Default
--------------------+-----------------------------+-----------+----------+---------------------------------------------
id                 | integer                     |           | not null | nextval('estate_property_id_seq'::regclass)
create_uid         | integer                     |           |          |
create_date        | timestamp without time zone |           |          |
write_uid          | integer                     |           |          |
write_date         | timestamp without time zone |           |          |
name               | character varying           |           |          |
description        | text                        |           |          |
postcode           | character varying           |           |          |
date_availability  | date                        |           |          |
expected_price     | double precision            |           |          |
selling_price      | double precision            |           |          |
bedrooms           | integer                     |           |          |
living_area        | integer                     |           |          |
facades            | integer                     |           |          |
garage             | boolean                     |           |          |
garden             | boolean                     |           |          |
garden_area        | integer                     |           |          |
garden_orientation | character varying           |           |          |
Indexes:
    "estate_property_pkey" PRIMARY KEY, btree (id)
Foreign-key constraints:
    "estate_property_create_uid_fkey" FOREIGN KEY (create_uid) REFERENCES res_users(id) ON DELETE SET NULL
    "estate_property_write_uid_fkey" FOREIGN KEY (write_uid) REFERENCES res_users(id) ON DELETE SET NULL
```

</div>

There are two broad categories of fields: 'simple' fields, which are
atomic values stored directly in the model's table, and 'relational'
fields, which link records (of the same or different models).

Simple field examples are `~odoo.fields.Boolean`, `~odoo.fields.Float`,
`~odoo.fields.Char`, `~odoo.fields.Text`, `~odoo.fields.Date` and
`~odoo.fields.Selection`.

<div class="exercise">

Add basic fields to the Real Estate Property table.

Add the following basic fields to the table:

| Field               | Type      |
| ------------------- | --------- |
| name                | Char      |
| description         | Text      |
| postcode            | Char      |
| date\_availability  | Date      |
| expected\_price     | Float     |
| selling\_price      | Float     |
| bedrooms            | Integer   |
| living\_area        | Integer   |
| facades             | Integer   |
| garage              | Boolean   |
| garden              | Boolean   |
| garden\_area        | Integer   |
| garden\_orientation | Selection |

The `garden_orientation` field must have 4 possible values: 'North',
'South', 'East' and 'West'. The selection list is defined as a list of
tuples, see
[here](https://github.com/odoo/odoo/blob/b0e0035b585f976e912e97e7f95f66b525bc8e43/addons/crm/report/crm_activity_report.py#L31-L34)
for an example.

</div>

When the fields are added to the model, restart the server with `-u
estate`

``` console
$ ./odoo-bin --addons-path=addons,../enterprise/,../technical-training-sandbox/ -d rd-demo -u estate
```

Connect to `psql` and check the structure of the table
`estate_property`. You'll notice that a couple of extra fields were also
added to the table. We will revisit them later.

### Common Attributes

<div class="note">

<div class="title">

Note

</div>

**Goal**: at the end of this section, the columns `name` and
`expected_price` should be not nullable in the table `estate_property`:

``` console
rd-demo=# \d estate_property;
                                            Table "public.estate_property"
    Column       |            Type             | Collation | Nullable |                   Default
--------------------+-----------------------------+-----------+----------+---------------------------------------------
...
name               | character varying           |           | not null |
...
expected_price     | double precision            |           | not null |
...
```

</div>

Much like the model itself, fields can be configured by passing
configuration attributes as parameters:

    name = fields.Char(required=True)

Some attributes are available on all fields, here are the most common
ones:

  - `~odoo.fields.Field.string` (`str`, default: field's name)  
    The label of the field in UI (visible by users).

  - `~odoo.fields.Field.required` (`bool`, default: `False`)  
    If `True`, the field can not be empty. It must either have a default
    value or always be given a value when creating a record.

  - `~odoo.fields.Field.help` (`str`, default: `''`)  
    Provides long-form help tooltip for users in the UI.

  - `~odoo.fields.Field.index` (`bool`, default: `False`)  
    Requests that Odoo create a [database
    index](https://use-the-index-luke.com/sql/preface) on the column.

<div class="exercise">

Set attributes for existing fields.

Add the following attributes:

| Field           | Attribute |
| --------------- | --------- |
| name            | required  |
| expected\_price | required  |

After restarting the server, both fields should be not nullable.

</div>

### Automatic Fields

**Reference**: the documentation related to this topic can be found in
`reference/fields/automatic`.

You may have noticed your model has a few fields you never defined. Odoo
creates a few fields in all models\[2\]. These fields are managed by the
system and can't be written to, but they can be read if useful or
necessary:

  - `~odoo.fields.Model.id` (`~odoo.fields.Id`)  
    The unique identifier for a record of the model.

  - `~odoo.fields.Model.create_date` (`~odoo.fields.Datetime`)  
    Creation date of the record.

  - `~odoo.fields.Model.create_uid` (`~odoo.fields.Many2one`)  
    User who created the record.

  - `~odoo.fields.Model.write_date` (`~odoo.fields.Datetime`)  
    Last modification date of the record.

  - `~odoo.fields.Model.write_uid` (`~odoo.fields.Many2one`)  
    User who last modified the record.

Now that we have created our first model, let's `add some security
<tutorials/getting_started/05_securityintro>`\!

1.  writing raw SQL queries is possible, but requires caution as this
    bypasses all Odoo authentication and security mechanisms.

2.  it is possible to `disable the automatic creation of some
    fields <reference/fields/automatic/log_access>`


---
## File: ./content/developer/howtos/connect_device.md

# Connect with a device

IoT Drivers allow any Odoo module to communicate in real-time with any
device connected to the IoT Box. Communication with the IoT Box goes
both ways, so the Odoo client can send commands to and receive
information from any of the supported devices.

To add support for a device, all we need is:

  - an <span class="title-ref">Interface</span>, to detect connected
    devices of a specific type
  - a <span class="title-ref">Driver</span>, to communicate with an
    individual device

At each boot, the IoT Box will load all of the Interfaces and Drivers
that can be located on the connected Odoo instance. Each module can
contain an <span class="title-ref">iot\_handlers</span> directory that
will be copied to the IoT Box. The structure of this directory is the
following

``` text
your_module
├── ...
└── iot_handlers
    ├── drivers
    │   ├── DriverName.py
    │   └── ...
    │
    └── interfaces
        ├── InterfaceName.py
        └── ...
```

## Detect Devices

Devices connected to the IoT Box are detected through
<span class="title-ref">Interfaces</span>. There is an Interface for
each supported connection type (USB, Bluetooth, Video, Printers, Serial,
etc.). The interface maintains a list of detected devices and associates
them with the right Driver.

Supported devices will appear both on the IoT Box Homepage that you can
access through its IP address and in the IoT module of the connected
Odoo instance.

### Interface

The role of the Interface is to maintain a list of devices connected
through a determined connection type. Creating a new interface requires

  - Extending the <span class="title-ref">Interface</span> class
  - Setting the <span class="title-ref">connection\_type</span> class
    attribute
  - Implementing the <span class="title-ref">get\_devices</span> method,
    that should return a dictionary containing data about each detected
    device. This data will be given as argument to the constructors and
    <span class="title-ref">supported</span> method of the Drivers.

<div class="note">

<div class="title">

Note

</div>

Setting the <span class="title-ref">\_loop\_delay</span> attribute will
modify the interval between calls to
<span class="title-ref">get\_devices</span>. By default, this interval
is set to 3 seconds.

</div>

``` python
from odoo.addons.hw_drivers.interface import Interface

class InterfaceName(Interface):
    connection_type = 'ConnectionType'

    def get_devices(self):
        return {
            'device_identifier_1': {...},
            ...
        }
```

### Driver

Once the interface has retrieved the list of detected devices, it will
loop through all of the Drivers that have the same
<span class="title-ref">connection\_type</span> attribute and test their
respective <span class="title-ref">supported</span> method on all
detected devices. If the supported method of a Driver returns
<span class="title-ref">True</span>, an instance of this Driver will be
created for the corresponding device.

<div class="note">

<div class="title">

Note

</div>

<span class="title-ref">supported</span> methods of drivers are given a
priority order. The <span class="title-ref">supported</span> method of a
child class will always be tested before the one of its parent. This
priority can be adjusted by modifying the
<span class="title-ref">priority</span> attribute of the Driver.

</div>

Creating a new Driver requires:

  - Extending <span class="title-ref">Driver</span>
  - Setting the <span class="title-ref">connection\_type</span> class
    attribute.
  - Setting the <span class="title-ref">device\_type</span>,
    <span class="title-ref">device\_connection</span> and
    <span class="title-ref">device\_name</span> attributes.
  - Defining the <span class="title-ref">supported</span> method

<!-- end list -->

``` python
from odoo.addons.hw_drivers.driver import Driver

class DriverName(Driver):
    connection_type = 'ConnectionType'

    def __init__(self, identifier, device):
        super(NewDriver, self).__init__(identifier, device)
        self.device_type = 'DeviceType'
        self.device_connection = 'DeviceConnection'
        self.device_name = 'DeviceName'

    @classmethod
    def supported(cls, device):
        ...
```

## Communicate With Devices

Once your new device is detected and appears in the IoT module, the next
step is to communicate with it. Since the box only has a local IP
address, it can only be reached from the same local network.
Communication, therefore, needs to happen on the browser-side, in
JavaScript.

The process depends on the direction of the communication: - From the
browser to the box, through [Actions](#actions) - From the box to the
browser, through [Longpolling](#longpolling)

Both channels are accessed from the same JS object, the
<span class="title-ref">DeviceProxy</span>, which is instantiated using
the IP of the IoT Box and the device identifier.

``` javascript
var DeviceProxy = require('iot.DeviceProxy');

var iot_device = new DeviceProxy({
    iot_ip: iot_ip,
    identifier: device_identifier
});
```

### Actions

Actions are used to tell a selected device to execute a specific action,
such as taking a picture, printing a receipt, etc.

<div class="note">

<div class="title">

Note

</div>

It must be noted that no “answer” will be sent by the box on this route,
only the request status. The answer to the action, if any, has to be
retrieved via the longpolling.

</div>

An action can be performed on the DeviceProxy Object.

``` javascript
iot_device.action(data);
```

In your driver, define an <span class="title-ref">action</span> method
that will be executed when called from an Odoo module. It takes the data
given during the call as argument.

``` python
def action(self, data):
    ...
```

### Longpolling

When any module in Odoo wants to read data from a specific device, it
creates a listener identified by the IP/domain of the box and the device
identifier and passes it a callback function to be called every time the
device status changes. The callback is called with the new data as
argument.

``` javascript
iot_device.add_listener(this._onValueChange.bind(this));

_onValueChange: function (result) {
    ...
}
```

In the Driver, an event is released by calling the
<span class="title-ref">device\_changed</span> function from the
<span class="title-ref">event\_manager</span>. All callbacks set on the
listener will then be called with
<span class="title-ref">self.data</span> as argument.

``` python
from odoo.addons.hw_drivers.event_manager import event_manager

class DriverName(Driver):
    connection_type = 'ConnectionType'

    def methodName(self):
        self.data = {
            'value': 0.5,
            ...
        }
        event_manager.device_changed(self)
```


---
## File: ./content/developer/howtos/localization.md

# Accounting Localization

<div class="warning">

<div class="title">

Warning

</div>

This tutorial requires knowledges about how to build a module in Odoo
(see `../tutorials/getting_started`).

</div>

## Building a localization module

When installing the `accounting` module, the localization module
corresponding to the country code of the company is installed
automatically. In case of no country code set or no localization module
found, the `l10n_generic_coa` (US) localization module is installed by
default.

For example, `l10n_be` will be installed if the company has `Belgium` as
country.

This behavior is allowed by the presence of a *.xml* file containing the
following code:

``` xml
<function model="account.chart.template" name="try_loading_for_current_company">
   <value eval="[ref(module.template_xmlid)]"/>
</function>
```

Where `module.template_xmlid` is the **fully-qualified** xmlid of the
corresponding template.

Usually located in the `data` folder, it must be loaded at the very last
in the `__manifest__.py` file.

<div class="danger">

<div class="title">

Danger

</div>

If the *.xml* file is missing, the right chart of accounts won't be
loaded on time\!

</div>

## Configuring my own Chart of Accounts?

First of all, before I proceed, we need to talk about the templates. A
template is a record that allows replica of itself. This mechanism is
needed when working in multi-companies. For example, the creation of a
new account is done using the `account.account.template` model. However,
each company using this chart of accounts will be linked to a replica
having `account.account` as model. So, the templates are never used
directly by the company.

Then, when a chart of accounts needs to be installed, all templates
dependent of this one will create a replica and link this newly
generated record to the company's user. It means all such templates must
be linked to the chart of accounts in some way. To do so, each one must
reference the desired chart of accounts using the `chart_template_id`
field. For this reason, we need to define an instance of the
`account.chart.template` model before creating its templates.

``` xml
<record id="..." model="account.chart.template">
    <!-- [Required] Specify the name to display for this CoA. -->
    <field name="name">...</field>

    <!-- [Required] Specify the currency. E.g. "base.USD". -->
    <field name="currency_id" ref="..."/>

    <!-- [Required] Specify a prefix of the bank accounts. -->
    <field name="bank_account_code_prefix">...</field>

    <!-- [Required] Specify a prefix of the cash accounts. -->
    <field name="cash_account_code_prefix">...</field>

    <!-- [Optional] Define a parent chart of accounts that will be installed just before this one. -->
    <field name="parent_id" ref="..."/>

    <!-- [Optional] Define the number of digits of account codes. By default, the value is 6. -->
    <field name="code_digits">...</field>

    <!-- [Optional] Boolean to show or not this CoA on the list. By default, the CoA is visible.
     This field is mostly used when this CoA has some children (see parent_id field). -->
    <field name="visible" eval="..."/>

    <!-- [Optional] Boolean to enable the Anglo-Saxon accounting. By default, this field is False. -->
    <field name="use_anglo_saxon" eval="..."/>

    <!-- [Optional] Boolean to enable the complete set of taxes. By default, this field is True.
    This boolean helps you to choose if you want to propose to the user to encode the sale and purchase rates or choose from list of taxes.
    This last choice assumes that the set of tax defined on this template is complete. -->
    <field name="complete_tax_set" eval="..."/>

    <!-- [Optional] Specify the spoken languages.
    /!\ This option is only available if your module depends of l10n_multilang.
    You must provide the language codes separated by ';', e.g. eval="'en_US;ar_EG;ar_SY'". -->
    <field name="spoken_languages" eval="..."/>
</record>
```

For example, let's take a look to the Belgium chart of accounts.

``` xml
<record id="l10nbe_chart_template" model="account.chart.template">
    <field name="name">Belgian PCMN</field>
    <field name="currency_id" ref="base.EUR"/>
    <field name="bank_account_code_prefix">550</field>
    <field name="cash_account_code_prefix">570</field>
    <field name="spoken_languages" eval="'nl_BE'"/>
</record>
```

Now that the chart of accounts is created, we can focus on the creation
of the templates. As said previously, each record must reference this
record through the `chart_template_id` field. If not, the template will
be ignored. The following sections show in details how to create these
templates.

### Adding a new account to my Chart of Accounts

It's time to create our accounts. It consists to creating records of
`account.account.template` type. Each `account.account.template` is able
to create an `account.account` for each company.

``` xml
<record id="..." model="account.account.template">
    <!-- [Required] Specify the name to display for this account. -->
    <field name="name">...</field>

    <!-- [Required] Specify a code. -->
    <field name="code">...</field>

    <!-- [Required] Specify a type. -->
    <field name="user_type_id">...</field>

    <!-- [Required] Set the CoA owning this account. -->
    <field name="chart_template_id" ref="..."/>

    <!-- [Optional] Specify a secondary currency for each account.move.line linked to this account. -->
    <field name="currency_id" ref="..."/>

    <!-- [Optional] Boolean to allow the user to reconcile entries in this account. True by default. -->
    <field name="reconcile" eval="..."/>

    <!-- [Optional] Specify a group for this account. -->
    <field name="group_id" ref="...">

    <!-- [Optional] Specify some tags. -->
    <field name="tag_ids" eval="...">
</record>
```

Some of the described fields above deserve a bit more explanation.

The `user_type_id` field requires a value of type
`account.account.type`. Although some additional types could be created
in a localization module, we encourage the usage of the existing types
in the
[account/data/data\_account\_type.xml](%7BGITHUB_PATH%7D/addons/account/data/data_account_type.xml)
file. The usage of these generic types ensures the generic reports
working correctly in addition to those that you could create in your
localization module.

<div class="warning">

<div class="title">

Warning

</div>

Avoid the usage of liquidity `account.account.type`\! Indeed, the bank &
cash accounts are created directly at the installation of the
localization module and then, are linked to an `account.journal`.

</div>

<div class="warning">

<div class="title">

Warning

</div>

Only one account of type payable/receivable is enough.

</div>

Although the `tag_ids` field is optional, this one remains a very
powerful feature. Indeed, this one allows you to define some tags for
your accounts to spread them correctly on your reports. For example,
suppose you want to create a financial report having multiple lines but
you have no way to find a rule to dispatch the accounts according their
`code` or `name`. The solution is the usage of tags, one for each report
line, to spread and aggregate your accounts like you want.

Like any other record, a tag can be created with the following xml
structure:

``` xml
<record id="..." model="account.account.tag">
    <!-- [Required] Specify the name to display for this tag. -->
    <field name="name">...</field>

    <!-- [Optional] Define a scope for this applicability.
    The available keys are 'accounts' and 'taxes' but 'accounts' is the default value. -->
    <field name="applicability">...</field>
</record>
```

As you can well imagine with the usage of tags, this feature can also be
used with taxes.

An examples coming from the `l10n_be` module:

``` xml
<record id="a4000" model="account.account.template">
    <field name="name">Clients</field>
    <field name="code">4000</field>
    <field name="user_type_id" ref="account.data_account_type_receivable"/>
    <field name="chart_template_id" ref="l10nbe_chart_template"/>
</record>
```

<div class="warning">

<div class="title">

Warning

</div>

Don't create too much accounts: 200-300 is enough.

</div>

### Adding a new tax to my Chart of Accounts

To create a new tax record, you just need to follow the same process as
the creation of accounts. The only difference being that you must use
the `account.tax.template` model.

``` xml
<record id="..." model="account.tax.template">
    <!-- [Required] Specify the name to display for this tax. -->
    <field name="name">...</field>

    <!-- [Required] Specify the amount.
    E.g. 7 with fixed amount_type means v + 7 if v is the amount on which the tax is applied.
     If amount_type is 'percent', the tax amount is v * 0.07. -->
    <field name="amount" eval="..."/>

    <!-- [Required] Set the CoA owning this tax. -->
    <field name="chart_template_id" ref="..."/>

    <!-- [Required/Optional] Define an account if the tax is not a group of taxes. -->
    <field name="account_id" ref="..."/>

    <!-- [Required/Optional] Define an refund account if the tax is not a group of taxes. -->
    <field name="refund_account_id" ref="..."/>

    <!-- [Optional] Define the tax's type.
    'sale', 'purchase' or 'none' are the allowed values. 'sale' is the default value.
    Note: 'none' means a tax can't be used by itself, however it can still be used in a group. -->
    <field name="type_tax_use">...</field>

    <!-- [Optional] Define the type of amount:
    'group' for a group of taxes, 'fixed' for a tax with a fixed amount or 'percent' for a classic percentage of price.
    By default, the type of amount is percentage. -->
    <field name="amount_type" eval="..."/>

    <!-- [Optional] Define some children taxes.
    /!\ Should be used only with an amount_type with 'group' set. -->
    <field name="children_tax_ids" eval="..."/>

    <!-- [Optional] The sequence field is used to define order in which the tax lines are applied.
    By default, sequence = 1. -->
    <field name="sequence" eval="..."/>

    <!-- [Optional] Specify a short text to be displayed on invoices.
    For example, a tax named "15% on Services" can have the following label on invoice "15%". -->
    <field name="description">...</field>

    <!-- [Optional] Boolean that indicates if the amount should be considered as included in price. False by default.
    E.g. Suppose v = 132 and a tax amount of 20.
    If price_include = False, the computed amount will be 132 * 0.2 = 26.4.
    If price_include = True, the computed amount will be 132 - (132 / 1.2) = 132 - 110 = 22. -->
    <field name="price_include" eval="..."/>

    <!-- [Optional] Boolean to set to include the amount to the base. False by default.
     If True, the subsequent taxes will be computed based on the base tax amount plus the amount of this tax.
     E.g. suppose v = 100, t1, a tax of 10% and another tax t2 with 20%.
     If t1 doesn't affects the base,
     t1 amount = 100 * 0.1 = 10 and t2 amount = 100 * 0.2 = 20.
     If t1 affects the base,
     t1 amount = 100 * 0.1 = 10 and t2 amount = 110 * 0.2 = 22.  -->
    <field name="include_base_amount" eval="..."/>

    <!-- [Optional] Boolean false by default.
     If set, the amount computed by this tax will be assigned to the same analytic account as the invoice line (if any). -->
    <field name="analytic" eval="..."/>

    <!-- [Optional] Specify some tags.
    These tags must have 'taxes' as applicability.
    See the previous section for more details. -->
    <field name="tag_ids" eval="...">

    <!-- [Optional] Define a tax group used to display the sums of taxes in the invoices. -->
    <field name="tax_group_id" ref="..."/>

    <!-- [Optional] Define the tax exigibility either based on invoice ('on_invoice' value) or
    either based on payment using the 'on_payment' key.
    The default value is 'on_invoice'. -->
    <field name="tax_exigibility">...</field>

    <!-- [Optional] Define a cash basis account in case of tax exigibility 'on_payment'. -->
    <field name="cash_basis_account" red="..."/>
</record>
```

An example found in the `l10n_pl` module:

``` xml
<record id="vp_leas_sale" model="account.tax.template">
    <field name="chart_template_id" ref="pl_chart_template"/>
    <field name="name">VAT - leasing pojazdu(sale)</field>
    <field name="description">VLP</field>
    <field name="amount">1.00</field>
    <field name="sequence" eval="1"/>
    <field name="amount_type">group</field>
    <field name="type_tax_use">sale</field>
    <field name="children_tax_ids" eval="[(6, 0, [ref('vp_leas_sale_1'), ref('vp_leas_sale_2')])]"/>
    <field name="tag_ids" eval="[(6,0,[ref('l10n_pl.tag_pl_21')])]"/>
    <field name="tax_group_id" ref="tax_group_vat_23"/>
</record>
```

### Adding a new fiscal position to my Chart of Accounts

<div class="note">

<div class="title">

Note

</div>

If you need more information about what is a fiscal position and how it
works in Odoo, please refer to
`/applications/finance/accounting/taxation/taxes/fiscal_positions`.

</div>

To create a new fiscal position, simply use the
`account.fiscal.position.template` model:

``` xml
<record id="..." model="account.fiscal.position.template">
    <!-- [Required] Specify the name to display for this fiscal position. -->
    <field name="name">...</field>

    <!-- [Required] Set the CoA owning this fiscal position. -->
    <field name="chart_template_id" ref="..."/>

    <!-- [Optional] Add some additional notes. -->
    <field name="note">...</field>
</record>
```

### Adding the properties to my Chart of Accounts

When the whole accounts are generated, you have the possibility to
override the newly generated chart of accounts by adding some properties
that correspond to default accounts used in certain situations. This
must be done after the creation of accounts before each one must be
linked to the chart of accounts.

``` xml
<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="l10n_xx_chart_template" model="account.chart.template">

        <!-- Define receivable/payable accounts. -->
        <field name="property_account_receivable_id" ref="..."/>
        <field name="property_account_payable_id" ref="..."/>

        <!-- Define categories of expense/income account. -->
        <field name="property_account_expense_categ_id" ref="..."/>
        <field name="property_account_income_categ_id" ref="..."/>

        <!-- Define input/output accounts for stock valuation. -->
        <field name="property_stock_account_input_categ_id" ref="..."/>
        <field name="property_stock_account_output_categ_id" ref="..."/>

        <!-- Define an account template for stock valuation. -->
        <field name="property_stock_valuation_account_id" ref="..."/>

        <!-- Define loss/gain exchange rate accounts. -->
        <field name="expense_currency_exchange_account_id" ref="..."/>
        <field name="income_currency_exchange_account_id" ref="..."/>

        <!-- Define a transfer account. -->
        <field name="transfer_account_id" ref="..."/>
    </record>
</odoo>
```

For example, let's come back to the Belgium PCMN. This chart of accounts
is override in this way to add some properties.

``` xml
<record id="l10nbe_chart_template" model="account.chart.template">
    <field name="property_account_receivable_id" ref="a4000"/>
    <field name="property_account_payable_id" ref="a440"/>
    <field name="property_account_expense_categ_id" ref="a600"/>
    <field name="property_account_income_categ_id" ref="a7010"/>
    <field name="expense_currency_exchange_account_id" ref="a654"/>
    <field name="income_currency_exchange_account_id" ref="a754"/>
    <field name="transfer_account_id" ref="trans"/>
</record>
```

## How to create a new bank operation model?

<div class="note">

<div class="title">

Note

</div>

How a bank operation model works exactly in Odoo? See
`/applications/finance/accounting/bank/reconciliation/reconciliation_models`.

</div>

Since `V10`, a new feature is available in the bank statement
reconciliation widget: the bank operation model. This allows the user to
pre-fill some accounting entries with a single click. The creation of an
`account.reconcile.model.template` record is quite easy:

``` xml
<record id="..." model="account.reconcile.model.template">
    <!-- [Required] Specify the name to display. -->
    <field name="name">...</field>

    <!-- [Required] Set the CoA owning this. -->
    <field name="chart_template_id" ref="..."/>

    <!-- [Optional] Set a sequence number defining the order in which it will be displayed.
    By default, the sequence is 10. -->
    <field name="sequence" eval="..."/>

    <!-- [Optional] Define an account. -->
    <field name="account_id" ref="..."/>

    <!-- [Optional] Define a label to be added to the journal item. -->
    <field name="label">...</field>

    <!-- [Optional] Define the type of amount_type, either 'fixed' or 'percentage'.
    The last one is the default value. -->
    <field name="amount_type">...</field>

    <!-- [Optional] Define the balance amount on which this model will be applied to (100 by default).
    Fixed amount will count as a debit if it is negative, as a credit if it is positive. -->
    <field name="amount">...</field>

    <!-- [Optional] Define eventually a tax. -->
    <field name="tax_id" ref="..."/>

    <!-- [Optional] The sames fields are available twice.
    To enable a second journal line, you can set this field to true and
    fill the fields accordingly. -->
    <field name="has_second_line" eval="..."/>
    <field name="second_account_id" ref="..."/>
    <field name="second_label">...</field>
    <field name="second_amount_type">...</field>
    <field name="second_amount">...</field>
    <field name="second_tax_id" ref="..."/>
</record>
```

## How to create a new dynamic report?

If you need to add some reports on your localization, you need to create
a new module named **l10n\_xx\_reports**. Furthermore, this additional
module must be present in the `enterprise` repository and must have at
least two dependencies, one to bring all the stuff for your localization
module and one more, `account_reports`, to design dynamic reports.

``` py
'depends': ['l10n_xx', 'account_reports'],
```

Once it's done, you can start the creation of your report statements.
The documentation is available in the following
[slides](https://www.odoo.com/slides/slide/how-to-create-custom-accounting-report-415).


---
## File: ./content/developer/howtos/profilecode.md

# Profiling Odoo code

<div class="warning">

<div class="title">

Warning

</div>

This tutorial requires `having installed Odoo
<../../administration/install>` and `writing Odoo code
<../tutorials/getting_started>`

</div>

## Graph a method

Odoo embeds a profiler of code. This embedded profiler output can be
used to generate a graph of calls triggered by the method, number of
queries, percentage of time taken in the method itself as well as the
time that the method took and its sub-called methods.

``` python
from odoo.tools.misc import profile
[...]
@profile('/temp/prof.profile')
def mymethod(...)
```

This produces a file called /temp/prof.profile

A tool called *gprof2dot* will produce a graph with this result:

``` bash
gprof2dot -f pstats -o /temp/prof.xdot /temp/prof.profile
```

A tool called *xdot* will display the resulting graph:

``` bash
xdot /temp/prof.xdot
```

## Log a method

Another profiler can be used to log statistics on a method:

``` python
from odoo.tools.profiler import profile
[...]
@profile
@api.model
def mymethod(...):
```

The statistics will be displayed into the logs once the method to be
analysed is completely reviewed.

``` bash
2018-03-28 06:18:23,196 22878 INFO openerp odoo.tools.profiler:
calls     queries   ms
project.task ------------------------ /home/odoo/src/odoo/addons/project/models/project.py, 638

1         0         0.02          @profile
                                  @api.model
                                  def create(self, vals):
                                      # context: no_log, because subtype already handle this
1         0         0.01              context = dict(self.env.context, mail_create_nolog=True)

                                      # for default stage
1         0         0.01              if vals.get('project_id') and not context.get('default_project_id'):
                                          context['default_project_id'] = vals.get('project_id')
                                      # user_id change: update date_assign
1         0         0.01              if vals.get('user_id'):
                                          vals['date_assign'] = fields.Datetime.now()
                                      # Stage change: Update date_end if folded stage
1         0         0.0               if vals.get('stage_id'):
                                          vals.update(self.update_date_end(vals['stage_id']))
1         108       631.8             task = super(Task, self.with_context(context)).create(vals)
1         0         0.01              return task

Total:
1         108       631.85
```

## Dump stack

Sending the SIGQUIT signal to an Odoo process (only available on POSIX)
makes this process output the current stack trace to log, with info
level. When an odoo process seems stuck, sending this signal to the
process permit to know what the process is doing, and letting the
process continue his job.

## Tracing code execution

Instead of sending the SIGQUIT signal to an Odoo process often enough,
to check where the processes are performing worse than expected, we can
use the [py-spy](https://github.com/benfred/py-spy) tool to do it for
us.

### Install py-spy

``` bash
python3 -m pip install py-spy
```

### Record executed code

As py-spy is installed, we now record the executed code lines. This tool
will record, multiple times a second, the stacktrace of the process.

``` bash
# record to raw file
py-spy record -o profile.json -f speedscope --pid <PID>

# OR record directly to svg
py-spy record -o profile.svg --pid <PID>
```

where \<PID\> is the process ID of the odoo process you want to graph.

To open profile.json you can use online tool
[speedscope.app](https://www.speedscope.app/).

To open profile.svg you should use browser, because other viewer may not
support interactive part.

![image](profilecode/flamegraph.svg)


---
## File: ./content/developer/howtos/company.md

# Multi-company Guidelines

<div class="warning">

<div class="title">

Warning

</div>

This tutorial requires good knowledge of Odoo. Please refer to the
`basic tutorial <howto/base>` first if needed.

</div>

As of version 13.0, a user can be logged in multiple companies at once.
This allows the user to access information from multiple companies but
also to create/edit records in a multi-company environment.

If not handled correctly, it may be the source of a lot of inconsistent
multi-company behaviors. For instance, a user logged in both companies A
and B could create a sales order in company A and add products belonging
to company B to it. It is only when the user will log out from company B
that access errors will occur for the sales order.

To correctly manage multi-company behaviors, Odoo's ORM provides
multiple features:

  - `Company-dependent fields <howto/company/company_dependent>`
  - `Multi-company consistency <howto/company/check_company>`
  - `Default company <howto/company/default_company>`
  - `Views <howto/company/views>`
  - `Security rules <howto/company/security>`

## Company-dependent fields

When a record is available from multiple companies, we must expect that
different values will be assigned to a given field depending on the
company from which the value is set.

For the field of a same record to support several values, it must be
defined with the attribute
<span class="title-ref">company\_dependent</span> set to
<span class="title-ref">True</span>.

``` python
from odoo import api, fields, models

class Record(models.Model):
    _name = 'record.public'

    info = fields.Text()
    company_info = fields.Text(company_dependent=True)
    display_info = fields.Text(string='Infos', compute='_compute_display_info')

    @api.depends_context('company')
    def _compute_display_info(self):
        for record in self:
            record.display_info = record.info + record.company_info
```

<div class="note">

<div class="title">

Note

</div>

The <span class="title-ref">\_compute\_display\_info</span> method is
decorated with
<span class="title-ref">depends\_context('company')</span> (see
`~odoo.api.depends_context`) to ensure that the computed field is
recomputed depending on the current company
(<span class="title-ref">self.env.company</span>).

</div>

When a company-dependent field is read, the current company is used to
retrieve its value. In other words, if a user is logged in companies A
and B with A as main company and creates a record for company B, the
values of company-dependent fields will be that of company A.

To read the values of company-dependent fields set from another company
than the current one, we need to ensure the company we are using is the
correct one. This can be done with `~odoo.models.Model.with_company`,
which updates the current company.

``` python
# Accessed as main company (self.env.company)
val = record.company_dependent_field

# Accessed as desired company (company_B)
val = record.with_company(company_B).company_dependent_field
# record.with_company(company_B).env.company == company_B
```

<div class="warning">

<div class="title">

Warning

</div>

Whenever you are computing/creating/... things that may behave
differently in different companies, you should make sure whatever you
are doing is done in the right company. It doesn't cost much to always
use <span class="title-ref">with\_company</span> to avoid problems later
on.

``` python
@api.onchange('field_name')
def _onchange_field_name(self):
 self = self.with_company(self.company_id)
 ...

@api.depends('field_2')
def _compute_field_3(self):
 for record in self:
   record = record.with_company(record.company_id)
   ...
```

</div>

## Multi-company consistency

When a record is made shareable between several companies by the mean of
a <span class="title-ref">company\_id</span> field, we must take care
that it cannot be linked to the record of another company through a
relational field. For instance, we do not want to have a sales order and
its invoice belonging to different companies.

To ensure this multi-company consistency, you must:

  - Set the class attribute
    <span class="title-ref">\_check\_company\_auto</span> to
    <span class="title-ref">True</span>.
  - Define relational fields with the attribute
    <span class="title-ref">check\_company</span> set to
    <span class="title-ref">True</span> if their model has a
    <span class="title-ref">company\_id</span> field.

On each `~odoo.models.Model.create` and `~odoo.models.Model.write`,
automatic checks will be triggered to ensure the multi-company
consistency of the record.

``` python
from odoo import fields, models

class Record(models.Model):
    _name = 'record.shareable'
    _check_company_auto = True

    company_id = fields.Many2one('res.company')
    other_record_id = fields.Many2one('other.record', check_company=True)
```

<div class="note">

<div class="title">

Note

</div>

The field <span class="title-ref">company\_id</span> must not be defined
with <span class="title-ref">check\_company=True</span>.

</div>

<div class="currentmodule">

odoo.models

</div>

<div class="automethod">

Model.\_check\_company

</div>

<div class="warning">

<div class="title">

Warning

</div>

The <span class="title-ref">check\_company</span> feature performs a
strict check \! It means that if a record has no
<span class="title-ref">company\_id</span> (i.e. the field is not
required), it cannot be linked to a record whose
<span class="title-ref">company\_id</span> is set.

</div>

<div class="note">

<div class="title">

Note

</div>

When no domain is defined on the field and
<span class="title-ref">check\_company</span> is set to
<span class="title-ref">True</span>, a default domain is added:
<span class="title-ref">\['|', '('company\_id', '=', False),
('company\_id', '=', company\_id)\]</span>

</div>

## Default company

When the field <span class="title-ref">company\_id</span> is made
required on a model, a good practice is to set a default company. It
eases the setup flow for the user or even guarantees its validity when
the company is hidden from the view. Indeed, the company is usually
hidden if the user does not have access to multiple companies (i.e. when
the user does not have the group
<span class="title-ref">base.group\_multi\_company</span>).

``` python
from odoo import api, fields, models

class Record(models.Model):
    _name = 'record.restricted'
    _check_company_auto = True

    company_id = fields.Many2one(
        'res.company', required=True, default=lambda self: self.env.company
    )
    other_record_id = fields.Many2one('other.record', check_company=True)
```

## Views

As stated in `above <howto/company/default_company>`, the company is
usually hidden from the view if the user does not have access to
multiple companies. This is tested with the group
<span class="title-ref">base.group\_multi\_company</span>.

``` xml
<record model="ir.ui.view" id="record_form_view">
    <field name="name">record.restricted.form</field>
    <field name="model">record.restricted</field>
    <field name="arch" type="xml">
        <form>
            <sheet>
                <group>
                    <group>
                        <field name="company_id" groups="base.group_multi_company"/>
                        <field name="other_record_id"/>
                    </group>
                </group>
            </sheet>
        </form>
    </field>
</record>
```

## Security rules

When working with records shared across companies or restricted to a
single company, we must take care that a user does not have access to
records belonging to other companies.

This is achieved with security rules based on
<span class="title-ref">company\_ids</span>, which contains the current
companies of the user (the companies the user checked in the
multi-company widget).

``` xml
<!-- Shareable Records -->
<record model="ir.rule" id="record_shared_company_rule">
    <field name="name">Shared Record: multi-company</field>
    <field name="model_id" ref="model_record_shared"/>
    <field name="global" eval="True"/>
    <field name="domain_force">
        ['|', ('company_id', '=', False), ('company_id', 'in', company_ids)]
    </field>
</record>
```

``` xml
<!-- Company-restricted Records -->
<record model="ir.rule" id="record_restricted_company_rule">
    <field name="name">Restricted Record: multi-company</field>
    <field name="model_id" ref="model_record_restricted"/>
    <field name="global" eval="True"/>
    <field name="domain_force">
        [('company_id', 'in', company_ids)]
    </field>
</record>
```

<div class="todo">

check\_company on company\_dependent fields.

</div>


---
## File: ./content/developer/howtos/themes.md

  - orphan

# Theme Tutorial

<div class="warning">

<div class="title">

Warning

</div>

This tutorial is outdated and won't work out of the box.

</div>

<div class="rst-class">

lead

</div>

Odoo celebrates freedom. Freedom for the designer to go further and
freedom for the user to customize everything according to their needs.

Ready to create your own theme? Great. Here are some things you should
know before you begin. This tutorial is a guide to creating an Odoo
theme.

![image](themes/Intro.jpg)

## An introduction for web designers

If you are a web designer using Odoo for the first time, you are in the
right place. This introduction will outline the basics of Odoo theme
creation. Odoo’s team has created a framework that’s powerful and easy
to use.

### From common CMS to Odoo

<div class="note">

<div class="title">

Note

</div>

If you always think and work in the same way, you’ll probably get the
same results. If you want something completely new, then try something
different.

</div>

**Where is my header.php file?**

This is usually the first question from a web designer used to working
with Wordpress or Joomla and coming to Odoo for the first time.

<div class="container row">

<div class="container col-sm-4">

![image](themes/cms.jpg)

</div>

<div class="container col-sm-7">

Indeed, when using common CMSs, you have to code several files (like
header.php, page.php, post.php, etc.) in order to create a basic
structure for your website. With those systems, this base structure acts
as a design foundation that you have to update over time to ensure
compatibility within your CMS. So, even after you have spent hours
coding the files, you have not even started on the design yet.

This **does not** apply to creating Odoo themes.

</div>

</div>

<div class="note">

<div class="title">

Note

</div>

We think that theme design should be simple (and powerful). When we
created our Website Builder, we decided to start from scratch instead of
relying on what already existed. This approach gave us the freedom to
focus on the things that are really important for designers: styles,
content and the logic behind them. No more struggling with technical
stuff.

</div>

### Odoo default theme structure

<div class="container row">

<div class="container col-sm-8">

Odoo comes with a default website structure. It is a very basic “theme”
that provides minimal structure and layout. When you create a new theme,
you are actually **extending** this. Indeed it’s always enabled in your
setup and it acts exactly like the CMS’s base structure we mentioned
above, except that you don’t have to create or maintain it. It will
upgrade automatically within your Odoo installation and, since it is
included in the Website Builder module, everything is smoothly
integrated by default.

As a result, you are totally free to focus on design while this
structure does the job of providing integrations and functionality.

</div>

<div class="container col-sm-4">

![image](themes/def_structure.jpg)

</div>

</div>

<div class="container row">

<div class="container col-md-6">

**Main features:**

  - Basic layouts for pages, blog, eCommerce and much more
  - Website Builder integration
  - Basic Snippets
  - Automatic Sass compiling
  - Automatic Js and CSS minification and combination

</div>

<div class="container col-md-6">

**Main technologies:**

  - Twitter Bootstrap
  - jQuery
  - jQuery UI
  - underscore.js

</div>

</div>

## Thinking "modular"

An Odoo theme is not a folder containing HTML or PHP files, it’s a
modular framework written in XML. Never worked with XML files before?
Don’t worry, after following the tutorial, you’ll be able to create your
first theme with only basic knowledge of HTML.

Using classical web design workflows, you usually code the layout of the
entire page. The result of this is a “static” web page. You can update
the content, of course, but your client will need you to work on making
even basic changes.

Creating themes for Odoo is a total change of perspective. Instead of
defining the complete layout for a page, you can create blocks
(snippets) and let the user choose where to “drag\&drop” them, creating
the page layout on their own. We call this modular design.

Imagine an Odoo theme as a “list” of elements and options that you have
to create or extend. As a designer, your goal is to style these elements
in order to achieve a wonderful result, regardless of where the end user
chooses to place them.

Let’s take a tour of our “list” elements:

<div class="container row">

![Snippets (or building-blocks)](themes/snippet.jpg)

A piece of HTML code. The user will drag\&drop, modify and combine them
using our built-in Website Builder interface. You can define sets of
options and styles for each snippet. The user will choose from them
according to their needs.

![Pages](themes/page.jpg)

These are normal web pages, except that they will be editable by the
final user and that you can define an empty area that the user can
“fill” by dragging snippets into it.

</div>

<div class="clearfix themes"></div>

<div class="container row">

![Styles](themes/styles.jpg)

Styles are defined using SCSS files (or you can use standard CSS files).
You can define a style as **default** or **optional**. The default
styles are always active in your theme, the optional styles can be
enabled or disabled by the user.

![Functionalities](themes/functionalities.jpg)

Thanks to Odoo’s modularity, everything can be personalized even more.
This means there are endless possibilities for your creativity. Adding
functionalities is easy and it’s simple to provide the end user with
customizable options.

</div>

### Odoo's XML files, an overview

Any Odoo XML file starts with encoding specifications. After that, you
have to write your code inside a `<odoo>` tag.

``` xml
[XML]
<?xml version="1.0" encoding="utf-8" ?>
<odoo>
  
    ## YOUR CODE HERE
  
</odoo>
```

Almost every element and option that you create has to be placed inside
a `<template>` tag, like in this example.

``` xml
[XML]
<template id="my_title" name="My title">
  <h1>This is an HTML block</h1>
  <h2 class="lead">And this is a subtitle</h2>
</template>
```

<div class="important">

<div class="title">

Important

</div>

don't misunderstand what `template` means. A template tag only defines a
piece of html code or options - but it does not necessarily coincide
with a visual arrangement of elements.

</div>

The previous code defines a title, but it will not be displayed anywhere
because that *template* is not associated with any part of the **Odoo
default structure**. In order to do that you can use **xpath**, **qWeb**
or a combination of both.

Keep reading the tutorial to learn to how properly extend it with your
own code.

## Create a theme module

Odoo’s themes are packaged like modules. Even if you are designing a
very simple website for your company or client, you need to package the
theme like an Odoo module.

  - `main folder`  
    Create a folder and name it like this: `theme_` followed by your
    theme's name.

  - `__manifest__.py`  
    Create an empty document and save it to your folder as
    `__manifest__.py`. This will contain the configuration info for your
    theme.

  - `__init__.py`  
    Create another empty file and name it `__init__.py`. It's a
    mandatory system file. Create and leave it blank.

  - `views` and `static` folders  
    Create them in the main folder. In `views` you'll place your xml
    files that define your snippets, your pages and your options.
    `static` folder is the right place for your style , images and
    custom js code.

<div class="important">

<div class="title">

Important

</div>

Use two underscore characters at the beginning and two at the end of
odoo and init file names.

</div>

The final result should be like this:

![image](themes/theme_folder.jpg)

### Edit `__manifest__.py`

Open the `__manifest__.py` you created and copy/paste the following:

``` python
{
    'name': 'Tutorial theme',
    'description': 'A description for your theme.',
    'version': '1.0',
    'author': 'Your name',
    'category': 'Theme/Creative',

    'depends': ['website', 'website_theme_install'],
    'data': [
    ],
}
```

Replace the first four property’s values with anything you like. These
values will be used to identify your new theme in Odoo’s backend.

`category` defines your module category (always “Theme”) and, after a
slash, the subcategory. You can use one subcategory from the Odoo Apps
categories list. (<https://www.odoo.com/apps/themes>)

`depends` specifies the modules needed by our theme to work properly.
For our tutorial theme, we only need website and website\_theme\_install
to install/update. If you need blogging or eCommerce features as well,
you have to add those modules too. If you plan to offer your theme to
the majority of users, it is however recommended that you only depend on
website and website\_theme\_install for the base of your theme. You can
then create a second theme, which is an extension of the first one and
another Odoo feature like the eCommerce.

``` python
'depends': ['theme_tutorial', 'website_sale'],
```

The `data` property will contain the xml files list. Right now it’s
empty, but we will add any new files created.

### Installing your theme

To install your theme, you just place your theme folder inside addons in
your Odoo installation.

After that, navigate to the Odoo **Website** module, go to
`Configuration --> Settings`.

Under **Website** section click the **Pick a Theme** button, then hover
over your theme and click **Use this theme**.

### Update your theme

Since XML files are only loaded when you install the theme, you will
have to force reloading every time you make changes on an xml file.

To do that, click on the Upgrade button in the theme selection screen.

![image](themes/restart.png)

## Structure of an Odoo page

An Odoo page is the visual result of a combination of 2 kind of
elements, **cross-pages** and **unique**. By default, Odoo provides you
with a **Header** and a **Footer** (cross-pages) and a unique main
element that contains the content that makes your page unique.

<div class="note">

<div class="title">

Note

</div>

Cross-pages elements will be the same on every page. Unique elements are
related to a specific page only.

</div>

![image](themes/page_structure.jpg)

To inspect the default layout, simply create a new page using the
Website Builder. Click on `New --> New Page` and add a page name.
Inspect the page using your browser.

``` html
<div id=“wrapwrap”>
    <header/>
    <main/>
    <footer/>
</div>
```

## Add Styles

### Introduction

The most important feature or your theme should be the style it
provides. Odoo includes Bootstrap by default. This means that you can
take advantage of all Bootstrap styles and layout functionalities out of
the box.

Of course Bootstrap is not enough if you want to provide a unique
design. The following steps will guide you through how to add custom
styles to your theme. The final result won't be pretty, but will provide
you with enough information to build upon on your own.

Let’s start by creating an empty file called **style.scss** and place it
in a folder called **scss** in your static folder. Let's add an example
rule which adds a top border on the footer. Copy and paste it, then save
the file.

``` scss
footer {
    border-top: 5px solid theme-color('primary');
}
```

Our file is ready but it is not included in our theme yet.

Let’s navigate to the view folder and create an XML file called
*assets.xml*. Add the default Odoo xml markup as seen before then
copy/paste the following code between the Odoo tags. Remember to replace
`theme_tutorial` with your theme’s main folder name.

``` xml
<template id="assets_frontend" name="My style" inherit_id="website.assets_frontend">
    <xpath expr="link[last()]" position="after">
        <link rel="stylesheet" type="text/scss" href="/theme_tutorial/static/scss/style.scss"/>
    </xpath>
</template>
```

We just created a template specifying our scss file. As you can see, our
template has a special attribute called `inherit_id`. This attribute
tells Odoo that our template is referring to another one in order to
operate.

In this case, we are referring to `assets_frontend` template, located in
the `website` module. `assets_frontend` specifies the list of assets
loaded by the website builder and our goal is to add our scss file to
this list.

This can be achieved using xpath with the attributes
`expr="link[last()]"` and `position="after"`, which means "*take my
style file and place it after the last link in the list of assets*".

Placing it after the last one, we ensure that our file will be loaded at
the end and takes priority.

Finally add **assets.xml** in your **\_\_manifest\_\_.py** file in the
data section.

Update your theme.

![image](themes/restart.png)

Our scss file is now included in our theme, it will be automatically
compiled, minified and combined with all Odoo’s assets.

You can now see the beautiful footer border on the website.

### Advanced tips for styling

In the introduction, we saw how to add a basic file of CSS rules into
the system to extend the website. This is actually the last step you
should need to add style to your theme.

The Odoo website builder already allows the user to create pages by
adding a large variety of default well-designed blocks. It also allows a
large set of customization possibilities. What may not be
straightforward for the user is to combine all of those options to make
something really beautiful. This is where your theme can shine. First
try to construct the spirit of your theme by enabling a nice set of Odoo
default options. This also allows you to ensure two things:

  - You do not re-invent something which already exists. If Odoo
    provides an option to have a border on the footer, don't recode it
    yourself. Enable it, then extend it if needed.
  - You ensure that the user can still use all of Odoo features with
    your theme. Again, if Odoo provides an option to have a border on
    the footer and that you recode it yourself, you may break the
    default option or make it useless, making the user have a bad
    experience. Your option might also not work as well with all the
    other Odoo features relying on it.

So here are the steps to create a robust and consistent style for your
theme:

(1) Set the values for Odoo-provided SCSS variables

Odoo declares many CSS rules, most being entirely customizable by
overriding the related SCSS variables. First, create a new file called
primary\_variables.scss and add it the same way as the style.scss file.
The only difference it that you won't add it in the `assets_frontend`
template but in the `_assets_primary_variables` template.

``` xml
<template id="_assets_primary_variables" name="My SCSS variables" inherit_id="website._assets_primary_variables">
    <xpath expr="link[last()]" position="after">
        <link rel="stylesheet" type="text/scss" href="/theme_tutorial/static/scss/primary_variables.scss"/>
    </xpath>
</template>
```

<div class="important">

<div class="title">

Important

</div>

That file must only contain definition and overrides of SCSS variables
and mixins.

</div>

Add those:

``` scss
$o-color-palettes: (
    (
        'o-color-1': #85AFA8,
        'o-color-2': #7E566B,
        'o-color-3': #85909A,
        'o-color-4': #969397,
        'o-color-5': #422335,
    ),
    (
        'o-color-1': #54787D,
        'o-color-2': #6B9997,
        'o-color-3': #615145,
        'o-color-4': #C6CCA5,
        'o-color-5': #412342,
    ),
);
```

This defines two color palettes for the user to choose from. Odoo relies
on five named colors to be used by the website builder. By defining
those in your theme, you ensure a consistent colored Odoo theme.
Starting with Odoo 14.0, a lot more variable are there for you to
customize.

<div class="note">

<div class="title">

Note

</div>

All variables defined through those "palettes" SCSS maps can later be
customized by the users themselves.

</div>

(2) Set the values for Bootstrap variables that Odoo do not surcharge

If Odoo does not provide the variable you are looking for, then try to
find a Bootstrap variable which allows it. Indeed all Odoo layouts
respect Bootstrap structures and use Bootstrap components or extensions
of them. So if you customize a bootstrap variable, you add a generic
style for the whole user website.

Bootstrap values **must** not be overridden in the
primary\_variables.scss file but in another dedicated file, extending
the `_assets_frontend_helpers` template.

``` xml
<template id="_assets_frontend_helpers" inherit_id="website._assets_frontend_helpers">
    <xpath expr="//link[last()]" position="after">
        <link rel="stylesheet" type="text/scss" href="/theme_tutorial/static/src/scss/bootstrap_overridden.scss"/>
    </xpath>
</template>
```

With for example:

``` scss
$dropdown-min-width: 200px;
```

<div class="important">

<div class="title">

Important

</div>

Make sure to not override Bootstrap variables which depend on Odoo
variables of step (1). Otherwise, you might break the possibility for
the user to customize them using the Odoo website builder.

</div>

(3) Add your own CSS rules as seen in the introduction

You may also want to design your snippet first, as we will see in a
later section of this tutorial.

## Extend Odoo Layout

By default, Odoo header contains a responsive navigation menu and the
company’s logo. You can easily add new elements or style the existing
one.

To do so, create a **layout.xml** file in your **views** folder and add
the default Odoo xml markup.

Then copy-pasting the following code.

``` xml
<!-- Customize post-header  -->
<template id="custom_message" inherit_id="website.layout" name="Custom Header">
  <!-- Add an element after the top menu  -->
  <xpath expr="//div[@id='wrapwrap']/main" position="before">
    <div class="container">
      <div class="alert alert-info mt16" role="alert">
        <strong>Welcome</strong> in our website!
      </div>
    </div>
  </xpath>
</template>
```

This xpath will add a welcome message just before the page content. You
can do a lot more of thing with xpath and qweb, check the related doc
for more details.

<div class="warning">

<div class="title">

Warning

</div>

Be careful replacing default elements attributes. As your theme will
extend the default one, your changes will take priority in any future
Odoo’s update.

</div>

The last step is to add layout.xml to the list of xml files used by the
theme. To do that, edit your `__manifest__.py` file like this

``` python
'data': [ 'views/layout.xml' ],
```

Update your theme

![image](themes/restart.png)

Great\! We successfully added an id to the header and an element after
the navigation menu. These changes will be applied to each page of the
website.

![image](themes/after-menu.png)

## Create a specific page layout

Imagine that we want to create a specific layout for a Services page.
For this page, we need to add a list of services to the top and give the
client the possibility of setting the rest of the page’s layout using
snippets.

Inside your *views* folder, create a **pages.xml** file and add the
default Odoo markup. Inside `<odoo>`, instead of defining a
`<template>`, we will create a *page* object.

``` xml
<?xml version="1.0" encoding="utf-8" ?>
<odoo>

     <!-- === Services Page === -->
     <record id="services_page" model="website.page">
         <field name="name">Services page</field>
         <field name="website_published">True</field>
         <field name="url">/services</field>
         <field name="type">qweb</field>
         <field name="key">theme_tutorial.services_page</field>
         <field name="arch" type="xml">
             <t t-name="theme_tutorial.services_page_template">
                 <h1>Our Services</h1>
                 <ul class="services">
                     <li>Cloud Hosting</li>
                     <li>Support</li>
                     <li>Unlimited space</li>
                 </ul>
             </t>
         </field>
     </record>

 </odoo>
```

As you can see, pages come with many additional properties like the
*name* or the *url* where it is reachable.

We successfully created a new page layout, but we haven't told the
system **how to use it**. To do that, we can use **QWeb**. Wrap the html
code into a `<t>` tag, like in this example.

``` xml
<!-- === Services Page === -->
<record id="services_page" model="website.page">
    <field name="name">Services page</field>
    <field name="website_published">True</field>
    <field name="url">/services</field>
    <field name="type">qweb</field>
    <field name="key">theme_tutorial.services_page</field>
    <field name="arch" type="xml">
        <t t-name="theme_tutorial.services_page_template">
            <t t-call="website.layout">
                <div id="wrap">
                    <div class="container">
                        <h1>Our Services</h1>
                        <ul class="services">
                            <li>Cloud Hosting</li>
                            <li>Support</li>
                            <li>Unlimited space</li>
                        </ul>
                    </div>
                </div>
            </t>
        </t>
    </field>
</record>
```

Using `<t t-call="website.layout">` we will use the Odoo default page
layout with our code.

As you can see, we wrapped our code into two `<div>`, one with ID `wrap`
and the other one with class `container`. This is to provide a minimal
layout.

The next step is to add an empty area that the user can fill with
snippets. To achieve this, just create a `div` with `oe_structure` class
just before closing the `div#wrap` element.

``` xml
<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <!-- === Services Page === -->
    <record id="services_page" model="website.page">
        <field name="name">Services page</field>
        <field name="website_published">True</field>
        <field name="url">/services</field>
        <field name="type">qweb</field>
        <field name="key">theme_tutorial.services_page</field>
        <field name="arch" type="xml">
            <t t-name="theme_tutorial.services_page_template">
                <t t-call="website.layout">
                    <div id="wrap">
                        <div class="container">
                            <h1>Our Services</h1>
                            <ul class="services">
                                <li>Cloud Hosting</li>
                                <li>Support</li>
                                <li>Unlimited space</li>
                            </ul>
                        </div>
                        <!-- === Snippets' area === -->
                        <div class="oe_structure" />
                    </div>
                </t>
            </t>
        </field>
    </record>

</odoo>
```

<div class="tip">

<div class="title">

Tip

</div>

You can create as many snippet areas as you like and place them anywhere
in your pages.

</div>

It is worth mentioning there is an alternative to create pages using the
`<template>` directive we saw before.

``` xml
<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <!-- === Services Page === -->
    <template id="services_page_template">
        <t t-call="website.layout">
            <div id="wrap">
                <div class="container">
                    <h1>Our Services</h1>
                    <ul class="services">
                        <li>Cloud Hosting</li>
                        <li>Support</li>
                        <li>Unlimited space</li>
                    </ul>

                    <!-- === Snippets' area === -->
                    <div class="oe_structure" />
                </div>
            </div>
        </t>
    </template>
    <record id="services_page" model="website.page">
        <field name="name">Services page</field>
        <field name="website_published">True</field>
        <field name="url">/services</field>
        <field name="view_id" ref="services_page_template"/>
    </record>

</odoo>
```

This would allow your page content to be further customized using
`<xpath>`.

Our page is almost ready. Now all we have to do is add **pages.xml** in
our **\_\_manifest\_\_.py** file

``` python
'data': [
  'views/layout.xml',
  'views/pages.xml'
],
```

Update your theme

![image](themes/restart.png)

Great, our Services page is ready and you’ll be able to access it by
navigating to `<yourwebsite>/services` (the URL we chose above).

You will notice that it's possible to drag/drop snippets underneath the
*Our Services* list.

![image](themes/services_page_nostyle.png)

Now let's go back to our *pages.xml* and, after our page template,
copy/paste the following code.

``` xml
<record id="services_page_link" model="website.menu">
  <field name="name">Services</field>
  <field name="page_id" ref="services_page"/>
  <field name="parent_id" ref="website.main_menu" />
  <field name="sequence" type="int">99</field>
</record>
```

This code will add a link to the main menu, referring to the page we
created.

![image](themes/services_page_menu.png)

The **sequence** attribute defines the link’s position in the top menu.
In our example, we set the value to `99` in order to place it last. I
you want to place it in a particular position, you have to replace the
value according to your needs.

As you can see inspecting the *data.xml* file in the `website` module,
the **Home** link is set to `10` and the **Contact** us one is set to
`60` by default. If, for example, you want to place your link in the
**middle**, you can set your link’s sequence value to `40`.

## Create Snippets

Since snippets are how users design and layout pages, they are the most
important XML elements of your design. Let’s create a snippet for our
Service page. The snippet will display three testimonials and it will be
editable by the end user using the Website Builder UI. Navigate to the
view folder and create an XML file called **snippets.xml**. Add the
default Odoo xml markup and copy/paste the following code. The template
contains the HTML markup that will be displayed by the snippet.

``` xml
<template id="s_testimonial" name="Testimonial snippet">
    <section class="s_testimonial">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 text-center">
                    <img alt="client" class="rounded-circle" src="/theme_tutorial/static/src/img/client_1.jpg"/>
                    <h3>Client Name</h3>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                </div>
                <div class="col-lg-4 text-center">
                    <img alt="client" class="rounded-circle" src="/theme_tutorial/static/src/img/client_2.jpg"/>
                    <h3>Client Name</h3>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                </div>
                <div class="col-lg-4 text-center">
                    <img alt="client" class="rounded-circle" src="/theme_tutorial/static/src/img/client_3.jpg"/>
                    <h3>Client Name</h3>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                </div>
            </div>
        </div>
    </section>
</template>
```

As you can see, we used Bootstrap default classes for our three columns.
It’s not just about layout, these classes **will be triggered by the
Website Builder to make them resizable by the user**.

The previous code will create the snippet’s content, but we still need
to place it into the editor bar, so the user will be able to drag\&drop
it into the page. Copy/paste this template in your **snippets.xml**
file.

``` xml
<template id="place_into_bar" inherit_id="website.snippets" name="Place into bar">
    <xpath expr="//div[@id='snippet_structure']/div[hasclass('o_panel_body')]" position="inside">
        <t t-snippet="theme_tutorial.s_testimonial"
                t-thumbnail="/theme_tutorial/static/src/img/ui/snippet_thumb.jpg"/>
    </xpath>
</template>
```

<div class="rst-class">

col-sm-6

</div>

Using xpath, we are targeting a particular element with id
`snippet_structure`. This means that the snippet will appear in the
Structure tab. If you want to change the destination tab, you have just
to replace the `id` value in the xpath expression.

![image](themes/snippet_bar.png)

| Tab Name  | Xpath expression                 |
| --------- | -------------------------------- |
| Structure | `//div[@id='snippet_structure']` |
| Content   | `//div[@id='snippet_content']`   |
| Feature   | `//div[@id='snippet_feature']`   |
| Effect    | `//div[@id='snippet_effect']`    |

The `<t>` tag will call our snippet's template and will assign a
thumbnail placed in the img folder. You can now drag your snippet from
the snippet bar, drop it in your page and see the result.

![image](themes/snippet_default.png)

## Snippet options

Options allow publishers to edit a snippet’s appearance using the
Website Builder’s UI. Using Website Builder functionalities, you can
create snippet options easily and automatically add them to the UI.

### Options group properties

Options are wrapped in groups. Groups can have properties that define
how the included options will interact with the user interface.

  - `data-selector="[css selector(s)]"`  
    Bind all the options included into the group to a particular
    element.

  - `data-js=" custom method name "`  
    Is used to bind custom Javascript methods.

  - `data-drop-in="[css selector(s)]"`  
    Defines the list of elements where the snippet can be dropped into.

  - `data-drop-near="[css selector(s)]"`  
    Defines the list of elements that the snippet can be dropped beside.

### Default option methods

Options apply standard CSS classes to the snippet. Depending on the
method that you choose, the UI will behave differently.

  - `data-select-class="[class name]"`  
    More data-select-class in the same group defines a list of classes
    that the user can choose to apply. Only one option can be enabled at
    a time.

  - `data-toggle-class="[class name]"`  
    The data-toggle-class is used to apply one or more CSS classes from
    the list to a snippet. Multiple selections can be applied at once.

Let's demonstrate how default options work with a basic example.

We start by adding a new file in our views folder - name it
**options.xml** and add the default Odoo XML markup. Create a new
template copy/pasting the following

``` xml
<template id="snippet_testimonial_opt" name="Snippet Testimonial Options" inherit_id="website.snippet_options">
    <xpath expr="//div[@data-js='Box']" position="after">
        <div data-selector=".s_testimonial"> <!-- Options group -->
            <div class="dropdown-submenu">
                <a href="#" class="dropdown-item">Your Option</a>
                <div class="dropdown-menu"><!-- Options list -->
                    <a href="#" class="dropdown-item" data-select-class="opt_shadow">Shadow Images</a>
                    <a href="#" class="dropdown-item" data-select-class="opt_grey_bg">Grey Bg</a>
                    <a href="#" class="dropdown-item" data-select-class="">None</a>
                </div>
            </div>
        </div>
    </xpath>
</template>
```

<div class="note">

<div class="title">

Note

</div>

The previous template will inherit the default **snippet\_options
template** adding our options after the **background** options (xpath
expr attribute). To place your options in a particular order, inspect
the **snippet\_options template** from the **website module** and add
your options before/after the desired position.

</div>

As you can see, we wrapped all our options inside a DIV tag that will
group our options and that will target them to the right selector
(`data-selector=".s_testimonial"`).

To define our options we applied `data-select-class` attributes to the
`li` elements. When the user selects an option, the class contained in
the attribute will automatically be applied to the element.

Since `selectClass` method avoids multiple selections, the last "empty"
option will reset the snippet to default.

Add **options.xml** to `__manifest__.py` and update your theme.

![image](themes/restart.png)

Dropping our snippet onto the page, you will notice that our new options
are automatically added to the customize menu. Inspecting the page, you
will also notice that the class will be applied to the element when
selecting an option.

![image](themes/snippet_options.png)

Let’s create some css rules in order to provide a visual feedback for
our options. Open our **style.scss** file and add the following

``` scss
// These lines will add a default style for our snippet. Now let's create our custom rules for the options.

.s_testimonial {
    border: 1px solid #EAEAEA;
    padding: 20px;

    &.s_testimonial_shadow img {
        box-shadow: 0 2px 5px rgba(51, 51, 51, 0.4);
    }
    &.s_testimonial_grey_bg {
        border: none;
        background-color: #EAEAEA;
    }
}
```

![image](themes/snippet_options2.png)

Great\! We successfully created options for our snippet.

Any time the publisher clicks on an option, the system will add the
class specified in the data-select-class attribute.

By replacing `data-select-class` with `data-toggle-class` you will be
able to select more classes at the same time.

### Javascript Options

`data-select-class` and `data-toggle-class` are great if you need to
perform simple class change operations. But what if your snippet’s
customization needs something more?

As we said before, `data-js` propriety can be assigned to an options
group in order to define a custom method. Let’s create one for our
*testimonials snippet* by adding a `data-js` attribute to the option’s
group div that we created earlier.

``` xml
<div data-js="s_testimonial_options" data-selector=".s_testimonial">
    <!-- ... -->
</div>
```

Done. From now on, the Website Builder will look for a
`s_testimonial_options` JS option each time the publisher enters in edit
mode.

Let's go one step further by creating a javascript file, name it
**tutorial\_editor.js** and place it into the **static** folder.
Copy/paste the following code

``` javascript
odoo.define('theme_tutorial.s_testimonial_options', function (require) {
    var options = require('web_editor.snippets.options');
});
```

Great, we successfully created our javascript editor file. This file
will contain all the javascript functions used by our snippets in edit
mode. Let’s create a new function for our testimonial snippet using the
`s_testimonial_options` name that we used before.

``` javascript
odoo.define('theme_tutorial.s_testimonial_options', function (require) {
    var options = require('web_editor.snippets.options');
    options.registry.s_testimonial_options = options.Class.extend({
        onFocus: function () {
            alert("On focus!")
        },
    });
});
```

As you will notice, we used a method called `onFocus` to trigger our
function. The Website Builder provides several events you can use to
trigger your custom functions.

| Event          | Description                                                                                                                                        |
| -------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| `start`        | Fires when the publisher selects the snippet for the first time in an editing session or when the snippet is drag-dropped into the page            |
| `onFocus`      | Fires each time the snippet is selected by the user or when the snippet is drag-dropped into the page.                                             |
| `onBlur`       | This event occurs when a snippet loses focus.                                                                                                      |
| `onClone`      | Fires just after a snippet is duplicated.                                                                                                          |
| `onRemove`     | It occurs just before that the snippet is removed.                                                                                                 |
| `onBuilt`      | Fires just after that the snippet is drag and dropped into a drop zone. When this event is triggered, the content is already inserted in the page. |
| `cleanForSave` | It trigger before the publisher saves the page.                                                                                                    |

Let’s add our new javascript files to the editor assets list. Go back to
**assets.xml** and create a new template like the previous one. This
time we have to inherit `assets_editor` instead of `assets_frontend`.

``` xml
<template id="my_js" inherit_id="website.assets_editor" name="My Js">
    <xpath expr="script[last()]" position="after">
        <script type="text/javascript" src="/theme_tutorial/static/src/js/tutorial_editor.js" />
    </xpath>
</template>
```

Update your theme

![image](themes/restart.png)

Let’s test our new javascript function. Enter in Edit mode and drop into
the page. You should now see the javascript alert that we bound on the
`onFocus` event. If you close it, then click outside of your snippet and
then click in it again, the event will trigger again.

![image](themes/snippet_custom_method.png)

## Editing Reference Guide

Basically all the elements in a page can be edited by the publisher.
Besides that, some element types and css classes will trigger special
Website Builder functionalities when edited.

### Layout

  - `<section />`  
    Any section element can be edited like a block of content. The
    publisher can move or duplicate it. It’s also possible to set a
    background image or color. Section is the standard main container of
    any snippet.

  - `.row > .col-lg-*`  
    Any large bootstrap columns directly descending from a .row element
    (respecting Bootstrap structure), will be resizable by the
    publisher.

  - `contenteditable="False"`  
    This attribute will prevent editing to the element and all its
    children.

  - `contenteditable="True"`  
    Apply it to an element inside a contenteditable="False" element in
    order to create an exception and make the element and its children
    editable.

  - `<a href=”#” />`  
    In Edit Mode, any link can be edited and styled. Using the “Link
    Modal” it’s also possible to replace it with a button.

### Media

  - `<span class=”fa” />`  
    Pictogram elements. Editing this element will open the Pictogram
    library to replace the icon. It’s also possible to transform the
    elements using CSS.

  - `<img />`  
    Once clicked, the Image Library will open and you can replace
    images. Transformation is also possible for this kind of element.

<!-- end list -->

``` html
<div class="media_iframe_video" data-src="[your url]" >
    <div class="css_editable_mode_display"/>
    <div class="media_iframe_video_size"/>
    <iframe src="[your url]"/>
</div>
```

This html structure will create an `<iframe>` element editable by the
publisher.

## SEO best practice

### Facilitate content insertion

Modern search engine algorithms increasingly focus on content, which
means there is less focus on **keyword saturation** and more focus on
whether or not the content is **actually relevant to the keywords**.

As content is so important for SEO, you should concentrate on giving
publishers the tools to easily insert it. It is important that your
snippets are “content-responsive”, meaning that they should fit the
publisher’s content regardless of size.

Let’s have a look to this example of a classic two column snippet,
implemented in two different ways.

<div class="container row">

<div class="container col-sm-7">

![image](themes/seo_snippet_wrong.png)

</div>

<div class="container col-sm-5">

**Bad**

Using fixed image, the publisher will be forced to limit the text in
order to follow the layout.

</div>

</div>

<div class="container row">

<div class="container col-sm-7">

![image](themes/seo_snippet_good.png)

</div>

<div class="container col-sm-5">

**Good**

Using background images that fit the column height, the publisher will
be free to add the content regardless of the image’s height.

</div>

</div>

### Page segmentation

Basically, page segmentation means that a page is divided into several
separate parts and these parts are treated as separate entries by search
engines. When you design pages or snippets, you should be sure to use
the right tags in order to facilitate search engine indexing.

  - `<article>`  
    Specifies an independent block of content. Within it should be a
    piece of self-contained content that should make sense on its own.
    You can nest `<article>` elements within one another. In this case,
    it’s implied that the nested elements are related to the outer
    `<article>` element.

  - `<header>`  
    Indicates the header section of a self-contained block of content
    (an `<article>`).

  - `<section>`  
    Is the snippet default tag and it specifies a subsection of a block
    of content. It can be used to split `<article>` content into several
    parts. It’s advisable to use a heading element (`<h1>` – `<h6>`) to
    define the section’s topic.

  - `<hgroup>`  
    Is used to wrap a section of headings (`<h1>` - `<h6>`). A great
    example would be an article with both a headline and sub-headline at
    the top:
    
    ``` html
    <hgroup>
      <h1>Main Title</h1>
      <h2>Subheading</h2>
    </hgroup>
    ```

### Describe your page

#### Define keywords

You should use appropriate, relevant keywords and synonyms for those
keywords. You can define them for each page using the built-in “Promote”
function found in the bar at the top.

#### Define a title and a description

Define them using the “Promote” function. Keep your page titles short
and include the main keyword phrase for the page. Good titles evoke an
emotional response, ask a question or promise something.

Descriptions, while not important to search engine rankings, are
extremely important in gaining user click-through. These are an
opportunity to advertise content and to let people searching know
exactly whether the given page contains the information they're looking
for. It is important that titles and descriptions on each page are
unique.


---
## File: ./content/developer/howtos/translations.md

# Translating Modules

This section explains how to provide translation abilities to your
module.

<div class="note">

<div class="title">

Note

</div>

If you want to contribute to the translation of Odoo itself, please
refer to the [Odoo Wiki
page](https://github.com/odoo/odoo/wiki/Translations).

</div>

## Exporting translatable term

A number of terms in your modules are "implicitly translatable" as a
result, even if you haven't done any specific work towards translation
you can export your module's translatable terms and may find content to
work with.

<div class="todo">

needs technical features

</div>

Translations export is performed via the administration interface by
logging into the backend interface and opening `Settings -->
Translations
--> Import / Export --> Export Translations`

  - leave the language to the default (new language/empty template)
  - select the [PO
    File](https://en.wikipedia.org/wiki/Gettext#Translating) format
  - select your module
  - click `Export` and download the file

![image](translations/po-export.png)

This gives you a file called `{yourmodule}.pot` which should be moved to
the `{yourmodule}/i18n/` directory. The file is a *PO Template* which
simply lists translatable strings and from which actual translations (PO
files) can be created. PO files can be created using
[msginit](https://www.gnu.org/software/gettext/manual/gettext.html#Creating),
with a dedicated translation tool like [POEdit](https://poedit.net/) or
by simply copying the template to a new file called `{language}.po`.
Translation files should be put in `{yourmodule}/i18n/`, next to
`{yourmodule}.pot`, and will be automatically loaded by Odoo when the
corresponding language is installed (via `Settings --> Translations -->
Languages`)

<div class="note">

<div class="title">

Note

</div>

translations for all loaded languages are also installed or updated when
installing or updating a module

</div>

## Implicit exports

Odoo automatically exports translatable strings from "data"-type
content:

  - in non-QWeb views, all text nodes are exported as well as the
    content of the `string`, `help`, `sum`, `confirm` and `placeholder`
    attributes
  - QWeb templates (both server-side and client-side), all text nodes
    are exported except inside `t-translation="off"` blocks, the content
    of the `title`, `alt`, `label` and `placeholder` attributes are also
    exported
  - for `~odoo.fields.Field`, unless their model is marked with
    `_translate = False`:
      - their `string` and `help` attributes are exported
      - if `selection` is present and a list (or tuple), it's exported
      - if their `translate` attribute is set to `True`, all of their
        existing values (across all records) are exported
  - help/error messages of `~odoo.models.Model._constraints` and
    `~odoo.models.Model._sql_constraints` are exported

## Explicit exports

When it comes to more "imperative" situations in Python code or
Javascript code, Odoo cannot automatically export translatable terms so
they must be marked explicitly for export. This is done by wrapping a
literal string in a function call.

In Python, the wrapping function is `odoo._`:

    title = _("Bank Accounts")

In JavaScript, the wrapping function is generally :js`odoo.web._t`:

``` javascript
title = _t("Bank Accounts");
```

<div class="warning">

<div class="title">

Warning

</div>

Only literal strings can be marked for exports, not expressions or
variables. For situations where strings are formatted, this means the
format string must be marked, not the formatted string

</div>

The lazy version of <span class="title-ref">\_</span> and
<span class="title-ref">\_t</span> is `odoo._lt` in python and
:js`odoo.web._lt` in javascript. The translation lookup is executed only
at rendering and can be used to declare translatable properties in class
methods of global variables.

<div class="note">

<div class="title">

Note

</div>

Translations of a module are **not** exposed to the front end by default
and thus are not accessible from JavaScript. In order to achieve that,
the module name has to be either prefixed with
<span class="title-ref">website</span> (just like
<span class="title-ref">website\_sale</span>,
<span class="title-ref">website\_event</span> etc.) or explicitly
register by implementing `_get_translation_frontend_modules_name` for
the <span class="title-ref">ir.http</span> model.

This could look like the following:

    from odoo import models
    
    class IrHttp(models.AbstractModel):
        _inherit = 'ir.http'
    
        @classmethod
        def _get_translation_frontend_modules_name(cls):
            modules = super()._get_translation_frontend_modules_name()
            return modules + ['your_module']

</div>

### Variables

**Don't** the extract may work but it will not translate the text
correctly:

    _("Scheduled meeting with %s" % invitee.name)

**Do** set the dynamic variables as a parameter of the translation
lookup (this will fallback on source in case of missing placeholder in
the translation):

    _("Scheduled meeting with %s", invitee.name)

### Blocks

**Don't** split your translation in several blocks or multiples lines:

    # bad, trailing spaces, blocks out of context
    _("You have ") + len(invoices) + _(" invoices waiting")
    _t("You have ") + invoices.length + _t(" invoices waiting");
    
    # bad, multiple small translations
    _("Reference of the document that generated ") + \
    _("this sales order request.")

**Do** keep in one block, giving the full context to translators:

    # good, allow to change position of the number in the translation
    _("You have %s invoices wainting") % len(invoices)
    _.str.sprintf(_t("You have %s invoices wainting"), invoices.length);
    
    # good, full sentence is understandable
    _("Reference of the document that generated " + \
      "this sales order request.")

### Plural

**Don't** pluralize terms the English-way:

    msg = _("You have %(count)s invoice", count=invoice_count)
    if invoice_count > 1:
      msg += _("s")

**Do** keep in mind every language has different plural forms:

    if invoice_count > 1:
      msg = _("You have %(count)s invoices", count=invoice_count)
    else:
      msg = _("You have one invoice")

### Read vs Run Time

**Don't** invoke translation lookup at server launch:

    ERROR_MESSAGE = {
      # bad, evaluated at server launch with no user language
      'access_error': _('Access Error'),
      'missing_error': _('Missing Record'),
    }
    
    class Record(models.Model):
    
      def _raise_error(self, code):
        raise UserError(ERROR_MESSAGE[code])

**Don't** invoke translation lookup when the javascript file is read:

    # bad, js _t is evaluated too early
    var core = require('web.core');
    var _t = core._t;
    var map_title = {
        access_error: _t('Access Error'),
        missing_error: _t('Missing Record'),
    };

**Do** use lazy translation lookup method:

    ERROR_MESSAGE = {
      'access_error': _lt('Access Error'),
      'missing_error': _lt('Missing Record'),
    }
    
    class Record(models.Model):
    
      def _raise_error(self, code):
        # translation lookup executed at error rendering
        raise UserError(ERROR_MESSAGE[code])

or **do** evaluate dynamically the translatable content:

    # good, evaluated at run time
    def _get_error_message(self):
      return {
        access_error: _('Access Error'),
        missing_error: _('Missing Record'),
      }

**Do** in the case where the translation lookup is done when the JS file
is *read*, use <span class="title-ref">\_lt</span> instead of
<span class="title-ref">\_t</span> to translate the term when it is
*used*:

    # good, js _lt is evaluated lazily
    var core = require('web.core');
    var _lt = core._lt;
    var map_title = {
        access_error: _lt('Access Error'),
        missing_error: _lt('Missing Record'),
    };


---
## File: ./content/developer/reference/cli.md

# Command-line interface (CLI)

The CLI `command-line interface` offers several functionalities related
to Odoo. You can use it to `run the server <reference/cmdline/server>`,
`launch Odoo as a Python console
environment <reference/cmdline/shell>`, `scaffold an Odoo module
<reference/cmdline/scaffold>`, `populate a database
<reference/cmdline/populate>`, or `count the number of lines of code
<reference/cmdline/cloc>`.

<div class="important">

<div class="title">

Important

</div>

The command to use to call the CLI depends on how you installed Odoo. In
the examples below, we assume that you are `running Odoo from source
<../../administration/install/source>` with the `odoo-bin` file. If you
installed Odoo `from a distribution package
<../../administration/install/packages>` or with
[Docker](https://hub.docker.com/_/odoo/), you must adapt the command.

<div class="tabs">

<div class="tab">

Run Odoo from source

1.  Navigate to the root of the directory where you downloaded the
    source files of Odoo Community.
2.  Run all CLI commands with `./odoo-bin`

</div>

<div class="tab">

Odoo was installed from a distribution package

When Odoo was installed, an executable named
<span class="title-ref">odoo</span> was added to your user's PATH.
Replace all occurrences of `odoo-bin` with `odoo` in the examples below.

</div>

<div class="tab">

Odoo was installed with Docker

Please refer to the [documentation of the official Docker image of
Odoo](https://hub.docker.com/_/odoo/).

</div>

</div>

</div>

## Running the server

<div class="program">

odoo-bin

</div>

<div class="option">

\-d \<database\>, --database \<database\>

database(s) used when installing or updating modules. Providing a
comma-separated list restrict access to databases provided in list.

For advanced database options, take a look `below
<reference/cmdline/server/database>`.

</div>

<div class="option">

\-i \<modules\>, --init \<modules\>

comma-separated list of modules to install before running the server
(requires `-d`).

</div>

<div class="option">

\-u \<modules\>, --update \<modules\>

comma-separated list of modules to update before running the server
(requires `-d`).

</div>

<div class="option">

\--addons-path \<directories\>

comma-separated list of directories in which modules are stored. These
directories are scanned for modules.

</div>

<div class="option">

\-c \<config\>, --config \<config\>

provide an alternate `configuration file <reference/cmdline/config>`

</div>

<div class="option">

\-s, --save

saves the server configuration to the current configuration file
(`{$HOME}/.odoorc` by default, and can be overridden using `-c`).

</div>

<div class="option">

\--without-demo

disables demo data loading for modules installed comma-separated, use
`all` for all modules.

</div>

<div class="option">

\--test-enable

runs tests after module installation

</div>

<div class="option">

\--test-tags \[-\]\[tag\]\[/module\]\[:class\]\[.method\]

Comma-separated list of specs to filter which tests to execute. Enable
unit tests if set.

Example: <span class="title-ref">--test-tags
:TestClass.test\_func,/test\_module,external</span>

  - The <span class="title-ref">-</span> specifies if we want to include
    or exclude tests matching this spec.
  - The tag will match tags added on a class with a
    `~odoo.tests.common.tagged` decorator (all `test classes
    <reference/testing>` have <span class="title-ref">standard</span>
    and <span class="title-ref">at\_install</span> tags until explicitly
    removed, see the decorator documentation).
  - <span class="title-ref">\*</span> will match all tags.
  - If tag is omitted on include mode, its value is
    <span class="title-ref">standard</span>.
  - If tag is omitted on exclude mode, its value is
    <span class="title-ref">\*</span>.
  - The module, class, and method will respectively match the module
    name, test class name and test method name.

Filtering and executing the tests happens twice: right after each module
installation/update and at the end of the modules loading. At each stage
tests are filtered by <span class="title-ref">--test-tags</span> specs
and additionally by dynamic specs
<span class="title-ref">at\_install</span> and
<span class="title-ref">post\_install</span> correspondingly.

</div>

<div class="option">

\--screenshots

Specify directory where to write screenshots when an
HttpCase.browser\_js test fails. It defaults to
`/tmp/odoo_tests/{db_name}/screenshots`

</div>

<div class="option">

\--screencasts

Enable screencasts and specify directory where to write screencasts
files. The `ffmpeg` utility needs to be installed to encode frames into
a video file. Otherwise frames will be kept instead of the video file.

</div>

### Database

<div class="option">

\-r \<user\>, --db\_user \<user\>

database username, used to connect to PostgreSQL.

</div>

<div class="option">

\-w \<password\>, --db\_password \<password\>

database password, if using [password
authentication](https://www.postgresql.org/docs/9.3/static/auth-methods.html#AUTH-PASSWORD).

</div>

<div class="option">

\--db\_host \<hostname\>

host for the database server

  - `localhost` on Windows
  - UNIX socket otherwise

</div>

<div class="option">

\--db\_port \<port\>

port the database listens on, defaults to 5432

</div>

<div class="option">

\--db-filter \<filter\>

hides databases that do not match `<filter>`. The filter is a [regular
expression](https://docs.python.org/3/library/re.html), with the
additions that:

  - `%h` is replaced by the whole hostname the request is made on.

  - `%d` is replaced by the subdomain the request is made on, with the
    exception of `www` (so domain `odoo.com` and `www.odoo.com` both
    match the database `odoo`).
    
    These operations are case sensitive. Add option `(?i)` to match all
    databases (so domain `odoo.com` using `(?i)%d` matches the database
    `Odoo`).

Since version 11, it's also possible to restrict access to a given
database listen by using the --database parameter and specifying a
comma-separated list of databases

When combining the two parameters, db-filter supersedes the
comma-separated database list for restricting database list, while the
comma-separated list is used for performing requested operations like
upgrade of modules.

``` bash
$ odoo-bin --db-filter ^11.*$
```

Restrict access to databases whose name starts with 11

``` bash
$ odoo-bin --database 11firstdatabase,11seconddatabase
```

Restrict access to only two databases, 11firstdatabase and
11seconddatabase

``` bash
$ odoo-bin --database 11firstdatabase,11seconddatabase -u base
```

Restrict access to only two databases, 11firstdatabase and
11seconddatabase, and update base module on one database:
11firstdatabase. If database 11seconddatabase doesn't exist, the
database is created and base modules is installed

``` bash
$ odoo-bin --db-filter ^11.*$ --database 11firstdatabase,11seconddatabase -u base
```

Restrict access to databases whose name starts with 11, and update base
module on one database: 11firstdatabase. If database 11seconddatabase
doesn't exist, the database is created and base modules is installed

</div>

<div class="option">

\--db-template \<template\>

when creating new databases from the database-management screens, use
the specified [template
database](https://www.postgresql.org/docs/9.3/static/manage-ag-templatedbs.html).
Defaults to `template0`.

</div>

<div class="option">

\--pg\_path \</path/to/postgresql/binaries\>

Path to the PostgreSQL binaries that are used by the database manager to
dump and restore databases. You have to specify this option only if
these binaries are located in a non-standard directory.

</div>

<div class="option">

\--no-database-list

Suppresses the ability to list databases available on the system

</div>

<div class="option">

\--db\_sslmode

Control the SSL security of the connection between Odoo and PostgreSQL.
Value should be one of 'disable', 'allow', 'prefer', 'require',
'verify-ca' or 'verify-full' Default value is 'prefer'

</div>

### Emails

<div class="option">

\--email-from \<address\>

Email address used as \<FROM\> when Odoo needs to send mails

</div>

<div class="option">

\--smtp \<server\>

Address of the SMTP server to connect to in order to send mails

</div>

<div class="option">

\--smtp-port \<port\>

</div>

<div class="option">

\--smtp-ssl

If set, odoo should use SSL/STARTSSL SMTP connections

</div>

<div class="option">

\--smtp-user \<name\>

Username to connect to the SMTP server

</div>

<div class="option">

\--smtp-password \<password\>

Password to connect to the SMTP server

</div>

### Internationalisation

Use these options to translate Odoo to another language. See i18n
section of the user manual. Option '-d' is mandatory. Option '-l' is
mandatory in case of importation

<div class="option">

\--load-language \<languages\>

specifies the languages (separated by commas) for the translations you
want to be loaded

</div>

<div class="option">

\-l, --language \<language\>

specify the language of the translation file. Use it with --i18n-export
or --i18n-import

</div>

<div class="option">

\--i18n-export \<filename\>

export all sentences to be translated to a CSV file, a PO file or a TGZ
archive and exit.

</div>

<div class="option">

\--i18n-import \<filename\>

import a CSV or a PO file with translations and exit. The '-l' option is
required.

</div>

<div class="option">

\--i18n-overwrite

overwrites existing translation terms on updating a module or importing
a CSV or a PO file.

</div>

<div class="option">

\--modules

specify modules to export. Use in combination with --i18n-export

</div>

### Advanced Options

#### Developer features

<div class="option">

\--dev \<feature,feature,...,feature\>

  - `all`: all the features below are activated
  - `xml`: read template qweb from xml file directly instead of
    database. Once a template has been modified in database, it will be
    not be read from the xml file until the next update/init.
  - `reload`: restart server when python file are updated (may not be
    detected depending on the text editor used)
  - `qweb`: break in the evaluation of qweb template when a node
    contains `t-debug='debugger'`
  - `(i)p(u)db`: start the chosen python debugger in the code when an
    unexpected error is raised before logging and returning the error.

</div>

#### HTTP

<div class="option">

\--no-http

do not start the HTTP or long-polling workers (may still start `cron
<reference/actions/cron>` workers)

<div class="warning">

<div class="title">

Warning

</div>

has no effect if `--test-enable` is set, as tests require an accessible
HTTP server

</div>

</div>

<div class="option">

\--http-interface \<interface\>

TCP/IP address on which the HTTP server listens, defaults to `0.0.0.0`
(all addresses)

</div>

<div class="option">

\--http-port \<port\>

Port on which the HTTP server listens, defaults to 8069.

</div>

<div class="option">

\--longpolling-port \<port\>

TCP port for long-polling connections in multiprocessing or gevent mode,
defaults to 8072. Not used in default (threaded) mode.

</div>

<div class="option">

\--proxy-mode

enables the use of `X-Forwarded-*` headers through [Werkzeug's proxy
support](https://werkzeug.palletsprojects.com/en/0.16.x/middleware/proxy_fix/#module-werkzeug.middleware.proxy_fix).

<div class="warning">

<div class="title">

Warning

</div>

proxy mode *must not* be enabled outside of a reverse proxy scenario

</div>

</div>

#### Logging

By default, Odoo displays all logging of
[level](https://docs.python.org/3/library/logging.html#logging.Logger.setLevel)
`info` except for workflow logging (`warning` only), and log output is
sent to `stdout`. Various options are available to redirect logging to
other destinations and to customize the amount of logging output.

<div class="option">

\--logfile \<file\>

sends logging output to the specified file instead of stdout. On Unix,
the file [can be managed by external log rotation
programs](https://docs.python.org/3/library/logging.handlers.html#watchedfilehandler)
and will automatically be reopened when replaced

</div>

<div class="option">

\--syslog

logs to the system's event logger: [syslog on
unices](https://docs.python.org/3/library/logging.handlers.html#sysloghandler)
and [the Event Log on
Windows](https://docs.python.org/3/library/logging.handlers.html#nteventloghandler).

Neither is configurable

</div>

<div class="option">

\--log-db \<dbname\>

logs to the `ir.logging` model (`ir_logging` table) of the specified
database. The database can be the name of a database in the "current"
PostgreSQL, or [a PostgreSQL
URI](https://www.postgresql.org/docs/9.2/static/libpq-connect.html#AEN38208)
for e.g. log aggregation.

</div>

<div class="option">

\--log-handler \<handler-spec\>

`{LOGGER}:{LEVEL}`, enables `LOGGER` at the provided `LEVEL` e.g.
`odoo.models:DEBUG` will enable all logging messages at or above `DEBUG`
level in the models.

  - The colon `:` is mandatory
  - The logger can be omitted to configure the root (default) handler
  - If the level is omitted, the logger is set to `INFO`

The option can be repeated to configure multiple loggers e.g.

``` console
$ odoo-bin --log-handler :DEBUG --log-handler werkzeug:CRITICAL --log-handler odoo.fields:WARNING
```

</div>

<div class="option">

\--log-request

enable DEBUG logging for RPC requests, equivalent to
`--log-handler=odoo.http.rpc.request:DEBUG`

</div>

<div class="option">

\--log-response

enable DEBUG logging for RPC responses, equivalent to
`--log-handler=odoo.http.rpc.response:DEBUG`

</div>

<div class="option">

\--log-web

enables DEBUG logging of HTTP requests and responses, equivalent to
`--log-handler=odoo.http:DEBUG`

</div>

<div class="option">

\--log-sql

enables DEBUG logging of SQL querying, equivalent to
`--log-handler=odoo.sql_db:DEBUG`

</div>

<div class="option">

\--log-level \<level\>

Shortcut to more easily set predefined levels on specific loggers.
"real" levels (`critical`, `error`, `warn`, `debug`) are set on the
`odoo` and `werkzeug` loggers (except for `debug` which is only set on
`odoo`).

Odoo also provides debugging pseudo-levels which apply to different sets
of loggers:

  - `debug_sql`  
    sets the SQL logger to `debug`
    
    equivalent to `--log-sql`

  - `debug_rpc`  
    sets the `odoo` and HTTP request loggers to `debug`
    
    equivalent to `--log-level debug --log-request`

  - `debug_rpc_answer`  
    sets the `odoo` and HTTP request and response loggers to `debug`
    
    equivalent to `--log-level debug --log-request --log-response`

<div class="note">

<div class="title">

Note

</div>

In case of conflict between `--log-level` and `--log-handler`, the
latter is used

</div>

</div>

#### Multiprocessing

<div class="option">

\--workers \<count\>

if `count` is not 0 (the default), enables multiprocessing and sets up
the specified number of HTTP workers (sub-processes processing HTTP and
RPC requests).

<div class="note">

<div class="title">

Note

</div>

multiprocessing mode is only available on Unix-based systems

</div>

A number of options allow limiting and recycling workers:

<div class="option">

\--limit-request \<limit\>

Number of requests a worker will process before being recycled and
restarted.

Defaults to *8196*.

</div>

<div class="option">

\--limit-memory-soft \<limit\>

Maximum allowed virtual memory per worker in bytes. If the limit is
exceeded, the worker is killed and recycled at the end of the current
request.

Defaults to *2048MiB (2048\*1024\*1024B)*.

</div>

<div class="option">

\--limit-memory-hard \<limit\>

Hard limit on virtual memory in bytes, any worker exceeding the limit
will be immediately killed without waiting for the end of the current
request processing.

Defaults to *2560MiB (2560\*1024\*1024B)*.

</div>

<div class="option">

\--limit-time-cpu \<limit\>

Prevents the worker from using more than \<limit\> CPU seconds for each
request. If the limit is exceeded, the worker is killed.

Defaults to *60*.

</div>

<div class="option">

\--limit-time-real \<limit\>

Prevents the worker from taking longer than \<limit\> seconds to process
a request. If the limit is exceeded, the worker is killed.

Differs from `--limit-time-cpu` in that this is a "wall time" limit
including e.g. SQL queries.

Defaults to *120*.

</div>

</div>

<div class="option">

\--max-cron-threads \<count\>

number of workers dedicated to `cron <reference/actions/cron>` jobs.
Defaults to *2*. The workers are threads in multi-threading mode and
processes in multi-processing mode.

For multi-processing mode, this is in addition to the HTTP worker
processes.

</div>

## Configuration file

<div class="program">

odoo-bin

</div>

Most of the command-line options can also be specified via a
configuration file. Most of the time, they use similar names with the
prefix `-` removed and other `-` are replaced by `_` e.g.
`--db-template` becomes `db_template`.

Some conversions don't match the pattern:

  - `--db-filter` becomes `dbfilter`
  - `--no-http` corresponds to the `http_enable` boolean
  - logging presets (all options starting with `--log-` except for
    `--log-handler` and `--log-db`) just add content to `log_handler`,
    use that directly in the configuration file
  - `--smtp` is stored as `smtp_server`
  - `--database` is stored as `db_name`
  - `--i18n-import` and `--i18n-export` aren't available at all from
    configuration files

<div id="reference/cmdline/config_file">

The default configuration file is `{$HOME}/.odoorc` which can be
overridden using `--config <odoo-bin -c>`. Specifying `--save <odoo-bin
-s>` will save the current configuration state back to that file. The
configuration items relative to the command-line are to be specified in
the section `[options]`.

</div>

Here is a sample file:

``` ini
[options]
db_user=odoo
dbfilter=odoo
```

## Shell

Odoo command-line also allows to launch odoo as a python console
environment. This enables direct interaction with the `orm
<reference/orm>` and its functionalities.

``` console
$ odoo_bin shell
```

<div class="option">

\--shell-interface (ipythonbpython|python)

Specify a preferred REPL to use in shell mode.

</div>

## Scaffolding

<div class="program">

odoo-bin scaffold

</div>

Scaffolding is the automated creation of a skeleton structure to
simplify bootstrapping (of new modules, in the case of Odoo). While not
necessary it avoids the tedium of setting up basic structures and
looking up what all starting requirements are.

Scaffolding is available via the `odoo-bin scaffold` subcommand.

``` console
$ odoo_bin scaffold my_module /addons/
```

<div class="option">

name (required)

the name of the module to create, may munged in various manners to
generate programmatic names (e.g. module directory name, model names, …)

</div>

<div class="option">

destination (default=current directory)

directory in which to create the new module, defaults to the current
directory

</div>

<div class="option">

\-t \<template\>

a template directory, files are passed through
[jinja2](http://jinja.pocoo.org) then copied to the `destination`
directory

</div>

This will create module *my\_module* in directory */addons/*.

## Database Population

<div class="program">

odoo-bin populate

</div>

Odoo CLI supports database population features. If the feature is
`implemented on a given model <reference/testing/populate/methods>`, it
allows automatic data generation of the model's records to test your
modules in databases containing non-trivial amounts of records.

``` console
$ odoo_bin populate
```

<div class="option">

\--models

list of models for which the database should be filled

</div>

<div class="option">

\--size (smalllarge)

population size, the actual records number depends on the model's
<span class="title-ref">\_populate\_sizes</span> attribute. The
generated records content is specified by the
`~odoo.models._populate_factories` method of a given model (cf. the
`populate` folder of modules for further details).

</div>

<div class="seealso">

`reference/testing/populate`

</div>

## Cloc

<div class="program">

odoo-bin cloc

</div>

Odoo Cloc is a tool to count the number of relevant lines written in
Python, Javascript or XML. This can be used as a rough metric for
pricing maintenance of extra modules.

### Command-line options

<div class="option">

\-d \<database\>, --database \<database\>

</div>

Process the code of all extra modules installed on the provided
database, and of all server actions and computed fields manually created
in the provided database.  
The `--addons-path` option is required to specify the path(s) to the
module folder(s).  
If combined with `--path`, the count will be that of the sum of both
options' results (with possible overlaps). At least one of these two
options is required to specify which code to process.

``` console
$ odoo-bin cloc --addons-path=addons -d my_database
```

<div class="seealso">

\- `reference/cmdline/cloc/database-option`

</div>

<div class="option">

\-p \<path\>, --path \<path\>

</div>

Process the files in the provided path.  
If combined with `--database`, the count will be that of the sum of both
options' results (with possible overlaps). At least one of these two
options is required to specify which code to process.

``` console
$ odoo-bin cloc -p addons/account
```

Multiple paths can be provided by repeating the option.

``` console
$ odoo-bin cloc -p addons/account -p addons/sale
```

<div class="seealso">

\- `reference/cmdline/cloc/path-option`

</div>

<div class="option">

\--addons-path \<directories\>

</div>

Comma-separated list of directories in which modules are stored. These
directories are scanned for modules.  
Required if the `--database` option is used.

<div class="option">

\-c \<directories\>

</div>

Specify a configuration file to use in place of the `--addons-path`
option.

``` console
$ odoo-bin cloc -c config.conf -d my_database
```

<div class="option">

\-v, --verbose

</div>

Show the details of lines counted for each file.

### Processed files

#### With the `--database` option

Odoo Cloc counts the lines in each file of extra installed modules in a
given database. In addition, it counts the Python lines of server
actions and custom computed fields that have been directly created in
the database or imported.

Some files are excluded from the count by default:

  - The manifest (`__manifest__.py` or `__openerp__.py`)
  - The contents of the folder `static/lib`
  - The tests defined in the folder `tests` and `static/tests`
  - The migrations scripts defined in the folder `migrations`
  - The XML files declared in the `demo` or `demo_xml` sections of the
    manifest

For special cases, a list of files that should be ignored by Odoo Cloc
can be defined per module. This is specified by the `cloc_exclude` entry
of the manifest:

``` python
"cloc_exclude": [
    "lib/common.py", # exclude a single file
    "data/*.xml",    # exclude all XML files in a specific folder
    "example/**/*",  # exclude all files in a folder hierarchy recursively
]
```

The pattern `**/*` can be used to ignore an entire module. This can be
useful to exclude a module from maintenance service costs.  
For more information about the pattern syntax, see
[glob](https://docs.python.org/3/library/pathlib.html#pathlib.Path.glob).

#### With the `--path` option

This method works the same as with the `--database option
<reference/cmdline/cloc/database-option>` if a manifest file is present
in the given folder. Otherwise, it counts all files.

### Identifying Extra Modules

To distinguish between standard and extra modules, Odoo Cloc uses the
following heuristic: modules that are located (real file system path,
after following symbolic links) in the same parent directory as the
`base`, `web` or `web_enterprise` standard modules are considered
standard. Other modules are treated as extra modules.

### Error Handling

Some file cannot be counted by Odoo Cloc. Those file are reported at the
end of the output.

#### Max file size exceeded

Odoo Cloc rejects any file larger than 25MB. Usually, source files are
smaller than 1 MB. If a file is rejected, it may be:

  - A generated XML file that contains lots of data. It should be
    excluded in the manifest.
  - A JavaScript library that should be placed in the `static/lib`
    folder.

#### Syntax Error

Odoo Cloc cannot count the lines of code of a Python file with a syntax
problem. If an extra module contains such files, they should be fixed to
allow the module to load. If the module works despite the presence of
those files, they are probably not loaded and should therefore be
removed from the module, or at least excluded in the manifest via
`cloc_exclude`.


---
## File: ./content/developer/reference/addons/http.md

# Web Controllers

## Controllers

Controllers need to provide extensibility, much like
`~odoo.models.Model`, but can't use the same mechanism as the
pre-requisites (a database with loaded modules) may not be available yet
(e.g. no database created, or no database selected).

Controllers thus provide their own extension mechanism, separate from
that of models:

Controllers are created by `inheriting <python:tut-inheritance>` from
`~odoo.http.Controller`. Routes are defined through methods decorated
with `~odoo.http.route`:

    class MyController(odoo.http.Controller):
        @route('/some_url', auth='public')
        def handler(self):
            return stuff()

To *override* a controller, `inherit <python:tut-inheritance>` from its
class and override relevant methods, re-exposing them if necessary:

    class Extension(MyController):
        @route()
        def handler(self):
            do_before()
            return super(Extension, self).handler()

  - decorating with `~odoo.http.route` is necessary to keep the method
    (and route) visible: if the method is redefined without decorating,
    it will be "unpublished"

  - the decorators of all methods are combined, if the overriding
    method's decorator has no argument all previous ones will be kept,
    any provided argument will override previously defined ones e.g.:
    
        class Restrict(MyController):
            @route(auth='user')
            def handler(self):
                return super(Restrict, self).handler()
    
    will change `/some_url` from public authentication to user
    (requiring a log-in)

## API

### Routing

<div class="autofunction">

odoo.http.route

</div>

### Request

The request object is automatically set on `odoo.http.request` at the
start of the request

<div class="autoclass" data-members="" data-member-order="bysource">

odoo.http.WebRequest

</div>

<div class="autoclass" data-members="">

odoo.http.HttpRequest

</div>

<div class="autoclass" data-members="">

odoo.http.JsonRequest

</div>

### Response

<div class="autoclass" data-members="" data-member-order="bysource">

odoo.http.Response

</div>


---
## File: ./content/developer/reference/addons/reports.md

# QWeb Reports<span id="reference/reports"></span>

Reports are written in HTML/QWeb, like website views in Odoo. You can
use the usual `QWeb control flow tools <reference/qweb>`. The PDF
rendering itself is performed by [wkhtmltopdf](https://wkhtmltopdf.org).

Reports are declared using a `report action <reference/actions/report>`,
and a `reference/reports/templates` for the action to use.

If useful or necessary, it is possible to specify a
`reference/reports/paper_formats` for the report report.

## Report template

Report templates will always provide the following variables:

  - `time`  
    a reference to `python:time` from the Python standard library

  - `user`  
    `res.user` record for the user printing the report

  - `res_company`  
    record for the current `user`'s company

  - `website`  
    the current website object, if any (this item can be present but
    `None`)

  - `web_base_url`  
    the base url for the webserver

  - `context_timestamp`  
    a function taking `python:datetime.datetime` in UTC\[1\] and
    converting it to the timezone of the user printing the report

### Minimal viable template

A minimal template would look like:

``` xml
<template id="report_invoice">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="web.external_layout">
                <div class="page">
                    <h2>Report title</h2>
                    <p>This object's name is <span t-field="o.name"/></p>
                </div>
            </t>
        </t>
    </t>
</template>
```

Calling `external_layout` will add the default header and footer on your
report. The PDF body will be the content inside the `<div
class="page">`. The template's `id` must be the name specified in the
report declaration; for example `account.report_invoice` for the above
report. Since this is a QWeb template, you can access all the fields of
the `docs` objects received by the template.

By default, the rendering context will also expose the following items:

  - `docs`  
    records for the current report

  - `doc_ids`  
    list of ids for the `docs` records

  - `doc_model`  
    model for the `docs` records

If you wish to access other records/models in the template, you will
need `a custom report <reference/reports/custom_reports>`, however in
that case you will have to provide the items above if you need them.

### Translatable Templates

If you wish to translate reports (to the language of a partner, for
example), you need to define two templates:

  - The main report template
  - The translatable document

You can then call the translatable document from your main template with
the attribute `t-lang` set to a language code (for example `fr` or
`en_US`) or to a record field. You will also need to re-browse the
related records with the proper context if you use fields that are
translatable (like country names, sales conditions, etc.)

<div class="warning">

<div class="title">

Warning

</div>

If your report template does not use translatable record fields,
re-browsing the record in another language is *not* necessary and will
impact performances.

</div>

For example, let's look at the Sale Order report from the Sale module:

``` xml
<!-- Main template -->
<template id="report_saleorder">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="doc">
            <t t-call="sale.report_saleorder_document" t-lang="doc.partner_id.lang"/>
        </t>
    </t>
</template>

<!-- Translatable template -->
<template id="report_saleorder_document">
    <!-- Re-browse of the record with the partner lang -->
    <t t-set="doc" t-value="doc.with_context(lang=doc.partner_id.lang)" />
    <t t-call="web.external_layout">
        <div class="page">
            <div class="oe_structure"/>
            <div class="row">
                <div class="col-6">
                    <strong t-if="doc.partner_shipping_id == doc.partner_invoice_id">Invoice and shipping address:</strong>
                    <strong t-if="doc.partner_shipping_id != doc.partner_invoice_id">Invoice address:</strong>
                    <div t-field="doc.partner_invoice_id" t-options="{&quot;no_marker&quot;: True}"/>
                <...>
            <div class="oe_structure"/>
        </div>
    </t>
</template>
```

The main template calls the translatable template with
`doc.partner_id.lang` as a `t-lang` parameter, so it will be rendered in
the language of the partner. This way, each Sale Order will be printed
in the language of the corresponding customer. If you wish to translate
only the body of the document, but keep the header and footer in a
default language, you could call the report's external layout this way:

``` xml
<t t-call="web.external_layout" t-lang="en_US">
```

<div class="tip">

<div class="title">

Tip

</div>

Please take note that this works only when calling external templates,
you will not be able to translate part of a document by setting a
`t-lang` attribute on an xml node other than `t-call`. If you wish to
translate part of a template, you can create an external template with
this partial template and call it from the main one with the `t-lang`
attribute.

</div>

### Barcodes

Barcodes are images returned by a controller and can easily be embedded
in reports thanks to the QWeb syntax (e.g. see
`reference/qweb/attributes`):

``` html
<img t-att-src="'/report/barcode/QR/%s' % 'My text in qr code'"/>
```

More parameters can be passed as a query string

``` html
<img t-att-src="'/report/barcode/?
    type=%s&amp;value=%s&amp;width=%s&amp;height=%s'%('QR', 'text', 200, 200)"/>
```

### Useful Remarks

  - Twitter Bootstrap and FontAwesome classes can be used in your report
    template

  - Local CSS can be put directly in the template

  - Global CSS can be inserted in the main report layout by inheriting
    its template and inserting your CSS:
    
    ``` xml
    <template id="report_saleorder_style" inherit_id="report.style">
      <xpath expr=".">
        <t>
          .example-css-class {
            background-color: red;
          }
        </t>
      </xpath>
    </template>
    ```

  - If it appears that your PDF report is missing the styles, please
    check `these instructions
    <reference/backend/reporting/printed-reports/pdf-without-styles>`.

## Paper Format

Paper formats are records of `report.paperformat` and can contain the
following attributes:

  - `name` (mandatory)  
    only useful as a mnemonic/description of the report when looking for
    one in a list of some sort

  - `description`  
    a small description of your format

  - `format`  
    either a predefined format (A0 to A9, B0 to B10, Legal, Letter,
    Tabloid,...) or `custom`; A4 by default. You cannot use a non-custom
    format if you define the page dimensions.

  - `dpi`  
    output DPI; 90 by default

  - `margin_top`, `margin_bottom`, `margin_left`, `margin_right`  
    margin sizes in mm

  - `page_height`, `page_width`  
    page dimensions in mm

  - `orientation`  
    Landscape or Portrait

  - `header_line`  
    boolean to display a header line

  - `header_spacing`  
    header spacing in mm

Example:

``` xml
<record id="paperformat_frenchcheck" model="report.paperformat">
    <field name="name">French Bank Check</field>
    <field name="default" eval="True"/>
    <field name="format">custom</field>
    <field name="page_height">80</field>
    <field name="page_width">175</field>
    <field name="orientation">Portrait</field>
    <field name="margin_top">3</field>
    <field name="margin_bottom">3</field>
    <field name="margin_left">3</field>
    <field name="margin_right">3</field>
    <field name="header_line" eval="False"/>
    <field name="header_spacing">3</field>
    <field name="dpi">80</field>
</record>
```

## Custom Reports

By default, the reporting system builds rendering values based on the
target model specified through the `model` field.

However, it will first look for a model named
`report.{module.report_name}` and call that model's
`_get_report_values(doc_ids, data)` in order to prepare the rendering
data for the template.

This can be used to include arbitrary items to use or display while
rendering the template, such as data from additional models:

``` python
from odoo import api, models

class ParticularReport(models.AbstractModel):
    _name = 'report.module.report_name'

    def _get_report_values(self, docids, data=None):
        # get the report action back as we will need its data
        report = self.env['ir.actions.report']._get_report_from_name('module.report_name')
        # get the records selected for this rendering of the report
        obj = self.env[report.model].browse(docids)
        # return a custom rendering context
        return {
            'lines': docids.get_lines()
        }
```

<div class="warning">

<div class="title">

Warning

</div>

When using a custom report, the "default" document-related items
(`doc_ids`, `doc_model` and `docs`) will *not* be included. If you want
them, you will need to include them yourself.

In the example above, the rendering context will contain the "global"
values as well as the `lines` we put in there but nothing else.

</div>

## Custom fonts

If you want to use custom fonts you will need to add your custom font
and the related less/CSS to the `web.reports_assets_common` assets
bundle. Adding your custom font(s) to `web.assets_common` or
`web.assets_backend` will not make your font available in QWeb reports.

Example:

``` xml
<template id="report_assets_common_custom_fonts" name="Custom QWeb fonts" inherit_id="web.report_assets_common">
    <xpath expr="." position="inside">
        <link href="/your_module/static/src/less/fonts.less" rel="stylesheet" type="text/less"/>
    </xpath>
</template>
```

You will need to define your `@font-face` within this less file, even if
you've used in another assets bundle (other than
`web.reports_assets_common`).

Example:

``` xml
@font-face {
    font-family: 'MonixBold';
    src: local('MonixBold'), local('MonixBold'), url(/your_module/static/src/fonts/MonixBold-Regular.otf) format('opentype');
}

.h1-title-big {
    font-family: MonixBold;
    font-size: 60px;
    color: #3399cc;
}
```

After you've added the less into your assets bundle you can use the
classes - in this example `h1-title-big` - in your custom QWeb report.

## Reports are web pages

Reports are dynamically generated by the report module and can be
accessed directly via URL:

For example, you can access a Sale Order report in html mode by going to
http://\<server-address\>/report/html/sale.report\_saleorder/38

Or you can access the pdf version at
http://\<server-address\>/report/pdf/sale.report\_saleorder/38

1.  it does not matter what timezone the `python:datetime` object is
    actually in (including no timezone), its timezone will
    unconditionally be *set* to UTC before being adjusted to the user's


---
## File: ./content/developer/reference/addons/views.md

# Views

Views are what define how records should be displayed to end-users. They
are specified in XML which means that they can be edited independently
from the models that they represent. They are flexible and allow a high
level of customization of the screens that they control. There exist
various types of views. Each of them represents a mode of visualization:
*form*, *list*, *kanban*, etc.

<div class="todo">

Build doc of ir\_ui\_view.py ?

</div>

## Generic structure

Basic views generally share the common structure defined below.
Placeholders are denoted in all caps.

``` xml
<record id="MODEL_view_TYPE" model="ir.ui.view">
  <field name="name">NAME</field>
  <field name="model">MODEL</field>
  <field name="arch" type="xml">
    <VIEW_TYPE>
      <VIEW_SPECIFICATIONS/>
    </VIEW_TYPE>
  </field>
</record>
```

## Fields

View objects expose a number of fields. They are optional unless
specified otherwise.

  - `name` (mandatory) `~odoo.fields.Char`
    
    Only useful as a mnemonic/description of the view when looking for
    one in a list of some sort.

  - `model` `~odoo.fields.Char`
    
    The model linked to the view, if applicable.

  - `priority` `~odoo.fields.Integer`
    
    When a view is requested by `(model, type)`, the view matching the
    model and the type, with the lowest priority will be returned (it is
    the default view).
    
    It also defines the order of views application during `view
    inheritance <reference/views/inheritance>`.

  - `groups_id` `~odoo.fields.Many2many` -\>
    `odoo.addons.base.models.res_users.Groups`
    
    The groups allowed to use/access the current view.
    
    If the view extends an existing view, the extension will only be
    applied for a given user if the user has access to the provided
    `groups_id`.

  - `arch` `~odoo.fields.Text`
    
    The description of the view layout.

## Attributes

<div class="todo">

view attributes & view element attributes attrs & states attributes are
missing generic information

</div>

The different view types have a wide variety of attributes allowing
customizations of the generic behaviors. Some main attributes will be
explained here. They do not all have an impact on all view types.

<div class="note">

<div class="title">

Note

</div>

The current context and user access rights may also impact the view
abilities.

</div>

<div class="todo">

info on create/... in the context ?

</div>

  - `create`
    
    Disable/enable record creation on the view.

  - `edit` (`form` & `list` & `gantt`)
    
    Disable/enable record editing on the view.

  - `delete` (`form` & `list`)
    
    Disable/enable record deletion on the view through the **Action**
    dropdown.

  - `duplicate` (`form`)
    
    Disable/enable record duplication on the view through the **Action**
    dropdown.

  - `decoration-{$name}` (`list` & `gantt`)
    
    Define a conditional display of a record in the style of a row's
    text based on the corresponding record's attributes.
    
    Values are Python expressions. For each record, the expression is
    evaluated with the record's attributes as context values and if
    `true`, the corresponding style is applied to the row. Here are some
    of the other values available in the context:
    
      - `uid`: the id of the current user,
      - `today`: the current local date as a string of the form
        `YYYY-MM-DD`,
      - `now`: same as `today` with the addition of the current time.
        This value is formatted as `YYYY-MM-DD hh:mm:ss`.
    
    <!-- end list -->
    
    ``` xml
    <tree decoration-info="state == 'draft'"
      decoration-danger="state == 'help_needed'"
      decoration-bf="state='busy'">
      <TREE_VIEW_CONTENT>
    </tree>
    ```
    
    <div class="warning">
    
    <div class="title">
    
    Warning
    
    </div>
    
    Supported values differ for the two view types. The Gantt view only
    supports `success`, `info`, `warning`, `danger` and `secondary`
    displays. The list view supports `bf`, `it`, `success`, `info`,
    `warning`, `danger`, `muted` and `primary` displays.
    
    </div>

  - `sample` (`kanban` & `list` & `gantt` & `graph` & `pivot` & `cohort`
    & `dashboard`)
    
    Populate the view with a set of sample records if none are found for
    the current model. This attribute is false by default.
    
    These fake records will have heuristics for certain field
    names/models. For example, a field 'display\_name' on the model
    'res.users' will be populated with sample people names while an
    'email' field will be in the form
    '<firstname.lastname@sample.demo>'.
    
    The user will not be able to interact with these data and they will
    be discarded as soon as an action is performed (record created,
    column added, etc.)

  - `banner_route` a route address to be fetched and prepended to the
    view.
    
    If this attribute is set, the `controller route
    url<reference/controllers>` will be fetched and displayed above the
    view. The json response from the controller should contain an "html"
    key.
    
    If the html contains a stylesheet \<link\> tag, it will be removed
    and appended to \<head\>.
    
    To interact with the backend you can use \<a type="action"\> tags.
    Please take a look at the documentation of the \_onActionClicked
    method of AbstractController
    (*addons/web/static/src/js/views/abstract\_controller.js*) for more
    details.
    
    Only views extending AbstractView and AbstractController can use
    this attribute, like `reference/views/form`,
    `reference/views/kanban`, `reference/views/list`, ...
    
    Example:
    
    ``` xml
    <tree banner_route="/module_name/hello" />
    ```
    
    ``` python
    class MyController(odoo.http.Controller):
        @http.route('/module_name/hello', auth='user', type='json')
        def hello(self):
            return {
                'html': """
                    <div>
                        <link href="/module_name/static/src/css/banner.css"
                            rel="stylesheet">
                        <h1>hello, world</h1>
                    </div> """
            }
    ```

<div class="todo">

Views main content section, with field, group & separator ?

</div>

## Inheritance

### Inheritance fields

The two following `~odoo.addons.base.ir_ui_view.View` fields are used to
specify inherited views.

  - `inherit_id` `~odoo.fields.Many2one`
    
    the current view's parent view, unset by default. Specify the parent
    using the <span class="title-ref">ref</span> attribute:
    
    ``` xml
    <field name="inherit_id" ref="library.view_book_form"/>
    ```

  - `mode` `~odoo.fields.Selection`: <span class="title-ref">extension /
    primary</span>
    
    inheritance mode, `extension` by default if `inherit_id` is set,
    `primary` otherwise.
    
    An example of where you would want to override `mode` while using
    `inherit_id` is delegation inheritance. In that case your derived
    model will be separate from its parent and views matching with one
    won't match with the other. Suppose you inherit from a view
    associated with the parent model and want to customize the derived
    view to show data from the derived model. The `mode` of the derived
    view needs to be set to `primary`, because it's the base (and maybe
    only) view for that derived model. Otherwise the `view matching
    <reference/views/inheritance/view-matching>` rules won't apply.

### View matching

  - if a view is requested by `(model, type)`, the view with the right
    model and type, `mode=primary` and the lowest priority is matched.
  - when a view is requested by `id`, if its mode is not `primary` its
    *closest* parent with mode `primary` is matched.

### View resolution

Resolution generates the final `arch` for a requested/matched `primary`
view:

1.  if the view has a parent, the parent is fully resolved then the
    current view's inheritance specs are applied
2.  if the view has no parent, its `arch` is used as-is
3.  the current view's children with mode `extension` are looked up and
    their inheritance specs are applied depth-first (a child view is
    applied, then its children, then its siblings)

The result of applying children views yields the final `arch`

<div class="todo">

NOTE on fields\_view\_get and link to ORM ?

</div>

### Inheritance specs

Inheritance specs are comprised of an element locator, to match the
inherited element in the parent view, and children element that will be
used to modify the inherited element.

There are three types of element locators for matching a target element:

  - An `xpath` element with an `expr` attribute. `expr` is an
    [XPath](https://en.wikipedia.org/wiki/XPath) expression\[1\] applied
    to the current `arch`, the first node it finds is the match
  - a `field` element with a `name` attribute, matches the first `field`
    with the same `name`. All other attributes are ignored during
    matching
  - any other element: the first element with the same name and
    identical attributes (ignoring `position` and `version` attributes)
    is matched

<!-- end list -->

``` xml
<xpath expr="page[@name='pg']/group[@name='gp']/field" position="inside">
  <field name="description"/>
</xpath>

<field name="res_id" position="after"/>

<div name="name" position="replace">
  <div name="name2">
    <field name="name2"/>
  </div>
</div>
```

The inheritance spec may have an optional `position` attribute
specifying how the matched node should be altered:

<div class="rst-class">

o-definition-list

</div>

  - `inside` (default)  
    the content of the inheritance spec is appended to the matched node

  - `replace`  
    the content of the inheritance spec replaces the matched node. Any
    text node containing only `$0` within the contents of the spec will
    be replaced by a complete copy of the matched node, effectively
    wrapping the matched node.

  - `after`  
    the content of the inheritance spec is added to the matched node's
    parent, after the matched node

  - `before`  
    the content of the inheritance spec is added to the matched node's
    parent, before the matched node

  - `attributes`  
    the content of the inheritance spec should be `attribute` elements
    with a `name` attribute and an optional body:
    
      - if the `attribute` element has a body, a new attributed named
        after its `name` is created on the matched node with the
        `attribute` element's text as value
      - if the `attribute` element has no body, the attribute named
        after its `name` is removed from the matched node. If no such
        attribute exists, an error is raised
    
    <!-- end list -->
    
    ``` xml
    <field name="sale_information" position="attributes">
      <attribute name="invisible">0</attribute>
      <attribute name="attrs">
        {'invisible': [('sale_ok', '=', False)], 'readonly': [('editable', '=', False)]}
      </attribute>
    </field>
    ```

  - `move`  
    can be used as a direct child of a inheritance spec with a `inside`,
    `replace`, `after` or `before` `position` attribute to move a node.
    
    ``` xml
    <xpath expr="//@target" position="after">
        <xpath expr="//@node" position="move"/>
    </xpath>
    
    <field name="target_field" position="after">
        <field name="my_field" position="move"/>
    </field>
    ```

A view's specs are applied sequentially.

## View types

### Activity

The Activity view is used to display the activities linked to the
records. The data are displayed in a chart with the records forming the
rows and the activity types the columns. The first cell of each row
displays a (customizable, see `templates`, quite similarly to
`reference/views/kanban`) card representing the corresponding record.
When clicking on others cells, a detailed description of all activities
of the same type for the record is displayed.

<div class="warning">

<div class="title">

Warning

</div>

The Activity view is only available when the `mail` module is installed,
and for the models that inherit from the `mail.activity.mixin`.

</div>

The root element of the Activity view is `<activity>`, it accepts the
following attributes:

<div class="rst-class">

o-definition-list

</div>

  - `string` (mandatory)  
    A title, which should describe the view

Possible children of the view element are:

<div class="rst-class">

o-definition-list

</div>

  - `field`  
    declares fields to use in activity *logic*. If the field is simply
    displayed in the activity view, it does not need to be pre-declared.
    
    Possible attributes are:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `name` (required)  
        the name of the field to fetch

  - `templates`  
    defines the `reference/qweb` templates. Cards definition may be
    split into multiple templates for clarity, but activity views *must*
    define at least one root template `activity-box`, which will be
    rendered once for each record.
    
    The activity view uses mostly-standard `javascript qweb
    <reference/qweb/javascript>` and provides the following context
    variables (see `reference/views/kanban` for more details):
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `widget`  
        the current :js`ActivityRecord`, can be used to fetch some
        meta-information. These methods are also available directly in
        the template context and don't need to be accessed via `widget`
    
      - `record`  
        an object with all the requested fields as its attributes. Each
        field has two attributes `value` and `raw_value`

### Calendar

Calendar views display records as events in a daily, weekly, monthly or
yearly calendar. Their root element is `<calendar>`. Available
attributes on the calendar view are:

<div class="rst-class">

o-definition-list

</div>

  - `date_start` (required)  
    name of the record's field holding the start date for the event

  - `date_stop`  
    name of the record's field holding the end date for the event, if
    `date_stop` is provided records become movable (via drag and drop)
    directly in the calendar

  - `date_delay`  
    alternative to `date_stop`, provides the duration of the event
    instead of its end date (unit: day)

  - `color`  
    name of a record field to use for *color segmentation*. Records in
    the same color segment are allocated the same highlight color in the
    calendar, colors are allocated semi-randomly. Displayed the
    display\_name/avatar of the visible record in the sidebar

  - `form_view_id`  
    view to open when the user create or edit an event. Note that if
    this attribute is not set, the calendar view will fall back to the
    id of the form view in the current action, if any.

  - `event_open_popup`  
    If the option 'event\_open\_popup' is set to true, then the calendar
    view will open events (or records) in a FormViewDialog. Otherwise,
    it will open events in a new form view (with a do\_action)

  - `quick_add`  
    enables quick-event creation on click: only asks the user for a
    `name` and tries to create a new event with just that and the
    clicked event time. Falls back to a full form dialog if the quick
    creation fails

  - `all_day`  
    name of a boolean field on the record indicating whether the
    corresponding event is flagged as day-long (and duration is
    irrelevant)

  - `mode`  
    Default display mode when loading the calendar. Possible attributes
    are: `day`, `week`, `month`, `year`

  - `scales`  
    Comma-separated list of scales to provide. By default, all scales
    are available. See mode for possible scale values.

  - `create`, `delete`  
    allows disabling the corresponding action in the view by setting the
    corresponding attribute to `false`

  - `<field>`  
    declares fields to aggregate or to use in kanban *logic*. If the
    field is simply displayed in the calendar cards.
    
    Fields can have additional attributes:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `invisible`  
        use "True" to hide the value in the cards
    
      - `avatar_field`  
        only for x2many field, to display the avatar instead of the
        display\_name in the cards
    
      - `write_model` and `write_field`  
        you can add a filter and save the result in the defined model,
        the filter is added in the sidebar
    
      - `filter` and `color`  
        use "True" to add this field in filter in the sidebar. You can
        specify a `color` field used to colorize the checkbox.

### Cohort

<span class="badge" style="background-color:#AD5E99">Enterprise feature</span>

The cohort view is used to display and understand the way some data
changes over a period of time. For example, imagine that for a given
business, clients can subscribe to some service. The cohort view can
then display the total number of subscriptions each month, and study the
rate at which client leave the service (churn). When clicking on a cell,
the cohort view will redirect you to a new action in which you will only
see the records contained in the cell's time interval; this action
contains a list view and a form view.

<div class="note">

<div class="title">

Note

</div>

By default the cohort view will use the same list and form views as
those defined on the action. You can pass a list view and a form view to
the context of the action in order to set/override the views that will
be used (the context keys to use being
<span class="title-ref">form\_view\_id</span> and
<span class="title-ref">list\_view\_id</span>)

</div>

For example, here is a very simple cohort view:

``` xml
<cohort string="Subscription" date_start="date_start" date_stop="date" interval="month"/>
```

The root element of the Cohort view is \<cohort\>, it accepts the
following attributes:

<div class="rst-class">

o-definition-list

</div>

  - `string` (mandatory)  
    A title, which should describe the view

  - `date_start` (mandatory)  
    A valid date or datetime field. This field is understood by the view
    as the beginning date of a record

  - `date_stop` (mandatory)  
    A valid date or datetime field. This field is understood by the view
    as the end date of a record. This is the field that will determine
    the churn.

  - `mode` (optional)  
    A string to describe the mode. It should be either 'churn' or
    'retention' (default). Churn mode will start at 0% and accumulate
    over time whereas retention will start at 100% and decrease over
    time.

  - `timeline` (optional)  
    A string to describe the timeline. It should be either 'backward' or
    'forward' (default). Forward timeline will display data from
    date\_start to date\_stop, whereas backward timeline will display
    data from date\_stop to date\_start (when the date\_start is in
    future / greater than date\_stop).

  - `interval` (optional)  
    A string to describe a time interval. It should be 'day', 'week',
    'month'' (default) or 'year'.

  - `measure` (optional)  
    A field that can be aggregated. This field will be used to compute
    the values for each cell. If not set, the cohort view will count the
    number of occurrences.

  - `<field>` (optional)  
    allows to specify a particular field in order to manage it from the
    available measures, it's main use is for hiding a field from the
    selectable measures:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `name` (required)  
        the name of the field to use in the view.
    
      - `string` (optional)  
        the name that would be used to display the field in the cohort
        view, overrides the default python String attribute of the
        field.
    
      - `invisible` (optional)  
        if true, the field will not appear either in the active measures
        nor in the selectable measures (useful for fields that do not
        make sense aggregated, such as fields in different units, e.g. €
        and $).

### Dashboard

<span class="badge" style="background-color:#AD5E99">Enterprise feature</span>

Like pivot and graph view, The dashboard view is used to display
aggregate data. However, the dashboard can embed sub views, which makes
it possible to have a more complete and interesting look on a given
dataset.

The dashboard view can display sub views, aggregates for some fields
(over a domain), or even *formulas* (expressions which involves one or
more aggregates). For example, here is a very simple dashboard:

``` xml
<dashboard>
    <view type="graph" ref="sale_report.view_order_product_graph"/>
    <group string="Sale">
        <aggregate name="price_total" field="price_total" widget="monetary"/>
        <aggregate name="order_id" field="order_id" string="Orders"/>
        <formula name="price_average" string="Price Average"
            value="record.price_total / record.order_id" widget="percentage"/>
    </group>
    <view type="pivot" ref="sale_report.view_order_product_pivot"/>
</dashboard>
```

The root element of the Dashboard view is \<dashboard\>, it does not
accept any attributes.

There are 5 possible type of tags in a dashboard view:

<div class="rst-class">

o-definition-list

</div>

  - `view`  
    declares a sub view.
    
    Admissible attributes are:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `type` (mandatory)  
        The type of the sub view. For example, *graph* or *pivot*.
    
      - `ref` (optional)  
        An xml id for a view. If not given, the default view for the
        model will be used.
    
      - `name` (optional)  
        A string which identifies this element. It is mostly useful to
        be used as a target for an xpath.

  - `group`  
    defines a column layout. This is actually very similar to the group
    element in a form view.
    
    Admissible attributes are:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `string` (optional)  
        A description which will be displayed as a group title.
    
      - `colspan` (optional)  
        The number of subcolumns in this group tag. By default, 6.
    
      - `col` (optional)  
        The number of columns spanned by this group tag (only makes
        sense inside another group). By default, 6.

  - `aggregate`  
    declares an aggregate. This is the value of an aggregate for a given
    field over the current domain.
    
    Note that aggregates are supposed to be used inside a group tag
    (otherwise the style will not be properly applied).
    
    Admissible attributes are:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `field` (mandatory)  
        The field name to use for computing the aggregate. Possible
        field types are:
        
          - `integer` (default group operator is sum)
          - `float` (default group operator is sum)
          - `many2one` (default group operator is count distinct)
    
      - `name` (mandatory)  
        A string to identify this aggregate (useful for formulas)
    
      - `string` (optional)  
        A short description that will be displayed above the value. If
        not given, it will fall back to the field string.
    
      - `domain` (optional)  
        An additional restriction on the set of records that we want to
        aggregate. This domain will be combined with the current domain.
    
      - `domain_label` (optional)  
        When the user clicks on an aggregate with a domain, it will be
        added to the search view as a facet. The string displayed for
        this facet can be customized with this attribute.
    
      - `group_operator` (optional)  
        A valid postgreSQL aggregate function identifier to use when
        aggregating values (see
        <https://www.postgresql.org/docs/9.5/static/functions-aggregate.html>).
        If not provided, By default, the group\_operator from the field
        definition is used. Note that no aggregation of field values is
        achieved if the group\_operator value is "".
        
        <div class="note">
        
        <div class="title">
        
        Note
        
        </div>
        
        The special aggregate function `count_distinct` (defined in
        odoo) can also be used here
        
        </div>
        
        ``` xml
        <aggregate name="price_total_max" field="price_total" group_operator="max"/>
        ```
    
      - `col` (optional)  
        The number of columns spanned by this tag (only makes sense
        inside a group). By default, 1.
    
      - `widget` (optional)  
        A widget to format the value (like the widget attribute for
        fields). For example, monetary.
    
      - `help` (optional)  
        A help message to dipslay in a tooltip (equivalent of help for a
        field in python)
    
      - `measure` (optional)  
        This attribute is the name of a field describing the measure
        that has to be used in the graph and pivot views when clicking
        on the aggregate. The special value \_\_count\_\_ can be used to
        use the count measure.
        
        ``` xml
        <aggregate name="total_ojects" string="Total Objects" field="id" group_operator="count" measure="__count__"/>
        ```
    
      - `clickable` (optional)  
        A boolean indicating if this aggregate should be clickable or
        not (default to true). Clicking on a clickable aggregate will
        change the measures used by the subviews and add the value of
        the domain attribute (if any) to the search view.
    
      - `value_label` (optional)  
        A string put on the right of the aggregate value. For example,
        it can be useful to indicate the unit of measure of the
        aggregate value.

  - `formula`  
    declares a derived value. Formulas are values computed from
    aggregates.
    
    Note that like aggregates, formulas are supposed to be used inside a
    group tag (otherwise the style will not be properly applied).
    
    Admissible attributes are:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `value` (mandatory)  
        A string expression that will be evaluated, with the builtin
        python evaluator (in the web client). Every aggregate can be
        used in the context, in the `record` variable. For example,
        `record.price_total / record.order_id`.
    
      - `name` (optional)  
        A string to identify this formula
    
      - `string` (optional)  
        A short description that will be displayed above the formula.
    
      - `col` (optional)  
        The number of columns spanned by this tag (only makes sense
        inside a group). By default, 1.
    
      - `widget` (optional)  
        A widget to format the value (like the widget attribute for
        fields). For example, monetary. By default, it is 'float'.
    
      - `help` (optional)  
        A help message to dipslay in a tooltip (equivalent of help for a
        field in python)
    
      - `value_label` (optional)  
        A string put on the right of the formula value. For example, it
        can be useful to indicate the unit of measure of the formula
        value.

  - `widget`  
    Declares a specialized widget to be used to display the information.
    This is a mechanism similar to the widgets in the form view.
    
    Admissible attributes are:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `name` (mandatory)  
        A string to identify which widget should be instantiated. The
        view will look into the `widget_registry` to get the proper
        class.
    
      - `col` (optional)  
        The number of columns spanned by this tag (only makes sense
        inside a group). By default, 1.

### Form

Form views are used to display the data from a single record. Their root
element is `<form>`. They are composed of regular
[HTML](https://en.wikipedia.org/wiki/HTML) with additional structural
and semantic components.

#### Structural components

Structural components provide structure or "visual" features with little
logic. They are used as elements or sets of elements in form views.

<div class="rst-class">

o-definition-list

</div>

  - `notebook`  
    defines a tabbed section. Each tab is defined through a `page` child
    element. Pages can have the following attributes:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `string` (required)  
        the title of the tab
    
      - `accesskey`  
        an HTML
        [accesskey](https://www.w3.org/TR/html5/editing.html#the-accesskey-attribute)
    
      - `attrs`  
        standard dynamic attributes based on record values
    
    <div class="note">
    
    <div class="title">
    
    Note
    
    </div>
    
    Note that `notebook` should not be placed within `group`
    
    </div>

  - `group`  
    used to define column layouts in forms. By default, groups define 2
    columns and most direct children of groups take a single column.
    `field` direct children of groups display a label by default, and
    the label and the field itself have a colspan of 1 each.
    
    The number of columns in a `group` can be customized using the `col`
    attribute, the number of columns taken by an element can be
    customized using `colspan`.
    
    Children are laid out horizontally (tries to fill the next column
    before changing row).
    
    Groups can have a `string` attribute, which is displayed as the
    group's title

  - `newline`  
    only useful within `group` elements, ends the current row early and
    immediately switches to a new row (without filling any remaining
    column beforehand)

  - `separator`  
    small horizontal spacing, with a `string` attribute behaves as a
    section title

  - `sheet`  
    can be used as a direct child to `form` for a narrower and more
    responsive form layout

  - `header`  
    combined with `sheet`, provides a full-width location above the
    sheet itself, generally used to display workflow buttons and status
    widgets

#### Semantic components

Semantic components tie into and allow interaction with the Odoo system.
Available semantic components are:

<div class="rst-class">

o-definition-list

</div>

  - `button`  
    call into the Odoo system, similar to `list view buttons
    <reference/views/list/button>`. In addition, the following attribute
    can be specified:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `special`  
        for form views opened in dialogs: `save` to save the record and
        close the dialog, `cancel` to close the dialog without saving.
    
      - `confirm`  
        confirmation message to display (and for the user to accept)
        before performing the button's Odoo call (also works in Kanban
        views).

  - `field`  
    renders (and allow editing of, possibly) a single field of the
    current record. Using several times a field in a form view is
    supported and the fields can receive different values for modifiers
    'invisible' and 'readonly'. However, the behavior is not guaranteed
    when several fields exist with different values for modifier
    'required'. Possible attributes of the field node are:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `name` (mandatory)  
        the name of the field to render
    
      - `id`  
        the node id. Useful when there are several occurrences of the
        same field in the view (see `label` component below). Default is
        the field name.
    
      - `widget`  
        fields have a default rendering based on their type (e.g.
        `~odoo.fields.Char`, `~odoo.fields.Many2one`). The `widget`
        attributes allows using a different rendering method and
        context.
        
        <div class="todo">
        
        list of widgets
        
        & options & specific attributes (e.g. widget=statusbar
        statusbar\_visible clickable)
        
        </div>
    
      - `options`  
        JSON object specifying configuration option for the field's
        widget (including default widgets)
    
      - `class`  
        HTML class to set on the generated element, common field classes
        are:
        
        <div class="rst-class">
        
        o-definition-list
        
        </div>
        
          - `oe_inline`  
            prevent the usual line break following fields
        
          - `oe_left`, `oe_right`  
            [floats](https://developer.mozilla.org/en-US/docs/Web/CSS/float)
            the field to the corresponding direction
        
          - `oe_read_only`, `oe_edit_only`  
            only displays the field in the corresponding form mode
        
          - `oe_avatar`  
            for image fields, displays images as "avatar" (square, 90x90
            maximum size, some image decorations)
    
      - `groups`  
        only displays the field for specific users
    
      - `on_change`  
        calls the specified method when this field's value is edited,
        can generate update other fields or display warnings for the
        user
        
        <div class="deprecated">
        
        8.0
        
        Use `odoo.api.onchange` on the model
        
        </div>
    
      - `attrs`  
        dynamic meta-parameters based on record values
    
      - `domain`  
        for relational fields only, filters to apply when displaying
        existing records for selection
    
      - `context`  
        for relational fields only, context to pass when fetching
        possible values
    
      - `readonly`  
        display the field in both readonly and edit mode, but never make
        it editable
    
      - `required`  
        generates an error and prevents saving the record if the field
        doesn't have a value
    
      - `nolabel`  
        don't automatically display the field's label, only makes sense
        if the field is a direct child of a `group` element
    
      - `placeholder`  
        help message to display in *empty* fields. Can replace field
        labels in complex forms. *Should not* be an example of data as
        users are liable to confuse placeholder text with filled fields
    
      - `mode`  
        for `~odoo.fields.One2many`, display mode (view type) to use for
        the field's linked records. One of `tree`, `form`, `kanban` or
        `graph`. The default is `tree` (a list display)
    
      - `help`  
        tooltip displayed for users when hovering the field or its label
    
      - `filename`  
        for binary fields, name of the related field providing the name
        of the file
    
      - `password`  
        indicates that a `~odoo.fields.Char` field stores a password and
        that its data shouldn't be displayed
    
      - `kanban_view_ref`  
        for opening specific kanban view when selecting records from
        m2o/m2m in mobile environment

  - `label`  
    when a `field` component isn't placed directly inside a `group`, or
    when its `nolabel` attribute is set, the field's label isn't
    automatically displayed alongside its value. The `label` component
    is the manual alternative of displaying the label of a field.
    Possible attributes are:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `for` (mandatory)  
        the reference to the field associated with the label. Can be
        either the name of a field, or its id (`id` attribute set on the
        `field`). When there are several occurrences of the same field
        in the view, and there are several `label` components associated
        with these `field` nodes, those labels must have unique `for`
        attributes (in this case referencing the `id` attribute of the
        corresponding `field` nodes).
    
      - `string`  
        the label to display. Display the field's label (coming from the
        field definition in the model) by default.
    
      - `class`  
        same as for `field` component.
    
      - `attrs`  
        same as for `field` component.

#### Generic structure

``` xml
<form>
  <header>
    <field name="state" widget="statusbar"/>
  </header>
  <sheet>
    <div class="oe_button_box">
      <BUTTONS/>
    </div>
    <group>
      <group>
        <field name="fname"/>
      </group>
    </group>
    <notebook>
      <page string="Page1">
        <group>
          <CONTENT/>
        </group>
      </page>
      <page string="Page2">
        <group>
          <CONTENT/>
        </group>
      </page>
    </notebook>
  </sheet>
</form>
```

<div class="todo">

classes for forms

</div>

<div class="todo">

widgets?

</div>

### Gantt

<span class="badge" style="background-color:#AD5E99">Enterprise feature</span>

Gantt views appropriately display Gantt charts (for scheduling).

The root element of gantt views is `<gantt/>`, it has no children but
can take the following attributes:

<div class="rst-class">

o-definition-list

</div>

  - `date_start` (required)  
    name of the field providing the start datetime of the event for each
    record.

  - `date_stop` (required)  
    name of the field providing the end duration of the event for each
    record.

  - `color`  
    name of the field used to color the pills according to its value

  - `decoration-{$name}`  
    allow changing the style of a row's text based on the corresponding
    record's attributes.
    
    Values are Python expressions. For each record, the expression is
    evaluated with the record's attributes as context values and if
    `true`, the corresponding style is applied to the row. Here are some
    of the other values available in the context:
    
      - `uid`: the id of the current user,
      - `today`: the current local date as a string of the form
        `YYYY-MM-DD`,
      - `now`: same as `today` with the addition of the current time.
        This value is formatted as `YYYY-MM-DD hh:mm:ss`.
    
    `{$name}` can be one of the following [bootstrap contextual
    color](https://getbootstrap.com/docs/3.3/components/#available-variations)
    (`danger`, `info`, `secondary`, `success` or `warning`).

  - `default_group_by`  
    name of a field to group tasks by

  - `disable_drag_drop`  
    if set to true, the gantt view will not have any drag\&drop support

  - `consolidation`  
    field name to display consolidation value in record cell

  - `consolidation_max`  
    dictionary with the "group by" field as key and the maximum
    consolidation value that can be reached before displaying the cell
    in red (e.g. `{"user_id": 100}`)

  - `consolidation_exclude`  
    name of the field that describes if the task has to be excluded from
    the consolidation if set to true it displays a striped zone in the
    consolidation line

  - `create`, `cell_create`, `edit`, `delete`, `plan`  
    allows *dis*abling the corresponding action in the view by setting
    the corresponding attribute to `false` (default: `true`).
    
      - `create`: If enabled, an `Add` button will be available in the
        control panel to create records.
      - `cell_create`: If enabled and `create` enabled, a "**+**" button
        will be displayed while hovering on a time slot cell to create a
        new record on that slot.
      - `edit`: If enabled, the opened records will be in edit mode
        (thus editable).
      - `plan`: If enabled and `edit` enabled, a "magnifying glass"
        button will be displayed on time slots to plan unassigned
        records into that time slot.
    
    <div class="example">
    
    When you do not want to create records on the gantt view and the
    beginning and end dates are required on the model, the planning
    feature should be disabled because no record will ever be found.
    
    </div>

  - `offset`  
    Depending on the scale, the number of units to add to today to
    compute the default period. Examples: An offset of +1 in
    default\_scale week will open the gantt view for next week, and an
    offset of -2 in default\_scale month will open the gantt view of 2
    months ago.

  - `progress`  
    name of a field providing the completion percentage for the record's
    event, between 0 and 100

  - `string`  
    title of the gantt view

  - `precision`  
    JSON object specifying snapping precisions for the pills in each
    scale.
    
    Possible values for scale `day` are (default: `hour`):
    
      - `hour`: records times snap to full hours (ex: 7:12 becomes 8:00)
      - `hour:half`: records times snap to half hours (ex: 7:12 becomes
        7:30)
      - `hour:quarter`: records times snap to half hours (ex: 7:12
        becomes 7:15)
    
    Possible values for scale `week` are (default: `day:half`):
    
      - `day`: records times snap to full days (ex: 7:28 AM becomes
        11:59:59 PM of the previous day, 10:32 PM becomes 12:00 PM of
        the current day)
      - `day:half`: records times snap to half hours (ex: 7:28 AM
        becomes 12:00 PM)
    
    Possible values for scale `month` are (default: `day:half`):
    
      - `day`: records times snap to full days (ex: 7:28 AM becomes
        11:59:59 PM of the previous day, 10:32 PM becomes 12:00 PM of
        the current day)
      - `day:half`: records times snap to half hours (ex: 7:28 AM
        becomes 12:00 PM)
    
    Scale `year` always snap to full day.
    
    Example of precision attribute: `{"day": "hour:quarter", "week":
    "day:half", "month": "day"}`

  - `total_row`  
    boolean to control whether the row containing the total count of
    records should be displayed. (default: `false`)

  - `collapse_first_level`  
    boolean to control whether it is possible to collapse each row if
    grouped by one field. (default: `false`, the collapse starts when
    grouping by two fields)

  - `display_unavailability`  
    boolean to mark the dates returned by the `gantt_unavailability`
    function of the model as available inside the gantt view. Records
    can still be scheduled in them, but their unavailability is visually
    displayed. (default: `false`)

  - `default_scale`  
    default scale when rendering the view. Possible values are (default:
    `month`):
    
      - `day`
      - `week`
      - `month`
      - `year`

  - `scales`  
    comma-separated list of allowed scales for this view. By default,
    all scales are allowed. For possible scale values to use in this
    list, see `default_scale`.

  - `templates`  
    defines the `reference/qweb` template `gantt-popover` which is used
    when the user hovers over one of the records in the gantt view.
    
    The gantt view uses mostly-standard `javascript qweb
    <reference/qweb/javascript>` and provides the following context
    variables:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `widget`  
        the current :js`GanttRow`, can be used to fetch some
        meta-information. The `getColor` method to convert in a color
        integer is also available directly in the template context
        without using `widget`.
    
      - `on_create`  
        If specified when clicking the add button on the view, instead
        of opening a generic dialog, launch a client action. this should
        hold the xmlid of the action (eg:
        `on_create="%(my_module.my_wizard)d"`

  - `form_view_id`  
    view to open when the user create or edit a record. Note that if
    this attribute is not set, the gantt view will fall back to the id
    of the form view in the current action, if any.

  - `dynamic_range`  
    if set to true, the gantt view will start at the first record,
    instead of starting at the beginning of the year/month/day.

  - `thumbnails`  
    This allows to display a thumbnail next to groups name if the group
    is a relationnal field. This expects a python dict which keys are
    the name of the field on the active model. Values are the names of
    the field holding the thumbnail on the related model.
    
    Example: tasks have a field user\_id that reference res.users. The
    res.users model has a field image that holds the avatar, then:
    
    ``` xml
    <gantt
       date_start="date_start"
       date_stop="date_stop"
       thumbnails="{'user_id': 'image_128'}"
     >
     </gantt>
    ```
    
    will display the users avatars next to their names when grouped by
    user\_id.

### Graph

The graph view is used to visualize aggregations over a number of
records or record groups. Its root element is `<graph>` which can take
the following attributes:

<div class="rst-class">

o-definition-list

</div>

  - `type`  
    one of `bar` (default), `pie` and `line`, the type of graph to use

  - `stacked`  
    only used for `bar` charts. If present and set to `True`, stacks
    bars within a group

  - `disable_linking`  
    set to `True` to prevent from redirecting clicks on graph to list
    view

  - `order`  
    if set, x-axis values will be sorted by default according their
    measure with respect to the given order (`asc` or `desc`). Only used
    for `bar` and `pie` charts.

The only allowed element within a graph view is `field` which can have
the following attributes:

<div class="rst-class">

o-definition-list

</div>

  - `name` (required)  
    the name of a field to use in the view. If used for grouping (rather
    than aggregating)

  - `title` (optional)  
    string displayed on the top of the graph.

  - `invisible` (optional)  
    if true, the field will not appear either in the active measures nor
    in the selectable measures.

  - `type`  
    indicates whether the field should be used as a grouping criteria or
    as an aggregated value within a group. Possible values are:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `row` (default)  
        groups by the specified field. All graph types support at least
        one level of grouping, some may support more.
    
      - `col`  
        authorized in graph views but only used by pivot tables
    
      - `measure`  
        field to aggregate within a group

  - `interval`  
    on date and datetime fields, groups by the specified interval
    (`day`, `week`, `month`, `quarter` or `year`) instead of grouping on
    the specific datetime (fixed second resolution) or date (fixed day
    resolution).

The measures are automatically generated from the model fields; only the
aggregatable fields are used. Those measures are also alphabetically
sorted on the string of the field.

<div class="warning">

<div class="title">

Warning

</div>

graph view aggregations are performed on database content, non-stored
function fields can not be used in graph views

</div>

### Kanban

The kanban view is a [kanban
board](https://en.wikipedia.org/wiki/Kanban_board) visualisation: it
displays records as "cards", halfway between a `list view
<reference/views/list>` and a non-editable `form view
<reference/views/form>`. Records may be grouped in columns for use in
workflow visualisation or manipulation (e.g. tasks or work-progress
management), or ungrouped (used simply to visualize records).

<div class="note">

<div class="title">

Note

</div>

The kanban view will load and display a maximum of ten columns. Any
column after that will be closed (but can still be opened by the user).

</div>

The root element of the Kanban view is `<kanban>`, it can use the
following attributes:

<div class="rst-class">

o-definition-list

</div>

  - `default_group_by`  
    whether the kanban view should be grouped if no grouping is
    specified via the action or the current search. Should be the name
    of the field to group by when no grouping is otherwise specified

  - `default_order`  
    cards sorting order used if the user has not already sorted the
    records (via the list view)

  - `class`  
    adds HTML classes to the root HTML element of the Kanban view

  - `examples`  
    if set to a key in the
    [KanbanExamplesRegistry](https://github.com/odoo/odoo/blob/99821fdcf89aa66ac9561a972c6823135ebf65c0/addons/web/static/src/js/views/kanban/kanban_examples_registry.js),
    examples on column setups will be available in the grouped kanban
    view.
    [Here](https://github.com/odoo/odoo/blob/99821fdcf89aa66ac9561a972c6823135ebf65c0/addons/project/static/src/js/project_task_kanban_examples.js#L27)
    is an example of how to define those setups.

  - `group_create`  
    whether the "Add a new column" bar is visible or not. Default: true.

  - `group_delete`  
    whether groups can be deleted via the context menu. Default: true.

  - `group_edit`  
    whether groups can be edited via the context menu. Default: true.

  - `archivable`  
    whether records belonging to a column can be archived / restored if
    an `active` field is defined on the model. Default: true.

  - `quick_create`  
    whether it should be possible to create records without switching to
    the form view. By default, `quick_create` is enabled when the Kanban
    view is grouped by many2one, selection, char or boolean fields, and
    disabled when not.

  - `quick_create_view`  
    `form` view reference, specifying the view used for records quick
    creation.

  - `records_draggable`  
    whether it should be possible to drag records when kanban is
    grouped. Default: true.
    
    Set to `true` to always enable it, and to `false` to always disable
    it.

<div class="todo">

VFE missing information on on\_create attribute of kanban views.

</div>

Possible children of the view element are:

<div class="rst-class">

o-definition-list

</div>

  - `field`  
    declares fields to use in kanban *logic*. If the field is simply
    displayed in the kanban view, it does not need to be pre-declared.
    
    Possible attributes are:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `name` (required)  
        the name of the field to fetch

  - `progressbar`  
    declares a progressbar element to put on top of kanban columns.
    
    Possible attributes are:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `field` (required)  
        the name of the field whose values are used to subgroup column's
        records in the progressbar
    
      - `colors` (required)  
        JSON mapping the above field values to either "danger",
        "warning", "success" or "muted" colors
    
      - `sum_field` (optional)  
        the name of the field whose column's records' values will be
        summed and displayed next to the progressbar (if omitted,
        displays the total number of records)

  - `templates`  
    defines a list of `reference/qweb` templates. Cards definition may
    be split into multiple templates for clarity, but kanban views
    *must* define at least one root template `kanban-box`, which will be
    rendered once for each record.
    
    The kanban view uses mostly-standard `javascript qweb
    <reference/qweb/javascript>` and provides the following context
    variables:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `widget`  
        the current :js`KanbanRecord`, can be used to fetch some
        meta-information. These methods are also available directly in
        the template context and don't need to be accessed via `widget`
    
      - `record`  
        an object with all the requested fields as its attributes. Each
        field has two attributes `value` and `raw_value`, the former is
        formatted according to current user parameters, the latter is
        the direct value from a `~odoo.models.Model.read` (except for
        date and datetime fields that are [formatted according to user's
        locale](https://github.com/odoo/odoo/blob/a678bd4e/addons/web_kanban/static/src/js/kanban_record.js#L102))
    
      - `context`  
        the current context, coming from the action, and the one2many or
        many2many field in the case of a Kanban view embedded in a Form
        view
    
      - `user_context`  
        self-explanatory
    
      - `read_only_mode`  
        self-explanatory
    
      - `selection_mode`  
        set to true when kanban view is opened in mobile environment
        from m2o/m2m field for selecting records.
        
        <div class="note">
        
        <div class="title">
        
        Note
        
        </div>
        
        clicking on m2o/m2m field in mobile environment opens kanban
        view
        
        </div>
        
        **buttons and fields**
        
        While most of the Kanban templates are standard
        `reference/qweb`, the Kanban view processes `field`, `button`
        and `a` elements specially:
        
          - by default fields are replaced by their formatted value,
            unless the `widget` attribute is specified, in which case
            their rendering and behavior depends on the corresponding
            widget. Possible values are (among others):
            
            <div class="rst-class">
            
            o-definition-list
            
            </div>
            
              - `handle`  
                for `sequence` (or `integer`) fields by which records
                are sorted, allows to drag\&drop records to reorder
                them.
            
            <div class="todo">
            
            list widgets?
            
            </div>
        
          - buttons and links with a `type` attribute become perform
            Odoo-related operations rather than their standard HTML
            function. Possible types are:
            
            <div class="rst-class">
            
            o-definition-list
            
            </div>
            
              - `action`, `object`  
                standard behavior for `Odoo buttons
                <reference/views/list/button>`, most attributes relevant
                to standard Odoo buttons can be used.
            
              - `open`  
                opens the card's record in the form view in read-only
                mode
            
              - `edit`  
                opens the card's record in the form view in editable
                mode
            
              - `delete`  
                deletes the card's record and removes the card
        
        <div class="todo">
        
          - kanban-specific CSS
          - kanban structures/widgets (vignette, details, ...)
        
        </div>

If you need to extend the Kanban view, see :js`KanbanRecord`.

### List

The root element of list views is `<tree>`\[2\]. The list view's root
can have the following attributes:

<div class="rst-class">

o-definition-list

</div>

  - `editable`  
    by default, selecting a list view's row opens the corresponding
    `form view <reference/views/form>`. The `editable` attributes makes
    the list view itself editable in-place.
    
    Valid values are `top` and `bottom`, making *new* records appear
    respectively at the top or bottom of the list.
    
    The architecture for the inline `form view <reference/views/form>`
    is derived from the list view. Most attributes valid on a `form view
    <reference/views/form>`'s fields and buttons are thus accepted by
    list views although they may not have any meaning if the list view
    is non-editable
    
    <div class="note">
    
    <div class="title">
    
    Note
    
    </div>
    
    if the `edit` attribute is set to `false`, the `editable` option
    will be ignored.
    
    </div>

  - `multi_edit`  
    editable or not editable list can activate the multi-editing feature
    by defining the <span class="title-ref">multi\_edit=1</span>

  - `default_order`  
    overrides the ordering of the view, replacing the model's order
    (`~odoo.models.BaseModel._order` model attribute). The value is a
    comma-separated list of fields, postfixed by `desc` to sort in
    reverse order:
    
    ``` xml
    <tree default_order="sequence,name desc">
    ```

  - `decoration-{$name}`  
    allow changing the style of a row's text based on the corresponding
    record's attributes.
    
    `{$name}` can be `bf` (`font-weight: bold`), `it` (`font-style:
    italic`), or any [bootstrap contextual
    color](https://getbootstrap.com/docs/3.3/components/#available-variations)
    (`danger`, `info`, `muted`, `primary`, `success` or `warning`).

  - `create`, `edit`, `delete`, `import`, `export_xlsx`  
    allows *dis*abling the corresponding action in the view by setting
    the corresponding attribute to `false`

  - `limit`  
    the default size of a page. It must be a positive integer

  - `groups_limit`  
    when the list view is grouped, the default number of groups of a
    page. It must be a position integer

  - `expand`  
    when the list view is grouped, automatically open the first level of
    groups if set to true (default: false)

Possible children elements of the list view are:

<div id="reference/views/list/button">

<div class="rst-class">

o-definition-list

</div>

</div>

  - `button`  
    displays a button in a list cell
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `icon`  
        icon to use to display the button
    
      - `string`
        
          - if there is no `icon`, the button's text
          - if there is an `icon`, `alt` text for the icon
    
      - `type`  
        type of button, indicates how it clicking it affects Odoo:
        
        <div class="rst-class">
        
        o-definition-list
        
        </div>
        
          - `object`  
            call a method on the list's model. The button's `name` is
            the method, which is called with the current row's record id
            and the current context.
        
          - `action`  
            load an execute an `ir.actions`, the button's `name` is the
            database id of the action. The context is expanded with the
            list's model (as `active_model`), the current row's record
            (`active_id`) and all the records currently loaded in the
            list (`active_ids`, may be just a subset of the database
            records matching the current search)
    
      - `name`  
        see `type`
    
      - `args`  
        see `type`
    
      - `attrs`  
        dynamic attributes based on record values.
        
        A mapping of attributes to domains, domains are evaluated in the
        context of the current row's record, if `True` the corresponding
        attribute is set on the cell.
        
        Possible attribute is `invisible` (hides the button).
    
      - `states`  
        shorthand for `invisible` `attrs`: a list of states, comma
        separated, requires that the model has a `state` field and that
        it is used in the view.
        
        Makes the button `invisible` if the record is *not* in one of
        the listed states
        
        <div class="danger">
        
        <div class="title">
        
        Danger
        
        </div>
        
        Using `states` in combination with `attrs` may lead to
        unexpected results as domains are combined with a logical AND.
        
        </div>
    
      - `context`  
        merged into the view's context when performing the button's Odoo
        call
    
    <div class="todo">
    
    declared but unused: help
    
    </div>

  - `field`  
    defines a column where the corresponding field should be displayed
    for each record. Can use the following attributes:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `name`  
        the name of the field to display in the current model. A given
        name can only be used once per view
    
      - `string`  
        the title of the field's column (by default, uses the `string`
        of the model's field)
    
      - `invisible`  
        fetches and stores the field, but doesn't display the column in
        the table. Necessary for fields which shouldn't be displayed but
        are used by e.g. `@colors`
    
      - `groups`  
        lists the groups which should be able to see the field
    
      - `widget`  
        alternate representations for a field's display. Possible list
        view values are (among others):
        
        <div class="rst-class">
        
        o-definition-list
        
        </div>
        
          - `progressbar`  
            displays `float` fields as a progress bar.
        
          - `handle`  
            for `sequence` (or `integer`) fields by which records are
            sorted, instead of displaying the field's value just
            displays a drag\&drop icon to reorder records.
    
      - `sum`, `avg`  
        displays the corresponding aggregate at the bottom of the
        column. The aggregation is only computed on *currently
        displayed* records. The aggregation operation must match the
        corresponding field's `group_operator`
    
      - `attrs`  
        dynamic attributes based on record values. Only effects the
        current field, so e.g. `invisible` will hide the field but leave
        the same field of other records visible, it will not hide the
        column itself
    
      - `width` (for `editable`)  
        when there is no data in the list, the width of a column can be
        forced by setting this attribute. The value can be an absolute
        width (e.g. '100px'), or a relative weight (e.g. '3', meaning
        that this column will be 3 times larger than the others). Note
        that when there are records in the list, we let the browser
        automatically adapt the column's widths according to their
        content, and this attribute is thus ignored.
    
      - `decoration-{$name}`  
        allow changing the style of a cell's text based on the
        corresponding record's attributes.
        
        `{$name}` can be `bf` (`font-weight: bold`), `it` (`font-style:
        italic`), or any [bootstrap contextual
        color](https://getbootstrap.com/docs/3.3/components/#available-variations)
        (`danger`, `info`, `muted`, `primary`, `success` or `warning`).
    
      - `nolabel`  
        if set to "1", the column header will remain empty. Also, the
        column won't be sortable.
    
      - `optional`  
        makes the column optional. If set to "hide", the column is
        hidden by default. If set to "show", the column is visible by
        default. User visibility choices are stored in the browser local
        storage.
    
    <div class="note">
    
    <div class="title">
    
    Note
    
    </div>
    
    if the list view is `editable`, any field attribute from the `form
    view <reference/views/form>` is also valid and will be used when
    setting up the inline form view.
    
    </div>
    
    <div class="note">
    
    <div class="title">
    
    Note
    
    </div>
    
    In case of list sub-views (One2many/Many2many display in a form
    view), The attribute `column_invisible` can be useful to hide a
    column depending on the parent object.
    
    ``` xml
    <field name="product_is_late" attrs="{'column_invisible': [('parent.has_late_products', '=', False)]}"/>
    ```
    
    </div>
    
    <div class="note">
    
    <div class="title">
    
    Note
    
    </div>
    
    When a list view is grouped, numeric fields are aggregated and
    displayed for each group. Also, if there are too many records in a
    group, a pager will appear on the right of the group row. For this
    reason, it is not a good practice to have a numeric field in the
    last column, when the list view is in a situation where it can be
    grouped (it is however fine for x2manys field in a form view: they
    cannot be grouped).
    
    </div>

  - `groupby`  
    defines custom headers (with buttons) for the current view when
    grouping records on many2one fields. It is also possible to add
    <span class="title-ref">field</span>, inside the
    <span class="title-ref">groupby</span> which can be used for
    modifiers. These fields thus belong on the many2one comodel. These
    extra fields will be fetched in batch.
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `name`  
        the name of a many2one field (on the current model). Custom
        header will be displayed when grouping the view on this field
        name.
    
    <!-- end list -->
    
    ``` xml
    <groupby name="partner_id">
      <field name="name"/> <!-- name of partner_id -->
      <button type="edit" name="edit" string="Edit"/>
      <button type="object" name="my_method" string="Button1"
        attrs="{'invisible': [('name', '=', 'Georges')]}"/>
    </groupby>
    ```
    
    A special button (<span class="title-ref">type="edit"</span>) can be
    defined to open the many2one form view.

  - `control`  
    defines custom controls for the current view.
    
    This makes sense if the parent `tree` view is inside a One2many
    field.
    
    Does not support any attribute, but can have children:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `create`  
        adds a button to create a new element on the current list.
        
        <div class="rst-class">
        
        o-definition-list
        
        </div>
        
        <div class="note">
        
        <div class="title">
        
        Note
        
        </div>
        
        If any `create` is defined, it will overwrite the default "add a
        line" button.
        
        </div>
        
        The following attributes are supported:
        
        <div class="rst-class">
        
        o-definition-list
        
        </div>
        
          - `string` (required)  
            The text displayed on the button.
        
          - `context`  
            This context will be merged into the existing context when
            retrieving the default value of the new record.
            
            For example it can be used to override default values.
    
    The following example will override the default "add a line" button
    by replacing it with 3 new buttons: "Add a product", "Add a section"
    and "Add a note".
    
    "Add a product" will set the field 'display\_type' to its default
    value.
    
    The two other buttons will set the field 'display\_type' to be
    respectively 'line\_section' and 'line\_note'.
    
    ``` xml
    <control>
      <create
        string="Add a product"
      />
      <create
        string="Add a section"
        context="{'default_display_type': 'line_section'}"
      />
      <create
        string="Add a note"
        context="{'default_display_type': 'line_note'}"
      />
    </control>
    ```

### Map

<span class="badge" style="background-color:#AD5E99">Enterprise feature</span>

This view is able to display records on a map and the routes between
them. The record are represented by pins. It also allows the
visualization of fields from the model in a popup tied to the record's
pin.

<div class="note">

<div class="title">

Note

</div>

The model on which the view is applied should contains a res.partner
many2one since the view relies on the res.partner's address and
coordinates fields to localize the records.

</div>

#### Api

The view uses location data platforms' api to fetch the tiles (the map's
background), do the geoforwarding (converting addresses to a set of
coordinates) and fetch the routes. The view implements two api, the
default one, openstreet map is able to fetch
[tiles](https://wiki.openstreetmap.org/wiki/Tile_data_server) and do
[geoforwarding](https://nominatim.org/release-docs/develop/). This api
does not require a token. As soon as a valid
[MapBox](https://docs.mapbox.com/api/) token is provided in the general
settings the view switches to the Mapbox api. This api is faster and
allows the computation of routes. The token are available by [signing
up](https://account.mapbox.com/auth/signup/) to MapBox

#### Structural components

The view's root element is `<map>` multiple attributes are allowed

<div class="rst-class">

o-definition-list

</div>

  - `res_partner`  
    Contains the res.partner many2one. If not provided the view will
    resort to create an empty map.

  - `default_order`  
    If a field is provided the view will override the model's default
    order. The field must be part of the model on which the view is
    applied not from res.partner

  - `routing`  
    if `true` the routes between the records will be shown. The view
    still needs a valid MapBox token and at least two located records.
    (i.e the records has a res.partner many2one and the partner has a
    address or valid coordinates)

  - `hide_name`  
    if `true` hide a name from the marker's popup (default: false)

  - `hide_address`  
    if `true` hide a address from the marker's popup (default: false)

The `<map>` element can contain multiple `<field>` elements. Each
`<field>` element will be interpreted as a line in the marker's popup.
The field's attributes are the following:

<div class="rst-class">

o-definition-list

</div>

  - `name`  
    The field to display.

  - `string`  
    This string will be displayed before the field's content. It Can be
    used as a description.

  - `limit`  
    The size of a page (default: 80). It must be a positive integer.

No attribute or element is mandatory but as stated above if no
res.partner many2one is provided the view won't be able to locate
records.

  - For example here is a map:
    
    ``` xml
    <map res_partner="partner_id" default_order="date_begin" routing="true" hide_name="true">
        <field name="partner_id" string="Customer Name"/>
    </map>
    ```

### Pivot

The pivot view is used to visualize aggregations as a [pivot
table](https://en.wikipedia.org/wiki/Pivot_table). Its root element is
`<pivot>` which can take the following attributes:

<div class="rst-class">

o-definition-list

</div>

  - `disable_linking`  
    Set to `True` to remove table cell's links to list view.

  - `display_quantity`  
    Set to `true` to display the Quantity column by default.

  - `default_order`  
    The name of the measure and the order (asc or desc) to use as
    default order in the view.
    
    ``` xml
    <pivot default_order="foo asc">
       <field name="foo" type="measure"/>
    </pivot>
    ```

The only allowed element within a pivot view is `field` which can have
the following attributes:

<div class="rst-class">

o-definition-list

</div>

  - `name` (required)  
    the name of a field to use in the view. If used for grouping (rather
    than aggregating)

  - `string`  
    the name that will be used to display the field in the pivot view,
    overrides the default python String attribute of the field.

  - `type`  
    indicates whether the field should be used as a grouping criteria or
    as an aggregated value within a group. Possible values are:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `row` (default)  
        groups by the specified field, each group gets its own row.
    
      - `col`  
        creates column-wise groups
    
      - `measure`  
        field to aggregate within a group
    
      - `interval`  
        on date and datetime fields, groups by the specified interval
        (`day`, `week`, `month`, `quarter` or `year`) instead of
        grouping on the specific datetime (fixed second resolution) or
        date (fixed day resolution).

  - `invisible`  
    if true, the field will not appear either in the active measures nor
    in the selectable measures (useful for fields that do not make sense
    aggregated, such as fields in different units, e.g. € and $).

The measures are automatically generated from the model fields; only the
aggregatable fields are used. Those measures are also alphabetically
sorted on the string of the field.

<div class="warning">

<div class="title">

Warning

</div>

like the graph view, the pivot aggregates data on database content which
means that non-stored function fields can not be used in pivot views

</div>

In Pivot view a `field` can have a `widget` attribute to dictate its
format. The widget should be a field formatter, of which the most
interesting are `date`, `datetime`, `float_time`, and `monetary`.

For instance a timesheet pivot view could be defined as:

    <pivot string="Timesheet">
        <field name="employee_id" type="row"/>
        <field name="date" interval="month" type="col"/>
        <field name="unit_amount" type="measure" widget="float_time"/>
    </pivot>

### QWeb

QWeb views are standard `reference/qweb` templates inside a view's
`arch`. They don't have a specific root element. Because QWeb views
don't have a specific root element, their type must be specified
explicitly (it can not be inferred from the root element of the `arch`
field).

QWeb views have two use cases:

  - they can be used as frontend templates, in which case
    `reference/data/template` should be used as a shortcut.
  - they can be used as actual qweb views (opened inside an action), in
    which case they should be defined as regular view with an explicit
    `type` (it can not be inferred) and a model.

The main additions of qweb-as-view to the basic qweb-as-template are:

  - qweb-as-view has a special case for a `<nav>` element bearing the
    CSS class `o_qweb_cp_buttons`: its contents should be buttons and
    will be extracted and moved to the control panel's button area, the
    `<nav>` itself will be removed, this is a work-around to control
    panel views not existing yet

  - qweb-as-view rendering adds several items to the standard qweb
    rendering context:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `model`  
        the model to which the qweb view is bound
    
      - `domain`  
        the domain provided by the search view
    
      - `context`  
        the context provided by the search view
    
      - `records`  
        a lazy proxy to `model.search(domain)`, this can be used if you
        just want to iterate the records and not perform more complex
        operations (e.g. grouping)

  - qweb-as-view also provides additional rendering hooks:
    
      - `_qweb_prepare_context(view_id, domain)` prepares the rendering
        context specific to qweb-as-view
      - `qweb_render_view(view_id, domain)` is the method called by the
        client and will call the context-preparation methods and
        ultimately `env['ir.qweb'].render()`.

### Search

Search views are a break from previous view types in that they don't
display *content*: although they apply to a specific model, they are
used to filter other view's content (generally aggregated views e.g.
`reference/views/list` or `reference/views/graph`). Beyond that
difference in use case, they are defined the same way.

The root element of search views is `<search>`. It takes no attributes.

Possible children elements of the search view are:

<div class="rst-class">

o-definition-list

</div>

  - `field`  
    fields define domains or contexts with user-provided values. When
    search domains are generated, field domains are composed with one
    another and with filters using **AND**.
    
    Fields can have the following attributes:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `name`  
        the name of the field to filter on
    
      - `string`  
        the field's label
    
      - `operator`  
        by default, fields generate domains of the form `[({name},
        {operator}, {provided_value})]` where `name` is the field's name
        and `provided_value` is the value provided by the user, possibly
        filtered or transformed (e.g. a user is expected to provide the
        *label* of a selection field's value, not the value itself).
        
        The `operator` attribute allows overriding the default operator,
        which depends on the field's type (e.g. `=` for float fields but
        `ilike` for char fields)
    
      - `filter_domain`  
        complete domain to use as the field's search domain, can use a
        `self` variable to inject the provided value in the custom
        domain. Can be used to generate significantly more flexible
        domains than `operator` alone (e.g. searches on multiple fields
        at once)
        
        If both `operator` and `filter_domain` are provided,
        `filter_domain` takes precedence.
    
      - `context`  
        allows adding context keys, including the user-provided values
        (which as for `domain` are available as a `self` variable, an
        array of values e.g. `[id_1, id_2]` for a
        `~odoo.fields.Many2one` field). By default, fields don't
        generate domains.
        
        <div class="note">
        
        <div class="title">
        
        Note
        
        </div>
        
        the domain and context are inclusive and both are generated if a
        `context` is specified. To only generate context values, set
        `filter_domain` to an empty list: `filter_domain="[]"`
        
        </div>
    
      - `groups`  
        make the field only available to specific users
    
      - `domain`  
        if the field can provide an auto-completion (e.g.
        `~odoo.fields.Many2one`), filters the possible completion
        results.

  - `filter`  
    a filter is a predefined toggle in the search view, it can only be
    enabled or disabled. Its main purposes are to add data to the search
    context (the context passed to the data view for
    searching/filtering), or to append new sections to the search
    filter.
    
    Filters can have the following attributes:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `string` (required)  
        the label of the filter
    
      - `domain` (optional)  
        an Odoo `domain <reference/orm/domains>`, will be appended to
        the action's domain as part of the search domain.
    
      - `date` (optional)  
        the name of a field of type `date` or `datetime`. Using this
        attribute has the effect to create a set of filters available in
        a submenu of the filters menu. The filters proposed are time
        dependent but not dynamic in the sense that their domains are
        evaluated at the time of the control panel instantiation.
        
        Example:
        
        ``` xml
        <filter name="filter_create_date" date="create_date" string="Creation Date"/>
        ```
        
        The example above allows to easily search for records with
        creation date field values in one of the periods below (if the
        current month is August 2019).
        
        ``` text
        Create Date >
          August
          July
          June
          Q4
          Q3
          Q2
          Q1
        --------------
          2019
          2018
          2017
        ```
        
        Multi selection of options is allowed.
    
      - `default_period` (optional)  
        only makes sense for a filter with non empty `date` attribute.
        determines which period is activated if the filter is in the
        default set of filters activated at the view initialization. If
        not provided, 'this\_month' is used by default.
        
        To choose among the following options: today, this\_week,
        this\_month, last\_month, antepenultimate\_month,
        fourth\_quarter, third\_quarter, second\_quarter,
        first\_quarter, this\_year, last\_year, antepenultimate\_year.
        
        Example:
        
        ``` xml
        <filter name="filter_create_date" date="create_date" string="Creation Date" default_period="this_week"/>
        ```
    
      - `context`  
        a Python dictionary, merged into the action's domain to generate
        the search domain
        
        The key `group_by` can be used to define a groupby available in
        the 'Group By' menu. The 'group\_by' value can be a valid field
        name.
        
        ``` xml
        <filter name="groupby_category" string="Category" context="{'group_by': 'category_id'}"/>
        ```
        
        The groupby defined above allows to group data by category.
        
        When the field is of type `date` or `datetime`, the filter
        generates a submenu of the Group By menu in which the following
        interval options are available: day, week, month, quarter, year.
        
        In case the filter is in the default set of filters activated at
        the view initialization, the records are grouped by month by
        default. This can be changed by using the syntax
        'date\_field:interval' as in the following example.
        
        Example:
        
        ``` xml
        <filter name="groupby_create_date" string="Creation Date" context="{'group_by': 'create_date:week'}"/>
        ```
        
        <div class="note">
        
        <div class="title">
        
        Note
        
        </div>
        
        The results of read\_groups grouped on a field may be influenced
        by its group\_expand attribute, allowing to display empty groups
        when needed. For more information, please refer to
        `~odoo.fields.Field` attributes documentation.
        
        </div>
    
      - `name`  
        logical name for the filter, can be used to `enable it by
        default
        <reference/views/search/defaults>`, can also be used as
        `inheritance hook <reference/views/inheritance>`
    
      - `help`  
        a longer explanatory text for the filter, may be displayed as a
        tooltip
    
      - `groups`  
        makes a filter only available to specific users
    
    <div class="tip">
    
    <div class="title">
    
    Tip
    
    </div>
    
    <div class="versionadded">
    
    7.0
    
    </div>
    
    Sequences of filters (without non-filters separating them) are
    treated as inclusively composited: they will be composed with `OR`
    rather than the usual `AND`, e.g.
    
        <filter domain="[('state', '=', 'draft')]"/>
        <filter domain="[('state', '=', 'done')]"/>
    
    if both filters are selected, will select the records whose `state`
    is `draft` or `done`, but
    
        <filter domain="[('state', '=', 'draft')]"/>
        <separator/>
        <filter domain="[('delay', '<', 15)]"/>
    
    if both filters are selected, will select the records whose `state`
    is `draft` **and** `delay` is below 15.
    
    </div>

  - `separator`  
    can be used to separates groups of filters in simple search views

  - `group`  
    can be used to separate groups of filters, more readable than
    `separator` in complex search views

  - `searchpanel`  
    allows to display a search panel on the left of any multi records
    view. By default, the list and kanban views have the searchpanel
    enabled. The search panel can be activated on other views with the
    attribute:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `view_types`  
        a comma separated list of view types on which to enable the
        search panel default: 'tree,kanban'
    
    This tool allows to quickly filter data on the basis of given
    fields. The fields are specified as direct children of the
    `searchpanel` with tag name `field`, and the following attributes:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `name` (mandatory)  
        the name of the field to filter on
    
      - `select`  
        determines the behavior and display. Possible values are
        
          - `one` (default) at most one value can be selected. Supported
            field types are many2one and selection.
          - `multi` several values can be selected (checkboxes).
            Supported field types are many2one, many2many and selection.
    
      - `groups`  
        restricts to specific users
    
      - `string`  
        determines the label to display
    
      - `icon`  
        specifies which icon is used
    
      - `color`  
        determines the icon color
    
    Additional optional attributes are available in the `multi` case:
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `enable_counters`  
        default is false. If set to true the record counters will be
        computed and displayed if non-zero.
        
        This feature has been implemented in case performances would be
        too bad.
        
        Another way to solve performance issues is to properly override
        the `search_panel_select_range` and
        `search_panel_select_multi_range` methods.
    
      - `expand`  
        default is false. If set to false categories or filters with 0
        records will be hidden.
    
      - `limit`  
        default is 200. Integer determining the maximal number of values
        to fetch for the field. If the limit is reached, no values will
        be displayed in the search panel and an error message will
        appear instead because we consider that is useless / bad
        performance-wise. All values will be fetched if set to 0.
    
    Additional optional attributes are available according to the chosen
    case:
    
      - For the `one` case:
        
        <div class="rst-class">
        
        o-definition-list
        
        </div>
        
          - `hierarchize`  
            (only available for many2one fields) default is true.
            Handles the display style of categories :
            
            If set to true child categories will appear under their
            related parent. If not, all categories will be displayed on
            the same level.
    
      - For the `multi` case:
        
        <div class="rst-class">
        
        o-definition-list
        
        </div>
        
          - `domain`:  
            determines conditions that the comodel records have to
            satisfy.
    
    A domain might be used to express a dependency on another field
    (with select="one") of the search panel. Consider /\!This attribute
    is incompatible with a select="one" with enabled counters; if a
    select="multi" has a <span class="title-ref">domain</span>
    attribute, all select="one" will have their counters disabled.
    
    ``` xml
    <searchpanel>
      <field name="department_id"/>
      <field name="manager_id" select="multi" domain="[('department_id', '=', department_id)]"/>
    <searchpanel/>
    ```
    
    In the above example, the range of values for manager\_id (manager
    names) available at screen will depend on the value currently
    selected for the field `department_id`.
    
      - `groupby`: field name of the comodel (only available for
        many2one and many2many fields). Values will be grouped by that
        field.

#### Search defaults

Search fields and filters can be configured through the action's
`context` using `search_default_{name}` keys. For fields, the value
should be the value to set in the field, for filters it's a boolean
value or a number. For instance, assuming `foo` is a field and `bar` is
a filter an action context of:

``` python
{
  'search_default_foo': 'acro',
  'search_default_bar': 1
}
```

will automatically enable the `bar` filter and search the `foo` field
for *acro*.

A numeric value (between 1 and 99) can be used to describe the order of
default groupbys. For instance if `foo` and `bar` refer to two groupbys

``` python
{
  'search_default_foo': 2,
  'search_default_bar': 1
}
```

has the effect to activate first `bar` then `foo`.

<div class="todo">

View Grid

</div>

1.  an extension function is added for simpler matching in QWeb views:
    `hasclass(*classes)` matches if the context node has all the
    specified classes

2.  for historical reasons, it has its origin in tree-type views later
    repurposed to a more table/list-type display


---
## File: ./content/developer/reference/addons/module.md

# Module Manifests

## Manifest

The manifest file serves to declare a python package as an Odoo module
and to specify module metadata.

It is a file called `__manifest__.py` and contains a single Python
dictionary, where each key specifies module metadatum.

    {
        'name': "A Module",
        'version': '1.0',
        'depends': ['base'],
        'author': "Author Name",
        'category': 'Category',
        'description': """
        Description text
        """,
        # data files always loaded at installation
        'data': [
            'views/mymodule_view.xml',
        ],
        # data files containing optionally loaded demonstration data
        'demo': [
            'demo/demo_data.xml',
        ],
    }

Available manifest fields are:

  - `name` (`str`, required)  
    the human-readable name of the module

  - `version` (`str`)  
    this module's version, should follow [semantic
    versioning](https://semver.org) rules

  - `description` (`str`)  
    extended description for the module, in reStructuredText

  - `author` (`str`)  
    name of the module author

  - `website` (`str`)  
    website URL for the module author

  - `license` (`str`, defaults: `LGPL-3`)  
    distribution license for the module. Possible values:
    
      - <span class="title-ref">GPL-2</span>
      - <span class="title-ref">GPL-2 or any later version</span>
      - <span class="title-ref">GPL-3</span>
      - <span class="title-ref">GPL-3 or any later version</span>
      - <span class="title-ref">AGPL-3</span>
      - <span class="title-ref">LGPL-3</span>
      - <span class="title-ref">Other OSI approved licence</span>
      - <span class="title-ref">OEEL-1</span> (Odoo Enterprise Edition
        License v1.0)
      - <span class="title-ref">OPL-1</span> (Odoo Proprietary License
        v1.0)
      - <span class="title-ref">Other proprietary</span>

  - `category` (`str`, default: `Uncategorized`)  
    classification category within Odoo, rough business domain for the
    module.
    
    Although using [existing
    categories](%7BGITHUB_PATH%7D/odoo/addons/base/data/ir_module_category_data.xml)
    is recommended, the field is freeform and unknown categories are
    created on-the-fly. Category hierarchies can be created using the
    separator `/` e.g. `Foo / Bar` will create a category `Foo`, a
    category `Bar` as child category of `Foo`, and will set `Bar` as the
    module's category.

  - `depends` (`list(str)`)  
    Odoo modules which must be loaded before this one, either because
    this module uses features they create or because it alters resources
    they define.
    
    When a module is installed, all of its dependencies are installed
    before it. Likewise dependencies are loaded before a module is
    loaded.

<div class="note">

<div class="title">

Note

</div>

Module <span class="title-ref">base</span> is always installed in any
Odoo instance. But you still need to specify it as dependency to make
sure your module is updated when <span class="title-ref">base</span> is
updated.

</div>

  - `data` (`list(str)`)  
    List of data files which must always be installed or updated with
    the module. A list of paths from the module root directory

  - `demo` (`list(str)`)  
    List of data files which are only installed or updated in
    *demonstration mode*

  - `auto_install` (`bool` or `list(str)`, default: `False`)  
    If `True`, this module will automatically be installed if all of its
    dependencies are installed.
    
    It is generally used for "link modules" implementing synergetic
    integration between two otherwise independent modules.
    
    For instance `sale_crm` depends on both `sale` and `crm` and is set
    to `auto_install`. When both `sale` and `crm` are installed, it
    automatically adds CRM campaigns tracking to sale orders without
    either `sale` or `crm` being aware of one another.
    
    If it is a list, it must contain a subset of the dependencies. This
    module will automatically be installed as soon as all the
    dependencies in the subset are installed. The remaining dependencies
    will be automatically installed as well. If the list is empty, this
    module will always be automatically installed regardless of its
    dependencies and these will be installed as well.

  - `external_dependencies` (`dict(key=list(str))`)  
    A dictionary containing python and/or binary dependencies.
    
    For python dependencies, the `python` key must be defined for this
    dictionary and a list of python modules to be imported should be
    assigned to it.
    
    For binary dependencies, the `bin` key must be defined for this
    dictionary and a list of binary executable names should be assigned
    to it.
    
    The module won't be installed if either the python module is not
    installed in the host machine or the binary executable is not found
    within the host machine's PATH environment variable.

  - `application` (`bool`, default: `False`)  
    Whether the module should be considered as a fully-fledged
    application (`True`) or is just a technical module (`False`) that
    provides some extra functionality to an existing application module.

  - `css` (`list(str)`)  
    Specify css files with custom rules to be imported, these files
    should be located in `static/src/css` inside the module.

  - `images` (`list(str)`)  
    Specify image files to be used by the module.

  - `installable` (`bool` default: `True`)  
    Whether a user should be able to install the module from the Web UI
    or not.

  - `maintainer` (`str`)  
    Person or entity in charge of the maintenance of this module, by
    default it is assumed that the author is the maintainer.

  - `{pre_init, post_init, uninstall}_hook` (`str`)  
    Hooks for module installation/uninstallation, their value should be
    a string representing the name of a function defined inside the
    module's `__init__.py`.
    
    `pre_init_hook` takes a cursor as its only argument, this function
    is executed prior to the module's installation.
    
    `post_init_hook` takes a cursor and a registry as its arguments,
    this function is executed right after the module's installation.
    
    `uninstall_hook` takes a cursor and a registry as its arguments,
    this function is executed after the module's uninstallation.
    
    These hooks should only be used when setup/cleanup required for this
    module is either extremely difficult or impossible through the api.

  - `active` (`bool`)  
    Deprecated. Replaced by `auto_install`.


---
## File: ./content/developer/reference/addons/testing.md

# Testing Odoo

There are many ways to test an application. In Odoo, we have three kinds
of tests

  - Python unit tests (see [Testing Python code](#testing-python-code)):
    useful for testing model business logic
  - JS unit tests (see [Testing JS code](#testing-js-code)): useful to
    test the javascript code in isolation
  - Tours (see [Integration Testing](#integration-testing)): tours
    simulate a real situation. They ensures that the python and the
    javascript parts properly talk to each other.

## Testing Python code

Odoo provides support for testing modules using unittest.

To write tests, simply define a `tests` sub-package in your module, it
will be automatically inspected for test modules. Test modules should
have a name starting with `test_` and should be imported from
`tests/__init__.py`, e.g.

``` text
your_module
├── ...
├── tests
|   ├── __init__.py
|   ├── test_bar.py
|   └── test_foo.py
```

and `__init__.py` contains:

    from . import test_foo, test_bar

<div class="warning">

<div class="title">

Warning

</div>

test modules which are not imported from `tests/__init__.py` will not be
run

</div>

The test runner will simply run any test case, as described in the
official [unittest
documentation](https://docs.python.org/3/library/unittest.html), but
Odoo provides a number of utilities and helpers related to testing Odoo
content (modules, mainly):

<div class="autoclass" data-members="browse_ref, ref">

odoo.tests.common.TransactionCase

</div>

<div class="autoclass" data-members="browse_ref, ref">

odoo.tests.common.SingleTransactionCase

</div>

<div class="autoclass">

odoo.tests.common.SavepointCase

</div>

<div class="autoclass" data-members="browse_ref, ref, url_open, browser_js">

odoo.tests.common.HttpCase

</div>

<div class="autofunction">

odoo.tests.common.tagged

</div>

By default, tests are run once right after the corresponding module has
been installed. Test cases can also be configured to run after all
modules have been installed, and not run right after the module
installation:

    # coding: utf-8
    from odoo.tests import HttpCase, tagged
    
    # This test should only be executed after all modules have been installed.
    @tagged('-at_install', 'post_install')
    class WebsiteVisitorTests(HttpCase):
      def test_create_visitor_on_tracked_page(self):
          Page = self.env['website.page']

The most common situation is to use `~odoo.tests.common.TransactionCase`
and test a property of a model in each method:

    class TestModelA(common.TransactionCase):
        def test_some_action(self):
            record = self.env['model.a'].create({'field': 'value'})
            record.some_action()
            self.assertEqual(
                record.field,
                expected_field_value)
    
        # other tests...

<div class="note">

<div class="title">

Note

</div>

Test methods must start with `test_`

</div>

<div class="autoclass" data-members="">

odoo.tests.common.Form

</div>

<div class="autoclass" data-members="add, remove, clear">

odoo.tests.common.M2MProxy

</div>

<div class="autoclass" data-members="new, edit, remove">

odoo.tests.common.O2MProxy

</div>

### Running tests

Tests are automatically run when installing or updating modules if
`--test-enable <odoo-bin --test-enable>` was enabled when starting the
Odoo server.

### Test selection

In Odoo, Python tests can be tagged to facilitate the test selection
when running tests.

Subclasses of `odoo.tests.common.BaseCase` (usually through
`~odoo.tests.common.TransactionCase`, `~odoo.tests.common.SavepointCase`
or `~odoo.tests.common.HttpCase`) are automatically tagged with
`standard` and `at_install` by default.

#### Invocation

`--test-tags <odoo-bin --test-tags>` can be used to select/filter tests
to run on the command-line. It implies `--test-enable <odoo-bin
--test-enable>`, so it's not necessary to specify `--test-enable
<odoo-bin --test-enable>` when using `--test-tags <odoo-bin
--test-tags>`.

This option defaults to `+standard` meaning tests tagged `standard`
(explicitly or implicitly) will be run by default when starting Odoo
with `--test-enable <odoo-bin --test-enable>`.

When writing tests, the `~odoo.tests.common.tagged` decorator can be
used on **test classes** to add or remove tags.

The decorator's arguments are tag names, as strings.

<div class="danger">

<div class="title">

Danger

</div>

`~odoo.tests.common.tagged` is a class decorator, it has no effect on
functions or methods

</div>

Tags can be prefixed with the minus (`-`) sign, to *remove* them instead
of add or select them e.g. if you don't want your test to be executed by
default you can remove the `standard` tag:

``` python
from odoo.tests import TransactionCase, tagged

@tagged('-standard', 'nice')
class NiceTest(TransactionCase):
    ...
```

This test will not be selected by default, to run it the relevant tag
will have to be selected explicitly:

``` console
$ odoo-bin --test-tags nice
```

Note that only the tests tagged `nice` are going to be executed. To run
*both* `nice` and `standard` tests, provide multiple values to
`--test-tags <odoo-bin --test-tags>`: on the command-line, values are
*additive* (you're selecting all tests with *any* of the specified tags)

``` console
$ odoo-bin --test-tags nice,standard
```

The config switch parameter also accepts the `+` and `-` prefixes. The
`+` prefix is implied and therefore, totally optional. The `-` (minus)
prefix is made to deselect tests tagged with the prefixed tags, even if
they are selected by other specified tags e.g. if there are `standard`
tests which are also tagged as `slow` you can run all standard tests
*except* the slow ones:

``` console
$ odoo-bin --test-tags 'standard,-slow'
```

When you write a test that does not inherit from the
`~odoo.tests.common.BaseCase`, this test will not have the default tags,
you have to add them explicitly to have the test included in the default
test suite. This is a common issue when using a simple
`unittest.TestCase` as they're not going to get run:

``` python
import unittest
from odoo.tests import tagged

@tagged('standard', 'at_install')
class SmallTest(unittest.TestCase):
    ...
```

Besides tags you can also specify specific modules, classes or functions
to test. The full syntax of the format accepted by `--test-tags
<odoo-bin --test-tags>` is:

    [-][tag][/module][:class][.method]

So if you want to test the <span class="title-ref">stock\_account</span>
module, you can use:

> 
> 
> ``` console
> $ odoo-bin --test-tags /stock_account
> ```

If you want to test a specific function with a unique name, it can be
specified directly:

> 
> 
> ``` console
> $ odoo-bin --test-tags .test_supplier_invoice_forwarded_by_internal_user_without_supplier
> ```

This is equivalent to

> 
> 
> ``` console
> $ odoo-bin --test-tags /account:TestAccountIncomingSupplierInvoice.test_supplier_invoice_forwarded_by_internal_user_without_supplier
> ```

if the name of the test is unambiguous. Multiple modules, classes and
functions can be specified at once separated by a
<span class="title-ref">,</span> like with regular tags.

#### Special tags

  - `standard`: All Odoo tests that inherit from
    `~odoo.tests.common.BaseCase` are implicitly tagged standard.
    `--test-tags <odoo-bin --test-tags>` also defaults to `standard`.
    
    That means untagged test will be executed by default when tests are
    enabled.

  - `at_install`: Means that the test will be executed right after the
    module installation and before other modules are installed. This is
    a default implicit tag.

  - `post_install`: Means that the test will be executed after all the
    modules are installed. This is what you want for HttpCase tests most
    of the time.
    
    Note that this is *not exclusive* with `at_install`, however since
    you will generally not want both `post_install` is usually paired
    with `-at_install` when tagging a test class.

#### Examples

<div class="important">

<div class="title">

Important

</div>

Tests will be executed only in installed modules. If you're starting
from a clean database, you'll need to install the modules with the `-i
<odoo-bin -i>` switch at least once. After that it's no longer needed,
unless you need to upgrade the module, in which case `-u <odoo-bin -u>`
can be used. For simplicity, those switches are not specified in the
examples below.

</div>

Run only the tests from the sale module:

``` console
$ odoo-bin --test-tags /sale
```

Run the tests from the sale module but not the ones tagged as slow:

``` console
$ odoo-bin --test-tags '/sale,-slow'
```

Run only the tests from stock or tagged as slow:

``` console
$ odoo-bin --test-tags '-standard, slow, /stock'
```

<div class="note">

<div class="title">

Note

</div>

`-standard` is implicit (not required), and present for clarity

</div>

## Testing JS code

Testing a complex system is an important safeguard to prevent
regressions and to guarantee that some basic functionality still works.
Since Odoo has a non trivial codebase in Javascript, it is necessary to
test it. In this section, we will discuss the practice of testing JS
code in isolation: these tests stay in the browser, and are not supposed
to reach the server.

### Qunit test suite

The Odoo framework uses the [QUnit](https://qunitjs.com/) library
testing framework as a test runner. QUnit defines the concepts of
*tests* and *modules* (a set of related tests), and gives us a web based
interface to execute the tests.

For example, here is what a pyUtils test could look like:

``` javascript
QUnit.module('py_utils');

QUnit.test('simple arithmetic', function (assert) {
    assert.expect(2);

    var result = pyUtils.py_eval("1 + 2");
    assert.strictEqual(result, 3, "should properly evaluate sum");
    result = pyUtils.py_eval("42 % 5");
    assert.strictEqual(result, 2, "should properly evaluate modulo operator");
});
```

The main way to run the test suite is to have a running Odoo server,
then navigate a web browser to `/web/tests`. The test suite will then be
executed by the web browser Javascript engine.

![image](testing/tests.png)

The web UI has many useful features: it can run only some submodules, or
filter tests that match a string. It can show every assertions, failed
or passed, rerun specific tests, ...

<div class="warning">

<div class="title">

Warning

</div>

While the test suite is running, make sure that:

  - your browser window is focused,
  - it is not zoomed in/out. It needs to have exactly 100% zoom level.

If this is not the case, some tests will fail, without a proper
explanation.

</div>

### Testing Infrastructure

Here is a high level overview of the most important parts of the testing
infrastructure:

  - there is an asset bundle named
    [web.qunit\_suite](https://github.com/odoo/odoo/blob/51ee0c3cb59810449a60dae0b086b49b1ed6f946/addons/web/views/webclient_templates.xml#L660).
    This bundle contains the main code (assets common + assets backend),
    some libraries, the QUnit test runner and the test bundles listed
    below.
  - a bundle named
    [web.tests\_assets](https://github.com/odoo/odoo/blob/51ee0c3cb59810449a60dae0b086b49b1ed6f946/addons/web/views/webclient_templates.xml#L594)
    includes most of the assets and utils required by the test suite:
    custom QUnit asserts, test helpers, lazy loaded assets, etc.
  - another asset bundle,
    [web.qunit\_suite\_tests](https://github.com/odoo/odoo/blob/51ee0c3cb59810449a60dae0b086b49b1ed6f946/addons/web/views/webclient_templates.xml#L680),
    contains all the test scripts. This is typically where the test
    files are added to the suite.
  - there is a
    [controller](https://github.com/odoo/odoo/blob/51ee0c3cb59810449a60dae0b086b49b1ed6f946/addons/web/controllers/main.py#L637)
    in web, mapped to the route */web/tests*. This controller simply
    renders the *web.qunit\_suite* template.
  - to execute the tests, one can simply point its browser to the route
    */web/tests*. In that case, the browser will download all assets,
    and QUnit will take over.
  - there is some code in
    [qunit\_config.js](https://github.com/odoo/odoo/blob/51ee0c3cb59810449a60dae0b086b49b1ed6f946/addons/web/static/tests/helpers/qunit_config.js#L49)
    which logs in the console some information when a test passes or
    fails.
  - we want the runbot to also run these tests, so there is a test (in
    [test\_js.py](https://github.com/odoo/odoo/blob/51ee0c3cb59810449a60dae0b086b49b1ed6f946/addons/web/tests/test_js.py#L13))
    which simply spawns a browser and points it to the *web/tests* url.
    Note that the browser\_js method spawns a Chrome headless instance.

### Modularity and testing

With the way Odoo is designed, any addon can modify the behaviour of
other parts of the system. For example, the *voip* addon can modify the
*FieldPhone* widget to use extra features. This is not really good from
the perspective of the testing system, since this means that a test in
the addon web will fail whenever the voip addon is installed (note that
the runbot runs the tests with all addons installed).

At the same time, our testing system is good, because it can detect
whenever another module breaks some core functionality. There is no
complete solution to this issue. For now, we solve this on a case by
case basis.

Usually, it is not a good idea to modify some other behaviour. For our
voip example, it is certainly cleaner to add a new *FieldVOIPPhone*
widget and modify the few views that needs it. This way, the
*FieldPhone* widget is not impacted, and both can be tested.

### Adding a new test case

Let us assume that we are maintaining an addon *my\_addon*, and that we
want to add a test for some javascript code (for example, some utility
function myFunction, located in *my\_addon.utils*). The process to add a
new test case is the following:

1.  create a new file *my\_addon/static/tests/utils\_tests.js*. This
    file contains the basic code to add a QUnit module *my\_addon \>
    utils*.
    
    > 
    > 
    > ``` javascript
    > odoo.define('my_addon.utils_tests', function (require) {
    > "use strict";
    > 
    > var utils = require('my_addon.utils');
    > 
    > QUnit.module('my_addon', {}, function () {
    > 
    >     QUnit.module('utils');
    > 
    > });
    > });
    > ```

2.  In *my\_addon/assets.xml*, add the file to the main test assets:
    
    > 
    > 
    > ``` xml
    > <?xml version="1.0" encoding="utf-8"?>
    > <odoo>
    >     <template id="qunit_suite_tests" name="my addon tests" inherit_id="web.qunit_suite_tests">
    >         <xpath expr="//script[last()]" position="after">
    >             <script type="text/javascript" src="/my_addon/static/tests/utils_tests.js"/>
    >         </xpath>
    >     </template>
    > </odoo>
    > ```

3.  Restart the server and update *my\_addon*, or do it from the
    interface (to make sure the new test file is loaded)

4.  Add a test case after the definition of the *utils* sub test suite:
    
    > 
    > 
    > ``` javascript
    > QUnit.test("some test case that we want to test", function (assert) {
    >     assert.expect(1);
    > 
    >     var result = utils.myFunction(someArgument);
    >     assert.strictEqual(result, expectedResult);
    > });
    > ```

5.  Visit */web/tests/* to make sure the test is executed

### Helper functions and specialized assertions

Without help, it is quite difficult to test some parts of Odoo. In
particular, views are tricky, because they communicate with the server
and may perform many rpcs, which needs to be mocked. This is why we
developed some specialized helper functions, located in
[test\_utils.js](https://github.com/odoo/odoo/blob/51ee0c3cb59810449a60dae0b086b49b1ed6f946/addons/web/static/tests/helpers/test_utils.js).

  - Mock test functions: these functions help setting up a test
    environment. The most important use case is mocking the answers
    given by the Odoo server. These functions use a [mock
    server](https://github.com/odoo/odoo/blob/51ee0c3cb59810449a60dae0b086b49b1ed6f946/addons/web/static/tests/helpers/mock_server.js).
    This is a javascript class that simulates answers to the most common
    model methods: read, search\_read, nameget, ...
  - DOM helpers: useful to simulate events/actions on some specific
    target. For example, testUtils.dom.click performs a click on a
    target. Note that it is safer than doing it manually, because it
    also checks that the target exists, and is visible.
  - create helpers: they are probably the most important functions
    exported by
    [test\_utils.js](https://github.com/odoo/odoo/blob/51ee0c3cb59810449a60dae0b086b49b1ed6f946/addons/web/static/tests/helpers/test_utils.js).
    These helpers are useful to create a widget, with a mock
    environment, and a lot of small detail to simulate as much as
    possible the real conditions. The most important is certainly
    [createView](https://github.com/odoo/odoo/blob/51ee0c3cb59810449a60dae0b086b49b1ed6f946/addons/web/static/tests/helpers/test_utils_create.js#L267).
  - [qunit
    assertions](https://github.com/odoo/odoo/blob/51ee0c3cb59810449a60dae0b086b49b1ed6f946/addons/web/static/tests/helpers/qunit_asserts.js):
    QUnit can be extended with specialized assertions. For Odoo, we
    frequently test some DOM properties. This is why we made some
    assertions to help with that. For example, the *containsOnce*
    assertion takes a widget/jQuery/HtmlElement and a selector, then
    checks if the target contains exactly one match for the css
    selector.

For example, with these helpers, here is what a simple form test could
look like:

``` javascript
QUnit.test('simple group rendering', function (assert) {
    assert.expect(1);

    var form = testUtils.createView({
        View: FormView,
        model: 'partner',
        data: this.data,
        arch: '<form string="Partners">' +
                '<group>' +
                    '<field name="foo"/>' +
                '</group>' +
            '</form>',
        res_id: 1,
    });

    assert.containsOnce(form, 'table.o_inner_group');

    form.destroy();
});
```

Notice the use of the testUtils.createView helper and of the
containsOnce assertion. Also, the form controller was properly destroyed
at the end of the test.

### Best Practices

In no particular order:

  - all test files should be added in *some\_addon/static/tests/*
  - for bug fixes, make sure that the test fails without the bug fix,
    and passes with it. This ensures that it actually works.
  - try to have the minimal amount of code necessary for the test to
    work.
  - usually, two small tests are better than one large test. A smaller
    test is easier to understand and to fix.
  - always cleanup after a test. For example, if your test instantiates
    a widget, it should destroy it at the end.
  - no need to have full and complete code coverage. But adding a few
    tests helps a lot: it makes sure that your code is not completely
    broken, and whenever a bug is fixed, it is really much easier to add
    a test to an existing test suite.
  - if you want to check some negative assertion (for example, that a
    HtmlElement does not have a specific css class), then try to add the
    positive assertion in the same test (for example, by doing an action
    that changes the state). This will help avoid the test to become
    dead in the future (for example, if the css class is changed).

### Tips

  - running only one test: you can (temporarily\!) change the
    *QUnit.test(...)* definition into *QUnit.only(...)*. This is useful
    to make sure that QUnit only runs this specific test.
  - debug flag: most create utility functions have a debug mode
    (activated by the debug: true parameter). In that case, the target
    widget will be put in the DOM instead of the hidden qunit specific
    fixture, and more information will be logged. For example, all
    mocked network communications will be available in the console.
  - when working on a failing test, it is common to add the debug flag,
    then comment the end of the test (in particular, the destroy call).
    With this, it is possible to see the state of the widget directly,
    and even better, to manipulate the widget by clicking/interacting
    with it.

## Integration Testing

Testing Python code and JS code separately is very useful, but it does
not prove that the web client and the server work together. In order to
do that, we can write another kind of test: tours. A tour is a mini
scenario of some interesting business flow. It explains a sequence of
steps that should be followed. The test runner will then create a
PhantomJs browser, point it to the proper url and simulate the click and
inputs, according to the scenario.

### Writing a test tour

#### Structure

To write a test tour for <span class="title-ref">your\_module</span>,
start with creating the required files:

``` text
your_module
├── ...
├── static
|   └── src
|       └── js
|           └── tours
|               └── your_tour.js
├── tests
|   ├── __init__.py
|   └── test_calling_the_tour.py
├── views
|   └── your_module_views.xml
└── __manifest__.py
```

You can then:

  - add `your_tour.js` as an asset in `your_module_views.xml`.
  - update `__manifest__.py` to load `your_module_views.xml`.
  - update `__init__.py` in the folder `tests` to import
    `test_calling_the_tour`.

<div class="seealso">

\- `js_reference/adding_assets` - `testing/python`

</div>

#### Javascript

1.  Setup your tour by registering it.
    
    ``` javascript
    odoo.define('your_module.your_tour_name', function (require) {
        'use strict';
        var tour = require('web_tour.tour');
        tour.register('your_tour_name', {
            url: '/web',  // Here, you can specify any other starting url
            test: true,
        }, [
            // Your sequence of steps
        ]);
    });
    ```

2.  Add any step you want.

Every step contains at least a trigger. You can either use the
[predefined
steps](%7BGITHUB_PATH%7D/addons/web_tour/static/src/js/tour_step_utils.js)
or write your own personalized step.

Here are some example of steps:

<div class="example">

``` javascript
// First step
tour.stepUtils.showAppsMenuItem(),
// Second step
{
    trigger: '.o_app[data-menu-xmlid="your_module.maybe_your_module_menu_root"]',
    edition: 'community'  // Optional
}, {
    // Third step
},
```

</div>

<div class="example">

``` javascript
{
    trigger: '.js_product:has(strong:contains(Chair floor protection)) .js_add',
    extra_trigger: '.oe_advanced_configurator_modal',  // This ensure we are in the wizard
},
```

</div>

<div class="example">

``` javascript
{
    trigger: 'a:contains("Add a product")',
    // Extra-trigger to make sure a line is added before trying to add another one
    extra_trigger: '.o_field_many2one[name="product_template_id"] .o_external_button',
},
```

</div>

Here are some possible arguments for your personalized steps:

  - **trigger**: selector/element/jQuery you want to trigger
  - **extra-trigger**: optional selector/element/jQuery that needs to be
    present before the next step begins. This is especially useful when
    the tour needs to wait for a wizard to open, a line added to a list
    view...
  - **run**: optional action to run, defaults either to
    <span class="title-ref">click</span> or <span class="title-ref">text
    Test</span> if you are triggering an input. A multitude of actions
    are possible. Here are some of them:
    <span class="title-ref">click</span>,
    <span class="title-ref">dbclick</span>,
    <span class="title-ref">tripleclick</span>,
    <span class="title-ref">text Example</span>,
    <span class="title-ref">drag\_and\_drop selector1
    selector2</span>...
  - **edition**: optional,
      - If you don't specify an edition, the step will be active in both
        community and enterprise.
      - Sometimes, a step will be different in enterprise or in
        community. You can then write two steps, one for the enterprise
        edition and one for the community one.
      - Generally, you want to specify an edition for steps that use the
        main menu as the main menus are different in community and
        enterprise.
  - **position**: optional
  - **id**: optional
  - **auto**: optional
  - **in\_modal**: optional

<div class="tip">

<div class="title">

Tip

</div>

Your browser's developer tools are your best tool to find the element
your tour needs to use as a trigger/extra-trigger.

</div>

<div class="seealso">

\- [jQuery documentation about find](https://api.jquery.com/find/)

</div>

#### Python

To start a tour from a python test, make the class inherit from
`~odoo.tests.common.HTTPCase`, and call \`start\_tour\`:

``` python
def test_your_test(self):
    # Optional Setup
    self.start_tour("/web", 'your_module.your_tour_name', login="admin")
    # Optional verifications
```

### Debugging tips

#### Running the tour in debug mode

First, activate the `developer mode
</applications/general/developer_mode>` with
<span class="title-ref">?debug=tests</span>. Then, open your debug menu
and click on **Start Tour**. You can now launch your tour from there
with the button <span class="title-ref">Test</span>.

You can also add this step in your tour to stop it right where you want
it to:

``` javascript
{
    trigger: "body",
    run: () => {debugger}
}
```

<div class="caution">

<div class="title">

Caution

</div>

Be aware that when running the tour, any data added to the setup of your
python test won't be present in the tour unless you launched the test
calling the tour with a breakpoint.

</div>

#### Screenshots and screencasts during browser\_js tests

When running tests that use HttpCase.browser\_js from the command line,
the Chrome browser is used in headless mode. By default, if a test
fails, a PNG screenshot is taken at the moment of the failure and
written in

``` console
'/tmp/odoo_tests/{db_name}/screenshots/'
```

Two new command line arguments were added since Odoo 13.0 to control
this behavior: `--screenshots <odoo-bin --screenshots>` and
`--screencasts <odoo-bin --screencasts>`

## Performance Testing

### Query counts

One of the ways to test performance is to measure database queries.
Manually, this can be tested with the
<span class="title-ref">--log-sql</span> CLI parameter. If you want to
establish the maximum number of queries for an operation, you can use
the `~odoo.tests.common.BaseCase.assertQueryCount` method, integrated in
Odoo test classes.

``` python
with self.assertQueryCount(11):
    do_something()
```

### Database population

Odoo CLI offers a `database population<reference/cmdline/populate>`
feature.

``` console
odoo-bin populate
```

Instead of the tedious manual, or programmatic, specification of test
data, one can use this feature to fill a database on demand with the
desired number of test data. This can be used to detect diverse bugs or
performance issues in tested flows.

<div id="reference/testing/populate/methods">

To specify this feature for a given model, the following methods and
attributes can be defined.

</div>

<div class="currentmodule">

odoo.models

</div>

<div class="autoattribute">

Model.\_populate\_sizes

</div>

<div class="autoattribute">

Model.\_populate\_dependencies

</div>

<div class="automethod">

Model.\_populate

</div>

<div class="automethod">

Model.\_populate\_factories

</div>

<div class="note">

<div class="title">

Note

</div>

You have to define at least `~odoo.models.Model._populate` or
`~odoo.models.Model._populate_factories` on the model to enable database
population.

</div>

#### Example model

``` python
from odoo.tools import populate

class CustomModel(models.Model)
    _inherit = "custom.some_model"
    _populate_sizes = {"small": 100, "medium": 2000, "large": 10000}
    _populate_dependencies = ["custom.some_other_model"]

    def _populate_factories(self):
        # Record ids of previously populated models are accessible in the registry
        some_other_ids = self.env.registry.populated_models["custom.some_other_model"]

        def get_some_field(values=None, random=None, **kwargs):
            """ Choose a value for some_field depending on other fields values.

                :param dict values:
                :param random: seeded :class:`random.Random` object
            """
            field_1 = values['field_1']
            if field_1 in [value2, value3]:
                return random.choice(some_field_values)
            return False

        return [
            ("field_1", populate.randomize([value1, value2, value3])),
            ("field_2", populate.randomize([value_a, value_b], [0.5, 0.5])),
            ("some_other_id", populate.randomize(some_other_ids)),
            ("some_field", populate.compute(get_some_field, seed="some_field")),
            ('active', populate.cartesian([True, False])),
        ]

    def _populate(self, size):
        records = super()._populate(size)

        # If you want to update the generated records
        # E.g setting the parent-child relationships
        records.do_something()

        return records
```

#### Population tools

Multiple population tools are available to easily create the needed data
generators.

<div class="automodule" data-members="cartesian, compute, constant, iterate, randint, randomize">

odoo.tools.populate

</div>


---
## File: ./content/developer/reference/addons/mixins.md

# Mixins and Useful Classes

Odoo implements some useful classes and mixins that make it easy for you
to add often-used behaviours on your objects. This guide will details
most of them, with examples and use cases.

## Messaging features

### Messaging integration

#### Basic messaging system

Integrating messaging features to your model is extremely easy. Simply
inheriting the `mail.thread` model and adding the messaging fields (and
their appropriate widgets) to your form view will get you up and running
in no time.

<div class="example">

Let's create a simplistic model representing a business trip. Since
organizing this kind of trip usually involves a lot of people and a lot
of discussion, let's add support for message exchange on the model.

``` python
class BusinessTrip(models.Model):
    _name = 'business.trip'
    _inherit = ['mail.thread']
    _description = 'Business Trip'

    name = fields.Char()
    partner_id = fields.Many2one('res.partner', 'Responsible')
    guest_ids = fields.Many2many('res.partner', 'Participants')
```

In the form view:

``` xml
<record id="businness_trip_form" model="ir.ui.view">
    <field name="name">business.trip.form</field>
    <field name="model">business.trip</field>
    <field name="arch" type="xml">
        <form string="Business Trip">
            <!-- Your usual form view goes here
            ...
            Then comes chatter integration -->
            <div class="oe_chatter">
                <field name="message_follower_ids" widget="mail_followers"/>
                <field name="message_ids" widget="mail_thread"/>
            </div>
        </form>
    </field>
</record>
```

</div>

Once you've added chatter support on your model, users can easily add
messages or internal notes on any record of your model; every one of
those will send a notification (to all followers for messages, to
employee (*base.group\_user*) users for internal notes). If your mail
gateway and catchall address are correctly configured, these
notifications will be sent by e-mail and can be replied-to directly from
your mail client; the automatic routing system will route the answer to
the correct thread.

Server-side, some helper functions are there to help you easily send
messages and to manage followers on your record:

**Posting messages**

<div class="method">

message\_post(self, body='', subject=None, message\_type='notification',
subtype=None, parent\_id=False, attachments=None, \*\*kwargs)

Post a new message in an existing thread, returning the new mail.message
ID.

  - param str body  
    body of the message, usually raw HTML that will be sanitized

  - param str message\_type  
    see mail\_message.message\_type field

  - param int parent\_id  
    handle reply to a previous message by adding the parent partners to
    the message in case of private discussion

  - param list(tuple(str,str)) attachments  
    list of attachment tuples in the form `(name,content)`, where
    content is NOT base64 encoded

  - param <span class="title-ref">\*\*kwargs</span>  
    extra keyword arguments will be used as default column values for
    the new mail.message record

  - return  
    ID of newly created mail.message

  - rtype  
    int

</div>

<div class="method">

message\_post\_with\_view(views\_or\_xmlid, \*\*kwargs):

Helper method to send a mail / post a message using a view\_id to render
using the ir.qweb engine. This method is stand alone, because there is
nothing in template and composer that allows to handle views in batch.
This method will probably disappear when templates handle ir ui views.

  - param str or `ir.ui.view` record  
    external id or record of the view that should be sent

</div>

<div class="method">

message\_post\_with\_template(template\_id, \*\*kwargs)

Helper method to send a mail with a template

  - param template\_id  
    the id of the template to render to create the body of the message

  - param <span class="title-ref">\*\*kwargs</span>  
    parameter to create a mail.compose.message wizard (which inherit
    from mail.message)

</div>

**Receiving messages**

These methods are called when a new e-mail is processed by the mail
gateway. These e-mails can either be new thread (if they arrive via an
`alias <reference/mixins/mail/alias>`) or simply replies from an
existing thread. Overriding them allows you to set values on the
thread's record depending on some values from the email itself (i.e.
update a date or an e-mail address, add CC's addresses as followers,
etc.).

<div class="method">

message\_new(msg\_dict, custom\_values=None)

Called by `message_process` when a new message is received for a given
thread model, if the message did not belong to an existing thread.

The default behavior is to create a new record of the corresponding
model (based on some very basic info extracted from the message).
Additional behavior may be implemented by overriding this method.

  - param dict msg\_dict  
    a map containing the email details and attachments. See
    `message_process` and `mail.message.parse` for details

  - param dict custom\_values  
    optional dictionary of additional field values to pass to create()
    when creating the new thread record; be careful, these values may
    override any other values coming from the message

  - rtype  
    int

  - return  
    the id of the newly created thread object

</div>

<div class="method">

message\_update(msg\_dict, update\_vals=None)

Called by `message_process` when a new message is received for an
existing thread. The default behavior is to update the record with
`update_vals` taken from the incoming email.

Additional behavior may be implemented by overriding this method.

  - param dict msg\_dict  
    a map containing the email details and attachments; see
    `message_process` and `mail.message.parse()` for details.

  - param dict update\_vals  
    a dict containing values to update records given their ids; if the
    dict is None or is void, no write operation is performed.

  - return  
    True

</div>

**Followers management**

<div class="method">

message\_subscribe(partner\_ids=None, channel\_ids=None,
subtype\_ids=None, force=True)

Add partners to the records followers.

  - param list(int) partner\_ids  
    IDs of the partners that will be subscribed to the record

  - param list(int) channel\_ids  
    IDs of the channels that will be subscribed to the record

  - param list(int) subtype\_ids  
    IDs of the subtypes that the channels/partners will be subscribed to
    (defaults to the default subtypes if `None`)

  - param force  
    if True, delete existing followers before creating new one using the
    subtypes given in the parameters

  - return  
    Success/Failure

  - rtype  
    bool

</div>

<div class="method">

message\_unsubscribe(partner\_ids=None, channel\_ids=None)

Remove partners from the record's followers.

  - param list(int) partner\_ids  
    IDs of the partners that will be subscribed to the record

  - param list(int) channel\_ids  
    IDs of the channels that will be subscribed to the record

  - return  
    True

  - rtype  
    bool

</div>

<div class="method">

message\_unsubscribe\_users(user\_ids=None)

Wrapper on message\_subscribe, using users.

  - param list(int) user\_ids  
    IDs of the users that will be unsubscribed to the record; if None,
    unsubscribe the current user instead.

  - return  
    True

  - rtype  
    bool

</div>

#### Logging changes

The `mail` module adds a powerful tracking system on fields, allowing
you to log changes to specific fields in the record's chatter. To add
tracking to a field, simple set the tracking attribute to True.

<div class="example">

Let's track changes on the name and responsible of our business trips:

``` python
class BusinessTrip(models.Model):
    _name = 'business.trip'
    _inherit = ['mail.thread']
    _description = 'Business Trip'

    name = fields.Char(tracking=True)
    partner_id = fields.Many2one('res.partner', 'Responsible',
                                 tracking=True)
    guest_ids = fields.Many2many('res.partner', 'Participants')
```

From now on, every change to a trip's name or responsible will log a
note on the record. The `name` field will be displayed in the
notification as well to give more context about the notification (even
if the name did not change).

</div>

#### Subtypes

Subtypes give you more granular control over messages. Subtypes act as a
classification system for notifications, allowing subscribers to a
document to customize the subtype of notifications they wish to receive.

Subtypes are created as data in your module; the model has the following
fields:

  - `name` (mandatory) - `~odoo.fields.Char`  
    name of the subtype, will be displayed in the notification
    customization popup

  - `description` - `~odoo.fields.Char`  
    description that will be added in the message posted for this
    subtype. If void, the name will be added instead

  - `internal` - `~odoo.fields.Boolean`  
    messages with internal subtypes will be visible only by employees,
    aka members of the `base.group_user` group

  - `parent_id` - `~odoo.fields.Many2one`  
    link subtypes for automatic subscription; for example project
    subtypes are linked to task subtypes through this link. When someone
    is subscribed to a project, he will be subscribed to all tasks of
    this project with subtypes found using the parent subtype

  - `relation_field` - `~odoo.fields.Char`  
    as an example, when linking project and tasks subtypes, the relation
    field is the project\_id field of tasks

  - `res_model` - `~odoo.fields.Char`  
    model the subtype applies to; if False, this subtype applies to all
    models

  - `default` - `~odoo.fields.Boolean`  
    whether the subtype is activated by default when subscribing

  - `sequence` - `~odoo.fields.Integer`  
    used to order subtypes in the notification customization popup

  - `hidden` - `~odoo.fields.Boolean`  
    whether the subtype is hidden in the notification customization
    popup

Interfacing subtypes with field tracking allows to subscribe to
different kind of notifications depending on what might interest users.
To do this, you can override the `_track_subtype()` function:

<div class="method">

\_track\_subtype(init\_values)

Give the subtype triggered by the changes on the record according to
values that have been updated.

  - param dict init\_values  
    the original values of the record; only modified fields are present
    in the dict

  - returns  
    a subtype's full external id or False if no subtype is triggered

</div>

<div class="example">

Let's add a `state` field on our example class and trigger a
notification with a specific subtype when this field change values.

First, let's define our subtype:

``` xml
<record id="mt_state_change" model="mail.message.subtype">
    <field name="name">Trip confirmed</field>
    <field name="res_model">business.trip</field>
    <field name="default" eval="True"/>
    <field name="description">Business Trip confirmed!</field>
</record>
```

Then, we need to override the `track_subtype()` function. This function
is called by the tracking system to know which subtype should be used
depending on the change currently being applied. In our case, we want to
use our shiny new subtype when the `state` field changes from *draft* to
*confirmed*:

``` python
class BusinessTrip(models.Model):
    _name = 'business.trip'
    _inherit = ['mail.thread']
    _description = 'Business Trip'

    name = fields.Char(tracking=True)
    partner_id = fields.Many2one('res.partner', 'Responsible',
                                 tracking=True)
    guest_ids = fields.Many2many('res.partner', 'Participants')
    state = fields.Selection([('draft', 'New'), ('confirmed', 'Confirmed')],
                             tracking=True)

    def _track_subtype(self, init_values):
        # init_values contains the modified fields' values before the changes
        #
        # the applied values can be accessed on the record as they are already
        # in cache
        self.ensure_one()
        if 'state' in init_values and self.state == 'confirmed':
            return self.env.ref('my_module.mt_state_change')
        return super(BusinessTrip, self)._track_subtype(init_values)
```

</div>

#### Customizing notifications

When sending notifications to followers, it can be quite useful to add
buttons in the template to allow quick actions directly from the e-mail.
Even a simple button to link directly to the record's form view can be
useful; however in most cases you don't want to display these buttons to
portal users.

The notification system allows customizing notification templates in the
following ways:

  - Display *Access Buttons*: these buttons are visible at the top of
    the notification e-mail and allow the recipient to directly access
    the form view of the record
  - Display *Follow Buttons*: these buttons allow the recipient to
    directly quickly subscribe from the record
  - Display *Unfollow Buttons*: these buttons allow the recipient to
    directly quickly unsubscribe from the record
  - Display *Custom Action Buttons*: these buttons are calls to specific
    routes and allow you to make some useful actions directly available
    from the e-mail (i.e. converting a lead to an opportunity,
    validating an expense sheet for an Expense Manager, etc.)

These buttons settings can be applied to different groups that you can
define yourself by overriding the function `_notify_get_groups`.

<div class="method">

\_notify\_get\_groups(message, groups)

Give the subtype triggered by the changes on the record according to
values that have been updated.

  - param `record` message  
    `mail.message` record currently being sent

  - param list(tuple) groups  
    list of tuple of the form (group\_name, group\_func,group\_data)
    where:

>   - group\_name  
>     is an identifier used only to be able to override and manipulate
>     groups. Default groups are `user` (recipients linked to an
>     employee user), `portal` (recipients linked to a portal user) and
>     `customer` (recipients not linked to any user). An example of
>     override use would be to add a group linked to a res.groups like
>     Hr Officers to set specific action buttons to them.
> 
>   - group\_func  
>     is a function pointer taking a partner record as parameter. This
>     method will be applied on recipients to know whether they belong
>     to a given group or not. Only first matching group is kept.
>     Evaluation order is the list order.
> 
>   - group\_data  
>     is a dict containing parameters for the notification email with
>     the following possible keys - values:
>     
>       -   - has\_button\_access  
>             whether to display Access \<Document\> in email. True by
>             default for new groups, False for portal / customer.
>     
>       -   - button\_access  
>             dict with url and title of the button
>     
>       -   - has\_button\_follow  
>             whether to display Follow in email (if recipient is not
>             currently following the thread). True by default for new
>             groups, False for portal / customer.
>     
>       -   - button\_follow  
>             dict with url and title of the button
>     
>       -   - has\_button\_unfollow  
>             whether to display Unfollow in email (if recipient is
>             currently following the thread). True by default for new
>             groups, False for portal / customer.
>     
>       -   - button\_unfollow  
>             dict with url and title of the button
>     
>       -   - actions  
>             list of action buttons to display in the notification
>             email. Each action is a dict containing url and title of
>             the button.

  - returns  
    a subtype's full external id or False if no subtype is triggered

</div>

The urls in the actions list can be generated automatically by calling
the `_notify_get_action_link()` function:

<div class="method">

\_notify\_get\_action\_link(self, link\_type, \*\*kwargs)

Generate a link for the given type on the current record (or on a
specific record if the kwargs `model` and `res_id` are set).

  - param str link\_type  
    link type to be generated; can be any of these values:

>   - `view`  
>     link to form view of the record
> 
>   - `assign`  
>     assign the logged user to the `user_id` field of the record (if it
>     exists)
> 
>   - `follow`  
>     self-explanatory
> 
>   - `unfollow`  
>     self-explanatory
> 
>   - `method`  
>     call a method on the record; the method's name should be provided
>     as the kwarg `method`
> 
>   - `new`  
>     open an empty form view for a new record; you can specify a
>     specific action by providing its id (database id or fully resolved
>     external id) in the kwarg `action_id`

  - returns  
    link of the type selected for the record

  - rtype  
    str

</div>

<div class="example">

Let's add a custom button to the Business Trip state change
notification; this button will reset the state to Draft and will be only
visible to a member of the (imaginary) group Travel Manager
(`business.group_trip_manager`)

``` python
class BusinessTrip(models.Model):
    _name = 'business.trip'
    _inherit = ['mail.thread', 'mail.alias.mixin']
    _description = 'Business Trip'

    # Pevious code goes here

    def action_cancel(self):
        self.write({'state': 'draft'})

    def _notify_get_groups(self, message, groups):
        """ Handle Trip Manager recipients that can cancel the trip at the last
        minute and kill all the fun. """
        groups = super(BusinessTrip, self)._notify_get_groups(message, groups)

        self.ensure_one()
        if self.state == 'confirmed':
            app_action = self._notify_get_action_link('method',
                                method='action_cancel')
            trip_actions = [{'url': app_action, 'title': _('Cancel')}]

        new_group = (
            'group_trip_manager',
            lambda partner: bool(partner.user_ids) and
            any(user.has_group('business.group_trip_manager')
            for user in partner.user_ids),
            {
                'actions': trip_actions,
            })

        return [new_group] + groups
```

Note that that I could have defined my evaluation function outside of
this method and define a global function to do it instead of a lambda,
but for the sake of being more brief and less verbose in these
documentation files that can sometimes be boring, I choose the former
instead of the latter.

</div>

#### Overriding defaults

There are several ways you can customize the behaviour of `mail.thread`
models, including (but not limited to):

  - `_mail_post_access` - `~odoo.models.Model` attribute  
    the required access rights to be able to post a message on the
    model; by default a `write` access is needed, can be set to `read`
    as well

  - Context keys:  
    These context keys can be used to somewhat control `mail.thread`
    features like auto-subscription or field tracking during calls to
    `create()` or `write()` (or any other method where it may be
    useful).
    
      - `mail_create_nosubscribe`: at create or message\_post, do not
        subscribe the current user to the record thread
      - `mail_create_nolog`: at create, do not log the automatic
        '\<Document\> created' message
      - `mail_notrack`: at create and write, do not perform the value
        tracking creating messages
      - `tracking_disable`: at create and write, perform no MailThread
        features (auto subscription, tracking, post, ...)
      - `mail_auto_delete`: auto delete mail notifications; True by
        default
      - `mail_notify_force_send`: if less than 50 email notifications to
        send, send them directly instead of using the queue; True by
        default
      - `mail_notify_user_signature`: add the current user signature in
        email notifications; True by default

### Mail alias

Aliases are configurable email addresses that are linked to a specific
record (which usually inherits the `mail.alias.mixin` model) that will
create new records when contacted via e-mail. They are an easy way to
make your system accessible from the outside, allowing users or
customers to quickly create records in your database without needing to
connect to Odoo directly.

#### Aliases vs. Incoming Mail Gateway

Some people use the Incoming Mail Gateway for this same purpose. You
still need a correctly configured mail gateway to use aliases, however a
single catchall domain will be sufficient since all routing will be done
inside Odoo. Aliases have several advantages over Mail Gateways:

  -   - Easier to configure
        
          - A single incoming gateway can be used by many aliases; this
            avoids having to configure multiple emails on your domain
            name (all configuration is done inside Odoo)
          - No need for System access rights to configure aliases

  -   - More coherent
        
          - Configurable on the related record, not in a Settings
            submenu

  -   - Easier to override server-side
        
          - Mixin model is built to be extended from the start, allowing
            you to extract useful data from incoming e-mails more easily
            than with a mail gateway.

#### Alias support integration

Aliases are usually configured on a parent model which will then create
specific record when contacted by e-mail. For example, Project have
aliases to create tasks or issues, Sales Team have aliases to generate
Leads.

<div class="note">

<div class="title">

Note

</div>

The model that will be created by the alias **must** inherit the
`mail_thread` model.

</div>

Alias support is added by inheriting `mail.alias.mixin`; this mixin will
generate a new `mail.alias` record for each record of the parent class
that gets created (for example, every `project.project` record having
its `mail.alias` record initialized on creation).

<div class="note">

<div class="title">

Note

</div>

Aliases can also be created manually and supported by a simple
`~odoo.fields.Many2one` field. This guide assumes you wish a more
complete integration with automatic creation of the alias,
record-specific default values, etc.

</div>

Unlike `mail.thread` inheritance, the `mail.alias.mixin` **requires**
some specific overrides to work correctly. These overrides will specify
the values of the created alias, like the kind of record it must create
and possibly some default values these records may have depending on the
parent object:

<div class="method">

\_get\_alias\_model\_name(vals)

Return the model name for the alias. Incoming emails that are not
replies to existing records will cause the creation of a new record of
this alias model. The value may depend on `vals`, the dict of values
passed to `create` when a record of this model is created.

  - param vals dict  
    values of the newly created record that will holding the alias

  - return  
    model name

  - rtype  
    str

</div>

<div class="method">

\_get\_alias\_values()

Return values to create an alias, or to write on the alias after its
creation. While not completely mandatory, it is usually required to make
sure that newly created records will be linked to the alias' parent
(i.e. tasks getting created in the right project) by setting a
dictionary of default values in the alias' `alias_defaults` field.

  - return  
    dictionary of values that will be written to the new alias

  - rtype  
    dict

</div>

The `_get_alias_values()` override is particularly interesting as it
allows you to modify the behaviour of your aliases easily. Among the
fields that can be set on the alias, the following are of particular
interest:

  - `alias_name` - `~odoo.fields.Char`  
    name of the email alias, e.g. 'jobs' if you want to catch emails for
    \<<jobs@example.odoo.com>\>

  - `alias_user_id` - `~odoo.fields.Many2one` (`res.users`)  
    owner of records created upon receiving emails on this alias; if
    this field is not set the system will attempt to find the right
    owner based on the sender (From) address, or will use the
    Administrator account if no system user is found for that address

  - `alias_defaults` - `~odoo.fields.Text`  
    Python dictionary that will be evaluated to provide default values
    when creating new records for this alias

  - `alias_force_thread_id` - `~odoo.fields.Integer`  
    optional ID of a thread (record) to which all incoming messages will
    be attached, even if they did not reply to it; if set, this will
    disable the creation of new records completely

  - `alias_contact` - `~odoo.fields.Selection`  
    Policy to post a message on the document using the mailgateway
    
      - *everyone*: everyone can post
      - *partners*: only authenticated partners
      - *followers*: only followers of the related document or members
        of following channels

Note that aliases make use of `delegation inheritance
<reference/orm/inheritance>`, which means that while the alias is stored
in another table, you have access to all these fields directly from your
parent object. This allows you to make your alias easily configurable
from the record's form view.

<div class="example">

Let's add aliases on our business trip class to create expenses on the
fly via e-mail.

``` python
class BusinessTrip(models.Model):
    _name = 'business.trip'
    _inherit = ['mail.thread', 'mail.alias.mixin']
    _description = 'Business Trip'

    name = fields.Char(tracking=True)
    partner_id = fields.Many2one('res.partner', 'Responsible',
                                 tracking=True)
    guest_ids = fields.Many2many('res.partner', 'Participants')
    state = fields.Selection([('draft', 'New'), ('confirmed', 'Confirmed')],
                             tracking=True)
    expense_ids = fields.One2many('business.expense', 'trip_id', 'Expenses')
    alias_id = fields.Many2one('mail.alias', string='Alias', ondelete="restrict",
                               required=True)

    def _get_alias_model_name(self, vals):
    """ Specify the model that will get created when the alias receives a message """
        return 'business.expense'

    def _get_alias_values(self):
    """ Specify some default values that will be set in the alias at its creation """
        values = super(BusinessTrip, self)._get_alias_values()
        # alias_defaults holds a dictionary that will be written
        # to all records created by this alias
        #
        # in this case, we want all expense records sent to a trip alias
        # to be linked to the corresponding business trip
        values['alias_defaults'] = {'trip_id': self.id}
        # we only want followers of the trip to be able to post expenses
        # by default
        values['alias_contact'] = 'followers'
        return values

class BusinessExpense(models.Model):
    _name = 'business.expense'
    _inherit = ['mail.thread']
    _description = 'Business Expense'

    name = fields.Char()
    amount = fields.Float('Amount')
    trip_id = fields.Many2one('business.trip', 'Business Trip')
    partner_id = fields.Many2one('res.partner', 'Created by')
```

We would like our alias to be easily configurable from the form view of
our business trips, so let's add the following to our form view:

``` xml
<page string="Emails">
    <group name="group_alias">
        <label for="alias_name" string="Email Alias"/>
        <div name="alias_def">
            <!-- display a link while in view mode and a configurable field
            while in edit mode -->
            <field name="alias_id" class="oe_read_only oe_inline"
                    string="Email Alias" required="0"/>
            <div class="oe_edit_only oe_inline" name="edit_alias"
                 style="display: inline;" >
                <field name="alias_name" class="oe_inline"/>
                @
                <field name="alias_domain" class="oe_inline" readonly="1"/>
            </div>
        </div>
        <field name="alias_contact" class="oe_inline"
                string="Accept Emails From"/>
    </group>
</page>
```

Now we can change the alias address directly from the form view and
change who can send e-mails to the alias.

We can then override `message_new()` on our expense model to fetch the
values from our email when the expense will be created:

``` python
class BusinessExpense(models.Model):
    # Previous code goes here
    # ...

    def message_new(self, msg, custom_values=None):
        """ Override to set values according to the email.

        In this simple example, we simply use the email title as the name
        of the expense, try to find a partner with this email address and
        do a regex match to find the amount of the expense."""
        name = msg_dict.get('subject', 'New Expense')
        # Match the last occurrence of a float in the string
        # Example: '50.3 bar 34.5' becomes '34.5'. This is potentially the price
        # to encode on the expense. If not, take 1.0 instead
        amount_pattern = '(\d+(\.\d*)?|\.\d+)'
        expense_price = re.findall(amount_pattern, name)
        price = expense_price and float(expense_price[-1][0]) or 1.0
        # find the partner by looking for it's email
        partner = self.env['res.partner'].search([('email', 'ilike', email_address)],
                                                 limit=1)
        defaults = {
            'name': name,
            'amount': price,
            'partner_id': partner.id
        }
        defaults.update(custom_values or {})
        res = super(BusinessExpense, self).message_new(msg, custom_values=defaults)
        return res
```

</div>

### Activities tracking

Activities are actions users have to take on a document like making a
phone call or organizing a meeting. Activities come with the mail module
as they are integrated in the Chatter but are *not bundled with
mail.thread*. Activities are records of the `mail.activity` class, which
have a type (`mail.activity.type`), name, description, scheduled time
(among others). Pending activities are visible above the message history
in the chatter widget.

You can integrate activities using the `mail.activity.mixin` class on
your object and the specific widgets to display them (via the field
`activity_ids`) in the form view and kanban view of your records
(`mail_activity` and `kanban_activity` widgets, respectively).

<div class="example">

Organizing a business trip is a tedious process and tracking needed
activities like ordering plane tickets or a cab for the airport could be
useful. To do so, we will add the activities mixin on our model and
display the next planned activities in the message history of our trip.

``` python
class BusinessTrip(models.Model):
    _name = 'business.trip'
    _inherit = ['mail.thread', 'mail.activity.mixin']
    _description = 'Business Trip'

    name = fields.Char()
    # [...]
```

We modify the form view of our trips to display their next activities:

``` xml
<record id="businness_trip_form" model="ir.ui.view">
    <field name="name">business.trip.form</field>
    <field name="model">business.trip</field>
    <field name="arch" type="xml">
        <form string="Business Trip">
            <!-- Your usual form view goes here -->
            <div class="oe_chatter">
                <field name="message_follower_ids" widget="mail_followers"/>
                <field name="activity_ids" widget="mail_activity"/>
                <field name="message_ids" widget="mail_thread"/>
            </div>
        </form>
    </field>
</record>
```

</div>

You can find concrete examples of integration in the following models:

  - `crm.lead` in the CRM (*crm*) Application
  - `sale.order` in the Sales (*sale*) Application
  - `project.task` in the Project (*project*) Application

## Website features

### Visitor tracking

The `utm.mixin` class can be used to track online
marketing/communication campaigns through arguments in links to
specified resources. The mixin adds 3 fields to your model:

  - `campaign_id`: `~odoo.fields.Many2one` field to a `utm.campaign`
    object (i.e. Christmas\_Special, Fall\_Collection, etc.)
  - `source_id`: `~odoo.fields.Many2one` field to a `utm.source` object
    (i.e. Search Engine, mailing list, etc.)
  - `medium_id`: `~odoo.fields.Many2one` field to a `utm.medium` object
    (i.e. Snail Mail, e-Mail, social network update, etc.)

These models have a single field `name` (i.e. they are simply there to
distinguish campaigns but don't have any specific behaviour).

Once a customer visits your website with these parameters set in the url
(i.e.
<https://www.odoo.com/?campaign_id=mixin_talk&source_id=www.odoo.com&medium_id=website>),
three cookies are set in the visitor's website for these parameters.
Once a object that inherits the utm.mixin is created from the website
(i.e. lead form, job application, etc.), the utm.mixin code kicks in and
fetches the values from the cookies to set them in the new record. Once
this is done, you can then use the campaign/source/medium fields as any
other field when defining reports and views (group by, etc.).

To extend this behaviour, simply add a relational field to a simple
model (the model should support the *quick create* (i.e. call to
`create()` with a single `name` value) and extend the function
`tracking_fields()`:

``` python
class UtmMyTrack(models.Model):
    _name = 'my_module.my_track'
    _description = 'My Tracking Object'

    name = fields.Char(string='Name', required=True)


class MyModel(models.Models):
    _name = 'my_module.my_model'
    _inherit = ['utm.mixin']
    _description = 'My Tracked Object'

    my_field = fields.Many2one('my_module.my_track', 'My Field')

    @api.model
    def tracking_fields(self):
        result = super(MyModel, self).tracking_fields()
        result.append([
        # ("URL_PARAMETER", "FIELD_NAME_MIXIN", "NAME_IN_COOKIES")
            ('my_field', 'my_field', 'odoo_utm_my_field')
        ])
        return result
```

This will tell the system to create a cookie named
*odoo\_utm\_my\_field* with the value found in the url parameter
`my_field`; once a new record of this model is created by a call from a
website form, the generic override of the `create()` method of
`utm.mixin` will fetch the default values for this field from the cookie
(and the `my_module.my_track` record will be creatwed on the fly if it
does not exist yet).

You can find concrete examples of integration in the following models:

  - `crm.lead` in the CRM (*crm*) Application
  - `hr.applicant` in the Recruitment Process (*hr\_recruitment*)
    Application
  - `helpdesk.ticket` in the Helpdesk (*helpdesk* - Odoo Enterprise
    only) Application

### Website visibility

You can quite easily add a website visibility toggle on any of your
record. While this mixin is quite easy to implement manually, it is the
most often-used after the `mail.thread` inheritance; a testament to its
usefulness. The typical use case for this mixin is any object that has a
frontend-page; being able to control the visibility of the page allows
you to take your time while editing the page and only publish it when
you're satisfied.

To include the functionality, you only need to inherit
`website.published.mixin`:

``` python
class BlogPost(models.Model):
    _name = "blog.post"
    _description = "Blog Post"
    _inherit = ['website.published.mixin']
```

This mixin adds 2 fields on your model:

  - `website_published`: `~odoo.fields.Boolean` field which represents
    the status of the publication
  - `website_url`: `~odoo.fields.Char` field which represents the URL
    through which the object is accessed

Note that this last field is a computed field and must be implemented
for your class:

``` python
def _compute_website_url(self):
    for blog_post in self:
        blog_post.website_url = "/blog/%s" % (log_post.blog_id)
```

Once the mechanism is in place, you just have to adapt your frontend and
backend views to make it accessible. In the backend, adding a button in
the button box is usually the way to go:

``` xml
<button class="oe_stat_button" name="website_publish_button"
    type="object" icon="fa-globe">
    <field name="website_published" widget="website_button"/>
</button>
```

In the frontend, some security checks are needed to avoid showing
'Editing' buttons to website visitors:

``` xml
<div id="website_published_button" class="float-right"
     groups="base.group_website_publisher"> <!-- or any other meaningful group -->
    <t t-call="website.publish_management">
      <t t-set="object" t-value="blog_post"/>
      <t t-set="publish_edit" t-value="True"/>
      <t t-set="action" t-value="'blog.blog_post_action'"/>
    </t>
</div>
```

Note that you must pass your object as the variable `object` to the
template; in this example, the `blog.post` record was passed as the
`blog_post` variable to the `qweb` rendering engine, it is necessary to
specify this to the publish management template. The `publish_edit`
variable allow the frontend button to link to the backend (allowing you
to switch from frontend to backend and vice-versa easily); if set, you
must specify the full external id of the action you want to call in the
backend in the `action` variable (note that a Form View must exist for
the model).

The action `website_publish_button` is defined in the mixin and adapts
its behaviour to your object: if the class has a valid `website_url`
compute function, the user is redirected to the frontend when he clicks
on the button; the user can then publish the page directly from the
frontend. This ensures that no online publication can happen by
accident. If there is not compute function, the boolean
`website_published` is simply triggered.

### Website metadata

This simple mixin simply allows you to easily inject metadata in your
frontend pages.

``` python
class BlogPost(models.Model):
    _name = "blog.post"
    _description = "Blog Post"
    _inherit = ['website.seo.metadata', 'website.published.mixin']
```

This mixin adds 3 fields on your model:

  - `website_meta_title`: `~odoo.fields.Char` field that allow you to
    set an additional title to your page
  - `website_meta_description`: `~odoo.fields.Char` field that contains
    a short description of the page (sometimes used in search engines
    results)
  - `website_meta_keywords`: `~odoo.fields.Char` field that contains
    some keywords to help your page to be classified more precisely by
    search engines; the "Promote" tool will help you select
    lexically-related keywords easily

These fields are editable in the frontend using the "Promote" tool from
the Editor toolbar. Setting these fields can help search engines to
better index your pages. Note that search engines do not base their
results only on these metadata; the best SEO practice should still be to
get referenced by reliable sources.

## Others

### Customer Rating

The rating mixin allows sending email to ask for customer rating,
automatic transitioning in a kanban processes and aggregating statistics
on your ratings.

#### Adding rating on your model

To add rating support, simply inherit the `rating.mixin` model:

``` python
class MyModel(models.Models):
    _name = 'my_module.my_model'
    _inherit = ['rating.mixin', 'mail.thread']

    user_id = fields.Many2one('res.users', 'Responsible')
    partner_id = fields.Many2one('res.partner', 'Customer')
```

The behaviour of the mixin adapts to your model:

  - The `rating.rating` record will be linked to the `partner_id` field
    of your model (if the field is present).
      - this behaviour can be overridden with the function
        `rating_get_partner_id()` if you use another field than
        `partner_id`
  - The `rating.rating` record will be linked to the partner of the
    `user_id` field of your model (if the field is present) (i.e. the
    partner who is rated)
      - this behaviour can be overridden with the function
        `rating_get_rated_partner_id()` if you use another field than
        `user_id` (note that the function must return a `res.partner`,
        for `user_id` the system automatically fetches the partner of
        the user)
  - The chatter history will display the rating event (if your model
    inherits from `mail.thread`)

#### Send rating requests by e-mail

If you wish to send emails to request a rating, simply generate an
e-mail with links to the rating object. A very basic email template
could look like this:

``` xml
<record id="rating_my_model_email_template" model="mail.template">
            <field name="name">My Model: Rating Request</field>
            <field name="email_from">${object.rating_get_rated_partner_id().email or '' | safe}</field>
            <field name="subject">Service Rating Request</field>
            <field name="model_id" ref="my_module.model_my_model"/>
            <field name="partner_to" >${object.rating_get_partner_id().id}</field>
            <field name="auto_delete" eval="True"/>
            <field name="body_html"><![CDATA[
% set access_token = object.rating_get_access_token()
<p>Hi,</p>
<p>How satsified are you?</p>
<ul>
    <li><a href="/rate/${access_token}/5">Satisfied</a></li>
    <li><a href="/rate/${access_token}/3">Not satisfied</a></li>
    <li><a href="/rate/${access_token}/1">Very unsatisfied</a></li>
</ul>
]]></field>
</record>
```

Your customer will then receive an e-mail with links to a simple webpage
allowing them to provide a feedback on their interaction with your users
(including a free-text feedback message).

You can then quite easily integrate your ratings with your form view by
defining an action for the ratings:

``` xml
<record id="rating_rating_action_my_model" model="ir.actions.act_window">
    <field name="name">Customer Ratings</field>
    <field name="res_model">rating.rating</field>
    <field name="view_mode">kanban,pivot,graph</field>
    <field name="domain">[('res_model', '=', 'my_module.my_model'), ('res_id', '=', active_id), ('consumed', '=', True)]</field>
</record>

<record id="my_module_my_model_view_form_inherit_rating" model="ir.ui.view">
    <field name="name">my_module.my_model.view.form.inherit.rating</field>
    <field name="model">my_module.my_model</field>
    <field name="inherit_id" ref="my_module.my_model_view_form"/>
    <field name="arch" type="xml">
        <xpath expr="//div[@name='button_box']" position="inside">
            <button name="%(rating_rating_action_my_model)d" type="action"
                    class="oe_stat_button" icon="fa-smile-o">
                <field name="rating_count" string="Rating" widget="statinfo"/>
            </button>
        </xpath>
    </field>
</record>
```

Note that there are default views (kanban,pivot,graph) for ratings which
allow you a quick bird's eye view of your customer ratings.

You can find concrete examples of integration in the following models:

  - `project.task` in the Project (*rating\_project*) Application
  - `helpdesk.ticket` in the Helpdesk (*helpdesk* - Odoo Enterprise
    only) Application


---
## File: ./content/developer/reference/addons/actions.md

# Actions

Actions define the behavior of the system in response to user actions:
login, action button, selection of an invoice, ...

Actions can be stored in the database or returned directly as
dictionaries in e.g. button methods. All actions share two mandatory
attributes:

  - `type`  
    the category of the current action, determines which fields may be
    used and how the action is interpreted

  - `name`  
    short user-readable description of the action, may be displayed in
    the client's interface

A client can get actions in 4 forms:

  -   - `False`  
        if any action dialog is currently open, close it

  -   - A string  
        if a `client action <reference/actions/client>` matches,
        interpret as a client action's tag, otherwise treat as a number

  -   - A number  
        read the corresponding action record from the database, may be a
        database identifier or an `external id`

  -   - A dictionary  
        treat as a client action descriptor and execute

## Bindings

Aside from their two mandatory attributes, all actions also share
*optional* attributes used to present an action in an arbitrary model's
contextual menu:

  - `binding_model_id`  
    specifies which model the action is bound to
    
    <div class="note">
    
    <div class="title">
    
    Note
    
    </div>
    
    For Server Actions, use `model_id`.
    
    </div>

  - `binding_type`  
    specifies the type of binding, which is mostly which contextual menu
    the action will appear under
    
      - `action` (default)  
        Specifies that the action will appear in the `Action` contextual
        menu of the bound model.
    
      - `report`  
        Specifies that the action will appear in the `Print` contextual
        menu of the bound model.

  - `binding_view_types`  
    a comma-separated list of view types for which the action appears in
    the contextual menu, mostly "list" and / or "form". Defaults to
    `list,form` (both list and form )

## Window Actions (`ir.actions.act_window`)

The most common action type, used to present visualisations of a model
through `views <reference/views>`: a window action defines a set of view
types (and possibly specific views) for a model (and possibly specific
record of the model).

Its fields are:

  - `res_model`  
    model to present views for

  - `views`  
    a list of `(view_id, view_type)` pairs. The second element of each
    pair is the category of the view (tree, form, graph, ...) and the
    first is an optional database id (or `False`). If no id is provided,
    the client should fetch the default view of the specified type for
    the requested model (this is automatically done by
    `~odoo.models.Model.fields_view_get`). The first type of the list is
    the default view type and will be open by default when the action is
    executed. Each view type should be present at most once in the list

  - `res_id` (optional)  
    if the default view is `form`, specifies the record to load
    (otherwise a new record should be created)

  - `search_view_id` (optional)  
    `(id, name)` pair, `id` is the database identifier of a specific
    search view to load for the action. Defaults to fetching the default
    search view for the model

  - `target` (optional)  
    whether the views should be open in the main content area
    (`current`), in full screen mode (`fullscreen`) or in a dialog/popup
    (`new`). Use `main` instead of `current` to clear the breadcrumbs.
    Defaults to `current`.

  - `context` (optional)  
    additional context data to pass to the views

  - `domain` (optional)  
    filtering domain to implicitly add to all view search queries

  - `limit` (optional)  
    number of records to display in lists by default. Defaults to 80 in
    the web client

For instance, to open customers (partner with the `customer` flag set)
with list and form views:

    {
        "type": "ir.actions.act_window",
        "res_model": "res.partner",
        "views": [[False, "tree"], [False, "form"]],
        "domain": [["customer", "=", true]],
    }

Or to open the form view of a specific product (obtained separately) in
a new dialog:

    {
        "type": "ir.actions.act_window",
        "res_model": "product.product",
        "views": [[False, "form"]],
        "res_id": a_product_id,
        "target": "new",
    }

In-database window actions have a few different fields which should be
ignored by clients, mostly to use in composing the `views` list:

  - `view_mode` (default= `tree,form` )  
    comma-separated list of view types as a string (/\!\\ No spaces
    /\!\\). All of these types will be present in the generated `views`
    list (with at least a `False` view\_id)

  - `view_ids`  
    M2M\[1\] to view objects, defines the initial content of `views`
    
    <div class="note">
    
    <div class="title">
    
    Note
    
    </div>
    
    Act\_window views can also be defined cleanly through
    `ir.actions.act_window.view`.
    
    If you plan to allow multiple views for your model, prefer using
    ir.actions.act\_window.view instead of the action `view_ids`
    
    ``` xml
    <record model="ir.actions.act_window.view" id="test_action_tree">
       <field name="sequence" eval="1"/>
       <field name="view_mode">tree</field>
       <field name="view_id" ref="view_test_tree"/>
       <field name="act_window_id" ref="test_action"/>
    </record>
    ```
    
    </div>

  - `view_id`  
    specific view added to the `views` list in case its type is part of
    the `view_mode` list and not already filled by one of the views in
    `view_ids`

These are mostly used when defining actions from `reference/data`:

``` xml
<record model="ir.actions.act_window" id="test_action">
    <field name="name">A Test Action</field>
    <field name="res_model">some.model</field>
    <field name="view_mode">graph</field>
    <field name="view_id" ref="my_specific_view"/>
</record>
```

will use the "my\_specific\_view" view even if that's not the default
view for the model.

The server-side composition of the `views` sequence is the following:

  - get each `(id, type)` from `view_ids` (ordered by `sequence`)
  - if `view_id` is defined and its type isn't already filled, append
    its `(id, type)`
  - for each unfilled type in `view_mode`, append `(False, type)`

<div class="todo">

  - `usage`?
  - `groups_id`?
  - `filter`?

</div>

## URL Actions (`ir.actions.act_url`)

Allow opening a URL (website/web page) via an Odoo action. Can be
customized via two fields:

  - `url`  
    the address to open when activating the action

  - `target`  
    opens the address in a new window/page if `new`, replaces the
    current content with the page if `self`. Defaults to `new`

<!-- end list -->

    {
        "type": "ir.actions.act_url",
        "url": "https://odoo.com",
        "target": "self",
    }

will replace the current content section by the Odoo home page.

## Server Actions (`ir.actions.server`)

<div class="autoclass">

odoo.addons.base.models.ir\_actions.IrActionsServer

</div>

Allow triggering complex server code from any valid action location.
Only two fields are relevant to clients:

  - `id`  
    the in-database identifier of the server action to run

  - `context` (optional)  
    context data to use when running the server action

In-database records are significantly richer and can perform a number of
specific or generic actions based on their `state`. Some fields (and
corresponding behaviors) are shared between states:

  - `model_id`  
    Odoo model linked to the action.

`state`

  - `code`: Executes python code given through the `code` argument.
  - `object_create`: Creates a new record of model `crud_model_id`
    following `fields_lines` specifications.
  - `object_write`: Updates the current record(s) following
    `fields_lines` specifications
  - `multi`: Executes several actions given through the `child_ids`
    argument.

### State fields

Depending on its state, the behavior is defined through different
fields. The concerned state is given after each field.

  - `code` (code)  
    Specify a piece of Python code to execute when the action is called
    
    ``` xml
    <record model="ir.actions.server" id="print_instance">
        <field name="name">Res Partner Server Action</field>
        <field name="model_id" ref="model_res_partner"/>
        <field name="state">code</field>
        <field name="code">
            raise Warning(record.name)
        </field>
    </record>
    ```
    
    <div class="note">
    
    <div class="title">
    
    Note
    
    </div>
    
    The code segment can define a variable called `action`, which will
    be returned to the client as the next action to execute:
    
    ``` xml
    <record model="ir.actions.server" id="print_instance">
        <field name="name">Res Partner Server Action</field>
        <field name="model_id" ref="model_res_partner"/>
        <field name="state">code</field>
        <field name="code">
            if record.some_condition():
                action = {
                    "type": "ir.actions.act_window",
                    "view_mode": "form",
                    "res_model": record._name,
                    "res_id": record.id,
                }
        </field>
    </record>
    ```
    
    will ask the client to open a form for the record if it fulfills
    some condition
    
    </div>

  - `crud_model_id` (create)(required)  
    model in which to create a new record

  - `link_field_id` (create)  
    many2one to `ir.model.fields`, specifies the current record's m2o
    field on which the newly created record should be set (models should
    match)

  - `fields_lines` (create/write)  
    fields to override when creating or copying the record.
    `~odoo.fields.One2many` with the fields:
    
      - `col1`  
        `ir.model.fields` to set in the concerned model (`crud_model_id`
        for creates, `model_id` for updates)
    
      - `value`  
        value for the field, interpreted via `type`
    
      - `type` (valueequation)  
        If `value`, the `value` field is interpreted as a literal value
        (possibly converted), if `equation` the `value` field is
        interpreted as a Python expression and evaluated

  - `child_ids` (multi)  
    Specify the multiple sub-actions (`ir.actions.server`) to enact in
    state multi. If sub-actions themselves return actions, the last one
    will be returned to the client as the multi's own next action

### Evaluation context

A number of keys are available in the evaluation context of or
surrounding server actions:

  - `model` model object linked to the action via `model_id`
  - `record`/`records` record/recorset on which the action is triggered,
    can be void.
  - `env` Odoo Environment
  - `datetime`, `dateutil`, `time`, `timezone` corresponding Python
    modules
  - `log: log(message, level='info')` logging function to record debug
    information in ir.logging table
  - `Warning` constructor for the `Warning` exception

## Report Actions (`ir.actions.report`)

Triggers the printing of a report.

If you define your report through a
<span class="title-ref">\<record\></span> instead of a
<span class="title-ref">\<report\></span> tag and want the action to
show up in the Print menu of the model's views, you will also need to
specify `binding_model_id` from `reference/bindings`. It's not necessary
to set `binding_type` to `report`, since `ir.actions.report` will
implicitly default to that.

  - `name` (mandatory)  
    used as the file name if `print_report_name` is not specified.
    Otherwise, only useful as a mnemonic/description of the report when
    looking for one in a list of some sort

  - `model` (mandatory)  
    the model your report will be about

  - `report_type` (default=qweb-pdf)  
    either `qweb-pdf` for PDF reports or `qweb-html` for HTML

  - `report_name` (mandatory)  
    the name (`external id`) of the qweb template used to render the
    report

  - `print_report_name`  
    python expression defining the name of the report.

  - `groups_id`  
    `~odoo.fields.Many2many` field to the groups allowed to view/use the
    current report

  - `multi`  
    if set to `True`, the action will not be displayed on a form view.

  - `paperformat_id`  
    `~odoo.fields.Many2one` field to the paper format you wish to use
    for this report (if not specified, the company format will be used)

  - `attachment_use`  
    if set to `True`, the report is only generated once the first time
    it is requested, and re-printed from the stored report afterwards
    instead of being re-generated every time.
    
    Can be used for reports which must only be generated once (e.g. for
    legal reasons)

  - `attachment`  
    python expression that defines the name of the report; the record is
    accessible as the variable `object`

## Client Actions (`ir.actions.client`)

Triggers an action implemented entirely in the client.

  - `tag`  
    the client-side identifier of the action, an arbitrary string which
    the client should know how to react to

  - `params` (optional)  
    a Python dictionary of additional data to send to the client,
    alongside the client action tag

  - `target` (optional)  
    whether the client action should be open in the main content area
    (`current`), in full screen mode (`fullscreen`) or in a dialog/popup
    (`new`). Use `main` instead of `current` to clear the breadcrumbs.
    Defaults to `current`.

<!-- end list -->

    {
        "type": "ir.actions.client",
        "tag": "pos.ui"
    }

tells the client to start the Point of Sale interface, the server has no
idea how the POS interface works.

<div class="seealso">

\- `Tutorial: Client Actions <howtos/web/client_actions>`

</div>

## Automated Actions (`ir.cron`)

Actions triggered automatically on a predefined frequency.

  - `name`  
    Name of the automated action (Mainly used in log display)

  - `interval_number`  
    Number of *interval\_type* uom between two executions of the action

  - `interval_type`  
    Unit of measure of frequency interval (`minutes`, `hours`, `days`,
    `weeks`, `months`,

  - `numbercall`  
    Number of times this action has to be run. If the action is expected
    to run indefinitely, set to `-1`.

  - `doall`  
    Boolean precising whether the missed actions have to be executed in
    case of server restarts.

  - `model_id`  
    Model on which this action will be called

  - `code`  
    Code content of the action. Can be a simple call to the model's
    method :
    
    ``` python
    model.<method_name>()
    ```

  - `nextcall`  
    Next planned execution date of this action (date/time format)

<!-- end list -->

1.  technically not an M2M: adds a sequence field and may be composed of
    just a view type, without a view id.


---
## File: ./content/developer/reference/addons/orm.md

# ORM API

<div class="automodule">

odoo.models

</div>

## Models<span id="reference/orm/models"></span>

Model fields are defined as attributes on the model itself:

    from odoo import models, fields
    class AModel(models.Model):
        _name = 'a.model.name'
    
        field1 = fields.Char()

<div class="warning">

<div class="title">

Warning

</div>

this means you cannot define a field and a method with the same name,
the last one will silently overwrite the former ones.

</div>

By default, the field's label (user-visible name) is a capitalized
version of the field name, this can be overridden with the `string`
parameter. :

    field2 = fields.Integer(string="Field Label")

For the list of field types and parameters, see `the fields reference
<reference/fields>`.

Default values are defined as parameters on fields, either as a value:

    name = fields.Char(default="a value")

or as a function called to compute the default value, which should
return that value:

    def _default_name(self):
        return self.get_value()
    
    name = fields.Char(default=lambda self: self._default_name())

**API**

<div class="autoclass">

odoo.models.BaseModel()

<div class="autoattribute">

\_auto

</div>

<div class="attribute">

\_log\_access

Whether the ORM should automatically generate and update the
`reference/fields/automatic/log_access`.

Defaults to whatever value was set for `~._auto`.

</div>

<div class="autoattribute">

\_table

</div>

<div class="autoattribute">

\_sequence

</div>

<div class="autoattribute">

\_sql\_constraints

</div>

<div class="autoattribute">

\_register

</div>

<div class="autoattribute">

\_abstract

</div>

<div class="autoattribute">

\_transient

</div>

<div class="autoattribute">

\_name

</div>

<div class="autoattribute">

\_description

</div>

<div class="autoattribute">

\_inherit

</div>

<div class="autoattribute">

\_inherits

</div>

<div class="autoattribute">

\_rec\_name

</div>

<div class="autoattribute">

\_order

</div>

<div class="autoattribute">

\_check\_company\_auto

</div>

<div class="autoattribute">

\_parent\_name

</div>

<div class="autoattribute">

\_parent\_store

</div>

<div class="autoattribute">

\_date\_name

</div>

<div class="autoattribute">

\_fold\_name

</div>

</div>

### AbstractModel

<div class="autoclass">

odoo.models.AbstractModel()

</div>

### Model

<div class="autoclass">

odoo.models.Model()

<div class="autoattribute">

\_auto

</div>

<div class="autoattribute">

\_abstract

</div>

<div class="autoattribute">

\_transient

</div>

</div>

### TransientModel

<div class="autoclass">

odoo.models.TransientModel()

<div class="autoattribute">

\_auto

</div>

<div class="autoattribute">

\_abstract

</div>

<div class="autoattribute">

\_transient

</div>

</div>

## Fields<span id="reference/fields"></span>

<div class="currentmodule">

odoo.fields

</div>

<div class="autoclass">

Field()

</div>

### Basic Fields

<div class="autoclass">

Boolean()

</div>

<div class="autoclass">

Char()

</div>

<div class="autoclass">

Float()

</div>

<div class="autoclass">

Integer()

</div>

### Advanced Fields

<div class="autoclass">

Binary()

</div>

<div class="autoclass">

Html()

</div>

<div class="autoclass">

Image()

</div>

<div class="autoclass">

Monetary()

</div>

<div class="autoclass">

Selection()

</div>

<div class="autoclass">

Text()

</div>

#### Date(time) Fields

`Dates <odoo.fields.Date>` and `Datetimes <odoo.fields.Datetime>` are
very important fields in any kind of business application. Their misuse
can create invisible yet painful bugs, this section aims to provide Odoo
developers with the knowledge required to avoid misusing these fields.

When assigning a value to a Date/Datetime field, the following options
are valid:

  - A <span class="title-ref">date</span> or
    <span class="title-ref">datetime</span> object.
  - A string in the proper server format:
      - `YYYY-MM-DD` for `~odoo.fields.Date` fields,
      - `YYYY-MM-DD HH:MM:SS` for `~odoo.fields.Datetime` fields.
  - <span class="title-ref">False</span> or
    <span class="title-ref">None</span>.

The Date and Datetime fields class have helper methods to attempt
conversion into a compatible type:

  - `~odoo.fields.Date.to_date` will convert to a `datetime.date`
  - `~odoo.fields.Datetime.to_datetime` will convert to a
    `datetime.datetime`.

<div class="example">

To parse date/datetimes coming from external sources:

    fields.Date.to_date(self._context.get('date_from'))

</div>

Date / Datetime comparison best practices:

  - Date fields can **only** be compared to date objects.
  - Datetime fields can **only** be compared to datetime objects.

<div class="warning">

<div class="title">

Warning

</div>

Strings representing dates and datetimes can be compared between each
other, however the result may not be the expected result, as a datetime
string will always be greater than a date string, therefore this
practice is **heavily** discouraged.

</div>

Common operations with dates and datetimes such as addition, subtraction
or fetching the start/end of a period are exposed through both
`~odoo.fields.Date` and `~odoo.fields.Datetime`. These helpers are also
available by importing
<span class="title-ref">odoo.tools.date\_utils</span>.

<div class="note">

<div class="title">

Note

</div>

Timezones

Datetime fields are stored as <span class="title-ref">timestamp without
timezone</span> columns in the database and are stored in the UTC
timezone. This is by design, as it makes the Odoo database independent
from the timezone of the hosting server system. Timezone conversion is
managed entirely by the client side.

</div>

<div class="autoclass" data-members="today, context_today, to_date, to_string, start_of, end_of, add, subtract">

Date()

</div>

<div class="autoclass" data-members="now, today, context_timestamp, to_datetime, to_string, start_of, end_of, add, subtract">

Datetime()

</div>

#### Relational Fields

<div class="autoclass">

Many2one()

</div>

<div class="autoclass">

One2many()

</div>

<div class="autoclass">

Many2many()

</div>

#### Pseudo-relational fields

<div class="autoclass">

Reference()

</div>

<div class="autoclass">

Many2oneReference()

</div>

#### Computed Fields

Fields can be computed (instead of read straight from the database)
using the `compute` parameter. **It must assign the computed value to
the field**. If it uses the values of other *fields*, it should specify
those fields using `~odoo.api.depends`. :

    from odoo import api
    total = fields.Float(compute='_compute_total')
    
    @api.depends('value', 'tax')
    def _compute_total(self):
        for record in self:
            record.total = record.value + record.value * record.tax

  - dependencies can be dotted paths when using sub-fields:
    
        @api.depends('line_ids.value')
        def _compute_total(self):
            for record in self:
                record.total = sum(line.value for line in record.line_ids)

  - computed fields are not stored by default, they are computed and
    returned when requested. Setting `store=True` will store them in the
    database and automatically enable searching.

  - searching on a computed field can also be enabled by setting the
    `search` parameter. The value is a method name returning a
    `reference/orm/domains`. :
    
        upper_name = field.Char(compute='_compute_upper', search='_search_upper')
        
        def _search_upper(self, operator, value):
            if operator == 'like':
                operator = 'ilike'
            return [('name', operator, value)]
    
    The search method is invoked when processing domains before doing an
    actual search on the model. It must return a domain equivalent to
    the condition: `field operator value`.

<!-- end list -->

  - Computed fields are readonly by default. To allow *setting* values
    on a computed field, use the `inverse` parameter. It is the name of
    a function reversing the computation and setting the relevant
    fields:
    
        document = fields.Char(compute='_get_document', inverse='_set_document')
        
        def _get_document(self):
            for record in self:
                with open(record.get_document_path) as f:
                    record.document = f.read()
        def _set_document(self):
            for record in self:
                if not record.document: continue
                with open(record.get_document_path()) as f:
                    f.write(record.document)

  - multiple fields can be computed at the same time by the same method,
    just use the same method on all fields and set all of them:
    
        discount_value = fields.Float(compute='_apply_discount')
        total = fields.Float(compute='_apply_discount')
        
        @api.depends('value', 'discount')
        def _apply_discount(self):
            for record in self:
                # compute actual discount from discount percentage
                discount = record.value * record.discount
                record.discount_value = discount
                record.total = record.value - discount

<div class="warning">

<div class="title">

Warning

</div>

While it is possible to use the same compute method for multiple fields,
it is not recommended to do the same for the inverse method.

During the computation of the inverse, **all** fields that use said
inverse are protected, meaning that they can't be computed, even if
their value is not in the cache.

If any of those fields is accessed and its value is not in cache, the
ORM will simply return a default value of
<span class="title-ref">False</span> for these fields. This means that
the value of the inverse fields (other than the one triggering the
inverse method) may not give their correct value and this will probably
break the expected behavior of the inverse method.

</div>

#### Related fields

A special case of computed fields are *related* (proxy) fields, which
provide the value of a sub-field on the current record. They are defined
by setting the `related` parameter and like regular computed fields they
can be stored:

    nickname = fields.Char(related='user_id.partner_id.name', store=True)

The value of a related field is given by following a sequence of
relational fields and reading a field on the reached model. The complete
sequence of fields to traverse is specified by the `related` attribute.

Some field attributes are automatically copied from the source field if
they are not redefined: `string`, `help`, `required` (only if all fields
in the sequence are required), `groups`, `digits`, `size`, `translate`,
`sanitize`, `selection`, `comodel_name`, `domain`, `context`. All
semantic-free attributes are copied from the source field.

By default, related fields are:

  - not stored
  - not copied
  - readonly
  - computed in superuser mode

Add the attribute `store=True` to make it stored, just like computed
fields. Related fields are automatically recomputed when their
dependencies are modified.

<div class="tip">

<div class="title">

Tip

</div>

You can specify precise field dependencies if you don't want the related
field to be recomputed on any dependency change:

    nickname = fields.Char(
        related='partner_id.name', store=True,
        depends=['partner_id'])
    # The nickname will only be recomputed when the partner_id
    # is modified, not when the name is modified on the partner.

</div>

<div class="warning">

<div class="title">

Warning

</div>

You cannot chain `~odoo.fields.Many2many` or `~odoo.fields.One2many`
fields in `related` fields dependencies.

`related` can be used to refer to a `~odoo.fields.One2many` or
`~odoo.fields.Many2many` field on another model on the condition that
it's done through a `Many2one` relation on the current model. `One2many`
and `Many2many` are not supported and the results will not be aggregated
correctly:

    m2o_id = fields.Many2one()
    m2m_ids = fields.Many2many()
    o2m_ids = fields.One2many()
    
    # Supported
    d_ids = fields.Many2many(related="m2o_id.m2m_ids")
    e_ids = fields.One2many(related="m2o_id.o2m_ids")
    
    # Won't work: use a custom Many2many computed field instead
    f_ids = fields.Many2many(related="m2m_ids.m2m_ids")
    g_ids = fields.One2many(related="o2m_ids.o2m_ids")

</div>

### Automatic fields

<div class="attribute">

id

Identifier `field <odoo.fields.Field>`

If length of current recordset is 1, return id of unique record in it.

Raise an Error otherwise.

</div>

#### Access Log fields

These fields are automatically set and updated if
`~odoo.models.BaseModel._log_access` is enabled. It can be disabled to
avoid creating or updating those fields on tables for which they are not
useful.

By default, `~odoo.models.BaseModel._log_access` is set to the same
value as `~odoo.models.BaseModel._auto`

<div class="attribute">

create\_date

Stores when the record was created, `~odoo.fields.Datetime`

</div>

<div class="attribute">

create\_uid

Stores *who* created the record, `~odoo.fields.Many2one` to a
`res.users`.

</div>

<div class="attribute">

write\_date

Stores when the record was last updated, `~odoo.fields.Datetime`

</div>

<div class="attribute">

write\_uid

Stores who last updated the record, `~odoo.fields.Many2one` to a
`res.users`.

</div>

<div class="warning">

<div class="title">

Warning

</div>

`~odoo.models.BaseModel._log_access` *must* be enabled on
`~odoo.models.TransientModel`.

</div>

### Reserved Field names

A few field names are reserved for pre-defined behaviors beyond that of
automated fields. They should be defined on a model when the related
behavior is desired:

<div class="attribute">

name

default value for `~odoo.models.BaseModel._rec_name`, used to display
records in context where a representative "naming" is necessary.

`~odoo.fields.Char`

</div>

<div class="attribute">

active

toggles the global visibility of the record, if `active` is set to
`False` the record is invisible in most searches and listing.

`~odoo.fields.Boolean`

</div>

<div class="attribute">

state

lifecycle stages of the object, used by the `states` attribute on
`fields <odoo.fields.Field>`.

`~odoo.fields.Selection`

</div>

<div class="attribute">

parent\_id

default\_value of `~._parent_name`, used to organize records in a tree
structure and enables the `child_of` and `parent_of` operators in
domains.

`~odoo.fields.Many2one`

</div>

<div class="attribute">

parent\_path

When `~._parent_store` is set to True, used to store a value reflecting
the tree structure of `~._parent_name`, and to optimize the operators
`child_of` and `parent_of` in search domains. It must be declared with
`index=True` for proper operation.

`~odoo.fields.Char`

</div>

<div class="attribute">

company\_id

Main field name used for Odoo multi-company behavior.

Used by
<span class="title-ref">:meth:\~odoo.models.\_check\_company</span> to
check multi company consistency. Defines whether a record is shared
between companies (no value) or only accessible by the users of a given
company.

`~odoo.fields.Many2one` :type: `~odoo.addons.base.models.res_company`

</div>

## Recordsets

Interactions with models and records are performed through recordsets,
an ordered collection of records of the same model.

<div class="warning">

<div class="title">

Warning

</div>

Contrary to what the name implies, it is currently possible for
recordsets to contain duplicates. This may change in the future.

</div>

Methods defined on a model are executed on a recordset, and their `self`
is a recordset:

    class AModel(models.Model):
        _name = 'a.model'
        def a_method(self):
            # self can be anything between 0 records and all records in the
            # database
            self.do_operation()

Iterating on a recordset will yield new sets of *a single record*
("singletons"), much like iterating on a Python string yields strings of
a single characters:

    def do_operation(self):
        print(self) # => a.model(1, 2, 3, 4, 5)
        for record in self:
            print(record) # => a.model(1), then a.model(2), then a.model(3), ...

### Field access

Recordsets provide an "Active Record" interface: model fields can be
read and written directly from the record as attributes.

<div class="note">

<div class="title">

Note

</div>

When accessing non-relational fields on a recordset of potentially
multiple records, use `~odoo.models.BaseModel.mapped`:

    total_qty = sum(self.mapped('qty'))

</div>

Field values can also be accessed like dict items, which is more elegant
and safer than `getattr()` for dynamic field names. Setting a field's
value triggers an update to the database:

    >>> record.name
    Example Name
    >>> record.company_id.name
    Company Name
    >>> record.name = "Bob"
    >>> field = "name"
    >>> record[field]
    Bob

<div class="warning">

<div class="title">

Warning

</div>

Trying to read a field on multiple records will raise an error for non
relational fields.

</div>

Accessing a relational field (`~odoo.fields.Many2one`,
`~odoo.fields.One2many`, `~odoo.fields.Many2many`) *always* returns a
recordset, empty if the field is not set.

### Record cache and prefetching

Odoo maintains a cache for the fields of the records, so that not every
field access issues a database request, which would be terrible for
performance. The following example queries the database only for the
first statement:

    record.name             # first access reads value from database
    record.name             # second access gets value from cache

To avoid reading one field on one record at a time, Odoo *prefetches*
records and fields following some heuristics to get good performance.
Once a field must be read on a given record, the ORM actually reads that
field on a larger recordset, and stores the returned values in cache for
later use. The prefetched recordset is usually the recordset from which
the record comes by iteration. Moreover, all simple stored fields
(boolean, integer, float, char, text, date, datetime, selection,
many2one) are fetched altogether; they correspond to the columns of the
model's table, and are fetched efficiently in the same query.

Consider the following example, where `partners` is a recordset of 1000
records. Without prefetching, the loop would make 2000 queries to the
database. With prefetching, only one query is made:

    for partner in partners:
        print partner.name          # first pass prefetches 'name' and 'lang'
                                    # (and other fields) on all 'partners'
        print partner.lang

The prefetching also works on *secondary records*: when relational
fields are read, their values (which are records) are subscribed for
future prefetching. Accessing one of those secondary records prefetches
all secondary records from the same model. This makes the following
example generate only two queries, one for partners and one for
countries:

    countries = set()
    for partner in partners:
        country = partner.country_id        # first pass prefetches all partners
        countries.add(country.name)         # first pass prefetches all countries

## Method decorators

<div class="automodule" data-members="depends, depends_context, constrains, onchange, returns, autovacuum, model, model_create_multi">

odoo.api

</div>

<div class="todo">

With sphinx 2.0 : autodecorator

</div>

<div class="todo">

Add in Views reference \* It is possible to suppress the trigger from a
specific field by adding `on_change="0"` in a view:

    <field name="name" on_change="0"/>

will not trigger any interface update when the field is edited by the
user, even if there are function fields or explicit onchange depending
on that field.

</div>

## Environment

The `~odoo.api.Environment` stores various contextual data used by the
ORM: the database cursor (for database queries), the current user (for
access rights checking) and the current context (storing arbitrary
metadata). The environment also stores caches.

All recordsets have an environment, which is immutable, can be accessed
using `~odoo.models.Model.env` and gives access to:

  - the current user (`~odoo.api.Environment.user`)
  - the cursor (`~odoo.api.Environment.cr`)
  - the superuser flag (`~odoo.api.Environment.su`)
  - or the context (`~odoo.api.Environment.context`)

<!-- end list -->

``` bash
>>> records.env
<Environment object ...>
>>> records.env.user
res.user(3)
>>> records.env.cr
<Cursor object ...)
```

When creating a recordset from an other recordset, the environment is
inherited. The environment can be used to get an empty recordset in an
other model, and query that model:

    >>> self.env['res.partner']
    res.partner()
    >>> self.env['res.partner'].search([['is_company', '=', True], ['customer', '=', True]])
    res.partner(7, 18, 12, 14, 17, 19, 8, 31, 26, 16, 13, 20, 30, 22, 29, 15, 23, 28, 74)

<div class="currentmodule">

odoo.api

</div>

<div class="automethod">

Environment.ref

</div>

<div class="autoattribute">

Environment.lang

</div>

<div class="autoattribute">

Environment.user

</div>

<div class="autoattribute">

Environment.company

</div>

<div class="autoattribute">

Environment.companies

</div>

### Altering the environment

<div class="currentmodule">

odoo.models

</div>

<div class="automethod">

Model.with\_context

</div>

<div class="automethod">

Model.with\_user

</div>

<div class="automethod">

Model.with\_company

</div>

<div class="automethod">

Model.with\_env

</div>

<div class="automethod">

Model.sudo

</div>

### SQL Execution

The `~odoo.api.Environment.cr` attribute on environments is the cursor
for the current database transaction and allows executing SQL directly,
either for queries which are difficult to express using the ORM (e.g.
complex joins) or for performance reasons:

    self.env.cr.execute("some_sql", params)

Because models use the same cursor and the `~odoo.api.Environment` holds
various caches, these caches must be invalidated when *altering* the
database in raw SQL, or further uses of models may become incoherent. It
is necessary to clear caches when using `CREATE`, `UPDATE` or `DELETE`
in SQL, but not `SELECT` (which simply reads the database).

<div class="note">

<div class="title">

Note

</div>

Clearing caches can be performed using the
`~odoo.models.Model.invalidate_cache` method.

</div>

<div class="automethod">

Model.invalidate\_cache

</div>

<div class="warning">

<div class="title">

Warning

</div>

Executing raw SQL bypasses the ORM, and by consequent, Odoo security
rules. Please make sure your queries are sanitized when using user input
and prefer using ORM utilities if you don't really need to use SQL
queries.

</div>

## Common ORM methods

<div class="currentmodule">

odoo.models

</div>

### Create/update

<div class="todo">

api.model\_create\_multi information

</div>

<div class="automethod">

Model.create

</div>

<div class="automethod">

Model.copy

</div>

<div class="automethod">

Model.default\_get

</div>

<div class="automethod">

Model.name\_create

</div>

<div class="automethod">

Model.write

</div>

<div class="automethod">

Model.flush

</div>

### Search/Read

<div class="automethod">

Model.browse

</div>

<div class="automethod">

Model.search

</div>

<div class="automethod">

Model.search\_count

</div>

<div class="automethod">

Model.name\_search

</div>

<div class="automethod">

Model.read

</div>

<div class="automethod">

Model.read\_group

</div>

#### Fields/Views

<div class="automethod">

Model.fields\_get

</div>

<div class="automethod">

Model.fields\_view\_get

</div>

#### Search domains

A domain is a list of criteria, each criterion being a triple (either a
`list` or a `tuple`) of `(field_name, operator, value)` where:

  -   - `field_name` (`str`)  
        a field name of the current model, or a relationship traversal
        through a `~odoo.fields.Many2one` using dot-notation e.g.
        `'street'` or `'partner_id.country'`

  -   - `operator` (`str`)  
        an operator used to compare the `field_name` with the `value`.
        Valid operators are:
        
          - `=`  
            equals to
        
          - `!=`  
            not equals to
        
          - `>`  
            greater than
        
          - `>=`  
            greater than or equal to
        
          - `<`  
            less than
        
          - `<=`  
            less than or equal to
        
          - `=?`  
            unset or equals to (returns true if `value` is either `None`
            or `False`, otherwise behaves like `=`)
        
          - `=like`  
            matches `field_name` against the `value` pattern. An
            underscore `_` in the pattern stands for (matches) any
            single character; a percent sign `%` matches any string of
            zero or more characters.
        
          - `like`  
            matches `field_name` against the `%value%` pattern. Similar
            to `=like` but wraps `value` with '%' before matching
        
          - `not like`  
            doesn't match against the `%value%` pattern
        
          - `ilike`  
            case insensitive `like`
        
          - `not ilike`  
            case insensitive `not like`
        
          - `=ilike`  
            case insensitive `=like`
        
          - `in`  
            is equal to any of the items from `value`, `value` should be
            a list of items
        
          - `not in`  
            is unequal to all of the items from `value`
        
          - `child_of`  
            is a child (descendant) of a `value` record (value can be
            either one item or a list of items).
            
            Takes the semantics of the model into account (i.e following
            the relationship field named by
            `~odoo.models.Model._parent_name`).
        
          - `parent_of`  
            is a parent (ascendant) of a `value` record (value can be
            either one item or a list of items).
            
            Takes the semantics of the model into account (i.e following
            the relationship field named by
            `~odoo.models.Model._parent_name`).

  -   - `value`  
        variable type, must be comparable (through `operator`) to the
        named field.

Domain criteria can be combined using logical operators in *prefix*
form:

  - `'&'`  
    logical *AND*, default operation to combine criteria following one
    another. Arity 2 (uses the next 2 criteria or combinations).

  - `'|'`  
    logical *OR*, arity 2.

  - `'!'`  
    logical *NOT*, arity 1.
    
    <div class="note">
    
    <div class="title">
    
    Note
    
    </div>
    
    Mostly to negate combinations of criteria Individual criterion
    generally have a negative form (e.g. `=` -\> `!=`, `<` -\> `>=`)
    which is simpler than negating the positive.
    
    </div>

<div class="example">

To search for partners named *ABC*, from belgium or germany, whose
language is not english:

    [('name','=','ABC'),
     ('language.code','!=','en_US'),
     '|',('country_id.code','=','be'),
         ('country_id.code','=','de')]

This domain is interpreted as:

``` text
(name is 'ABC')
AND (language is NOT english)
AND (country is Belgium OR Germany)
```

</div>

### Unlink

<div class="automethod">

Model.unlink

</div>

### Record(set) information

<div class="autoattribute">

Model.ids

</div>

<div class="attribute">

env

Returns the environment of the given recordset.

  - type  
    `~odoo.api.Environment`

</div>

<div class="todo">

Environment documentation

</div>

<div class="automethod">

Model.exists

</div>

<div class="automethod">

Model.ensure\_one

</div>

<div class="automethod">

Model.name\_get

</div>

<div class="automethod">

Model.get\_metadata

</div>

### Operations

Recordsets are immutable, but sets of the same model can be combined
using various set operations, returning new recordsets.

  - `record in set` returns whether `record` (which must be a 1-element
    recordset) is present in `set`. `record not in set` is the inverse
    operation
  - `set1 <= set2` and `set1 < set2` return whether `set1` is a subset
    of `set2` (resp. strict)
  - `set1 >= set2` and `set1 > set2` return whether `set1` is a superset
    of `set2` (resp. strict)
  - `set1 | set2` returns the union of the two recordsets, a new
    recordset containing all records present in either source
  - `set1 & set2` returns the intersection of two recordsets, a new
    recordset containing only records present in both sources
  - `set1 - set2` returns a new recordset containing only records of
    `set1` which are *not* in `set2`

Recordsets are iterable so the usual Python tools are available for
transformation (`python:map`, `python:sorted`,
`~python:itertools.ifilter`, ...) however these return either a
`python:list` or an `python:iterator`, removing the ability to call
methods on their result, or to use set operations.

Recordsets therefore provide the following operations returning
recordsets themselves (when possible):

#### Filter

<div class="automethod">

Model.filtered

</div>

<div class="automethod">

Model.filtered\_domain

</div>

#### Map

<div class="automethod">

Model.mapped

</div>

<div class="note">

<div class="title">

Note

</div>

Since V13, multi-relational field access is supported and works like a
mapped call:

``` python3
records.partner_id  # == records.mapped('partner_id')
records.partner_id.bank_ids  # == records.mapped('partner_id.bank_ids')
records.partner_id.mapped('name')  # == records.mapped('partner_id.name')
```

</div>

#### Sort

<div class="automethod">

Model.sorted

</div>

## Inheritance and extension

Odoo provides three different mechanisms to extend models in a modular
way:

  - creating a new model from an existing one, adding new information to
    the copy but leaving the original module as-is
  - extending models defined in other modules in-place, replacing the
    previous version
  - delegating some of the model's fields to records it contains

![image](orm/inheritance_methods.png)

### Classical inheritance

When using the `~odoo.models.Model._inherit` and
`~odoo.models.Model._name` attributes together, Odoo creates a new model
using the existing one (provided via `~odoo.models.Model._inherit`) as a
base. The new model gets all the fields, methods and meta-information
(defaults & al) from its base.

``` python
class Inheritance0(models.Model):
    _name = 'inheritance.0'
    _description = 'Inheritance Zero'

    name = fields.Char()

    def call(self):
        return self.check("model 0")

    def check(self, s):
        return "This is {} record {}".format(s, self.name)

class Inheritance1(models.Model):
    _name = 'inheritance.1'
    _inherit = 'inheritance.0'
    _description = 'Inheritance One'

    def call(self):
        return self.check("model 1")
```

and using them:

    a = env['inheritance.0'].create({'name': 'A'})
    b = env['inheritance.1'].create({'name': 'B'})
    
    a.call()
    b.call()

will yield:

> "This is model 0 record A" "This is model 1 record B"

the second model has inherited from the first model's `check` method and
its `name` field, but overridden the `call` method, as when using
standard `Python inheritance <python:tut-inheritance>`.

### Extension

When using `~odoo.models.Model._inherit` but leaving out
`~odoo.models.Model._name`, the new model replaces the existing one,
essentially extending it in-place. This is useful to add new fields or
methods to existing models (created in other modules), or to customize
or reconfigure them (e.g. to change their default sort order):

    class Extension0(models.Model):
    _name = 'extension.0'
    _description = 'Extension zero'
    
    name = fields.Char(default="A")
    
    class Extension1(models.Model):
    _inherit = 'extension.0'
    
    description = fields.Char(default="Extended")

``` python3
record = env['extension.0'].create({})
record.read()[0]
```

will yield:

    {'name': "A", 'description': "Extended"}

<div class="note">

<div class="title">

Note

</div>

It will also yield the various `automatic fields
<reference/fields/automatic>` unless they've been disabled

</div>

### Delegation

The third inheritance mechanism provides more flexibility (it can be
altered at runtime) but less power: using the
`~odoo.models.Model._inherits` a model *delegates* the lookup of any
field not found on the current model to "children" models. The
delegation is performed via `~odoo.fields.Reference` fields
automatically set up on the parent model.

The main difference is in the meaning. When using Delegation, the model
**has one** instead of **is one**, turning the relationship in a
composition instead of inheritance:

    class Screen(models.Model):
        _name = 'delegation.screen'
        _description = 'Screen'
    
        size = fields.Float(string='Screen Size in inches')
    
    class Keyboard(models.Model):
        _name = 'delegation.keyboard'
        _description = 'Keyboard'
    
        layout = fields.Char(string='Layout')
    
    class Laptop(models.Model):
        _name = 'delegation.laptop'
        _description = 'Laptop'
    
        _inherits = {
            'delegation.screen': 'screen_id',
            'delegation.keyboard': 'keyboard_id',
        }
    
        name = fields.Char(string='Name')
        maker = fields.Char(string='Maker')
    
        # a Laptop has a screen
        screen_id = fields.Many2one('delegation.screen', required=True, ondelete="cascade")
        # a Laptop has a keyboard
        keyboard_id = fields.Many2one('delegation.keyboard', required=True, ondelete="cascade")

``` python3
record = env['delegation.laptop'].create({
    'screen_id': env['delegation.screen'].create({'size': 13.0}).id,
    'keyboard_id': env['delegation.keyboard'].create({'layout': 'QWERTY'}).id,
})
record.size
record.layout
```

will result in:

    13.0
    'QWERTY'

and it's possible to write directly on the delegated field:

    record.write({'size': 14.0})

<div class="warning">

<div class="title">

Warning

</div>

when using delegation inheritance, methods are *not* inherited, only
fields

</div>

<div class="warning">

<div class="title">

Warning

</div>

  - <span class="title-ref">\_inherits</span> is more or less
    implemented, avoid it if you can;
  - chained <span class="title-ref">\_inherits</span> is essentially not
    implemented, we cannot guarantee anything on the final behavior.

</div>

### Fields Incremental Definition

A field is defined as class attribute on a model class. If the model is
extended, one can also extend the field definition by redefining a field
with the same name and same type on the subclass. In that case, the
attributes of the field are taken from the parent class and overridden
by the ones given in subclasses.

For instance, the second class below only adds a tooltip on the field
`state`:

    class First(models.Model):
        _name = 'foo'
        state = fields.Selection([...], required=True)
    
    class Second(models.Model):
        _inherit = 'foo'
        state = fields.Selection(help="Blah blah blah")

## Error management

<div class="automodule" data-members="AccessDenied, AccessError, CacheMiss, MissingError, RedirectWarning, UserError, ValidationError">

odoo.exceptions

</div>


---
## File: ./content/developer/reference/addons/security.md

# Security in Odoo

Aside from manually managing access using custom code, Odoo provides two
main data-driven mechanisms to manage or restrict access to data.

Both mechanisms are linked to specific users through *groups*: a user
belongs to any number of groups, and security mechanisms are associated
to groups, thus applying security mechanisms to users.

<div class="res.groups">

<div class="attribute">

name

serves as user-readable identification for the group (spells out the
role / purpose of the group)

</div>

<div class="attribute">

category\_id

The *module category*, serves to associate groups with an Odoo App (\~a
set of related business models) and convert them into an exclusive
selection in the user form.

<div class="todo">

clarify & document special cases & relationship between groups &
categories better

</div>

</div>

<div class="attribute">

implied\_ids

Other groups to set on the user alongside this one. This is a
convenience pseudo-inheritance relationship: it's possible to explicitly
remove implied groups from a user without removing the implier.

</div>

<div class="attribute">

comment

Additional notes on the group e.g.

</div>

</div>

## Access Rights

*Grants* access to an entire model for a given set of operations. If no
access rights matches an operation on a model for a user (through their
group), the user doesn't have access.

Access rights are additive, a user's accesses are the union of the
accesses they get through all their groups e.g. given a user who is part
of group A granting read and create access and a group B granting update
access, the user will have all three of create, read, and update.

<div class="ir.model.access">

<div class="attribute">

name

The purpose or role of the group.

</div>

<div class="attribute">

model\_id

The model whose access the ACL controls.

</div>

<div class="attribute">

group\_id

The `res.groups` to which the accesses are granted, an empty `group_id`
means the ACL is granted to *every user* (non-employees e.g. portal or
public users).

</div>

The `perm_{method}` attributes grant the corresponding CRUD access when
set, they are all unset by default.

<div class="attribute">

perm\_create

</div>

<div class="attribute">

perm\_read

</div>

<div class="attribute">

perm\_write

</div>

<div class="attribute">

perm\_unlink

</div>

</div>

## Record Rules

Record rules are *conditions* which must be satisfied in order for an
operation to be allowed. Record rules are evaluated record-by-record,
following access rights.

Record rules are default-allow: if access rights grant access and no
rule applies to the operation and model for the user, the access is
granted.

<div class="ir.rule">

<div class="attribute">

name

The description of the rule.

</div>

<div class="attribute">

model\_id

The model to which the rule applies.

</div>

<div class="attribute">

groups

The `res.groups` to which access is granted (or not). Multiple groups
can be specified. If no group is specified, the rule is *global* which
is treated differently than "group" rules (see below).

</div>

<div class="attribute">

global

Computed on the basis of `groups`, provides easy access to the global
status (or not) of the rule.

</div>

<div class="attribute">

domain\_force

A predicate specified as a `domain <reference/orm/domains>`, the rule
allows the selected operations if the domain matches the record, and
forbids it otherwise.

The domain is a *python expression* which can use the following
variables:

  - `time`  
    Python's `python:time` module.

  - `user`  
    The current user, as a singleton recordset.

  - `company_id`  
    The current user's currently selected company as a single company id
    (not a recordset).

  - `company_ids`  
    All the companies to which the current user has access as a list of
    company ids (not a recordset), see `howto/company/security` for more
    details.

</div>

The `perm_{method}` have completely different semantics than for
`ir.model.access`: for rules, they specify which operation the rules
applies *for*. If an operation is not selected, then the rule is not
checked for it, as if the rule did not exist.

All operations are selected by default.

<div class="attribute">

perm\_create

</div>

<div class="attribute">

perm\_read

</div>

<div class="attribute">

perm\_write

</div>

<div class="attribute">

perm\_unlink

</div>

</div>

### Global rules versus group rules

There is a large difference between global and group rules in how they
compose and combine:

  - Global rules *intersect*, if two global rules apply then *both* must
    be satisfied for the access to be granted, this means adding global
    rules always restricts access further.
  - Group rules *unify*, if two group rules apply then *either* can be
    satisfied for the access to be granted. This means adding group
    rules can expand access, but not beyond the bounds defined by global
    rules.
  - The global and group rulesets *intersect*, which means the first
    group rule being added to a given global ruleset will restrict
    access.

<div class="danger">

<div class="title">

Danger

</div>

Creating multiple global rules is risky as it's possible to create
non-overlapping rulesets, which will remove all access.

</div>

## Field Access

An ORM `~odoo.fields.Field` can have a `groups` attribute providing a
list of groups (as a comma-separated string of `external identifiers`).

If the current user is not in one of the listed groups, he will not have
access to the field:

  - restricted fields are automatically removed from requested views
  - restricted fields are removed from `~odoo.models.Model.fields_get`
    responses
  - attempts to (explicitly) read from or write to restricted fields
    results in an access error

<div class="todo">

field access groups apply to the Superuser in fields\_get but not in
read/write...

</div>

## Security Pitfalls

As a developer, it is important to understand the security mechanisms
and avoid common mistakes leading to insecure code.

### Unsafe Public Methods

Any public method can be executed via a `RPC call
<api/external_api/calling_methods>` with the chosen parameters. The
methods starting with a `_` are not callable from an action button or
external API.

On public methods, the record on which a method is executed and the
parameters can not be trusted, ACL being only verified during CRUD
operations.

``` python
# this method is public and its arguments can not be trusted
def action_done(self):
    if self.state == "draft" and self.user_has_groups('base.manager'):
        self._set_state("done")

# this method is private and can only be called from other python methods
def _set_state(self, new_state):
    self.sudo().write({"state": new_state})
```

Making a method private is obviously not enough and care must be taken
to use it properly.

### Bypassing the ORM

You should never use the database cursor directly when the ORM can do
the same thing\! By doing so you are bypassing all the ORM features,
possibly the automated behaviours like translations, invalidation of
fields, `active`, access rights and so on.

And chances are that you are also making the code harder to read and
probably less secure.

``` python
# very very wrong
self.env.cr.execute('SELECT id FROM auction_lots WHERE auction_id in (' + ','.join(map(str, ids))+') AND state=%s AND obj_price > 0', ('draft',))
auction_lots_ids = [x[0] for x in self.env.cr.fetchall()]

# no injection, but still wrong
self.env.cr.execute('SELECT id FROM auction_lots WHERE auction_id in %s '\
           'AND state=%s AND obj_price > 0', (tuple(ids), 'draft',))
auction_lots_ids = [x[0] for x in self.env.cr.fetchall()]

# better
auction_lots_ids = self.search([('auction_id','in',ids), ('state','=','draft'), ('obj_price','>',0)])
```

#### SQL injections

Care must be taken not to introduce SQL injections vulnerabilities when
using manual SQL queries. The vulnerability is present when user input
is either incorrectly filtered or badly quoted, allowing an attacker to
introduce undesirable clauses to a SQL query (such as circumventing
filters or executing `UPDATE` or `DELETE` commands).

The best way to be safe is to never, NEVER use Python string
concatenation (+) or string parameters interpolation (%) to pass
variables to a SQL query string.

The second reason, which is almost as important, is that it is the job
of the database abstraction layer (psycopg2) to decide how to format
query parameters, not your job\! For example psycopg2 knows that when
you pass a list of values it needs to format them as a comma-separated
list, enclosed in parentheses \!

``` python
# the following is very bad:
#   - it's a SQL injection vulnerability
#   - it's unreadable
#   - it's not your job to format the list of ids
self.env.cr.execute('SELECT distinct child_id FROM account_account_consol_rel ' +
           'WHERE parent_id IN ('+','.join(map(str, ids))+')')

# better
self.env.cr.execute('SELECT DISTINCT child_id '\
           'FROM account_account_consol_rel '\
           'WHERE parent_id IN %s',
           (tuple(ids),))
```

This is very important, so please be careful also when refactoring, and
most importantly do not copy these patterns\!

Here is a memorable example to help you remember what the issue is about
(but do not copy the code there). Before continuing, please be sure to
read the online documentation of pyscopg2 to learn of to use it
properly:

  - [The problem with query
    parameters](http://initd.org/psycopg/docs/usage.html#the-problem-with-the-query-parameters)
  - [How to pass parameters with
    psycopg2](http://initd.org/psycopg/docs/usage.html#passing-parameters-to-sql-queries)
  - [Advanced parameter
    types](http://initd.org/psycopg/docs/usage.html#adaptation-of-python-values-to-sql-types)
  - [Psycopg documentation](https://www.psycopg.org/docs/sql.html)

### Unescaped field content

When rendering content using JavaScript and XML, one may be tempted to
use a `t-raw` to display rich-text content. This should be avoided as a
frequent [XSS](https://en.wikipedia.org/wiki/Cross-site_scripting)
vector.

It is very hard to control the integrity of the data from the
computation until the final integration in the browser DOM. A `t-raw`
that is correctly escaped at the time of introduction may no longer be
safe at the next bugfix or refactoring.

``` javascript
QWeb.render('insecure_template', {
    info_message: "You have an <strong>important</strong> notification",
})
```

``` xml
<div t-name="insecure_template">
    <div id="information-bar"><t t-raw="info_message" /></div>
</div>
```

The above code may feel safe as the message content is controlled but is
a bad practice that may lead to unexpected security vulnerabilities once
this code evolves in the future.

``` javascript
// XSS possible with unescaped user provided content !
QWeb.render('insecure_template', {
    info_message: "You have an <strong>important</strong> notification on " \
        + "the product <strong>" + product.name + "</strong>",
})
```

While formatting the template differently would prevent such
vulnerabilities.

``` javascript
QWeb.render('secure_template', {
    message: "You have an important notification on the product:",
    subject: product.name
})
```

``` xml
<div t-name="secure_template">
    <div id="information-bar">
        <div class="info"><t t-esc="message" /></div>
        <div class="subject"><t t-esc="subject" /></div>
    </div>
</div>
```

``` css
.subject {
    font-weight: bold;
}
```

### Escaping vs Sanitizing

<div class="important">

<div class="title">

Important

</div>

Escaping is always 100% mandatory when you mix data and code, no matter
how safe the data

</div>

**Escaping** converts *TEXT* to *CODE*. It is absolutely mandatory to do
it every time you mix *DATA/TEXT* with *CODE* (e.g. generating HTML or
python code to be evaluated inside a
<span class="title-ref">safe\_eval</span>), because *CODE* always
requires *TEXT* to be encoded. It is critical for security, but it's
also a question of correctness. Even when there is no security risk
(because the text is 100% guarantee to be safe or trusted), it is still
required (e.g. to avoid breaking the layout in generated HTML).

Escaping will never break any feature, as long as the developer
identifies which variable contains *TEXT* and which contains *CODE*.

``` python
>>> from odoo.tools import html_escape, html_sanitize
>>> data = "<R&D>" # `data` is some TEXT coming from somewhere

# Escaping turns it into CODE, good!
>>> code = html_escape(data)
>>> code
'&lt;R&amp;D&gt;'

# Now you can mix it with other code...
>>> self.message_post(body="<strong>%s</strong>" % code)
```

**Sanitizing** converts *CODE* to *SAFER CODE* (but not necessary *safe*
code). It does not work on *TEXT*. Sanitizing is only necessary when
*CODE* is untrusted, because it comes in full or in part from some
user-provided data. If the user-provided data is in the form of *TEXT*
(e.g. the content from a form filled by a user), and if that data was
correctly escaped before putting it in *CODE*, then sanitizing is
useless (but can still be done). If however, the user-provided data was
**not escaped**, then sanitizing will **not** work as expected.

``` python
# Sanitizing without escaping is BROKEN: data is corrupted!
>>> html_sanitize(data)
''

# Sanitizing *after* escaping is OK!
>>> html_sanitize(code)
'<p>&lt;R&amp;D&gt;</p>'
```

Sanitizing can break features, depending on whether the *CODE* is
expected to contain patterns that are not safe. That's why
<span class="title-ref">fields.Html</span> and
<span class="title-ref">tools.html\_sanitize()</span> have options to
fine-tune the level of sanitization for styles, etc. Those options have
to be carefully considered depending on where the data comes from, and
the desired features. The sanitization safety is balanced against
sanitization breakages: the safer the sanitisation the more likely it is
to break things.

``` python
>>code = "<p class='text-warning'>Important Information</p>"
# this will remove the style, which may break features
# but is necessary if the source is untrusted
>> html_sanitize(code, strip_classes=True)
'<p>Important Information</p>'
```

### Evaluating content

Some may want to `eval` to parse user provided content. Using `eval`
should be avoided at all cost. A safer, sandboxed, method
`~odoo.tools.safe_eval` can be used instead but still gives tremendous
capabilities to the user running it and must be reserved for trusted
privileged users only as it breaks the barrier between code and data.

``` python
# very bad
domain = eval(self.filter_domain)
return self.search(domain)

# better but still not recommended
from odoo.tools import safe_eval
domain = safe_eval(self.filter_domain)
return self.search(domain)

# good
from ast import literal_eval
domain = literal_eval(self.filter_domain)
return self.search(domain)
```

Parsing content does not need `eval`

| Language   | Data type          | Suitable parser                   |
| ---------- | ------------------ | --------------------------------- |
| Python     | int, float, etc.   | int(), float()                    |
| Javascript | int, float, etc.   | parseInt(), parseFloat()          |
| Python     | dict               | json.loads(), ast.literal\_eval() |
| Javascript | object, list, etc. | JSON.parse()                      |

### Accessing object attributes

If the values of a record needs to be retrieved or modified dynamically,
one may want to use the `getattr` and `setattr` methods.

``` python
# unsafe retrieval of a field value
def _get_state_value(self, res_id, state_field):
    record = self.sudo().browse(res_id)
    return getattr(record, state_field, False)
```

This code is however not safe as it allows to access any property of the
record, including private attributes or methods.

The `__getitem__` of a recordset has been defined and accessing a
dynamic field value can be easily achieved safely:

``` python
# better retrieval of a field value
def _get_state_value(self, res_id, state_field):
    record = self.sudo().browse(res_id)
    return record[state_field]
```

The above method is obviously still too optimistic and additional
verifications on the record id and field value must be done.


---
## File: ./content/developer/reference/javascript.md

  - nosearch

# Javascript Modules

<div class="toctree" data-titlesonly="">

javascript/javascript\_cheatsheet javascript/javascript\_reference
javascript/mobile javascript/qweb

</div>


---
## File: ./content/developer/reference/external_api.md

# External API

Odoo is usually extended internally via modules, but many of its
features and all of its data are also available from the outside for
external analysis or integration with various tools. Part of the
`reference/orm/model` API is easily available over
[XML-RPC](https://en.wikipedia.org/wiki/XML-RPC) and accessible from a
variety of languages.

## Connection

### Configuration

If you already have an Odoo server installed, you can just use its
parameters.

<div class="important">

<div class="title">

Important

</div>

For Odoo Online instances (\<domain\>.odoo.com), users are created
without a *local* password (as a person you are logged in via the Odoo
Online authentication system, not by the instance itself). To use
XML-RPC on Odoo Online instances, you will need to set a password on the
user account you want to use:

  - Log in your instance with an administrator account.
  - Go to `Settings --> Users & Companies --> Users`.
  - Click on the user you want to use for XML-RPC access.
  - Click on `Action` and select `Change Password`.
  - Set a `New Password` value then click `Change Password`.

The *server url* is the instance's domain (e.g.
*https://mycompany.odoo.com*), the *database name* is the name of the
instance (e.g. *mycompany*). The *username* is the configured user's
login as shown by the *Change Password* screen.

</div>

<div class="tabs">

<div class="code-tab">

python

url = \<insert server URL\> db = \<insert database name\> username =
'admin' password = \<insert password for your admin user (default:
admin)\>

</div>

<div class="code-tab">

ruby

url = \<insert server URL\> db = \<insert database name\> username =
"admin" password = \<insert password for your admin user (default:
admin)\>

</div>

<div class="code-tab">

php

$url = \<insert server URL\>; $db = \<insert database name\>; $username
= "admin"; $password = \<insert password for your admin user (default:
admin)\>;

</div>

<div class="code-tab">

java

  - final String url = \<insert server URL\>,  
    db = \<insert database name\>, username = "admin", password =
    \<insert password for your admin user (default: admin)\>;

</div>

</div>

#### API Keys

<div class="versionadded">

14.0

</div>

Odoo has support for **api keys** and (depending on modules or settings)
may **require** these keys to perform webservice operations.

The way to use API Keys in your scripts is to simply replace your
**password** by the key. The login remains in-use. You should store the
API Key as carefully as the password as they essentially provide the
same access to your user account (although they can not be used to
log-in via the interface).

In order to add a key to your account, simply go to your `Preferences`
(or `My Profile`):

![image](external_api/preferences.png)

then open the `Account Security` tab, and click `New API Key`:

![image](external_api/account-security.png)

Input a description for the key, **this description should be as clear
and complete as possible**: it is the only way you will have to identify
your keys later and know whether you should remove them or keep them
around.

Click `Generate Key`, then copy the key provided. **Store this key
carefully**: it is equivalent to your password, and just like your
password the system will not be able to retrieve or show the key again
later on. If you lose this key, you will have to create a new one (and
probably delete the one you lost).

Once you have keys configured on your account, they will appear above
the `New API Key` button, and you will be able to delete them:

![image](external_api/delete-key.png)

**A deleted API key can not be undeleted or re-set**. You will have to
generate a new key and update all the places where you used the old one.

#### Test database

To make exploration simpler, you can also ask <https://demo.odoo.com>
for a test database:

<div class="tabs">

<div class="code-tab">

python

import xmlrpc.client info =
xmlrpc.client.ServerProxy('<https://demo.odoo.com/start>').start() url,
db, username, password = info\['host'\], info\['database'\],
info\['user'\], info\['password'\]

</div>

<div class="code-tab">

ruby

require "xmlrpc/client" info =
XMLRPC::Client.new2('<https://demo.odoo.com/start>').call('start') url,
db, username, password = info\['host'\], info\['database'\],
info\['user'\], info\['password'\]

</div>

<div class="group-tab">

PHP

``` php
require_once('ripcord.php');
$info = ripcord::client('https://demo.odoo.com/start')->start();
list($url, $db, $username, $password) = array($info['host'], $info['database'], $info['user'], $info['password']);
```

<div class="note">

<div class="title">

Note

</div>

These examples use the [Ripcord](https://code.google.com/p/ripcord/)
library, which provides a simple XML-RPC API. Ripcord requires that
[XML-RPC support be
enabled](https://php.net/manual/en/xmlrpc.installation.php) in your PHP
installation.

Since calls are performed over
[HTTPS](https://en.wikipedia.org/wiki/HTTP_Secure), it also requires
that the [OpenSSL
extension](https://php.net/manual/en/openssl.installation.php) be
enabled.

</div>

</div>

<div class="group-tab">

Java

``` java
final XmlRpcClient client = new XmlRpcClient();

final XmlRpcClientConfigImpl start_config = new XmlRpcClientConfigImpl();
start_config.setServerURL(new URL("https://demo.odoo.com/start"));
final Map<String, String> info = (Map<String, String>)client.execute(
    start_config, "start", emptyList());

final String url = info.get("host"),
              db = info.get("database"),
        username = info.get("user"),
        password = info.get("password");
```

<div class="note">

<div class="title">

Note

</div>

These examples use the [Apache XML-RPC
library](https://ws.apache.org/xmlrpc/).

The examples do not include imports as these imports couldn't be pasted
in the code.

</div>

</div>

</div>

### Logging in

Odoo requires users of the API to be authenticated before they can query
most data.

The `xmlrpc/2/common` endpoint provides meta-calls which don't require
authentication, such as the authentication itself or fetching version
information. To verify if the connection information is correct before
trying to authenticate, the simplest call is to ask for the server's
version. The authentication itself is done through the `authenticate`
function and returns a user identifier (`uid`) used in authenticated
calls instead of the login.

<div class="tabs">

<div class="code-tab">

python

common = xmlrpc.client.ServerProxy('{}/xmlrpc/2/common'.format(url))
common.version()

</div>

<div class="code-tab">

ruby

common = XMLRPC::Client.new2("\#{url}/xmlrpc/2/common")
common.call('version')

</div>

<div class="code-tab">

php

$common = ripcord::client("$url/xmlrpc/2/common"); $common-\>version();

</div>

<div class="code-tab">

java

final XmlRpcClientConfigImpl common\_config = new
XmlRpcClientConfigImpl(); common\_config.setServerURL(new
URL(String.format("%s/xmlrpc/2/common", url)));
client.execute(common\_config, "version", emptyList());

</div>

</div>

Result:

``` json
{
    "server_version": "13.0",
    "server_version_info": [13, 0, 0, "final", 0],
    "server_serie": "13.0",
    "protocol_version": 1,
}
```

<div class="tabs">

<div class="code-tab">

python

uid = common.authenticate(db, username, password, {})

</div>

<div class="code-tab">

ruby

uid = common.call('authenticate', db, username, password, {})

</div>

<div class="code-tab">

php

$uid = $common-\>authenticate($db, $username, $password, array());

</div>

<div class="code-tab">

java

int uid = (int)client.execute(common\_config, "authenticate", asList(db,
username, password, emptyMap()));

</div>

</div>

## Calling methods

The second endpoint is `xmlrpc/2/object`. It is used to call methods of
odoo models via the `execute_kw` RPC function.

Each call to `execute_kw` takes the following parameters:

  - the database to use, a string
  - the user id (retrieved through `authenticate`), an integer
  - the user's password, a string
  - the model name, a string
  - the method name, a string
  - an array/list of parameters passed by position
  - a mapping/dict of parameters to pass by keyword (optional)

<div class="example">

For instance, to see if we can read the `res.partner` model, we can call
`check_access_rights` with `operation` passed by position and
`raise_exception` passed by keyword (in order to get a true/false result
rather than true/error):

<div class="tabs">

<div class="code-tab">

python

models = xmlrpc.client.ServerProxy('{}/xmlrpc/2/object'.format(url))
models.execute\_kw(db, uid, password, 'res.partner',
'check\_access\_rights', \['read'\], {'raise\_exception': False})

</div>

<div class="code-tab">

ruby

models = XMLRPC::Client.new2("\#{url}/xmlrpc/2/object").proxy
models.execute\_kw(db, uid, password, 'res.partner',
'check\_access\_rights', \['read'\], {raise\_exception: false})

</div>

<div class="code-tab">

php

$models = ripcord::client("$url/xmlrpc/2/object");
$models-\>execute\_kw($db, $uid, $password, 'res.partner',
'check\_access\_rights', array('read'), array('raise\_exception' =\>
false));

</div>

<div class="code-tab">

java

  - final XmlRpcClient models = new XmlRpcClient() {{
    
      - setConfig(new XmlRpcClientConfigImpl() {{  
        setServerURL(new URL(String.format("%s/xmlrpc/2/object", url)));
    
    }});

}}; models.execute("execute\_kw", asList( db, uid, password,
"res.partner", "check\_access\_rights", asList("read"), new HashMap() {{
put("raise\_exception", false); }} ));

</div>

</div>

Result:

``` json
true
```

</div>

### List records

Records can be listed and filtered via `~odoo.models.Model.search`.

`~odoo.models.Model.search` takes a mandatory `domain
<reference/orm/domains>` filter (possibly empty), and returns the
database identifiers of all records matching the filter.

<div class="example">

To list customer companies, for instance:

<div class="tabs">

<div class="code-tab">

python

models.execute\_kw(db, uid, password, 'res.partner', 'search',
\[\[\['is\_company', '=', True\]\]\])

</div>

<div class="code-tab">

ruby

models.execute\_kw(db, uid, password, 'res.partner', 'search',
\[\[\['is\_company', '=', true\]\]\])

</div>

<div class="code-tab">

php

$models-\>execute\_kw($db, $uid, $password, 'res.partner', 'search',
array(array(array('is\_company', '=', true))));

</div>

<div class="code-tab">

java

  - asList((Object\[\])models.execute("execute\_kw", asList(  
    db, uid, password, "res.partner", "search", asList(asList(
    asList("is\_company", "=", true)))

)));

</div>

</div>

Result:

``` json
[7, 18, 12, 14, 17, 19, 8, 31, 26, 16, 13, 20, 30, 22, 29, 15, 23, 28, 74]
```

</div>

#### Pagination

By default a search will return the ids of all records matching the
condition, which may be a huge number. `offset` and `limit` parameters
are available to only retrieve a subset of all matched records.

<div class="example">

<div class="tabs">

<div class="code-tab">

python

models.execute\_kw(db, uid, password, 'res.partner', 'search',
\[\[\['is\_company', '=', True\]\]\], {'offset': 10, 'limit': 5})

</div>

<div class="code-tab">

ruby

models.execute\_kw(db, uid, password, 'res.partner', 'search',
\[\[\['is\_company', '=', true\]\]\], {offset: 10, limit: 5})

</div>

<div class="code-tab">

php

$models-\>execute\_kw($db, $uid, $password, 'res.partner', 'search',
array(array(array('is\_company', '=', true))), array('offset'=\>10,
'limit'=\>5));

</div>

<div class="code-tab">

java

  - asList((Object\[\])models.execute("execute\_kw", asList(  
    db, uid, password, "res.partner", "search", asList(asList(
    asList("is\_company", "=", true))), new HashMap() {{ put("offset",
    10); put("limit", 5); }}

)));

</div>

</div>

Result:

``` json
[13, 20, 30, 22, 29]
```

</div>

### Count records

Rather than retrieve a possibly gigantic list of records and count them,
`~odoo.models.Model.search_count` can be used to retrieve only the
number of records matching the query. It takes the same `domain
<reference/orm/domains>` filter as `~odoo.models.Model.search` and no
other parameter.

<div class="example">

<div class="tabs">

<div class="code-tab">

python

models.execute\_kw(db, uid, password, 'res.partner', 'search\_count',
\[\[\['is\_company', '=', True\]\]\])

</div>

<div class="code-tab">

ruby

models.execute\_kw(db, uid, password, 'res.partner', 'search\_count',
\[\[\['is\_company', '=', true\]\]\])

</div>

<div class="code-tab">

php

$models-\>execute\_kw($db, $uid, $password, 'res.partner',
'search\_count', array(array(array('is\_company', '=', true))));

</div>

<div class="code-tab">

java

  - (Integer)models.execute("execute\_kw", asList(  
    db, uid, password, "res.partner", "search\_count", asList(asList(
    asList("is\_company", "=", true)))

));

</div>

</div>

Result:

``` json
19
```

</div>

<div class="note">

<div class="title">

Note

</div>

Calling `search` then `search_count` (or the other way around) may not
yield coherent results if other users are using the server: stored data
could have changed between the calls.

</div>

### Read records

Record data are accessible via the `~odoo.models.Model.read` method,
which takes a list of ids (as returned by `~odoo.models.Model.search`),
and optionally a list of fields to fetch. By default, it fetches all the
fields the current user can read, which tends to be a huge amount.

<div class="example">

<div class="tabs">

<div class="code-tab">

python

ids = models.execute\_kw(db, uid, password, 'res.partner', 'search',
\[\[\['is\_company', '=', True\]\]\], {'limit': 1}) \[record\] =
models.execute\_kw(db, uid, password, 'res.partner', 'read', \[ids\]) \#
count the number of fields fetched by default len(record)

</div>

<div class="code-tab">

ruby

ids = models.execute\_kw(db, uid, password, 'res.partner', 'search',
\[\[\['is\_company', '=', true\]\]\], {limit: 1}) record =
models.execute\_kw(db, uid, password, 'res.partner', 'read',
\[ids\]).first \# count the number of fields fetched by default
record.length

</div>

<div class="code-tab">

php

$ids = $models-\>execute\_kw($db, $uid, $password, 'res.partner',
'search', array(array(array('is\_company', '=', true))),
array('limit'=\>1)); $records = $models-\>execute\_kw($db, $uid,
$password, 'res.partner', 'read', array($ids)); // count the number of
fields fetched by default count($records\[0\]);

</div>

<div class="code-tab">

java

  - final List ids = asList((Object\[\])models.execute(
    
      - "execute\_kw", asList(  
        db, uid, password, "res.partner", "search", asList(asList(
        asList("is\_company", "=", true))), new HashMap() {{
        put("limit", 1); }})));

  - final Map record = (Map)((Object\[\])models.execute(
    
      - "execute\_kw", asList(  
        db, uid, password, "res.partner", "read", asList(ids)
    
    )

))\[0\]; // count the number of fields fetched by default record.size();

</div>

</div>

Result:

``` json
121
```

Conversely, picking only three fields deemed interesting.

<div class="tabs">

<div class="code-tab">

python

models.execute\_kw(db, uid, password, 'res.partner', 'read', \[ids\],
{'fields': \['name', 'country\_id', 'comment'\]})

</div>

<div class="code-tab">

ruby

models.execute\_kw(db, uid, password, 'res.partner', 'read', \[ids\],
{fields: %w(name country\_id comment)})

</div>

<div class="code-tab">

php

$models-\>execute\_kw($db, $uid, $password, 'res.partner', 'read',
array($ids), array('fields'=\>array('name', 'country\_id', 'comment')));

</div>

<div class="code-tab">

java

  - asList((Object\[\])models.execute("execute\_kw", asList(  
    db, uid, password, "res.partner", "read", asList(ids), new HashMap()
    {{ put("fields", asList("name", "country\_id", "comment")); }}

)));

</div>

</div>

Result:

``` json
[{"comment": false, "country_id": [21, "Belgium"], "id": 7, "name": "Agrolait"}]
```

</div>

<div class="note">

<div class="title">

Note

</div>

Even if the `id` field is not requested, it is always returned.

</div>

### List record fields

`~odoo.models.Model.fields_get` can be used to inspect a model's fields
and check which ones seem to be of interest.

Because it returns a large amount of meta-information (it is also used
by client programs) it should be filtered before printing, the most
interesting items for a human user are `string` (the field's label),
`help` (a help text if available) and `type` (to know which values to
expect, or to send when updating a record).

<div class="example">

<div class="tabs">

<div class="code-tab">

python

models.execute\_kw(db, uid, password, 'res.partner', 'fields\_get',
\[\], {'attributes': \['string', 'help', 'type'\]})

</div>

<div class="code-tab">

ruby

models.execute\_kw(db, uid, password, 'res.partner', 'fields\_get',
\[\], {attributes: %w(string help type)})

</div>

<div class="code-tab">

php

$models-\>execute\_kw($db, $uid, $password, 'res.partner',
'fields\_get', array(), array('attributes' =\> array('string', 'help',
'type')));

</div>

<div class="code-tab">

java

  - (Map\<String, Map\<String, Object\>\>)models.execute("execute\_kw",
    asList(  
    db, uid, password, "res.partner", "fields\_get", emptyList(), new
    HashMap() {{ put("attributes", asList("string", "help", "type")); }}

));

</div>

</div>

Result:

``` json
{
    "ean13": {
        "type": "char",
        "help": "BarCode",
        "string": "EAN13"
    },
    "property_account_position_id": {
        "type": "many2one",
        "help": "The fiscal position will determine taxes and accounts used for the partner.",
        "string": "Fiscal Position"
    },
    "signup_valid": {
        "type": "boolean",
        "help": "",
        "string": "Signup Token is Valid"
    },
    "date_localization": {
        "type": "date",
        "help": "",
        "string": "Geo Localization Date"
    },
    "ref_company_ids": {
        "type": "one2many",
        "help": "",
        "string": "Companies that refers to partner"
    },
    "sale_order_count": {
        "type": "integer",
        "help": "",
        "string": "# of Sales Order"
    },
    "purchase_order_count": {
        "type": "integer",
        "help": "",
        "string": "# of Purchase Order"
    },
```

</div>

### Search and read

Because it is a very common task, Odoo provides a
`~odoo.models.Model.search_read` shortcut which, as its name suggests,
is equivalent to a `~odoo.models.Model.search` followed by a
`~odoo.models.Model.read`, but avoids having to perform two requests and
keep ids around.

Its arguments are similar to `~odoo.models.Model.search`'s, but it can
also take a list of `fields` (like `~odoo.models.Model.read`, if that
list is not provided it will fetch all fields of matched records).

<div class="example">

<div class="tabs">

<div class="code-tab">

python

models.execute\_kw(db, uid, password, 'res.partner', 'search\_read',
\[\[\['is\_company', '=', True\]\]\], {'fields': \['name',
'country\_id', 'comment'\], 'limit': 5})

</div>

<div class="code-tab">

ruby

models.execute\_kw(db, uid, password, 'res.partner', 'search\_read',
\[\[\['is\_company', '=', true\]\]\], {fields: %w(name country\_id
comment), limit: 5})

</div>

<div class="code-tab">

php

$models-\>execute\_kw($db, $uid, $password, 'res.partner',
'search\_read', array(array(array('is\_company', '=', true))),
array('fields'=\>array('name', 'country\_id', 'comment'), 'limit'=\>5));

</div>

<div class="code-tab">

java

  - asList((Object\[\])models.execute("execute\_kw", asList(  
    db, uid, password, "res.partner", "search\_read", asList(asList(
    asList("is\_company", "=", true))), new HashMap() {{ put("fields",
    asList("name", "country\_id", "comment")); put("limit", 5); }}

)));

</div>

</div>

Result:

``` json
[
    {
        "comment": false,
        "country_id": [ 21, "Belgium" ],
        "id": 7,
        "name": "Agrolait"
    },
    {
        "comment": false,
        "country_id": [ 76, "France" ],
        "id": 18,
        "name": "Axelor"
    },
    {
        "comment": false,
        "country_id": [ 233, "United Kingdom" ],
        "id": 12,
        "name": "Bank Wealthy and sons"
    },
    {
        "comment": false,
        "country_id": [ 105, "India" ],
        "id": 14,
        "name": "Best Designers"
    },
    {
        "comment": false,
        "country_id": [ 76, "France" ],
        "id": 17,
        "name": "Camptocamp"
    }
]
```

</div>

### Create records

Records of a model are created using `~odoo.models.Model.create`. The
method creates a single record and returns its database identifier.

`~odoo.models.Model.create` takes a mapping of fields to values, used to
initialize the record. For any field which has a default value and is
not set through the mapping argument, the default value will be used.

<div class="example">

<div class="tabs">

<div class="code-tab">

python

id = models.execute\_kw(db, uid, password, 'res.partner', 'create',
\[{'name': "New Partner"}\])

</div>

<div class="code-tab">

ruby

id = models.execute\_kw(db, uid, password, 'res.partner', 'create',
\[{name: "New Partner"}\])

</div>

<div class="code-tab">

php

$id = $models-\>execute\_kw($db, $uid, $password, 'res.partner',
'create', array(array('name'=\>"New Partner")));

</div>

<div class="code-tab">

java

  - final Integer id = (Integer)models.execute("execute\_kw", asList(  
    db, uid, password, "res.partner", "create", asList(new HashMap() {{
    put("name", "New Partner"); }})

));

</div>

</div>

Result:

``` json
78
```

</div>

<div class="warning">

<div class="title">

Warning

</div>

While most value types are what would expect (integer for
`~odoo.fields.Integer`, string for `~odoo.fields.Char` or
`~odoo.fields.Text`),

  - `~odoo.fields.Date`, `~odoo.fields.Datetime` and
    `~odoo.fields.Binary` fields use string values
  - `~odoo.fields.One2many` and `~odoo.fields.Many2many` use a special
    command protocol detailed in `the documentation to
    the write method <odoo.models.Model.write>`.

</div>

### Update records

Records can be updated using `~odoo.models.Model.write`. It takes a list
of records to update and a mapping of updated fields to values similar
to `~odoo.models.Model.create`.

Multiple records can be updated simultaneously, but they will all get
the same values for the fields being set. It is not possible to perform
"computed" updates (where the value being set depends on an existing
value of a record).

<div class="example">

<div class="tabs">

<div class="code-tab">

python

models.execute\_kw(db, uid, password, 'res.partner', 'write', \[\[id\],
{'name': "Newer partner"}\]) \# get record name after having changed it
models.execute\_kw(db, uid, password, 'res.partner', 'name\_get',
\[\[id\]\])

</div>

<div class="code-tab">

ruby

models.execute\_kw(db, uid, password, 'res.partner', 'write', \[\[id\],
{name: "Newer partner"}\]) \# get record name after having changed it
models.execute\_kw(db, uid, password, 'res.partner', 'name\_get',
\[\[id\]\])

</div>

<div class="code-tab">

php

$models-\>execute\_kw($db, $uid, $password, 'res.partner', 'write',
array(array($id), array('name'=\>"Newer partner"))); // get record name
after having changed it $models-\>execute\_kw($db, $uid, $password,
'res.partner', 'name\_get', array(array($id)));

</div>

<div class="code-tab">

java

  - models.execute("execute\_kw", asList(  
    db, uid, password, "res.partner", "write", asList( asList(id), new
    HashMap() {{ put("name", "Newer Partner"); }} )

)); // get record name after having changed it
asList((Object\[\])models.execute("execute\_kw", asList( db, uid,
password, "res.partner", "name\_get", asList(asList(id)) )));

</div>

</div>

Result:

``` json
[[78, "Newer partner"]]
```

</div>

### Delete records

Records can be deleted in bulk by providing their ids to
`~odoo.models.Model.unlink`.

<div class="example">

<div class="tabs">

<div class="code-tab">

python

models.execute\_kw(db, uid, password, 'res.partner', 'unlink',
\[\[id\]\]) \# check if the deleted record is still in the database
models.execute\_kw(db, uid, password, 'res.partner', 'search',
\[\[\['id', '=', id\]\]\])

</div>

<div class="code-tab">

ruby

models.execute\_kw(db, uid, password, 'res.partner', 'unlink',
\[\[id\]\]) \# check if the deleted record is still in the database
models.execute\_kw(db, uid, password, 'res.partner', 'search',
\[\[\['id', '=', id\]\]\])

</div>

<div class="code-tab">

php

$models-\>execute\_kw($db, $uid, $password, 'res.partner', 'unlink',
array(array($id))); // check if the deleted record is still in the
database $models-\>execute\_kw( $db, $uid, $password, 'res.partner',
'search', array(array(array('id', '=', $id))) );

</div>

<div class="code-tab">

java

  - models.execute("execute\_kw", asList(  
    db, uid, password, "res.partner", "unlink", asList(asList(id))));

// check if the deleted record is still in the database
asList((Object\[\])models.execute("execute\_kw", asList( db, uid,
password, "res.partner", "search", asList(asList(asList("id", "=", 78)))
)));

</div>

</div>

Result:

``` json
[]
```

</div>

### Inspection and introspection

While we previously used `~odoo.models.Model.fields_get` to query a
model and have been using an arbitrary model from the start, Odoo stores
most model metadata inside a few meta-models which allow both querying
the system and altering models and fields (with some limitations) on the
fly over XML-RPC.

#### `ir.model`

Provides information about Odoo models via its various fields.

  - `name`  
    a human-readable description of the model

  - `model`  
    the name of each model in the system

  - `state`  
    whether the model was generated in Python code (`base`) or by
    creating an `ir.model` record (`manual`)

  - `field_id`  
    list of the model's fields through a `~odoo.fields.One2many` to
    `reference/webservice/inspection/fields`

  - `view_ids`  
    `~odoo.fields.One2many` to the `reference/views` defined for the
    model

  - `access_ids`  
    `~odoo.fields.One2many` relation to the `reference/security/acl` set
    on the model

`ir.model` can be used to

  - Query the system for installed models (as a precondition to
    operations on the model or to explore the system's content).
  - Get information about a specific model (generally by listing the
    fields associated with it).
  - Create new models dynamically over RPC.

<div class="important">

<div class="title">

Important

</div>

\* Custom model names must start with `x_`. \* The `state` must be
provided and set to `manual`, otherwise the model will not be loaded. \*
It is not possible to add new *methods* to a custom model, only fields.

</div>

<div class="example">

A custom model will initially contain only the "built-in" fields
available on all models:

<div class="tabs">

<div class="code-tab">

python

  - models.execute\_kw(db, uid, password, 'ir.model', 'create', \[{  
    'name': "Custom Model", 'model': "x\_custom\_model", 'state':
    'manual',

}\]) models.execute\_kw(db, uid, password, 'x\_custom\_model',
'fields\_get', \[\], {'attributes': \['string', 'help', 'type'\]})

</div>

<div class="code-tab">

php

  - $models-\>execute\_kw($db, $uid, $password, 'ir.model', 'create',
    array(array(  
    'name' =\> "Custom Model", 'model' =\> 'x\_custom\_model', 'state'
    =\> 'manual'

))); $models-\>execute\_kw($db, $uid, $password, 'x\_custom\_model',
'fields\_get', array(), array('attributes' =\> array('string', 'help',
'type')));

</div>

<div class="code-tab">

ruby

  - models.execute\_kw(db, uid, password, 'ir.model', 'create', \[{  
    name: "Custom Model", model: 'x\_custom\_model', state: 'manual'

}\]) fields = models.execute\_kw(db, uid, password, 'x\_custom\_model',
'fields\_get', \[\], {attributes: %w(string help type)})

</div>

<div class="code-tab">

java

  - models.execute(
    
      - "execute\_kw", asList(  
        db, uid, password, "ir.model", "create", asList(new
        HashMap\<String, Object\>() {{ put("name", "Custom Model");
        put("model", "x\_custom\_model"); put("state", "manual"); }})

)); final Object fields = models.execute( "execute\_kw", asList( db,
uid, password, "x\_custom\_model", "fields\_get", emptyList(), new
HashMap\<String, Object\> () {{ put("attributes", asList( "string",
"help", "type")); }} ));

</div>

</div>

Result:

``` json
{
    "create_uid": {
        "type": "many2one",
        "string": "Created by"
    },
    "create_date": {
        "type": "datetime",
        "string": "Created on"
    },
    "__last_update": {
        "type": "datetime",
        "string": "Last Modified on"
    },
    "write_uid": {
        "type": "many2one",
        "string": "Last Updated by"
    },
    "write_date": {
        "type": "datetime",
        "string": "Last Updated on"
    },
    "display_name": {
        "type": "char",
        "string": "Display Name"
    },
    "id": {
        "type": "integer",
        "string": "Id"
    }
}
```

</div>

#### `ir.model.fields`

Provides information about the fields of Odoo models and allows adding
custom fields without using Python code.

  - `model_id`  
    `~odoo.fields.Many2one` to `reference/webservice/inspection/models`
    to which the field belongs

  - `name`  
    the field's technical name (used in `read` or `write`)

  - `field_description`  
    the field's user-readable label (e.g. `string` in `fields_get`)

  - `ttype`  
    the `type <reference/orm/fields>` of field to create

  - `state`  
    whether the field was created via Python code (`base`) or via
    `ir.model.fields` (`manual`)

  - `required`, `readonly`, `translate`  
    enables the corresponding flag on the field

  - `groups`  
    `field-level access control <reference/security/fields>`, a
    `~odoo.fields.Many2many` to `res.groups`

  - `selection`, `size`, `on_delete`, `relation`, `relation_field`,
    `domain`  
    type-specific properties and customizations, see `the fields
    documentation <reference/orm/fields>` for details

<div class="important">

<div class="title">

Important

</div>

\- Like custom models, only new fields created with `state="manual"` are
activated as actual fields on the model. - Computed fields can not be
added via `ir.model.fields`, some field meta-information (defaults,
onchange) can not be set either.

</div>

<div class="example">

<div class="tabs">

<div class="code-tab">

python

  - id = models.execute\_kw(db, uid, password, 'ir.model', 'create',
    \[{  
    'name': "Custom Model", 'model': "x\_custom", 'state': 'manual',

}\]) models.execute\_kw(db, uid, password, 'ir.model.fields', 'create',
\[{ 'model\_id': id, 'name': 'x\_name', 'ttype': 'char', 'state':
'manual', 'required': True, }\]) record\_id = models.execute\_kw(db,
uid, password, 'x\_custom', 'create', \[{'x\_name': "test record"}\])
models.execute\_kw(db, uid, password, 'x\_custom', 'read',
\[\[record\_id\]\])

</div>

<div class="code-tab">

php

  - $id = $models-\>execute\_kw($db, $uid, $password, 'ir.model',
    'create', array(array(  
    'name' =\> "Custom Model", 'model' =\> 'x\_custom', 'state' =\>
    'manual'

))); $models-\>execute\_kw($db, $uid, $password, 'ir.model.fields',
'create', array(array( 'model\_id' =\> $id, 'name' =\> 'x\_name',
'ttype' =\> 'char', 'state' =\> 'manual', 'required' =\> true )));
$record\_id = $models-\>execute\_kw($db, $uid, $password, 'x\_custom',
'create', array(array('x\_name' =\> "test record")));
$models-\>execute\_kw($db, $uid, $password, 'x\_custom', 'read',
array(array($record\_id)));

</div>

<div class="code-tab">

ruby

  - id = models.execute\_kw(db, uid, password, 'ir.model', 'create',
    \[{  
    name: "Custom Model", model: "x\_custom", state: 'manual'

}\]) models.execute\_kw(db, uid, password, 'ir.model.fields', 'create',
\[{ model\_id: id, name: "x\_name", ttype: "char", state: "manual",
required: true }\]) record\_id = models.execute\_kw(db, uid, password,
'x\_custom', 'create', \[{x\_name: "test record"}\])
models.execute\_kw(db, uid, password, 'x\_custom', 'read',
\[\[record\_id\]\])

</div>

<div class="code-tab">

java

  - final Integer id = (Integer)models.execute(
    
      - "execute\_kw", asList(  
        db, uid, password, "ir.model", "create", asList(new
        HashMap\<String, Object\>() {{ put("name", "Custom Model");
        put("model", "x\_custom"); put("state", "manual"); }})

)); models.execute( "execute\_kw", asList( db, uid, password,
"ir.model.fields", "create", asList(new HashMap\<String, Object\>() {{
put("model\_id", id); put("name", "x\_name"); put("ttype", "char");
put("state", "manual"); put("required", true); }}) )); final Integer
record\_id = (Integer)models.execute( "execute\_kw", asList( db, uid,
password, "x\_custom", "create", asList(new HashMap\<String, Object\>()
{{ put("x\_name", "test record"); }}) ));

  - client.execute(
    
      - "execute\_kw", asList(  
        db, uid, password, "x\_custom", "read",
        asList(asList(record\_id))

));

</div>

</div>

Result:

``` json
[
    {
        "create_uid": [1, "Administrator"],
        "x_name": "test record",
        "__last_update": "2014-11-12 16:32:13",
        "write_uid": [1, "Administrator"],
        "write_date": "2014-11-12 16:32:13",
        "create_date": "2014-11-12 16:32:13",
        "id": 1,
        "display_name": "test record"
    }
]
```

</div>


---
## File: ./content/developer/reference/javascript/javascript_cheatsheet.md

# Javascript Cheatsheet

There are many ways to solve a problem in JavaScript, and in Odoo.
However, the Odoo framework was designed to be extensible (this is a
pretty big constraint), and some common problems have a nice standard
solution. The standard solution has probably the advantage of being easy
to understand for an odoo developer, and will probably keep working when
Odoo is modified.

This document tries to explain the way one could solve some of these
issues. Note that this is not a reference. This is just a random
collection of recipes, or explanations on how to proceed in some cases.

First of all, remember that the first rule of customizing odoo with JS
is: *try to do it in python*. This may seem strange, but the python
framework is quite extensible, and many behaviours can be done simply
with a touch of xml or python. This has usually a lower cost of
maintenance than working with JS:

  - the JS framework tends to change more, so JS code needs to be more
    frequently updated
  - it is often more difficult to implement a customized behaviour if it
    needs to communicate with the server and properly integrate with the
    javascript framework. There are many small details taken care by the
    framework that customized code needs to replicate. For example,
    responsiveness, or updating the url, or displaying data without
    flickering.

<div class="note">

<div class="title">

Note

</div>

This document does not really explain any concepts. This is more a
cookbook. For more details, please consult the javascript reference page
(see `javascript_reference`)

</div>

## Creating a new field widget

This is probably a really common usecase: we want to display some
information in a form view in a really specific (maybe business
dependent) way. For example, assume that we want to change the text
color depending on some business condition.

This can be done in three steps: creating a new widget, registering it
in the field registry, then adding the widget to the field in the form
view

  -   - creating a new widget:  
        This can be done by extending a widget:
        
        ``` javascript
        var FieldChar = require('web.basic_fields').FieldChar;
        
        var CustomFieldChar = FieldChar.extend({
            _renderReadonly: function () {
                // implement some custom logic here
            },
        });
        ```

  -   - registering it in the field registry:  
        The web client needs to know the mapping between a widget name
        and its actual class. This is done by a registry:
        
        ``` javascript
        var fieldRegistry = require('web.field_registry');
        
        fieldRegistry.add('my-custom-field', CustomFieldChar);
        ```

  -   - adding the widget in the form view
        
        ``` xml
        <field name="somefield" widget="my-custom-field"/>
        ```
        
        Note that only the form, list and kanban views use this field
        widgets registry. These views are tightly integrated, because
        the list and kanban views can appear inside a form view).

## Modifying an existing field widget

Another use case is that we want to modify an existing field widget. For
example, the voip addon in odoo need to modify the FieldPhone widget to
add the possibility to easily call the given number on voip. This is
done by *including* the FieldPhone widget, so there is no need to change
any existing form view.

Field Widgets (instances of (subclass of) AbstractField) are like every
other widgets, so they can be monkey patched. This looks like this:

``` javascript
var basic_fields = require('web.basic_fields');
var Phone = basic_fields.FieldPhone;

Phone.include({
    events: _.extend({}, Phone.prototype.events, {
        'click': '_onClick',
    }),

    _onClick: function (e) {
        if (this.mode === 'readonly') {
            e.preventDefault();
            var phoneNumber = this.value;
            // call the number on voip...
        }
    },
});
```

Note that there is no need to add the widget to the registry, since it
is already registered.

## Modifying a main widget from the interface

Another common usecase is the need to customize some elements from the
user interface. For example, adding a message in the home menu. The
usual process in this case is again to *include* the widget. This is the
only way to do it, since there are no registries for those widgets.

This is usually done with code looking like this:

``` javascript
var HomeMenu = require('web_enterprise.HomeMenu');

HomeMenu.include({
    render: function () {
        this._super();
        // do something else here...
    },
});
```

## Creating a new view (from scratch)

Creating a new view is a more advanced topic. This cheatsheet will only
highlight the steps that will probably need to be done (in no particular
order):

  - adding a new view type to the field `type` of `ir.ui.view`:
    
        class View(models.Model):
            _inherit = 'ir.ui.view'
        
            type = fields.Selection(selection_add=[('map', "Map")])

  - adding the new view type to the field `view_mode` of
    `ir.actions.act_window.view`:
    
        class ActWindowView(models.Model):
            _inherit = 'ir.actions.act_window.view'
        
            view_mode = fields.Selection(selection_add=[('map', "Map")])

  -   - creating the four main pieces which makes a view (in
        JavaScript):  
        we need a view (a subclass of `AbstractView`, this is the
        factory), a renderer (from `AbstractRenderer`), a controller
        (from `AbstractController`) and a model (from `AbstractModel`).
        I suggest starting by simply extending the superclasses:
        
        ``` javascript
        var AbstractController = require('web.AbstractController');
        var AbstractModel = require('web.AbstractModel');
        var AbstractRenderer = require('web.AbstractRenderer');
        var AbstractView = require('web.AbstractView');
        
        var MapController = AbstractController.extend({});
        var MapRenderer = AbstractRenderer.extend({});
        var MapModel = AbstractModel.extend({});
        
        var MapView = AbstractView.extend({
            config: {
                Model: MapModel,
                Controller: MapController,
                Renderer: MapRenderer,
            },
        });
        ```

  -   - adding the view to the registry:  
        As usual, the mapping between a view type and the actual class
        needs to be updated:
        
        ``` javascript
        var viewRegistry = require('web.view_registry');
        
        viewRegistry.add('map', MapView);
        ```

  -   - implementing the four main classes:  
        The `View` class needs to parse the `arch` field and setup the
        other three classes. The `Renderer` is in charge of representing
        the data in the user interface, the `Model` is supposed to talk
        to the server, to load data and process it. And the `Controller`
        is there to coordinate, to talk to the web client, ...

  -   - creating some views in the database:
        
        ``` xml
        <record id="customer_map_view" model="ir.ui.view">
            <field name="name">customer.map.view</field>
            <field name="model">res.partner</field>
            <field name="arch" type="xml">
                <map latitude="partner_latitude" longitude="partner_longitude">
                    <field name="name"/>
                </map>
            </field>
        </record>
        ```

## Customizing an existing view

Assume we need to create a custom version of a generic view. For
example, a kanban view with some extra *ribbon-like* widget on top (to
display some specific custom information). In that case, this can be
done with 3 steps: extend the kanban view (which also probably mean
extending controllers/renderers and/or models), then registering the
view in the view registry, and finally, using the view in the kanban
arch (a specific example is the helpdesk dashboard).

  -   - extending a view:  
        Here is what it could look like:
        
        ``` javascript
        var HelpdeskDashboardRenderer = KanbanRenderer.extend({
            ...
        });
        
        var HelpdeskDashboardModel = KanbanModel.extend({
            ...
        });
        
        var HelpdeskDashboardController = KanbanController.extend({
            ...
        });
        
        var HelpdeskDashboardView = KanbanView.extend({
            config: _.extend({}, KanbanView.prototype.config, {
                Model: HelpdeskDashboardModel,
                Renderer: HelpdeskDashboardRenderer,
                Controller: HelpdeskDashboardController,
            }),
        });
        ```

  -   - adding it to the view registry:  
        as usual, we need to inform the web client of the mapping
        between the name of the views and the actual class.
        
        ``` javascript
        var viewRegistry = require('web.view_registry');
        viewRegistry.add('helpdesk_dashboard', HelpdeskDashboardView);
        ```

  -   - using it in an actual view:  
        we now need to inform the web client that a specific
        `ir.ui.view` needs to use our new class. Note that this is a web
        client specific concern. From the point of view of the server,
        we still have a kanban view. The proper way to do this is by
        using a special attribute `js_class` (which will be renamed
        someday into `widget`, because this is really not a good name)
        on the root node of the arch:
        
        ``` xml
        <record id="helpdesk_team_view_kanban" model="ir.ui.view" >
            ...
            <field name="arch" type="xml">
                <kanban js_class="helpdesk_dashboard">
                    ...
                </kanban>
            </field>
        </record>
        ```

<div class="note">

<div class="title">

Note

</div>

Note: you can change the way the view interprets the arch structure.
However, from the server point of view, this is still a view of the same
base type, subjected to the same rules (rng validation, for example).
So, your views still need to have a valid arch field.

</div>

## Promises and asynchronous code

For a very good and complete introduction to promises, please read this
excellent article
<https://github.com/getify/You-Dont-Know-JS/blob/1st-ed/async%20%26%20performance/ch3.md>

### Creating new Promises

  -   - turn a constant into a promise  
        There are 2 static functions on Promise that create a resolved
        or rejected promise based on a constant:
        
        ``` javascript
        var p = Promise.resolve({blabla: '1'}); // creates a resolved promise
        p.then(function (result) {
            console.log(result); // --> {blabla: '1'};
        });
        
        
        var p2 = Promise.reject({error: 'error message'}); // creates a rejected promise
        p2.catch(function (reason) {
            console.log(reason); // --> {error: 'error message');
        });
        ```
        
        <div class="note">
        
        <div class="title">
        
        Note
        
        </div>
        
        Note that even if the promises are created already resolved or
        rejected, the <span class="title-ref">then</span> or
        <span class="title-ref">catch</span> handlers will still be
        called asynchronously.
        
        </div>

  -   - based on an already asynchronous code  
        Suppose that in a function you must do a rpc, and when it is
        completed set the result on this. The
        <span class="title-ref">this.\_rpc</span> is a function that
        returns a <span class="title-ref">Promise</span>.
        
        ``` javascript
        function callRpc() {
            var self = this;
            return this._rpc(...).then(function (result) {
                self.myValueFromRpc = result;
            });
        }
        ```

  -   - for callback based function  
        Suppose that you were using a function
        <span class="title-ref">this.close</span> that takes as
        parameter a callback that is called when the closing is
        finished. Now suppose that you are doing that in a method that
        must send a promise that is resolved when the closing is
        finished.
        
        ``` javascript
        function waitForClose() {
            var self = this;
            return new Promise (function(resolve, reject) {
                self.close(resolve);
            });
        }
        ```
        
          - line 2: we save the <span class="title-ref">this</span> into
            a variable so that in an inner function, we can access the
            scope of our component
        
          -   - line 3: we create and return a new promise. The
                constructor of a promise takes a function as parameter.
                This function itself has 2 parameters that we called
                here <span class="title-ref">resolve</span> and
                <span class="title-ref">reject</span>
                
                  - <span class="title-ref">resolve</span> is a function
                    that, when called, puts the promise in the resolved
                    state.
                  - <span class="title-ref">reject</span> is a function
                    that, when called, puts the promise in the rejected
                    state. We do not use reject here and it can be
                    omitted.
        
          - line 4: we are calling the function close on our object. It
            takes a function as parameter (the callback) and it happens
            that resolve is already a function, so we can pass it
            directly. To be clearer, we could have written:
        
        <!-- end list -->
        
        ``` javascript
        return new Promise (function (resolve) {
            self.close(function () {
                resolve();
            });
        });
        ```

  -   - creating a promise generator (calling one promise after the
        other *in sequence* and waiting for the last one)  
        Suppose that you need to loop over an array, do an operation *in
        sequence* and resolve a promise when the last operation is done.
        
        ``` javascript
        function doStuffOnArray(arr) {
            var done = Promise.resolve();
            arr.forEach(function (item) {
                done = done.then(function () {
                    return item.doSomethingAsynchronous();
                });
            });
            return done;
        }
        ```
        
        This way, the promise you return is effectively the last
        promise.

  -   - creating a promise, then resolving it outside the scope of its
        definition (anti-pattern)
        
        <div class="note">
        
        <div class="title">
        
        Note
        
        </div>
        
        we do not recommend using this, but sometimes it is useful.
        Think carefully for alternatives first...
        
        </div>
        
        ``` javascript
        ...
        var resolver, rejecter;
        var prom = new Promise(function (resolve, reject){
            resolver = resolve;
            rejecter = reject;
        });
        ...
        
        resolver("done"); // will resolve the promise prom with the result "done"
        rejecter("error"); // will reject the promise prom with the reason "error"
        ```

### Waiting for Promises

  -   - waiting for a number of Promises  
        if you have multiple promises that all need to be waited, you
        can convert them into a single promise that will be resolved
        when all the promises are resolved using
        Promise.all(arrayOfPromises).
        
        ``` javascript
        var prom1 = doSomethingThatReturnsAPromise();
        var prom2 = Promise.resolve(true);
        var constant = true;
        
        var all = Promise.all([prom1, prom2, constant]); // all is a promise
        // results is an array, the individual results correspond to the index of their
        // promise as called in Promise.all()
        all.then(function (results) {
            var prom1Result = results[0];
            var prom2Result = results[1];
            var constantResult = results[2];
        });
        return all;
        ```

  -   - waiting for a part of a promise chain, but not another part  
        If you have an asynchronous process that you want to wait to do
        something, but you also want to return to the caller before that
        something is done.
        
        ``` javascript
        function returnAsSoonAsAsyncProcessIsDone() {
            var prom = AsyncProcess();
            prom.then(function (resultOfAsyncProcess) {
                    return doSomething();
            });
            /* returns prom which will only wait for AsyncProcess(),
               and when it will be resolved, the result will be the one of AsyncProcess */
            return prom;
        }
        ```

### Error handling

  -   - in general in promises  
        The general idea is that a promise should not be rejected for
        control flow, but should only be rejected for errors. When that
        is the case, you would have multiple resolutions of your promise
        with, for instance status codes that you would have to check in
        the <span class="title-ref">then</span> handlers and a single
        <span class="title-ref">catch</span> handler at the end of the
        promise chain.
        
        ``` javascript
        function a() {
            x.y();  // <-- this is an error: x is undefined
            return Promise.resolve(1);
        }
        function b() {
           return Promise.reject(2);
        }
        
        a().catch(console.log);           // will log the error in a
        a().then(b).catch(console.log);   // will log the error in a, the then is not executed
        b().catch(console.log);           // will log the rejected reason of b (2)
        Promise.resolve(1)
               .then(b)                   // the then is executed, it executes b
               .then(...)                 // this then is not executed
               .catch(console.log);       // will log the rejected reason of b (2)
        ```

  -   - in Odoo specifically  
        In Odoo, it happens that we use promise rejection for control
        flow, like in mutexes and other concurrency primitives defined
        in module <span class="title-ref">web.concurrency</span> We also
        want to execute the catch for *business* reasons, but not when
        there is a coding error in the definition of the promise or of
        the handlers. For this, we have introduced the concept of
        <span class="title-ref">guardedCatch</span>. It is called like
        <span class="title-ref">catch</span> but not when the rejected
        reason is an error
        
        ``` javascript
        function blabla() {
            if (someCondition) {
                return Promise.reject("someCondition is truthy");
            }
            return Promise.resolve();
        }
        
        // ...
        
        var promise = blabla();
        promise.then(function (result) { console.log("everything went fine"); })
        // this will be called if blabla returns a rejected promise, but not if it has an error
        promise.guardedCatch(function (reason) { console.log(reason); });
        
        // ...
        
        var anotherPromise =
                blabla().then(function () { console.log("everything went fine"); })
                        // this will be called if blabla returns a rejected promise,
                        // but not if it has an error
                        .guardedCatch(console.log);
        ```
        
        ``` javascript
        var promiseWithError = Promise.resolve().then(function () {
            x.y();  // <-- this is an error: x is undefined
        });
        promiseWithError.guardedCatch(function (reason) {console.log(reason);}); // will not be called
        promiseWithError.catch(function (reason) {console.log(reason);}); // will be called
        ```

### Testing asynchronous code

  -   - using promises in tests  
        In the tests code, we support the latest version of Javascript,
        including primitives like <span class="title-ref">async</span>
        and <span class="title-ref">await</span>. This makes using and
        waiting for promises very easy. Most helper methods also return
        a promise (either by being marked
        <span class="title-ref">async</span> or by returning a promise
        directly.
        
        ``` javascript
        var testUtils = require('web.test_utils');
        QUnit.test("My test", async function (assert) {
            // making the function async has 2 advantages:
            // 1) it always returns a promise so you don't need to define `var done = assert.async()`
            // 2) it allows you to use the `await`
            assert.expect(1);
        
            var form = await testUtils.createView({ ... });
            await testUtils.form.clickEdit(form);
            await testUtils.form.click('jquery selector');
            assert.containsOnce('jquery selector');
            form.destroy();
        });
        
        QUnit.test("My test - no async - no done", function (assert) {
            // this function is not async, but it returns a promise.
            // QUnit will wait for for this promise to be resolved.
            assert.expect(1);
        
            return testUtils.createView({ ... }).then(function (form) {
                return testUtils.form.clickEdit(form).then(function () {
                    return testUtils.form.click('jquery selector').then(function () {
                        assert.containsOnce('jquery selector');
                        form.destroy();
                    });
                });
            });
        });
        
        
        QUnit.test("My test - no async", function (assert) {
            // this function is not async and does not return a promise.
            // we have to use the done function to signal QUnit that the test is async and will be finished inside an async callback
            assert.expect(1);
            var done = assert.async();
        
            testUtils.createView({ ... }).then(function (form) {
                testUtils.form.clickEdit(form).then(function () {
                    testUtils.form.click('jquery selector').then(function () {
                    assert.containsOnce('jquery selector');
                    form.destroy();
                    done();
                    });
                });
            });
        });
        ```
        
        as you can see, the nicer form is to use
        <span class="title-ref">async/await</span> as it is clearer and
        shorter to write.


---
## File: ./content/developer/reference/javascript/javascript_reference.md

<div class="default-domain">

js

</div>

# Javascript Reference

This document presents the Odoo Javascript framework. This framework is
not a large application in term of lines of code, but it is quite
generic, because it is basically a machine to turn a declarative
interface description into a live application, able to interact with
every model and records in the database. It is even possible to use the
web client to modify the interface of the web client.

## Overview

The Javascript framework is designed to work with three main use cases:

  - the *web client*: this is the private web application, where one can
    view and edit business data. This is a single page application (the
    page is never reloaded, only the new data is fetched from the server
    whenever it is needed)
  - the *website*: this is the public part of Odoo. It allows an
    unidentified user to browse some content, to shop or to perform many
    actions, as a client. This is a classical website: various routes
    with controllers and some javascript to make it work.
  - the *point of sale*: this is the interface for the point of sale. It
    is a specialized single page application.

Some javascript code is common to these three use cases, and is bundled
together (see below in the assets section). This document will focus
mostly on the web client design.

## Web client

### Single Page Application

In short, the *webClient*, instance of *WebClient* is the root component
of the whole user interface. Its responsibility is to orchestrate all
various subcomponents, and to provide services, such as rpcs, local
storage and more.

In runtime, the web client is a single page application. It does not
need to request a full page from the server each time the user perform
an action. Instead, it only requests what it needs, and then
replaces/updates the view. Also, it manages the url: it is kept in sync
with the web client state.

It means that while a user is working on Odoo, the web client class (and
the action manager) actually creates and destroys many sub components.
The state is highly dynamic, and each widget could be destroyed at any
time.

### Overview of web client JS code

Here, we give a very quick overview on the web client code, in the
*web/static/src/js* addon. Note that it is deliberately not exhaustive.
We only cover the most important files/folders.

  - *boot.js*: this is the file that defines the module system. It needs
    to be loaded first.
  - *core/*: this is a collection of lower level building blocks.
    Notably, it contains the class system, the widget system,
    concurrency utilities, and many other class/functions.
  - *chrome/*: in this folder, we have most large widgets which make up
    most of the user interface.
  - *chrome/abstract\_web\_client.js* and *chrome/web\_client.js*:
    together, these files define the WebClient widget, which is the root
    widget for the web client.
  - *chrome/action\_manager.js*: this is the code that will convert an
    action into a widget (for example a kanban or a form view)
  - *chrome/search\_X.js* all these files define the search view (it is
    not a view in the point of view of the web client, only from the
    server point of view)
  - *fields*: all main view field widgets are defined here
  - *views*: this is where the views are located

## Assets Management

Managing assets in Odoo is not as straightforward as it is in some other
apps. One of the reason is that we have a variety of situations where
some, but not all the assets are required. For example, the needs of the
web client, the point of sale, the website or even the mobile
application are different. Also, some assets may be large, but are
seldom needed. In that case, we sometimes want them to be loaded lazily.

The main idea is that we define a set of *bundles* in xml. A bundle is
here defined as a collection of files (javascript, css, scss). In Odoo,
the most important bundles are defined in the file
*addons/web/views/webclient\_templates.xml*. It looks like this:

``` xml
<template id="web.assets_common" name="Common Assets (used in backend interface and website)">
    <link rel="stylesheet" type="text/css" href="/web/static/lib/jquery.ui/jquery-ui.css"/>
    ...
    <script type="text/javascript" src="/web/static/src/js/boot.js"></script>
    ...
</template>
```

The files in a bundle can then be inserted into a template by using the
*t-call-assets* directive:

``` xml
<t t-call-assets="web.assets_common" t-js="false"/>
<t t-call-assets="web.assets_common" t-css="false"/>
```

Here is what happens when a template is rendered by the server with
these directives:

  - all the *scss* files described in the bundle are compiled into css
    files. A file named *file.scss* will be compiled in a file named
    *file.scss.css*.
  - if we are in *debug=assets* mode
      - the *t-call-assets* directive with the *t-js* attribute set to
        false will be replaced by a list of stylesheet tags pointing to
        the css files
      - the *t-call-assets* directive with the *t-css* attribute set to
        false will be replaced by a list of script tags pointing to the
        js files
  - if we are not in *debug=assets* mode
      - the css files will be concatenated and minified, then a
        stylesheet tag is generated
      - the js files are concatenated and minified, then a script tag is
        generated

Note that the assets files are cached, so in theory, a browser should
only load them once.

### Main bundles

When the Odoo server is started, it checks the timestamp of each file in
a bundle, and if necessary, will create/recreate the corresponding
bundles.

Here are some important bundles that most developers will need to know:

  - *web.assets\_common*: this bundle contains most assets which are
    common to the web client, the website, and also the point of sale.
    This is supposed to contain lower level building blocks for the odoo
    framework. Note that it contains the *boot.js* file, which defines
    the odoo module system.
  - *web.assets\_backend*: this bundle contains the code specific to the
    web client (notably the web client/action manager/views)
  - *web.assets\_frontend*: this bundle is about all that is specific to
    the public website: ecommerce, forum, blog, event management, ...

### Adding files in an asset bundle

The proper way to add a file located in *addons/web* to a bundle is
simple: it is just enough to add a *script* or a *stylesheet* tag to the
bundle in the file *webclient\_templates.xml*. But when we work in a
different addon, we need to add a file from that addon. In that case, it
should be done in three steps:

1.  add a *assets.xml* file in the *views/* folder
2.  add the string 'views/assets.xml' in the 'data' key in the manifest
    file
3.  create an inherited view of the desired bundle, and add the file(s)
    with an xpath expression. For example,

<!-- end list -->

``` xml
<template id="assets_backend" name="helpdesk assets" inherit_id="web.assets_backend">
    <xpath expr="//script[last()]" position="after">
        <link rel="stylesheet" type="text/scss" href="/helpdesk/static/src/scss/helpdesk.scss"/>
        <script type="text/javascript" src="/helpdesk/static/src/js/helpdesk_dashboard.js"></script>
    </xpath>
</template>
```

### What to do if a file is not loaded/updated

There are many different reasons why a file may not be properly loaded.
Here are a few things you can try to solve the issue:

  - once the server is started, it does not know if an asset file has
    been modified. So, you can simply restart the server to regenerate
    the assets.
  - check the console (in the dev tools, usually opened with F12) to
    make sure there are no obvious errors
  - try to add a console.log at the beginning of your file (before any
    module definition), so you can see if a file has been loaded or not
  - in the user interface, in debug mode (INSERT LINK HERE TO DEBUG
    MODE), there is an option to force the server to update its assets
    files.
  - use the *debug=assets* mode. This will actually bypass the asset
    bundles (note that it does not actually solve the issue. The server
    still uses outdated bundles)
  - finally, the most convenient way to do it, for a developer, is to
    start the server with the *--dev=all* option. This activates the
    file watcher options, which will automatically invalidate assets
    when necessary. Note that it does not work very well if the OS is
    Windows.
  - remember to refresh your page\!
  - or maybe to save your code file...

<div class="note">

<div class="title">

Note

</div>

Once an asset file has been recreated, you need to refresh the page, to
reload the proper files (if that does not work, the files may be
cached).

</div>

## Javascript Module System

Once we are able to load our javascript files into the browser, we need
to make sure they are loaded in the correct order. In order to do that,
Odoo has defined a small module system (located in the file
*addons/web/static/src/js/boot.js*, which needs to be loaded first).

The Odoo module system, inspired by AMD, works by defining the function
*define* on the global odoo object. We then define each javascript
module by calling that function. In the Odoo framework, a module is a
piece of code that will be executed as soon as possible. It has a name
and potentially some dependencies. When its dependencies are loaded, a
module will then be loaded as well. The value of the module is then the
return value of the function defining the module.

As an example, it may look like this:

``` javascript
// in file a.js
odoo.define('module.A', function (require) {
    "use strict";

    var A = ...;

    return A;
});

// in file b.js
odoo.define('module.B', function (require) {
    "use strict";

    var A = require('module.A');

    var B = ...; // something that involves A

    return B;
});
```

An alternative way to define a module is to give explicitly a list of
dependencies in the second argument.

``` javascript
odoo.define('module.Something', ['module.A', 'module.B'], function (require) {
    "use strict";

    var A = require('module.A');
    var B = require('module.B');

    // some code
});
```

If some dependencies are missing/non ready, then the module will simply
not be loaded. There will be a warning in the console after a few
seconds.

Note that circular dependencies are not supported. It makes sense, but
it means that one needs to be careful.

### Defining a module

The *odoo.define* method is given three arguments:

  - *moduleName*: the name of the javascript module. It should be a
    unique string. The convention is to have the name of the odoo addon
    followed by a specific description. For example, 'web.Widget'
    describes a module defined in the *web* addon, which exports a
    *Widget* class (because the first letter is capitalized)
    
    If the name is not unique, an exception will be thrown and displayed
    in the console.

  - *dependencies*: the second argument is optional. If given, it should
    be a list of strings, each corresponding to a javascript module.
    This describes the dependencies that are required to be loaded
    before the module is executed. If the dependencies are not
    explicitly given here, then the module system will extract them from
    the function by calling toString on it, then using a regexp to find
    all *require* statements.

<!-- end list -->

``` javascript
odoo.define('module.Something', ['web.ajax'], function (require) {
  "use strict";

  var ajax = require('web.ajax');

  // some code here
  return something;
});
```

  - finally, the last argument is a function which defines the module.
    Its return value is the value of the module, which may be passed to
    other modules requiring it. Note that there is a small exception for
    asynchronous modules, see the next section.

If an error happens, it will be logged (in debug mode) in the console:

  - `Missing dependencies`: These modules do not appear in the page. It
    is possible that the JavaScript file is not in the page or that the
    module name is wrong
  - `Failed modules`: A javascript error is detected
  - `Rejected modules`: The module returns a rejected Promise. It (and
    its dependent modules) is not loaded.
  - `Rejected linked modules`: Modules who depend on a rejected module
  - `Non loaded modules`: Modules who depend on a missing or a failed
    module

### Asynchronous modules

It can happen that a module needs to perform some work before it is
ready. For example, it could do a rpc to load some data. In that case,
the module can simply return a promise. In that case, the module system
will simply wait for the promise to complete before registering the
module.

``` javascript
odoo.define('module.Something', function (require) {
    "use strict";

    var ajax = require('web.ajax');

    return ajax.rpc(...).then(function (result) {
        // some code here
        return something;
    });
});
```

### Best practices

  - remember the convention for a module name: *addon name* suffixed
    with *module name*.
  - declare all your dependencies at the top of the module. Also, they
    should be sorted alphabetically by module name. This makes it easier
    to understand your module.
  - declare all exported values at the end
  - try to avoid exporting too many things from one module. It is
    usually better to simply export one thing in one (small/smallish)
    module.
  - asynchronous modules can be used to simplify some use cases. For
    example, the *web.dom\_ready* module returns a promise which will be
    resolved when the dom is actually ready. So, another module that
    needs the DOM could simply have a
    <span class="title-ref">require('web.dom\_ready')</span> statement
    somewhere, and the code will only be executed when the DOM is ready.
  - try to avoid defining more than one module in one file. It may be
    convenient in the short term, but this is actually harder to
    maintain.

## Class System

Odoo was developed before ECMAScript 6 classes were available. In
Ecmascript 5, the standard way to define a class is to define a function
and to add methods on its prototype object. This is fine, but it is
slightly complex when we want to use inheritance, mixins.

For these reasons, Odoo decided to use its own class system, inspired by
John Resig. The base Class is located in *web.Class*, in the file
*class.js*.

### Creating a subclass

Let us discuss how classes are created. The main mechanism is to use the
*extend* method (this is more or less the equivalent of *extend* in ES6
classes).

``` javascript
var Class = require('web.Class');

var Animal = Class.extend({
    init: function () {
        this.x = 0;
        this.hunger = 0;
    },
    move: function () {
        this.x = this.x + 1;
        this.hunger = this.hunger + 1;
    },
    eat: function () {
        this.hunger = 0;
    },
});
```

In this example, the *init* function is the constructor. It will be
called when an instance is created. Making an instance is done by using
the *new* keyword.

### Inheritance

It is convenient to be able to inherit an existing class. This is simply
done by using the *extend* method on the superclass. When a method is
called, the framework will secretly rebind a special method: *\_super*
to the currently called method. This allows us to use *this.\_super*
whenever we need to call a parent method.

``` javascript
var Animal = require('web.Animal');

var Dog = Animal.extend({
    move: function () {
        this.bark();
        this._super.apply(this, arguments);
    },
    bark: function () {
        console.log('woof');
    },
});

var dog = new Dog();
dog.move()
```

### Mixins

The odoo Class system does not support multiple inheritance, but for
those cases when we need to share some behaviour, we have a mixin
system: the *extend* method can actually take an arbitrary number of
arguments, and will combine all of them in the new class.

``` javascript
var Animal = require('web.Animal');
var DanceMixin = {
    dance: function () {
        console.log('dancing...');
    },
};

var Hamster = Animal.extend(DanceMixin, {
    sleep: function () {
        console.log('sleeping');
    },
});
```

In this example, the *Hamster* class is a subclass of Animal, but it
also mix the DanceMixin in.

### Patching an existing class

It is not common, but we sometimes need to modify another class *in
place*. The goal is to have a mechanism to change a class and all
future/present instances. This is done by using the *include* method:

``` javascript
var Hamster = require('web.Hamster');

Hamster.include({
    sleep: function () {
        this._super.apply(this, arguments);
        console.log('zzzz');
    },
});
```

This is obviously a dangerous operation and should be done with care.
But with the way Odoo is structured, it is sometimes necessary in one
addon to modify the behavior of a widget/class defined in another addon.
Note that it will modify all instances of the class, even if they have
already been created.

## Widgets

The *Widget* class is really an important building block of the user
interface. Pretty much everything in the user interface is under the
control of a widget. The Widget class is defined in the module
*web.Widget*, in *widget.js*.

In short, the features provided by the Widget class include:

  - parent/child relationships between widgets (*PropertiesMixin*)
  - extensive lifecycle management with safety features (e.g.
    automatically destroying children widgets during the destruction of
    a parent)
  - automatic rendering with `qweb <reference/qweb>`
  - various utility functions to help interacting with the outside
    environment.

Here is an example of a basic counter widget:

``` javascript
var Widget = require('web.Widget');

var Counter = Widget.extend({
    template: 'some.template',
    events: {
        'click button': '_onClick',
    },
    init: function (parent, value) {
        this._super(parent);
        this.count = value;
    },
    _onClick: function () {
        this.count++;
        this.$('.val').text(this.count);
    },
});
```

For this example, assume that the template *some.template* (and is
properly loaded: the template is in a file, which is properly defined in
the *qweb* key in the module manifest) is given by:

``` xml
<div t-name="some.template">
    <span class="val"><t t-esc="widget.count"/></span>
    <button>Increment</button>
</div>
```

This example widget can be used in the following manner:

``` javascript
// Create the instance
var counter = new Counter(this, 4);
// Render and insert into DOM
counter.appendTo(".some-div");
```

This example illustrates a few of the features of the *Widget* class,
including the event system, the template system, the constructor with
the initial *parent* argument.

### Widget Lifecycle

Like many component systems, the widget class has a well defined
lifecycle. The usual lifecycle is the following: *init* is called, then
*willStart*, then the rendering takes place, then *start* and finally
*destroy*.

<div class="function">

Widget.init(parent)

this is the constructor. The init method is supposed to initialize the
base state of the widget. It is synchronous and can be overridden to
take more parameters from the widget's creator/parent

  - param parent  
    the new widget's parent, used to handle automatic destruction and
    event propagation. Can be `null` for the widget to have no parent.

  - type parent  
    `~Widget`

</div>

<div class="function">

Widget.willStart()

this method will be called once by the framework when a widget is
created and in the process of being appended to the DOM. The *willStart*
method is a hook that should return a promise. The JS framework will
wait for this promise to complete before moving on to the rendering
step. Note that at this point, the widget does not have a DOM root
element. The *willStart* hook is mostly useful to perform some
asynchronous work, such as fetching data from the server

</div>

<div class="function">

\[Rendering\]

This step is automatically done by the framework. What happens is that
the framework checks if a template key is defined on the widget. If that
is the case, then it will render that template with the *widget* key
bound to the widget in the rendering context (see the example above: we
use *widget.count* in the QWeb template to read the value from the
widget). If no template is defined, we read the *tagName* key and create
a corresponding DOM element. When the rendering is done, we set the
result as the $el property of the widget. After this, we automatically
bind all events in the events and custom\_events keys.

</div>

<div class="function">

Widget.start()

when the rendering is complete, the framework will automatically call
the *start* method. This is useful to perform some specialized
post-rendering work. For example, setting up a library.

Must return a promise to indicate when its work is done.

  - returns  
    promise

</div>

<div class="function">

Widget.destroy()

This is always the final step in the life of a widget. When a widget is
destroyed, we basically perform all necessary cleanup operations:
removing the widget from the component tree, unbinding all events, ...

Automatically called when the widget's parent is destroyed, must be
called explicitly if the widget has no parent or if it is removed but
its parent remains.

</div>

Note that the willStart and start method are not necessarily called. A
widget can be created (the *init* method will be called) and then
destroyed (*destroy* method) without ever having been appended to the
DOM. If that is the case, the willStart and start will not even be
called.

### Widget API

<div class="attribute">

Widget.tagName

Used if the widget has no template defined. Defaults to `div`, will be
used as the tag name to create the DOM element to set as the widget's
DOM root. It is possible to further customize this generated DOM root
with the following attributes:

</div>

<div class="attribute">

Widget.id

Used to generate an `id` attribute on the generated DOM root. Note that
this is rarely needed, and is probably not a good idea if a widget can
be used more than once.

</div>

<div class="attribute">

Widget.className

Used to generate a `class` attribute on the generated DOM root. Note
that it can actually contain more than one css class: *'some-class
other-class'*

</div>

<div class="attribute">

Widget.attributes

Mapping (object literal) of attribute names to attribute values. Each of
these k:v pairs will be set as a DOM attribute on the generated DOM
root.

</div>

<div class="attribute">

Widget.el

raw DOM element set as root to the widget (only available after the
start lifecycle method)

</div>

<div class="attribute">

Widget.$el

jQuery wrapper around `~Widget.el`. (only available after the start
lifecycle method)

</div>

<div class="attribute">

Widget.template

Should be set to the name of a `QWeb template <reference/qweb>`. If set,
the template will be rendered after the widget has been initialized but
before it has been started. The root element generated by the template
will be set as the DOM root of the widget.

</div>

<div class="attribute">

Widget.xmlDependencies

List of paths to xml files that need to be loaded before the widget can
be rendered. This will not induce loading anything that has already been
loaded. This is useful when you want to load your templates lazily, or
if you want to share a widget between the website and the web client
interface.

``` javascript
var EditorMenuBar = Widget.extend({
    xmlDependencies: ['/web_editor/static/src/xml/editor.xml'],
    ...
```

</div>

<div class="attribute">

Widget.events

Events are a mapping of an event selector (an event name and an optional
CSS selector separated by a space) to a callback. The callback can be
the name of a widget's method or a function object. In either case, the
`this` will be set to the widget:

``` javascript
events: {
    'click p.oe_some_class a': 'some_method',
    'change input': function (e) {
        e.stopPropagation();
    }
},
```

The selector is used for jQuery's event delegation, the callback will
only be triggered for descendants of the DOM root matching the selector.
If the selector is left out (only an event name is specified), the event
will be set directly on the widget's DOM root.

Note: the use of an inline function is discouraged, and will probably be
removed sometimes in the future.

</div>

<div class="attribute">

Widget.custom\_events

this is almost the same as the *events* attribute, but the keys are
arbitrary strings. They represent business events triggered by some sub
widgets. When an event is triggered, it will 'bubble up' the widget tree
(see the section on component communication for more details).

</div>

<div class="function">

Widget.isDestroyed()

  - returns  
    `true` if the widget is being or has been destroyed, `false`
    otherwise

</div>

<div class="function">

Widget.$(selector)

Applies the CSS selector specified as parameter to the widget's DOM
root:

``` javascript
this.$(selector);
```

is functionally identical to:

``` javascript
this.$el.find(selector);
```

  - param String selector  
    CSS selector

  - returns  
    jQuery object

<div class="note">

<div class="title">

Note

</div>

this helper method is similar to `Backbone.View.$`

</div>

</div>

<div class="function">

Widget.setElement(element)

Re-sets the widget's DOM root to the provided element, also handles
re-setting the various aliases of the DOM root as well as unsetting and
re-setting delegated events.

  - param Element element  
    a DOM element or jQuery object to set as the widget's DOM root

</div>

### Inserting a widget in the DOM

<div class="function">

Widget.appendTo(element)

Renders the widget and inserts it as the last child of the target, uses
[.appendTo()](https://api.jquery.com/appendTo/)

</div>

<div class="function">

Widget.prependTo(element)

Renders the widget and inserts it as the first child of the target, uses
[.prependTo()](https://api.jquery.com/prependTo/)

</div>

<div class="function">

Widget.insertAfter(element)

Renders the widget and inserts it as the preceding sibling of the
target, uses [.insertAfter()](https://api.jquery.com/insertAfter/)

</div>

<div class="function">

Widget.insertBefore(element)

Renders the widget and inserts it as the following sibling of the
target, uses [.insertBefore()](https://api.jquery.com/insertBefore/)

</div>

All of these methods accept whatever the corresponding jQuery method
accepts (CSS selectors, DOM nodes or jQuery objects). They all return a
promise and are charged with three tasks:

  - rendering the widget's root element via `~Widget.renderElement`
  - inserting the widget's root element in the DOM using whichever
    jQuery method they match
  - starting the widget, and returning the result of starting it

### Widget Guidelines

  - Identifiers (`id` attribute) should be avoided. In generic
    applications and modules, `id` limits the re-usability of components
    and tends to make code more brittle. Most of the time, they can be
    replaced with nothing, classes or keeping a reference to a DOM node
    or jQuery element.
    
    If an `id` is absolutely necessary (because a third-party library
    requires one), the id should be partially generated using
    `_.uniqueId()` e.g.:
    
    ``` javascript
    this.id = _.uniqueId('my-widget-');
    ```

  - Avoid predictable/common CSS class names. Class names such as
    "content" or "navigation" might match the desired meaning/semantics,
    but it is likely an other developer will have the same need,
    creating a naming conflict and unintended behavior. Generic class
    names should be prefixed with e.g. the name of the component they
    belong to (creating "informal" namespaces, much as in C or
    Objective-C).

  - Global selectors should be avoided. Because a component may be used
    several times in a single page (an example in Odoo is dashboards),
    queries should be restricted to a given component's scope.
    Unfiltered selections such as `$(selector)` or
    `document.querySelectorAll(selector)` will generally lead to
    unintended or incorrect behavior. Odoo Web's `~Widget` has an
    attribute providing its DOM root (`~Widget.$el`), and a shortcut to
    select nodes directly (`~Widget.$`).

  - More generally, never assume your components own or controls
    anything beyond its own personal `~Widget.$el` (so, avoid using a
    reference to the parent widget)

  - Html templating/rendering should use QWeb unless absolutely trivial.

  - All interactive components (components displaying information to the
    screen or intercepting DOM events) must inherit from `~Widget` and
    correctly implement and use its API and life cycle.

  - Make sure to wait for start to be finished before using $el e.g.:
    
    > 
    > 
    > ``` javascript
    > var Widget = require('web.Widget');
    > 
    > var AlmostCorrectWidget = Widget.extend({
    >     start: function () {
    >         this.$el.hasClass(....) // in theory, $el is already set, but you don't know what the parent will do with it, better call super first
    >         return this._super.apply(arguments);
    >     },
    > });
    > 
    > var IncorrectWidget = Widget.extend({
    >     start: function () {
    >         this._super.apply(arguments); // the parent promise is lost, nobody will wait for the start of this widget
    >         this.$el.hasClass(....)
    >     },
    > });
    > 
    > var CorrectWidget = Widget.extend({
    >     start: function () {
    >         var self = this;
    >         return this._super.apply(arguments).then(function() {
    >             self.$el.hasClass(....) // this works, no promise is lost and the code executes in a controlled order: first super, then our code.
    >         });
    >     },
    > });
    > ```

## QWeb Template Engine

The web client uses the `qweb` template engine to render widgets (unless
they override the *renderElement* method to do something else). The Qweb
JS template engine is based on XML, and is mostly compatible with the
python implementation.

Now, let us explain how the templates are loaded. Whenever the web
client starts, a rpc is made to the */web/webclient/qweb* route. The
server will then return a list of all templates defined in data files
for each installed modules. The correct files are listed in the *qweb*
entry in each module manifest.

The web client will wait for that list of template to be loaded, before
starting its first widget.

This mechanism works quite well for our needs, but sometimes, we want to
lazy load a template. For example, imagine that we have a widget which
is rarely used. In that case, maybe we prefer to not load its template
in the main file, in order to make the web client slightly lighter. In
that case, we can use the *xmlDependencies* key of the Widget:

``` javascript
var Widget = require('web.Widget');

var Counter = Widget.extend({
    template: 'some.template',
    xmlDependencies: ['/myaddon/path/to/my/file.xml'],

    ...

});
```

With this, the *Counter* widget will load the xmlDependencies files in
its *willStart* method, so the template will be ready when the rendering
is performed.

## Event system

There are currently two event systems supported by Odoo: a simple system
which allows adding listeners and triggering events, and a more complete
system that also makes events 'bubble up'.

Both of these event systems are implemented in the
*EventDispatcherMixin*, in the file *mixins.js*. This mixin is included
in the *Widget* class.

### Base Event system

This event system was historically the first. It implements a simple bus
pattern. We have 4 main methods:

  - *on*: this is used to register a listener on an event.
  - *off*: useful to remove events listener.
  - *once*: this is used to register a listener that will only be called
    once.
  - *trigger*: trigger an event. This will cause each listeners to be
    called.

Here is an example on how this event system could be used:

``` javascript
var Widget = require('web.Widget');
var Counter = require('myModule.Counter');

var MyWidget = Widget.extend({
    start: function () {
        this.counter = new Counter(this);
        this.counter.on('valuechange', this, this._onValueChange);
        var def = this.counter.appendTo(this.$el);
        return Promise.all([def, this._super.apply(this, arguments)]);
    },
    _onValueChange: function (val) {
        // do something with val
    },
});

// in Counter widget, we need to call the trigger method:

... this.trigger('valuechange', someValue);
```

<div class="warning">

<div class="title">

Warning

</div>

the use of this event system is discouraged, we plan to replace each
*trigger* method by the *trigger\_up* method from the extended event
system

</div>

### Extended Event System

The custom event widgets is a more advanced system, which mimic the DOM
events API. Whenever an event is triggered, it will 'bubble up' the
component tree, until it reaches the root widget, or is stopped.

  - *trigger\_up*: this is the method that will create a small
    *OdooEvent* and dispatch it in the component tree. Note that it will
    start with the component that triggered the event
  - *custom\_events*: this is the equivalent of the *event* dictionary,
    but for odoo events.

The OdooEvent class is very simple. It has three public attributes:
*target* (the widget that triggered the event), *name* (the event name)
and *data* (the payload). It also has 2 methods: *stopPropagation* and
*is\_stopped*.

The previous example can be updated to use the custom event system:

``` javascript
var Widget = require('web.Widget');
var Counter = require('myModule.Counter');

var MyWidget = Widget.extend({
    custom_events: {
        valuechange: '_onValueChange'
    },
    start: function () {
        this.counter = new Counter(this);
        var def = this.counter.appendTo(this.$el);
        return Promise.all([def, this._super.apply(this, arguments)]);
    },
    _onValueChange: function(event) {
        // do something with event.data.val
    },
});

// in Counter widget, we need to call the trigger_up method:

... this.trigger_up('valuechange', {value: someValue});
```

## Registries

A common need in the Odoo ecosystem is to extend/change the behaviour of
the base system from the outside (by installing an application, i.e. a
different module). For example, one may need to add a new widget type in
some views. In that case, and many others, the usual process is to
create the desired component, then add it to a registry (registering
step), to make the rest of the web client aware of its existence.

There are a few registries available in the system:

  - field registry (exported by :js`web.field_registry`)  
    The field registry contains all field widgets known to the web
    client. Whenever a view (typically form or list/kanban) needs a
    field widget, this is where it will look. A typical use case look
    like this:
    
    ``` javascript
    var fieldRegistry = require('web.field_registry');
    
    var FieldPad = ...;
    
    fieldRegistry.add('pad', FieldPad);
    ```
    
    Note that each value should be a subclass of *AbstractField*

  - view registry  
    This registry contains all JS views known to the web client (and in
    particular, the view manager). Each value of this registry should be
    a subclass of *AbstractView*.

  - action registry  
    We keep track of all client actions in this registry. This is where
    the action manager looks up whenever it needs to create a client
    action. In version 11, each value should simply be a subclass of
    *Widget*. However, in version 12, the values are required to be
    *AbstractAction*.

## Communication between widgets

There are many ways to communicate between components.

  - From a parent to its child  
    This is a simple case. The parent widget can simply call a method on
    its child:
    
    ``` javascript
    this.someWidget.update(someInfo);
    ```

  - From a widget to its parent/some ancestor  
    In this case, the widget's job is simply to notify its environment
    that something happened. Since we do not want the widget to have a
    reference to its parent (this would couple the widget with its
    parent's implementation), the best way to proceed is usually to
    trigger an event, which will bubble up the component tree, by using
    the `trigger_up` method:
    
    ``` javascript
    this.trigger_up('open_record', { record: record, id: id});
    ```
    
    This event will be triggered on the widget, then will bubble up and
    be eventually caught by some upstream widget:
    
    ``` javascript
    var SomeAncestor = Widget.extend({
        custom_events: {
            'open_record': '_onOpenRecord',
        },
        _onOpenRecord: function (event) {
            var record = event.data.record;
            var id = event.data.id;
            // do something with the event.
        },
    });
    ```

  - Cross component  
    Cross component communication can be achieved by using a bus. This
    is not the preferred form of communication, because it has the
    disadvantage of making the code harder to maintain. However, it has
    the advantage of decoupling the components. In that case, this is
    simply done by triggering and listening to events on a bus. For
    example:
    
    ``` javascript
    // in WidgetA
    var core = require('web.core');
    
    var WidgetA = Widget.extend({
        ...
        start: function () {
            core.bus.on('barcode_scanned', this, this._onBarcodeScanned);
        },
    });
    
    // in WidgetB
    var WidgetB = Widget.extend({
        ...
        someFunction: function (barcode) {
            core.bus.trigger('barcode_scanned', barcode);
        },
    });
    
    In this example, we use the bus exported by *web.core*, but this is not
    required. A bus could be created for a specific purpose.
    ```

## Services

In version 11.0, we introduced the notion of *service*. The main idea is
to give to sub components a controlled way to access their environment,
in a way that allow the framework enough control, and which is testable.

The service system is organized around three ideas: services, service
providers and widgets. The way it works is that widgets trigger (with
*trigger\_up*) events, these events bubble up to a service provider,
which will ask a service to perform a task, then maybe return an answer.

### Service

A service is an instance of the *AbstractService* class. It basically
only has a name and a few methods. Its job is to perform some work,
typically something depending on the environment.

For example, we have the *ajax* service (job is to perform a rpc), the
*localStorage* (interact with the browser local storage) and many
others.

Here is a simplified example on how the ajax service is implemented:

``` javascript
var AbstractService = require('web.AbstractService');

var AjaxService = AbstractService.extend({
    name: 'ajax',
    rpc: function (...) {
        return ...;
    },
});
```

This service is named 'ajax' and define one method, *rpc*.

### Service Provider

For services to work, it is necessary that we have a service provider
ready to dispatch the custom events. In the *backend* (web client), this
is done by the main web client instance. Note that the code for the
service provider comes from the *ServiceProviderMixin*.

### Widget

The widget is the part that requests a service. In order to do that, it
simply triggers an event *call\_service* (typically by using the helper
function *call*). This event will bubble up and communicate the intent
to the rest of the system.

In practice, some functions are so frequently called that we have some
helpers functions to make them easier to use. For example, the *\_rpc*
method is a helper that helps making a rpc.

``` javascript
var SomeWidget = Widget.extend({
    _getActivityModelViewID: function (model) {
        return this._rpc({
            model: model,
            method: 'get_activity_view_id'
        });
    },
});
```

<div class="warning">

<div class="title">

Warning

</div>

If a widget is destroyed, it will be detached from the main component
tree and will not have a parent. In that case, the events will not
bubble up, which means that the work will not be done. This is usually
exactly what we want from a destroyed widget.

</div>

### RPCs

The rpc functionality is supplied by the ajax service. But most people
will probably only interact with the *\_rpc* helpers.

There are typically two usecases when working on Odoo: one may need to
call a method on a (python) model (this goes through a controller
*call\_kw*), or one may need to directly call a controller (available on
some route).

  - Calling a method on a python model:

<!-- end list -->

``` javascript
return this._rpc({
    model: 'some.model',
    method: 'some_method',
    args: [some, args],
});
```

  - Directly calling a controller:

<!-- end list -->

``` javascript
return this._rpc({
    route: '/some/route/',
    params: { some: kwargs},
});
```

## Notifications

The Odoo framework has a standard way to communicate various information
to the user: notifications, which are displayed on the top right of the
user interface.

There are two types of notifications:

  - *notification*: useful to display some feedback. For example,
    whenever a user unsubscribed to a channel.
  - *warning*: useful to display some important/urgent information.
    Typically most kind of (recoverable) errors in the system.

Also, notifications can be used to ask a question to the user without
disturbing its workflow. Imagine a phone call received through VOIP: a
sticky notification could be displayed with two buttons *Accept* and
*Decline*.

### Notification system

The notification system in Odoo is designed with the following
components:

  - a *Notification* widget: this is a simple widget that is meant to be
    created and displayed with the desired information
  - a *NotificationService*: a service whose responsibility is to create
    and destroy notifications whenever a request is done (with a
    custom\_event). Note that the web client is a service provider.
  - a client action *display\_notification*: this allows to trigger the
    display of a notification from python (e.g. in the method called
    when the user clicked on a button of type object).
  - two helper functions in *ServiceMixin*: *do\_notify* and *do\_warn*

### Displaying a notification

The most common way to display a notification is by using two methods
that come from the *ServiceMixin*:

  -   - *do\_notify(title, message, sticky, className)*:  
        Display a notification of type *notification*.
        
          - *title*: string. This will be displayed on the top as a
            title
          - *message*: string, the content of the notification
          - *sticky*: boolean, optional. If true, the notification will
            stay until the user dismisses it. Otherwise, the
            notification will be automatically closed after a short
            delay.
          - *className*: string, optional. This is a css class name that
            will be automatically added to the notification. This could
            be useful for styling purpose, even though its use is
            discouraged.

  -   - *do\_warn(title, message, sticky, className)*:  
        Display a notification of type *warning*.
        
          - *title*: string. This will be displayed on the top as a
            title
          - *message*: string, the content of the notification
          - *sticky*: boolean, optional. If true, the notification will
            stay until the user dismisses it. Otherwise, the
            notification will be automatically closed after a short
            delay.
          - *className*: string, optional. This is a css class name that
            will be automatically added to the notification. This could
            be useful for styling purpose, even though its use is
            discouraged.

Here are two examples on how to use these methods:

``` javascript
// note that we call _t on the text to make sure it is properly translated.
this.do_notify(_t("Success"), _t("Your signature request has been sent."));

this.do_warn(_t("Error"), _t("Filter name is required."));
```

Here an example in python:

``` python
# note that we call _(string) on the text to make sure it is properly translated.
def show_notification(self):
    return {
        'type': 'ir.actions.client',
        'tag': 'display_notification',
        'params': {
            'title': _('Success'),
            'message': _('Your signature request has been sent.'),
            'sticky': False,
        }
    }
```

## Systray

The Systray is the right part of the menu bar in the interface, where
the web client displays a few widgets, such as a messaging menu.

When the SystrayMenu is created by the menu, it will look for all
registered widgets and add them as a sub widget at the proper place.

There is currently no specific API for systray widgets. They are
supposed to be simple widgets, and can communicate with their
environment just like other widgets with the *trigger\_up* method.

### Adding a new Systray Item

There is no systray registry. The proper way to add a widget is to add
it to the class variable SystrayMenu.items.

``` javascript
var SystrayMenu = require('web.SystrayMenu');

var MySystrayWidget = Widget.extend({
    ...
});

SystrayMenu.Items.push(MySystrayWidget);
```

### Ordering

Before adding the widget to himself, the Systray Menu will sort the
items by a sequence property. If that property is not present on the
prototype, it will use 50 instead. So, to position a systray item to be
on the right, one can set a very high sequence number (and conversely, a
low number to put it on the left).

``` javascript
MySystrayWidget.prototype.sequence = 100;
```

## Translation management

Some translations are made on the server side (basically all text
strings rendered or processed by the server), but there are strings in
the static files that need to be translated. The way it currently works
is the following:

  - each translatable string is tagged with the special function *\_t*
    (available in the JS module *web.core*
  - these strings are used by the server to generate the proper PO files
  - whenever the web client is loaded, it will call the route
    */web/webclient/translations*, which returns a list of all
    translatable terms
  - in runtime, whenever the function *\_t* is called, it will look up
    in this list in order to find a translation, and return it or the
    original string if none is found.

Note that translations are explained in more details, from the server
point of view, in the document `/developer/howtos/translations`.

There are two important functions for the translations in javascript:
*\_t* and *\_lt*. The difference is that *\_lt* is lazily evaluated.

``` javascript
var core = require('web.core');

var _t = core._t;
var _lt = core._lt;

var SomeWidget = Widget.extend({
    exampleString: _lt('this should be translated'),
    ...
    someMethod: function () {
        var str = _t('some text');
        ...
    },
});
```

In this example, the *\_lt* is necessary because the translations are
not ready when the module is loaded.

Note that translation functions need some care. The string given in
argument should not be dynamic.

## Session

There is a specific module provided by the web client which contains
some information specific to the user current *session*. Some notable
keys are

  - uid: the current user ID (its ID as a *res.users*)
  - user\_name: the user name, as a string
  - the user context (user ID, language and timezone)
  - partner\_id: the ID of the partner associated to the current user
  - db: the name of the database currently being in use

### Adding information to the session

When the /web route is loaded, the server will inject some session
information in the template a script tag. The information will be read
from the method *session\_info* of the model *ir.http*. So, if one wants
to add a specific information, it can be done by overriding the
session\_info method and adding it to the dictionary.

``` python
from odoo import models
from odoo.http import request


class IrHttp(models.AbstractModel):
    _inherit = 'ir.http'

    def session_info(self):
        result = super(IrHttp, self).session_info()
        result['some_key'] = get_some_value_from_db()
        return result
```

Now, the value can be obtained in javascript by reading it in the
session:

``` javascript
var session = require('web.session');
var myValue = session.some_key;
...
```

Note that this mechanism is designed to reduce the amount of
communication needed by the web client to be ready. It is more
appropriate for data which is cheap to compute (a slow session\_info
call will delay the loading for the web client for everyone), and for
data which is required early in the initialization process.

## Views

The word 'view' has more than one meaning. This section is about the
design of the javascript code of the views, not the structure of the
*arch* or anything else.

In 2017, Odoo replaced the previous view code with a new architecture.
The main need was to separate the rendering logic from the model logic.

Views (in a generic sense) are now described with 4 pieces: a View, a
Controller, a Renderer and a Model. The API of these 4 pieces is
described in the AbstractView, AbstractController, AbstractRenderer and
AbstractModel classes.

<svg width="550" height="173">
    <!-- Created with Method Draw - https://github.com/duopixel/Method-Draw/ -->
    <path id="svg_1" d="m147.42498,79.79206c0.09944,-8.18859 -0.06363,-16.38812 0.81774,-24.5623c21.65679,2.68895 43.05815,7.08874 64.35,11.04543c1.14304,-4.01519 0.60504,-7.34585 1.59817,-11.05817c13.67878,7.81176 27.23421,15.73476 40.23409,24.03505c-12.47212,9.41539 -26.77809,17.592 -40.82272,25.96494c-0.4548,-3.89916 -0.90967,-7.79828 -1.36448,-11.69744c-20.69972,3.77225 -42.59036,7.6724 -63.42391,11.12096c-1.41678,-7.95741 -1.37514,-16.62327 -1.38888,-24.84846z" stroke-width="1.5" stroke="#000" fill="#fff"/>
    <rect id="svg_3" height="41" width="110" y="57.5" x="7" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="#fff"/>
    <rect stroke="#000" id="svg_5" height="41" width="135" y="20.5" x="328" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" fill="#fff"/>
    <rect stroke="#000" id="svg_6" height="41" width="128" y="102.5" x="262" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" fill="#fff"/>
    <rect stroke="#000" id="svg_7" height="41" width="119" y="100.5" x="417" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" fill="#fff"/>
    <line stroke-linecap="null" stroke-linejoin="null" id="svg_8" y2="96.5" x2="317" y1="65.5" x1="364" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
    <line stroke-linecap="null" stroke-linejoin="null" id="svg_9" y2="96.5" x2="467" y1="63.5" x1="425" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
    <text xml:space="preserve" text-anchor="start" font-family="Helvetica, Arial, sans-serif" font-size="24" id="svg_10" y="83.5" x="38" fill-opacity="null" stroke-opacity="null" stroke-width="0" stroke="#000" fill="#000000">View</text>
    <text xml:space="preserve" text-anchor="start" font-family="Helvetica, Arial, sans-serif" font-size="24" id="svg_11" y="44.5" x="346" fill-opacity="null" stroke-opacity="null" stroke-width="0" stroke="#000" fill="#000000">Controller</text>
    <text xml:space="preserve" text-anchor="start" font-family="Helvetica, Arial, sans-serif" font-size="24" id="svg_12" y="128.5" x="276" fill-opacity="null" stroke-opacity="null" stroke-width="0" stroke="#000" fill="#000000">Renderer</text>
    <text xml:space="preserve" text-anchor="start" font-family="Helvetica, Arial, sans-serif" font-size="24" id="svg_13" y="127.5" x="442" fill-opacity="null" stroke-opacity="null" stroke-width="0" stroke="#000" fill="#000000">Model</text>
</svg>

  - the View is the factory. Its job is to get a set of fields, arch,
    context and some other parameters, then to construct a
    Controller/Renderer/Model triplet.
    
    The view's role is to properly setup each piece of the MVC pattern,
    with the correct information. Usually, it has to process the arch
    string and extract the data necessary for each other parts of the
    view.
    
    Note that the view is a class, not a widget. Once its job has been
    done, it can be discarded.

  - the Renderer has one job: representing the data being viewed in a
    DOM element. Each view can render the data in a different way. Also,
    it should listen on appropriate user actions and notify its parent
    (the Controller) if necessary.
    
    The Renderer is the V in the MVC pattern.

  - the Model: its job is to fetch and hold the state of the view.
    Usually, it represents in some way a set of records in the database.
    The Model is the owner of the 'business data'. It is the M in the
    MVC pattern.

  - the Controller: its job is to coordinate the renderer and the model.
    Also, it is the main entry point for the rest of the web client. For
    example, when the user changes something in the search view, the
    *update* method of the controller will be called with the
    appropriate information.
    
    It is the C in the MVC pattern.

<div class="note">

<div class="title">

Note

</div>

The JS code for the views has been designed to be usable outside of the
context of a view manager/action manager. They could be used in a client
action, or, they could be displayed in the public website (with some
work on the assets).

</div>

## Field Widgets

A good part of the web client experience is about editing and creating
data. Most of that work is done with the help of field widgets, which
are aware of the field type and of the specific details on how a value
should be displayed and edited.

### AbstractField

The *AbstractField* class is the base class for all widgets in a view,
for all views that support them (currently: Form, List, Kanban).

There are many differences between the v11 field widgets and the
previous versions. Let us mention the most important ones:

  - the widgets are shared between all views (well, Form/List/Kanban).
    No need to duplicate the implementation anymore. Note that it is
    possible to have a specialized version of a widget for a view, by
    prefixing it with the view name in the view registry:
    *list.many2one* will be chosen in priority over *many2one*.
  - the widgets are no longer the owner of the field value. They only
    represent the data and communicate with the rest of the view.
  - the widgets do no longer need to be able to switch between edit and
    readonly mode. Now, when such a change is necessary, the widget will
    be destroyed and rerendered again. It is not a problem, since they
    do not own their value anyway
  - the field widgets can be used outside of a view. Their API is
    slightly awkward, but they are designed to be standalone.

### Decorations

Like the list view, field widgets have a simple support for decorations.
The goal of decorations is to have a simple way to specify a text color
depending on the record current state. For example,

``` xml
<field name="state" decoration-danger="amount &lt; 10000"/>
```

The valid decoration names are:

  - decoration-bf
  - decoration-it
  - decoration-danger
  - decoration-info
  - decoration-muted
  - decoration-primary
  - decoration-success
  - decoration-warning

Each decoration *decoration-X* will be mapped to a css class *text-X*,
which is a standard bootstrap css class (except for *text-it* and
*text-bf*, which are handled by odoo and correspond to italic and bold,
respectively). Note that the value of the decoration attribute should be
a valid python expression, which will be evaluated with the record as
evaluation context.

### Non relational fields

We document here all non relational fields available by default, in no
particular order.

  - integer (FieldInteger)  
    This is the default field type for fields of type *integer*.
    
      - Supported field types: *integer*
        
        Options:
        
          - type: setting the input type (*text* by default, can be set
            on *number*)
        
        On edit mode, the field is rendered as an input with the HTML
        attribute type set on *number* (so user can benefit the native
        support, especially on mobile). In this case, the default
        formatting is disabled to avoid incompability.
        
        ``` xml
        <field name="int_value" options='{"type": "number"}'/>
        ```
        
          - step: set the step to the value up and down when the user
            click on buttons (only for input of type number, 1 by
            default)
        
        <!-- end list -->
        
        ``` xml
        <field name="int_value" options='{"type": "number", "step": 100}'/>
        ```
        
          - format: should the number be formatted. (true by default)
        
        <!-- end list -->
        
          - By default, numbers are formatted according to locale
            parameters.  
            This option will prevent the field's value from being
            formatted.
        
        <!-- end list -->
        
        ``` xml
        <field name="int_value" options='{"format": false}'/>
        ```

  - float (FieldFloat)  
    This is the default field type for fields of type *float*.
    
      - Supported field types: *float*
    
    Attributes:
    
      - digits: displayed precision
    
    <!-- end list -->
    
    ``` xml
    <field name="factor" digits="[42,5]"/>
    ```
    
    Options:
    
      - type: setting the input type (*text* by default, can be set on
        *number*)
    
    On edit mode, the field is rendered as an input with the HTML
    attribute type set on *number* (so user can benefit the native
    support, especially on mobile). In this case, the default formatting
    is disabled to avoid incompability.
    
    ``` xml
    <field name="int_value" options='{"type": "number"}'/>
    ```
    
      - step: set the step to the value up and down when the user click
        on buttons (only for input of type number, 1 by default)
    
    <!-- end list -->
    
    ``` xml
    <field name="int_value" options='{"type": "number", "step": 0.1}'/>
    
    - format: should the number be formatted. (true by default)
    
    By default, numbers are formatted according to locale parameters.
      This option will prevent the field's value from being formatted.
    
    .. code-block:: xml
    
      <field name="int_value" options='{"format": false}'/>
    ```

  - float\_time (FieldFloatTime)  
    The goal of this widget is to display properly a float value that
    represents a time interval (in hours). So, for example, 0.5 should
    be formatted as 0:30, or 4.75 correspond to 4:45.
    
      - Supported field types: *float*

  - float\_factor (FieldFloatFactor)  
    This widget aims to display properly a float value that converted
    using a factor given in its options. So, for example, the value
    saved in database is 0.5 and the factor is 3, the widget value
    should be formatted as 1.5.
    
      - Supported field types: *float*

  - float\_toggle (FieldFloatToggle)  
    The goal of this widget is to replace the input field by a button
    containing a range of possible values (given in the options). Each
    click allows the user to loop in the range. The purpose here is to
    restrict the field value to a predefined selection. Also, the widget
    support the factor conversion as the *float\_factor* widget (Range
    values should be the result of the conversion).
    
      - Supported field types: *float*
    
    <!-- end list -->
    
    ``` xml
    <field name="days_to_close" widget="float_toggle" options='{"factor": 2, "range": [0, 4, 8]}'/>
    ```

  - boolean (FieldBoolean)  
    This is the default field type for fields of type *boolean*.
    
      - Supported field types: *boolean*

  - char (FieldChar)  
    This is the default field type for fields of type *char*.
    
      - Supported field types: *char*

  - date (FieldDate)  
    This is the default field type for fields of type *date*. Note that
    it also works with datetime fields. It uses the session timezone
    when formatting dates.
    
      - Supported field types: *date*, *datetime*
    
    Options:
    
      - datepicker: extra settings for the
        [datepicker](https://github.com/Eonasdan/bootstrap-datetimepicker)
        widget.
    
    <!-- end list -->
    
    ``` xml
    <field name="datefield" options='{"datepicker": {"daysOfWeekDisabled": [0, 6]}}'/>
    ```

  - datetime (FieldDateTime)  
    This is the default field type for fields of type *datetime*.
    
      - Supported field types: *date*, *datetime*
    
    Options:
    
      - datepicker: extra settings for the
        [datepicker](https://github.com/Eonasdan/bootstrap-datetimepicker)
        widget.
    
    <!-- end list -->
    
    ``` xml
    <field name="datetimefield" options='{"datepicker": {"daysOfWeekDisabled": [0, 6]}}'/>
    ```

  - daterange (FieldDateRange)  
    This widget allows the user to select start and end date into a
    single picker.
    
      - Supported field types: *date*, *datetime*
    
    Options:
    
      - related\_start\_date: apply on end date field to get start date
        value which is used to display range in the picker.
      - related\_end\_date: apply on start date field to get end date
        value which is used to display range in the picker.
      - picker\_options: extra settings for picker.
    
    <!-- end list -->
    
    ``` xml
    <field name="start_date" widget="daterange" options='{"related_end_date": "end_date"}'/>
    ```

  - remaining\_days (RemainingDays)  
    This widget can be used on date and datetime fields. In readonly, it
    displays the delta (in days) between the value of the field and
    today. The widget is intended to be used for informative purpose:
    therefore the value cannot be modified in edit mode.
    
      - Supported field types: *date*, *datetime*

  - monetary (FieldMonetary)  
    This is the default field type for fields of type 'monetary'. It is
    used to display a currency. If there is a currency fields given in
    option, it will use that, otherwise it will fall back to the default
    currency (in the session)
    
      - Supported field types: *monetary*, *float*
    
    Options:
    
      - currency\_field: another field name which should be a many2one
        on currency.
    
    <!-- end list -->
    
    ``` xml
    <field name="value" widget="monetary" options="{'currency_field': 'currency_id'}"/>
    ```

  - text (FieldText)  
    This is the default field type for fields of type *text*.
    
      - Supported field types: *text*

  - handle (HandleWidget)  
    This field's job is to be displayed as a *handle*, and allows
    reordering the various records by drag and dropping them.
    
    <div class="warning">
    
    <div class="title">
    
    Warning
    
    </div>
    
    It has to be specified on the field by which records are sorted.
    
    </div>
    
    <div class="warning">
    
    <div class="title">
    
    Warning
    
    </div>
    
    Having more than one field with a handle widget on the same list is
    not supported.
    
    </div>
    
      - Supported field types: *integer*

  - email (FieldEmail)  
    This field displays email address. The main reason to use it is that
    it is rendered as an anchor tag with the proper href, in readonly
    mode.
    
      - Supported field types: *char*

  - phone (FieldPhone)  
    This field displays a phone number. The main reason to use it is
    that it is rendered as an anchor tag with the proper href, in
    readonly mode, but only in some cases: we only want to make it
    clickable if the device can call this particular number.
    
      - Supported field types: *char*

  - url (UrlWidget)  
    This field displays an url (in readonly mode). The main reason to
    use it is that it is rendered as an anchor tag with the proper css
    classes and href.
    
    Also, the text of the anchor tag can be customized with the *text*
    attribute (it won't change the href value).
    
    ``` xml
    <field name="foo" widget="url" text="Some URL"/>
    
    Options:
    
    - website_path: (default:false) by default, the widget forces (if not already
    the case) the href value to begin with http:// except if this option is set
    to true, thus allowing redirections to the database's own website.
    
    - Supported field types: *char*
    ```

  - domain (FieldDomain)  
    The "Domain" field allows the user to construct a technical-prefix
    domain thanks to a tree-like interface and see the selected records
    in real time. In debug mode, an input is also there to be able to
    enter the prefix char domain directly (or to build advanced domains
    the tree-like interface does not allow to).
    
    Note that this is limited to 'static' domain (no dynamic expression,
    or access to context variable).
    
      - Supported field types: *char*

  - link\_button (LinkButton)  
    The LinkButton widget actually simply displays a span with an icon
    and the text value as content. The link is clickable and will open a
    new browser window with its value as url.
    
      - Supported field types: *char*

  - image (FieldBinaryImage)  
    This widget is used to represent a binary value as an image. In some
    cases, the server returns a 'bin\_size' instead of the real image (a
    bin\_size is a string representing a file size, such as 6.5kb). In
    that case, the widget will make an image with a source attribute
    corresponding to an image on the server.
    
      - Supported field types: *binary*
    
    Options:
    
      - preview\_image: if the image is only loaded as a 'bin\_size',
        then this option is useful to inform the web client that the
        default field name is not the name of the current field, but the
        name of another field.
      - accepted\_file\_extensions: the file extension the user can pick
        from the file input dialog box (default value is
        <span class="title-ref">image/\*</span>) (cf: `accept` attribute
        on \<input type="file"/\>)
    
    <!-- end list -->
    
    ``` xml
    <field name="image" widget='image' options='{"preview_image":"image_128"}'/>
    ```

  - binary (FieldBinaryFile)  
    Generic widget to allow saving/downloading a binary file.
    
      - Supported field types: *binary*
    
    Options:
    
      - accepted\_file\_extensions: the file extension the user can pick
        from the file input dialog box (cf: `accept` attribute on
        \<input type="file"/\>)
    
    Attribute:
    
      - filename: saving a binary file will lose its file name, since it
        only saves the binary value. The filename can be saved in
        another field. To do that, an attribute filename should be set
        to a field present in the view.
    
    <!-- end list -->
    
    ``` xml
    <field name="datas" filename="datas_fname"/>
    ```

  - priority (PriorityWidget)  
    This widget is rendered as a set of stars, allowing the user to
    click on it to select a value or not. This is useful for example to
    mark a task as high priority.
    
    Note that this widget also works in 'readonly' mode, which is
    unusual.
    
      - Supported field types: *selection*

  - attachment\_image (AttachmentImage)  
    Image widget for many2one fields. If the field is set, this widget
    will be rendered as an image with the proper src url. This widget
    does not have a different behaviour in edit or readonly mode, it is
    only useful to view an image.
    
      - Supported field types: *many2one*
    
    <!-- end list -->
    
    ``` xml
    <field name="displayed_image_id" widget="attachment_image"/>
    ```

  - image\_selection (ImageSelection)  
    Allow the user to select a value by clicking on an image.
    
      - Supported field types: *selection*
    
    Options: a dictionary with a mapping from a selection value to an
    object with the url for an image (*image\_link*) and a preview image
    (*preview\_link*).
    
    Note that this option is not optional\!
    
    ``` xml
    <field name="external_report_layout" widget="image_selection" options="{
        'background': {
            'image_link': '/base/static/img/preview_background.png',
            'preview_link': '/base/static/pdf/preview_background.pdf'
        },
        'standard': {
            'image_link': '/base/static/img/preview_standard.png',
            'preview_link': '/base/static/pdf/preview_standard.pdf'
        }
    }"/>
    ```

  - label\_selection (LabelSelection)  
    This widget renders a simple non-editable label. This is only useful
    to display some information, not to edit it.
    
      - Supported field types: *selection*
    
    Options:
    
      - classes: a mapping from a selection value to a css class
    
    <!-- end list -->
    
    ``` xml
    <field name="state" widget="label_selection" options="{
        'classes': {'draft': 'default', 'cancel': 'default', 'none': 'danger'}
    }"/>
    ```

  - state\_selection (StateSelectionWidget)  
    This is a specialized selection widget. It assumes that the record
    has some hardcoded fields, present in the view: *stage\_id*,
    *legend\_normal*, *legend\_blocked*, *legend\_done*. This is mostly
    used to display and change the state of a task in a project, with
    additional information displayed in the dropdown.
    
      - Supported field types: *selection*
    
    <!-- end list -->
    
    ``` xml
    <field name="kanban_state" widget="state_selection"/>
    ```

  - kanban\_state\_selection (StateSelectionWidget)  
    This is exactly the same widget as state\_selection
    
      - Supported field types: *selection*

  - boolean\_favorite (FavoriteWidget)  
    This widget is displayed as an empty (or not) star, depending on a
    boolean value. Note that it also can be edited in readonly mode.
    
      - Supported field types: *boolean*

  - boolean\_button (FieldBooleanButton)  
    The Boolean Button widget is meant to be used in a stat button in a
    form view. The goal is to display a nice button with the current
    state of a boolean field (for example, 'Active'), and allow the user
    to change that field when clicking on it.
    
    Note that it also can be edited in readonly mode.
    
      - Supported field types: *boolean*
    
    Options:
    
      - terminology: it can be either 'active', 'archive', 'close' or a
        customized mapping with the keys *string\_true*,
        *string\_false*, *hover\_true*, *hover\_false*
    
    <!-- end list -->
    
    ``` xml
    <field name="active" widget="boolean_button" options='{"terminology": "archive"}'/>
    ```

  - boolean\_toggle (BooleanToggle)  
    Displays a toggle switch to represent a boolean. This is a subfield
    of FieldBoolean, mostly used to have a different look.

  - statinfo (StatInfo)  
    This widget is meant to represent statistical information in a *stat
    button*. It is basically just a label with a number.
    
      - Supported field types: *integer, float*
    
    Options:
    
      - label\_field: if given, the widget will use the value of the
        label\_field as text.
    
    <!-- end list -->
    
    ``` xml
    <button name="%(act_payslip_lines)d"
        icon="fa-money"
        type="action">
        <field name="payslip_count" widget="statinfo"
            string="Payslip"
            options="{'label_field': 'label_tasks'}"/>
    </button>
    ```

  - percentpie (FieldPercentPie)  
    This widget is meant to represent statistical information in a *stat
    button*. This is similar to a statinfo widget, but the information
    is represented in a *pie* chart (empty to full). Note that the value
    is interpreted as a percentage (a number between 0 and 100).
    
      - Supported field types: *integer, float*
    
    <!-- end list -->
    
    ``` xml
    <field name="replied_ratio" string="Replied" widget="percentpie"/>
    ```

  - progressbar (FieldProgressBar)  
    Represent a value as a progress bar (from 0 to some value)
    
      - Supported field types: *integer, float*
    
    Options:
    
      - editable: boolean if value is editable
      - current\_value: get the current\_value from the field that must
        be present in the view
      - max\_value: get the max\_value from the field that must be
        present in the view
      - edit\_max\_value: boolean if the max\_value is editable
      - title: title of the bar, displayed on top of the bar --\> not
        translated, use parameter (not option) "title" instead
    
    <!-- end list -->
    
    ``` xml
    <field name="absence_of_today" widget="progressbar"
        options="{'current_value': 'absence_of_today', 'max_value': 'total_employee', 'editable': false}"/>
    ```

  - toggle\_button (FieldToggleBoolean)  
    This widget is intended to be used on boolean fields. It toggles a
    button switching between a green bullet / gray bullet. It also set
    up a tooltip, depending on the value and some options.
    
      - Supported field types: *boolean*
    
    Options:
    
      - active: the string for the tooltip that should be set when
        boolean is true
      - inactive: the tooltip that should be set when boolean is false
    
    <!-- end list -->
    
    ``` xml
    <field name="payslip_status" widget="toggle_button"
        options='{"active": "Reported in last payslips", "inactive": "To Report in Payslip"}'
    />
    ```

  - dashboard\_graph (JournalDashboardGraph)  
    This is a more specialized widget, useful to display a graph
    representing a set of data. For example, it is used in the
    accounting dashboard kanban view.
    
    It assumes that the field is a JSON serialization of a set of data.
    
      - Supported field types: *char*
    
    Attribute
    
      - graph\_type: string, can be either 'line' or 'bar'
    
    <!-- end list -->
    
    ``` xml
    <field name="dashboard_graph_data"
        widget="dashboard_graph"
        graph_type="line"/>
    ```

  - ace (AceEditor)  
    This widget is intended to be used on Text fields. It provides Ace
    Editor for editing XML and Python.
    
      - Supported field types: *char, text*

  - \- badge (FieldBadge)  
    Displays the value inside a bootstrap badge pill.
    
      - Supported field types: *char*, *selection*, *many2one*
    
    By default, the badge has a lightgrey background, but it can be
    customized by using the decoration-X mechanism. For instance, to
    display a red badge under a given condition:
    
    ``` xml
    <field name="foo" widget="badge" decoration-danger="state == 'cancel'"/>
    ```

### Relational fields

<div class="web.relational_fields.FieldSelection">

Supported field types: *selection*

<div class="attribute">

placeholder

a string which is used to display some info when no value is selected

</div>

``` xml
<field name="tax_id" widget="selection" placeholder="Select a tax"/>
```

</div>

  - radio (FieldRadio)  
    This is a subfield of FielSelection, but specialized to display all
    the valid choices as radio buttons.
    
    Note that if used on a many2one records, then more rpcs will be done
    to fetch the name\_gets of the related records.
    
      - Supported field types: *selection, many2one*
    
    Options:
    
      - horizontal: if true, radio buttons will be displayed
        horizontally.
    
    <!-- end list -->
    
    ``` xml
    <field name="recommended_activity_type_id" widget="radio"
        options="{'horizontal':true}"/>
    ```

  - selection\_badge (FieldSelectionBadge)  
    This is a subfield of FieldSelection, but specialized to display all
    the valid choices as rectangular badges.
    
      - Supported field types: *selection, many2one*
    
    <!-- end list -->
    
    ``` xml
    <field name="recommended_activity_type_id" widget="selection_badge"/>
    ```

  - many2one (FieldMany2One)  
    Default widget for many2one fields.
    
      - Supported field types: *many2one*
    
    Attributes:
    
      - can\_create: allow the creation of related records (take
        precedence over no\_create option)
      - can\_write: allow the editing of related records (default: true)
    
    Options:
    
      - no\_create: prevent the creation of related records
      - quick\_create: allow the quick creation of related records
        (default: true)
      - no\_quick\_create: prevent the quick creation of related records
        (don't ask me)
      - no\_create\_edit: same as no\_create, maybe...
      - create\_name\_field: when creating a related record, if this
        option is set, the value of the *create\_name\_field* will be
        filled with the value of the input (default: *name*)
      - always\_reload: boolean, default to false. If true, the widget
        will always do an additional name\_get to fetch its name value.
        This is used for the situations where the name\_get method is
        overridden (please do not do that)
      - no\_open: boolean, default to false. If set to true, the
        many2one will not redirect on the record when clicking on it (in
        readonly mode)
    
    <!-- end list -->
    
    ``` xml
    <field name="currency_id" options="{'no_create': True, 'no_open': True}"/>
    ```

  - list.many2one (ListFieldMany2One)  
    Default widget for many2one fields (in list view).
    
    Specialization of many2one field for list views. The main reason is
    that we need to render many2one fields (in readonly mode) as a text,
    which does not allow opening the related records.
    
      - Supported field types: *many2one*

  - many2one\_barcode (FieldMany2OneBarcode)  
    Widget for many2one fields allows to open the camera from a mobile
    device (Android/iOS) to scan a barcode.
    
    Specialization of many2one field where the user is allowed to use
    the native camera to scan a barcode. Then it uses name\_search to
    search this value.
    
    If this widget is set and user is not using the mobile application,
    it will fallback to regular many2one (FieldMany2One)
    
      - Supported field types: *many2one*

  - many2one\_avatar (Many2OneAvatar)  
    This widget is only supported on many2one fields pointing to a model
    which inherits from 'image.mixin'. In readonly, it displays the
    image of the related record next to its display\_name. Note that the
    display\_name isn't a clickable link in this case. In edit, it
    behaves exactly like the regular many2one.
    
      - Supported field types: *many2one*

  - many2one\_avatar\_user (Many2OneAvatarUser)  
    This widget is a specialization of the Many2OneAvatar. When the
    avatar is clicked, we open a chat window with the corresponding
    user. This widget can only be set on many2one fields pointing to the
    'res.users' model.
    
      - Supported field types: *many2one* (pointing to 'res.users')

  - many2one\_avatar\_employee (Many2OneAvatarEmployee)  
    Same as Many2OneAvatarUser, but for many2one fields pointing to
    'hr.employee'.
    
      - Supported field types: *many2one* (pointing to 'hr.employee')

  - kanban.many2one (KanbanFieldMany2One)  
    Default widget for many2one fields (in kanban view). We need to
    disable all editing in kanban views.
    
      - Supported field types: *many2one*

  - many2many (FieldMany2Many)  
    Default widget for many2many fields.
    
      - Supported field types: *many2many*
    
    Attributes:
    
      - mode: string, default view to display
      - domain: restrict the data to a specific domain
    
    Options:
    
      - create\_text: allow the customization of the text displayed when
        adding a new record
      - link: domain determining whether or not records can be added to
        the relation (default: True).
      - unlink: domain determining whether or not records can be removed
        from the relation (default: True).

  - many2many\_binary (FieldMany2ManyBinaryMultiFiles)  
    This widget helps the user to upload or delete one or more files at
    the same time.
    
    Note that this widget is specific to the model 'ir.attachment'.
    
      - Supported field types: *many2many*
    
    Options:
    
      - accepted\_file\_extensions: the file extension the user can pick
        from the file input dialog box (cf: `accept` attribute on
        \<input type="file"/\>)

  - many2many\_tags (FieldMany2ManyTags)  
    Display many2many as a list of tags.
    
      - Supported field types: *many2many*
    
    Options:
    
      - create: domain determining whether or not new tags can be
        created (default: True).
    
    <!-- end list -->
    
    ``` xml
    <field name="category_id" widget="many2many_tags" options="{'create': [['some_other_field', '>', 24]]}"/>
    ```
    
      - color\_field: the name of a numeric field, which should be
        present in the view. A color will be chosen depending on its
        value.
    
    <!-- end list -->
    
    ``` xml
    <field name="category_id" widget="many2many_tags" options="{'color_field': 'color'}"/>
    ```
    
      - no\_edit\_color: set to True to remove the possibility to change
        the color of the tags (default: False).
    
    <!-- end list -->
    
    ``` xml
    <field name="category_id" widget="many2many_tags" options="{'color_field': 'color', 'no_edit_color': True}"/>
    ```

  - form.many2many\_tags (FormFieldMany2ManyTags)  
    Specialization of many2many\_tags widget for form views. It has some
    extra code to allow editing the color of a tag.
    
      - Supported field types: *many2many*

  - kanban.many2many\_tags (KanbanFieldMany2ManyTags)  
    Specialization of many2many\_tags widget for kanban views.
    
      - Supported field types: *many2many*

  - many2many\_checkboxes (FieldMany2ManyCheckBoxes)  
    This field displays a list of checkboxes and allows the user to
    select a subset of the choices. Note that the number of displayed
    values is limited to 100. This limit isn't customizable. It simply
    allows to handle extreme cases where this widget is wrongly set on a
    field with a huge comodel. In those cases, a list view is more
    adequate as it allows pagination and filtering.
    
      - Supported field types: *many2many*

  - one2many (FieldOne2Many)  
    Default widget for one2many fields.
    
    It usually displays data in a sub list view, or a sub kanban view.
    
      - Supported field types: *one2many*
    
    Options:
    
      - create: domain determining whether or not related records can be
        created (default: True).
      - delete: domain determining whether or not related records can be
        deleted (default: True).
    
    <!-- end list -->
    
    ``` xml
    <field name="turtles" options="{'create': [['some_other_field', '>', 24]]}"/>
    ```
    
      - create\_text: a string that is used to customize the 'Add'
        label/text.
    
    <!-- end list -->
    
    ``` xml
    <field name="turtles" options="{\'create_text\': \'Add turtle\'}">
    ```

  - statusbar (FieldStatus)  
    This is a really specialized widget for the form views. It is the
    bar on top of many forms which represent a flow, and allow selecting
    a specific state.
    
      - Supported field types: *selection, many2one*

  - reference (FieldReference)  
    The FieldReference is a combination of a select (for the model) and
    a FieldMany2One (for its value). It allows the selection of a record
    on an arbitrary model.
    
      - Supported field types: *char, reference*

## Client actions

The idea of a client action is a customized widget that is integrated in
the web client interface, just like a *act\_window\_action*. This is
useful when you need a component that is not closely linked to an
existing view or a specific model. For example, the Discuss application
is actually a client action.

A client action is a term that has various meanings, depending on the
context:

  - from the perspective of the server, it is a record of the model
    *ir\_action*, with a field *tag* of type char
  - from the perspective of the web client, it is a widget, which
    inherit from the class AbstractAction, and is supposed to be
    registered in the action registry under the corresponding key (from
    the field char)

Whenever a menu item is associated to a client action, opening it will
simply fetch the action definition from the server, then lookup into its
action registry to get the Widget definition at the appropriate key, and
finally, it will instantiate and append the widget to the proper place
in the DOM.

### Adding a client action

A client action is a widget which will control the part of the screen
below the menu bar. It can have a control panel, if necessary. Defining
a client action can be done in two steps: implementing a new widget, and
registering the widget in the action registry.

  - Implementing a new client action.  
    This is done by creating a widget:
    
    ``` javascript
    var AbstractAction = require('web.AbstractAction');
    
    var ClientAction = AbstractAction.extend({
        hasControlPanel: true,
        ...
    });
    ```

  - Registering the client action:  
    As usual, we need to make the web client aware of the mapping
    between client actions and the actual class:
    
    ``` javascript
    var core = require('web.core');
    
    core.action_registry.add('my-custom-action', ClientAction);
    ```
    
    Then, to use the client action in the web client, we need to create
    a client action record (a record of the model `ir.actions.client`)
    with the proper `tag` attribute:
    
    ``` xml
    <record id="my_client_action" model="ir.actions.client">
        <field name="name">Some Name</field>
        <field name="tag">my-custom-action</field>
    </record>
    ```

### Using the control panel

By default, the client action does not display a control panel. In order
to do that, several steps should be done.

  - Set the *hasControlPanel* to *true*. In the widget code:
    
    ``` javascript
    var MyClientAction = AbstractAction.extend({
        hasControlPanel: true,
        loadControlPanel: true, // default: false
        ...
    });
    ```
    
    <div class="warning">
    
    <div class="title">
    
    Warning
    
    </div>
    
    when the `loadControlPanel` is set to true, the client action will
    automatically get the content of a search view or a control panel
    view. In this case, a model name should be specified like this:
    
    ``` javascript
    init: function (parent, action, options) {
        ...
        this.controlPanelParams.modelName = 'model.name';
        ...
    }
    ```
    
    </div>

  - Call the method *updateControlPanel* whenever we need to update the
    control panel. For example:
    
    ``` javascript
    var SomeClientAction = Widget.extend({
        hasControlPanel: true,
        ...
        start: function () {
            this._renderButtons();
            this._update_control_panel();
            ...
        },
        do_show: function () {
             ...
             this._update_control_panel();
        },
        _renderButtons: function () {
            this.$buttons = $(QWeb.render('SomeTemplate.Buttons'));
            this.$buttons.on('click', ...);
        },
        _update_control_panel: function () {
            this.updateControlPanel({
                cp_content: {
                   $buttons: this.$buttons,
                },
            });
        }
    ```

The `updateControlPanel` is the main method to customize the content in
controlpanel. For more information, look into the
[control\_panel\_renderer.js](%7BGITHUB_PATH%7D/addons/web/static/src/js/views/control_panel/control_panel_renderer.js#L130)
file.


---
## File: ./content/developer/reference/javascript/qweb.md

# QWeb Templates

QWeb is the primary
[templating](https://en.wikipedia.org/wiki/Template_processor) engine
used by Odoo\[1\]. It is an XML templating engine\[2\] and used mostly
to generate [HTML](https://en.wikipedia.org/wiki/HTML) fragments and
pages.

Template directives are specified as XML attributes prefixed with `t-`,
for instance `t-if` for `reference/qweb/conditionals`, with elements and
other attributes being rendered directly.

To avoid element rendering, a placeholder element `<t>` is also
available, which executes its directive but doesn't generate any output
in and of itself:

``` xml
<t t-if="condition">
    <p>Test</p>
</t>
```

will result in:

``` xml
<p>Test</p>
```

if `condition` is true, but:

``` xml
<div t-if="condition">
    <p>Test</p>
</div>
```

will result in:

``` xml
<div>
    <p>Test</p>
</div>
```

## Data output

QWeb has a primary output directive which automatically HTML-escape its
content limiting
[XSS](https://en.wikipedia.org/wiki/Cross-site_scripting) risks when
displaying user-provided content: `esc`.

`esc` takes an expression, evaluates it and prints the content:

``` xml
<p><t t-esc="value"/></p>
```

rendered with the value `value` set to `42` yields:

``` xml
<p>42</p>
```

There is one other output directive `raw` which behaves the same as
respectively `esc` but *does not HTML-escape its output*. It can be
useful to display separately constructed markup (e.g. from functions) or
already sanitized user-provided markup.

## Conditionals

QWeb has a conditional directive `if`, which evaluates an expression
given as attribute value:

``` xml
<div>
    <t t-if="condition">
        <p>ok</p>
    </t>
</div>
```

The element is rendered if the condition is true:

``` xml
<div>
    <p>ok</p>
</div>
```

but if the condition is false it is removed from the result:

``` xml
<div>
</div>
```

The conditional rendering applies to the bearer of the directive, which
does not have to be `<t>`:

``` xml
<div>
    <p t-if="condition">ok</p>
</div>
```

will give the same results as the previous example.

Extra conditional branching directives `t-elif` and `t-else` are also
available:

``` xml
<div>
    <p t-if="user.birthday == today()">Happy birthday!</p>
    <p t-elif="user.login == 'root'">Welcome master!</p>
    <p t-else="">Welcome!</p>
</div>
```

## Loops

QWeb has an iteration directive `foreach` which take an expression
returning the collection to iterate on, and a second parameter `t-as`
providing the name to use for the "current item" of the iteration:

``` xml
<t t-foreach="[1, 2, 3]" t-as="i">
    <p><t t-esc="i"/></p>
</t>
```

will be rendered as:

``` xml
<p>1</p>
<p>2</p>
<p>3</p>
```

Like conditions, `foreach` applies to the element bearing the
directive's attribute, and

``` xml
<p t-foreach="[1, 2, 3]" t-as="i">
    <t t-esc="i"/>
</p>
```

is equivalent to the previous example.

`foreach` can iterate on an array (the current item will be the current
value) or a mapping (the current item will be the current key).
Iterating on an integer (equivalent to iterating on an array between 0
inclusive and the provided integer exclusive) is still supported but
deprecated.

In addition to the name passed via `t-as`, `foreach` provides a few
other variables for various data points:

<div class="warning">

<div class="title">

Warning

</div>

`$as` will be replaced by the name passed to `t-as`

</div>

  - `{$as}_all` (deprecated)  
    the object being iterated over
    
    <div class="note">
    
    <div class="title">
    
    Note
    
    </div>
    
    This variable is only available on JavaScript QWeb, not Python.
    
    </div>

  - `{$as}_value`  
    the current iteration value, identical to `$as` for lists and
    integers, but for mappings it provides the value (where `$as`
    provides the key)

  - `{$as}_index`  
    the current iteration index (the first item of the iteration has
    index 0)

  - `{$as}_size`  
    the size of the collection if it is available

  - `{$as}_first`  
    whether the current item is the first of the iteration (equivalent
    to `{$as}_index == 0`)

  - `{$as}_last`  
    whether the current item is the last of the iteration (equivalent to
    `{$as}_index + 1 == {$as}_size`), requires the iteratee's size be
    available

  - `{$as}_parity` (deprecated)  
    either `"even"` or `"odd"`, the parity of the current iteration
    round

  - `{$as}_even` (deprecated)  
    a boolean flag indicating that the current iteration round is on an
    even index

  - `{$as}_odd` (deprecated)  
    a boolean flag indicating that the current iteration round is on an
    odd index

These extra variables provided and all new variables created into the
`foreach` are only available in the scope of the `foreach`. If the
variable exists outside the context of the `foreach`, the value is
copied at the end of the foreach into the global context.

``` xml
<t t-set="existing_variable" t-value="False"/>
<!-- existing_variable now False -->

<p t-foreach="[1, 2, 3]" t-as="i">
    <t t-set="existing_variable" t-value="True"/>
    <t t-set="new_variable" t-value="True"/>
    <!-- existing_variable and new_variable now True -->
</p>

<!-- existing_variable always True -->
<!-- new_variable undefined -->
```

## attributes

QWeb can compute attributes on-the-fly and set the result of the
computation on the output node. This is done via the `t-att` (attribute)
directive which exists in 3 different forms:

  - `t-att-{$name}`  
    an attribute called `$name` is created, the attribute value is
    evaluated and the result is set as the attribute's value:
    
    ``` xml
    <div t-att-a="42"/>
    ```
    
    will be rendered as:
    
    ``` xml
    <div a="42"></div>
    ```

  - `t-attf-{$name}`  
    same as previous, but the parameter is a `format string` instead of
    just an expression, often useful to mix literal and non-literal
    string (e.g. classes):
    
    ``` xml
    <t t-foreach="[1, 2, 3]" t-as="item">
        <li t-attf-class="row {{ (item_index % 2 === 0) ? 'even' : 'odd' }}">
            <t t-esc="item"/>
        </li>
    </t>
    ```
    
    will be rendered as:
    
    ``` xml
    <li class="row even">1</li>
    <li class="row odd">2</li>
    <li class="row even">3</li>
    ```

  - `t-att=mapping`  
    if the parameter is a mapping, each (key, value) pair generates a
    new attribute and its value:
    
    ``` xml
    <div t-att="{'a': 1, 'b': 2}"/>
    ```
    
    will be rendered as:
    
    ``` xml
    <div a="1" b="2"></div>
    ```

  - `t-att=pair`  
    if the parameter is a pair (tuple or array of 2 element), the first
    item of the pair is the name of the attribute and the second item is
    the value:
    
    ``` xml
    <div t-att="['a', 'b']"/>
    ```
    
    will be rendered as:
    
    ``` xml
    <div a="b"></div>
    ```

## setting variables

QWeb allows creating variables from within the template, to memoize a
computation (to use it multiple times), give a piece of data a clearer
name, ...

This is done via the `set` directive, which takes the name of the
variable to create. The value to set can be provided in two ways:

  - a `t-value` attribute containing an expression, and the result of
    its evaluation will be set:
    
    ``` xml
    <t t-set="foo" t-value="2 + 1"/>
    <t t-esc="foo"/>
    ```
    
    will print `3`

  - if there is no `t-value` attribute, the node's body is rendered and
    set as the variable's value:
    
    ``` xml
    <t t-set="foo">
        <li>ok</li>
    </t>
    <t t-esc="foo"/>
    ```
    
    will generate `&lt;li&gt;ok&lt;/li&gt;` (the content is escaped as
    we used the `esc` directive)
    
    <div class="note">
    
    <div class="title">
    
    Note
    
    </div>
    
    using the result of this operation is a significant use-case for the
    `raw` directive.
    
    </div>

## calling sub-templates

QWeb templates can be used for top-level rendering, but they can also be
used from within another template (to avoid duplication or give names to
parts of templates) using the `t-call` directive:

``` xml
<t t-call="other-template"/>
```

This calls the named template with the execution context of the parent,
if `other_template` is defined as:

``` xml
<p><t t-value="var"/></p>
```

the call above will be rendered as `<p/>` (no content), but:

``` xml
<t t-set="var" t-value="1"/>
<t t-call="other-template"/>
```

will be rendered as `<p>1</p>`.

However this has the problem of being visible from outside the `t-call`.
Alternatively, content set in the body of the `call` directive will be
evaluated *before* calling the sub-template, and can alter a local
context:

``` xml
<t t-call="other-template">
    <t t-set="var" t-value="1"/>
</t>
<!-- "var" does not exist here -->
```

The body of the `call` directive can be arbitrarily complex (not just
`set` directives), and its rendered form will be available within the
called template as a magical `0` variable:

``` xml
<div>
    This template was called with content:
    <t t-raw="0"/>
</div>
```

being called thus:

``` xml
<t t-call="other-template">
    <em>content</em>
</t>
```

will result in:

``` xml
<div>
    This template was called with content:
    <em>content</em>
</div>
```

## Python

### Exclusive directives

#### Asset bundles

<div class="todo">

have fme write these up because I've no idea how they work

</div>

#### "smart records" fields formatting

The `t-field` directive can only be used when performing field access
(`a.b`) on a "smart" record (result of the `browse` method). It is able
to automatically format based on field type, and is integrated in the
website's rich text editing.

`t-options` can be used to customize fields, the most common option is
`widget`, other options are field- or widget-dependent.

### Debugging

  - `t-debug`  
    invokes a debugger using PDB's `set_trace` API. The parameter should
    be the name of a module, on which a `set_trace` method is called:
    
    ``` xml
    <t t-debug="pdb"/>
    ```
    
    is equivalent to `importlib.import_module("pdb").set_trace()`

### Helpers

#### Request-based

Most Python-side uses of QWeb are in controllers (and during HTTP
requests), in which case templates stored in the database (as `views
<reference/views/qweb>`) can be trivially rendered by calling
`odoo.http.HttpRequest.render`:

``` python
response = http.request.render('my-template', {
    'context_value': 42
})
```

This automatically creates a `~odoo.http.Response` object which can be
returned from the controller (or further customized to suit).

#### View-based

At a deeper level than the previous helper is the `render` method on
`ir.ui.view`:

<div id="reference/qweb/javascript">

<div class="todo">

the members below are no longer relevant, section to rewrite

</div>

</div>

## Javascript

### Exclusive directives

#### Defining templates

The `t-name` directive can only be placed at the top-level of a template
file (direct children to the document root):

``` xml
<templates>
    <t t-name="template-name">
        <!-- template code -->
    </t>
</templates>
```

It takes no other parameter, but can be used with a `<t>` element or any
other. With a `<t>` element, the `<t>` should have a single child.

The template name is an arbitrary string, although when multiple
templates are related (e.g. called sub-templates) it is customary to use
dot-separated names to indicate hierarchical relationships.

#### Template inheritance

  - Template inheritance is used to either:
    
      - Alter existing templates in-place, e.g. to add information to
        templates

  - created by other modules.
    
      - Create a new template from a given parent template

  - Template inheritance is performed via the use of two directives:
    
      - `t-inherit` which is the name of the template to inherit from,
      - `t-inherit-mode` which is the behaviour of the inheritance: it
        can either be set to `primary` to create a new child template
        from the parented one or to `extension` to alter the parent
        template in place.

An optional `t-name` directive can also be specified. It will be the
name of the newly created template if used in primary mode, else it will
be added as a comment on the transformed template to help retrace
inheritances.

For the inheritance itself, the changes are done using xpaths
directives. See the
[XPATH](https://developer.mozilla.org/en-US/docs/Web/XPath)
documentation for the complete set of available instructions.

Primary inheritance (child template):

``` xml
<t t-name="child.template" t-inherit="base.template" t-inherit-mode="primary">
    <xpath expr="//ul" position="inside">
        <li>new element</li>
    </xpath>
</t>
```

Extension inheritance (in-place transformation):

``` xml
<t t-inherit="base.template" t-inherit-mode="extension">
    <xpath expr="//tr[1]" position="after">
        <tr><td>new cell</td></tr>
    </xpath>
</t>
```

#### Old inheritance mechanism (deprecated)

Template inheritance is performed via the `t-extend` directive which
takes the name of the template to alter as parameter.

The directive `t-extend` will act as a primary inheritance when combined
with `t-name` and as an extension one when used alone.

In both cases the alteration is then performed with any number of
`t-jquery` sub-directives:

``` xml
<t t-extend="base.template">
    <t t-jquery="ul" t-operation="append">
        <li>new element</li>
    </t>
</t>
```

The `t-jquery` directives takes a [CSS
selector](https://api.jquery.com/category/selectors/). This selector is
used on the extended template to select *context nodes* to which the
specified `t-operation` is applied:

  - `append`  
    the node's body is appended at the end of the context node (after
    the context node's last child)

  - `prepend`  
    the node's body is prepended to the context node (inserted before
    the context node's first child)

  - `before`  
    the node's body is inserted right before the context node

  - `after`  
    the node's body is inserted right after the context node

  - `inner`  
    the node's body replaces the context node's children

  - `replace`  
    the node's body is used to replace the context node itself

  - `attributes`  
    the nodes's body should be any number of `attribute` elements, each
    with a `name` attribute and some textual content, the named
    attribute of the context node will be set to the specified value
    (either replaced if it already existed or added if not)

  - No operation  
    if no `t-operation` is specified, the template body is interpreted
    as javascript code and executed with the context node as `this`
    
    <div class="warning">
    
    <div class="title">
    
    Warning
    
    </div>
    
    while much more powerful than other operations, this mode is also
    much harder to debug and maintain, it is recommended to avoid it
    
    </div>

### debugging

The javascript QWeb implementation provides a few debugging hooks:

  - `t-log`  
    takes an expression parameter, evaluates the expression during
    rendering and logs its result with `console.log`:
    
    ``` xml
    <t t-set="foo" t-value="42"/>
    <t t-log="foo"/>
    ```
    
    will print `42` to the console

  - `t-debug`  
    triggers a debugger breakpoint during template rendering:
    
    ``` xml
    <t t-if="a_test">
        <t t-debug=""/>
    </t>
    ```
    
    will stop execution if debugging is active (exact condition depend
    on the browser and its development tools)

  - `t-js`  
    the node's body is javascript code executed during template
    rendering. Takes a `context` parameter, which is the name under
    which the rendering context will be available in the `t-js`'s body:
    
    ``` xml
    <t t-set="foo" t-value="42"/>
    <t t-js="ctx">
        console.log("Foo is", ctx.foo);
    </t>
    ```

### Helpers

### API

1.  although it uses a few others, either for historical reasons or
    because they remain better fits for the use case. Odoo 9.0 still
    depends on [Jinja](http://jinja.pocoo.org) and
    [Mako](https://www.makotemplates.org).

2.  it is similar in that to [Genshi](https://genshi.edgewall.org),
    although it does not use (and has no support for) [XML
    namespaces](https://en.wikipedia.org/wiki/XML_namespace)


---
## File: ./content/developer/reference/javascript/mobile.md

# Mobile JavaScript

## Introduction

In Odoo 10.0 we released a mobile app which allows you to access all
**Odoo apps** (even your customized modules).

The application is a combination of **Odoo Web** and **Native Mobile
components**. In other words it is a Odoo Web instance loaded inside a
native, mobile, WebView container.

This page documents how you can access mobile native components like
Camera, Vibration, Notification and Toast through Odoo Web (via
JavaScript). For this, you do not need to be a mobile developer, if you
know Odoo JavaScript API you can access all available mobile features.

<div class="warning">

<div class="title">

Warning

</div>

These features work with **Odoo Enterprise 10.0+** only

</div>

## How does it work?

Internal workings of the mobile application:

![image](mobile/mobile_working.jpg)

Of course, it is a web page that loads on a Mobile Native Web container.
But it is integrated in such a way that you can access native resources
from your web JavaScript.

WebPages (Odoo Web) is on the top of each layer, where the second layer
is a Bridge between Odoo Web (JS) and the native mobile components.

When any call from JavaScript is triggered it passes through Bridge and
Bridge passes it to the native invoker to perform that action.

When the native component has done its work, it is passed to the Bridge
again and you get the output in JavaScript.

Process time taken by the Native component depends on what you are
requesting from the Native resources. For example the Camera or GPS
Location.

## How to use it?

Just like the Odoo Web Framework, the Mobile API can be used anywhere by
getting the object from **web\_mobile.rpc**

![image](mobile/odoo_mobile_api.png)

The mobile RPC object provides a list of methods that are available
(this only works with the mobile app).

Check if the method is available and then execute it.

### Methods

<div class="note">

<div class="title">

Note

</div>

Each of the methods returns a JQuery Deferred object which returns a
data JSON dictionary

</div>

#### Show Toast in device

A toast provides simple feedback about an operation in a small popup. It
only fills the amount of space required for the message and the current
activity remains visible and interactive.

``` javascript
mobile.methods.showToast({'message': 'Message sent'});
```

![image](mobile/toast.png)

#### Vibrating device

Vibrate mobile device with given duration.

``` javascript
mobile.methods.vibrate({'duration': 100});
```

#### Show snackbar with action

Snackbars provide lightweight feedback about an operation. They show a
brief message at the bottom of the screen on mobile or in the lower left
corner on larger devices. Snackbars appear above all the other elements
on the screen and only one can be displayed at a time.

``` javascript
mobile.methods.showSnackBar({'message': 'Message is deleted', 'btn_text': 'Undo'}).then(function(result){
    if(result){
        // Do undo operation
    }else{
        // Snack Bar dismissed
    }
});
```

![image](mobile/snackbar.png)

#### Showing notification

A notification is a message you can display to the user outside of your
application's normal UI. When you tell the system to issue a
notification, it first appears as an icon in the notification area. To
see the details of the notification, the user opens the notification
drawer. Both the notification area and the notification drawer are
system-controlled areas that the user can view at any time.

``` javascript
mobile.showNotification({'title': 'Simple Notification', 'message': 'This is a test for a simple notification'})
```

![image](mobile/mobile_notification.png)

#### Create contact in device

Create a new device contact with the given contact details.

``` javascript
var contact = {
    'name': 'Michel Fletcher',
    'mobile': '9999999999',
    'phone': '7954856587',
    'fax': '765898745',
    'email': 'michel.fletcher@agrolait.example.com',
    'website': 'http://www.agrolait.com',
    'street': '69 rue de Namur',
    'street2': false,
    'country_id': [21, 'Belgium'],
    'state_id': false,
    'city': 'Wavre',
    'zip': '1300',
    'parent_id': [8, 'Agrolait'],
    'function': 'Analyst',
    'image': '<<BASE 64 Image Data>>'
}

mobile.methods.addContact(contact);
```

![image](mobile/mobile_contact_create.png)

#### Scanning barcodes

The barcode API detects barcodes in real-time, on the device, in any
orientation.

The barcode API can read the following barcode formats:

  - 1D barcodes: EAN-13, EAN-8, UPC-A, UPC-E, Code-39, Code-93,
    Code-128, ITF, Codabar
  - 2D barcodes: QR Code, Data Matrix, PDF-417, AZTEC

<!-- end list -->

``` javascript
mobile.methods.scanBarcode().then(function(code){
    if(code){
        // Perform operation with the scanned code
    }
});
```

#### Switching account in device

Use switchAccount to switch from one account to another on the device.

``` javascript
mobile.methods.switchAccount();
```

![image](mobile/mobile_switch_account.png)


---
## File: ./content/developer/reference/addons.md

  - nosearch

# Server Addons

<div class="toctree" data-titlesonly="">

addons/orm addons/data addons/actions addons/views addons/module
addons/reports addons/security addons/testing addons/http addons/mixins

</div>


---
## File: ./content/developer/reference/extract_api.md

# Extract API

Odoo provides a service to automate the processing of documents of type
**invoices**, **expenses** or **resumes**.

The service scans documents using an `OCR (Optical Character
Recognition)` engine and then uses `AI(Artificial Intelligence)`-based
algorithms to extract fields of interest such as the total, due date, or
invoice lines for *invoices*, the total, date for *expenses*, or the
name, email, phone number for *resumes*.

This service is a paid service. Each document processing will cost you
one credit. Credits can be bought on
[iap.odoo.com](https://iap.odoo.com/iap/in-app-services/259?sortby=date).

You can either use this service directly in the Accounting, Expense, or
Recruitment App or through the API. The Extract API, which is detailed
in the next section, allows you to integrate our service directly into
your own projects.

## Overview

The extract API uses the
[JSON-RPC2](https://www.jsonrpc.org/specification) protocol; its
endpoint routes are located at
<span class="title-ref">https://extract.api.odoo.com</span>.

### Version

The version of the Extract API is specified in the route.

  - The latest versions are:
    
      - invoices: 122
      - expenses: 132
      - applicant: 102

### Flow

The flow is the same for each document type.

1.  Call `/parse <extract_api/parse>` to submit your documents (one call
    for each document). On success, you receive a
    <span class="title-ref">document\_token</span> in the response.

2.  You then have to regularly poll `/get_result
    <extract_api/get_result>` to get the document's parsing status.  
    Alternatively, you can provide a
    <span class="title-ref">webhook\_url</span> at the time of the call
    to `/parse <extract_api/parse>` and you will be notified (via a POST
    request) when the result is ready.

The HTTP POST method should be used for all of them. A python
implementation of the full flow for invoices can be found `here
<extract_api/implementation.py>` and a token for integration testing is
provided in the `integration testing section
<latestextract_api/integration_testing>`.

## Parse

Request the processing of a document from the OCR. The route will return
a <span class="title-ref">document\_token</span>, you can use it to
obtain the result of your request.

### Routes

>   - /api/extract/invoice/2/parse
>   - /api/extract/expense/2/parse
>   - /api/extract/applicant/2/parse

### Request

<div class="rst-class">

o-definition-list

</div>

  - `jsonrpc` (required)  
    see [JSON-RPC2](https://www.jsonrpc.org/specification)

  - `method` (required)  
    see [JSON-RPC2](https://www.jsonrpc.org/specification)

  - `id` (required)  
    see [JSON-RPC2](https://www.jsonrpc.org/specification)

  - `params`
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `account_token` (required)  
        The token of the account from which credits will be taken. Each
        successful call costs one token.
    
      - `version` (required)  
        The version will determine the format of your requests and the
        format of the server response. You should use the `latest
        version available <extract_api/version>`.
    
      - `documents` (required)  
        The document must be provided as a string in the ASCII encoding.
        The list should contain only one string. If multiple strings are
        provided only the first string corresponding to a pdf will be
        processed. If no pdf is found, the first string will be
        processed. This field is a list only for legacy reasons. The
        supported extensions are *pdf*, *png*, *jpg* and *bmp*.
    
      - `dbuuid` (optional)  
        Unique identifier of the Odoo database.
    
      - `webhook_url` (optional)  
        A webhook URL can be provided. An empty POST request will be
        sent to `webhook_url/document_token` when the result is ready.
    
      - `user_infos` (optional)  
        Information concerning the person sending the document to the
        extract service. It can be the client or the supplier (depending
        on the `perspective`). This information is not required in order
        for the service to work but it greatly improves the quality of
        the result.
        
        <div class="rst-class">
        
        o-definition-list
        
        </div>
        
          - `user_company_vat` (optional)  
            VAT number of the user.
        
          - `user_company_name` (optional)  
            Name of the user’s company.
        
          - `user_company_country_code` (optional)  
            Country code of the user. Format: [ISO3166
            alpha-2](https://www.iban.com/country-codes).
        
          - `user_lang` (optional)  
            The user language. Format: *language\_code + \_ + locale*
            (e.g. fr\_FR, en\_US).
        
          - `user_email` (optional)  
            The user email.
        
          - `purchase_order_regex` (optional)  
            Regex for purchase order identification. Will default to
            Odoo PO format if not provided.
        
          - `perspective` (optional)
            
            <div class="rst-class">
            
            o-definition-list
            
            </div>
            
            Can be `client` or `supplier`. This field is useful for
            invoices only. `client` means that the user information
            provided are related to the client of the invoice.
            `supplier` means that it's related to the supplier. If not
            provided, client will be used.

<!-- end list -->

``` js
{
    "jsonrpc": "2.0",
    "method": "call",
    "params": {
        "account_token": string,
        "version": int,
        "documents": [string],
        "dbuuid": string,
        "webhook_url": string,
        "user_infos": {
            "user_company_vat": string,
            "user_company_name": string,
            "user_company_country_code": string,
            "user_lang": string,
            "user_email": string,
            "purchase_order_regex": string,
            "perspective": string,
        },
    },
    "id": string,
}
```

<div class="note">

<div class="title">

Note

</div>

The `user_infos` parameter is optional but it greatly improves the
quality of the result, especially for invoices. The more information you
can provide, the better.

</div>

### Response

<div class="rst-class">

o-definition-list

</div>

  - `jsonrpc`  
    see [JSON-RPC2](https://www.jsonrpc.org/specification)

  - `id`  
    see [JSON-RPC2](https://www.jsonrpc.org/specification)

  - `result`
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `status`  
        The code indicating the status of the request. See the table
        below.
    
      - `status_msg`  
        A string giving verbose details about the request status.
    
      - `document_token`  
        Only present if the request is successful.

| status                                                     | status\_msg                                                   |
| ---------------------------------------------------------- | ------------------------------------------------------------- |
| <span class="title-ref">success</span>                     | Success                                                       |
| <span class="title-ref">error\_unsupported\_version</span> | Unsupported version                                           |
| <span class="title-ref">error\_internal</span>             | An error occurred                                             |
| <span class="title-ref">error\_no\_credit</span>           | You don't have enough credit                                  |
| <span class="title-ref">error\_unsupported\_format</span>  | Unsupported file format                                       |
| <span class="title-ref">error\_maintenance</span>          | Server is currently under maintenance, please try again later |

``` js
{
    "jsonrpc": "2.0",
    "id": string,
    "result": {
        "status": string,
        "status_msg": string,
        "document_token": string,
    }
}
```

<div class="note">

<div class="title">

Note

</div>

The API does not actually use the JSON-RPC error scheme. Instead the API
has its own error scheme bundled inside a successful JSON-RPC result.

</div>

## Get results

### Routes

>   - /api/extract/invoice/2/get\_result
>   - /api/extract/expense/2/get\_result
>   - /api/extract/applicant/2/get\_result

### Request

<div class="rst-class">

o-definition-list

</div>

  - `jsonrpc` (required)  
    see [JSON-RPC2](https://www.jsonrpc.org/specification)

  - `method` (required)  
    see [JSON-RPC2](https://www.jsonrpc.org/specification)

  - `id` (required)  
    see [JSON-RPC2](https://www.jsonrpc.org/specification)

  - `params`
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `version` (required)  
        The version should match the version passed to the `/parse
        <extract_api/parse>` request.
    
      - `document_token` (required)  
        The `document_token` for which you want to get the current
        parsing status.
    
      - `account_token` (required)  
        The token of the account that was used to submit the document.

<!-- end list -->

``` js
{
    "jsonrpc": "2.0",
    "method": "call",
    "params": {
        "version": int,
        "document_token": int,
        "account_token": string,
    },
    "id": string,
}
```

### Response

When getting the results from the parse, the detected field vary a lot
depending on the type of document. Each response is a list of
dictionaries, one for each document. The keys of the dictionary are the
name of the field and the value is the value of the field.

<div class="rst-class">

o-definition-list

</div>

  - `jsonrpc`  
    see [JSON-RPC2](https://www.jsonrpc.org/specification)

  - `id`  
    see [JSON-RPC2](https://www.jsonrpc.org/specification)

  - `result`
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
      - `status`  
        The code indicating the status of the request. See the table
        below.
    
      - `status_msg`  
        A string giving verbose details about the request status.
    
      - `results`  
        Only present if the request is successful.
        
        <div class="rst-class">
        
        o-definition-list
        
        </div>
        
          - `full_text_annotation`  
            Contains the unprocessed full result from the OCR for the
            document

| status                                                            | status\_msg                                                   |
| ----------------------------------------------------------------- | ------------------------------------------------------------- |
| <span class="title-ref">success</span>                            | Success                                                       |
| <span class="title-ref">error\_unsupported\_version</span>        | Unsupported version                                           |
| <span class="title-ref">error\_internal</span>                    | An error occurred                                             |
| <span class="title-ref">error\_maintenance</span>                 | Server is currently under maintenance, please try again later |
| <span class="title-ref">error\_document\_not\_found</span>        | The document could not be found                               |
| <span class="title-ref">error\_unsupported\_size</span>           | The document has been rejected because it is too small        |
| <span class="title-ref">error\_no\_page\_count</span>             | Unable to get page count of the PDF file                      |
| <span class="title-ref">error\_pdf\_conversion\_to\_images</span> | Couldn't convert the PDF to images                            |
| <span class="title-ref">error\_password\_protected</span>         | The PDF file is protected by a password                       |
| <span class="title-ref">error\_too\_many\_pages</span>            | The document contains too many pages                          |

``` js
{
    "jsonrpc": "2.0",
    "id": string,
    "result": {
        "status": string,
        "status_msg": string,
        "results": [
            {
                "full_text_annotation": string,
                "feature_1_name": feature_1_result,
                "feature_2_name": feature_2_result,
                ...
            },
            ...
        ]
    }
}
```

#### Common fields

##### `feature_result`

Each field of interest we want to extract from the document such as the
total or the due date are also called **features**. An exhaustive list
of all the extracted features associated to a type of document can be
found in the sections below.

For each feature, we return a list of candidates and we spotlight the
candidate our model predicts to be the best fit for the feature.

<div class="rst-class">

o-definition-list

</div>

  - `selected_value` (optional)  
    The best candidate for this feature.

  - `selected_values` (optional)  
    The best candidates for this feature.

  - `candidates` (optional)  
    List of all the candidates for this feature ordered by decreasing
    confidence score.

<!-- end list -->

``` js
"feature_name": {
    "selected_value": candidate_12,
    "candidates": [candidate_12, candidate_3, candidate_4, ...]
}
```

##### candidate

For each candidate we give its representation and position in the
document. Candidates are sorted by decreasing order of suitability.

<div class="rst-class">

o-definition-list

</div>

  - `content`  
    Representation of the candidate.

  - `coords`
    
    <div class="rst-class">
    
    o-definition-list
    
    </div>
    
    `[center_x, center_y, width, height, rotation_angle]`. The position
    and dimensions are relative to the size of the page and are
    therefore between 0 and 1. The angle is a clockwise rotation
    measured in degrees.

  - `page`  
    Page of the original document on which the candidate is located
    (starts at 0).

<!-- end list -->

``` js
"candidate": [
    {
        "content": string|float,
        "coords": [float, float, float, float, float],
        "page": int
    },
    ...
]
```

#### Invoices

Invoices are complex and can have a lot of different fields. The
following table gives an exhaustive list of all the fields we can
extract from an invoice.

<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="header">
<th>Feature name</th>
<th>Specifities</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>SWIFT_code</code></td>
<td><p><code>content</code> is a dictionary encoded as a string.</p>
<p>It contains information about the detected SWIFT code (or <a href="https://www.iso9362.org/isobic/overview.html">BIC</a>).</p>
<p>Keys:</p>
<div class="rst-class">
<p>o-definition-list</p>
</div>
<dl>
<dt><code>bic</code></dt>
<dd><p>detected BIC (string).</p>
</dd>
<dt><code>name</code> (optional)</dt>
<dd><p>bank name (string).</p>
</dd>
<dt><code>country_code</code></dt>
<dd><p>ISO3166 alpha-2 country code of the bank (string).</p>
</dd>
<dt><code>city</code> (optional)</dt>
<dd><p>city of the bank (string).</p>
</dd>
<dt><code>verified_bic</code></dt>
<dd><p>True if the BIC has been found in our DB (bool).</p>
</dd>
</dl>
<p>Name and city are present only if verified_bic is true.</p></td>
</tr>
<tr class="even">
<td><code>iban</code></td>
<td><code>content</code> is a string</td>
</tr>
<tr class="odd">
<td><code>aba</code></td>
<td><code>content</code> is a string</td>
</tr>
<tr class="even">
<td><code>VAT_Number</code></td>
<td><p><code>content</code> is a string</p>
<p>Depending on the value of perspective in the user_infos, this will be the VAT number of the supplier or the client. If perspective is client, it'll be the supplier's VAT number. If it's supplier, it's the client's VAT number.</p></td>
</tr>
<tr class="odd">
<td><code>qr-bill</code></td>
<td><code>content</code> is a string</td>
</tr>
<tr class="even">
<td><code>payment_ref</code></td>
<td><code>content</code> is a string</td>
</tr>
<tr class="odd">
<td><code>purchase_order</code></td>
<td><p><code>content</code> is a string</p>
<p>Uses <code>selected_values</code> instead of <code>selected_value</code></p></td>
</tr>
<tr class="even">
<td><code>country</code></td>
<td><code>content</code> is a string</td>
</tr>
<tr class="odd">
<td><code>currency</code></td>
<td><code>content</code> is a string</td>
</tr>
<tr class="even">
<td><code>date</code></td>
<td><p><code>content</code> is a string</p>
<p>Format : <em>YYYY-MM-DD</em></p></td>
</tr>
<tr class="odd">
<td><code>due_date</code></td>
<td>Same as for <code>date</code></td>
</tr>
<tr class="even">
<td><code>total_tax_amount</code></td>
<td><code>content</code> is a float</td>
</tr>
<tr class="odd">
<td><code>invoice_id</code></td>
<td><code>content</code> is a string</td>
</tr>
<tr class="even">
<td><code>subtotal</code></td>
<td><code>content</code> is a float</td>
</tr>
<tr class="odd">
<td><code>total</code></td>
<td><code>content</code> is a float</td>
</tr>
<tr class="even">
<td><code>supplier</code></td>
<td><code>content</code> is a string</td>
</tr>
<tr class="odd">
<td><code>client</code></td>
<td><code>content</code> is a string</td>
</tr>
<tr class="even">
<td><code>email</code></td>
<td><code>content</code> is a string</td>
</tr>
<tr class="odd">
<td><code>website</code></td>
<td><code>content</code> is a string</td>
</tr>
</tbody>
</table>

##### `feature_result` for the `invoice_lines` feature

It follows a more specific structure. It is basically a list of
dictionaries where each dictionary represents an invoice line. Each
value follows a `latestextract_api/get_result/feature_result` structure.

``` js
"invoice_lines": [
    {
        "description": feature_result,
        "discount": feature_result,
        "product": feature_result,
        "quantity": feature_result,
        "subtotal": feature_result,
        "total": feature_result,
        "taxes": feature_result,
        "total": feature_result,
        "unit": feature_result,
        "unit_price": feature_result
    },
    ...
]
```

#### Expense

The expenses are less complex than invoices. The following table gives
an exhaustive list of all the fields we can extract from an expense
report.

| Feature name  | Specifities           |
| ------------- | --------------------- |
| `description` | `content` is a string |
| `country`     | `content` is a string |
| `date`        | `content` is a string |
| `total`       | `content` is a float  |
| `currency`    | `content` is a string |

#### Applicant

This third type of document is meant for processing resumes. The
following table gives an exhaustive list of all the fields we can
extract from a resume.

| Feature name | Specifities           |
| ------------ | --------------------- |
| `name`       | `content` is a string |
| `email`      | `content` is a string |
| `phone`      | `content` is a string |
| `mobile`     | `content` is a string |

## Integration Testing

You can test your integration by using *integration\_token* as
`account_token` in the `/parse <extract_api/parse>` request.

Using this token put you in test mode and allows you to simulate the
entire flow without really parsing a document and without being billed
one credit for each successful **document** parsing.

The only technical differences in test mode is that the document you
send is not parsed by the system and that the response you get from
`/get_result <extract_api/get_result>` is a hard-coded one.

A python implementation of the full flow for invoices can be found `here
<extract_api/implementation.py>`.


---
## File: ./content/contributing/configure_github_account.md

[Generate a new SSH key and register it on your GitHub
account](https://docs.github.com/en/authentication/connecting-to-github-with-ssh).


---
## File: ./content/contributing/documentation/changes_approved.md

Once your changes are approved, the reviewer merges them and they appear
online the next day\!


---
## File: ./content/contributing/documentation/rst_cheat_sheet.md

  - custom-css  
    showcase\_tables.css

# RST cheat sheet

## Headings

For each formatting line (e.g., `===`), write as many symbols (`=`) as
there are characters in the header.  
The symbols used for the formatting are, in fact, not important. Only
the order in which they are written matters, as it determines the size
of the decorated heading. This means that you may encounter different
heading formatting and in a different order, in which case you should
follow the formatting in place in the document. In any other case, use
the formatting shown below.

<table style="width:53%;">
<colgroup>
<col style="width: 20%" />
<col style="width: 31%" />
</colgroup>
<thead>
<tr class="header">
<th>Heading size</th>
<th>Formatting</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>H1</td>
<td><pre class="text"><code>=======
Heading
=======</code></pre></td>
</tr>
<tr class="even">
<td>H2</td>
<td><pre class="text"><code>Heading
=======</code></pre></td>
</tr>
<tr class="odd">
<td>H3</td>
<td><pre class="text"><code>Heading
-------</code></pre></td>
</tr>
<tr class="even">
<td>H4</td>
<td><pre class="text"><code>Heading
~~~~~~~</code></pre></td>
</tr>
<tr class="odd">
<td>H5</td>
<td><pre class="text"><code>Heading
*******</code></pre></td>
</tr>
<tr class="even">
<td>H6</td>
<td><pre class="text"><code>Heading
^^^^^^^</code></pre></td>
</tr>
</tbody>
</table>

<div class="important">

<div class="title">

Important

</div>

Each document must have **exactly one H1 heading**. No less, no more.

</div>

## Markups

### Emphasis (italic)

To emphasize a part of the text. The text is rendered in italic.

<table>
<tbody>
<tr class="odd">
<td>Fill out the information <em>before</em> saving the form.</td>
</tr>
<tr class="even">
<td><pre class="text"><code>Fill out the information *before* saving the form.</code></pre></td>
</tr>
</tbody>
</table>

### Strong emphasis (bold)

To emphasize a part of the text. The text is rendered in bold.

<table>
<tbody>
<tr class="odd">
<td>A <strong>subdomain</strong> is a domain that is a part of another domain.</td>
</tr>
<tr class="even">
<td><pre class="text"><code>A **subdomain** is a domain that is a part of another domain.</code></pre></td>
</tr>
</tbody>
</table>

### Technical term (literal)

To write a technical term or a specific value to insert. The text is
rendered in literal.

<table>
<tbody>
<tr class="odd">
<td>Insert the IP address of your printer, for example, <span class="title-ref">192.168.1.25</span>.</td>
</tr>
<tr class="even">
<td><pre class="text"><code>Insert the IP address of your printer, for example, `192.168.1.25`.</code></pre></td>
</tr>
</tbody>
</table>

### Definitions

Use the <span class="title-ref">dfn</span> markup to define a term.

<table>
<tbody>
<tr class="odd">
<td>The documentation is written in RST and needs to be built (<code class="interpreted-text" role="dfn">converted to HTML</code>) to display nicely.</td>
</tr>
<tr class="even">
<td><pre class="text"><code>The documentation is written in RST and needs to be built (:dfn:`converted to HTML`) to display
nicely.</code></pre></td>
</tr>
</tbody>
</table>

### Abbreviations

Use the <span class="title-ref">abbr</span> markup to write a
self-defining abbreviation that is displayed as a tooltip.

<table>
<tbody>
<tr class="odd">
<td>Odoo uses <code class="interpreted-text" role="abbr">OCR (optical character recognition)</code> and artificial intelligence technologies to recognize the content of the documents.</td>
</tr>
<tr class="even">
<td><pre class="text"><code>Odoo uses :abbr:`OCR (optical character recognition)` and artificial intelligence technologies to
recognize the content of the documents.</code></pre></td>
</tr>
</tbody>
</table>

### `GUI (graphical user interface)` element

Use the <span class="title-ref">guilabel</span> markup to identify any
text of the interactive user interface (e.g., button labels, view
titles, field names, lists items, ...).

<table>
<tbody>
<tr class="odd">
<td>Update your credentials, then click on <code class="interpreted-text" role="guilabel">Save</code>.</td>
</tr>
<tr class="even">
<td><pre class="text"><code>Update your credentials, then click on :guilabel:`Save`.</code></pre></td>
</tr>
</tbody>
</table>

### Menu selection

Use the <span class="title-ref">menuselection</span> markup to guide the
user through a sequence of menus.

<table>
<tbody>
<tr class="odd">
<td>To review your sales performance, go to <code class="interpreted-text" role="menuselection">Sales --&gt; Reporting --&gt; Dashboard</code>.</td>
</tr>
<tr class="even">
<td><pre class="text"><code>To review your sales performance, go to :menuselection:`Sales --&gt; Reporting --&gt; Dashboard`.</code></pre></td>
</tr>
</tbody>
</table>

### File

Use the <span class="title-ref">file</span> markup to indicate a file
path or name.

<table>
<tbody>
<tr class="odd">
<td>Create redirections with the <code class="interpreted-text" role="file">redirects.txt</code> file at the root of the repository.</td>
</tr>
<tr class="even">
<td><pre class="text"><code>Create redirections with the :file:`redirects.txt` file at the root of the repository.</code></pre></td>
</tr>
</tbody>
</table>

### Command

Use the <span class="title-ref">command</span> markup to highlight a
command.

<table>
<tbody>
<tr class="odd">
<td>Run the command <code class="interpreted-text" role="command">make clean html</code> to delete existing built files and build the documentation to HTML.</td>
</tr>
<tr class="even">
<td><pre class="text"><code>Run the command :command:`make clean html` to delete existing built files and build the
documentation to HTML.</code></pre></td>
</tr>
</tbody>
</table>

## Lists

### Bulleted list

<table>
<tbody>
<tr class="odd">
<td><ul>
<li>This is a bulleted list.</li>
<li>It has two items, the second item uses two lines.</li>
</ul></td>
</tr>
<tr class="even">
<td><pre class="text"><code>- This is a bulleted list.
- It has two items, the second
  item uses two lines.</code></pre></td>
</tr>
</tbody>
</table>

### Numbered list

<table>
<tbody>
<tr class="odd">
<td><ol>
<li>This is a numbered list.</li>
<li>Numbering is automatic.</li>
</ol></td>
</tr>
<tr class="even">
<td><pre class="text"><code>#. This is a numbered list.
#. Numbering is automatic.</code></pre></td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr class="odd">
<td><ol start="6" type="1">
<li>Use this format to start the numbering with a number other than one.</li>
<li>The numbering is automatic from there.</li>
</ol></td>
</tr>
<tr class="even">
<td><pre class="text"><code>6. Use this format to start the numbering
   with a number other than one.
#. The numbering is automatic from there.</code></pre></td>
</tr>
</tbody>
</table>

<div class="tip">

<div class="title">

Tip

</div>

Prefer the use of autonumbered lists with
<span class="title-ref">\#.</span> for better code resilience.

</div>

### Nested lists

<table>
<tbody>
<tr class="odd">
<td><ul>
<li>This is the first item of a bulleted list.
<ol>
<li>It has a nested numbered list</li>
<li>with two items.</li>
</ol></li>
</ul></td>
</tr>
<tr class="even">
<td><pre class="text"><code>- This is the first item of a bulleted list.

  #. It has a nested numbered list
  #. with two items.</code></pre></td>
</tr>
</tbody>
</table>

## Hyperlinks

### External hyperlinks

External hyperlinks are links to a URL with a custom label. They follow
this syntax: `` `label <URL>`_ ``

<div class="note">

<div class="title">

Note

</div>

\- The URL can be a relative path to a file within the documentation. -
Use the `documentation pages hyperlinks
<contributing/doc-pages-hyperlinks>` if you target another documentation
page.

</div>

<table>
<tbody>
<tr class="odd">
<td>For instance, <a href="https://www.odoo.com">this is an external hyperlink to Odoo's website</a>.</td>
</tr>
<tr class="even">
<td><pre class="text"><code>For instance, `this is an external hyperlink to Odoo&#39;s website &lt;https://www.odoo.com&gt;`_.</code></pre></td>
</tr>
</tbody>
</table>

### External hyperlink aliases

External hyperlink aliases allow creating shortcuts for external
hyperlinks.  
The definition syntax is as follows: `.. _target: URL`  
There are two ways to reference them, depending on the use case:

1.  `target_` creates a hyperlink with the target name as label and the
    URL as reference. Note that the `_` moved after the target\!
2.  `` `label <target_>`_ `` does exactly what you expect: the label
    replaces the name of the target, and the target is replaced by the
    URL.

<table>
<tbody>
<tr class="odd">
<td>A <a href="https://en.wikipedia.org/wiki/Proof_of_concept">proof-of-concept</a> is a simplified version, a prototype of what is expected to agree on the main lines of expected changes. <a href="https://en.wikipedia.org/wiki/Proof_of_concept">PoC</a> is a common abbreviation.</td>
</tr>
<tr class="even">
<td><pre class="text"><code>.. _proof-of-concept: https://en.wikipedia.org/wiki/Proof_of_concept

   A proof-of-concept_ is a simplified version, a prototype of what is expected to agree on the main
   lines of expected changes. `PoC &lt;proof-of-concept_&gt;`_ is a common abbreviation.</code></pre></td>
</tr>
</tbody>
</table>

### Custom anchors

Custom anchors follow the same syntax as external hyperlink aliases but
without any URL. Indeed, they are internal. They allow referencing a
specific part of a document by using the target as an anchor. When the
user clicks on the reference, the documentation scrolls to the part of
the page containing the anchor.

The definition syntax is: `.. _target:`  
There are two ways to reference them, both using the `ref` markup:

1.  ``:ref:`target``\` creates a hyperlink to the anchor with the
    heading defined below as label.
2.  ``:ref:`label <target>``\` creates a hyperlink to the anchor with
    the given label.

See `contributing/relative-links` to learn how to write proper relative
links for internal references.

<div class="note">

<div class="title">

Note

</div>

\- Custom anchors can be referenced from other files than the ones in
which they are defined. - Notice that there is no `_` at the end,
contrary to what is done with `external
hyperlinks <contributing/external-hyperlinks>`.

</div>

<table>
<tbody>
<tr class="odd">
<td><p>This can easily be done by creating a new product, see <a href="https://example.com/product">How to create a product?</a> for additional help.</p>
<p><strong>How to create a product?</strong></p>
<p>As explained at the <a href="https://example.com/scroll-to-start-of-page">start of the page</a>, ...</p></td>
</tr>
<tr class="even">
<td><pre class="text"><code>.. _sales/quotation/start-of-page:

This can easily be done by creating a new product, see :ref:`product` for additional help.

.. _sales/quotation/product:

How to create a product?
========================

As explained at the :ref:`start of the page &lt;sales/quotation/start-of-page&gt;`, ...</code></pre></td>
</tr>
</tbody>
</table>

### Documentation pages hyperlinks

The `doc` markup allows referencing a documentation page wherever it is
in the file tree through a relative file path.  
As usual, there are two ways to use the markup:

1.  ``:doc:`path_to_doc_page``\` creates a hyperlink to the
    documentation page with the title of the page as label.
2.  ``:doc:`label <path_to_doc_page>``\` creates a hyperlink to the
    documentation page with the given label.

<table>
<tbody>
<tr class="odd">
<td>Please refer to <a href="https://example.com/doc/accounting/invoices.html">this documentation</a> and to <a href="https://example.com/doc/sales/proforma.html">Send a pro-forma invoice</a>.</td>
</tr>
<tr class="even">
<td><pre class="text"><code>Please refer to :doc:`this documentation &lt;customer_invoices&gt;` and to
:doc:`../sales/sales/invoicing/proforma`.</code></pre></td>
</tr>
</tbody>
</table>

### File download hyperlinks

The `download` markup allows referencing files (that are not necessarily
`RST
(reStructuredText)` documents) within the source tree to be downloaded.

<table>
<tbody>
<tr class="odd">
<td>Download this <a href="https://example.com/doc/odoosh/extras/my_module.zip">module structure template</a> to start building your module in no time.</td>
</tr>
<tr class="even">
<td><pre class="text"><code>Download this :download:`module structure template &lt;extras/my_module.zip&gt;` to start building your
module in no time.</code></pre></td>
</tr>
</tbody>
</table>

## Images

The `image` markup allows inserting images in a document.

<table>
<tbody>
<tr class="odd">
<td><img src="rst_cheat_sheet/create-invoice.png" class="align-center" alt="Create an invoice." /></td>
</tr>
<tr class="even">
<td><pre class="text"><code>.. image:: rst_cheat_sheet/create-invoice.png
   :align: center
   :alt: Create an invoice.</code></pre></td>
</tr>
</tbody>
</table>

<div class="tip">

<div class="title">

Tip

</div>

Add the `:class: o-no-modal`
[option](https://docutils.sourceforge.io/docs/ref/rst/directives.html#common-options)
to an image to prevent opening it in a modal.

</div>

## Alert blocks (admonitions)

### Seealso

<table>
<tbody>
<tr class="odd">
<td><div class="seealso">
<ul>
<li><a href="https://example.com/doc/accounting/invoices.html">Customer invoices</a></li>
<li><a href="https://example.com/doc/sales/proforma.html#activate-the-feature">Pro-forma invoices</a></li>
</ul>
</div></td>
</tr>
<tr class="even">
<td><pre class="text"><code>.. seealso::
   - :doc:`customer_invoices`
   - `Pro-forma invoices &lt;../sales/sales/invoicing/proforma.html#activate-the-feature&gt;`_</code></pre></td>
</tr>
</tbody>
</table>

### Note

<table>
<tbody>
<tr class="odd">
<td><div class="note">
<div class="title">
<p>Note</p>
</div>
<p>Use this alert block to grab the reader's attention about additional information.</p>
</div></td>
</tr>
<tr class="even">
<td><pre class="text"><code>.. note::
   Use this alert block to grab the reader&#39;s attention about additional information.</code></pre></td>
</tr>
</tbody>
</table>

### Tip

<table>
<tbody>
<tr class="odd">
<td><div class="tip">
<div class="title">
<p>Tip</p>
</div>
<p>Use this alert block to inform the reader about a useful trick that requires an action.</p>
</div></td>
</tr>
<tr class="even">
<td><pre class="text"><code>.. tip::
   Use this alert block to inform the reader about a useful trick that requires an action.</code></pre></td>
</tr>
</tbody>
</table>

### Example

<table>
<tbody>
<tr class="odd">
<td><div class="example">
<p>Use this alert block to show an example.</p>
</div></td>
</tr>
<tr class="even">
<td><pre class="text"><code>.. example::
   Use this alert block to show an example.</code></pre></td>
</tr>
</tbody>
</table>

### Exercise

<table>
<tbody>
<tr class="odd">
<td><div class="exercise">
<p>Use this alert block to suggest an exercise to the reader.</p>
</div></td>
</tr>
<tr class="even">
<td><pre class="text"><code>.. exercise::
   Use this alert block to suggest an exercise to the reader.</code></pre></td>
</tr>
</tbody>
</table>

### Important

<table>
<tbody>
<tr class="odd">
<td><div class="important">
<div class="title">
<p>Important</p>
</div>
<p>Use this alert block to notify the reader about important information.</p>
</div></td>
</tr>
<tr class="even">
<td><pre class="text"><code>.. important::
   Use this alert block to notify the reader about important information.</code></pre></td>
</tr>
</tbody>
</table>

### Warning

<table>
<tbody>
<tr class="odd">
<td><div class="warning">
<div class="title">
<p>Warning</p>
</div>
<p>Use this alert block to require the reader to proceed with caution with what is described in the warning.</p>
</div></td>
</tr>
<tr class="even">
<td><pre class="text"><code>.. warning::
   Use this alert block to require the reader to proceed with caution with what is described in the
   warning.</code></pre></td>
</tr>
</tbody>
</table>

### Danger

<table>
<tbody>
<tr class="odd">
<td><div class="danger">
<div class="title">
<p>Danger</p>
</div>
<p>Use this alert block to bring the reader's attention to a serious threat.</p>
</div></td>
</tr>
<tr class="even">
<td><pre class="text"><code>.. danger::
   Use this alert block to bring the reader&#39;s attention to a serious threat.</code></pre></td>
</tr>
</tbody>
</table>

### Custom

<table>
<tbody>
<tr class="odd">
<td><div class="admonition">
<p>Title</p>
<p>Customize this alert block with a <strong>Title</strong> of your choice.</p>
</div></td>
</tr>
<tr class="even">
<td><pre class="text"><code>.. admonition:: Title

   Customize this alert block with a **Title** of your choice.</code></pre></td>
</tr>
</tbody>
</table>

## Tables

### List tables

List tables use two-level bulleted lists to convert data into a table.
The first level represents the rows and the second level represents the
columns.

<table>
<tbody>
<tr class="odd">
<td><table>
<thead>
<tr class="header">
<th>Name</th>
<th>Country</th>
<th>Favorite color</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Raúl</td>
<td>Montenegro</td>
<td>Purple</td>
</tr>
<tr class="even">
<td>Mélanie</td>
<td>France</td>
<td>Red</td>
</tr>
</tbody>
</table></td>
</tr>
<tr class="even">
<td><pre class="text"><code>.. list-table::
   :header-rows: 1
   :stub-columns: 1

   * - Name
     - Country
     - Favorite colour
   * - Raúl
     - Montenegro
     - Purple
   * - Mélanie
     - France
     - Turquoise</code></pre></td>
</tr>
</tbody>
</table>

### Grid tables

Grid tables represent the rendered table and are more visual to work
with.

<table>
<tbody>
<tr class="odd">
<td><table style="width:76%;">
<colgroup>
<col style="width: 33%" />
<col style="width: 20%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Shirts</th>
<th>T-shirts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><dl>
<dt><strong>Available colours</strong></dt>
<dd><ul>
<li></li>
</ul>
</dd>
</dl></td>
<td><blockquote>
<p>Purple</p>
</blockquote>
<dl>
<dt>--------------+</dt>
<dd><p>Turquoise</p>
</dd>
</dl></td>
<td><blockquote>
<p>Green</p>
</blockquote>
<dl>
<dt>---------------+</dt>
<dd><p>Orange</p>
</dd>
</dl></td>
</tr>
<tr class="even">
<td><strong>Sleeves length</strong></td>
<td>Long sleeves</td>
<td>Short sleeves</td>
</tr>
</tbody>
</table></td>
</tr>
<tr class="even">
<td><pre class="text"><code>+-----------------------+--------------+---------------+
|                       | Shirts       | T-shirts      |
+=======================+==============+===============+
| **Available colours** | Purple       | Green         |
|                       +--------------+---------------+
|                       | Turquoise    | Orange        |
+-----------------------+--------------+---------------+
| **Sleeves length**    | Long sleeves | Short sleeves |
+-----------------------+--------------+---------------+</code></pre></td>
</tr>
</tbody>
</table>

<div class="tip">

<div class="title">

Tip

</div>

\- Use <span class="title-ref">=</span> instead of
<span class="title-ref">-</span> to define header rows. - Remove
<span class="title-ref">-</span> and <span class="title-ref">|</span>
separators to merge cells. - Make use of [this convenient table
generator](https://www.tablesgenerator.com/text_tables) to build your
tables. Then, copy-paste the generated formatting into your document.

</div>

## Code blocks

<table>
<tbody>
<tr class="odd">
<td><div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="kw">def</span> main():</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a>    <span class="bu">print</span>(<span class="st">&quot;Hello world!&quot;</span>)</span></code></pre></div></td>
</tr>
<tr class="even">
<td><pre class="text"><code>.. code-block:: python

   def main():
       print(&quot;Hello world!&quot;)</code></pre></td>
</tr>
</tbody>
</table>

## Spoilers

<table>
<tbody>
<tr class="odd">
<td><div class="spoiler">
<p>Answer to the Ultimate Question of Life, the Universe, and Everything</p>
<p><strong>42</strong></p>
</div></td>
</tr>
<tr class="even">
<td><pre class="text"><code>.. spoiler:: Answer to the Ultimate Question of Life, the Universe, and Everything

   **42**</code></pre></td>
</tr>
</tbody>
</table>

## Content tabs

<div class="caution">

<div class="title">

Caution

</div>

The <span class="title-ref">tabs</span> markup may not work well in some
situations. In particular:

  - The tabs' headers cannot be translated.
  - A tab cannot contain `headings <contributing/headings>`.
  - An `alert block <contributing/alert-blocks>` cannot contain tabs.
  - A tab cannot contain `custom anchors <contributing/custom-anchors>`.

</div>

### Basic tabs

Basic tabs are useful to split the content into multiple options. The
<span class="title-ref">tabs</span> markup is used to define sequence of
tabs. Each tab is then defined with the
<span class="title-ref">tab</span> markup followed by a label.

<table>
<tbody>
<tr class="odd">
<td><div class="tabs">
<div class="tab">
<p>Odoo Online</p>
<p>Content dedicated to Odoo Online users.</p>
</div>
<div class="tab">
<p>Odoo.sh</p>
<p>Alternative for Odoo.sh users.</p>
</div>
<div class="tab">
<p>On-premise</p>
<p>Third version for On-premise users.</p>
</div>
</div></td>
</tr>
<tr class="even">
<td><pre class="text"><code>.. tabs::

   .. tab:: Odoo Online

      Content dedicated to Odoo Online users.

   .. tab:: Odoo.sh

      Alternative for Odoo.sh users.

   .. tab:: On-premise

      Third version for On-premise users.</code></pre></td>
</tr>
</tbody>
</table>

### Nested tabs

Tabs can be nested inside one another.

<table>
<tbody>
<tr class="odd">
<td><div class="tabs">
<div class="tab">
<p>Stars</p>
<div class="tabs">
<div class="tab">
<p>The Sun</p>
<p>The closest star to us.</p>
</div>
<div class="tab">
<p>Proxima Centauri</p>
<p>The second closest star to us.</p>
</div>
<div class="tab">
<p>Polaris</p>
<p>The North Star.</p>
</div>
</div>
</div>
<div class="tab">
<p>Moons</p>
<div class="tabs">
<div class="tab">
<p>The Moon</p>
<p>Orbits the Earth.</p>
</div>
<div class="tab">
<p>Titan</p>
<p>Orbits Jupiter.</p>
</div>
</div>
</div>
</div></td>
</tr>
<tr class="even">
<td><pre class="text"><code>.. tabs::

   .. tab:: Stars

      .. tabs::

         .. tab:: The Sun

            The closest star to us.

         .. tab:: Proxima Centauri

            The second closest star to us.

         .. tab:: Polaris

            The North Star.

   .. tab:: Moons

      .. tabs::

         .. tab:: The Moon

            Orbits the Earth.

         .. tab:: Titan

            Orbits Jupiter.</code></pre></td>
</tr>
</tbody>
</table>

### Group tabs

Group tabs are special tabs that synchronize based on a group label. The
last selected group is remembered and automatically selected when the
user returns to the page or visits another page with the tabs group. The
<span class="title-ref">group-tab</span> markup is used to define group
tabs.

<table>
<tbody>
<tr class="odd">
<td><div class="tabs">
<div class="group-tab">
<p>C++</p>
<p>C++</p>
</div>
<div class="group-tab">
<p>Python</p>
<p>Python</p>
</div>
<div class="group-tab">
<p>Java</p>
<p>Java</p>
</div>
</div>
<div class="tabs">
<div class="group-tab">
<p>C++</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="dt">int</span> main(<span class="at">const</span> <span class="dt">int</span> argc, <span class="at">const</span> <span class="dt">char</span> **argv) {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a>    <span class="cf">return</span> <span class="dv">0</span>;</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a>}</span></code></pre></div>
</div>
<div class="group-tab">
<p>Python</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="kw">def</span> main():</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a>    <span class="cf">return</span></span></code></pre></div>
</div>
<div class="group-tab">
<p>Java</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="kw">class</span> Main {</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span>(<span class="bu">String</span>[] args) {}</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a>}</span></code></pre></div>
</div>
</div></td>
</tr>
<tr class="even">
<td><pre class="text"><code>.. tabs::

   .. group-tab:: C++

      C++

   .. group-tab:: Python

      Python

   .. group-tab:: Java

      Java

.. tabs::

   .. group-tab:: C++

      .. code-block:: c++

         int main(const int argc, const char **argv) {
             return 0;
         }

   .. group-tab:: Python

      .. code-block:: python

         def main():
             return

   .. group-tab:: Java

      .. code-block:: java

         class Main {
             public static void main(String[] args) {}
         }</code></pre></td>
</tr>
</tbody>
</table>

### Code tabs

Code tabs are essentially `group tabs <contributing/tabs/group>` that
treat the content as a `code block <contributing/code-blocks>`. The
<span class="title-ref">code-tab</span> markup is used to define a code
tab. Just as for the <span class="title-ref">code-block</span> markup,
the language defines the syntax highlighting of the tab. If set, the
label is used instead of the language for grouping tabs.

<table>
<tbody>
<tr class="odd">
<td><div class="tabs">
<div class="code-tab">
<p>c++ Hello C++</p>
<p>#include &lt;iostream&gt;</p>
<dl>
<dt>int main() {</dt>
<dd><p>std::cout &lt;&lt; "Hello World"; return 0;</p>
</dd>
</dl>
<p>}</p>
</div>
<div class="code-tab">
<p>python Hello Python</p>
<p>print("Hello World")</p>
</div>
<div class="code-tab">
<p>javascript Hello JavaScript</p>
<p>console.log("Hello World");</p>
</div>
</div></td>
</tr>
<tr class="even">
<td><pre class="text"><code>.. tabs::

   .. code-tab:: c++ Hello C++

      #include &lt;iostream&gt;

      int main() {
          std::cout &lt;&lt; &quot;Hello World&quot;;
          return 0;
      }

   .. code-tab:: python Hello Python

      print(&quot;Hello World&quot;)

   .. code-tab:: javascript Hello JavaScript

      console.log(&quot;Hello World&quot;);</code></pre></td>
</tr>
</tbody>
</table>

## Cards

<table>
<tbody>
<tr class="odd">
<td><div class="cards">
<div class="card" target="../documentation" data-tag="Step-by-step guide" data-large="">
<p>Documentation</p>
<p>Use this guide to acquire the tools and knowledge you need to write documentation.</p>
</div>
<div class="card" target="content_guidelines">
<p>Content guidelines</p>
<p>List of guidelines and trips and tricks to make your content shine at its brightest!</p>
</div>
<div class="card" target="rst_guidelines">
<p>RST guidelines</p>
<p>List of technical guidelines to observe when writing with reStructuredText.</p>
</div>
</div></td>
</tr>
<tr class="even">
<td><pre class="text"><code>.. cards::

   .. card:: Documentation
      :target: ../documentation
      :tag: Step-by-step guide
      :large:

      Use this guide to acquire the tools and knowledge you need to write documentation.

   .. card:: Content guidelines
      :target: content_guidelines

      List of guidelines and trips and tricks to make your content shine at its brightest!

   .. card:: RST guidelines
      :target: rst_guidelines

      List of technical guidelines to observe when writing with reStructuredText.</code></pre></td>
</tr>
</tbody>
</table>

## Document metadata

Sphinx supports document-wide metadata markups that specify a behavior
for the entire page.  
They must be placed between colons (<span class="title-ref">:</span>) at
the top of the source file.

<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 81%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Metadata</strong></td>
<td><strong>Purpose</strong></td>
</tr>
<tr class="even">
<td><span class="title-ref">show-content</span></td>
<td><blockquote>
<p>Make a toctree page accessible from the navigation menu.</p>
</blockquote></td>
</tr>
<tr class="odd">
<td><span class="title-ref">show-toc</span></td>
<td><blockquote>
<p>Show the table of content on a page that has the <span class="title-ref">show-content</span> metadata markup.</p>
</blockquote></td>
</tr>
<tr class="even">
<td><span class="title-ref">code-column</span></td>
<td><blockquote>
<div class="line-block">Show a dynamic side column that can be used to display interactive tutorials or code excerpts.<br />
For example, see <code class="interpreted-text" role="doc">/applications/finance/accounting/getting_started/cheat_sheet</code>.</div>
</blockquote></td>
</tr>
<tr class="odd">
<td><span class="title-ref">hide-page-toc</span></td>
<td>Hide the "On this page" sidebar and use full page width for the content.</td>
</tr>
<tr class="even">
<td><span class="title-ref">custom-css</span></td>
<td>Link CSS files (comma-separated) to the document.</td>
</tr>
<tr class="odd">
<td><span class="title-ref">custom-js</span></td>
<td>Link JS files (comma-separated) to the document.</td>
</tr>
<tr class="even">
<td><span class="title-ref">classes</span></td>
<td>Assign the specified classes to the <span class="title-ref">&lt;main/&gt;</span> element of the document.</td>
</tr>
<tr class="odd">
<td><span class="title-ref">orphan</span></td>
<td>Suppress the need to include the document in a toctree.</td>
</tr>
<tr class="even">
<td><span class="title-ref">nosearch</span></td>
<td>Exclude the document from search results.</td>
</tr>
</tbody>
</table>

## Formatting tips

### Break the line but not the paragraph

<table>
<tbody>
<tr class="odd">
<td><div class="line-block">A first long line that you break in two -&gt; here &lt;- is rendered as a single line.<br />
A second line that follows a line break.</div></td>
</tr>
<tr class="even">
<td><pre class="text"><code>| A first long line that you break in two
  -&gt; here &lt;- is rendered as a single line.
| A second line that follows a line break.</code></pre></td>
</tr>
</tbody>
</table>

### Escape markup symbols (Advanced)

Markup symbols escaped with backslashes (`\`) are rendered normally. For
instance, `this \*\*line of text\*\* with \*markup\* symbols` is
rendered as “this \*\*line of text\*\* with \*markup\* symbols”.

When it comes to backticks (`  `<span class="title-ref">), which are
used in many cases such as :ref:\`external hyperlinks
\<contributing/external-hyperlinks\></span>, using backslashes for
escaping is no longer an option because the outer backticks interpret
enclosed backslashes and thus prevent them from escaping inner
backticks. For instance, `` `\`this formatting\ ```produces an`\[UNKNOWN
NODE title\_reference\]`error. Instead,``` `this formatting ```` `
should be used to produce the following
result: ``<span class="title-ref">this formatting</span>\`\`.


---
## File: ./content/contributing/documentation/content_guidelines.md

# Content guidelines

To give the community the best documentation possible, we listed here a
few guidelines, tips and tricks that will make your content shine at its
brightest\! While we encourage you to adopt your own writing style, some
rules still apply to give the reader more clarity and comprehension.

<div class="note">

<div class="title">

Note

</div>

We strongly recommend contributors to carefully read the other documents
related to this section of the documentation. Good knowledge of the ins
and outs of **RST writing** is required to write and submit your
contribution. Note that it also affects your writing style itself.

  - `../documentation`
  - `rst_cheat_sheet`
  - `rst_guidelines`

</div>

## Writing style

**Writing for documentation** isn't the same as writing for a blog or
another medium. Readers are more likely to skim read until they've found
the information they are looking for. Keep in mind that the user
documentation is a place to inform and describe, not to convince and
promote.

### Consistency

*Consistency is key to everything.*

Make sure that your writing style remains **consistent**. If you modify
an existing text, try to match the existing tone and presentation, or
rewrite it to match your own style.

### Grammatical tenses

In English, descriptions and instructions require the use of a **Present
Tense**, while a *future tense* is appropriate only when a specific
event is to happen ulteriorly. This logic might be different in other
languages.

  - Good example (present):  
    *Screenshots are automatically resized to fit the content block's
    width.*

  - Bad example (future):  
    *When you take a screenshot, remember that it will be automatically
    resized to fit the content block's width.*

### Paragraphing

A paragraph comprises several sentences that are linked by a shared
idea. They usually are two to six lines long.

In English, a new idea implies a new paragraph, rather than having a
*line break* as it is common to do in some other languages. *Line
breaks* are useful for layout purposes but shouldn't be used as a
grammatical way of separating ideas.

<div class="seealso">

\- `RST cheat sheet: Break the line but not the paragraph
<contributing/line-break>`

</div>

### Titles and headings

To write good titles and headings:

  - **Be concise.**
      - **Avoid sentences**, unnecessary verbs, questions, and titles
        starting with "how to."
  - **Don't use pronouns** in your titles, especially 2nd person
    (*your*).
  - Use **sentence case**. This means you capitalize only:
      - the first word of the title or heading
      - the first word after a colon
      - proper nouns (brands, product and service names, etc.)

<div class="note">

<div class="title">

Note

</div>

\- Most titles and headings generally refer to a concept and do *not*
represent the name of a feature or a model. - Do not capitalize the
words of an acronym if they don't entail a proper noun. - Verbs in
headings are fine since they often describe an action.

</div>

<div class="example">

\- **Titles** (H1)

  - Quotation templates
  - Lead mining
  - Resupply from another warehouse
  - Synchronize Google Calendar with Odoo
  - Batch payments: SEPA Direct Debit (SDD)
  - Digitize vendor bills with optical character recognition (OCR)
  - **Headings** (H2, H3)
  - Project stages
  - Email alias
  - Confirm the quotation
  - Generate SEPA Direct Debit XML files to submit payments

</div>

## Document structure

Use different **heading levels** to organize your text by sections and
sub-sections. Your headings are not only displayed in the document but
also on the navigation menu (only the H1) and on the "On this page"
sidebar (all H2 to H6).

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="odd">
<td><div class="line-block"><strong>H1: Page title</strong><br />
Your <em>page title</em> gives your reader a quick and clear understanding of what your content is about.</div>
<p>The <em>content</em> in this section describes the upcoming content from a <strong>business point of view</strong>, and shouldn't put the emphasis on Odoo, as this is documentation and not marketing.</p>
<p>Start first with a <strong>lead paragraph</strong>, which helps the reader make sure that they've found the right page, then explain the <strong>business aspects of this topic</strong> in the following paragraphs.</p></td>
</tr>
<tr class="even">
<td><blockquote>
<div class="line-block">| <strong>H2: Section title (configuration)</strong><br />
| This first H2 section is about the configuration of the feature, or the<br />
  prerequisites to achieve a specific goal. To add a path, make sure you<br />
  use the <code>:menuselection:</code> specialized directive (see link below).<br />
<br />
| Example:<br />
| To do so, go to <code>:menuselection:`App name --&gt; Menu --&gt; Sub-menu</code>`, and<br />
  enable the XYZ feature.</div>
</blockquote></td>
</tr>
<tr class="odd">
<td><blockquote>
<div class="line-block">| <strong>H2: Section title (main sections)</strong><br />
| Create as many main sections as you have actions or features to distinguish.<br />
  The title can start with a verb, but try to avoid using "Create ...".</div>
</blockquote></td>
</tr>
<tr class="even">
<td><blockquote>
<div class="line-block">    | | <strong>H3: Subsection</strong><br />
    | | Subsections are perfect for assessing very specific points. The title<br />
    | can be in the form of a question, if appropriate.</div>
</blockquote></td>
</tr>
<tr class="odd">
<td><blockquote>
<div class="line-block"><strong>H2: Next Section</strong></div>
</blockquote></td>
</tr>
</tbody>
</table>

<div class="seealso">

\- `RST cheat sheet: headings <contributing/headings>` - `RST cheat
sheet: markups <contributing/markups>`

</div>

## Organizing the documentation

When writing documentation about a given topic, try to keep pages within
the same folder organized.

For most topics, a single page should do the job. Place it in the
appropriate section of the documentation (e.g., content related to the
CRM app go under `Applications
-> Sales -> CRM`) and follow the `document structure
<contributing/document-structure>` guidelines.

For more complex topics, you may need several pages to cover all their
aspects. Usually, you will find yourself adding documentation to a topic
that is already partially covered. In that case, either create a new
page and place it at the same level as other related pages or add new
sections to an existing page. If you are documenting a complex topic
from scratch, organize your content between one parent page (the `TOC
(Tree Of Contents)` page) and several child pages. Whenever possible,
write content on the parent page and not only on the child pages. Make
the parent page accessible from the navigation menu by using the
`show-content
<contributing/document-metadata>` metadata directive.

## Images

Adding a few images to illustrate your text helps the readers to
understand and memorize your content. However, avoid adding too many
images: it isn't necessary to illustrate all steps and features, and it
may overload your page.

<div class="important">

<div class="title">

Important

</div>

Don't forget to `compress your PNG files with pngquant
<contributing/documentation/first-contribution>`.

</div>

### Screenshots

Screenshots are automatically resized to fit the content block's width.
This implies that screenshots can't be too wide, else they would appear
very small on-screen. Therefore, we recommend to avoid to take
screenshots of a full screen display of the app, unless it is relevant
to do so.

A few tips to improve your screenshots:

1.  **Zoom** in your browser. We recommend a 110% zoom for better
    results.
2.  **Resize** your browser's width, either by *resizing the window*
    itself or by opening the *browser's developer tools* (press the
    `F12` key) and resizing the width.
3.  **Select** the relevant area, rather than keeping the full window.
4.  If necessary, you can **edit** the screenshot to remove unnecessary
    fields and to narrow even more Odoo's display.

![Three tips to take good screenshots for the Odoo
documentation.](content_guidelines/screenshot-tips.gif)

<div class="note">

<div class="title">

Note

</div>

Resizing the window's width is the most important step to do as Odoo's
responsive design automatically resizes all fields to match the window's
width.

</div>

### Media files

A **media filename**:

  - is written in **lower-case letters**
  - is **relevant** to the media's content. (E.g.,
    `screenshot-tips.gif`.)
  - separates its words with a **hyphen** `-` (E.g.,
    `awesome-filename.png`.)

Each document has its own folder in which the media files are located.
The folder's name must be the same as the document's filename.

For example, the document `doc_filename.rst` refers to two images that
are placed in the folder `doc_filename`.

    ├── section
    │   └── doc_filename
    │   │   └── screenshot-tips.gif
    │   │   └── awesome-filename.png
    │   └── doc_filename.rst

<div class="note">

<div class="title">

Note

</div>

Previously, image filenames would mostly be named with numbers (e.g.,
`feature01.png`) and placed in a single `media` folder. While it is
advised not to name your *new* images in that fashion, it is also
essential **not to rename unchanged files**, as doing this would double
the weight of renamed image files on the repository. They will
eventually all be replaced as the content referencing those images is
updated.

</div>

### ALT tags

An **ALT tag** is a *text alternative* to an image. This text is
displayed if the browser fails to render the image. It is also helpful
for users who are visually impaired. Finally, it helps search engines,
such as Google, to understand what the image is about and index it
correctly, which improves the `SEO (Search Engine Optimization)`
significantly.

Good ALT tags are:

  - **Short** (one line maximum)
  - **Not a repetition** of a previous sentence or title
  - A **good description** of the action happening on the image
  - Easily **understandable** if read aloud

<div class="seealso">

\- `RST cheat sheet: image directive <contributing/image>`

</div>


---
## File: ./content/contributing/documentation/rst_guidelines.md

# RST guidelines

## Use relative links for internal URLs

If you need to reference an internal documentation page or a file that
is not sitting in the same directory as your current page, always make
use of *relative file paths* rather than *absolute file paths*. An
absolute file path indicates the location of the target from the root of
its file tree. A relative file path makes use of smart notations (such
as `../` that redirects to the parent folder) to indicate the location
of the target *relative* to that of the source document.

### Example

Given the following source file tree:

    documentation
    ├── content
    │   └── applications
    │   │   └── sales
    │   │   │   └── sales
    │   │   │   │   └── products_prices
    │   │   │   │   │   └── products
    │   │   │   │   │   │   └── import.rst
    │   │   │   │   │   │   └── variants.rst
    │   │   │   │   │   └── prices.rst

A reference to the rendered `prices.html` and `variants.html` could be
made from `import.rst` as follows:

1.  Absolute:
      - `https://odoo.com/documentation/{BRANCH}/applications/sales/sales/products_prices/prices.html`
      - `https://odoo.com/documentation/{BRANCH}/applications/sales/sales/products_prices/products/variants.html`
2.  Relative:
      - `../prices.html`
      - `variants.html`

The relative links are clearly superior in terms of readability and
stability: the references survive version updates, folder name changes
and file tree restructurations.

## Start a new line before the 100th character

In RST, it is possible to break a line without forcing a line break on
the rendered HTML. Make use of this feature to write **lines of maximum
100 characters**. A line break in a sentence results in an additional
whitespace in HTML. That means that you do not need to leave a trailing
whitespace at the end of a line to separate words.

<div class="tip">

<div class="title">

Tip

</div>

You can safely break a line around the separators (`-->`) of
`menuselection` markups and anywhere in a hyperlink reference. For the
`doc`, `ref` and `download` markups, this is only true for the label
part of the reference.

</div>

### Example: Line breaks within markups

``` rst
To register your seller account in Odoo, go to :menuselection:`Sales --> Configuration --> Settings
--> Amazon Connector --> Amazon Accounts` and click on :guilabel:`CREATE`. You can find the **Seller
ID** under the link :guilabel:`Your Merchant Token`.
```

## Be consistent with indentation

Use only spaces (never tabs).

Use as many spaces at the beginning of an indented line as needed to
align it with the first character of the markup in the line above. This
usually implies 3 spaces but you only need 2 for bulleted lists.

### Example: The first `:` is below the `i` (3 spaces)

``` rst
.. image:: media/example.png
   :align: center
   :alt: example
```

### Example: The `:titlesonly:` and page references start below the `t` (3 spaces)

``` rst
.. toctree::
   :titlesonly:

   payables/supplier_bills
   payables/pay
```

### Example: Continuation lines resume below the `I`’s of “Invoice” (2 spaces)

``` rst
- Invoice on ordered quantity: invoice the full order as soon as the sales order is confirmed.
- Invoice on delivered quantity: invoice on what you delivered even if it's a partial delivery.
```

## Use the menuselection markup

Although chaining characters `‣` and menu names works fine to indicate a
user which menus to click, it is best to use the `menuselection` markup
(see `contributing/menuselection`) for the same result. Indeed, it
renders the menus chain consistently with the rest of the documentation
and would automatically adapt to the new graphic chart if we were to
switch to a new one. This markup is used inline as follows:
``:menuselection:`Sales --> Settings --> Products --> Variants``\`.

## Write resilient code

  - Prefer the use of `#.` in numbered lists instead of `1.`, `2.`, etc.
    This removes the risk of breaking the numbering when adding new
    elements to the list and is easier to maintain.
  - Avoid using implicit hyperlink targets and prefer internal hyperlink
    targets instead. Referencing the implicit target `How to print
    quotations?` is more prone to break than a reference to the explicit
    target `_print_quotation` which never appears in the rendered HTML
    and is thus even less likely to be modified.

## Prefix hyperlink targets with application names

As hyperlink targets are visible from the entire documentation when
referenced with the `ref` markup, it is recommended to prefix the target
name with that of the related application. For instance, naming a target
`_amazon/form` instead of `_form` avoids unwanted behaviors and makes
the purpose of the target clear.

## Don’t break hyperlink targets

When refactoring (improving without adding new content) section headings
or hyperlink targets, take care not to break any hyperlink reference to
these targets or update them accordingly.

## Use single-underscore suffixes for hyperlink references

Although using a double-underscore suffix works most of the time for
classic hyperlink references, it is not recommended as
double-underscores normally indicate an anonymous hyperlink reference.
This is a special kind of hyperlink reference that makes use of nameless
hyperlink targets consisting only of two underscore.  
tl;dr: Double-underscore suffixes work until they don’t and are bad
practice, use single-underscore suffixes instead.


---
## File: ./content/contributing/development/git_guidelines.md

# Git guidelines

## Configure your git

Based on ancestral experience and oral tradition, the following things
go a long way towards making your commits more helpful:

  - Be sure to define both the user.email and user.name in your local
    git config
    
    ``` text
    git config --global <var> <value>
    ```

  - Be sure to add your full name to your Github profile here. Please
    feel fancy and add your team, avatar, your favorite quote, and
    whatnot ;-)

## Commit message structure

Commit message has four parts: tag, module, short description and full
description. Try to follow the preferred structure for your commit
messages

``` text
[TAG] module: describe your change in a short sentence (ideally < 50 chars)

Long version of the change description, including the rationale for the change,
or a summary of the feature being introduced.

Please spend a lot more time describing WHY the change is being done rather
than WHAT is being changed. This is usually easy to grasp by actually reading
the diff. WHAT should be explained only if there are technical choices
or decision involved. In that case explain WHY this decision was taken.

End the message with references, such as task or bug numbers, PR numbers, and
OPW tickets, following the suggested format:
task-123 (related to task)
Fixes #123  (close related issue on Github)
Closes #123  (close related PR on Github)
opw-123 (related to ticket)
```

## Tag and module name

Tags are used to prefix your commit. They should be one of the following

  - **\[FIX\]** for bug fixes: mostly used in stable version but also
    valid if you are fixing a recent bug in development version;
  - **\[REF\]** for refactoring: when a feature is heavily rewritten;
  - **\[ADD\]** for adding new modules;
  - **\[REM\]** for removing resources: removing dead code, removing
    views, removing modules, ...;
  - **\[REV\]** for reverting commits: if a commit causes issues or is
    not wanted reverting it is done using this tag;
  - **\[MOV\]** for moving files: use git move and do not change content
    of moved file otherwise Git may loose track and history of the file;
    also used when moving code from one file to another;
  - **\[REL\]** for release commits: new major or minor stable versions;
  - **\[IMP\]** for improvements: most of the changes done in
    development version are incremental improvements not related to
    another tag;
  - **\[MERGE\]** for merge commits: used in forward port of bug fixes
    but also as main commit for feature involving several separated
    commits;
  - **\[CLA\]** for signing the Odoo Individual Contributor License;
  - **\[I18N\]** for changes in translation files;

After tag comes the modified module name. Use the technical name as
functional name may change with time. If several modules are modified,
list them or use various to tell it is cross-modules. Unless really
required or easier avoid modifying code across several modules in the
same commit. Understanding module history may become difficult.

## Commit message header

After tag and module name comes a meaningful commit message header. It
should be self explanatory and include the reason behind the change. Do
not use single words like "bugfix" or "improvements". Try to limit the
header length to about 50 characters for readability.

Commit message header should make a valid sentence once concatenated
with `if applied, this commit will <header>`. For example `[IMP] base:
prevent to archive users linked to active partners` is correct as it
makes a valid sentence `if applied, this commit will prevent users to
archive...`.

## Commit message full description

In the message description specify the part of the code impacted by your
changes (module name, lib, transversal object, ...) and a description of
the changes.

First explain WHY you are modifying code. What is important if someone
goes back to your commit in about 4 decades (or 3 days) is why you did
it. It is the purpose of the change.

What you did can be found in the commit itself. If there was some
technical choices involved it is a good idea to explain it also in the
commit message after the why. For Odoo R\&D developers "PO team asked me
to do it" is not a valid why, by the way.

Please avoid commits which simultaneously impact multiple modules. Try
to split into different commits where impacted modules are different. It
will be helpful if we need to revert changes in a given module
separately.

Don't hesitate to be a bit verbose. Most people will only see your
commit message and judge everything you did in your life just based on
those few sentences. No pressure at all.

**You spend several hours, days or weeks working on meaningful features.
Take some time to calm down and write clear and understandable commit
messages.**

If you are an Odoo R\&D developer the WHY should be the purpose of the
task you are working on. Full specifications make the core of the commit
message. **If you are working on a task that lacks purpose and
specifications please consider making them clear before continuing.**

Finally here are some examples of correct commit messages :

``` text
[REF] models: use `parent_path` to implement parent_store

 This replaces the former modified preorder tree traversal (MPTT) with the
 fields `parent_left`/`parent_right`[...]

[FIX] account: remove frenglish

 [...]

 Closes #22793
 Fixes #22769

[FIX] website: remove unused alert div, fixes look of input-group-btn

 Bootstrap's CSS depends on the input-group-btn
 element being the first/last child of its parent.
 This was not the case because of the invisible
 and useless alert.
```

<div class="note">

<div class="title">

Note

</div>

Use the long description to explain the *why* not the *what*, the *what*
can be seen in the diff

</div>


---
## File: ./content/contributing/development/coding_guidelines.md

# Coding guidelines

This page introduces the Odoo Coding Guidelines. Those aim to improve
the quality of Odoo Apps code. Indeed proper code improves readability,
eases maintenance, helps debugging, lowers complexity and promotes
reliability. These guidelines should be applied to every new module and
to all new development.

<div class="warning">

<div class="title">

Warning

</div>

When modifying existing files in **stable version** the original file
style strictly supersedes any other style guidelines. In other words
please never modify existing files in order to apply these guidelines.
It avoids disrupting the revision history of code lines. Diff should be
kept minimal. For more details, see our [pull request
guide](https://odoo.com/submit-pr).

</div>

<div class="warning">

<div class="title">

Warning

</div>

When modifying existing files in **master (development) version** apply
those guidelines to existing code only for modified code or if most of
the file is under revision. In other words modify existing files
structure only if it is going under major changes. In that case first do
a **move** commit then apply the changes related to the feature.

</div>

## Module structure

### Directories

A module is organized in important directories. Those contain the
business logic; having a look at them should make you understand the
purpose of the module.

  - *data/* : demo and data xml
  - *models/* : models definition
  - *controllers/* : contains controllers (HTTP routes)
  - *views/* : contains the views and templates
  - *static/* : contains the web assets, separated into *css/, js/,
    img/, lib/, ...*

Other optional directories compose the module.

  - *wizard/* : regroups the transient models (`models.TransientModel`)
    and their views
  - *report/* : contains the printable reports and models based on SQL
    views. Python objects and XML views are included in this directory
  - *tests/* : contains the Python tests

### File naming

File naming is important to quickly find information through all odoo
addons. This section explains how to name files in a standard odoo
module. As an example we use a [plant
nursery](https://github.com/tivisse/odoodays-2018/tree/master/plant_nursery)
application. It holds two main models *plant.nursery* and *plant.order*.

Concerning *models*, split the business logic by sets of models
belonging to a same main model. Each set lies in a given file named
based on its main model. If there is only one model, its name is the
same as the module name. Each inherited model should be in its own file
to help understanding of impacted models.

``` text
addons/plant_nursery/
|-- models/
|   |-- plant_nursery.py (first main model)
|   |-- plant_order.py (another main model)
|   |-- res_partner.py (inherited Odoo model)
```

Concerning *security*, three main files should be used:

  - First one is the definition of access rights done in a
    `ir.model.access.csv` file.
  - User groups are defined in `<module>_groups.xml`.
  - Record rules are defined in `<model>_security.xml`.

<!-- end list -->

``` text
addons/plant_nursery/
|-- security/
|   |-- ir.model.access.csv
|   |-- plant_nursery_groups.xml
|   |-- plant_nursery_security.xml
|   |-- plant_order_security.xml
```

Concerning *views*, backend views should be split like models and
suffixed by `_views.xml`. Backend views are list, form, kanban,
activity, graph, pivot, .. views. To ease split by model in views main
menus not linked to specific actions may be extracted into an optional
`<module>_menus.xml` file. Templates (QWeb pages used notably for portal
/ website display) and bundles (import of JS and CSS assets) are put in
separate files. Those are respectively `<model>_templates.xml` and
`assets.xml` files.

``` text
addons/plant_nursery/
|-- views/
|   | -- assets.xml (import of JS / CSS)
|   | -- plant_nursery_menus.xml (optional definition of main menus)
|   | -- plant_nursery_views.xml (backend views)
|   | -- plant_nursery_templates.xml (portal templates)
|   | -- plant_order_views.xml
|   | -- plant_order_templates.xml
|   | -- res_partner_views.xml
```

Concerning *data*, split them by purpose (demo or data) and main model.
Filenames will be the main\_model name suffixed by `_demo.xml` or
`_data.xml`. For instance for an application having demo and data for
its main model as well as subtypes, activities and mail templates all
related to mail module:

``` text
addons/plant_nursery/
|-- data/
|   |-- plant_nursery_data.xml
|   |-- plant_nursery_demo.xml
|   |-- mail_data.xml
```

Concerning *controllers*, generally all controllers belong to a single
controller contained in a file named `<module_name>.py`. An old
convention in Odoo is to name this file `main.py` but it is considered
as outdated. If you need to inherit an existing controller from another
module do it in `<inherited_module_name>.py`. For example adding portal
controller in an application is done in `portal.py`.

``` text
addons/plant_nursery/
|-- controllers/
|   |-- plant_nursery.py
|   |-- portal.py (inheriting portal/controllers/portal.py)
|   |-- main.py (deprecated, replaced by plant_nursery.py)
```

Concerning *static files*, Javascript files follow globally the same
logic as python models. Each component should be in its own file with a
meaningful name. For instance, the activity widgets are located in
`activity.js` of mail module. Subdirectories can also be created to
structure the 'package' (see web module for more details). The same
logic should be applied for the templates of JS widgets (static XML
files) and for their styles (scss files). Don't link data (image,
libraries) outside Odoo: do not use an URL to an image but copy it in
the codebase instead.

Concerning *wizards*, naming convention is the same of for python
models: `<transient>.py` and `<transient>_views.xml`. Both are put in
the wizard directory. This naming comes from old odoo applications using
the wizard keyword for transient models.

``` text
addons/plant_nursery/
|-- wizard/
|   |-- make_plant_order.py
|   |-- make_plant_order_views.xml
```

Concerning *statistics reports* done with python / SQL views and classic
views naming is the following :

``` text
addons/plant_nursery/
|-- report/
|   |-- plant_order_report.py
|   |-- plant_order_report_views.xml
```

Concerning *printable reports* which contain mainly data preparation and
Qweb templates naming is the following :

``` text
addons/plant_nursery/
|-- report/
|   |-- plant_order_reports.xml (report actions, paperformat, ...)
|   |-- plant_order_templates.xml (xml report templates)
```

The complete tree of our Odoo module therefore looks like

``` text
addons/plant_nursery/
|-- __init__.py
|-- __manifest__.py
|-- controllers/
|   |-- __init__.py
|   |-- plant_nursery.py
|   |-- portal.py
|-- data/
|   |-- plant_nursery_data.xml
|   |-- plant_nursery_demo.xml
|   |-- mail_data.xml
|-- models/
|   |-- __init__.py
|   |-- plant_nursery.py
|   |-- plant_order.py
|   |-- res_partner.py
|-- report/
|   |-- __init__.py
|   |-- plant_order_report.py
|   |-- plant_order_report_views.xml
|   |-- plant_order_reports.xml (report actions, paperformat, ...)
|   |-- plant_order_templates.xml (xml report templates)
|-- security/
|   |-- ir.model.access.csv
|   |-- plant_nursery_groups.xml
|   |-- plant_nursery_security.xml
|   |-- plant_order_security.xml
|-- static/
|   |-- img/
|   |   |-- my_little_kitten.png
|   |   |-- troll.jpg
|   |-- lib/
|   |   |-- external_lib/
|   |-- src/
|   |   |-- js/
|   |   |   |-- widget_a.js
|   |   |   |-- widget_b.js
|   |   |-- scss/
|   |   |   |-- widget_a.scss
|   |   |   |-- widget_b.scss
|   |   |-- xml/
|   |   |   |-- widget_a.xml
|   |   |   |-- widget_a.xml
|-- views/
|   |-- assets.xml
|   |-- plant_nursery_menus.xml
|   |-- plant_nursery_views.xml
|   |-- plant_nursery_templates.xml
|   |-- plant_order_views.xml
|   |-- plant_order_templates.xml
|   |-- res_partner_views.xml
|-- wizard/
|   |--make_plant_order.py
|   |--make_plant_order_views.xml
```

<div class="note">

<div class="title">

Note

</div>

File names should only contain `[a-z0-9_]` (lowercase alphanumerics and
`_`)

</div>

<div class="warning">

<div class="title">

Warning

</div>

Use correct file permissions : folder 755 and file 644.

</div>

## XML files

### Format

To declare a record in XML, the **record** notation (using *\<record\>*)
is recommended:

  - Place `id` attribute before `model`
  - For field declaration, `name` attribute is first. Then place the
    *value* either in the `field` tag, either in the `eval` attribute,
    and finally other attributes (widget, options, ...) ordered by
    importance.
  - Try to group the record by model. In case of dependencies between
    action/menu/views, this convention may not be applicable.
  - Use naming convention defined at the next point
  - The tag *\<data\>* is only used to set not-updatable data with
    `noupdate=1`. If there is only not-updatable data in the file, the
    `noupdate=1` can be set on the `<odoo>` tag and do not set a
    `<data>` tag.

<!-- end list -->

``` xml
<record id="view_id" model="ir.ui.view">
    <field name="name">view.name</field>
    <field name="model">object_name</field>
    <field name="priority" eval="16"/>
    <field name="arch" type="xml">
        <tree>
            <field name="my_field_1"/>
            <field name="my_field_2" string="My Label" widget="statusbar" statusbar_visible="draft,sent,progress,done" />
        </tree>
    </field>
</record>
```

Odoo supports custom tags acting as syntactic sugar:

  - menuitem: use it as a shortcut to declare a `ir.ui.menu`
  - template: use it to declare a QWeb View requiring only the `arch`
    section of the view.

These tags are preferred over the *record* notation.

### XML IDs and naming

#### Security, View and Action

Use the following pattern :

  - For a menu: `{<model_name>}_menu`, or
    `{<model_name>}_menu_{do_stuff}` for submenus.
  - For a view: `{<model_name>}_view_{<view_type>}`, where *view\_type*
    is `kanban`, `form`, `tree`, `search`, ...
  - For an action: the main action respects `{<model_name>}_action`.
    Others are suffixed with `_{<detail>}`, where *detail* is a
    lowercase string briefly explaining the action. This is used only if
    multiple actions are declared for the model.
  - For window actions: suffix the action name by the specific view
    information like `{<model_name>}_action_view_{<view_type>}`.
  - For a group: `{<module_name>}_group_{<group_name>}` where
    *group\_name* is the name of the group, generally 'user', 'manager',
    ...
  - For a rule: `{<model_name>}_rule_{<concerned_group>}` where
    *concerned\_group* is the short name of the concerned group ('user'
    for the 'model\_name\_group\_user', 'public' for public user,
    'company' for multi-company rules, ...).

Name should be identical to xml id with dots replacing underscores.
Actions should have a real naming as it is used as display name.

``` xml
<!-- views  -->
<record id="model_name_view_form" model="ir.ui.view">
    <field name="name">model.name.view.form</field>
    ...
</record>

<record id="model_name_view_kanban" model="ir.ui.view">
    <field name="name">model.name.view.kanban</field>
    ...
</record>

<!-- actions -->
<record id="model_name_action" model="ir.act.window">
    <field name="name">Model Main Action</field>
    ...
</record>

<record id="model_name_action_child_list" model="ir.actions.act_window">
    <field name="name">Model Access Children</field>
</record>

<!-- menus and sub-menus -->
<menuitem
    id="model_name_menu_root"
    name="Main Menu"
    sequence="5"
/>
<menuitem
    id="model_name_menu_action"
    name="Sub Menu 1"
    parent="module_name.module_name_menu_root"
    action="model_name_action"
    sequence="10"
/>

<!-- security -->
<record id="module_name_group_user" model="res.groups">
    ...
</record>

<record id="model_name_rule_public" model="ir.rule">
    ...
</record>

<record id="model_name_rule_company" model="ir.rule">
    ...
</record>
```

#### Inheriting XML

Xml Ids of inheriting views should use the same ID as the original
record. It helps finding all inheritance at a glance. As final Xml Ids
are prefixed by the module that creates them there is no overlap.

Naming should contain an `.inherit.{details}` suffix to ease
understanding the override purpose when looking at its name.

``` xml
<record id="model_view_form" model="ir.ui.view">
    <field name="name">model.view.form.inherit.module2</field>
    <field name="inherit_id" ref="module1.model_view_form"/>
    ...
</record>
```

New primary views do not require the inherit suffix as those are new
records based upon the first one.

``` xml
<record id="module2.model_view_form" model="ir.ui.view">
    <field name="name">model.view.form.module2</field>
    <field name="inherit_id" ref="module1.model_view_form"/>
    <field name="mode">primary</field>
    ...
</record>
```

## Python

<div class="warning">

<div class="title">

Warning

</div>

Do not forget to read the `Security Pitfalls
<reference/security/pitfalls>` section as well to write secure code.

</div>

### PEP8 options

Using a linter can help show syntax and semantic warnings or errors.
Odoo source code tries to respect Python standard, but some of them can
be ignored.

  - E501: line too long
  - E301: expected 1 blank line, found 0
  - E302: expected 2 blank lines, found 1

### Imports

The imports are ordered as

1.  External libraries (one per line sorted and split in python stdlib)
2.  Imports of `odoo`
3.  Imports from Odoo modules (rarely, and only if necessary)

Inside these 3 groups, the imported lines are alphabetically sorted.

``` python
# 1 : imports of python lib
import base64
import re
import time
from datetime import datetime
# 2 : imports of odoo
import odoo
from odoo import api, fields, models, _ # alphabetically ordered
from odoo.tools.safe_eval import safe_eval as eval
# 3 : imports from odoo addons
from odoo.addons.web.controllers.main import login_redirect
from odoo.addons.website.models.website import slug
```

### Idiomatics of Programming (Python)

  - Always favor *readability* over *conciseness* or using the language
    features or idioms.
  - Don't use `.clone()`

<!-- end list -->

``` python
# bad
new_dict = my_dict.clone()
new_list = old_list.clone()
# good
new_dict = dict(my_dict)
new_list = list(old_list)
```

  - Python dictionary : creation and update

<!-- end list -->

``` python
# -- creation empty dict
my_dict = {}
my_dict2 = dict()

# -- creation with values
# bad
my_dict = {}
my_dict['foo'] = 3
my_dict['bar'] = 4
# good
my_dict = {'foo': 3, 'bar': 4}

# -- update dict
# bad
my_dict['foo'] = 3
my_dict['bar'] = 4
my_dict['baz'] = 5
# good
my_dict.update(foo=3, bar=4, baz=5)
my_dict = dict(my_dict, **my_dict2)
```

  - Use meaningful variable/class/method names
  - Useless variable : Temporary variables can make the code clearer by
    giving names to objects, but that doesn't mean you should create
    temporary variables all the time:

<!-- end list -->

``` python
# pointless
schema = kw['schema']
params = {'schema': schema}
# simpler
params = {'schema': kw['schema']}
```

  - Multiple return points are OK, when they're simpler

<!-- end list -->

``` python
# a bit complex and with a redundant temp variable
def axes(self, axis):
    axes = []
    if type(axis) == type([]):
        axes.extend(axis)
    else:
        axes.append(axis)
    return axes

 # clearer
def axes(self, axis):
    if type(axis) == type([]):
        return list(axis) # clone the axis
    else:
        return [axis] # single-element list
```

  - Know your builtins : You should at least have a basic understanding
    of all the Python builtins
    (<http://docs.python.org/library/functions.html>)

<!-- end list -->

``` python
value = my_dict.get('key', None) # very very redundant
value = my_dict.get('key') # good
```

Also, `if 'key' in my_dict` and `if my_dict.get('key')` have very
different meaning, be sure that you're using the right one.

  - Learn list comprehensions : Use list comprehension, dict
    comprehension, and basic manipulation using `map`, `filter`, `sum`,
    ... They make the code easier to read.

<!-- end list -->

``` python
# not very good
cube = []
for i in res:
    cube.append((i['id'],i['name']))
# better
cube = [(i['id'], i['name']) for i in res]
```

  - Collections are booleans too : In python, many objects have
    "boolean-ish" value when evaluated in a boolean context (such as an
    if). Among these are collections (lists, dicts, sets, ...) which are
    "falsy" when empty and "truthy" when containing items:

<!-- end list -->

``` python
bool([]) is False
bool([1]) is True
bool([False]) is True
```

So, you can write `if some_collection:` instead of `if
len(some_collection):`.

  - Iterate on iterables

<!-- end list -->

``` python
# creates a temporary list and looks bar
for key in my_dict.keys():
    "do something..."
# better
for key in my_dict:
    "do something..."
# accessing the key,value pair
for key, value in my_dict.items():
    "do something..."
```

  - Use dict.setdefault

<!-- end list -->

``` python
# longer.. harder to read
values = {}
for element in iterable:
    if element not in values:
        values[element] = []
    values[element].append(other_value)

# better.. use dict.setdefault method
values = {}
for element in iterable:
    values.setdefault(element, []).append(other_value)
```

  - As a good developer, document your code (docstring on methods,
    simple comments for tricky part of code)
  - In additions to these guidelines, you may also find the following
    link interesting:
    <http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html>
    (a little bit outdated, but quite relevant)

### Programming in Odoo

  - Avoid to create generators and decorators: only use the ones
    provided by the Odoo API.
  - As in python, use `filtered`, `mapped`, `sorted`, ... methods to
    ease code reading and performance.

#### Make your method work in batch

When adding a function, make sure it can process multiple records by
iterating on self to treat each record.

``` python
def my_method(self)
    for record in self:
        record.do_cool_stuff()
```

For performance issue, when developing a 'stat button' (for instance),
do not perform a `search` or a `search_count` in a loop. It is
recommended to use `read_group` method, to compute all value in only one
request.

``` python
def _compute_equipment_count(self):
""" Count the number of equipment per category """
    equipment_data = self.env['hr.equipment'].read_group([('category_id', 'in', self.ids)], ['category_id'], ['category_id'])
    mapped_data = dict([(m['category_id'][0], m['category_id_count']) for m in equipment_data])
    for category in self:
        category.equipment_count = mapped_data.get(category.id, 0)
```

#### Propagate the context

The context is a `frozendict` that cannot be modified. To call a method
with a different context, the `with_context` method should be used :

``` python
records.with_context(new_context).do_stuff() # all the context is replaced
records.with_context(**additionnal_context).do_other_stuff() # additionnal_context values override native context ones
```

<div class="warning">

<div class="title">

Warning

</div>

Passing parameter in context can have dangerous side-effects.

Since the values are propagated automatically, some unexpected behavior
may appear. Calling `create()` method of a model with
*default\_my\_field* key in context will set the default value of
*my\_field* for the concerned model. But if during this creation, other
objects (such as sale.order.line, on sale.order creation) having a field
name *my\_field* are created, their default value will be set too.

</div>

If you need to create a key context influencing the behavior of some
object, choose a good name, and eventually prefix it by the name of the
module to isolate its impact. A good example are the keys of `mail`
module : *mail\_create\_nosubscribe*, *mail\_notrack*,
*mail\_notify\_user\_signature*, ...

#### Think extendable

Functions and methods should not contain too much logic: having a lot of
small and simple methods is more advisable than having few large and
complex methods. A good rule of thumb is to split a method as soon as it
has more than one responsibility (see
<http://en.wikipedia.org/wiki/Single_responsibility_principle>).

Hardcoding a business logic in a method should be avoided as it prevents
to be easily extended by a submodule.

``` python
# do not do this
# modifying the domain or criteria implies overriding whole method
def action(self):
    ...  # long method
    partners = self.env['res.partner'].search(complex_domain)
    emails = partners.filtered(lambda r: arbitrary_criteria).mapped('email')

# better but do not do this either
# modifying the logic forces to duplicate some parts of the code
def action(self):
    ...
    partners = self._get_partners()
    emails = partners._get_emails()

# better
# minimum override
def action(self):
    ...
    partners = self.env['res.partner'].search(self._get_partner_domain())
    emails = partners.filtered(lambda r: r._filter_partners()).mapped('email')
```

The above code is over extendable for the sake of example but the
readability must be taken into account and a tradeoff must be made.

Also, name your functions accordingly: small and properly named
functions are the starting point of readable/maintainable code and
tighter documentation.

This recommendation is also relevant for classes, files, modules and
packages. (See also
<http://en.wikipedia.org/wiki/Cyclomatic_complexity>)

#### Never commit the transaction

The Odoo framework is in charge of providing the transactional context
for all RPC calls. The principle is that a new database cursor is opened
at the beginning of each RPC call, and committed when the call has
returned, just before transmitting the answer to the RPC client,
approximately like this:

``` python
def execute(self, db_name, uid, obj, method, *args, **kw):
    db, pool = pooler.get_db_and_pool(db_name)
    # create transaction cursor
    cr = db.cursor()
    try:
        res = pool.execute_cr(cr, uid, obj, method, *args, **kw)
        cr.commit() # all good, we commit
    except Exception:
        cr.rollback() # error, rollback everything atomically
        raise
    finally:
        cr.close() # always close cursor opened manually
    return res
```

If any error occurs during the execution of the RPC call, the
transaction is rolled back atomically, preserving the state of the
system.

Similarly, the system also provides a dedicated transaction during the
execution of tests suites, so it can be rolled back or not depending on
the server startup options.

The consequence is that if you manually call `cr.commit()` anywhere
there is a very high chance that you will break the system in various
ways, because you will cause partial commits, and thus partial and
unclean rollbacks, causing among others:

1.  inconsistent business data, usually data loss
2.  workflow desynchronization, documents stuck permanently
3.  tests that can't be rolled back cleanly, and will start polluting
    the database, and triggering error (this is true even if no error
    occurs during the transaction)

<!-- end list -->

  - Here is the very simple rule:  
    You should **NEVER** call `cr.commit()` yourself, **UNLESS** you
    have created your own database cursor explicitly\! And the
    situations where you need to do that are exceptional\!
    
    And by the way if you did create your own cursor, then you need to
    handle error cases and proper rollback, as well as properly close
    the cursor when you're done with it.

And contrary to popular belief, you do not even need to call
`cr.commit()` in the following situations: - in the `_auto_init()`
method of an *models.Model* object: this is taken care of by the addons
initialization method, or by the ORM transaction when creating custom
models - in reports: the `commit()` is handled by the framework too, so
you can update the database even from within a report - within
*models.Transient* methods: these methods are called exactly like
regular *models.Model* ones, within a transaction and with the
corresponding `cr.commit()/rollback()` at the end - etc. (see general
rule above if you are in doubt\!)

All `cr.commit()` calls outside of the server framework from now on must
have an **explicit comment** explaining why they are absolutely
necessary, why they are indeed correct, and why they do not break the
transactions. Otherwise they can and will be removed \!

#### Use translation method correctly

Odoo uses a GetText-like method named "underscore" `_( )` to indicate
that a static string used in the code needs to be translated at runtime
using the language of the context. This pseudo-method is accessed within
your code by importing as follows:

``` python
from odoo import _
```

A few very important rules must be followed when using it, in order for
it to work and to avoid filling the translations with useless junk.

Basically, this method should only be used for static strings written
manually in the code, it will not work to translate field values, such
as Product names, etc. This must be done instead using the translate
flag on the corresponding field.

The method accepts optional positional or named parameter The rule is
very simple: calls to the underscore method should always be in the form
`_('literal string')` and nothing else:

``` python
# good: plain strings
error = _('This record is locked!')

# good: strings with formatting patterns included
error = _('Record %s cannot be modified!', record)

# ok too: multi-line literal strings
error = _("""This is a bad multiline example
             about record %s!""", record)
error = _('Record %s cannot be modified' \
          'after being validated!', record)

# bad: tries to translate after string formatting
#      (pay attention to brackets!)
# This does NOT work and messes up the translations!
error = _('Record %s cannot be modified!' % record)

# bad: formatting outside of translation
# This won't benefit from fallback mechanism in case of bad translation
error = _('Record %s cannot be modified!') % record

# bad: dynamic string, string concatenation, etc are forbidden!
# This does NOT work and messes up the translations!
error = _("'" + que_rec['question'] + "' \n")

# bad: field values are automatically translated by the framework
# This is useless and will not work the way you think:
error = _("Product %s is out of stock!") % _(product.name)
# and the following will of course not work as already explained:
error = _("Product %s is out of stock!" % product.name)

# Instead you can do the following and everything will be translated,
# including the product name if its field definition has the
# translate flag properly set:
error = _("Product %s is not available!", product.name)
```

Also, keep in mind that translators will have to work with the literal
values that are passed to the underscore function, so please try to make
them easy to understand and keep spurious characters and formatting to a
minimum. Translators must be aware that formatting patterns such as `%s`
or `%d`, newlines, etc. need to be preserved, but it's important to use
these in a sensible and obvious manner:

``` python
# Bad: makes the translations hard to work with
error = "'" + question + _("' \nPlease enter an integer value ")

# Ok (pay attention to position of the brackets too!)
error = _("Answer to question %s is not valid.\n" \
          "Please enter an integer value.", question)

# Better
error = _("Answer to question %(title)s is not valid.\n" \
          "Please enter an integer value.", title=question)
```

In general in Odoo, when manipulating strings, prefer `%` over
`.format()` (when only one variable to replace in a string), and prefer
`%(varname)` instead of position (when multiple variables have to be
replaced). This makes the translation easier for the community
translators.

### Symbols and Conventions

  -   - Model name (using the dot notation, prefix by the module name) :
        
          - When defining an Odoo Model : use singular form of the name
            (*res.partner* and *sale.order* instead of *res.partnerS*
            and *saleS.orderS*)
          - When defining an Odoo Transient (wizard) : use
            `<related_base_model>.<action>` where *related\_base\_model*
            is the base model (defined in *models/*) related to the
            transient, and *action* is the short name of what the
            transient do. Avoid the *wizard* word. For instance :
            `account.invoice.make`, `project.task.delegate.batch`, ...
          - When defining *report* model (SQL views e.i.) : use
            `<related_base_model>.report.<action>`, based on the
            Transient convention.

  - Odoo Python Class : use camelcase (Object-oriented style).

<!-- end list -->

``` python
class AccountInvoice(models.Model):
    ...
```

  -   - Variable name :
        
          - use camelcase for model variable
          - use underscore lowercase notation for common variable.
          - suffix your variable name with *\_id* or *\_ids* if it
            contains a record id or list of id. Don't use `partner_id`
            to contain a record of res.partner

<!-- end list -->

``` python
Partner = self.env['res.partner']
partners = Partner.browse(ids)
partner_id = partners[0].id
```

  - `One2Many` and `Many2Many` fields should always have *\_ids* as
    suffix (example: sale\_order\_line\_ids)

  - `Many2One` fields should have *\_id* as suffix (example :
    partner\_id, user\_id, ...)

  -   - Method conventions
        
          - Compute Field : the compute method pattern is
            *\_compute\_\<field\_name\>*
          - Search method : the search method pattern is
            *\_search\_\<field\_name\>*
          - Default method : the default method pattern is
            *\_default\_\<field\_name\>*
          - Selection method: the selection method pattern is
            *\_selection\_\<field\_name\>*
          - Onchange method : the onchange method pattern is
            *\_onchange\_\<field\_name\>*
          - Constraint method : the constraint method pattern is
            *\_check\_\<constraint\_name\>*
          - Action method : an object action method is prefix with
            *action\_*. Since it uses only one record, add
            `self.ensure_one()` at the beginning of the method.

  -   - In a Model attribute order should be
        
        1.  Private attributes (`_name`, `_description`, `_inherit`,
            `_sql_constraints`, ...)
        2.  Default method and `default_get`
        3.  Field declarations
        4.  Compute, inverse and search methods in the same order as
            field declaration
        5.  Selection method (methods used to return computed values for
            selection fields)
        6.  Constrains methods (`@api.constrains`) and onchange methods
            (`@api.onchange`)
        7.  CRUD methods (ORM overrides)
        8.  Action methods
        9.  And finally, other business methods.

<!-- end list -->

``` python
class Event(models.Model):
    # Private attributes
    _name = 'event.event'
    _description = 'Event'

    # Default methods
    def _default_name(self):
        ...

    # Fields declaration
    name = fields.Char(string='Name', default=_default_name)
    seats_reserved = fields.Integer(string='Reserved Seats', store=True
        readonly=True, compute='_compute_seats')
    seats_available = fields.Integer(string='Available Seats', store=True
        readonly=True, compute='_compute_seats')
    price = fields.Integer(string='Price')
    event_type = fields.Selection(string="Type", selection='_selection_type')

    # compute and search fields, in the same order of fields declaration
    @api.depends('seats_max', 'registration_ids.state', 'registration_ids.nb_register')
    def _compute_seats(self):
        ...

    @api.model
    def _selection_type(self):
        return []

    # Constraints and onchanges
    @api.constrains('seats_max', 'seats_available')
    def _check_seats_limit(self):
        ...

    @api.onchange('date_begin')
    def _onchange_date_begin(self):
        ...

    # CRUD methods (and name_get, name_search, ...) overrides
    def create(self, values):
        ...

    # Action methods
    def action_validate(self):
        self.ensure_one()
        ...

    # Business methods
    def mail_user_confirm(self):
        ...
```

## Javascript and CSS

### Static files organization

Odoo addons have some conventions on how to structure various files. We
explain here in more details how web assets are supposed to be
organized.

The first thing to know is that the Odoo server will serve (statically)
all files located in a *static/* folder, but prefixed with the addon
name. So, for example, if a file is located in
*addons/web/static/src/js/some\_file.js*, then it will be statically
available at the url
*your-odoo-server.com/web/static/src/js/some\_file.js*

The convention is to organize the code according to the following
structure:

  - *static*: all static files in general
      - *static/lib*: this is the place where js libs should be located,
        in a sub folder. So, for example, all files from the *jquery*
        library are in *addons/web/static/lib/jquery*
      - *static/src*: the generic static source code folder
          - *static/src/css*: all css files
          - *static/src/fonts*
          - *static/src/img*
          - *static/src/js*
              - *static/src/js/tours*: end user tour files (tutorials,
                not tests)
          - *static/src/scss*: scss files
          - *static/src/xml*: all qweb templates that will be rendered
            in JS
      - *static/tests*: this is where we put all test related files.
          - *static/tests/tours*: this is where we put all tour test
            files (not tutorials).

### Javascript coding guidelines

  - `use strict;` is recommended for all javascript files
  - Use a linter (jshint, ...)
  - Never add minified Javascript Libraries
  - Use camelcase for class declaration

More precise JS guidelines are detailed in the [github
wiki](https://github.com/odoo/odoo/wiki/Javascript-coding-guidelines).
You may also have a look at existing API in Javascript by looking
Javascript References.

### CSS coding guidelines

  - Prefix all your classes with *o\_\<module\_name\>* where
    *module\_name* is the technical name of the module ('sale',
    'im\_chat', ...) or the main route reserved by the module (for
    website module mainly, i.e. : 'o\_forum' for *website\_forum*
    module). The only exception for this rule is the webclient: it
    simply uses *o\_* prefix.
  - Avoid using *id* tag
  - Use Bootstrap native classes
  - Use underscore lowercase notation to name class


---
## File: ./content/contributing/handle_reviews.md

As soon as your `PR (Pull Request)` is ready for merging, a member of
the Odoo team will be automatically assigned for review. If the reviewer
has questions or remarks, they will post them as comments and you will
be notified by email. Those comments must be resolved for the
contribution to go forward.


---
## File: ./content/contributing/documentation.md

  - show-content

# Documentation

<div class="toctree" data-titlesonly="">

documentation/content\_guidelines documentation/rst\_cheat\_sheet
documentation/rst\_guidelines

</div>

This introductory guide will help you acquire the tools and knowledge
you need to write documentation, whether you plan to make a minor
content change or document an application from scratch.

<div class="seealso">

`Discover other ways to contribute to Odoo <../contributing>`

</div>

Read the `introduction to the reStructuredText language
<contributing/documentation/rst-intro>` if you are not familiar with it.
Then, you have two courses of action to start contributing to the
documentation, depending on whether you want to propose minor changes to
existing content or you instead want to work on significant changes to
new and existing content.

  - **For minor changes**, for example, adding a paragraph or fixing a
    typo, we recommend **using the GitHub interface**. This is the
    easiest and fastest way to submit your changes, and it is suitable
    for non-technical people. Jump directly to the
    `contributing/documentation/first-contribution` section to get
    started.
  - **For more complex changes**, it is necessary to **use Git** and
    work from a local copy of the documentation. Follow the instructions
    in the `contributing/documentation/setup` section to first prepare
    your environment.

## reStructuredText (RST)

The documentation is written in **reStructuredText** (RST), a
[lightweight markup
language](https://en.wikipedia.org/wiki/Lightweight_markup_language)
consisting of regular text augmented with markup, which allows including
headings, images, notes, and so on. This might seem a bit abstract, but
there is no need to worry; `RST (reStructuredText)` is not hard to
learn, especially if you intend to make minor changes to the content.

If you need to learn about a specific markup, head over to our `cheat
sheet for RST
<documentation/rst_cheat_sheet>`; it contains all the information you
should ever need for the documentation of Odoo.

<div class="important">

<div class="title">

Important

</div>

We kindly ask you to observe a set of `content
<documentation/content_guidelines>` and `RST
<documentation/rst_guidelines>` guidelines as you write documentation.
This ensures that you stay consistent with the rest of the documentation
and facilitates the approval of your content changes as the Odoo team
reviews them.

</div>

<div class="seealso">

\- `documentation/content_guidelines` - `documentation/rst_cheat_sheet`
- `documentation/rst_guidelines`

</div>

## Environment setup

The instructions below help you prepare your environment for making
local changes to the documentation and then push them to GitHub. Skip
this section and go to `contributing/documentation/first-contribution`
if you have already completed this step or want to make changes from the
GitHub interface.

1.  
2.  
3.  Go to
    [github.com/odoo/documentation](https://github.com/odoo/documentation)
    and click on the `Fork` button in the top right corner to create a
    fork (`your own copy`) of the repository on your account. This
    creates a copy of the codebase to which you can make changes without
    affecting the main codebase. Skip this step if you work at Odoo.

4.  
5.  
6.  Clone the sources with Git and navigate into the local repository.
    
    ``` console
    $ git clone git@github.com:odoo/documentation.git
    $ cd documentation
    ```

7.  Configure Git to push changes to your fork rather than to the main
    codebase. In the commands below, replace
    <span class="title-ref">\<your\_github\_account\></span> with the
    name of the GitHub account on which you created the fork. Skip this
    step if you work at Odoo.
    
    ``` console
    $ git remote add dev git@github.com:<your_github_account>/documentation.git
    ```

8.  Configure Git to ease the collaboration between writers coming from
    different systems.
    
    <div class="tabs">
    
    <div class="group-tab">
    
    Linux and macOS
    
    ``` console
    $ git config --global core.autocrlf input
    $ git config commit.template `pwd`/commit_template.txt
    ```
    
    </div>
    
    <div class="group-tab">
    
    Windows
    
    ``` console
    $ git config --global core.autocrlf true
    $ git config commit.template %CD%\commit_template.txt
    ```
    
    </div>
    
    </div>

9.  Install the latest release of
    [Python](https://wiki.python.org/moin/BeginnersGuide/Download) and
    [pip](https://pip.pypa.io/en/stable/installation/) on your machine.

10. Install the Python dependencies of the documentation with pip.
    
    ``` console
    $ pip install -r requirements.txt
    ```
    
    Verify that the installation directory of the Python dependencies is
    included in your system's <span class="title-ref">PATH</span>
    variable.
    
    <div class="tabs">
    
    <div class="group-tab">
    
    Linux and macOS
    
    Follow the [guide to update the PATH variable on Linux and
    macOS](https://unix.stackexchange.com/a/26059) with the installation
    path of the Python dependencies (by default `~/.local/bin`).
    
    </div>
    
    <div class="group-tab">
    
    Windows
    
    Follow the [guide to update the PATH variable on
    Windows](https://www.howtogeek.com/118594/how-to-edit-your-system-path-for-easy-command-line-access/)
    with the installation path of the Python dependencies.
    
    </div>
    
    </div>

11. Install Make.
    
    <div class="tabs">
    
    <div class="group-tab">
    
    Linux and macOS
    
    ``` console
    $ sudo apt install make -y
    ```
    
    </div>
    
    <div class="group-tab">
    
    Windows
    
    Follow the [guide to install Make on
    Windows](https://www.technewstoday.com/install-and-use-make-in-windows).
    
    </div>
    
    </div>

12. [Install pngquant](https://pngquant.org/).

13. That's it\! You are ready to `make your first contribution
    <contributing/documentation/first-contribution>` with Git.

## Make your first contribution

<div class="tabs">

<div class="tab">

Contribute from the GitHub interface \#. .. include::
create\_github\_account.rst \#. Verify that you are browsing the
documentation in the version that you intend to change. The version can
be selected from the dropdown in the top menu. \#. Head to the page that
you want to change and click on the `Edit on GitHub` button in the top
right corner of the page. \#. Click on the `Fork this repository` button
to create a fork (`your own
copy`) of the repository on your account. This creates a copy of the
codebase to which you can make changes without affecting the main
codebase. Skip this step if you work at Odoo.

![image](documentation/fork-repository.png)

\#. Make the desired changes while taking care of following the `content
<documentation/content_guidelines>` and `RST
<documentation/rst_guidelines>` guidelines.

<div class="tip">

<div class="title">

Tip

</div>

Click on the `Preview changes` button to review your contribution in a
more human-readable format. Be aware that the preview is not able to
handle all markups correctly. Notes and tips, for instance, are shown as
plain text.

</div>

\#. Scroll to the bottom of the page and fill out the small form to
propose your changes. In the first text box, write a very short summary
of your changes. For instance, "Fix a typo" or "Add documentation for
invoicing of sales orders." In the second text box, explain *why* you
are proposing these changes. Then, click on the `Propose changes`
button.

![image](documentation/propose-changes.png)

1.  Review your changes and click on the `Create pull request` button.

\#. Tick the `Allow edits from maintainer` checkbox. Skip this step if
you work at Odoo. \#. Review the summary that you wrote about your
changes and click on the `Create
pull request` button again. \#. .. include::
check\_mergeability\_status.rst \#. .. include:: handle\_reviews.rst \#.
.. include:: documentation/changes\_approved.rst

</div>

<div class="tab">

Contribute with Git

<div class="important">

<div class="title">

Important

</div>

Some steps of this guide require to be comfortable with Git. Here are
some [tutorials](https://www.atlassian.com/git/tutorials) and an
[interactive training](https://learngitbranching.js.org/) if you are
stuck at some point.

</div>

Now that your environment is set up, you can start contributing to the
documentation. In a terminal, navigate to the directory where you cloned
the sources and follow the guide below.

1.  Choose the version of the documentation to which you want to make
    changes. Keep in mind that contributions targeting an `unsupported
    version of Odoo
    </administration/maintain/supported_versions>` are not accepted.
    This guide assumes that the changes target the documentation of Odoo
    {CURRENT\_VERSION}, which corresponds to branch
    <span class="title-ref">{CURRENT\_BRANCH}</span>.

2.  Create a new branch starting from branch {CURRENT\_BRANCH}. Prefix
    the branch name with the base branch:
    <span class="title-ref">{CURRENT\_BRANCH}-...</span>. If you work at
    Odoo, suffix the branch name with your Odoo handle:
    <span class="title-ref">{CURRENT\_BRANCH}-...-xyz</span>.
    
    <div class="example">
    
    ``` console
    $ git switch -c {CURRENT_BRANCH}-explain-pricelists
    ```
    
    ``` console
    $ git switch -c {CURRENT_BRANCH}-explain-pricelists-xyz
    ```
    
    </div>

3.  Make the desired changes while taking care of following the `content
    <documentation/content_guidelines>` and `RST
    <documentation/rst_guidelines>` guidelines.

4.  Compress all PNG images that you added or modified.
    
    ``` console
    $ pngquant path/to/image.png
    $ mv path/to/image-fs8.png path/to/image.png
    ```

5.  Write a [redirect
    rule](https://github.com/odoo/documentation/tree/%7BBRANCH%7D/redirects/MANUAL.md)
    for every RST file that your renamed.

6.  Build the documentation with `make`. Then, open `_build/index.html`
    in your web browser to browse the documentation with your changes.
    
    <div class="tip">
    
    <div class="title">
    
    Tip
    
    </div>
    
    Use `make help` to learn about other useful commands.
    
    </div>

7.  Commit your changes. Write a clear commit message as instructed in
    the `Git guidelines
    <development/git_guidelines>`.
    
    ``` console
    $ git add .
    $ git commit
    ```

8.  Push your change to your fork, for which we added the remote alias
    <span class="title-ref">dev</span>.
    
    <div class="example">
    
    ``` console
    $ git push -u dev {CURRENT_BRANCH}-explain-pricelists
    ```
    
    </div>
    
    If you work at Odoo, push your changes directly to the main codebase
    whose remote alias is <span class="title-ref">origin</span>.
    
    <div class="example">
    
    ``` console
    $ git push -u origin {CURRENT_BRANCH}-explain-pricelists-xyz
    ```
    
    </div>

9.  Open a `PR (Pull Request)` on GitHub to submit your changes for
    review.
    
    1.  Go to the [compare page of the odoo/documentation
        codebase](https://github.com/odoo/documentation/compare).
    2.  Select **{CURRENT\_BRANCH}** for the base.
    3.  Click on `compare across forks`.
    4.  Select **\<your\_github\_account\>/odoo** for the head
        repository. Replace
        <span class="title-ref">\<your\_github\_account\></span> with
        the name of the GitHub account on which you created the fork.
        Skip this step if you work at Odoo.
    5.  Review your changes and click on the `Create pull request`
        button.
    6.  Tick the `Allow edits from maintainer` checkbox. Skip this step
        if you work at Odoo.
    7.  Complete the description and click on the `Create pull request`
        button again.

10. 
11. 
12. 

</div>

</div>


---
## File: ./content/contributing/install_git.md

[Install
Git](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git). It
is a command-line (`a text interface`) tool that allows tracking the
history of changes made to a file and, more importantly, working on
different versions of that file simultaneously. It means you do not need
to worry about overwriting someone else’s pending work when making
changes.

Verify that the installation directory of Git is included in your
system's <span class="title-ref">PATH</span> variable.

<div class="tabs">

<div class="group-tab">

Linux and macOS

Follow the [guide to update the PATH variable on Linux and
macOS](https://unix.stackexchange.com/a/26059) with the installation
path of Git (by default `/usr/bin/git`).

</div>

<div class="group-tab">

Windows

Follow the [guide to update the PATH variable on
Windows](https://www.howtogeek.com/118594/how-to-edit-your-system-path-for-easy-command-line-access/)
with the installation path of Git (by default `C:\\Program Files\\Git`).

</div>

</div>


---
## File: ./content/contributing/create_github_account.md

First, you need to [create a GitHub account](https://github.com/join).
Odoo uses GitHub to manage the source code of its products, and this is
where you will make your changes and submit them for review.


---
## File: ./content/contributing/development.md

  - show-content

# Development

<div class="toctree" data-titlesonly="">

development/coding\_guidelines development/git\_guidelines

</div>

If you are reading this, chances are that you are interested in learning
how to contribute to the codebase of Odoo. Whether that's the case or
you landed here by accident, we've got you covered\!

<div class="seealso">

`Discover other ways to contribute to Odoo <../contributing>`

</div>

When you feel ready, jump to the `contributing/development/setup`
section to begin your journey in contributing to the development of
Odoo.

## Environment setup

The instructions below help you prepare your environment for making
local changes to the codebase and then push them to GitHub. Skip this
section and go to `contributing/development/first-contribution` if you
have already completed this step.

1.  
2.  
3.  Go to [github.com/odoo/odoo](https://github.com/odoo/odoo) and click
    on the `Fork` button in the top right corner to create a fork (`your
    own copy`) of the repository on your account. Do the same with
    [github.com/odoo/enterprise](https://github.com/odoo/enterprise) if
    you have access to it. This creates a copy of the codebase to which
    you can make changes without affecting the main codebase. Skip this
    step if you work at Odoo.

4.  
5.  
6.  `Install Odoo from the sources <../administration/install/source>`.
    Make sure to fetch the sources through Git with SSH.

7.  Configure Git to push changes to your fork(s) rather than to the
    main codebase. If you work at Odoo, configure Git to push changes to
    the shared forks created on the account **odoo-dev**.
    
    <div class="tabs">
    
    <div class="tab">
    
    Link Git with your fork(s)
    
    In the command below, replace
    <span class="title-ref">\<your\_github\_account\></span> with the
    name of the GitHub account on which you created the fork(s).
    
    ``` console
    $ cd /CommunityPath
    $ git remote add dev git@github.com:<your_github_account>/odoo.git
    ```
    
    If you have access to
    <span class="title-ref">odoo/enterprise</span>, configure the
    related remote too.
    
    ``` console
    $ cd /EnterprisePath
    $ git remote add dev git@github.com:<your_github_account>/enterprise.git
    ```
    
    </div>
    
    <div class="tab">
    
    Link Git with odoo-dev
    
    ``` console
    $ cd /CommunityPath
    $ git remote add dev git@github.com:odoo-dev/odoo.git
    $ git remote set-url --push origin you_should_not_push_on_this_repository
    
    $ cd /EnterprisePath
    $ git remote add dev git@github.com:odoo-dev/enterprise.git
    $ git remote set-url --push origin you_should_not_push_on_this_repository
    ```
    
    </div>
    
    </div>

8.  That's it\! You are ready to `make your first contribution
    <contributing/development/first-contribution>`.

## Make your first contribution

<div class="important">

<div class="title">

Important

</div>

\- Odoo development can be challenging for beginners. We recommend you
to be knowledgeable enough to code a small module before contributing.
If that is not the case, take some time to go through the `developer
tutorials </developer/howtos>` to fill in the gaps. - Some steps of this
guide require to be comfortable with Git. Here are some
[tutorials](https://www.atlassian.com/git/tutorials) and an [interactive
training](https://learngitbranching.js.org/) if you are stuck at some
point.

</div>

Now that your environment is set up, you can start contributing to the
codebase. In a terminal, navigate to the directory where you installed
Odoo from sources and follow the guide below.

1.  Choose the version of Odoo to which you want to make changes. Keep
    in mind that contributions targeting an `unsupported version of Odoo
    </administration/maintain/supported_versions>` are not accepted.
    This guide assumes that the changes target Odoo {CURRENT\_VERSION},
    which corresponds to branch
    <span class="title-ref">{CURRENT\_BRANCH}</span>.

2.  Create a new branch starting from branch {CURRENT\_BRANCH}. Prefix
    the branch name with the base branch:
    <span class="title-ref">{CURRENT\_BRANCH}-...</span>. If you work at
    Odoo, suffix the branch name with your Odoo handle:
    <span class="title-ref">{CURRENT\_BRANCH}-...-xyz</span>.
    
    <div class="example">
    
    ``` console
    $ git switch -c {CURRENT_BRANCH}-fix-invoices
    ```
    
    ``` console
    $ git switch -c {CURRENT_BRANCH}-fix-invoices-xyz
    ```
    
    </div>

3.  [Sign the Odoo CLA](%7BGITHUB_PATH%7D/doc/cla/sign-cla.md) if not
    already done. Skip this step if you work at Odoo.

4.  Make the desired changes to the codebase. When working on the
    codebase, follow these rules:
    
      - Keep your changes focused and specific. It is best to work on
        one particular feature or bug fix at a time rather than tackle
        multiple unrelated changes simultaneously.
      - Respect the [stable
        policy](https://github.com/odoo/odoo/wiki/Contributing#what-does-stable-mean)
        when working in another branch than
        <span class="title-ref">master</span>.
      - Follow the `coding guidelines <development/coding_guidelines>`.
      - Test your changes thoroughly and `write tests
        </developer/reference/addons/testing>` to ensure that everything
        is working as expected and that there are no regressions or
        unintended consequences.

5.  Commit your changes. Write a clear commit message as instructed in
    the `Git guidelines
    <development/git_guidelines>`.
    
    ``` console
    $ git add .
    $ git commit
    ```

6.  Push your change to your fork, for which we added the remote alias
    <span class="title-ref">dev</span>.
    
    <div class="example">
    
    ``` console
    $ git push -u dev {CURRENT_BRANCH}-fix-invoices-xyz
    ```
    
    </div>

7.  Open a `PR (Pull Request)` on GitHub to submit your changes for
    review.
    
    1.  Go to the [compare page of the odoo/odoo
        codebase](https://github.com/odoo/odoo/compare), or the [compare
        page of the odoo/enterprise
        codebase](https://github.com/odoo/enterprise/compare), depending
        on which codebase your changes target.
    2.  Select **{CURRENT\_BRANCH}** for the base.
    3.  Click on `compare across forks`.
    4.  Select **\<your\_github\_account\>/odoo** or
        **\<your\_github\_account\>/enterprise** for the head
        repository. Replace
        <span class="title-ref">\<your\_github\_account\></span> with
        the name of the GitHub account on which you created the fork or
        by **odoo-dev** if you work at Odoo.
    5.  Review your changes and click on the `Create pull request`
        button.
    6.  Tick the `Allow edits from maintainer` checkbox. Skip this step
        if you work at Odoo.
    7.  Complete the description and click on the `Create pull request`
        button again.

8.  
9.  
10. Once your changes are approved, the review merges them and they
    become available for all Odoo users after the next code update\!


---
## File: ./content/contributing/configure_git_authorship.md

Configure Git to identify yourself as the author of your future
contributions. Enter the same email address you used to register on
GitHub.

``` console
$ git config --global user.name “Your Name”
$ git config --global user.email “youremail@example.com”
```


---
## File: ./content/contributing/check_mergeability_status.md

At the bottom of the page, check the mergeability status and address any
issues.


---
## File: ./content/last_build.md

  - orphan

  - nosearch

# Last build date

The last time the documentation was built in version was on .


---
## File: ./content/developer.md

  - nosearch

  - show-content

  - hide-page-toc

  - show-toc

# Developer

Learn through tutorials and get help using reference guides.

<div class="toctree" data-titlesonly="">

developer/tutorials developer/howtos developer/reference

</div>


---
## File: ./content/administration.md

  - nosearch

  - show-content

  - hide-page-toc

  - show-toc

# Install and Maintain

These guides provide instructions on how to install, maintain and
upgrade Odoo databases.

<div class="seealso">

`History of Versions <administration/maintain/supported_versions>`

</div>

<div class="toctree" data-titlesonly="">

administration/install administration/maintain administration/upgrade
administration/odoo\_sh

</div>


---
## File: ./content/index.md

  - nosearch

# Odoo Documentation

<div class="toctree">

applications administration developer contributing

</div>


---
## File: ./content/legal.md

  - show-content

  - hide-page-toc

  - custom-css  
    legal.css

  - orphan

# Legal

<div class="toctree" hidden="">

legal/cla legal/licenses legal/terms

</div>


---
## File: ./content/contributing.md

  - show-content

  - hide-page-toc

# Contributing

First off, **thank you** for landing here and considering contributing
to Odoo\!

This documentation serves as a guide for first-timer and veteran
contributors. As an open-core project, Odoo accepts contributions from
everyone, Odoo employees and members of the Odoo community alike. The
Odoo community comprises users, developers, and other interested parties
who contribute their time and expertise.

Depending on your skill set and interest, there are many ways to
contribute to Odoo. The table below lists the most important of them.

<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 35%" />
<col style="width: 25%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="header">
<th>Contribution</th>
<th>Description</th>
<th>Resources</th>
<th>Target Audience</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Join the community</td>
<td>Participate in discussions on the forums, help answer questions, and assist other members of the Odoo community.</td>
<td><ul>
<li><a href="https://www.odoo.com/forum">Odoo forums</a></li>
</ul></td>
<td>Anyone interested in Odoo</td>
</tr>
<tr class="even">
<td>Submit bug reports</td>
<td>Help improve the stability of Odoo by reporting the bugs that you discover in <code class="interpreted-text" role="doc">supported
versions &lt;/administration/maintain/supported_versions&gt;</code> directly to Odoo support. Make sure to include as many details (version, environment, test scenario...) as possible. If you don't have the Odoo Enterprise license required for contacting the support, open a new issue on the GitHub repository of Odoo.</td>
<td><ul>
<li><a href="https://www.odoo.com/help">Odoo support</a></li>
<li><a href="https://github.com/odoo/odoo/issues">Issue tracker on GitHub</a></li>
</ul></td>
<td>Users of Odoo</td>
</tr>
<tr class="odd">
<td>Translate Odoo</td>
<td>Translate the user interface and documentation of Odoo into different languages.</td>
<td><ul>
<li><a href="https://explore.transifex.com/odoo/">Odoo project on Transifex</a></li>
</ul></td>
<td>Anyone fluent in multiple languages</td>
</tr>
<tr class="even">
<td>Contribute to the codebase</td>
<td>Submit pull requests to the Odoo GitHub repositories to fix bugs, add new features, or improve the performance and reliability of the product. You can also review and comment on pull requests from other contributors. By contributing to the codebase, you can make a direct and lasting impact on the quality and features of Odoo.</td>
<td><ul>
<li><code class="interpreted-text" role="doc">Guide: Contributing to the codebase &lt;contributing/development&gt;</code></li>
<li><code class="interpreted-text" role="doc">Developer tutorials &lt;/developer/howtos&gt;</code></li>
</ul></td>
<td>Developers with experience in Python and web development</td>
</tr>
<tr class="odd">
<td>Contribute to the documentation</td>
<td>Submit corrections and improvements to the Odoo documentation. The product evolves fast, and it can be challenging to consistently reflect these changes in the documentation. By updating the documentation, you can help many users find their way in Odoo.</td>
<td><ul>
<li><code class="interpreted-text" role="doc">Guide: Contributing to the documentation &lt;contributing/documentation&gt;</code></li>
</ul></td>
<td>Anyone interested in improving the Odoo documentation</td>
</tr>
<tr class="even">
<td>Create custom modules</td>
<td>Develop new modules to extend the functionality of Odoo. Custom modules can be made available for free or paid on the Odoo App Store or on any other Odoo modules library. By creating custom modules and making them available to others, you can help grow the Odoo ecosystem and provide additional value to users of the platform.</td>
<td><ul>
<li><a href="https://apps.odoo.com/apps">Odoo Apps Store</a></li>
</ul></td>
<td>Developers with experience in Python and web development</td>
</tr>
</tbody>
</table>

<div class="important">

<div class="title">

Important

</div>

It is mainly Odoo employees who develop new features for the codebase
and write new content for the documentation. Be sure to discuss any idea
for a new feature or page with the Odoo team so they can give you the
green light before you begin working on it. Some features may already be
in development on their side, and only approved features can be merged.

</div>

<div class="toctree" data-titlesonly="">

contributing/development contributing/documentation

</div>


---
## File: ./content/applications/inventory_and_mrp.md

  - nosearch

# Inventory & MRP

<div class="toctree">

inventory\_and\_mrp/inventory inventory\_and\_mrp/manufacturing
inventory\_and\_mrp/purchase

</div>


---
## File: ./content/applications/sales/sales/amazon_connector.md

  - nosearch

# Amazon Connector

<div class="toctree" data-titlesonly="">

amazon\_connector/features amazon\_connector/setup
amazon\_connector/manage amazon\_connector/update

</div>


---
## File: ./content/applications/sales/sales/products_prices/taxes.md

  - nosearch

# Set taxes

<div class="toctree" data-titlesonly="">

/applications/finance/accounting/taxation/taxes/default\_taxes
/applications/finance/accounting/taxation/taxes/fiscal\_positions
/applications/finance/accounting/taxation/taxes/taxes
/applications/finance/accounting/taxation/taxes/taxcloud
/applications/finance/accounting/taxation/taxes/B2B\_B2C

</div>


---
## File: ./content/applications/sales/sales/products_prices/prices/pricing.md

# How to adapt your prices to your customers and apply discounts

Odoo has a powerful pricelist feature to support a pricing strategy
tailored to your business. A pricelist is a list of prices or price
rules that Odoo searches to determine the suggested price. You can set
several critarias to use a specific price: periods, min. sold quantity
(meet a minimum order quantity and get a price break), etc.

As pricelists only suggest prices, they can be overridden by vendors
completing sales orders. Choose your pricing strategy from `Sales -->
Settings`.

![image](pricing/pricing_options.png)

<div class="note">

<div class="title">

Note

</div>

\* *A single sale price per product:* doesn't let you adapt prices, it
use default product price ; \* *Different prices per customer segment:*
you will set several prices per products ; \* *Advanced pricing based on
formula:* will let you apply discounts, margins and roundings.

</div>

## Several prices per product

To apply several prices per product, select *Different prices per
customer segment* in `Sales --> Settings`. Then open the *Sales* tab in
the product detail form. You can settle following strategies.

### Prices per customer segment

Create pricelists for your customer segments: e.g. registered, premium,
etc.

![image](pricing/pricing_customer.png)

The default pricelist applied to any new customer is *Public Pricelist*.
To segment your customers, open the customer detail form and change the
*Sale Pricelist* in the *Sales & Purchases* tab.

![image](pricing/customer_pricelist.png)

### Temporary prices

Apply deals for bank holidays, etc. Enter start and end dates dates.

![image](pricing/pricing_period.png)

<div class="tip">

<div class="title">

Tip

</div>

Make sure you have default prices set in the pricelist outside of the
deals period. Otherwise you might have issues once the period over.

</div>

### Prices per minimum quantity

![image](pricing/pricing_quantity.png)

<div class="note">

<div class="title">

Note

</div>

The prices order does not matter. The system is smart and applies first
prices that match the order date and/or the minimal quantities.

</div>

## Discounts, margins, roundings

*Advanced pricing based on formula* allows to set price change rules.
Changes can be relative to the product list/catalog price, the product
cost price, or to another pricelist. Changes are calculated via
discounts or surcharges and can be forced to fit within floor (minimum
margin) and ceilings (maximum margins). Prices can be rounded to the
nearest cent/dollar or multiple of either (nearest 5 cents, nearest 10
dollars).

Once installed go to `Sales --> Configuration --> Pricelists` (or
`Website Admin --> Catalog --> Pricelists` if you use e-Commerce).

![image](pricing/pricing_formula.png)

Each pricelist item can be associated to either all products, to a
product internal category (set of products) or to a specific product.
Like in second option, you can set dates and minimum quantities.

![image](pricing/pricelist_apply.png)

<div class="note">

<div class="title">

Note

</div>

\* Once again the system is smart. If a rule is set for a particular
item and another one for its category, Odoo will take the rule of the
item. \* Make sure at least one pricelist item covers all your products.

</div>

There are 3 modes of computation: fix price, discount & formula.

![image](pricing/price_computation.png)

Here are different price settings made possible thanks to formulas.

### Discounts with roundings

e.g. 20% discounts with prices rounded up to 9.99.

![image](pricing/formula_discount.png)

### Costs with markups (retail)

e.g. sale price = 2\*cost (100% markup) with $5 of minimal margin.

![image](pricing/formula_cost.png)

## Prices per country

Pricelists can be set by countries group. Any new customer recorded in
Odoo gets a default pricelist, i.e. the first one in the list matching
the country. In case no country is set for the customer, Odoo takes the
first pricelist without any country group.

The default pricelist can be replaced when creating a sales order.

<div class="tip">

<div class="title">

Tip

</div>

You can change the pricelists sequence by drag & drop in list view.

</div>

## Compute and show discount % to customers

In case of discount, you can show the public price and the computed
discount % on printed sales orders and in your eCommerce catalog. To do
so:

  - Check *Allow discounts on sales order lines* in `Sales -->
    Configuration -->
    Settings --> Quotations & Sales --> Discounts`.
  - Apply the option in the pricelist setup form.

![image](pricing/discount_options.png)

<div class="seealso">

  - `currencies`
  - `/applications/websites/ecommerce/maximizing_revenue/pricing`

</div>


---
## File: ./content/applications/sales/sales/products_prices/prices/currencies.md

# How to sell in foreign currencies

Pricelists can also be used to manage prices in foreign currencies.

  - Check *Allow multi currencies* in `Invoicing/Accounting -->
    Settings`. As admin, you need *Adviser* access rights on
    Invoicing/Accounting apps.
  - Create one pricelist per currency. A new *Currency* field shows up
    in pricelist setup form.

<div class="tip">

<div class="title">

Tip

</div>

To activate a new currency, go to `Accounting --> Configuration -->
Currencies`, select it in the list and press *Activate* in the top-right
corner. Now it will show up in currencies drop-down lists.

</div>

Prices in foreign currencies can be defined in two fashions.

## Automatic conversion from public price

The public price is in your company's main currency (see `Accounting -->
Settings`) and is set in product detail form.

![image](currencies/public_price.png)

The conversion rates can be found in `Accounting --> Configuration -->
Currencies`. They can be updated from Yahoo or the European Central Bank
at your convenience: manually, daily, weekly, etc. See `Accounting -->
Settings`.

![image](currencies/currency_rate.png)

![image](currencies/prices_conversion.png)

## Set your own prices

This is advised if you don't want your pricing to change along with
currency rates.

![image](currencies/pricing_currency.png)

<div class="seealso">

  - `pricing`

</div>


---
## File: ./content/applications/sales/sales/products_prices/products/variants.md

# Product variants

Product variants are used to give single products a variety of different
characteristics, such as size and color. Products using variants can be
managed at the product template level (for all attributes and variants
of that product), and/or at the variant level (for individual variants).

As an example, a company selling t-shirts may have the following
product:

  - T-shirt
      - Color: Blue, Red, White, Black
      - Size: S, M, L, XL, XXL

In this example, the **T-Shirt** is the product template, and **T-Shirt,
S, Blue** is a product variant. **Color** and **size** are the
attributes. **S** and **Blue** are values.

The above example has a total of 20 different product variants (5 sizes
x 4 colors). Each one of these has its own inventory, sales, etc.

## Configuration

### Activating product variants

To use product variants, go to `Sales --> Configuration --> Settings -->
Product Catalog`, and enable the `Variants` feature. Finally, click
`Save` to apply the setting.

![Activating product
variants.](variants/activating-variants-setting.png)

### Creating attributes

Attributes need to be created before product variants can be set up.
Attributes can be accessed via `Sales --> Configuration --> Products -->
Attributes`.

<div class="note">

<div class="title">

Note

</div>

The order of attributes on the `Attributes` page dictates how they
appear on the `Product Configurator`, `Point of Sale` dashboard, and
`eCommerce` pages.

</div>

To create a new attribute, click `Create`. First, choose an attribute
name, such as "Color" or "Size."

![Attribute creation window.](variants/attribute-creation.png)

Then, select a `Display Type`, which determines how this product will be
shown on the `eCommerce` page, `Point of Sale` dashboard, and `Product
Configurator`.

  - `Radio`: options appear in a bullet style list.
  - `Select`: options appear in a dropdown menu.
  - `Color`: options appear as small colored squares, which reflect any
    HTML color codes set.

![Display Types on Product Configurator.](variants/display-types.png)

The `Variants Creation Mode` informs Odoo when to automatically create a
new variant once an attribute is added to a product.

  - `Instantly`: creates all possible variants as soon as attributes and
    values are added to a product template.
  - `Dynamically`: creates variants only when corresponding attributes
    and values are added to a sales order.
  - `Never`: never automatically creates variants.

<div class="note">

<div class="title">

Note

</div>

Once added to a product, an attribute's `Variants Creation Mode` cannot
be edited.

</div>

Values should be added to an attribute before saving, but more values
can be added at any time, if needed. To add a value, click `Add a line`.
From there, you can:

1.  Type in the value's name.
2.  Check a box to indicate whether or not the value is custom (i.e. the
    customer provides unique specifications).
3.  Specifically for colors, add an HTML color code to make it even
    easier for salespeople and customers to know what they're selecting.

A color code can be selected either by dragging the slider around or by
entering a specific HTML color code (e.g. \#FF0077).

![Selecting a color.](variants/picking-a-color.png)

Finally, click `Save` to finish creating the attribute.

<div class="tip">

<div class="title">

Tip

</div>

Attributes can also be created directly from the product template by
adding a new line and typing the name into the `Variants` tab.

</div>

After an attribute is added to a product, a new tab appears on the
attribute's page called `Related Products`. This tab lists every product
in the database that is currently using the attribute.

### Creating product variants

After creating an attribute, use the attribute to create a product
variant by going to `Sales --> Products --> Products`. Then, select an
existing product and click `Edit`, or create a new product by clicking
`Create`.

The `Variants` smart button at the top of the product template indicates
the number of currently configured variants on the product.

To add a new variant, click on the `Variants` tab, then click on `Add a
line` to add any attributes and values. When all the attributes and
values have been added, click `Save`.

<div class="tip">

<div class="title">

Tip

</div>

Similar product variant creation processes are accessible through the
Purchase, Inventory, and eCommerce applications.

</div>

### Managing product exclusions

The following examples are all based on a product template that has two
attributes:

  - T-Shirt
      - Color: Blue, Red, White
      - Size: S, M, L, XL, XXL

With the above product template, there are 15 different t-shirt variants
in three different colors and five different sizes. If the white
t-shirts are not available in the XXL size, then that variant can be
deactivated.

To deactivate a particular product variant, go to `Sales --> Products
--> Products` and select the relevant product. Next, click on the
`Configure Variants` button, open the relevant product variant attribute
value form (in this example, the `White Color` attribute), and then
click on `Edit`.

In the `Exclude for` section, click `Add a line` and select any
product(s) and/or specific attribute values that are currently
unavailable. Finally, click `Save` to apply the setting, and Odoo will
automatically show the product variant as unavailable on the eCommerce
page.

![Excluding attributes.](variants/attributes-exclusions.png)

### Setting a price per variant

Extra costs can be added to a product's standard price for specific
product variants.

To do this, open `Sales --> Products --> Products`, and click on the
relevant product. Next, click on `Configure Variants` to access the list
of product variant values.

Then, click on a variant value, and `Edit`. In the `Value Price Extra`
field, type in the additional cost for this particular value. This
amount is added to the standard price. Finally, click `Save` to apply
the extra price to the value.

![Value Price Extra setting.](variants/value-price-extra.png)

## Impact of variants

  - `Barcode`: barcodes are associated with each variant instead of the
    product template. Each individual variant can have its own unique
    barcode/SKU.
  - `Price`: every product variant has its own public price, which is
    the sum of the product template price and any extra charges for
    particular attributes. For example, a red shirt's cost is $23
    because the shirt's template price is $20, plus an additional $3 for
    the red color variant. Pricelist rules can be configured to apply to
    the product template or to the variant.
  - `Inventory`: inventory is counted for each individual product
    variant. On the product template form, the inventory reflects the
    sum of all variants, but the actual inventory is computed by
    individual variants.
  - `Picture`: each product variant can have its own specific picture.

<div class="note">

<div class="title">

Note

</div>

Changes to the product template automatically apply to every variant of
that product.

</div>


---
## File: ./content/applications/sales/sales/products_prices/products/import.md

# How to import Products with Categories and Variants

Import templates are provided in the **Import Tool** of the most common
data to import (contacts, products, bank statements, etc.). You can open
them with any spreadsheet software (Microsoft Office, OpenOffice, Google
Drive, etc.).

## How to customize the file

  - Remove columns you don't need. However, we advise you to not remove
    the *ID* column (see why below).
  - Set a unique ID to every single record by dragging down the ID
    sequencing.
  - Don't change the labels of columns you want to import. Otherwise,
    Odoo won't recognize them anymore, and you will have to map them on
    your own in the import screen.
  - Feel free to add new columns, but the fields need to exist in Odoo.
    If Odoo fails in matching the column name with a field, you can
    match it manually when importing by browsing a list of available
    fields.

## Why an “ID” column?

The ID is a truly unique identifier for the line item. Feel free to use
one from your previous software to ease the transition into Odoo.

Setting an ID is not mandatory when importing, but it helps in many
cases:

  - Update imports: you can import the same file several times without
    creating duplicates.
  - Import relation fields (see here below).

## How to import relation fields

An Odoo object is always related to many other objects (e.g., a product
is linked to product categories, attributes, vendors, etc.). To import
those relations, you need to import the records of the related object
first from their own list menu.

You can do this using the name of the related record or its ID. The ID
is expected when two records have the same name. In such a case, add " /
ID" at the end of the column title (e.g., for product attributes:
Product Attributes / Attribute / ID).


---
## File: ./content/applications/sales/sales/products_prices/prices.md

  - nosearch

# Manage your pricing

<div class="toctree" data-titlesonly="">

prices/pricing prices/currencies

</div>


---
## File: ./content/applications/sales/sales/products_prices/products.md

  - nosearch

# Manage your products

<div class="toctree" data-titlesonly="">

products/import products/variants

</div>


---
## File: ./content/applications/sales/sales/products_prices/returns.md

# Process returns and refunds

The `Sales` app provides two different ways to process returns based on
whether an invoice has been sent or not.

## Before invoicing

Returns are completed using *Reverse Transfers* when a customer decides
to return a product before an invoice has been sent or validated.

<div class="note">

<div class="title">

Note

</div>

In order to use Reverse Transfers, the `Inventory` app must also be
installed.

</div>

To start a return, open the `Sales` app, navigate to the customer's
sales order, and click on the `Delivery` smart button to open the
associated delivery order.

On the validated delivery order, click `Return` to open the `Reverse
Transfer` pop-up window. By default, the `Quantity` matches the
validated quantities from the delivery order. Update the quantities if
necessary. Click on the trash icon next to a line item to remove it from
the return.

![The "Reverse Transfer" pop-up window, to make a return before
invoicing the customer.](returns/reverse-transfer-popup.png)

Next, click `Return` to confirm the return. This generates a new
warehouse operation for the incoming returned product(s). Upon receiving
the return, the warehouse team validates the warehouse operation. Then,
on the original sales order, the `Delivered` quantity will reflect the
difference between the initial validated quantities and the returned
quantities.

![The updated "Delivered" quantity on the sales order after the reverse
transfer.](returns/updated-sales-quantities.png)

When an invoice is created, the customer receives an invoice only for
the products they are keeping.

## After invoicing

Sometimes, customers return an item after they receive and/or pay for
their invoice. In these cases, a return using only *Reverse Transfers*
is insufficient since validated or sent invoices cannot be changed.
However, *Reverse Transfers* can be used in conjunction with *Credit
Notes* to complete the customer's return.

To start a return, navigate to the relevant sales order. If there is a
payment registered on the sales order, then the payment details will
appear in the Chatter, and the invoice (accessible through the
`Invoices` smart button) will have a green banner across it.

From the sales order, click on the `Delivery` smart button to view the
validated delivery order. Then, click `Return` to open the `Reverse
Transfer` pop-up window. Next, edit the `Product` or `Quantity` as
needed for the return, and then click `Return`. This generates a new
warehouse operation for the incoming returned product(s), which is
validated by the warehouse team once the return is received. Then, on
the sales order, the `Delivered` quantity will reflect the difference
between the initial validated quantities and the returned quantities.

To process a refund, navigate to the relevant invoice (from the sales
order, click on the `Invoices` smart button). Click `Add Credit Note`
from the validated invoice.

![The "Credit Note" pop-up window, to issue a credit to the customer
after invoicing.](returns/credit-note-popup.png)

A `Reason` for the credit and a `Specific Journal` to use to process the
credit can be specified. If a `Specific Reversal Date` is selected, then
a `Refund
Date` must also be selected.

After the information is filled in, click `Reverse`. Then, `Edit` the
draft as needed, and finally, click `Confirm` to confirm the credit
note.


---
## File: ./content/applications/sales/sales/amazon_connector/setup.md

# Configure Amazon Connector in Odoo

## Register your Amazon account in Odoo

<div id="amazon/setup">

To register your seller account in Odoo, navigate to `Sales -->
Configuration
--> Settings --> Connectors --> Amazon Sync --> Amazon Accounts` and
click on `CREATE`.

</div>

1.  Choose a meaningful name for your account (e.g.
    <span class="title-ref">Europe</span>), and select your `Sign-up
    Marketplace`. This is the original sign-up marketplace of your
    seller account (e.g. if you created your account on Amazon Germany,
    your sign-up marketplace will be
    <span class="title-ref">amazon.de</span>)
2.  Upon saving, a button to `link with Amazon` appears. Click on it to
    be redirected to the Amazon login page, or directly to the consent
    page if you are already logged in. There, confirm that you want
    Amazon to give Odoo access to your account and related data.
3.  Amazon redirects you to Odoo, with your account registered.

Once the account is registered, the marketplaces available to this
account are synchronized and listed under the `Marketplaces` tab. If you
wish, you can remove some items from the list of synchronized
marketplaces to disable their synchronization.

## Match database products in Amazon

When an Amazon order is synchronized, up to three sales order items are
created in Odoo for each product sold on Amazon: one for the marketplace
product, one for the shipping charges (if any) and one for the gift
wrapping charges (if any).

<div id="amazon/matching">

The selection of a database product for a sales order item is done by
matching its **internal reference** with the **SKU** for marketplace
items, the **shipping code** for delivery charges, and the **gift
wrapping** code for gift wrapping charges.

</div>

For marketplace products, pairings are saved as **Amazon Offers** which
are listed under the **Offers** stat button on the account form. Offers
are automatically created when the pairing is established and are used
for subsequent orders to lookup SKUs. If no offer with a matching SKU is
found, `the internal reference is used instead <amazon/matching>`.

<div class="tip">

<div class="title">

Tip

</div>

It is possible to force the pairing of a marketplace item with a
specific product by changing either the product or the SKU of an offer.
The offer can be manually created if it was not automatically done yet.
This is useful if you do not use the internal reference as the SKU or if
you sell the product under different conditions.

</div>

If no database product with a matching internal reference is found for a
given SKU or gift wrapping code, a default database product **Amazon
Sale** is used. The same is done with the default product **Amazon
Shipping** and the shipping code.

<div class="note">

<div class="title">

Note

</div>

To modify the default products, activate the `developer mode
<developer-mode>` and navigate to `Sales --> Configuration --> Settings
--> Connectors --> Amazon Sync -->
Default Products`.

</div>

## Configure taxes of products

To allow for tax reporting of Amazon sales with Odoo, the taxes applied
to the sales order items are those set on the product or determined by
the fiscal position. Make sure to have set the correct taxes on your
products in Odoo or to have it done by a fiscal position, to avoid
discrepancies in the subtotals between Seller Central and Odoo.

<div class="note">

<div class="title">

Note

</div>

As Amazon does not necessarily apply the same taxes as those configured
in Odoo, it may happen that order totals differ by a few cents from that
on Seller Central. Those differences can be resolved with a write-off
when reconciling the payments in Odoo.

</div>

## Add an unsupported marketplace

Some Amazon Marketplaces, such as Amazon Brazil, are not created by
default as they are not officially supported by Odoo but might be
compatible with your seller account. These marketplaces can be added
manually should you wish to use them. See `here
<amazon/supported-marketplaces>` for the exhaustive list of natively
supported marketplaces.

<div class="tip">

<div class="title">

Tip

</div>

To find out if a marketplace is eventually compatible, check the [Amazon
Documentation](https://developer-docs.amazon.com/amazon-shipping/docs/seller-central-urls).
The marketplace must belong to the same region as that of your seller
account.

</div>

To add a new marketplace, activate the `developer mode
<developer-mode>`.

Once that is done, go to `Sales --> Configuration --> Settings -->
Connectors -->
Amazon Sync --> Amazon Marketplaces`.

From there, create a new marketplace record. Enter the Marketplace ID
and select the Amazon Region for your marketplace as described in the
[Amazon Documentation for marketplace
IDs](https://developer-docs.amazon.com/amazon-shipping/docs/marketplace-ids),
and the Seller Central URL as described in the [Amazon Documentation for
seller central
URLs](https://developer-docs.amazon.com/amazon-shipping/docs/seller-central-urls).

Set the name of the record to `Amazon.<country code>` to easily retrieve
it (e.g.: `Amazon.se`). The `API Identifier`, the `Region` and the
`Seller Central URL` fields should respectively hold the
*MarketplaceId*, the selected Amazon region and the *Seller Central URL*
values from the Amazon Documentation.

Once the marketplace is saved, update the Amazon Account configuration
by going to `Sales --> Configuration --> Settings --> Connectors -->
Amazon Sync -->
Amazon Accounts`. Open the account on which you wish to use the new
marketplace, go to the `Marketplaces` tab and click on `Update available
marketplaces` (an animation should confirm the success of the
operation). Newly added marketplaces are automatically added to the list
of synchronized marketplaces. If the new marketplace is not added to the
list, it means that it is either incompatible or unavailable for your
seller account.

<div class="important">

<div class="title">

Important

</div>

As manually added marketplaces are not officially supported by Odoo,
there is no guarantee that adding one as described above will work, nor
can this be considered as a bug when contacting Odoo Support.

</div>

<div class="seealso">

\- `features` - `manage`

</div>


---
## File: ./content/applications/sales/sales/amazon_connector/manage.md

# Manage Amazon orders in Odoo

## Synchronization of orders

Orders are automatically fetched from Amazon and synchronized in Odoo at
regular intervals. The synchronization is based on the Amazon status:
only orders whose status has changed since the last synchronization are
fetched from Amazon. For **FBA** (Fulfilled by Amazon), only **Shipped**
and **Canceled** orders are fetched. For **FBM** (Fulfilled by
Merchant), the same is done for **Unshipped** and **Canceled** orders.
For each synchronized order, a sales order and a customer are created in
Odoo if they are not yet registered.

When an order is canceled in Amazon and was already synchronized in
Odoo, the corresponding sales order is automatically canceled in Odoo.

<div class="note">

<div class="title">

Note

</div>

To force the synchronization of an order whose status has not changed
since the last synchronization, activate the `developer mode
<developer-mode>`, navigate to your Amazon account and modify the date
under `Orders Follow-up --> Last Order Sync`. Pick a date anterior to
the last status change of the order that you wish to synchronize and
save.

</div>

<div class="tip">

<div class="title">

Tip

</div>

To synchronize immediately the orders of your Amazon account switch to
`developer mode
<developer-mode>`, head to your Amazon account and click on **SYNC
ORDERS**. The same can be done with pickings by clicking on **SYNC
PICKINGS**.

</div>

## Manage deliveries in FBM

When a **FBM** (Fulfilled by Merchant) order is synchronized in Odoo, a
picking is created along with the sales order and the customer. You can
either ship all the ordered products to your customer at once or ship
products partially by using backorders.

When a picking related to the order is confirmed, a notification is sent
to Amazon who will, in turn, notify the customer that the order (or a
part of it) is on its way.

<div class="important">

<div class="title">

Important

</div>

Starting from July 2021, Amazon requires that deliveries be provided
with a tracking reference. This concerns all marketplaces.

If this is not already done, you need to `install <general/install>` the
**Delivery Costs** module in order to provide the tracking reference.
There is unfortunately no workaround to comply with this new Amazon
policy.

</div>

<div class="tip">

<div class="title">

Tip

</div>

\- If your chosen carrier isn't one supported by Odoo, you can still
create a carrier bearing its name (e.g. create a carrier named
<span class="title-ref">Colissimo</span>). This name is case
insensitive, but be careful about typos, as Amazon won't recognize them.
- Create a delivery carrier named <span class="title-ref">Self
Delivery</span> to inform Amazon that you make your own deliveries. You
still have to enter a tracking reference. - Keep in mind that the
customer is notified by email about the delivery, and the carrier and
tracking reference are displayed in the email to the customer.

</div>

<div class="seealso">

\-
`../../../inventory_and_mrp/inventory/shipping/setup/third_party_shipper`

</div>

## Follow deliveries in FBA

When a **FBA** (Fulfilled by Amazon) order is synchronized in Odoo, a
stock move is recorded for each sales order item so that it is saved in
your system. Inventory managers can find such moves in `Inventory -->
Reporting --> Product Moves`. They pick up products in a specific
inventory location called **Amazon**. This location represents your
stock in Amazon's warehouses and allows you to manage the stock of your
products under the FBA program.

<div class="tip">

<div class="title">

Tip

</div>

To follow your Amazon (FBA) stock in Odoo, you can make an inventory
adjustment after replenishing it. You can also trigger an automated
replenishment from reordering rules on the Amazon location.

</div>

<div class="tip">

<div class="title">

Tip

</div>

The Amazon location is configurable by Amazon account managed in Odoo.
All accounts of the same company use the same location by default. It is
however possible to follow the stock by marketplace. First, remove the
marketplace for which you want to follow the stock separately from the
list of synchronized marketplaces. Then, create another registration for
this account and remove all marketplaces, except the one to isolate from
the others. Finally, assign another stock location to the second
registration of your account.

</div>

## Issue invoices and register payments

You can issue invoices for Amazon orders in Odoo. Click **Create
Invoice** in the sales order to do so. You can also do it in batch from
the list view of orders. Then, confirm and send the invoices to your
customers.

<div class="tip">

<div class="title">

Tip

</div>

To display only Amazon-related orders on the list view, you can filter
orders based on the sales team.

</div>

As the customer has paid Amazon as an intermediary, you should register
invoice payments in a payment journal dedicated to Amazon (e.g. Amazon
Payments, with a dedicated intermediary account). You can do the same
with the vendor bill received from Amazon and dedicated to commissions.
When you receive the balance on your bank account at the end of the
month and record your bank statements in Odoo, you simply credit the
Amazon intermediary account by the amount received.

## Follow your Amazon sales in sales reporting

As a sales team is set on your account under the tab **Order
Follow-up**, this helps you give quick glances at the figures in just a
few clicks in Sales reporting. By default, your account's sales team is
shared between all of your company's accounts.

If you wish, you can change the sales team on your account for another
to perform a separate reporting for the sales of this account.

<div class="tip">

<div class="title">

Tip

</div>

It is also possible to perform reporting on a per-marketplace basis in a
similar fashion. First, remove the marketplace you wish to track
separately from the list of synchronized marketplaces. Then, create
another registration for this account and remove all marketplaces,
except the one to isolate from the others. Finally, assign another sales
team to one of the two registrations of your account.

</div>

<div class="seealso">

\- `features` - `setup`

</div>


---
## File: ./content/applications/sales/sales/amazon_connector/update.md

# Install the Amazon Selling Partner API Update

Starting July 2022, due to a change in Amazon's API, the Amazon
Connector needs to be updated to continue to exchange information with
Amazon. This also makes it easier for you to set up the Connector.

<div class="note">

<div class="title">

Note

</div>

If your Odoo database is created after the update was released, the
update module is installed automatically. To check if this module is
already installed, go to `Apps`, remove the `Apps` filter and search for
`Amazon`. If the module `Amazon/Selling Partner API
Patch` is present and marked as installed, your Odoo database is already
up-to-date and you can proceed with the `setup <setup>` step of the
Amazon Connector.

</div>

## Update Odoo to the latest release

The new authentication mechanism is made available through a new Odoo
module; to be able to install it, you must make sure that your Odoo
source code is up-to-date.

If you use Odoo on Odoo.com or Odoo.sh platform, your code is already
up-to-date and you can proceed to the next step.

If you use Odoo with an on-premise setup or through a partner, then you
must update your installation as detailed in `this documentation page
</administration/maintain/update>` or by contacting your integrating
partner.

## Update the list of available modules

New modules must be *discovered* by your Odoo instance to be available
in the **Apps** menu.

To do so, activate the `developer mode <developer-mode>`, and go to
`Apps -->
Update Apps List`. A wizard will ask for confirmation.

## Install the Amazon/Selling Partner API Patch

<div class="warning">

<div class="title">

Warning

</div>

You should never install new modules in your production database without
first testing them in a duplicate or staging environment. For Odoo.com
customers, a duplicate database can be created from the database
management page. For Odoo.sh users, you should use a staging or
duplicate database. For on-premise users, you should use a staging
environment---contact your integrating partner for more information
regarding how to test a new module in your particular setup.

</div>

The module should now be available in your `Apps` menu. Remove the
`Apps` filter and search for `Amazon`; the module `Amazon/Selling
Partner API Patch` should be available for installation. If you cannot
find the module after having updated the list of available modules, it
means your Odoo source code is not up-to-date; refer to step one of this
page.

Once the module is installed, link your Amazon account by following the
instructions on the `setup <setup>` page.

<div class="seealso">

\- `features` - `setup` - `manage`

</div>


---
## File: ./content/applications/sales/sales/amazon_connector/features.md

# Amazon Connector Features

The **Amazon Connector** synchronizes the orders between Amazon and your
Odoo database, which reduces considerably the amount of time spent on
your Amazon Seller Central dashboard, making your daily routine a lot
easier.

## Supported Features

The connector is able to:

  - Synchronize (Amazon to Odoo) all confirmed orders (both FBA and FBM)
    and their order items which include:
      - the product’s name, description and quantity
      - the shipping costs for the product
      - the gift wrapping charges
  - Create on Odoo any missing partner related to an order (contact
    types supported: contact and delivery).
  - Notify Amazon of a shipping confirmed on Odoo (FBM) in order to get
    paid.
  - Support multiple seller accounts.
  - Support multiple marketplaces per seller account.

<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 32%" />
<col style="width: 42%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Fulfilled By Amazon (FBA)</th>
<th>Fulfilled By Merchant (FBM)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Orders</strong></td>
<td>Synchronize shipped and canceled orders</td>
<td>Synchronize unshipped and canceled orders</td>
</tr>
<tr class="even">
<td><strong>Shipping</strong></td>
<td><ul>
<li>Charges</li>
</ul></td>
<td><ul>
<li>Charges</li>
<li>Delivery created</li>
</ul></td>
</tr>
<tr class="odd">
<td><strong>Gift Wrapping</strong></td>
<td>Handled by Amazon</td>
<td><ul>
<li>Gift wrapping charges</li>
<li>Gift message</li>
</ul></td>
</tr>
<tr class="even">
<td><strong>Stock Management</strong></td>
<td>One stock move created per sales order item</td>
<td>Handled by the delivery</td>
</tr>
<tr class="odd">
<td><strong>Confirmation</strong></td>
<td>Handled by Amazon</td>
<td>Notify Amazon when confirming delivery</td>
</tr>
</tbody>
</table>

<div class="note">

<div class="title">

Note

</div>

The connector is designed to synchronize orders' data as detailed above.
Other actions, such as downloading monthly fees reports, handling
disputes, or issuing refunds must be managed from Amazon Seller Central,
as usual.

</div>

## Supported Marketplaces

The Amazon Connector currently supports 9 marketplaces. If a marketplace
is not listed below, it may be possible for you to `add it as an
unsupported
marketplace <amazon/add-unsupported-marketplace>`.

\+-------------------------------+ | **North America region** |
+===============+===============+ | Canada | Amazon.ca |
+---------------+---------------+ | Mexico | Amazon.com.mx |
+---------------+---------------+ | US | Amazon.com |
+---------------+---------------+

\+-------------------------------+ | **Europe region** |
+===============+===============+ | Germany | Amazon.de |
+---------------+---------------+ | Spain | Amazon.es |
+---------------+---------------+ | France | Amazon.fr |
+---------------+---------------+ | UK | Amazon.co.uk |
+---------------+---------------+ | Italy | Amazon.it |
+---------------+---------------+ | Netherlands | Amazon.nl |
+---------------+---------------+

<div class="seealso">

\- `setup` - `manage`

</div>


---
## File: ./content/applications/sales/sales/invoicing.md

  - nosearch

# Invoicing Method

<div class="toctree" data-titlesonly="">

invoicing/invoicing\_policy invoicing/down\_payment invoicing/proforma
invoicing/time\_materials invoicing/milestone invoicing/expense
invoicing/subscriptions

</div>


---
## File: ./content/applications/sales/sales/ebay_connector.md

  - nosearch

# eBay Connector

<div class="toctree" data-titlesonly="">

ebay\_connector/setup ebay\_connector/manage
ebay\_connector/troubleshooting ebay\_connector/linking\_listings

</div>


---
## File: ./content/applications/sales/sales/send_quotations.md

  - nosearch

# Send Quotations

<div class="toctree" data-titlesonly="">

send\_quotations/quote\_template send\_quotations/optional\_products
send\_quotations/get\_signature\_to\_validate
send\_quotations/get\_paid\_to\_validate send\_quotations/deadline
send\_quotations/different\_addresses
send\_quotations/terms\_and\_conditions
send\_quotations/orders\_and\_variants

</div>


---
## File: ./content/applications/sales/sales/ebay_connector/troubleshooting.md

# Troubleshooting eBay connector

<div class="seealso">

To learn more about the eBay connector visit these pages as well:

  - `setup`
  - `manage`
  - `linking_listings`

</div>

## Accept account deletion notifications

Since September 2021, **eBay requires supporting customer account
deletion/closure notifications**. As such, when eBay receives an account
request for deletion, all eBay partners must confirm the reception of
the request and take further action if necessary.

Odoo has a notification endpoint to receive those notifications, confirm
the reception of the request, and handle the first set of actions to
anonymize the account details in *Contacts* and remove the customer's
access to the portal.

<div class="important">

<div class="title">

Important

</div>

Make sure to correctly `set up the subscription to the marketplace
account deletion
notifications <ebay/subscribe-account-deletion-notifications>` as eBay
may temporarily disable the related eBay account until the subscription
is completed.

</div>

### Verify the installation of Odoo is up to date

In order to activate the endpoint, the module *eBay Connector - Account
Deletion* must be installed. If the Odoo database was first created
after September 2021, the module is installed automatically and the
administrator can proceed to the `next step
<ebay/retrieve-endpoint-details>`.

#### Update Odoo to the latest release

The notification endpoint is made available through a new Odoo module;
to be able to install it, the administrator must make sure that the Odoo
source code is up-to-date.

  - If the company uses Odoo on Odoo.com or Odoo.sh platform, the code
    is already up-to-date, so proceed to the next step.
  - If the company uses Odoo with an on-premise setup or through a
    partner, then the administrator must update the installation as
    detailed in `this documentation page
    </administration/maintain/update>` or by contacting an integrating
    partner.

#### Update the list of available modules

New modules must be *discovered* by the Odoo instance to be available in
the `Apps` menu.

To do so, activate the `developer mode <developer-mode>`, and go to
`Apps ->
Update Apps List`. A wizard will ask for confirmation.

#### Install the eBay Connector - Account Deletion update

<div class="warning">

<div class="title">

Warning

</div>

**Never** install new modules in the production database without testing
them in a duplicate or staging environment. For Odoo.com customers, a
duplicate database can be created from the database management page. For
Odoo.sh users, the administrator should use a staging or duplicate
database. For on-premise users, the administrator should use a staging
environment - contact the integrating partner for more information
regarding how to test a new module in a particular setup.

</div>

To install the module, go to the `Apps` menu, remove the
<span class="title-ref">Apps</span> search facet and search for
<span class="title-ref">eBay</span>. If the module *eBay Connector -
Account Deletion* is present and marked as installed, the Odoo database
is already up-to-date and the administrator can proceed with the next
step. If it is not yet installed, install it now.

### Retrieve endpoint details from Odoo

The endpoint details can be found in `Sales --> Configuration -->
Settings --> eBay`. First, input random text values for the `Production
App Key` and for the `Production Cert Key`. Click on `Generate Token` to
retrieve the `Verification Token`.

![Generate a verification token in
Odoo.](troubleshooting/generate-token.png)

### Subscribe to account deletion notifications

Navigate to the [eBay developer portal](https://go.developer.ebay.com/).
Configure the account deletion/notification settings in eBay by
navigating to the <span class="title-ref">Hi \[username\]</span> at the
top right of screen, then go to `Alerts & Notifications`.

![Overview of the Alerts & Notifications dashboard of
eBay](troubleshooting/ebay-your-account.png)

To subscribe to deletion/closure notifications, eBay needs a few
details:

  - An *email address* to send notifications to if the endpoint is
    unreachable.
  - The *endpoint details*:
      - The URL to Odoo's account deletion notification endpoint
      - A verification token

![Dedicated fields to enter the endpoint
details](troubleshooting/ebay-notification-endpoint.png)

<div class="tip">

<div class="title">

Tip

</div>

The administrator can edit the last two fields once the email address
field is filled out.

</div>

### Verify the connectivity with the endpoint

After setting the retrieved endpoint details in eBay's dashboard,
consider testing the connectivity with the `Send Test Notification`
button.

> The following confirmation message should be received: "A test
> notification was sent successfully\!"

![Button to send test
notification](troubleshooting/test-notification.png)

<div class="seealso">

\- `/applications/sales/sales/ebay_connector/manage` -
`/applications/sales/sales/ebay_connector/linking_listings` -
`/applications/sales/sales/ebay_connector/setup`

</div>


---
## File: ./content/applications/sales/sales/ebay_connector/setup.md

# eBay connector setup

## Overview

Odoo's eBay connector allows eBay listings to connect with Odoo
products. Once connected, `updates to the listings <linking_listings>`
can be made in Odoo or in eBay. When an item sells on eBay, draft *sales
orders* are created in Odoo for the user to review and confirm. Once the
sales order is confirmed, Odoo *Inventory* and *Sales* apps function
standard to pull products out of inventory, and allow the user to create
invoices.

<div class="seealso">

To learn more about the eBay connector visit these pages as well:

  - `manage`
  - `linking_listings`
  - `troubleshooting`

</div>

### eBay - Odoo linked fields

The following are eBay product details. Each of these eBay fields update
corresponding fields in Odoo.

  - eBay URL
  - eBay status
  - Quantity sold
  - Start date
  - Title
  - Subtitle
  - Item condition
  - Category
  - Category 2
  - Store category
  - Store category 2
  - Payment policy
  - Seller profiles
  - Postal code
  - Shipping policy
  - Listing type (fixed price or auction)
      - Starting price for Auction
      - Buy it now price
      - Fixed Price amount
  - Use stock quantity
  - Quantity on eBay
  - Duration
  - Allow best offer
  - Private listing
  - eBay description
  - eBay product image
  - Country

### eBay terms

*Variations* group multiple products into one, with variation (or
variant) options. Variations can sync to Odoo's attributes and values.
Variations will appear in drop down menus near the top of the page when
viewing an eBay listing. These are comparable to product variants in
Odoo.

![An example on eBay of the variations that can be added to a
product.](setup/ebay-variation.png)

*Item specifics*, located at the bottom of the listing, detail
product-specific information. These specifics don't sync with Odoo
fields by default; a development is required to link these fields.

![Item specifics listed on an eBay product.](setup/item-specifics.png)

*Sandbox* and *Production* are terms that are used to categorize the
eBay environments as either still in development/testing (*Sandbox*) or
for use in the real instance of the database with real customer
information/dataset (*Production*). It is recommended to start first in
the *Sandbox* to test, and then following the processes below, create a
*Production* instance.

<div class="tip">

<div class="title">

Tip

</div>

eBay's sandbox environment can be accessed by navigating to [eBay's
sandbox portal](https://sandbox.ebay.com/) at
<span class="title-ref">https://sandbox.ebay.com/</span>. eBay's
production environment can be accessed by navigating to [eBay.com
portal](https://www.ebay.com/) or
<span class="title-ref">https://www.ebay.com/</span>.

</div>

<div class="important">

<div class="title">

Important

</div>

The environment selection **must** remain the same for all environment
settings on eBay and on Odoo throughout this setup.

</div>

### eBay actions available on Odoo

The following are built-in actions in Odoo that add or update eBay
listings:

  - **List**/ **Link**: generate a new eBay listing with an Odoo product
    by clicking `List
    Item on eBay` or `Link With Existing eBay Listing`.
  - `Revise item` button: after making changes to an eBay listing in
    Odoo, save the record, and then click the `Revise Item` in Odoo to
    update the eBay listing.
  - **Relist**: if an item's listing was ended early or `auto-relist`
    was not selected, a user can relist the item from Odoo. The start
    date will reset.
  - `End item's listing` button: end a listing on eBay directly from
    Odoo.
  - **Unlink product listings**: users can unlink a product from the
    eBay listing; the listing will stay intact on eBay.

## Setup required on Odoo prior to eBay setup

To link eBay with Odoo, install the eBay module by navigating to the
Odoo dashboard and clicking into the `Apps` application. Search the term
<span class="title-ref">eBay</span> and install the
<span class="title-ref">eBay Connector</span> module.

The following items must be configured before eBay is set up:

  - In Odoo, create and configure products that are intended to be
    listed in eBay. eBay does not import new products into Odoo. All
    products must first be created in Odoo, and then linked to listings.
    
      - Odoo does not allow multiple eBay listings to be linked per
        product in Odoo. If the company sells the same product for
        multiple listings, follow these instructions:
        
          - Set up one *base* product (noted in the `Component` field of
            the `BoM (Bill
            of Materials)`) from which all eBay listings will pull from.
            This will be a storable product so stock can be kept.
            Highlighted in green below, this product will be included in
            the kit on each subsequent “linked” product below.
          - Set up 2+ *linked* products (noted in the `Product` field of
            the `BoM (Bill
            of Materials)`, one for each eBay listing. The product type
            will be determined by the company's accounting settings, as
            explained in the Odoo documentation. Highlighted in yellow
            below, each product should have a `BoM type` equal to `Kit`
            and have the base product as a `Component` of the kit. When
            this linked eBay product is sold, the delivery order created
            will have the base product listed in lieu of the linked
            product.
        
        ![Setting up bill of materials with base product and linked
        products.](setup/products-odoo.png)
    
    > 
    > 
    > <div class="seealso">
    > 
    > `../../../inventory_and_mrp/manufacturing/management/bill_configuration/`
    > 
    > </div>

  - eBay does not automatically create invoices for eBay orders that get
    pushed into Odoo. Set invoicing policy on eBay products: invoicing
    policy will dictate when the product can be invoiced. Since most
    eBay users collect payment before the product is shipped, “invoice
    on ordered” will allow users to mass create invoices for eBay orders
    every day.

  - Set the `Outgoing Shipments` route for the warehouse to `Deliver
    goods
    directly (1 step)`.
    
    <div class="warning">
    
    <div class="title">
    
    Warning
    
    </div>
    
    When the `Outgoing Shipments` route is set to two or three steps, a
    known bug occurs: eBay wrongly marks orders as delivered when the
    pick operation in Odoo is confirmed. The expected behavior is to
    mark orders as delivered **after** the *delivery order* is
    confirmed. This mislabeling prevents tracking numbers in eBay from
    being imported onto the delivery order.
    
    </div>

  - If the Accounting/Invoicing apps are installed, practice registering
    payment and reconciling invoices created from eBay orders with
    incoming eBay money.
    
    <div class="seealso">
    
    `../../..//finance/accounting/bank/reconciliation`
    
    </div>

  - Generate a marketplace account deletion/closure notification token.
    To begin, navigate to `Sales app --> Configuration --> Settings`.
    Under the `eBay` heading, change the mode to `Production`, and input
    random text values for the `Production Cert Key`. Then click the
    `Generate Token` button under the `eBay Marketplace Account
    Deletion/Closure Notifications` section. This token will be used
    during the setup on eBay for the deletion/closure notifications
    configuration.

![Generate a verification token in Odoo.](setup/generate-token.png)

## Set up on eBay

### Set up eBay developer account

To start, create an eBay developer account via [eBay's developer
portal](https://go.developer.ebay.com/). This site requires a different
login and password than the eBay account, though the same email address
can be used to register. The verification to create a developer account
is around 24 hours.

### Set up eBay keyset

Once the eBay developer account is created, set up an application on
[eBay's developer portal](https://go.developer.ebay.com/). Next,
navigate to the `Hi [username]` heading at top right of screen, then
from the drop-down menu options, click `Application Keysets`. Doing so
opens a pop-up that prompts the user to `Enter Application Title` (up to
fifty characters), and choose a development environment (`Sandbox` or
`Production`). These two fields generate first keyset. This application
title is not saved until the keyset is generated. Click on `Create a
keyset` to generate the keyset.

<div class="warning">

<div class="title">

Warning

</div>

The newly created *production keyset* is disabled by default. Activate
it by subscribing to the eBay Marketplace 'account deletion or closure
notifications' or by applying to eBay for an exemption. Once enabled,
the database can make 5000 calls per day using this keyset.

</div>

![Disabled keyset present after creating a
keyset.](setup/disabled-keyset.png)

#### Configure account deletion / notification settings (Production)

To configure notifications or delete the database on a production
environment, navigate to the [eBay developer
portal](https://go.developer.ebay.com/). Configure the account
deletion/notification settings in eBay by navigating to the
<span class="title-ref">Hi \[username\]</span> at top right of screen,
then `Application Keysets`.

Next, click the `marketplace deletion/account closure notification`
option under the `Production` keyset column. Enter an email under `Email
to notify if marketplace
account deletion notification endpoint is down`. Click `Save` to enable
the email.

Following this action, enter the `Marketplace account deletion
notification endpoint` URL provided by Odoo. This HTTPs endpoint is
found in Odoo by navigating to `Sales app
--> Configuration --> Settings`, in the `eBay Marketplace Account
Deletion/Closure
Notifications` field.

Clicking the `Generate Token` button in Odoo below this field creates a
verification token for the eBay production environment. In Odoo, `Copy`
the newly created token and navigate to eBay to fill in the
`Verification token` field. Click `Save` to enable the `Event
Notification Delivery Method`.

![Configuring account deletion / notification settings in
eBay.](setup/account-closure.png)

After completing the above fields, click `Send Test Notification` to
test the new notifications. Proceed to the next step when the green
check mark appears. Revisit the above settings if the test post is not
as expected.

After configuring notification settings, go back to the `Application
Keys` page to generate production keysets.

#### Creating the keyset

A successful setup of the notifications enables the ability to create
Production Keysets which are needed in the remainder of the Odoo
configuration. Navigate back to the `Application
Keys` page generate a production keyset.

The administrator is prompted to `Confirm the Primary Contact`. Enter or
confirm the account owner (the person legally responsible for the eBay
API License Agreement). Fill out `First Name`, `Last Name`, `Email`,
`Phone`. Then, select either the `Individual` or `Business` options.

<div class="note">

<div class="title">

Note

</div>

The provided email address or phone number does **not** have to match
the account's. eBay uses this information to contacting the business or
individual in case of issues with user tokens. Additional contacts can
be added from the `Profile & Contacts` page on eBay.

</div>

Click on `Continue to Create Keys` to confirm the primary contact. The
`Application Keys` populates in a new screen and an email is also sent
to the developer account. An `App ID (Client ID)`, `Dev ID`, and `Cert
ID (Client
Secret)` all populate.

![Application keys are populated after creating the app in
eBay.](setup/application-keys.png)

Copy these values down as they will be input into Odoo later in the
process.

### Create eBay user token

Now, create a *user token* in eBay by navigating to the
<span class="title-ref">Hi \[username\]</span> at top right of screen,
then `User Access Tokens`.

![Generate user token s on the eBay developer
console.](setup/user-tokens.png)

Select the correct `Environment`: `Sandbox` for testing or `Production`
for the live database. Maintain the same selection for all environment
settings on both eBay and Odoo.

Next, select the radio button labeled `Auth'n'Auth`.

Choose `Sign in to Production` or `Sign in to Sandbox` to get a user
token in the chosen environment. This button varies based on the
selection made above for either `Sandbox` or `Production`.

Doing so triggers a a pop-up window to `Confirm your Legal Address`.
Complete the required fields, which are `First Name`, `Last Name`,
`Primary Email`, `Legal Address`, and `Account Type`. For `Account
Type`, select either `Individual` or `Business`. To complete the
confirmation, click `Sign
into eBay to get a Token`.

<div class="note">

<div class="title">

Note

</div>

eBay will contact this individual or business should there be any issues
with the application keys. Other contacts can be added on the `Profile &
Contacts` eBay page.

</div>

The administrator will be redirected to either a sandbox or production
sign-in page for eBay. This login is different than the eBay developer's
console, it is the eBay account where the items will be sold on. This
email and/or login can differ from the eBay developer account.

Enter the `Email` or `Username` for the eBay account and sign into the
eBay account.

<div class="important">

<div class="title">

Important

</div>

Should an additional user be needed for the sandbox simulation, a test
user needs to be created. Visit [eBay's Register for Sandbox
form](https://developer.ebay.com/sandbox/register). Detailed
instructions can be found on eBay's help pages: [Create a test Sandbox
user](https://developer.ebay.com/api-docs/static/gs_create-a-test-sandbox-user.html).

</div>

### Grant application access

After signing into the production or sandbox environment, eBay presents
the administrator with an *agreement* to grant access to the user's eBay
data.

Clicking `Agree` allows eBay to link the eBay account with the
*application programming interface* (API). This agreement can be changed
at any time by visiting eBay's account preferences.

<div class="warning">

<div class="title">

Warning

</div>

eBay has a timed sequence between signing in and agreeing to the terms
for the `API
(Application Programming Interface)` linkage to the account. Once
complete a `User
Token` will populate on the `User Tokens` page.

</div>

A `User Token` will populate on the screen. Make sure to copy this token
down as it will be used in the next steps along with the `Application
Keyset`.

![Generated user token and API explorer link on the eBay developer
console.](setup/user-token.png)

<div class="important">

<div class="title">

Important

</div>

Signing in to the eBay account is necessary to create to the token. The
eBay developer can also revoke the token by clicking on the `Revoke a
Token` link.

</div>

### API explorer

Now that the `Application Keyset` and `User Token` have been created, a
test can be executed via the [API
Explorer](https://developer.ebay.com/DevZone/build-test/test-tool/default.aspx)
to ensure that the `API (Application Programming Interface)` is
configured correctly. This test will execute a simple search using the
`API (Application Programming Interface)`.

To begin the `API (Application Programming Interface)` test, click on
`Get OAuth
Application Token`. This will populate the key into the `Token` field.

A basic search function is set to execute. Click on `Execute` to
complete the test. A successful test will respond with a `Call Response`
of <span class="title-ref">200 OK</span> with a corresponding `Time`.

## Entering credentials into Odoo

The previously copied `User Token` and `Application Keyset` are now
ready to be entered into the Odoo database.

Navigate back the eBay settings in Odoo (`Sales app --> Configuration
--> Settings
--> eBay`) and paste the following credentials from eBay into the
corresponding fields in Odoo.

| Platform | Dev Key/ID    | Token                    | App Key/ID                 | Cert Key/ID                 |
| -------- | ------------- | ------------------------ | -------------------------- | --------------------------- |
| eBay     | Dev ID        | User Token               | App ID (Client ID)         | Cert ID (Client Secret)     |
| Odoo     | Developer Key | Production/Sandbox Token | Production/Sandbox App Key | Production/Sandbox Cert Key |

<div class="important">

<div class="title">

Important

</div>

The `Application Keyset` can be accessed by going to [eBay's developer
portal](https://go.developer.ebay.com/) and navigate to the
<span class="title-ref">Hi \[username\]</span> at top right of screen,
then click on `Application Keysets`. Get to the *User Token* in eBay by
navigating to the <span class="title-ref">Hi \[username\]</span> at top
right of screen, then `User Access Tokens` and click on `Sign in to
Sandbox`. The `User Token` can also be accessed by clicking on `User
Tokens` from the `Application Keys` page.

</div>

Confirm that the setup is correct by saving the credentials in Odoo.
Once the initial setup is complete, a new menu tab in products will
appear called <span class="title-ref">eBay</span> with the option to
`Sell on
eBay`. See the `manage` documentation on how to list products.

<div class="tip">

<div class="title">

Tip

</div>

Sync product categories by clicking `Product Categories`. After syncing,
a new menu item, <span class="title-ref">eBay Category</span>, appears
available for products to be configured with. These eBay categories are
imported from the Odoo database and are available when listing an item
on eBay through Odoo.

<div class="important">

<div class="title">

Important

</div>

If Product Categories beyond four paths are required, users will need to
manually add those paths. This has historically been done by getting a
list of all product categories beyond four paths, manually importing
them into the Product Category model in Odoo, and then linking them
individually to the product.

</div>

</div>

<div class="seealso">

Now that the setup is complete, proceed to either:

  - `Create listings <manage>`
  - `Link existing listings <linking_listings>`

</div>


---
## File: ./content/applications/sales/sales/ebay_connector/linking_listings.md

# Linking existing listings

Once the eBay account is linked existing listings from within the eBay
seller account need to be added manually to the Odoo product listings.

The process will be as follows: - Turn off eBay scheduled actions - Add
products and link listings - Turn on eBay scheduled actions

<div class="seealso">

To learn more about the eBay connector visit these pages as well:

  - `setup`
  - `manage`
  - `troubleshooting`

</div>

## Turn off eBay scheduled actions

To start linking existing listings in eBay, first turn off the eBay
notifications in the scheduled actions in Odoo. The reason for this is
so that no orders or eBay data syncs during this process. The `Scheduled
Actions` can be accessed by first activating `developer mode
<developer-mode>`. After doing so, go to `Settings --> Technical
--> Automation --> Scheduled Actions`.

<div class="warning">

<div class="title">

Warning

</div>

`../../../general/developer_mode` must be activated to ensure the
technical menu appears for the user.

</div>

Disabling scheduled actions enables users to sync and validate eBay data
before receiving orders. The following are descriptions of scheduled
actions that need to be temporarily deactivated:

  - `eBay: get new orders`: eBay pushes new orders not already in Odoo
    (based on `client_order_reference`, or `sales order reference`
    field). This command also updates existing orders, where changes we
    made in eBay. New and updated orders are then placed in draft mode.
    Customers will be created if they are not already in Odoo.
  - `eBay: synchronize stock`: eBay displays Odoo's stock on hand.
  - `eBay: update categories`: eBay will push updated monthly categories
    (only up to fourth layer; a manual update required for the rest).

To toggle off the eBay notification, select the entry from the
`Scheduled Actions` list. Then, on the page, click the `Active` toggle
button to turn it off.

### Sync eBay categories

To ensure that Odoo's eBay products have all the categories available on
eBay, the eBay categories should be synced to Odoo next.

Navigate to `Settings --> Technical --> Automation --> Scheduled
Actions`. Click into the scheduled action labeled: `Ebay: update
categories` and then click `Run
Manually`. This action will populate the `Sales --> Configuration -->
eBay
Categories` menu item with all standard eBay product categories.

<div class="important">

<div class="title">

Important

</div>

Odoo only recognizes eBay category paths up to four layers deep. If a
product has a listing of more than four, the category field will only
populate up to the fourth layer.

If product categories beyond four paths are required, users need to
manually add those paths. This has historically been done by getting a
list of all product categories beyond 4 paths, manually importing them
into the Product Category model in Odoo, then linking them individually
to the product.

</div>

Users can import the remaining product categories into the eBay product
categories manually using using the `Action` menu and `Import` feature.

## Link eBay listings

To add eBay listings in Odoo, either manually add products, using a
listing ID, or establish an automatic listing link between Odoo and
eBay.

<div class="tip">

<div class="title">

Tip

</div>

For more information on listing a product from scratch visit: `How to
list a product?
<ebay-connector/listing>`

</div>

### Manual listing link

To add an eBay listing to products in Odoo, begin by going to `Sales app
--> Products
--> Products` and selecting the desired product. Click on `Sell on eBay`
(either in the `eBay` tab or under the `Product name`). Select `Save` if
necessary.

Still the product form, click `link to listing` in the top menu and
enter in listing ID from eBay in the pop up (the listing ID is in the
eBay product URL).

<div class="example">

An example URL would be as such:
<span class="title-ref">www.ebay.com/itm/272222656444?hash=item3f61bc17bb:g:vJ0AAOSwslJizv8u</span>.
The listing ID is <span class="title-ref">272222656444</span> in this
case. Once the listing ID has been entered the eBay listing information
will sync into Odoo.

</div>

## Turn on eBay scheduled Actions

The next step is to turn on the eBay notifications in the scheduled
actions in Odoo so that orders and data are exchanged. The `Scheduled
Actions` can be accessed by first activating `developer mode
<developer-mode>` and go to `Settings --> Technical -->
Automation --> Scheduled Actions`.

Turning on the following scheduled actions allows users to sync and
validate eBay data automatically.

  - `eBay: get new orders`: eBay will push all new orders not already in
    Odoo (based on client\_order\_reference, or sales order reference
    field), and will update orders if there has been a change from eBay.
    Orders will be put in draft mode. Customers will be created if they
    are not already in Odoo.
  - `eBay: synchronize stock`: eBay will display the stock on hand in
    Odoo.
  - `eBay: update categories`: eBay will push updated monthly categories
    (only up to fourth layer, will need to manually update the rest).

<div class="note">

<div class="title">

Note

</div>

If an order comes in and the listing from the order is not linked to a
product, eBay will create a consumable product.product in its place.
These consumables should be altered on the *Sales Order* while in draft
state to represent a storable product, and then the user can link to the
listing as they come in.

</div>

<div class="seealso">

\- `/applications/sales/sales/ebay_connector/manage` -
`/applications/sales/sales/ebay_connector/troubleshooting` -
`/applications/sales/sales/ebay_connector/setup`

</div>


---
## File: ./content/applications/sales/sales/ebay_connector/manage.md

# How to list a product?

<div id="ebay-connector/listing">

In order to list a product on eBay and Odoo there are two methods in
Odoo to do so:

</div>

1.  Make a product in Odoo and list the item eBay.
      - Click `List Item on eBay` in the top menu of the product
        template. The product template can be accessed by navigating to
        `Sales app --> Products --> Product` and selecting the
        individual product.
2.  List the item on eBay, then create the product in Odoo, and finally
    link product to the item on eBay.
      - Click `Link With Existing eBay Listing` in the top menu on the
        product template.The product template can be accessed by
        navigating to `Sales app --> Product -->
        Product` and selecting the individual product.

<div class="note">

<div class="title">

Note

</div>

If an order comes in and the listing from the order is not linked to a
product, eBay will create a consumable product.product in its place.
These consumables should be altered on the *sales order* while in draft
state to represent a storable product, and then the user can link to the
listing as they come in.

</div>

<div class="seealso">

To learn more about the eBay connector visit these pages as well:

  - `setup`
  - `linking_listings`
  - `troubleshooting`

</div>

## Listing without variation

Access the product template by navigating to `Sales app --> Products -->
Product` and selecting the individual product.

In order to list a product, select the `Sell on eBay` field on a product
template. `Sell on eBay` is either in an `eBay` tab or under the
`Product
name`. Click `Save` if necessary.

![The eBay template form listed in the product template in
Odoo.](manage/manage-ebay-template.png)

When the `Use Stock Quantity` field is checked, the quantity set on eBay
will be the Odoo *Forecast Quantity* (Odoo *Inventory* app).

The `Description Template` allows the administrator to use templates in
listings. The default template only use the `eBay Description` field of
the product. HTML can be used inside the `Description Template` and in
the `eBay Description` in Odoo 14. Starting in Odoo 15, the powerbox
feature is available to use in the template and description. Simply type
a forward slash <span class="title-ref">/</span> to reveal a menu with
formatting, layout, and text options. To add an image, type
<span class="title-ref">/image</span>.

To use images in the listing, another option is to add them as
*Attachments* on the product template.

<div class="seealso">

For more information on template configuration in Odoo visit:
`../../../general/email_communication/email_template`.

</div>

## Listing with variations

When the `Sell on eBay` is checked on a product containing variations
with `Fixed Price` as `Listing Type`, the eBay form is slightly
different. Go to the `Variants` tab to or click `Configure Variants` in
the top menu to configure the variant settings. Pricing can be
configured for each variation.

When the `Listing Type` is changed to `Fixed Price`, Odoo presents a
variant table at the bottom of the `eBay` tab, in which the `Fixed
Price` can be entered, and the decision to `Publish on eBay` can be made
for specific variants, along with other options.

![The fixed price listing type in the eBay tab on a product form in Odoo
sales.](manage/fixed-listing-price.png)

## Product identifiers

Products identifiers such as EAN, UPC, Brand or MPN are required in most
of the eBay categories.

### EAN and UPC identifiers

The module manages the EAN and UPC identifiers with the `Barcode` field
of the product variant. If the `Barcode` field is empty or is value is
not valid, the EAN and UPC values will be set as 'Does not apply' as
recommended by eBay.

Barcodes can be found on the product template, under the the `General
Information` tab. Access the product template, first, by navigating to
`Sales app --> Products -->
Product` and selecting the individual product.

### Listing with item specifics

In order to add item specifics, one should create a product attribute
with a single value in the `Attributes & Variants` tab on the product
form. Examples of item specifics include:
<span class="title-ref">MPN</span> or
<span class="title-ref">Brand</span>. The Brand and MPN values are
working as item specifics and should be defined in the `Attributes &
Variants` tab on the product form. If these values are not set, 'Does
not apply' will be used for the eBay listing.

## Process invoices and payments

### Posting payment

When eBay orders are placed they are always paid for up front, via the
eBay site. At no point will users pay for items on eBay through Odoo.
Therefore, once orders are synced into Odoo from eBay they are already
paid for. Odoo's invoicing and payment functionalities are not utilized.
However, invoices need to be created and marked as Paid to “close” the
*Sales Order*.

Users can opt to mass create and post invoices in batches. To do so,
navigate to Quotations in the list view by going to `Sales app -->
Orders --> Quotations`. In the upper right corner, select the list view
icon. Hover over the icons to reveal the name of each. Then check the
boxes on the left that invoices should be made for and go to the
`Action` menu or ⚙️ \[Gear icon\] . Click on `Create Invoices`.

A pop-up will appear and click on the `Create and view invoice` button.
A new screen will populate with the newly created invoices. Next, select
all of them by clicking on the box icon next to `Number` in the header
row of the list, this will select all the records. Then navigate to the
`Action` menu and click `Post entries`. Following this step, a pop-up
will appear and click on `Post journal entries`. This will take the
invoices out of *draft* and set them to *posted*.

### Reconciling payments

Users typically utilize PayPal to receive payment from eBay, and then
send lump sums from PayPal into their bank account. To reconcile this
income, users can reconcile the one PayPal transfer with all related
invoices.

First navigate to the `Accounting Dashboard` by going to the `Accounting
app --> Dashboard --> Bank`. `Create` a new transaction and enter the
`Label` as <span class="title-ref">eBay Sales</span>. Fill out the
`Amount` and enter a `Statement` date in. Click on `Create and edit`.

For the `Ending Balance` field, enter the same account that was entered
for the `Amount` above. Click on `Save`. Next, open the new balance that
needs to be reconciled. Under the tab marked: `Match Existing Entries`
select the entries that are included in this balance.

After adding all the necessary entries, click `Validate` to complete the
reconciliation. To verify the payment, navigate to `Customers -->
Invoices` and select the desired customer invoice. The *Paid* label
should appear under the `Payment Status` column.

<div class="seealso">

\- `/applications/sales/sales/ebay_connector/troubleshooting` -
`/applications/sales/sales/ebay_connector/linking_listings` -
`/applications/sales/sales/ebay_connector/setup`

</div>


---
## File: ./content/applications/sales/sales/products_prices.md

  - nosearch

# Products & Prices

<div class="toctree" data-titlesonly="">

products\_prices/products products\_prices/taxes products\_prices/prices
products\_prices/returns.rst

</div>


---
## File: ./content/applications/sales/sales/send_quotations/quote_template.md

# Quotation templates

In Odoo *Sales*, salespeople have the ability to create reusable
quotation templates for common product or service offerings that the
business offers. By using these templates, quotations can be tailored
and sent to customers at a much faster pace, without having to create
new quotations from scratch every time a sales negotiation occurs.

## Configuration

Begin by activating the setting in `Sales app --> Configuration -->
Settings`, and scroll to the `Quotations & Orders` heading.

In that section, check the box beside the `Quotation Templates` option.
Doing so reveals a new `Default Template` field, in which a default
quotation template can be chosen from a drop-down menu.

![How to enable quotation templates on Odoo
Sales.](quote_template/quotations-templates-setting.png)

Also, upon activating the `Quotation Template` feature, an internal `➡️
Quotation Templates` link appears beneath the `Default Template` field.
Clicking that link reveals the `Quotation Templates` page, from which
templates can be created, viewed, and edited.

<div class="tip">

<div class="title">

Tip

</div>

Consider activating the `Quotation Builder` option in the `Settings`, as
well, which is located in the right column beside the `Quotation
Templates` option. This feature aides in the design and customization of
quotation templates.

**Note:** enabling this feature also automatically installs the Odoo
*Website* application.

</div>

![How to enable quotation builder on Odoo
Sales.](quote_template/quotations-builder-setting.png)

Before leaving the `Settings` page, don't forget to click the `Save`
button to activate the feature(s) and save all changes made during the
session.

## Create quotation templates

Click the `Quotation Templates` link on the `Settings` page, or navigate
to `Sales app --> Configuration --> Quotation Templates`. Both options
reveal the `Quotation Templates` page, where quotation templates can be
created, viewed, and edited.

To create a new quotation template, click the `Create` button, located
in the upper-left corner. Doing so reveals a blank quotation template
form that can be customized in a number of ways.

![Create a new quotation template on Odoo
Sales.](quote_template/blank-quotation-template.png)

Start by entering a name for the template in the `Quotation Template`
field. Then, in the `Quotation expires after` field, designate how many
days the quotation template will remain valid for, or leave the field on
the default <span class="title-ref">0</span> to keep the template valid
indefinitely.

In the `Company` field, designate to which company this quotation
template applies, if working in a multi-company environment.

Beneath those fields are three tabs: `Lines`, `Optional Products`,
`Confirmation`.

In the `Lines` tab, products can be added to the quotation template by
clicking `Add a product`, organized by clicking
<span class="title-ref">Add a section</span> (and dragging/dropping
section headers accordingly), and further explained with discretionary
information (such as warranty details, terms, etc.) by clicking `Add a
note`.

In the `Optional Products` tab, `Add a line` for each compatible
cross-selling product related to the original items in the `Lines` tab,
if applicable. The products added here ideally compliment the original
offering as added value for the prospective buyer.

Lastly, in the `Confirmation` tab, enable options, as needed, to require
an `Online Signature` and/or an `Online Payment`, which each allow
buyers to confirm orders automatically using the web portal view after
the required action is taken.

There's also an option to add a `Confirmation Mail` to the quotation
template, as well -meaning whenever this template is used, and an order
is confirmed, an email is sent to the customer informing them that their
order has been confirmed.

![Allow customers to sign electronically or to pay online on Odoo
Sales.](quote_template/quotations-templates-confirmation-tab.png)

## Design quotation templates

<div class="note">

<div class="title">

Note

</div>

The following section on designing quotation templates only applies to
databases that have the *Quotation Builder* feature enabled, which is
accessible by following the `configuration
steps above <sales/send_quotations/templates>`.

</div>

In the upper-left corner of the quotation template form, there's a
`Design Template` button. When clicked, Odoo reveals a preview of the
quotation template, as it will appear on the front-end of the website,
with a `Template Header` specifying that this content will appear on all
quotations using this specific template.

To edit the content, look, and overall design of the quotation template,
click the `Edit` button in the upper-right corner. Doing so reveals a
variety of design elements and feature-filled building blocks.

![Design quotation template on Odoo
Sales.](quote_template/design-quotation-edit.png)

Drag and drop any desired building blocks onto the blank quotation
template, and proceed to further customize the content to fit any
business need. When all blocks and customizations are complete, click
the `Save` button to put those configurations into place.

![Drag and drop building blocks to create your quotation template on
Odoo Sales.](quote_template/quotations-building-blocks.png)

## Use quotation templates

When creating a quotation (`Sales app --> Create`), choose a
preconfigured template in the `Quotation Template` field drop-down menu.

![Select a specific template on Odoo
Sales.](quote_template/quotations-templates-field.png)

To view what the customer will see, click the `Customer Preview` smart
button to see how the quotation template will look on the front-end of
the website.

<div class="seealso">

\- `/applications/sales/sales/send_quotations/get_signature_to_validate`
- `/applications/sales/sales/send_quotations/get_paid_to_validate`

</div>


---
## File: ./content/applications/sales/sales/send_quotations/terms_and_conditions.md

# Terms and conditions

Specifying terms and conditions is essential to establish important
contractual points, such as payment terms, limitations of liability, and
delivery terms between customers and sellers.

Sellers must declare all formal information concerning products and
company policy. Conversely, customers must take note of all these
conditions before committing to a purchase.

With Odoo *Sales*, it's very easy to include default terms and
conditions on every quotation, sales order, and invoice.

## Default terms and conditions

### Configuration

Go to `Accounting app --> Configuration --> Settings`, scroll to the
`Customer Invoices` heading, and check the box beside the `Default Terms
&
Conditions` feature to activate it.

![How to enable Default Terms and Conditions on Odoo
Sales.](terms_and_conditions/terms-conditions-setting.png)

<div class="note">

<div class="title">

Note

</div>

Please note that this feature is activated via the settings of the
*Accounting* app, and **not** in the settings of the *Sales* app.

</div>

In the `Settings` of the `Accounting` application, after activating the
`Default Terms & Conditions` feature, a field appears beneath the
feature. In this field, specific terms and conditions can be entered.

![Default Terms and Conditions on quotation on Odoo
Sales.](terms_and_conditions/terms-conditions-setting-field.png)

Click `Save` to save the terms and conditions.

These terms and conditions appear on every quotation, sales order, and
invoice.

### Quotation templates

Default terms and conditions can be applied to quotation templates, as
well, depending on the specific needs of the business. This is useful
when various terms and conditions are used within a company.

<div class="note">

<div class="title">

Note

</div>

When a quotation template is used on a quotation, the quotation uses the
terms and conditions specified on that template, over the terms and
conditions specified in the settings.

</div>

First, navigate to the `Sales app --> Configuration --> Quotation
Templates` to view all the quotation templates. From here, either select
a template or create a new one, via the `Create` button.

Once on the desired quotation template form, click `Edit`, and enter in
specific terms and conditions that should be applied to this quotation
template, at the bottom of the `Lines` tab. Once done, click `Save` to
save all changes.

![Add Default Terms and Conditions to quotation templates on Odoo
Sales.](terms_and_conditions/terms-conditions-lines-tab.png)

<div class="seealso">

`/applications/sales/sales/send_quotations/quote_template`

</div>

### Attachment on confirmation emails

Terms and conditions can also be sent as an attachment on the
confirmation email of a quotation template.

To do so, navigate to `Sales app --> Configuration --> Quotation
Templates` and create a new quotation template (via the `Create`
button), or modify an existing one.

On the desired quotation template form, click `Edit`. Under the
`Confirmation` tab, there are options to activate an `Online Signature`,
`Online Payment`, and `Confirmation Mail`.

Click on the `Confirmation Mail` field to reveal a drop-down menu from
which an email template can be chosen or created. To create a new email
template from here, start typing the name of this new template, and then
select `Create and Edit...`, which reveals a `Create: Confirmation Mail`
pop-up form.

On this pop-up form, customize the email message in a number of
different ways, but be sure to click `Attachments` at the bottom of the
`Content` tab to add the desired terms and conditions attachment to the
mailing. Once done, click `Save` to save all changes.

![Terms and conditions as attachment in quotation
templates.](terms_and_conditions/terms-conditions-create-edit.png)

## Website page

Use the Odoo *Website* application to create a terms and conditions
page. To do that, first navigate to the front-end of the website, via
`Website app --> Go to Website`. From here, click `+ New` in the top
right corner of the page, then select `Page`. Give the terms and
conditions page a title in the pop-up form that appears.

Then, decide if this page should be accessible via the main website
header menu, using the `Add to menu` toggle in the pop-up form, and
click `Continue` to create the new page.

Doing so reveals a blank page on the website that can be fully
customized and edited with Odoo's drag-and-drop building blocks. Use
those building blocks to add the terms and conditions to the page, and
click `Save` to save all changes.

Don't forget to publish the page, via the `Unpublished` / `Published`
toggle at the top of the page. Unpublished pages will **not** be
accessible to website visitors.

![Terms and Conditions on a
website.](terms_and_conditions/terms-conditions-page-frontend.png)

This terms and conditions page can be linked in the footer of all
documents, if desired. To do that, access the document layout by
navigating to the `Settings` app. In the `General Settings`, under the
`Business Documents` heading, click `Configure Document Layout` (located
beneath `Document Layout`).

Doing so reveals a `Configure your document layout` pop-up form. On this
form, in the `Footer` field, enter the URL for the terms and conditions
page on the website.

It's good practice to also provide a brief title prefacing the URL, so
customers know what the link leads to when they see it on the footer of
documents.

![Terms and Conditions in business
documents.](terms_and_conditions/terms-conditions-footer-field.png)

## Email attachments

Odoo provides the ability to attach an external document, such as one
containing terms and conditions, when quotations are sent by email to
customers.

On a quotation, sales order, or other document, click the `Send by
Email` button to send an email to the customer. Then, on the email form,
click `Attach a File` to attach the terms and conditions document.

![Terms and conditions as attachment in
emails.](terms_and_conditions/terms-conditions-attach-file.png)

<div class="seealso">

\- `/applications/sales/sales/send_quotations/quote_template` -
`/applications/sales/sales/send_quotations/get_signature_to_validate` -
`/applications/sales/sales/send_quotations/get_paid_to_validate`

</div>


---
## File: ./content/applications/sales/sales/send_quotations/get_signature_to_validate.md

# Online signatures for order confirmations

The Odoo *Sales* application provides customers with the ability to
confirm orders via an online signature directly on the sales order. Once
the sales order is electronically signed by the customer, the
salesperson attached to the sales order is automatically notified that
the order is confirmed.

## Activate online signatures

To activate the *online signature* feature, go to `Sales app -->
Configuration -->
Settings`, scroll to the `Quotations & Orders` heading, and activate the
`Online
Signature` feature by checking the box beside it. Then, click the `Save`
button in the top-left corner.

![How to enable online signature in Odoo Sales
settings.](get_signature_to_validate/signature-setting.png)

<div class="note">

<div class="title">

Note

</div>

On quotation templates, the `Online Signature` feature is located under
the `Confirmation` tab.

![How to enable online signature on a quotation
template.](get_signature_to_validate/signature-confirmation-tab.png)

On standard quotations, the `Online Signature` feature is located under
the `Other Info` tab.

![How to enable online signature on standard
quotations.](get_signature_to_validate/signature-other-info-tab.png)

</div>

## Order confirmations with online signatures

When quotations are sent to clients, there's an option for them to `Sign
& Pay` directly on the quotation in the online customer portal. When
clicked, clients have the option to draw a signature, fill in the field
with an automated signature, or load a file from their computer.

![How to confirm an order with a signature on Odoo
Sales.](get_signature_to_validate/signature-validate-order.png)

Once signed, the various payment method options become available. Then,
when the quotation is paid and confirmed, a delivery order is
automatically created (if the Odoo *Inventory* app is installed).

<div class="seealso">

`/applications/sales/sales/send_quotations/quote_template`

</div>


---
## File: ./content/applications/sales/sales/send_quotations/deadline.md

# Quotation deadlines

In the Odoo *Sales* application, it is possible to set deadlines on
sales quotations. Doing so encourages customers to act quickly during
sales negotiations, for they might fear for missing out on a good deal.
As well, deadlines also can also act as protection for a company in case
an order has to be fulfilled at a price that is no longer profitable for
the business.

## Expiration date deadlines

On an Odoo *Sales* quotation, add an expiration date in the `Expiration`
field located at the top of the quotation or sales order form.

To add an expiration date to a quotation, navigate to `Sales app`, and
select a desired quotation, or create a new one by clicking `Create`.

On the quotation form, click `Edit` (if modifying a pre-existing
quotation), and click the `Expiration` field. Doing so reveals a
drop-down calendar, in which the month and date can be designated as the
expiration date of the quotation.

![How to configure deadlines on Odoo
Sales.](deadline/quotation-deadlines-expiration-field.png)

Once the expiration date is selected, click `Save` to save all changes.

## Deadlines in quotation templates

The Odoo *Sales* application also makes it possible to add a deadline to
every quotation template. Whenever a specific quotation template is used
in a quote, its associated deadline is automatically applied.

To add a deadline to a quotation template, navigate to `Sales app -->
Configuration
--> Quotation Templates`, and either select the desired quotation
template to which a deadline should be added, or click `Create` to build
a new quotation template from scratch.

On the quotation template detail page, click the `Edit` button to edit
the quotation.

Then, add a specific number of days to the `Quotation expires after`
field, located beneath the quotation template name. The number of days
represents how long the quotation will be valid for, before it expires.
When done, click `Save`.

![How to use deadline in a quotation template on Odoo
Sales.](deadline/quotation-deadlines-expires-after.png)

<div class="tip">

<div class="title">

Tip

</div>

By clicking the `Customer Preview` button on a quotation, Odoo clearly
displays when that specific offer expires. As a reminder, the number of
days is the same as those mentioned in the quotation template (if a
quotation template was used for the initial quotation).

![How customers will see deadlines on Odoo
Sales.](deadline/quotation-deadlines-preview.png)

</div>

<div class="seealso">

`/applications/sales/sales/send_quotations/quote_template`

</div>


---
## File: ./content/applications/sales/sales/send_quotations/orders_and_variants.md

# Product variants on quotations and sales orders

Product variants can be added to quotations and sales orders using the
*product configurator*, *variant grid entry*, or both.

## Configuration

To enable product variants on quotations and sales orders, go to `Sales
app -->
Configuration --> Settings`, and under the `Product Catalog` heading,
activate one (or both) of the `Product Configurator` and `Variant Grid
Entry` settings. Finally, click `Save` to apply the settings.

![Activating entry type
settings.](orders_and_variants/activating-entry-type-settings.png)

After saving the settings, it's time to configure the product form.

To do that, navigate to `Sales app --> Products --> Products`, and
select the desired product to configure (or click `Create` to open a
blank product form, and create a new one).

On the product form, click `Edit`, and select the `Variants` tab. Click
`Add a line` to add an attribute in the `Attribute` column, like
<span class="title-ref">Color</span> or
<span class="title-ref">Size</span>, for example.

Once the attribute is chosen, select the desired values to apply to that
attribute in the `Values` column. To select the desired values, click
into the blank field beneath the `Values` column.

Then, select an option from the drop-down menu that appears. Or, create
a new value by typing in the new value, and click `Create` from the
drop-down menu that appears beneath the new value.

When a product has *at least* two variants (one attribute with two
values), the `Sales
Variant Selection` option appears at the bottom of the `Variants` tab.
That is the **only** way to make that option appear, so keep that in
mind.

Under `Sales Variant Selection`, choose either `Product Configurator` or
`Order Grid Entry`. This selection determines which method is used to
add the product to quotations or sales orders.

  - `Product Configurator`: choose attribute values to add the matching
    product variant to the order.
  - `Order Grid Entry`: add several variants at once from the grid of
    attribute values.

Once a selection is made, click `Save` on the product form to apply the
setting.

![Sales variant
selection.](orders_and_variants/sales-variant-selection.png)

## Product configurator

The *product configurator* appears on a quotation or sales order when
products that have **both** variants configured are added, and the
`Product Configurator` option is selected on the product form.

The product configurator lets salespeople choose exactly which product
variant to add to the quotation or sales order, using a format similar
to online shopping. Color options display any HTML color codes set up in
the `Color` attribute.

Features with an additional cost display the additional cost next to
their name. Once the desired product variant attributes are selected,
click `Add` to add the product variant to the quotation or sales order.

![Product Configurator and Price
Extras.](orders_and_variants/configurator-price-extras.png)

By default, the product variant attributes are displayed on the
quotation or sales order in the `Description` column, but a dedicated
`Product Variant` column can be added, via the additional options menu
(represented by the `⋮ (3 vertical dots)` icon, on the far-right side of
the columns, in the `Order Lines` tab).

![Product variant column option in order lines tab of
quotation.](orders_and_variants/product-variant-column-option.png)

Just click the checkbox next to `Product Variant`, and that column
appears in the `Order Lines` tab.

## Variant grid entries

*Variant grid entries* appear on a quotation or sales order when
products that have both variants configured are added, and the `Order
Grid Entry` option is selected on the product form.

The grid entry feature streamlines the process of creating large, varied
quotations by letting salespeople enter exact quantities of each product
variant all at once.

The `Choose Product Variants` pop-up form that appears, displays a grid
of every variant available for that specific product.

From the `Choose Product Variants` pop-up form, choose the exact
quantities of each product variant for a quotation or sales order by
typing in the number or using the arrows in each column. The `Not
Available` warning is displayed when a particular variant has been
deactivated in the database.

Once all the product variants and their quantities have been set in the
pop-up form, click `Confirm` to add them to the quotation or sales
order.

![Variant Grid Entry pop-up
form.](orders_and_variants/grid-entry-popup-amounts.png)

Each product variant appears as an individual line item on the quotation
or sales order with the chosen quantity from the `Choose Product
Variants` pop-up form, because each of these items has its own stock.

![Line items for grid
variants.](orders_and_variants/grid-variants-line-items.png)


---
## File: ./content/applications/sales/sales/send_quotations/different_addresses.md

# Deliveries and invoices to different addresses

People and businesses often use separate addresses for billing
(invoicing) and shipping (delivery) purposes. With the Odoo *Sales* app,
contacts can have different specified addresses for delivery and
invoicing.

## Settings

To properly utilize multiple addresses in Odoo, go to `Sales app -->
Configuration
--> Settings` and scroll down to the `Quotations & Orders` heading.
Then, check the box next to `Customer Addresses`, and click `Save`.

![Activate the Customer Addresses
setting.](different_addresses/customer-addresses-setting.png)

## Contact form configuration

To add multiple addresses to a contact, go to `Sales app --> Orders -->
Customers`, and clear any default filters from the search bar. Then,
click on the desired customer to open their contact form.

<div class="tip">

<div class="title">

Tip

</div>

Contact forms can be accessed in the *Contacts* application, as well.

</div>

From the contact form, click `Edit`, and then select `Add`, which is
located under the `Contacts & Addresses` tab. Doing so reveals a `Create
Contact` pop-up form, in which additional addresses can be configured.

![Add a contact/address to the contact
form.](different_addresses/contact-form-add-address.png)

On the `Create Contact` pop-up form, start by clicking the default
`Other
Address` field to reveal a drop-down menu of address-related options.

Select any of the following options:

  - `Contact`: adds another contact to the existing contact form.
  - `Invoice Address`: adds a specific invoice address to the existing
    contact form.
  - `Delivery Address`: adds a specific delivery address to the existing
    contact form.
  - `Other Address`: adds an alternate address to the existing contact
    form.
  - `Private Address`: adds a private address to the existing contact
    form.

Once an option is selected, proceed to enter the corresponding contact
information that should be used for the specified address type.

![Create a new contact/address on a contact
form.](different_addresses/create-contact-window.png)

Then, click `Save & Close` to save the address and close the `Create
Contact` window. Or, click `Save & New` to save the address and
immediately input another one.

## Address added to quotations

When a customer is added to a quotation, the `Invoice Address` and
`Delivery
Address` fields autopopulate with the corresponding addresses specified
on the customer's contact form.

![Invoice and Delivery Addresses autopopulate on a
quotation.](different_addresses/quotation-address-autopopulate.png)

The `Invoice Address` and `Delivery Address` can also be edited directly
from the quotation by clicking the `Edit` button, and then clicking the
`➡️ (right
arrow)` internal link buttons next to each address line.

These addresses can be updated at any time to ensure accurate invoicing
and delivery.

<div class="tip">

<div class="title">

Tip

</div>

If any changes are made on a form in Odoo, include *Contacts* forms,
remember to click `Save` to save the changes to the database.

</div>


---
## File: ./content/applications/sales/sales/send_quotations/optional_products.md

# Optional products

The use of optional products is a marketing strategy that involves the
cross-selling of products along with a core product. The aim is to offer
useful and related products to customers, which may result in an
increased sale.

For instance, if a customer wants to buy a car, they have the choice to
order massaging seats, as well, or ignore the offer and simply buy the
car. Presenting the choice to purchase optional products enhances the
customer experience.

## Optional products on quotations

With the Odoo *Sales* application, it is possible to add or modify
optional products directly on quotations by navigating to the `Optional
Products` tab on a quotation form.

![How to add optional products to your quotations on Odoo
Sales.](optional_products/optional-products-tab.png)

<div class="tip">

<div class="title">

Tip

</div>

Click the `Customer Preview` button to reveal a preview of the quotation
customers would receive via email, along with the optional products they
have a chance of adding to their order.

![Preview your quotations on Odoo
Sales.](optional_products/optional-products-checkout.png)

</div>

In practice, customers are able to add different optional products to an
order by clicking the `🛒 (shopping cart)` icon, located to the right of
the optional product line. If a customer selects all the optional
products suggested, these additional items are automatically filled in
on the quotation that is managed by the salesperson.

![How to select optional products on Odoo
Sales.](optional_products/optional-products-add-to-cart.png)

When the customer adds an optional product(s) to an order, the
salesperson is instantly notified about the change, along with any other
change the customer makes to an order. This allows salespeople to stay
up-to-date with everything related to an order in the backend of the
*Sales* application.

![How to follow each movement made by your customers on Odoo
Sales.](optional_products/optional-products-order-lines.png)

## Optional products on quotation templates

<div class="note">

<div class="title">

Note

</div>

Be sure to review the documentation on how to
`/applications/sales/sales/send_quotations/quote_template` to better
understand how quotation templates work before reading the following
information.

</div>

For quotation templates, just like a typical quotation form, there is
also an `Optional
Products` tab, wherein related products or services can be added to a
quotation template.

To add optional products to a quotation template, navigate to `Sales app
-->
Configuration --> Quotation Templates`. Then, either select an existing
quotation template to edit, or create a new one by clicking `New`.

On the quotation form, click `Edit`, then click the `Optional Products`
tab. Under the `Optional Products` tab, click `Add a line`, and select
the desired product to add as an optional product to the quotation
template.

<div class="tip">

<div class="title">

Tip

</div>

It's best to offer optional products that would encourage a customer to
add additional items to their order, or entice them to purchase a more
expensive version of their initially selected product.

For example, if a customer purchases a wooden chair, some optional
products could be: a warranty on that chair and/or a wooden chair with
leather seats.

</div>

When the desired optional product(s) have been added, click `Save` to
save all changes.

<div class="note">

<div class="title">

Note

</div>

There is no limit to how many optional products can be added to a
quotation template.

</div>

The products added in the `Optional Products` tab are present in the
quotation, by default, whenever that particular quotation template is
used.

![How to add optional products to your quotation templates on Odoo
Sales.](optional_products/optional-products-quotation-template.png)

<div class="seealso">

`/applications/sales/sales/send_quotations/quote_template`

</div>


---
## File: ./content/applications/sales/sales/send_quotations/get_paid_to_validate.md

# Online payment order confirmation

With Odoo *Sales*, online payments can be used to get automatic
confirmation on orders.

## Enable online payment

Go to `Sales app --> Configuration --> Settings`, scroll to the
`Quotations
\& Orders` heading, and activate the `Online Payment` feature by
checking the box next to it, and clicking `Save`.

![How to enable online payment on Odoo
Sales.](get_paid_to_validate/online-payment-setting.png)

After checking the box beside the `Online Payment` feature, a link to
the `Payment Acquirers` appears beneath it. Click that link to reveal
the entire `Payment Acquirers` page.

![Payment acquirers page in the Odoo Sales
application.](get_paid_to_validate/payment-acquirers.png)

On the `Payment Acquirers` page, payment acquirers can be selected and
configured. Before creating (or modifying) a payment acquirer, be sure
to review the documentation related to the ways payment acquirers can be
used with Odoo, such as:

  - `../../../finance/payment_acquirers/paypal`
  - `../../../finance/payment_acquirers/authorize`
  - `../../../finance/payment_acquirers`

<div class="note">

<div class="title">

Note

</div>

On quotation templates, the `Online Payment` feature is located under
the `Confirmation` tab.

On standard quotations, the `Online Payment` feature is located under
the `Other Info` tab.

</div>

## Register a payment

After opening quotations from the email they receive, customers are
presented with different options to make online payments, in the `Pay
with` section.

![How to register a payment on Odoo
Sales.](get_paid_to_validate/validate-order.png)

<div class="tip">

<div class="title">

Tip

</div>

Clicking the `Customer Preview` smart button on the quotation form
provides a preview of the quotation as the customer sees it, along with
the various online payment options they can choose from.

</div>

<div class="seealso">

`quote_template`

</div>


---
## File: ./content/applications/sales/sales/invoicing/time_materials.md

# Invoice based on time and materials

Time and Materials is generally used in projects in which it is not
possible to accurately estimate the size of the project, or when it is
expected that the project requirements would most likely change.

This is opposed to a fixed-price contract in which the owner agrees to
pay the contractor a lump sum for the fulfillment of the contract no
matter what the contractors pay their employees, sub-contractors, and
suppliers.

For this documentation I will use the example of a consultant, you will
need to invoice their time, their various expenses (transport, lodging,
...) and purchases.

## Invoice time configuration

To keep track of progress in the project, you will need the *Project*
app. Go to `Apps --> Project` to install it.

In *Project* you will use timesheets, to do so go to `Project -->
Configuration --> Settings` and activate the *Timesheets* feature.

![image](time_materials/time_materials01.png)

## Invoice your time spent

From a product page set as a service, you will find two options under
the invoicing tab, select both *Timesheets on tasks* and *Create a task
in a new project*.

![image](time_materials/time_materials02.png)

You could also add the task to an existing project.

Once confirming a sales order, you will now see two new buttons, one for
the project overview and one for the current task.

![image](time_materials/time_materials03.png)

You will directly be in the task if you click on it, you can also access
it from the *Project* app.

Under timesheets, you can assign who works on it. You can or they can
add how many hours they worked on the project so far.

![image](time_materials/time_materials04.png)

From the sales order, you can then invoice those hours.

![image](time_materials/time_materials05.png)

## Expenses configuration

To track & invoice expenses, you will need the expenses app. Go to `Apps
--> Expenses` to install it.

You should also activate the analytic accounts feature to link expenses
to the sales order, to do so, go to `Accounting -->
Configuration --> Settings` and activate *Analytic Accounting*.

## Add expenses to your sales order

From the expense app, you or your consultant can create a new one, e.g.
the hotel for the first week on the site of your customer.

You can then enter a relevant description and select an existing product
or create a new one from right there.

![image](time_materials/time_materials06.png)

Here, we are creating a *Hotel* product:

![image](time_materials/time_materials07.png)

under the invoicing tab, select *Delivered quantities* and either *At
cost* or *Sales price* as well depending if you want to invoice the cost
of your expense or a previously agreed on sales price.

![image](time_materials/time_materials08.png)

To modify or create more products go to `Expenses -->
Configuration --> Expense products`.

Back on the expense, add the original sale order in the expense to
submit.

![image](time_materials/time_materials09.png)

It can then be submitted to the manager, approved and finally posted.

![image](time_materials/time_materials10.png)

![image](time_materials/time_materials11.png)

![image](time_materials/time_materials12.png)

It will then be in the sales order and ready to be invoiced.

## Invoice purchases

The last thing you might need to add to the sale order is purchases made
for it.

You will need the *Purchase Analytics* feature, to activate it, go to
`Invoicing --> Configuration --> Settings` and select *Purchase
Analytics*.

While making the purchase order don't forget to add the right analytic
account.

![image](time_materials/time_materials08.png)

Once the PO is confirmed and received, you can create the vendor bill,
this will automatically add it to the SO where you can invoice it.


---
## File: ./content/applications/sales/sales/invoicing/milestone.md

# Invoice project milestones

Milestone invoicing can be used for expensive or large-scale projects,
with each milestone representing a clear sequence of work that will
incrementally build up to the completion of the contract. This invoicing
method is comfortable both for the company which is ensured to get a
steady cash flow throughout the project lifetime and for the client who
can monitor the project's progress and pay in several installments.

## Create milestone products

In Odoo, each milestone of your project is considered as a product. To
configure products to work this way, go to any product form.

You have to set the product type as *Service* under general information
and select *Milestones* in the sales tab.

![image](milestone/milestone01.png)

## Invoice milestones

From the sales order, you can manually edit the quantity delivered as
you complete a milestone.

![image](milestone/milestone02.png)

You can then invoice that first milestone.


---
## File: ./content/applications/sales/sales/invoicing/proforma.md

# Pro-forma invoices

A *pro-forma invoice* is an abridged or estimated invoice sent in
advance of a delivery of goods. It notes the kind and quantity of goods,
their value, and other important information, such as weight and
transportation charges.

Pro-forma invoices are commonly used as preliminary invoices with a
quotation. They are also used for customs purposes during importation.
They differ from a normal invoice in that they are not a demand (or
request) for payment.

## Activate the feature

In order to utilize pro-forma invoices, the *Pro-Forma Invoice* feature
**must** be activated. To do that, navigate to `Sales app -->
Configuration --> Settings`, and in the `Quotations & Orders` section,
click the checkbox next to `Pro-Forma Invoice`. Then, click `Save` to
save all changes.

![The Pro-Forma Invoice feature setting in the Odoo Sales
application.](proforma/pro-forma-setting.png)

## Send a pro-forma invoice

With the `Pro-Forma Invoice` feature activated, the option to send a
pro-forma invoice is now available on any quotation or sales order, via
the `Send Pro-Forma Invoice` button.

![The Send Pro-Forma Invoice button on a typical sales order in Odoo
Sales.](proforma/send-pro-forma-invoice-button.png)

When the `Send Pro-Forma Invoice` button is clicked, an email pop-up
appears. The `Recipients` field is auto-populated with the customer from
the sales order or quotation. Then, if needed, modify the `Subject`
field and the body of the email. The pro-forma invoice is automatically
added as an attachment to the email.

When ready, click `Send`, and Odoo instantly sends the email, with the
attached pro-forma invoice, to the customer.

![The email pop-up window that appears with pro-forma invoice attached
in Odoo Sales.](proforma/pro-forma-email-message-popup.png)

<div class="tip">

<div class="title">

Tip

</div>

To preview what the pro-forma invoice looks like, click on the PDF at
the bottom of the email pop-up window *before* clicking `Send`. When
clicked, the pro-forma invoice is downloaded instantly. Open that PDF to
view (and review) the pro-forma invoice.

![Sample pro-forma invoice PDF from Odoo
Sales.](proforma/pro-forma-pdf.png)

</div>


---
## File: ./content/applications/sales/sales/invoicing/expense.md

# Re-invoice expenses to customers

It often happens that your employees have to spend their personal money
while working on a project for your client. Let's take the example of a
consultant paying for a hotel to work on the site of your client. As a
company, you would like to be able to invoice that expense to your
client.

## Expenses configuration

To track & invoice expenses, you will need the expenses app. Go to `Apps
--> Expenses` to install it.

You should also activate the analytic accounts feature to link expenses
to the sales order, to do so, go to `Invoicing -->
Configuration --> Settings` and activate *Analytic Accounting*.

## Add expenses to your sales order

From the expense app, you or your consultant can create a new one, e.g.
the hotel for the first week on the site of your customer.

You can then enter a relevant description and select an existing product
or create a new one from right there.

![image](expense/expense01.png)

Here, we are creating a *Hotel* product:

![image](expense/expense02.png)

Under the invoicing tab, select *Delivered quantities* and either *At
cost* or *Sales price* as well depending if you want to invoice the cost
of your expense or a previously agreed on sales price.

![image](expense/expense03.png)

To modify or create more products go to `Expenses -->
Configuration --> Expense products`.

Back on the expense, add the original sale order in the expense to
submit.

![image](expense/expense04.png)

It can then be submitted to the manager, approved and finally posted.

![image](expense/expense05.png)

![image](expense/expense06.png)

![image](expense/expense07.png)

It will then be in the sales order and ready to be invoiced.


---
## File: ./content/applications/sales/sales/invoicing/invoicing_policy.md

# Invoice based on delivered or ordered quantities

Different business policies might require different options for
invoicing:

  - The **Invoice what is ordered** rule is used as **default mode** in
    Odoo Sales, which means that customers will be invoiced once the
    sales order is confirmed.
  - The **Invoice what is delivered** rule will invoice customers once
    the delivery is done. This rule concerns businesses that sell
    materials, liquids or food in large quantities. In these cases, the
    quantity might diverge a little bit and it is, therefore, preferable
    to invoice the quantity actually delivered.

Being able to have different invoicing options allow you more
flexibility. Indeed, you need to know exactly how to invoice your
customers for different situations.

## Activate these features

Go to `Sales --> Configuration --> Settings` and under **Invoicing
policy** choose the rule you want to apply.

![How to choose your invoicing policy on Odoo
Sales?](invoicing_policy/invoicing_policy_1.png)

<div class="important">

<div class="title">

Important

</div>

If you decide to choose the **Invoice what is delivered** rule, you will
not be able to activate the feature called **Automatic invoice**, which
automatically generates invoices when the online payment is confirmed.

</div>

## Choose an invoicing policy on a product form

From any product page, under the **Sales tab**, you will find the
invoicing policy, which can be manually changed.

![How to change your invoicing policy on a product form on Odoo
Sales?](invoicing_policy/invoicing_policy_5.png)

## Impact on sales flow

On Odoo Sales, the basic sales flow will be to create a quotation, send
it to your customer, wait for confirmation, confirm the sales order and
create an invoice.

  - **Invoice what is ordered**: No impact on this basic sales flow.
    Indeed, you can invoice as soon as the sale is confirmed.

  - **Invoice what is delivered**: Small impact on sales flow because
    you will have to manually enter the delivered quantity on the sales
    order or to install the **Inventory App** to confirm the delivered
    quantity before creating an invoice, with the **Sales App**. Indeed,
    if you try to create an invoice without validating the delivered
    quantity, you will receive an error message as below.
    
    ![How the choice of your invoicing policy impacts your sales flow on
    Odoo Sales?](invoicing_policy/invoicing_policy_3.png)

<div class="note">

<div class="title">

Note

</div>

Once the quotation is confirmed and that the status went from
**Quotation sent** to **Sales order**, you are able to see your
delivered and invoiced quantities directly from your sales order (it is
true for both rules).

![How to see your delivered and invoiced quantities on Odoo
Sales?](invoicing_policy/invoicing_policy_4.png)

Odoo will automatically add the quantities to the invoice (even if it is
a partial delivery).

</div>

Finally, to create an invoice, you will have different possibilities:
regular invoice or down payment (percentage or fixed amount).

<div class="important">

<div class="title">

Important

</div>

Be sure to check out our documentation about down payment here:
`down_payment`, to master this incredible feature.

</div>


---
## File: ./content/applications/sales/sales/invoicing/down_payment.md

# Down payments

A down payment is a partial payment made by the buyer when a sales
contract is concluded. This implies both parties' (seller and buyer)
full commitment to honor the contract.

With a down payment, the buyer pays a portion of the total amount owed
while agreeing to pay the remaining amount at a later date. In turn, the
seller provides goods or services to the buyer after accepting the down
payment, trusting that the remaining amount will be paid later on.

## Initial down payment request

When a sales order is confirmed, the option to create an invoice becomes
available, via the `Create Invoice` button, located in the upper-left
corner of the sales order form. When clicked, a `Create invoices` pop-up
appears.

<div class="note">

<div class="title">

Note

</div>

Invoices are automatically created in drafts, so they can be reviewed
before validation.

</div>

On the `Create invoices` pop-up, there are 3 options to choose from in
the `Create Invoice` field:

  -   - `Regular invoice`
        
        <div class="note">
        
        <div class="title">
        
        Note
        
        </div>
        
        If `Regular Invoice` is selected the other fields disappear, as
        they only pertain to down payment configurations.
        
        </div>

  - `Down payment (percentage)`

  - `Down payment (fixed amount)`

In terms of a down payment, it can either be a fixed amount or a
percentage of the total amount.

Once the desired down payment option is selected in the `Create Invoice`
field, designate the desired amount (either as a percentage or fixed
amount) in the `Down Payment Amount` field.

Then, select the appropriate income account for the invoice in the
`Income Account` field, and add a tax amount, if necessary, in the
`Customer Taxes` field. These settings will be reused for future down
payments.

![How to configure a down payment on Odoo
Sales.](down_payment/create-invoices-popup-form.png)

<div class="important">

<div class="title">

Important

</div>

When a down payment is first requested, a new product called `Down
payment` is created. This product is registered as a `Service` product,
with an invoicing policy of `Ordered quantities`. This product can be
edited and modified at any time.

</div>

<div class="warning">

<div class="title">

Warning

</div>

If `Delivered quantities` is chosen as the invoicing policy, an invoice
will **not** be able to be created.

</div>

## Request a 50% down payment

For the following example, the flow involves a 50% amount down payment
on a product with `Ordered quantities` as the invoicing policy.

<div class="seealso">

`/applications/sales/sales/invoicing/invoicing_policy`

</div>

When the order is confirmed (via the `Confirm` button), it's time to
create/view the invoice, by clicking `Create Invoice`.

Then, on the `Create invoices` pop-up window that appears, select `Down
payment
(percentage)`, and type <span class="title-ref">50</span> in the `Down
Payment Amount` field. Lastly, click `Create and View Invoice` to create
and view the invoice.

![Create invoices pop up window in Odoo
Sales.](down_payment/create-invoices-popup.png)

Doing so reveals the draft invoice, which mentions the down payment.

![A sample draft invoice with down payment mentioned in Odoo
Sales.](down_payment/draft-invoice.png)

From there, the invoice can be confirmed/posted, and the payment can be
registered. Return to the sales order, via the breadcrumbs.

On the sales order, the option to view what the customer will see is
available, via the `Customer Preview` smart button, and the `Invoice`
button reveals the drafted invoice. In either case, the down payment is
mentioned on both the sales order and draft invoice.

![How the down payment is mentioned on the sales order in Odoo
Sales.](down_payment/down-payment-line-item.png)

To confirm and register the first payment of the down payment, click the
`Invoices` smart button to return to the invoice. On the `Customer
Invoice` page, click `Confirm`, then `Register Payment` to open a
`Register Payment` pop-up form.

![How the register payment pop up looks in Odoo
Sales.](down_payment/register-payment-popup.png)

On this form, select the appropriate `Journal` and confirm that the down
payment amount is correct in the `Amount` field. Then, make any other
modifications to the other fields, if necessary, before clicking `Create
Payment`.

Odoo returns to the invoice, which now has a green `In Payment` banner
visible in the upper-right corner.

![How the initial down payment invoice has a green paid banner in Odoo
Sales.](down_payment/paid-banner-invoice-1.png)

Now, when the customer wants to pay the remaining amount of the order,
another invoice must be created. To do that, return to the sales order,
and click `Create Invoice`.

On the `Create invoices` pop-up window, there is now an option to
`Deduct down
payments`, which is selected by default.

![The deduct down payment option on the create invoices pop up in Odoo
Sales.](down_payment/deduct-down-payments-option.png)

If the remaining amount is ready to be paid, the `Regular Invoice`
option should be selected, and the `Deduct down payments` option should
*stay* selected. Then, click `Create and View Invoice`.

Doing so reveals a separate `Invoices` page, listing all the invoices
for that specific sales order. Each invoice line item displays all the
necessary information related to each invoice, along with the current
`Payment Status`.

![The down payment invoices page in Odoo
Sales.](down_payment/down-payment-invoices-page.png)

To complete the flow, select the invoice with the `Not Paid` status,
which opens that invoice. On the invoice page, click `Confirm`, then
`Register Payment`, and confirm that the remaining `Amount` is correct.
Then, click `Create Payment`.

That pop-up window disappears, and a green `In Payment` banner is now
present on the invoice. The line items on the invoice show that the
total amount has been paid, including mentions of the down payment, and
the flow is complete.

This flow is also possible with the `Fixed amount` down payment option.

<div class="important">

<div class="title">

Important

</div>

If a down payment is used with a product that has a `Delivered
quantities` invoicing policy, the down payments will **not** be able to
be deducted when it comes time to invoice the customer. This is because,
due to the invoicing policy, the product(s) would have to be delivered
*before* creating the final invoice.

If nothing has been delivered, a `Credit Note` is created, which cancels
the draft invoice that was created after the down payment. To utilize
the `Credit Note` option, the *Inventory* application must be installed,
in order to confirm the delivery. Otherwise, the delivered quantity can
be entered manually directly on the sales order.

</div>

## Income account and customer taxes modifications

To adjust the income account and customer taxes attached to a down
payment, navigate to the `Products` page (`Sales app --> Products -->
Products`), search for the <span class="title-ref">Down Payment</span>
product in the search bar, and select it to reveal the product detail
page.

On the `Down Payment` product page, click `Edit`, then scroll down to
the `General Information` tab. In this tab, the customer taxes can be
modified in the `Customer Taxes` field.

![How to modify the income account link to down
payments](down_payment/customer-taxes-field.png)

To change or adjust the income account attached to the `Down Payment`
product page, the *Accounting* app **must** be installed. With the
*Accounting* app installed, the `Accounting` tab becomes available on
the product page. That tab will **not** be accessible without the
*Accounting* app installed.

In the `Accounting` tab, the income account can be changed in the
`Income
Account` field, in the `Receivables` section. Once all desired changes
are complete, click `Save`.

![How to modify the income account link to down
payments](down_payment/income-account.png)

<div class="seealso">

`/applications/sales/sales/invoicing/invoicing_policy`

</div>


---
## File: ./content/applications/sales/sales/invoicing/subscriptions.md

# Sell subscriptions

Selling subscription products will give you predictable revenue, making
planning ahead much easier.

## Make a subscription from a sales order

From the sales app, create a quotation to the desired customer, and
select the subscription product your previously created from the
Subscriptions App.

When you confirm the sale the subscription will be created
automatically. You will see a direct link from the sales order to the
Subscription in the upper right corner.

![image](subscriptions/subscriptions01.png)


---
## File: ./content/applications/sales/crm/pipeline.md

  - nosearch

# Organize the pipeline

<div class="toctree" data-titlesonly="">

../../productivity/discuss/overview/plan\_activities
pipeline/lost\_opportunities pipeline/multi\_sales\_team

</div>


---
## File: ./content/applications/sales/crm/pipeline/multi_sales_team.md

# Multiple sales teams

Odoo lets you manage several sales teams, departments, or channels, each
with their own unique sales processes, using *Sales Teams*.

## Create a new Sales Team

To create a new Sales Team, go to `CRM --> Configuration --> Sales
Teams` then click **Create**.

On the creation page, set an *Email Alias* to automatically generate a
lead/opportunity for this Sales Team every time a message is sent to
that unique email address. You can also choose whether to accept emails
from *Everyone*, *Authenticated Partners*, or *Followers Only*.

Set a *Domain* to assign leads/opportunities to this Sales Team based on
specific filters, such as country, language, or campaign. Set an
*Invoicing Target* if this team has specific monthly revenue goals.

![Creating a Sales Team](multi_sales_team/sales-team-creation.png)

### Add members to a Sales Team

To add team members, click **Add** under the Assignment tab when editing
the Sales Team's configuration page. Select a salesperson from the
dropdown menu or create new salesperson. Set a maximum number of leads
that can be assigned to this salesperson in a 30-day period to ensure
that they do not overwork.

![Adding a Salesperson](multi_sales_team/add-a-salesperson.png)

One person can be added as a team member or Team Leader to multiple
Sales Teams, allowing them to access all of the pipelines that they need
to.

## Sales Team dashboard

To view the Sales Team dashboard, go to `CRM --> Configuration --> Sales
Teams`. Any teams you are a part of will appear as dashboard tiles.

Each tile gives an overview of the Sales Team's open opportunities,
quotations, sales orders, and expected revenue, as well as a bar graph
of new opportunities per week and an invoicing progress bar.

![Sales Team Overview](multi_sales_team/sales-team-overview.png)

Click on the three dots in the corner of a tile to open a navigational
menu that lets you quickly view documents or reports, create new
quotations or opportunities, pick a color for this team, or access its
configuration page.

![Three Dot Menu](multi_sales_team/team-overview-three-dot-menu.png)

Click on the **Pipeline** button to go directly to that team's CRM
pipeline.


---
## File: ./content/applications/sales/crm/pipeline/lost_opportunities.md

# Manage lost opportunities

While working with your opportunities, you might lose some of them. You
will want to keep track of the reasons you lost them and also which ways
Odoo can help you recover them in the future.

## Mark a lead as lost

While in your pipeline, select any opportunity you want and you will see
a *Mark Lost* button.

You can then select an existing *Lost Reason* or create a new one right
there.

![image](lost_opportunities/lost_opportunities01.png)

### Manage & create lost reasons

You will find your *Lost Reasons* under `Configuration --> Lost
Reasons`.

You can select & rename any of them as well as create a new one from
there.

## Retrieve lost opportunities

To retrieve lost opportunities and do actions on them (send an email,
make a feedback call, etc.), select the *Lost* filter in the search bar.

![image](lost_opportunities/lost_opportunities02.png)

You will then see all your lost opportunities.

If you want to refine them further, you can add a filter on the *Lost
Reason*.

For Example, *Too Expensive*.

![image](lost_opportunities/lost_opportunities03.png)

## Restore lost opportunities

From the Kanban view with the filter(s) in place, you can select any
opportunity you wish and work on it as usual. You can also restore it by
clicking on *Archived*.

![image](lost_opportunities/lost_opportunities04.png)

You can also restore items in batch from the Kanban view when they
belong to the same stage. Select *Restore Records* in the column
options. You can also archive the same way.

![image](lost_opportunities/lost_opportunities05.png)

To select specific opportunities, you should switch to the list view.

![image](lost_opportunities/lost_opportunities06.png)

Then you can select as many or all opportunities and select the actions
you want to take.

![image](lost_opportunities/lost_opportunities07.png)

<div class="seealso">

\* `../performance/win_loss`

</div>


---
## File: ./content/applications/sales/crm/track_leads.md

  - nosearch

# Assign and track leads

<div class="toctree" data-titlesonly="">

track\_leads/prospect\_visits track\_leads/lead\_scoring

</div>


---
## File: ./content/applications/sales/crm/optimize/gamification.md

# How to motivate and reward my salespeople?

Challenging your employees to reach specific targets with goals and
rewards is an excellent way to reinforce good habits and improve your
salespeople productivity. The Gamification module gives you simple and
creative ways to motivate and evaluate your employees with real-time
recognition and badges inspired by game mechanics.

## Configuration

Install the *Gamification* module, or the *CRM gamification* one, which
adds some useful data (goals and challenges) that can be used on
*CRM/Sale*.

![View of the gamification module being installed in
Odoo](gamification/gamification_module_install.png)

## Create a challenge

Now, create your first challenge by going to `Settings --> Gamification
Tools
--> Challenges`.

<div class="note">

<div class="title">

Note

</div>

As the gamification tool is a one-time technical setup, you need to
activate the technical features in order to access the configuration. To
do so, go to *Settings* and *Activate the developer mode*.

</div>

![View if the gamification tools menu in Odoo
Settings](gamification/gamification_tools_menu.png)

A challenge is a mission that you send to your sales team. It can
include one or several goals, set for a specific period of time.
Configure your challenge as follows:

1.  Assign the salespeople to be challenged;
2.  Assign a responsible;
3.  Set up the periodicity along with the start and the end date;
4.  Select your goals;
5.  Set up your rewards (badges).

<div class="note">

<div class="title">

Note

</div>

Badges are granted when a challenge is finished. This is either at the
end of a running period (eg: end of the month for a monthly challenge),
at the end date of a challenge (if no periodicity is set), or when the
challenge is manually closed.

</div>

In the example below, 2 employees are being challenged with a *Monthly
Sales Target*. The challenge is based on 2 goals: the total amount
invoiced and number of new leads generated. At the end of the month, the
winner will be granted with a badge.

![View of the challenge form and a challenge being created for Odoo
Sales](gamification/challenges.png)

### Set up goals

The users can be evaluated using goals and numerical objectives to
reach.  
**Goals** are assigned through *challenges* that evaluate (see image
above) and compare members of a team throughout time.  
You can create a new goal on the fly from a *Challenge* by clicking on
*Add new item*, under *Goals*. Select the business object according to
your company's needs. Examples: number of new leads, time to qualify a
lead, total amount invoiced in a specific week, month or any other time
frame based on your management preferences, etc.

![View of the goal definition form and a goal definition being created
for Odoo Sales](gamification/goal_definitions.png)

<div class="note">

<div class="title">

Note

</div>

Goals may include your database setup as well (e.g. set your company
data and a timezone, create new users, etc.).

</div>

### Set up rewards

For non-numerical achievements, **Badges** can be granted to users. From
a simple thank you to an exceptional achievement, a badge is an easy way
to express gratitude to a user for their good work. To create and grant
badges to your employees based on their performance, go to `Settings -->
Gamification Tools --> Badges`.

![View of the badges page in Odoo](gamification/badges.png)


---
## File: ./content/applications/sales/crm/optimize/outlook_extension.md

# Outlook Extension

The **Odoo CRM Extension** is a connector that bridges your Outlook
mailbox with your Odoo database. This extension allows you to:

  - Create leads from emails sent to your mailbox.
  - Centralize Prospects' emails into a CRM.
  - Search and store insights on your contacts.

![Overview of the Outlook Extension in
Outlook](outlook_extension/outlook-extension-overview.png)

<div class="note">

<div class="title">

Note

</div>

This extension is compatible with the Web version of Outlook as well as
the desktop apps.

</div>

<div class="important">

<div class="title">

Important

</div>

The Outlook Extension uses *Partner Autocomplete IAP credits* to search
and store insights on your contacts. See the `Pricing section
<outlook_extension/pricing>` below for more information.

</div>

## Configuration

The Outlook Extension requires to be configured both in Odoo and in
Outlook.

### Enable the feature on your database

To enable this feature on your Odoo database, go to `CRM -->
Configuration --> Lead
Generation`, enable **Outlook CRM Extension**, and click on *Save*.

### Install the add-in on Outlook

You can install the Outlook Extension as a **Custom Add-in**. To do so,
follow these steps:

<div class="important">

<div class="title">

Important

</div>

| URL of the **Odoo for Outlook** add-in's manifest file: |
`https://download.odoo.com/plugins/outlook/manifest.xml`

<div class="todo">

add copy button when the feature is added to the doc

</div>

</div>

1.  Connect to your Outlook mailbox, open any email, and click on the
    *More actions* button, displayed as three little dots.
    
    ![The button "More actions" in
    Outlook](outlook_extension/outlook-extension-more-actions.png)

2.  Click on *Get add-ins*.
    
    ![List of actions in Outlook, including the installation of new
    add-ins](outlook_extension/outlook-extension-get-add-ins.png)

3.  In the new window, select the tab named *My add-ins*, click on *+
    Add a custom add-in*, and then on *Add from URL...*
    
    ![Installation of a custom add-in in
    Outlook](outlook_extension/outlook-extension-custom-add-ins.png)

4.  Outlook prompts you to **enter the URL of the add-in's manifest
    file**. To do so, copy the following URL, paste it in the box, and
    click on *OK*.  
    `https://download.odoo.com/plugins/outlook/manifest.xml`
    
    ![Getting a custom add-in in Outlook by providing the manifest
    file's URL](outlook_extension/outlook-extension-add-in-url.png)

5.  Outlook warns you that Microsoft hasn’t verified the add-in. Click
    on *Install* to complete the installation.

<div class="note">

<div class="title">

Note

</div>

The *Odoo for Outlook* add-in is not listed yet on Outlook's add-ins
list. This is why it is currently necessary to install it as a *custom
add-in*.

</div>

### Add a shortcut to open the extension

By default, you can open the **Odoo for Outlook** extension from the
*More actions* menu. This section explains how to move the launcher next
to the other default actions.

![Odoo for Outlook extension as a default action in the
mailbox](outlook_extension/outlook-extension-default-actions.png)

1.  In your Outlook mailbox, click on *Settings*, then on *View all
    Outlook settings*.

2.  Go to `Settings --> Mail --> Customize actions --> Message surface`,
    select *Odoo for Outlook*, and click on *Save*.
    
    ![add Odoo for Outlook extension as a default action in the message
    surface](outlook_extension/outlook-extension-customize-actions.png)

### Connect to your database

1.  Open **Odoo for Outlook** from any email. This opens the extension
    as a panel on the right side of your screen.

2.  Click on *login* at the bottom of the extension.

3.  Insert your database's URL then click on *Login*.
    
    ![Connection to an Odoo database from the Outlook
    extension](outlook_extension/outlook-extension-database-url.png)

4.  Log into your database by entering your credentials. Skip this step
    if you are already logged in with this browser.

5.  A message asks you if you want to let Outlook access your Odoo
    database. Click on *Allow* to complete the connection.
    
    <div class="important">
    
    <div class="title">
    
    Important
    
    </div>
    
    Make sure first to `enable the feature on your database
    <outlook_extension/enable-feature>`. Failing to do so would result
    in an *error 404 message*.
    
    </div>

<div class="note">

<div class="title">

Note

</div>

The extension displays some information, even if you do not connect it
to any Odoo database. Note that only a limited amount of contact
enrichment requests are available as a trial, as this feature requires
prepaid credits. See the `Pricing section <outlook_extension/pricing>`
below for more information.

</div>

## Pricing

The extension is **free** and doesn't require any purchase to be
installed and used.

However, this extension provides you with *Lead Enrichment* in the
**Company Insights** section. This service is part of a paid service
known as **Lead Generation**.

The extension allows you to test this service for free, whether you
connect the extension to a database or not. After a while, the extension
asks you to buy credits to keep using this additional service.

!["Could not auto-complete the company: not enough credits\!" warning
message in the
Outlook&#10;extension](outlook_extension/outlook-extension-credits-message.png)

<div class="tip">

<div class="title">

Tip

</div>

You can buy more *Lead Generation* credits to keep using this service or
disregard this message and keep using the extension for free without
*Lead Enrichment*.

</div>

### In-App Purchase

*Lead Generation* is an *In-App Purchase (IAP)* service, which requires
prepaid credits to be used. Each request consumes one credit.  
To buy credits, go to `Settings --> Contacts --> Partner Autocomplete or
Odoo IAP --> View My Services` and select a package.

<div class="note">

<div class="title">

Note

</div>

\- If you run out of credits, the only information populated when
clicking on the suggested company is the website link and logo. - If you
are on Odoo Online and have the Enterprise version, you benefit from
free trial credits to test the feature. - Learn about our *Privacy
Policy* [here](https://iap.odoo.com/privacy#header_2).

</div>

<div class="seealso">

\- `../../../general/in_app_purchase` - [Odoo Tutorials: Lead
Enrichment](https://www.odoo.com/r/p73)

</div>


---
## File: ./content/applications/sales/crm/optimize/partner_autocomplete.md

# Enrich your contacts base with Partner Autocomplete

Parter Autocomplete helps you to enrich your contacts database with
corporate data. Select one of the companies suggested in the dropdown,
and quickly get all the information you need.

## Configuration

Go to `Settings --> Contacts` and activate the *Partner Autocomplete*
feature.

![View of settings page and the activations of the feature in
Odoo](partner_autocomplete/settings_partner_autocomplete.png)

## Enrich your contacts with corporate data

From any module, once you start to create a new contact typing the name
of it, the system will suggest a potential match. If you select it, the
contact will be populated with corporate data.  
For example, after typing *Odoo*, you will get the following
information:

![Creating a new contact in
Odoo](partner_autocomplete/odoo_autocomplete.png)

![View of the information being shown about odoo with the autocomplete
option in Odoo](partner_autocomplete/odoo_info_autocomplete.png)

<div class="tip">

<div class="title">

Tip

</div>

Partner Autocomplete also works if you enter a VAT number instead of a
company name.

</div>

## Pricing

*Partner Autocomplete* is an *In-App Purchase (IAP)* service, which
requires prepaid credits to be used. Each request will consume one
credit.  
To buy credits, go to `Settings --> Contacts --> Partner Autocomplete or
Odoo IAP --> View My Services` and select a package.

<div class="note">

<div class="title">

Note

</div>

\- If you run out of credits, the only information that will be
populated when clicking on the suggested company will be the website
link and the logo. - If you are on Odoo Online and you have the
Enterprise version, you benefit from free trial credits to test the
feature. - Learn about our *Privacy Policy*
[here](https://iap.odoo.com/privacy#header_2).

</div>


---
## File: ./content/applications/sales/crm/track_leads/prospect_visits.md

# Track your prospects visits

Tracking your website pages will give you much more information about
the interests of your website visitors.

Every tracked page they visit will be recorded on your lead/opportunity
if they use the contact form on your website.

## Configuration

To use this feature, install the free module *Lead Scoring* under your
*Apps* page (only available in Odoo Enterprise).

![image](prospect_visits/prospect_visits01.png)

## Track a webpage

Go to any static page you want to track on your website and under the
*Promote* tab you will find *Optimize SEO*

![image](prospect_visits/prospect_visits02.png)

There you will see a *Track Page* checkbox to track this page.

![image](prospect_visits/prospect_visits03.png)

## See visited pages in your leads/opportunities

Now each time a lead is created from the contact form it will keep track
of the pages visited by that visitor. You have two ways to see those
pages, on the top right corner of your lead/opportunity you can see a
*Page Views* button but also further down you will see them in the
chatter.

Both will update if the viewers comes back to your website and visits
more pages.

![image](prospect_visits/prospect_visits04.png)

![image](prospect_visits/prospect_visits05.png)

The feature will not repeat multiple viewings of the same pages in the
chatter.

Your customers will no longer be able to keep any secrets from you\!


---
## File: ./content/applications/sales/crm/track_leads/lead_scoring.md

# Assign leads based on scoring

*Lead Scoring* lets you rank and prioritize leads based on selected
criteria. A higher score indicates that a lead is more likely to bring
value to your company.

For example, if customers from Canada tend to be more likely to purchase
your products, you can assign them a higher score than customers from
other countries.

## Configuration

To use scoring, go to `Apps`, remove the `Apps` filter, search for `Lead
Scoring` and then install the module.

![Lead Scoring module
installation](lead_scoring/lead-scoring-module.png)

## Create scoring rules

To manage scoring rules, go to `CRM --> Leads --> Scoring Rules`.

Customize your rules to fit the needs of your business, and add as many
criteria as you want.

![Score Rule example](lead_scoring/scoring-example.png)

Every hour, Odoo automatically assigns scores to new leads according to
your configured rules.

![Scoring section on a lead](lead_scoring/scoring-section-on-lead.png)

## Assign leads

Odoo can also assign leads to specific teams based on configured rules.
To configure assignment rules, go to the individual Sales Team's
configuration page via `CRM --> Leads -->
Team Assignment` or `CRM --> Configuration --> Sales Teams`, and apply a
specific Domain to each team. The Domain can include lead scores.

![Team Assignments using domains](lead_scoring/team-assignation.png)

Assign leads to specific salespeople using further refined Domains at
`CRM --> Leads
--> Leads Assignment`.

![Lead Assignments](lead_scoring/lead-assignment-filters.png)

Odoo automatically assigns new leads to teams/salespeople once per day.

## Evaluate and use the unassigned leads

Not all leads will fall into your set Domains and get assigned
automatically by Odoo.

To view your unassigned leads, go to `CRM --> Leads --> Leads` and
select the Unassigned filter.

![Filtering for unassigned leads](lead_scoring/unassigned-filter.png)

<div class="note">

<div class="title">

Note

</div>

You can also find unassigned leads and create re-engagement campaigns
using the `Email
Marketing` or `Marketing Automation` apps.

</div>


---
## File: ./content/applications/sales/crm/performance.md

  - nosearch

# Analyze performance

<div class="toctree" data-titlesonly="">

performance/win\_loss performance/google\_spreadsheets

</div>


---
## File: ./content/applications/sales/crm/optimize.md

  - nosearch

# Optimize your Day-to-Day work

<div class="toctree" data-titlesonly="">

optimize/partner\_autocomplete optimize/outlook\_extension
optimize/gamification

</div>


---
## File: ./content/applications/sales/crm/acquire_leads.md

  - nosearch

# Acquire leads

<div class="toctree" data-titlesonly="">

acquire\_leads/convert acquire\_leads/generate\_leads
acquire\_leads/send\_quotes acquire\_leads/lead\_mining

</div>


---
## File: ./content/applications/sales/crm/acquire_leads/generate_leads.md

# Generate leads/opportunities

Two key ways to generate new leads or opportunities for your business
are through email aliases and website contact forms. Odoo automatically
creates leads in your CRM whenever someone sends a message to a Sales
Team email alias or fills out a contact form on your website.

## Configure email aliases

Each Sales Team can use its own unique email alias to generate
leads/opportunities. Any email sent to a Sales Team's email alias will
automatically create a lead (if leads are activated in your CRM
settings) or an opportunity in the pipeline for that particular team.
Configure custom email aliases on the configuration page for each Sales
Team by navigating to `CRM -->
Configuration --> Sales Teams`.

![Configuring Sales Teams](generate_leads/sales-team-config.png)

## Use Contact Forms on your website

By default, your website's *Contact Us* page displays Odoo's
ready-to-use Contact Form. Whenever someone submits this form, a lead or
an opportunity is generated in your database.

![Default Contact Us page](generate_leads/default-contact-us-page.png)

The Contact Form can be activated or deactivated at any time by going to
`Website
--> Go to Website --> Customize --> Contact Form`.

![Contact Form toggle](generate_leads/contact-form-toggle.png)

When the Form is deactivated, the *Contact Us* page simply displays a
button to email your company directly. Any email sent this way will
generate a lead/opportunity.

![Contact Us Page using
email](generate_leads/default-contact-us-page-no-form.png)

Choose which Sales Team or salesperson is automatically assigned to the
leads/opportunities created from the Contact Form by going to `Website
--> Configuration --> Settings -->
Communication`.

![Contact Form settings](generate_leads/contact-form-settings.png)

## Customize Contact Forms

Contact Forms can be customized for the specific information your team
needs, using the free *Form Builder* module.

The *Form Builder* module is installed automatically when a Form element
is added to a web page via the Website Builder. It can also be installed
manually from the `Apps` page.

![Form Builder building blocks](generate_leads/form-building-block.png)

<div class="tip">

<div class="title">

Tip

</div>

Forms can be created from scratch to serve a wide variety of purposes.
However, Odoo's default *Contact Us* page is designed to fit most users'
needs. Start with the default form and modify from there.

</div>

### Edit Contact Form fields

In Edit mode on your website, click on any field to start editing it.
The following information can be edited for each field on the Contact
Form:

  - `Type`: Choose a custom field option or an existing field. Examples
    include phone, file upload, language, etc.
  - `Input Type`: Determine the type of entry customers should input.
    Available options are text,email, telephone, and URL.
  - `Input Placeholder`: Type in an example to guide users how to input
    information where formatting is important, such as a phone number or
    email address.
  - `Label Name`: Type in the display name to show users what
    information is needed from them.
  - `Label Position`: Choose the way the label is aligned with the rest
    of the form. The label can be hidden, above the field, to the far
    left of the field, or right adjusted and closer to the field.
  - `Required`: Toggle this option for information that you absolutely
    need entered.
  - `Hidden`: Toggle this option to hide the field without deleting it.
  - `Shown on Mobile`: Toggle this option to show the field to users on
    mobile devices.

![Editable field options](generate_leads/editable-field-options.png)

By default, when a Form is submitted, it sends you an email with the
customer's inputted information. To have it automatically generate a
lead/opportunity instead, edit the Form and select `Create an
Opportunity` as the Action.

<div class="tip">

<div class="title">

Tip

</div>

If leads are activated in your CRM settings, selecting `Create an
Opportunity` generates a lead instead. To learn more about activating
leads in the CRM settings, head over to `convert`.

</div>


---
## File: ./content/applications/sales/crm/acquire_leads/lead_mining.md

# Lead mining

Lead mining is a feature that allows CRM users to generate new leads
directly into their Odoo database. To ensure lead qualification, lead
mining output is determined by a variety of filtering criteria, such as
the country, the company size, and the industry.

## Configuration

To get started, go to `CRM --> Configuration --> Settings` and activate
`Lead Mining`.

![Activate lead mining in Odoo CRM
settings.](lead_mining/activate-lead-mining.png)

## Generate leads

After the `Lead Mining` setting is activated, a new button called
`Generate
Leads` is available to use in the `CRM` pipeline. Lead mining requests
are also available through `CRM --> Configuration --> Lead Mining
Requests`, or through `CRM --> Leads --> Leads` where the `Generate
Leads` button is also available.

![The Generate Leads button to use the lead mining
feature.](lead_mining/generate-leads-button.png)

Click on the `Generate Leads` button, and a window will appear offering
a variety of criteria by which to generate leads.

![The pop-up window with the selection criteria in order to generate
leads in Odoo.](lead_mining/generate-leads-popup.png)

Choose to generate leads for `Companies` to get company information
only, or choose `Companies and their Contacts` to get company
information as well as individual employee contact information. When
targeting `Companies and their Contacts`, there is an option to filter
contacts based on `Role` or `Seniority`.

Additional filtering options include:

  - `Size`: filter leads based on the number of employees at the company
  - `Countries`: filter leads based on the country (or countries) they
    are located in
  - `States`: further filter leads based on the state they are located
    in, if applicable
  - `Industries`: filter leads based on the specific industry they work
    in
  - `Sales Team`: choose which Sales Team the leads will be assigned to
  - `Salesperson`: choose which person(s) on the Sales Team the leads
    will be assigned to
  - `Default Tags`: choose which tags are applied directly to the leads
    once found

<div class="note">

<div class="title">

Note

</div>

Make sure to be aware of the latest EU regulations when receiving
contact information. Get more information about the General Data
Protection Regulation on [Odoo GDPR](http://odoo.com/gdpr).

</div>

## Pricing

Lead mining is an *In-App Purchase* feature and each generated lead
costs one credit.

Choosing to generate `Companies and their Contacts` costs one additional
credit for each contact generated.

<div class="note">

<div class="title">

Note

</div>

See here for full pricing information: [Lead Generation by Odoo IAP
\<https://iap.odoo.com/iap/ in-app-services/167?\>]().

</div>

To buy credits, navigate to `CRM --> Configuration --> Settings`. In the
`Lead Generation` section, under the `Lead Mining` feature, click on
`Buy Credits`.

![Buy credits from the lead mining
settings.](lead_mining/buy-lead-mining-credits-setting.png)

Credits may also be purchased by navigating to the `Settings --> General
Settings`. In the `In-App Purchases` section, under the `Odoo IAP`
feature, click on `View My Services`.

![Buy credits in the Odoo IAP
settings.](lead_mining/view-my-services-setting.png)

<div class="tip">

<div class="title">

Tip

</div>

Users of Odoo Online (SaaS) Enterprise automatically have free trial
credits in their database to test any IAP features.

</div>

<div class="seealso">

\* `../../../general/in_app_purchase`

</div>


---
## File: ./content/applications/sales/crm/acquire_leads/send_quotes.md

# Send quotations

When you qualify a lead into an opportunity you will most likely need to
send them a quotation. You can directly do this in the CRM App with
Odoo.

![image](send_quotes/send_quotes01.png)

## Create a new quotation

By clicking on any opportunity or lead, you will see a *New Quotation*
button, it will bring you into a new menu where you can manage your
quote.

![image](send_quotes/send_quotes02.png)

You will find all your quotes to that specific opportunity under the
*Quotations* menu on that page.

![image](send_quotes/send_quotes03.png)

## Mark them won/lost

Now you will need to mark your opportunity as won or lost to move the
process along.

If you mark them as won, they will move to your *Won* column in your
Kanban view. If you however mark them as *Lost* they will be archived.


---
## File: ./content/applications/sales/crm/acquire_leads/convert.md

# Convert leads into opportunities

The system can generate leads instead of opportunities, in order to add
a qualification step before converting a *Lead* into an *Opportunity*
and assigning to the right sales people.

You can activate this mode from the CRM Settings. It applies to all your
sales channels by default. But you can make it specific for specific
channels from their configuration form.

## Configuration

For this feature to work, go to `CRM --> Configuration --> Settings` and
activate the *Leads* feature.

![image](convert/convert01.png)

You will now have a new submenu *Leads* under *Leads* where they will
aggregate.

![image](convert/convert02.png)

## Convert a lead into an opportunity

When you click on a *Lead* you will have the option to convert it to an
opportunity and decide if it should still be assigned to the same
channel/person and if you need to create a new customer.

![image](convert/convert03.png)

If you already have an opportunity with that customer Odoo will
automatically offer you to merge with that opportunity. In the same
manner, Odoo will automatically offer you to link to an existing
customer if that customer already exists.

## Merge opportunities

Odoo will also automatically propose to merge opportunities if they have
the same email address. When merging opportunities, Odoo merges the
information into the opportunity which was created first, giving
priority to the information present on the first opportunity.

No information is lost: data from the other opportunity is logged in the
chatter and the information fields for easy access.

![image](convert/convert_04.png)

Would you find a duplicate yourself, ...you can also merge opportunities
or leads even if the system doesn't propose it.

Here’s how, from the list view. Select the opportunities or leads you
want to merge and the action button will appear. Then, you can select
merge.

![image](convert/convert_05.png)

<div class="note">

<div class="title">

Note

</div>

It is also possible to merge more than 2 opportunities or leads.

</div>


---
## File: ./content/applications/sales/crm/performance/google_spreadsheets.md

# How to use Google Spreadsheet in Addition to my Data?

Create custom dashboards in Google Spreadsheet that retrieves data
directly from Odoo using spreadsheet formula. You can use it to create
sales commission plans, budgets, project forecasts, etc. Formulas are
written in Python but programming skills are not required.

## Configuration

From the *General Settings*, activate *Google Drive* and *Google
Spreadsheet*. The options *Authorization Code* and *Get Authorization
Code* are now available.

![Enable the Google Drive and Google Spreadsheet features in
Odoo](google_spreadsheets/authori.png)

Now, link your Google account with Odoo by following these steps:

1.  Get Authorization Code
2.  Select your Google account
3.  Enter your password
4.  Copy the code
5.  Paste it into the Authorization Code field

### Create a new Spreadsheet

From the *CRM* app, for example, go to *Favorites* and click on *Add to
Google Spreadsheet*.

![From the CRM application, for example, click on add to Google
Spreadsheet in Odoo](google_spreadsheets/add_to_google_spread.png)

A new spreadsheet will be automatically created in your Google Drive.

<div class="note">

<div class="title">

Note

</div>

When you opening this new file, a second sheet is created automatically
by Odoo with a tutorial/documentation on *How to use Google
Spreadsheet*.

</div>

### Link a Spreadsheet with Odoo

From this new file, configure your database.  
Go to `Odoo --> Server Settings --> Database Name --> Username -->
Password`.

![Menu called Odoo is shown on the settings bar in the
Spreadsheet](google_spreadsheets/odoo_menu.png)

## Applications

You have two different formulas available when using Google Spreadsheet
in Odoo: *retrieve data* and *retrieve grouped sums*.

<div class="warning">

<div class="title">

Warning

</div>

Google Drive limits the execution time of scripts; if the data you
requested takes too long to be delivered, you might get an error. There
is no specific size limit, since the time for Odoo to respond depends on
several factors - although reading data regarding several thousand
records is usually fine.

</div>

### Retrieve Data

The theoretical formula is `= oe_browse
(table;columns;filters;orderby:limit)`. Used it if you want to display
the information without grouping it (e.g.: each sales order in the
database).  
Find some the arguments in the table below.

![Table with examples of arguments to use in
Odoo](google_spreadsheets/retrieve_data.png)

### Retrieve Grouped Sums

The theoretical formula is `= oe_read_group
(table;columns;group_by;filters;orderby:limit)`. Use it when you want to
display a sum of data (e.g.: total invoiced).  
Find some arguments in the table below.

![Table with examples of grouped sum arguments to use in
Odoo](google_spreadsheets/retrieve_sums.png)

### Other uses

Mix Odoo data with spreadsheet data, add traditional formulas, and
create Dynamic Tabled and Graphs.


---
## File: ./content/applications/sales/crm/performance/win_loss.md

# Check your Win/Loss Ratio

To see how well you are doing with your pipeline, take a look at the
Win/Loss ratio.

To access this report, go to your *Pipeline* view under the *Reporting*
tab.

From there you can filter to which opportunities you wish to see, yours,
the ones from your sales channel, your whole company, etc. You can then
click on filter and check Won/Lost.

![image](win_loss/win_loss01.png)

You can also change the *Measures* to *Total Revenue*.

![image](win_loss/win_loss02.png)

You also have the ability to switch to a pie chart view.

![image](win_loss/win_loss03.png)


---
## File: ./content/applications/sales/subscriptions/follow_up/automatic_alerts.md

# Set up automatic alerts

Now that your subscriptions are up and running, you want to stay
up-to-date with your customers. Some automation would be appreciated
since you would not want to go through the list of all your subscribers
to check how things are going. This is what the *Automatic Alerts*
feature is for.

For example, when customers subscribe to your magazine, you would
probably want to send them an email to welcome them and express your
gratitude. Or, if the satisfaction rate of your customers drops below
50%, you would probably want to schedule a call with them to understand
the reasons for their dissatisfaction.

With **Odoo Subscriptions**, you can set automatic emails, create a
"Call" task for one of your salespeople so that he/she can try to
understand your customer's dissatisfaction, and finally, why not
automatically send satisfaction surveys so customers can evaluate your
services? All of that is now possible.

## Create a new automatic alert

The following example shows how to create a new automatic alert to send
satisfaction surveys to your customers, by email, after one month of
subscription. To do so, go to `Subscriptions
--> Configuration --> Alerts`, and create a new alert.

![New automatic alert in Odoo
Subscriptions](automatic_alerts/create-a-new-automatic-alert.png)

1.  On the *Apply on* section, first give the alert a name. Then, you
    can choose to apply this alert on a subscription template, on a
    specific customer, or even on a specific product. If you want to add
    more specifications, you can also specify the value of your MRR, the
    change rate of your MRR over a certain period of time, the value of
    the satisfaction rate, and even the stage to which you want to apply
    this alert.
    
    <div class="note">
    
    <div class="title">
    
    Note
    
    </div>
    
    In this example, the alert is applied to a specific product, and the
    stage goes from *Undefined* to *In Progress*.
    
    </div>

2.  For the *Action* section, specify the *Action* and the *Trigger on*.
    If the *Trigger on* is set to *Modification*, the action is
    triggered every time there is a change or anything added to the
    subscription, and all the conditions on the *Apply on* section are
    met. Now, if the *Trigger on* is set to *Timed condition*, it means
    that the action is triggered based on the type of *Trigger date*.
    After that, you can choose your *Action*. You have the choice
    between *Create next activity*, *Set a tag on the subscription*,
    *Set a stage on the subscription*, *Mark as To Renew*, *Send an
    email to the customer* and *Send an SMS Text Message to the
    customer*.
    
    <div class="note">
    
    <div class="title">
    
    Note
    
    </div>
    
    In the example above, the *Trigger on* is set to *Timed condition*,
    therefore, a *Trigger date* and *Delay after trigger* need to be
    specified. And because the *Send an email to the customer* action
    was adopted, an *Email template* can be chosen.
    
    </div>

As a result, this alert will send a rating survey after one month, to
the customers who have purchased that specific product. The survey will
appear in the chatter of your respective subscription.

![Satisfaction survey in Odoo
Subscriptions](automatic_alerts/rating-satisfaction-survey.png)

## Modify an existing automatic alert

By default, Odoo suggests you an automatic alert called *Take action on
less satisfied clients*.

![Modify an existing automatic alert in Odoo
Subscriptions](automatic_alerts/modify-an-existing-automatic-alert.png)

This alert is applied to the *Rating Satisfaction* of your customers,
and the action is triggered on *Timed condition*. If their satisfaction
rate is lower than 50%, a salesperson contacts the customer. This action
is automatically assigned to the salesperson who manages the
subscription, and the due date is 5 days after the triggering of this
action. This alert ensures that your clients are happy and that you are
taking actions if they are not. It helps to keep your customer retention
rates very high.

<div class="note">

<div class="title">

Note

</div>

By editing the alert, you can modify the *Apply on*, the *Action* and
*Activity* sections, and adapt them to your own needs.

</div>

<div class="seealso">

\- `../../subscriptions/configuration/subscription_templates` -
`../../subscriptions/configuration/subscription_products` -
`../../subscriptions/sales_flow/create_a_quotation` -
`../../subscriptions/reporting/subscription_reports`

</div>


---
## File: ./content/applications/sales/subscriptions/reporting/subscription_reports.md

# Generate subscription reports

As we know, understanding how our business is going, and where it is
going, is key to success. And particularly so when we offer subscription
services or products.

Before getting to the heart of the matter, it is very important to
recall certain essential concepts to the proper understanding of the
following reports:

  - **Monthly Recurring Revenue (MRR)**: MRR is arguably the most
    important metric for subscription businesses. It shows the monthly
    revenue earned with subscription-based products or services. It is a
    consistent number used to track all recurring revenue over time, in
    monthly increments.
  - **Annual Run-Rate (ARR)**: ARR is the yearly version of MRR, which
    is based on the current MRR, to estimate the coming year's
    performance. However, this estimation does not take variations and
    growth into account.

![Difference between MRR and ARR in Odoo
Subscriptions](subscription_reports/difference-between-MRR-and-ARR.png)

  - **Non-Recurring Revenue (NRR)**: NRR shows the revenue earned for
    everything else than subscription-based products or services. This
    includes gains of a rare or unique nature that are unlikely to occur
    in the ordinary course of businesses.
  - **Customer Retention**: Practices to engage existing customers to
    continue buying products or services from your business. Customer
    retention can be a challenge, because you must prove you are worthy
    of your customers' trust.
  - **Churn Rate**: Also known as the Rate of Attrition or Customer
    Churn, the churn rate can be defined, in this case, as the
    percentage of subscribers who discontinued their subscriptions
    within a given time period. We can distinguish two types of Churn:
      - **Logo Churn**: It corresponds to the subscription cancellation
        rate.
    
      - **Revenue Churn**: It corresponds to the monthly recurring
        revenue loss rate.
        
        <div class="example">
        
        Let's imagine a 2$ increase in a subscription service.
        
          - We lost 3 customers out of the initial 20, which generates a
            **Logo Churn** of 15%.
        
          - Therefore, the 56$ of MRR difference out of the initial 600$
            causes a **Revenue Churn**  
            of 9,33%.
        
        ![Difference between logo churn and revenue churn in Odoo
        Subscriptions](subscription_reports/difference-between-logo-churn-and-revenue-churn.png)
        
        Reminder: even though they seem to evolve in the same direction
        most of the time, it might not be the case all the time.
        
        </div>
  - **Customer Lifetime Value (CLV)**: Indicates how much revenue can be
    expected for a customer during his/her entire contract. This
    approach emphasizes the importance of customer retention, shifting
    our focus from a quarterly or yearly approach to a long-term one.

Check out the different kinds of reports you can access from the **Odoo
Subscriptions** application.

## Subscriptions analysis report

Go to `Subscriptions --> Reporting --> Subscriptions`. From there, you
can change the *Measures*. By default, Odoo uses the *Monthly Recurring
Revenue*. In addition to that, you can choose *Quantity*, *Recurring
Price*, *Yearly Recurring Revenue* and *Count*. For this example,
*Quantity* is added. This way, you can review both of these measures at
the same time. You can even *Group By Start Date* and, more precisely,
by *Week*, to get a clear view of your report.

![Subscriptions analysis report in Odoo
Subscriptions](subscription_reports/subscriptions-analysis-report.png)

## Retention analysis report

Go to `Subscriptions --> Reporting --> Retention`. The default measure
applied is *Count*, but you can change to the appropriate one for you.
For the example below, *Monthly Recurring Revenue* was chosen, and the
*Month* periodicity remains intact. By using these criteria, you can see
the progression of the retention from its start.

![Retention analysis report in Odoo
Subscriptions](subscription_reports/retention-analysis-report.png)

## Revenue KPIs report

Go to `Subscriptions --> Reporting --> Revenue KPIs`. From there, you
can check different KPIs: *Monthly Recurring Revenue*, *Net Revenue*,
*Non-Recurring Revenue*, *Revenue per Subscription*, *Annual Run-Rate*,
*Lifetime Value*, and more. You can also filter this information on
subscriptions, companies, and sales teams. This is useful if you are
looking for specific information.

![Revenue KPIs report in Odoo
Subscriptions](subscription_reports/revenue-KPIs-report.png)

The example below shows the *Monthly Recurring Revenue* detailed report.
At the moment, there is no data, which is the typical scenario for a new
business. But, as your company grows over the months, these graphs get
populated with more and more data. Once again, you can filter these
specific KPIs on subscriptions, companies, and sales teams.

![Detailed MRR report in Odoo
Subscriptions](subscription_reports/detailed-MRR-report.png)

## Salesperson dashboard report

Go to `Subscriptions --> Reporting --> Salesperson Dashboard`. This page
gives you a summary of your *Monthly Recurring Revenue*, *Non-Recurring
Revenue*, *Subscription modifications*, and *Non-Recurring Invoices* for
each of your salespeople. You can choose the period you want to apply
and the salesperson you want to analyze.

![Salesperson dashboard report in Odoo
Subscriptions](subscription_reports/salesperson-dashboard-report.png)

<div class="seealso">

\- `../../subscriptions/configuration/subscription_templates` -
`../../subscriptions/configuration/subscription_products` -
`../../subscriptions/sales_flow/create_a_quotation`

</div>


---
## File: ./content/applications/sales/subscriptions/configuration/subscription_templates.md

# Use subscription templates

The subscription business model is becoming more popular. Are you
wondering why?

  - For **customers**, value lies in **convenience**:
      - Subscriptions simplify the business process. Indeed, subscribers
        never have to remember to renew their orders every month, which
        gives them the assurance that they will have everything they
        need before they actually need it.
      - Subscriptions help customers stay on budget.
  - For **businesses**, value lies in the **ability to predict recurring
    revenue**:
      - Subscriptions reduce customer churn rate and significantly
        increase customer retention.
      - Subscriptions provide much higher payment security for your
        business. They stabilize and maintain recurring revenue streams
        by guaranteeing monthly revenues and adding value to your
        business.

<div align="center" style="color:#AD5E99; font-size: 2rem ;margin: 20px 0"> <b>Simplicity.
Higher customer retention. Opportunities for marketing. Business consistency. Better cash flow
management.</b> </div>

**Odoo Subscriptions** help you save time and money. Subscription
templates can help you generate recurring invoices and manage renewals
at a fast pace. With Odoo you have the possibility to create, edit, and
manage your own subscription templates.

## Configuration

Go to `Subscriptions --> Configuration --> Subscription templates`. By
default, Odoo suggests you two types of subscription (MON - Monthly
subscription *vs* YEA - Yearly subscription). You can also create your
own ones.

![Default subscription templates on Odoo
Subscriptions](subscription_templates/default-subscription-templates.png)

<div class="important">

<div class="title">

Important

</div>

The **Odoo Subscriptions** application automatically installs **Odoo
Sales** and **Odoo Invoicing** as they work integrated.

</div>

## Create your first template

You can create a new template or edit an existing one. The first thing
you need to do is give your template a name. After that, choose an
*Invoicing period* and specify whether you would like to invoice your
customers per *Days*, *Weeks*, *Months* or *Years*. On *Duration*,
determine if the subscription must go on *Forever* (until it’s manually
closed), or for a *Fixed amount* of time. Among the payment options, an
additional field called *Invoice email* appears when you choose *Send*,
*Send & try to charge* or *Send after successful payment*. This field
allows you to add an invoice email template to your subscription
templates.

![Create your own subscription templates on Odoo
Subscriptions](subscription_templates/creation-of-subscription-templates.png)

For each template, you can also choose if you want your customers to be
able to close their subscriptions or not. If enabled, you can set an
*Automatic closing* limit and specify the *Group of subscription* and
*Journal* options.

<div class="note">

<div class="title">

Note

</div>

On each template, you can add your **Terms and Conditions**. Specifying
terms and conditions is essential to set out important contractual
points between the customers and the sellers (payment, refund policy,
cancellation, complaints, etc.).

![Terms & conditions on Odoo
Subscriptions](subscription_templates/terms-and-conditions-on-subscription-templates.png)

Finally, if you want to know the basic running health status of your
subscriptions, you also have access to a specific tab called **Health
Check**. There, you can edit and create your own filters to define what
is a subscription in good health *vs* bad health. The system
automatically summarizes all the records corresponding to these filters
and you are able to manage them in one click.

![Health check on Odoo
Subscriptions](subscription_templates/health-check-on-subscription-templates.png)

</div>

<div class="important">

<div class="title">

Important

</div>

After creating your own subscription templates, be sure to check out our
documentation on how to create, edit and manage your own `Subscription
products <../../subscriptions/configuration/subscription_products>`, to
complete the sales flow.

</div>

<div class="seealso">

\- `../../subscriptions/configuration/subscription_products`

</div>


---
## File: ./content/applications/sales/subscriptions/configuration/subscription_products.md

# Add subscription products

To properly sell your subscriptions using our amazing **Odoo
Subscriptions** application, you must follow these steps:

1.  **Create your own subscription templates**
2.  **Create your own subscription products with the right settings**

As a result, you will be able to manage your subscriptions like any
other product, create your quotations and continue the sales flow to
track the number of subscriptions you sell and manage the revenue they
generate.

## Configuration

Go to `Subscriptions --> Subscription products` to learn how you can
configure your own subscription products. You have the possibility to
create a new product or edit an existing one. Once named, be careful to
select the option *Can be sold* and deselect *Can be purchased*. For the
product type, it is recommended to use *Service* for subscription
products as they are non-material products that you provide to your
customers. Finally, you can adapt your prices and also add an internal
reference.

![View of a subscription product form in Odoo
Subscriptions](subscription_products/subscription-products-configuration.png)

<div class="note">

<div class="title">

Note

</div>

In the Sales tab, underneath the Subscriptions section, make sure the
*Subscription products* option is activated. In fact, if you create a
subscription product from the **Odoo Subscriptions** application, this
option is selected by default. However, if you create a product from
another application, it is not the case.

![View of a subscription product form in Odoo
Subscriptions](subscription_products/subscription-products-form.png)

You can also choose the subscription templates you want to use.

![View of a subscription product form in Odoo
Subscriptions](subscription_products/subscription-products-using-subscription-templates.png)

</div>

<div class="important">

<div class="title">

Important

</div>

Be sure to check out our documentation on how to create, edit and manage
your own `Subscription templates
<../../subscriptions/configuration/subscription_templates>` before
creating your own subscription products. Once created, check out our
documentation on how to `Create a quotation using subscription products
<../../subscriptions/sales_flow/create_a_quotation>`, to complete the
sales flow.

</div>

<div class="seealso">

\- `../../subscriptions/configuration/subscription_templates` -
`../../subscriptions/sales_flow/create_a_quotation`

</div>


---
## File: ./content/applications/sales/subscriptions/reporting.md

  - nosearch

# Reporting

<div class="toctree" data-titlesonly="">

reporting/subscription\_reports

</div>


---
## File: ./content/applications/sales/subscriptions/sales_flow.md

  - nosearch

# Sales flow

<div class="toctree" data-titlesonly="">

sales\_flow/create\_a\_quotation sales\_flow/renewals
sales\_flow/upselling sales\_flow/closing

</div>


---
## File: ./content/applications/sales/subscriptions/sales_flow/renewals.md

# Renew a subscription

The key feature of a subscription business model is the recurring nature
of payments. In this model, customers pay a recurring amount in exchange
for access to a product or a service.

<div align="center" style="color:#AD5E99; font-size: 2rem ;margin: 20px 0"> <b>The renewal of a
subscription is the process followed by each customer when willing to pursue a
subscription.</b> </div>

Each subscriber experiences this renewal process monthly, annually, or
sometimes more, depending on the duration of the contract. Most
subscription companies choose to automate their renewal processes but,
in some cases, manual subscription renewals are still the preferred
option.

With **Odoo Subscriptions**, you can have all your subscriptions in one
application, suggest an automatic subscription renewal to your customers
(as well as a manual one) and, finally, filter all your subscriptions
and easily find those to renew (with the help of the tag *To renew*).

## Renew your first subscription

Before renewing a subscription, be sure to check out our documentation
on how to `Create a quotation
<../../subscriptions/sales_flow/create_a_quotation>` using subscription
products. Indeed, once confirmed, a quotation becomes a sales order and
a new subscription is automatically created. Therefore, this
subscription has the status *In progress*. From there, you have the
possibility to renew the subscription. In the Other Info tab, underneath
the To Renew section, you can activate the *To renew* option. When
activated, a yellow tag automatically appears in the upper right corner
of the subscription.

![Renew your subscription with Odoo
Subscriptions](renewals/renew-your-subscription.png)

<div class="important">

<div class="title">

Important

</div>

The *To renew* tag is automatically ticked when a payment fails. This
indicator also appears on the customer portal. To visualize that, you
just have to click on the *Customer preview* button. The tag *To renew*
appears on the top right corner.

![Customer preview of a renewal with Odoo
Subscriptions](renewals/customer-preview-of-a-renewal.png)

</div>

When a subscription needs to be renewed, you have the possibility to use
a new button called *Renewal quotation*. By clicking on it, a new
quotation is created. From there, start a basic sales flow allowing you
to send the quotation by email to your customers or to confirm it. It is
better to first *Send by email* the quotation to your customers in order
to have their confirmation and, then, *Confirm* it in **Odoo Sales**.

<div class="note">

<div class="title">

Note

</div>

In the Chatter of this new quotation, it is mentioned that "This renewal
order has been created from the previous subscription". Once confirmed
by your customers, this quotation becomes a sales order and a new sale
is mentioned in the upper right corner of the subscription.

![Renew a quotation with Odoo
Subscriptions](renewals/renew-a-quotation.png)

By clicking on the *Sales* button, you have a summary of your sales
orders in a list view. The only difference between your two quotations
is the description underneath the *Subscription Management* category.
There, you can easily visualize which one is your renewal.

![Renewal as Subscription Management form in Odoo
Subscriptions](renewals/subscription-management-category.png)

</div>

## Visualize your subscriptions to renew

Finally, if you want to visualize all your subscriptions and easily find
those to renew, you can go to your *Subscriptions dashboard* and use the
filter *To renew*.

![List view of all subscriptions and use of the filter to renew in Odoo
Subscriptions](renewals/subscriptions-dashboard-with-the-to-renew-filter.png)

<div class="seealso">

\- `../../subscriptions/configuration/subscription_templates` -
`../../subscriptions/configuration/subscription_products` -
`../../subscriptions/sales_flow/create_a_quotation`

</div>


---
## File: ./content/applications/sales/subscriptions/sales_flow/create_a_quotation.md

# Create a quotation using subscription products

Selling a digital product or service gives instant gratification.
However, you have to work hard for a new customer to make a purchase. It
costs time and money. By convincing customers to sign up for a
subscription, you maximize your income and streamline your cash flow.
You can sell any type of product or service through a subscription
business model.

<div align="center" style="color:#AD5E99; font-size: 2rem ;margin: 20px 0"> <b>The only limit is
your imagination.</b> </div>

Here is a scenario using **Odoo Subscriptions** to create a quotation
including subscription products.

## Create your first quotation

Before creating your first quotation, be sure to check out our
documentation on how to create and manage your own `Subscription
templates <../../subscriptions/configuration/subscription_templates>`
and on how to add `Subscription products
<../../subscriptions/configuration/subscription_products>` to your
templates.

<div class="important">

<div class="title">

Important

</div>

These steps are **mandatory** to make a basic sales flow using **Odoo
Subscriptions**.

</div>

Go to **Odoo Sales** and create a new quotation. Then, choose a customer
and add a product. Be careful to select a product that you previously
configured as a *Subscription product*.

![View of a quotation form in Odoo
Sales](create_a_quotation/create-a-quotation-using-subscription-products.png)

When your quotation is ready, you have the possibility to send it to
your customers or to confirm it. It is better to first *Send by email*
the quotation to your customers to have their confirmation and, then,
*Confirm* it in **Odoo Sales**. By clicking on *Customer preview*, you
have an idea of what your customers will see when receiving your
quotation.

![Customer preview of a quotation form in Odoo
Sales](create_a_quotation/customer-preview-of-a-quotation-using-subscription-products.png)

From there, your customers have three choices: *Sign & Pay* the
quotation, give you a *Feedback* or *Reject* the quotation. It appears
that they are very happy and accept the option *Sign & Pay*. Then, they
have to validate the order with a signature and by choosing a payment
method. When it is done, you can check out the quotation in **Odoo
Sales** and *Confirm* it.

## Manage your subscriptions from your SO

Once confirmed, the quotation becomes a sales order and a new button
appears, *Subscriptions*. Indeed, a subscription is automatically
created.

![Quotation form in Odoo Sales with a button
"Subscriptions"](create_a_quotation/manage-your-subscriptions-from-your-sales-order.png)

By clicking on the *Subscriptions* button, you can see that the status
of the subscription is *In progress*. From there, you will have three
options: `Renew <../../subscriptions/sales_flow/renewals>`, `Close
<../../subscriptions/sales_flow/closing>` or `Upsell
<../../subscriptions/sales_flow/upselling>` your subscription.

![Use of the intelligent button "Subscriptions" in Odoo
Sales](create_a_quotation/use-of-the-subscriptions-button-in-odoo-sales.png)

In the top-right corner, you can see the status of the subscription.
When a subscription is new and created from **Odoo Subscriptions**, the
status is *Draft*. When a sales order has been validated, the status is
*In progress*. Finally, when a customer decides to close his
subscription, the status becomes *Closed*.

<div class="seealso">

\- `../../subscriptions/configuration/subscription_templates` -
`../../subscriptions/configuration/subscription_products` -
`../../subscriptions/sales_flow/renewals` -
`../../subscriptions/sales_flow/closing` -
`../../subscriptions/sales_flow/upselling`

</div>


---
## File: ./content/applications/sales/subscriptions/sales_flow/upselling.md

# Upsell a subscription

Subscriptions are recurrent and go on indefinitely. As time passes by,
our customers may want to modify them. We must then be able to adapt the
prices or change the products’ quantities to accommodate their needs.
Two situations can happen:

1.  **Loyal customers:** This kind of customers already trust you as a
    brand. Therefore, you are confident regarding what you offer since
    they keep paying for your products and services. Consequently, it is
    easier to sell them something additional than it would be to a new
    customer.
2.  **New customers:** For this kind of customers, you have to come with
    something new, something attractive. What about discounts?
    Typically, every subscription ends after a certain given time.
    Making these types of offers for new customers strengthens your
    relationships with them and also increases their retention.

<div align="center" style="color:#AD5E99; font-size: 2rem ;margin: 20px 0"> <b>Upselling can make
a subscription last longer!</b> </div>

## Configuration

As previously explained, to upsell a subscription to new customers, it
is recommended to offer *Discounts*. To activate this option, go to
`Sales --> Configuration --> Settings` and, under the *Pricing*
category, you have the possibility to grant discounts on sales order
lines.

![Activation of the discount option in Odoo
Sales](upselling/configuration-to-upsell-a-subscription.png)

## Upsell your first subscription

Before upselling a subscription, be sure to check out our documentation
on how to `Create a quotation
<../../subscriptions/sales_flow/create_a_quotation>` using subscription
products. Indeed, once confirmed, a quotation becomes a sales order and
a new subscription is automatically created. Therefore, this
subscription has the status *In progress*. From there, you have the
possibility to upsell your subscription.

![Upsell your subscription with Odoo
Subscriptions](upselling/upsell-your-subscription.png)

By using the smart button *Upsell*, you are able to create a new
quotation with new subscription products and send it to your customers
for approval.

![Add products to your subscription via the upsell option in Odoo
Subscriptions](upselling/use-of-the-upsell-button-in-odoo-sales.png)

<div class="important">

<div class="title">

Important

</div>

When the quotation is confirmed by your customers, the products are
added to the initial subscription. Quotation prices are, then, prorated
to the remaining time of the current invoicing period.

</div>

Of course, before sending this new quotation to your customers, you can
change the unit price, taxes, and, even the discount you want to offer.
The smart button *Customer preview* is useful for mimicking the
customer's reaction. In this case, we can confidently say that the
customer will *Sign and pay* this new quotation. When it is done, you
have to go back in edit mode, confirm the quotation, and click on the
smart button *Subscriptions* to visualize all updates. From there, you
can see that an additional line has been added to the subscription with
the new extra service the customer wanted to purchase.

![Visualize all your subscriptions updates with Odoo
Subscriptions](upselling/subscriptions-updates.png)

In addition, by clicking on the *Sales* button, you have a summary of
your sales orders in a list view.

![List view of all sales orders created for a
subscription](upselling/sales-order-updates.png)

The only difference between your two sales orders is the description
underneath the *Subscription Management* category. There, you can easily
visualize which one is your upselling.

<div class="seealso">

\- `../../subscriptions/configuration/subscription_templates` -
`../../subscriptions/configuration/subscription_products` -
`../../subscriptions/sales_flow/create_a_quotation`

</div>


---
## File: ./content/applications/sales/subscriptions/sales_flow/closing.md

# Close a subscription

Losing a customer is always difficult, especially if you put a lot of
effort into getting them to sign up for your products/services. However,
many companies come up with dubious methods to reduce the probability of
this happening.

<div align="center" style="color:#AD5E99; font-size: 2rem ;margin: 20px 0"> <b>What is the right
way to go?</b> </div>

1.  If you adopt such methods, you are among companies that actively and
    indirectly spread the phobia of subscriptions, who do not think
    about how negatively dissatisfied customers could impact their
    business and, who frustrate the customers in a way or another.
    However, at some point, it is understandable that you do not want
    your customers to be involved in your subscription status.
2.  If you do not adopt such methods, you are among companies that
    continue to evolve in a long-term subscription business model,
    especially in an era of ultra-fast communications between
    dissatisfied customers, and who retain their customers by making it
    easier for them to leave if they want to. By giving them the
    opportunity to close their own subscriptions, your customers do not
    feel trapped because they subscribed to your products/services.

In summary, the **Odoo Subscriptions** application gives you the
**possibility to choose what you want to apply**. Indeed, you can decide
whether to give your customers the option to close their subscriptions
whenever they want to or to restrict this possibility. It depends on you
and we will show you how to do that in our amazing application.

## Configuration

Go to `Subscriptions --> Configuration --> Subscription templates`. From
there, you can create a new *Subscription template* or modify an
existing one. When editing your template, underneath the Invoicing tab,
you have the possibility to activate the option *Closable by customer*.
Once enabled, this option gives your customers the right to close their
own subscriptions.

![Configuration to close your subscription with Odoo
Subscriptions](closing/configuration-to-close-your-subscriptions.png)

<div class="note">

<div class="title">

Note

</div>

Be sure to check out our documentation on how to `Use subscription
templates <../../subscriptions/configuration/subscription_templates>` to
fully understand the importance of this feature in a basic flow using
the **Odoo Subscriptions** application.

</div>

## Close your first subscription

### Administrator view

Once confirmed, a quotation becomes a sales order and a new subscription
is automatically created. Therefore, this subscription has the status
*In progress*. From there, you have the possibility to close the
subscription.

![Close your subscription from an administration point of view with Odoo
Subscriptions](closing/close-your-subscriptions-as-an-administrator.png)

By using the smart button *Close*, you have to enter a close reason. For
example, "Subscription too expensive", "Subscription does not meet my
requirements", "Subscription reached its end date", etc. Immediately
after confirming your close reason, you can observe that the status of
the subscription is now *Closed* and that the close reason is mentioned
on the subscription.

![What happens when you close your subscription with Odoo
Subscriptions?](closing/use-of-close-reasons.png)

### Customer view

As previously explained in the *Administrator view* part, from the
subscription form, you also have the possibility to visualize what your
customers see when managing their subscriptions thanks to the *Customer
preview* button. In this example, the customer has the choice to close
his/her subscription whenever he/she wants to, due to the *Close
Subscription* button.

![Close your subscription from a customer point of view with Odoo
Subscriptions](closing/close-your-subscriptions-as-a-customer.png)

By using this button, the customer can specify the reason for cancelling
his/her subscription and he/she can even leave a message.

![What happens when customers close their subscription with Odoo
Subscriptions?](closing/use-of-close-reasons-as-a-customer.png)

By confirming the cancellation, the customer is redirected to his/her
portal. The administrator is informed of this modification. Indeed, the
status of the subscription becomes *Closed* and a note appears in the
chatter with the new stage, the end date, the close reason, and the
closing text added by the customer.

![What happens when customers close their subscription in Odoo
Subscriptions?](closing/chatter-history-when-a-customer-closes-a-subscription.png)

<div class="note">

<div class="title">

Note

</div>

Before closing a subscription, check out our documentation on how to
`Create a quotation using subscription products
<../../subscriptions/sales_flow/create_a_quotation>` to understand how
subscriptions are managed in the **Odoo Subscriptions** application.

</div>

<div class="seealso">

\- `../../subscriptions/configuration/subscription_templates` -
`../../subscriptions/configuration/subscription_products` -
`../../subscriptions/sales_flow/create_a_quotation`

</div>


---
## File: ./content/applications/sales/subscriptions/configuration.md

  - nosearch

# Configuration

<div class="toctree" data-titlesonly="">

configuration/subscription\_templates
configuration/subscription\_products

</div>


---
## File: ./content/applications/sales/subscriptions/follow_up.md

  - nosearch

# Follow-up

<div class="toctree" data-titlesonly="">

follow\_up/automatic\_alerts

</div>


---
## File: ./content/applications/sales/point_of_sale.md

  - show-content

  - show-toc

# Point of Sale

With **Odoo Point of Sale**, run your shops and restaurants easily. The
app works on any device with a web browser, even if you are temporarily
offline. Product moves are automatically registered in your stock, you
get real-time statistics, and your data is consolidated across all
shops.

<div class="seealso">

\- [Odoo Tutorials: Point of Sale
Tutorials](https://www.odoo.com/slides/point-of-sale-28) - `IoT Boxes
Documentations </applications/productivity/iot>`

</div>

## Start a session

From the **POS dashboard**, click `New Session` to start a POS session,
or `Resume` if the session was already open.

<div class="note">

<div class="title">

Note

</div>

`Multiple users <point_of_sale/employee_login>` can be logged into the
same session at the same time. However, the session can only be opened
once on the same browser.

</div>

## Sell products

Click on products to add them to the cart. To change the **quantity**,
click `Qty` and enter the number of products using the keypad. To add a
**discount** or modify the product **price**, click respectively `Disc`
or `Price` and enter the amounts.

Once an order is completed, proceed to checkout by clicking `Payment`.
Select the **payment method**, enter the received amount, and click
`Validate`. Click `New Order` to move on to the next customer.

![POS session interface.](point_of_sale/pos-interface.png)

<div class="tip">

<div class="title">

Tip

</div>

\- You can use both <span class="title-ref">,</span> and
<span class="title-ref">.</span> on your keyboard as decimal separators.
- **Cash** is selected by default if you enter the amount without
choosing a payment method.

</div>

## Set customers

You can create and set customers from an `open POS session
<pos/session-start>`. Registering your customer is necessary to `collect
their loyalty points and grant them rewards
<point_of_sale/pricing/loyalty>`, automatically apply the `attributed
pricelist
<point_of_sale/pricing/pricelists>`, or `generate and print an invoice
<receipts-invoices/invoices>`.

To access the list of customers, click `Customer` on the POS interface.
Then, select a customer or create a new one by clicking `Create`,
completing the form, and saving. Lastly, click `Set Customer` to set the
selected customer.

## Return and refund products

To return a product and make a refund,

1.  from the **POS dashboard**, **open a session** and select the
    returned product;
2.  click `Qty` and `+/-` to enter the quantity of returned products;
3.  once the order is completed, click `Payment` to proceed to the
    refund;
4.  click `Validate` and `New Order` to move on to the next customer.

## Close the POS session

To close your session,

1.  go back to the POS dashboard by clicking `Close` and `Confirm` in
    the upper right corner of your screen;
2.  then, click `Close` and proceed to the **closing control**;
3.  click the `Payments` smart button to know what amount of cash should
    be in your cash drawer;
4.  once the control is done, click `Close session & post entries`;
5.  the status goes automatically from `In Progress` to `Closed &
    Posted`.

![How to close a POS session.](point_of_sale/close-pos-session.png)

<div class="tip">

<div class="title">

Tip

</div>

\- It is strongly advised to close your POS session at the end of each
day. - To look at all your previous sessions, go to `Point of Sale -->
Orders -->
Sessions`.

</div>

<div class="toctree" data-titlesonly="">

point\_of\_sale/employee\_login point\_of\_sale/receipts\_invoices
point\_of\_sale/configuration point\_of\_sale/shop
point\_of\_sale/restaurant point\_of\_sale/pricing
point\_of\_sale/payment\_methods point\_of\_sale/reporting

</div>


---
## File: ./content/applications/sales/point_of_sale/pricing.md

  - nosearch

# Pricing features

<div class="toctree" data-titlesonly="">

pricing/discounts pricing/discount\_tags pricing/loyalty
pricing/pricelists pricing/fiscal\_position pricing/cash\_rounding

</div>


---
## File: ./content/applications/sales/point_of_sale/restaurant/tips.md

# Tips

As it is customary to tip in many countries all over the world, it is
important to have the option in your PoS interface.

## Configure Tipping

To activate the *Tips* feature, go to `Point of Sale
--> Configuration --> Point of sale` and select your PoS.

Under the Bills & Receipts category, you will find *Tips*. Select it and
create a *Tip Product* such as *Tips* in this case.

![image](tips/tips01.png)

## Add Tips to the bill

Once on the payment interface, you now have a new *Tip* button

![image](tips/tips02.png)

Add the tip your customer wants to leave and process to the payment.

![image](tips/tips03.png)


---
## File: ./content/applications/sales/point_of_sale/restaurant/kitchen_printing.md

# Orders printing

To ease the workflow between the front of house and the back of the
house, printing the orders taken on the PoS interface right in the
kitchen or bar can be a tremendous help.

## Activate the bar/kitchen printer

To activate the *Order printing* feature, go to `Point
of Sales --> Configuration --> Point of sale` and select your PoS
interface.

Under the IoT Box / Hardware Proxy category, you will find *Order
Printers*. Note that you need an IoT Box to connect your Printer to the
PoS.

## Add a printer

In your configuration menu you will now have a *Order Printers* option
where you can add the printer.

![image](kitchen_printing/kitchen_printing01.png)

## Print a kitchen/bar order

![image](kitchen_printing/kitchen_printing02.png)

Select or create a printer.

## Print the order in the kitchen/bar

On your PoS interface, you now have a *Order* button.

![image](kitchen_printing/kitchen_printing03.png)

When you press it, it will print the order on your kitchen/bar printer.


---
## File: ./content/applications/sales/point_of_sale/restaurant/floors_tables.md

# Floors and tables management

## Add a floor

Once your *Point of Sale* has been configured, select *Table Management*
under `Point of Sale --> Configuration -->
Point of Sale`. Then, click on *Floors* to create and name your floor
and tables.

![View of the table management feature. Way to manage and create floors
for a pos](floors_tables/restaurant_03.png)

![Backend view of a restaurant floor. Table name and number of sits for
each table](floors_tables/restaurant_04.png)

<div class="note">

<div class="title">

Note

</div>

Don’t forget to link your floor to your point of sale.

</div>

## Add tables

To add tables, you can also open your PoS interface to see your
floor(s).

![View of the floors menu to manage several floors at the same
time](floors_tables/restaurant_05.png)

Then, click on *Edit Mode* (pencil icon on the upper right corner) to be
allowed to create, move, modify tables, etc.

![View of the floor management. Add tables, the number of sits, their
name and their shape](floors_tables/restaurant_06.png)

<div class="note">

<div class="title">

Note

</div>

To make your table easier to be found, you can rename them, change their
shape, size or even color. It is also possible to add the maximum number
of sits the table can have.

</div>

## Register your table(s) orders

To register an order, click on the respective table. By doing so, you
are taken to your main interface.

![View of the pos interface to register
orders](floors_tables/restaurant_07.png)

## Transfer customer(s)

If your customers want to move to another table after they already
ordered, use the transfer button. This way, the order is also moved to
the new table.

To do so, select the table your customer is currently on.

![View of the restaurant tables, one having a pending
order](floors_tables/restaurant_08.png)

Now, click on the transfer button and select the table to which you are
transferring your customer.

![View of the pos interface and transfer button. How to transfer
customers from one table&#10;to
another](floors_tables/restaurant_09.png)

## Register an additional order

When registering an order, use the + button to simultaneously proceed to
another one.

Then, you can shift between your orders and process the payment when
needed.

![View of the - button, allowing employees to close/remove an
order](floors_tables/restaurant_10.png)

<div class="tip">

<div class="title">

Tip

</div>

The - button allows you to remove the order you are currently on.

</div>


---
## File: ./content/applications/sales/point_of_sale/restaurant/bill_printing.md

# Bills

Typical practices in restaurants or bars are to request the bill before
proceeding to payment or splitting it based on the items ordered. Odoo
POS provides two features to perform these tasks seamlessly: **Bill
Printing** and **Bill Splitting**.

## Configuration

To activate the bill printing and splitting features, go to `Point of
Sale -->
Configuration --> Point of sale` and select your POS. Then, scroll down
to the `Bills &
Receipts` section and enable `Bill Printing` and `Bill Splitting`.

![activate the bill printing and bill splitting features in the POS
settings](bill_printing/settings.png)

## Bill printing

From an open session, click `Bill --> Print` at any moment to generate
and print a bill.

<div class="note">

<div class="title">

Note

</div>

The printed bill is **not** final and will be updated to reflect any
changes to the order.

</div>

## Bill splitting

From an open session, click `Split` to select the items to regroup. Once
everything is selected, click `Payment` and proceed to checkout for
these items. Repeat for each guest.

<div class="note">

<div class="title">

Note

</div>

\- Once you return to the table, the selected items are no longer on
order, as they have been paid for. - The feature is available as soon as
at least two items are ordered.

</div>

<div class="seealso">

\- `floors_tables`

</div>


---
## File: ./content/applications/sales/point_of_sale/configuration/epos_ssc.md

# Self-signed certificate for ePOS printers

ePOS printers are designed to work seamlessly with Point of Sale
systems. Once connected, the two devices automatically share
information, enabling the direct printing of tickets from the POS system
to the ePOS printer.

<div class="note">

<div class="title">

Note

</div>

These [Epson ePOS
printers](https://c4b.epson-biz.com/modules/community/index.php?content_id=91)
are compatible with Odoo:

  - TM-H6000IV-DT (Receipt printer only)
  - TM-T70II-DT
  - TM-T88V-DT
  - TM-L90-i
  - TM-T20II-i
  - TM-T70-i
  - TM-T82II-i
  - TM-T83II-i
  - TM-T88V-i
  - TM-U220-i
  - TM-m10
  - TM-m30
  - TM-P20 (Wi-Fi® model)
  - TM-P60II (Receipt: Wi-Fi® model)
  - TM-P60II (Peeler: Wi-Fi® model)
  - TM-P80 (Wi-Fi® model)

</div>

To work with Odoo, some models that can be used without an `IoT box
<../../../productivity/iot/config/connect>` may require `the HTTPS
protocol
<https>` to establish a secure connection between the browser and the
printer. However, trying to reach the printer's IP address using HTTPS
leads to a warning page on most web browsers. In that case, you can
temporarily `force the connection <epos_ssc/instructions>`, which allows
you to reach the page in HTTPS and use the ePOS printer in Odoo as long
as the browser window stays open.

<div class="warning">

<div class="title">

Warning

</div>

The connection is lost after closing the browser window. Therefore, this
method should only be used as a **workaround** or as a pre-requisite for
the `following instructions
<epos_ssc/instructions>`.

</div>

## Generate, export, and import self-signed certificates

For a long-term solution, you must generate a **self-signed
certificate**. Then, export and import it into your browser.

<div class="important">

<div class="title">

Important

</div>

**Generating** an SSL certificate should only be done **once**. If you
create another certificate, devices using the previous one will lose
HTTPS access.

</div>

<div class="tabs">

<div class="tab">

Windows 10 & Linux OS

<div class="tabs">

<div class="tab">

Generate a self-signed certificate

Navigate to the ePOS' IP address (e.g.,
<span class="title-ref">https://192.168.1.25</span>) and force the
connection by clicking `Advanced` and `Proceed to [IP address]
(unsafe)`.

![Warning page on Google Chrome, Windows
10](epos_ssc/browser-https-insecure.png)

Then, sign in using your printer credentials to access the ePOS printer
settings. To sign in, enter <span class="title-ref">epson</span> in the
`ID` field and your printer serial number in the `Password` field.

Click `Certificate List` in the `Authentication` section, and click
`create` to generate a new **Self-Signed Certificate**. The `Common
Name` should be automatically filled out. If not, fill it in with the
printer IP address number. Select the years the certificate will be
valid in the `Validity
Period` field, click `Create`, and `Reset` or manually restart the
printer.

The self-signed certificate is generated. Reload the page and click
`SSL/TLS` in the `Security` section to ensure **Selfsigned Certificate**
is correctly selected in the `Server Certificate` section.

</div>

<div class="tab">

Export a self-signed certificate

The export process is heavily dependent on the `OS (Operating System)`
and the browser. Start by accessing your ePOS printer settings on your
web browser by navigating to its IP address (e.g.,
<span class="title-ref">https://192.168.1.25</span>). Then, force the
connection as explained in the **Generate a self-signed certificate
tab**.

If you are using **Google Chrome**,

1.  click `Not secure` next to the search bar, and `Certificate is
    not valid`;
    
    ![Connection to the printer not secure button in Google Chrome
    browser.](epos_ssc/browser-warning.png)

2.  go to the `Details` tab and click `Export`;

3.  add <span class="title-ref">.crt</span> at the end of the file name
    to ensure it has the correct extension;

4.  select `Base64-encoded ASCII, single certificate`, at the bottom of
    the pop-up window;

5.  save, and the certificate is exported.

<div class="warning">

<div class="title">

Warning

</div>

Make sure that the certificate ends with the extension
<span class="title-ref">.crt</span>. Otherwise, some browsers might not
see the file during the import process.

</div>

If you are using **Mozilla Firefox**,

1.  click the **lock-shaped** icon on the left of the address bar;
2.  go to `Connection not secure --> More information --> Security tab
    --> View certificate`;

![Connection is not secure button in Mozilla Firefox
browser](epos_ssc/mozilla-not-secure.png)

1.  scroll down to the `Miscellaneous` section;
2.  click `PEM (cert)` in the `Download` section;
3.  save, and the certificate is exported.

</div>

<div class="tab">

Import a self-signed certificate

The import process is heavily dependent on the `OS (Operating System)`
and the browser.

<div class="tabs">

<div class="tab">

Windows 10

Windows 10 manages certificates, which means that self-signed
certificates must be imported from the certification file rather than
the browser. To do so,

1.  open the Windows File Explorer and locate the downloaded
    certification file;

2.  right-click on the certification file and click `Install
    Certificate`;

3.  select where to install the certificate and for whom - either for
    the `Current User` or all users (`Local Machine`). Then, click
    `Next`;

4.  on the <span class="title-ref">Certificate Store</span> screen, tick
    `Place all certificates in
    the following store`, click `Browse...`, and select `Trusted Root
    Certification Authorities`;
    
    ![image](epos_ssc/win-cert-wizard-store.png)

5.  click `Finish`, accept the pop-up security window;

6.  restart the computer to make sure that the changes are applied.

</div>

<div class="tab">

Linux

If you are using **Google Chrome**,

1.  open Chrome;
2.  go to `Settings --> Privacy and security --> Security -->
    Manage certificates`;
3.  go to the `Authorities` tab, click `Import`, and select the exported
    certification file;
4.  accept all warnings;
5.  click `ok`;
6.  restart your browser.

If you are using **Mozilla Firefox**,

1.  open Firefox;
2.  go to `Settings --> Privacy & Security --> Security --> View
    Certificates... --> Import`;
3.  select the exported certification file;
4.  tick the checkboxes and validate;
5.  restart your browser.

</div>

</div>

</div>

</div>

</div>

<div class="tab">

Mac OS

On Mac OS, you can secure the connection for all browsers by following
these steps:

1.  open Safari and navigate to your printer's IP address. Doing so
    leads to a warning page;
2.  on the warning page, go to `Show Details --> visit this website -->
    Visit
    Website`, validate;
3.  reboot the printer so you can use it with any other browser.

To generate and export an SSL certificate and send it to IOS devices,
open **Google Chrome** or **Mozilla Firefox**. Then,

<div class="tabs">

<div class="tab">

Generate a self-signed certificate

Navigate to the ePOS' IP address (e.g.,
<span class="title-ref">https://192.168.1.25</span>) and force the
connection by clicking `Advanced` and `Proceed to [IP address]
(unsafe)`.

![Warning page on Google Chrome, Windows
10](epos_ssc/browser-https-insecure.png)

Then, sign in using your printer credentials to access the ePOS printer
settings. To sign in, enter <span class="title-ref">epson</span> in the
`ID` field and your printer serial number in the `Password` field.

Click `Certificate List` in the `Authentication` section, and click
`create` to generate a new **Self-Signed Certificate**. The `Common
Name` should be automatically filled out. If not, fill it in with the
printer IP address number. Select the years the certificate will be
valid in the `Validity
Period` field, click `Create`, and `Reset` or manually restart the
printer.

The self-signed certificate is generated. Reload the page and click
`SSL/TLS` in the `Security` section to ensure **Selfsigned Certificate**
is correctly selected in the `Server Certificate` section.

</div>

<div class="tab">

Export a self-signed certificate

The export process is heavily dependent on the `OS (Operating System)`
and the browser. Start by accessing your ePOS printer settings on your
web browser by navigating to its IP address (e.g.,
<span class="title-ref">https://192.168.1.25</span>). Then, force the
connection as explained in the **Generate a self-signed certificate
tab**.

If you are using **Google Chrome**,

1.  click `Not secure` next to the search bar, and `Certificate is
    not valid`;
    
    ![Connection to the printer not secure button in Google
    Chrome](epos_ssc/browser-warning.png)

2.  go to the `Details` tab and click `Export`;

3.  add <span class="title-ref">.crt</span> at the end of the file name
    to ensure it has the correct extension;

4.  select `Base64-encoded ASCII, single certificate`, at the bottom of
    the pop-up window;

5.  save, and the certificate is exported.

<div class="warning">

<div class="title">

Warning

</div>

Make sure that the certificate ends with the extension
<span class="title-ref">.crt</span>. Otherwise, some browsers might not
find the file during the import process.

</div>

If you are using **Mozilla Firefox**,

1.  click the **lock-shaped** icon on the left of the address bar;

2.  go to `Connection not secure --> More information --> Security tab
    --> View certificate`;
    
    ![Connection is not secure button in Mozilla
    Firefox](epos_ssc/mozilla-not-secure.png)

3.  scroll down to the `Miscellaneous` section;

4.  click `PEM (cert)` in the `Download` section;

5.  save, and the certificate is exported.

</div>

</div>

</div>

<div class="tab">

Android OS

To import an SSL certificate into an Android device, first create and
export it from a computer. Next, transfer the
<span class="title-ref">.crt</span> file to the device using email,
Bluetooth, or USB. Once the file is on the device,

1.  open the settings and search for
    <span class="title-ref">certificate</span>;
2.  click `Certificate AC` (Install from device storage);
3.  select the certificate file to install it on the device.

<div class="note">

<div class="title">

Note

</div>

The specific steps for installing a certificate may vary depending on
the version of Android and the device manufacturer.

</div>

</div>

<div class="tab">

iOS

To import an SSL certificate into an iOS device, first create and export
it from a computer. Then, transfer the
<span class="title-ref">.crt</span> file to the device using email,
Bluetooth, or any file-sharing service.

Downloading this file triggers a warning pop-up window. Click `Allow` to
download the configuration profile, and close the second pop-up window.
Then,

1.  go to the **Settings App** on the iOS device;
2.  click `Profile Downloaded` under the user's details box;
3.  locate the downloaded <span class="title-ref">.crt</span> file and
    select it;
4.  click `Install` on the top right of the screen;
5.  if a passcode is set on the device, enter the passcode;
6.  click `Install` on the top right of the certificate warning screen
    and the pop-up window;
7.  click `Done`.

![image](epos_ssc/ssl-ios-verified.png)

The certificate is installed, but it still needs to be authenticated. To
do so,

1.  go to `Settings --> General --> About > Certificate Trust Settings`;
2.  enable the installed certificate using the **slide button**;
3.  click `Continue` on the pop-up window.

</div>

</div>

<div class="important">

<div class="title">

Important

</div>

\- If you need to export SSL certificates from an operating system or
web browser that has not been mentioned, search for
<span class="title-ref">export SSL certificate</span> +
<span class="title-ref">the name of your browser or operating
system</span> in your preferred search engine. - Similarly, to import
SSL certificates from an unmentioned OS or browser, search for
<span class="title-ref">import SSL certificate root authority</span> +
<span class="title-ref">the name of your browser or operating
system</span> in your preferred search engine.

</div>

## Check if the certificate was imported correctly

To confirm your printer's connection is secure, connect to its IP
address using HTTPS. For example, navigate to
<span class="title-ref">https://192.168.1.25</span> in your browser. If
the SSL certificate has been applied correctly, you should no longer see
a warning page, and the address bar should display a padlock icon,
indicating that the connection is secure.


---
## File: ./content/applications/sales/point_of_sale/configuration/https.md

# Secure connection (HTTPS)

If **Direct Devices** is enabled in a Point of Sale settings (for
example, if you use an ePos printer), HTTP becomes the default protocol.

## Force your Point of Sale to use a secure connection (HTTPS)

Add a new **key** in the **System Parameters** to force your Point of
Sale to use a secure connection with the HTTPS protocol.

To do so, activate the `developer mode <developer-mode>`, go to
`Settings -->
Technical --> Parameters --> System Parameters`, then create a new
parameter, add the following values and click on *Save*.

  - **Key**:
    <span class="title-ref">point\_of\_sale.enforce\_https</span>
  - **Value**: <span class="title-ref">True</span>

<div class="seealso">

\- `epos_ssc`

</div>


---
## File: ./content/applications/sales/point_of_sale/restaurant.md

  - show-content

# Restaurant features

Managing a restaurant or a bar comes with specific needs. The Point of
Sale application provides various features that allow performing all the
required tasks in such businesses.

Once the POS is set to be used in a restaurant or a bar, you can:

  - `organize your floors and tables to reflect your interior
    <restaurant/floors_tables>`;
  - `take orders <floors_tables/orders>`;
  - `communicate with the kitchen or the bar through the POS
    <restaurant/kitchen_printing>`;
  - `print bills in advance and split them <restaurant/bill_printing>`;
  - `collect tips <restaurant/tips>`; and
  - `set different taxes for takeaway food <pricing/fiscal_position>`.

## Configuration

To activate the features, go to `Point of Sale --> Configuration -->
Point of Sale`, select your POS, and click `Edit --> Is a Bar/Restaurant
--> Save`.

<div class="note">

<div class="title">

Note

</div>

These specific features can be identified by the cutlery-shaped icon
located to the right of the feature name.

</div>

<div class="toctree" data-titlesonly="">

restaurant/bill\_printing restaurant/floors\_tables
restaurant/kitchen\_printing restaurant/tips

</div>


---
## File: ./content/applications/sales/point_of_sale/employee_login.md

# Log in with employee

With Odoo *Point of Sale*, you can manage multiple cashiers. This
feature allows you to keep track of who is working, when and how much
each cashier made for that session.

There are three ways to switch cashiers in Odoo: by *selecting the
cashier*, by *entering a PIN code* or by *scanning a barcode*.

<div class="note">

<div class="title">

Note

</div>

To manage multiple cashiers, you need several employees (at least two).

</div>

## Set up log in with employees

To enable the feature, go to your *PoS settings* and check log in with
employees on your *PoS form*. Then, add the employees that have access
to the cash register.

![image](employee_login/multicashiers01.png)

Now, you can switch cashier easily.

## Switch without pin codes

The easiest way to switch cashiers is without a code. To do so, click on
the cashier name in your PoS interface.

![image](employee_login/multicashiers02.png)

Now, you just have to click on your name.

![image](employee_login/multicashiers03.png)

## Switch cashier with pin codes

You can set a pin code on each cashier. To set up a pin code, go to the
employee form and add a security PIN, in the *HR settings tab*.

![image](employee_login/multicashiers04.png)

Now, when switching cashier, a PIN password will be asked.

![image](employee_login/multicashiers05.png)

## Switch cashier with barcodes

You can ask your employees to log themselves with their badges. To do
so, set up a barcode at the same place you add the PIN code. Print the
badge and when they will scan it, the cashier will be switched to that
employee.

![image](employee_login/multicashiers06.png)

## Find who was the cashier

Once you have closed your *PoS session*, you can have an overview of the
amount each cashier sold for. To do so, go to the orders menu.

![image](employee_login/multicashiers07.png)

Now, you can open the order and have a summary of the sold products.


---
## File: ./content/applications/sales/point_of_sale/shop.md

  - nosearch

# Shop features

<div class="toctree" data-titlesonly="">

shop/cash\_control shop/barcode

</div>


---
## File: ./content/applications/sales/point_of_sale/reporting.md

# Reporting

## View statistics

To access your statistics, go to `Point of Sale --> Reporting -->
Orders`. Or, from the **POS dashboard**, click the vertical ellipsis
(`⋮`) button, `Reporting`, and `Orders`.

These statistics are available in graph or pivot view that you can
filter or group depending on your needs.


---
## File: ./content/applications/sales/point_of_sale/shop/barcode.md

# Barcodes

Using a barcode scanner to process point-of-sale orders improves your
efficiency in providing quicker customer service. Barcode scanners can
be used both to scan products or to log employees into a POS session.

## Configuration

To use a barcode scanner, you must enable the feature in the Inventory
app. Go to `Inventory --> Configuration --> Settings`, in the `Barcode`
section, tick `Barcode Scanner` and save.

![barcode setting in the Inventory
application](barcode/barcode-inventory.png)

<div class="seealso">

\- `Set up a barcode
scanner<../../../inventory_and_mrp/inventory/barcode/setup/hardware>` -
`Activate barcode
scanners<../../../inventory_and_mrp/inventory/barcode/setup/software>`

</div>

Once enabled in **Inventory**, you can use the barcode feature in
**Point of Sale** with products that have a barcode number assigned.

## Assign barcodes

### To your products

To use this feature in POS, your products must have barcodes assigned.
To do so, go to `Point of Sale --> Products --> Products` and open a
**product form**. Add a barcode number in the `Barcode` field in the
`General Information` tab.

### To your employees

To add an identification number to an employee, go to the **Employees**
app and open an **employee form**. Choose an identification number for
your employee and fill in the `PIN Code` field in the `HR Settings` tab.

## Use barcodes

### Scan products

Scan a product's barcode using a barcode scanner. Doing so adds it
directly to the cart. To change the quantity, scan a product as many
times as needed, or click `Qty` and enter the number of products using
the keypad.

You can also enter the barcode number manually in the search bar to look
for the product. Then, click it to add it to the cart.

### Log employees

You can also use a barcode scanner to log your employees. To do so,
`restrict access
<restrict-employee-pos>` to the POS and `use barcodes to log your
employees in
<employee-barcode>` your POS.


---
## File: ./content/applications/sales/point_of_sale/shop/cash_control.md

# Cash control

Cash control allows you to check the amount of the cashbox at the
opening and closing. You can thus make sure no error has been made and
that no cash is missing.

## Activate Cash Control

To activate the *Cash Control* feature, go to `Point
of Sales --> Configuration --> Point of sale` and select your PoS
interface.

Under the payments category, you will find the cash control setting.

![image](cash_control/cash_control01.png)

In this example, you can see I want to have 275$ in various denomination
at the opening and closing.

When clicking on **Opening/Closing Values** you will be able to create
those values.

![image](cash_control/cash_control02.png)

## Start a session

You now have a new button added when you open a session, *Set opening
Balance*

![image](cash_control/cash_control03.png)

![image](cash_control/cash_control04.png)

By default it will use the values you added before, but you can always
modify it.

## Close a session

When you want to close your session, you now have a *Set Closing
Balance* button as well.

You can then see the theoretical balance, the real closing balance (what
you have just counted) and the difference between the two.

![image](cash_control/cash_control05.png)

If you use the *Take Money Out* option to take out your transactions for
this session, you now have a zero-sum difference and the same closing
balance as your opening balance. You cashbox is ready for the next
session.

![image](cash_control/cash_control06.png)


---
## File: ./content/applications/sales/point_of_sale/configuration.md

  - show-content

  - show-toc

# Configuration

## Access POS settings

To access the general POS settings, go to `Point of Sale -->
Configuration -->
Settings`.

To access the settings of a specific point of sale, go to `Point of Sale
-->
Configuration --> Point of Sale`. Alternatively, from the Point of Sale
dashboard, click the vertical ellipsis (`⋮`) button on a POS card, then
on `Settings`.

## Make products available

To make products available for sale, go to `Point of Sale --> Products
--> Products`, and open a product. In the `Point of Sale` tab, enable
`Available in POS`.

![Making a product available in your
POS.](configuration/pos-available.png)

<div class="toctree" data-titlesonly="">

configuration/https configuration/epos\_ssc

</div>


---
## File: ./content/applications/sales/point_of_sale/receipts_invoices.md

# Receipts and invoices

## Reprint receipts

Use the *Reprint receipt* feature if you have the need to reprint a
ticket.

### Configuration

To activate *Reprint Receipt*, go to `Point of Sale
--> Configuration --> Point of sale`. and select your PoS interface.

Under the Bills & Receipts category, you will find *Reprint Receipt*
option.

<div class="note">

<div class="title">

Note

</div>

In order to allow the option reprint receipt, you need to activate the
receipt printer.

</div>

![image](receipts_invoices/reprint01.png)

### Reprint a receipt

On your PoS interface, you now have a *Reprint receipt* button.

![image](receipts_invoices/reprint02.png)

When you use it, you can then reprint your last receipt.

![image](receipts_invoices/reprint03.png)

## Invoice from the PoS interface

Some of your customers might request an invoice when buying from your
Point of Sale, you can easily manage it directly from the PoS interface.

### Activate invoicing

Go to `Point of Sale --> Configuration --> Point of Sale` and select
your Point of Sale:

![image](receipts_invoices/invoice01.png)

Under the *Bills & Receipts* you will see the invoicing option, tick it.
Don't forget to choose in which journal the invoices should be created.

![image](receipts_invoices/invoice02.png)

### Select a customer

From your session interface, use the customer button

![image](receipts_invoices/invoice03.png)

You can then either select an existing customer and set it as your
customer or create a new one by using this button.

![image](receipts_invoices/invoice04.png)

You will be invited to fill out the customer form with its information.

### Invoice your customer

From the payment screen, you now have an invoice option, use the button
to select it and validate.

![image](receipts_invoices/invoice05.png)

You can then print the invoice and move on to your next order.

### Retrieve invoices

Once out of the PoS interface (`Close --> Confirm` on the top right
corner) you will find all your orders in `Point of Sale -->
Orders --> Orders` and under the status tab you will see which ones have
been invoiced. When clicking on a order you can then access the invoice.

![image](receipts_invoices/invoice06.png)


---
## File: ./content/applications/sales/point_of_sale/payment_methods/terminals/six.md

# SIX

Connecting a SIX payment terminal allows you to offer a fluid payment
flow to your customers and ease the work of your cashiers.

<div class="warning">

<div class="title">

Warning

</div>

\- Starting in July 2022, it will **not** be possible anymore to connect
and use a Six payment terminal in PoS. - Even though Worldline has
recently acquired SIX Payment Services and both companies use Yomani
payment terminals, the firmware they run is different. Terminals
received from Worldline are therefore not compatible with this
integration.

</div>

## Configuration

### Configure the Payment Method

First, make sure that the `POS Six` module is installed. For this, go to
`Apps`, remove the `Apps` filter, and search for *POS Six*.

![The POS Six module.](six/pos-six-module.png)

Back in `Point of Sale --> Configuration --> Payment Methods`, create a
new payment method for SIX, select the payment terminal option `SIX`,
and enter the payment terminal IP address.

![Create a new payment method for the SIX payment
terminal.](six/new-payment-method.png)

## Pay with a Payment Terminal

In the `PoS (Point of Sale)` interface, at the moment of the payment,
select a payment method using a payment terminal. Verify that the amount
in the tendered column is the one that has to be sent to the payment
terminal and click on `Send`. To cancel the payment request, click on
`Cancel`.

![The PoS interface.](six/pos-send-payment.png)

When the payment is done, the status will change to `Payment
Successful`. If needed, reverse the last transaction by clicking on
`Reverse`.

![The Reverse button on the PoS interface.](six/pos-reverse-payment.png)

If there is any issue with the payment terminal, you can still force the
payment using the `Force Done` button. This will allow you to validate
the order in Odoo even if there are connection issues between the
payment terminal and Odoo.


---
## File: ./content/applications/sales/point_of_sale/payment_methods/terminals/vantiv.md

# Vantiv

Connecting a Vantiv payment terminal allows you to offer a fluid payment
flow to your customers and ease the work of your cashiers.

<div class="note">

<div class="title">

Note

</div>

Please note MercuryPay only operates with US and Canadian banks, making
this procedure only suitable for North American businesses.

</div>

<div class="warning">

<div class="title">

Warning

</div>

Vantiv card readers should be purchased exclusively from Vantiv, as
certain Vantiv terminals bought on Amazon do not include the correct
encryption needed to be used with an Odoo database.

</div>

## Configuration

### Configure the Payment Method

First, go in the general settings of the POS app, and activate the
Vantiv setting.

![image](vantiv/vantiv_01.png)

Back in `Point of Sale --> Configuration --> Point of Sale`, go in the
payments section and access your payment methods. Create a new payment
method for Vantiv, select the payment terminal option Vantiv, and create
new Vantiv credentials.

![image](vantiv/vantiv_02.png)

To create new Vantiv credentials, fill in your merchant ID and password,
then save. Make sure the credentials you just created are selected, then
save the payment method.

![image](vantiv/vantiv_03.png)

## Pay with a Payment Terminal

In your PoS interface, at the moment of the payment, select your Vantiv
payment method and… that’s all.

![image](vantiv/vantiv_04.png)


---
## File: ./content/applications/sales/point_of_sale/payment_methods/terminals/adyen.md

# Adyen

Connecting an **Adyen payment terminal** allows you to offer a fluid
payment flow to your customers and ease the work of your cashiers.

<div class="note">

<div class="title">

Note

</div>

Adyen works only with businesses processing **more** than **10 million
annually** or invoicing a **minimum** of **1,000** transactions **per
month**.

</div>

## Configuration

Start by creating your Adyen account on [Adyen's
website](https://www.adyen.com/). Then, board your terminal following
the steps described on your terminal's screen.

<div class="seealso">

\- [Adyen Docs - Payment terminal quickstart
guides](https://docs.adyen.com/point-of-sale/user-manuals).

</div>

### Configure the payment method

First, go to `Point of Sale --> Configuration --> Settings --> Payment
Terminals`, and enable `Adyen`. Then, go to `Configuration --> Payment
Methods` and create a new payment method. Select `Adyen` in the `Use a
Payment Terminal` field.

<div class="note">

<div class="title">

Note

</div>

The selected journal **must** be a bank journal for the `Use a payment
terminal` field to appear.

</div>

Finally, fill the mandatory fields with an `Adyen API key`, and an
`Adyen
Terminal Identifier`.

#### Generate an Adyen API key

The **Adyen API key** is a key used to authenticate your requests. To
generate an API key, go to your **Adyen account**.

Then, go to `Developers --> API credentials`. Create a new credential or
click on an existing one.

Click on `Generate an API key` and copy-paste that key onto the Odoo
mandatory field.

<div class="seealso">

\- [Adyen Docs - API
credentials](https://docs.adyen.com/development-resources/api-credentials#generate-api-key).

</div>

#### Locate the Adyen terminal identifier

The **Adyen Terminal Identifier** is your terminal's serial number,
which is used to identify the hardware.

To find this number, go to your **Adyen account**. Then, go to `Point of
Sale
--> Terminals`, select the terminal to link, and copy-paste its serial
number onto the Odoo mandatory field.

#### Set the Event URLs

For Odoo to know when a payment is made, you must set the terminal
**Event URLs**. To do so,

1.  log in to [Adyen's website](https://www.adyen.com/);
2.  go to `Adyen's dashboard --> Point of Sale --> Terminals` and select
    the connected terminal;
3.  from the terminal settings, click `Integrations`;
4.  set the `Switch to decrypted mode to edit this setting` field as
    `Decrypted`;
5.  click the **pencil icon** button and enter your server address,
    followed by <span class="title-ref">/pos\_adyen/notification</span>
    in the `Event URLs` field; and
6.  click `Save` at the bottom of the screen to save the changes.

## Add a new payment method

To add a new **payment method** to a point of sale, go to `Point of Sale
-->
Configuration --> Point of Sale`. Then, select the POS and go to
`Payments -->
Payment Methods`, and add your new method for Adyen.

## Pay with a payment terminal

When processing a payment, select `Adyen` as the payment method. Check
the amount and click on `Send`. Once the payment is successful, the
status changes to `Payment
Successful`.

<div class="note">

<div class="title">

Note

</div>

\- | In case of connection issues between Odoo and the payment terminal,
force the payment by clicking on `Force Done`, which allows you to
validate the order. | This option is only available after receiving an
error message informing you that the connection failed. - To cancel the
payment request, click on `cancel`.

</div>


---
## File: ./content/applications/sales/point_of_sale/payment_methods/terminals/ingenico.md

# Ingenico

Connecting a payment terminal allows you to offer a fluid payment flow
to your customers and ease the work of your cashiers.

Please note that Ingenico is currently only available for customers in
the Benelux.

## Configuration

### Connect an IoT Box

Connecting an Ingenico Payment Terminal to Odoo is a feature that
requires an IoT Box. For more information on how to connect an IoT Box
to your database, please refer to the `IoT documentation
</applications/productivity/iot/config/connect>`.

### Configure the Lane/5000 for Ingenico BENELUX

Click on the F button of the terminal, then go in the `PoS Menu -->
Settings` and enter the settings password.

Now, click on connection change and TCP/IP. Type the IP of your *IoT
Box* (you can find it on the form view of your IoT Box). Then, enter
9000 as port. The terminal will restart. Once it is done, go on your
*IoT Box* form in Odoo and verify that the terminal has been found.

![image](ingenico/payment_terminal_02.png)

### Configure the payment method

First, go in the general settings of the POS app, and activate the
Ingenico setting.

![image](ingenico/payment_terminal_03.png)

Go back in `Point of Sale --> Configuration --> Point of Sale`, go in
the payments section and access your payment methods. Create a new
payment method for Ingenico, select the payment terminal option
Ingenico, and select your payment terminal device.

![image](ingenico/payment_terminal_04.png)

## Pay with a payment terminal

In your *PoS interface*, when processing a payment, select a *Payment
Method* using a payment terminal. Check that the amount in the tendered
column is the one that has to be sent to the payment terminal and click
on *Send*. When the payment is successful, the status will change to
*Payment Successful*.

![image](ingenico/payment_terminal_05.png)

If you want to cancel the payment request, click on cancel. You can
still retry to send the payment request.

If there is any issue with the payment terminal, you can still force the
payment using the *Force Done*. This will allow you to validate the
order in Odoo even if the connection between the terminal and Odoo has
issues.

<div class="note">

<div class="title">

Note

</div>

This option will only be available if you received an error message
telling you the connection failed.

</div>

Once your payment is processed, on the payment record, you’ll find the
type of card that has been used and the transaction ID.

![image](ingenico/payment_terminal_06.png)


---
## File: ./content/applications/sales/point_of_sale/payment_methods/terminals.md

  - show-content

# Payment terminals

Connecting and integrating a payment terminal with your POS system
allows you to accept multiple payment options, including credit and
debit cards, making the payment process more efficient.

## Configuration

Go to the `application settings <../configuration>`, scroll down to the
`Payment
Terminals` section, and tick your terminal's checkbox.

![checkbox in the settings to enable a payment
terminal](terminals/settings-pt.png)

Then, follow the corresponding documentation to configure your device:

  - `Adyen configuration <terminals/adyen>`
  - `Ingenico configuration <terminals/ingenico>`
  - `SIX configuration <terminals/six>`
  - `Vantiv configuration <terminals/vantiv>`

Once the terminal is configured, you can `create the corresponding
payment method and add it to
the POS <../payment_methods>`.

<div class="toctree" data-titlesonly="">

terminals/adyen terminals/ingenico terminals/six terminals/vantiv

</div>


---
## File: ./content/applications/sales/point_of_sale/payment_methods.md

  - show-content

# Payment methods

To add a payment method, you first need to create it. Go to `Point of
Sale -->
Configuration --> Payment Methods --> Create`. Set a name and select a
`payment terminal
<payment_methods/terminals>` for card payments or check `Cash` for cash
payments.

![Creating a new payment method for a
POS.](payment_methods/payment-method.png)

<div class="seealso">

`payment_methods/terminals`.

</div>

Now, you can select the payment method in your POS settings. To do so,
go to `Point of Sale --> Configuration --> Point of Sale` and select a
POS for which you wish to make the payment method available. Click
`Edit` and add the payment method under the `Payments` section.

<div class="toctree" data-titlesonly="">

payment\_methods/terminals

</div>


---
## File: ./content/applications/sales/point_of_sale/pricing/discount_tags.md

# Discount tags (barcode scanner)

If you want to sell your products with a discount, for a product getting
close to its expiration date for example, you can use discount tags.
They allow you to scan discount barcodes.

<div class="note">

<div class="title">

Note

</div>

To use discount tags you will need to use a barcode scanner.

</div>

## Barcode Nomenclature

To use discounts tags, we need to learn about barcode nomenclature.

Let's say you want to have a discount for the product with the following
barcode:

![image](discount_tags/discount_tags01.png)

You can find the *Default Nomenclature* under the settings of your PoS
interface.

![image](discount_tags/discount_tags02.png)

![image](discount_tags/discount_tags03.png)

Let's say you want 50% discount on a product you have to start your
barcode with 22 (for the discount barcode nomenclature) and then 50 (for
the %) before adding the product barcode. In our example, the barcode
would be:

![image](discount_tags/discount_tags04.png)

## Scan the products & tags

You first have to scan the desired product (in our case, a lemon).

![image](discount_tags/discount_tags05.png)

And then scan the discount tag. The discount will be applied and you can
finish the transaction.

![image](discount_tags/discount_tags06.png)


---
## File: ./content/applications/sales/point_of_sale/pricing/loyalty.md

# Loyalty programs

Encourage your customers to continue to shop at your point of sale with
a *Loyalty Program*.

## Configuration

To activate the *Loyalty Program* feature, go to `Point of Sale -->
Configuration --> Point of sale` and select your PoS interface. Under
the Pricing features, select *Loyalty Program*

![image](loyalty/loyalty01.png)

From there you can create and edit your loyalty programs.

![image](loyalty/loyalty02.png)

You can decide what type of program you wish to use, if the reward is a
discount or a gift, make it specific to some products or cover your
whole range. Apply rules so that it is only valid in specific situation
and everything in between.

## Use the loyalty program in your PoS interface

When a customer is set, you will now see the points they will get for
the transaction and they will accumulate until they are spent. They are
spent using the button *Rewards* when they have enough points according
to the rules defined in the loyalty program.

![image](loyalty/loyalty03.png)

You can see the price is instantly updated to reflect the pricelist. You
can finalize the order in your usual way.

<div class="note">

<div class="title">

Note

</div>

If you select a customer with a default pricelist, it will be applied.
You can of course change it.

</div>


---
## File: ./content/applications/sales/point_of_sale/pricing/cash_rounding.md

# Cash rounding

**Cash rounding** is required when the lowest physical denomination of
currency, or the smallest coin, is higher than the minimum unit of
account.

For example, some countries require their companies to round up or down
the total amount of an invoice to the nearest five cents, when the
payment is made in cash.

Each point of sale in Odoo can be configured to apply cash rounding to
the totals of its bills or receipts.

## Configuration

Go to `Point of Sale --> Configuration --> Settings` and enable *Cash
Rounding*, then click on *Save*.

![image](cash_rounding/cash_rounding01.png)

Go to `Point of Sale --> Configuration --> Point of
Sale`, open the point of sale you want to configure, and enable the
*Cash Rounding* option.

To define the **Rounding Method**, open the drop-down list and click on
*Create and Edit...*.

Define here your *Rounding Precision*, *Profit Account*, and *Loss
Account*, then save both the Rounding Method and your Point of Sale
settings.

![image](cash_rounding/cash_rounding02.png)

All total amounts of this point of sale now add a line to apply the
rounding according to your settings.

![image](cash_rounding/cash_rounding03.png)

<div class="note">

<div class="title">

Note

</div>

Odoo Point of Sale only supports the `Add a rounding line` rounding
strategy.

</div>


---
## File: ./content/applications/sales/point_of_sale/pricing/pricelists.md

# Pricelists

You probably know the concept of happy hour: during a certain period of
time, the barman gives a discount on some drinks (usually 50% off or a
buy one get one free). When the period is over, prices go back to
normal. But how does that relate with Odoo?

In Odoo, you can set up happy hours. It’s one of the many possible uses
of *Pricelists*. Those *Pricelists* allow the creation of multiple
prices for the same product: a regular one and a special one for happy
hours. Available in the *PoS* app, those are really convenient.

## Set up Pricelists

To set up a *Pricelist*, go to `Point of Sale --> Configuration -->
Configuration` and enable the *Pricelist* feature. Then, go to `Point of
Sale --> Configuration
--> Point of Sale` and enable *Pricelist* for the *PoS*.

![image](pricelists/pricelists_01.png)

Now, you can create *Pricelists* by clicking on the *Pricelists* link.
Then, set it up by choosing the product category you want to include in
your happy hour and the discount.

![image](pricelists/pricelists_02.png)

Go back to your *PoS* settings and add the Happy Hour pricelist to the
list. You can even choose a default pricelist if needed.

![image](pricelists/pricelists_03.png)

From now on, on the *PoS* interface, a new button is available, allowing
you to choose among the different *pricelists* you added before.

![image](pricelists/pricelists_04.png)

<div class="seealso">

\* `../../sales/products_prices/prices/pricing`

</div>


---
## File: ./content/applications/sales/point_of_sale/pricing/fiscal_position.md

# Tax rates (fiscal positions)

In Odoo, *Fiscal Positions* let you apply different taxes based on the
customer location. In a *Point of Sale*, such as a restaurant, it can be
used to apply different taxes depending if the customer eats in or takes
away.

## Set up fiscal positions for PoS

To enable this feature, go to `Point of Sale --> Configuration --> Point
of Sale` and check *Fiscal Position per Order*. Now, you can choose the
fiscal positions you want for your *PoS*.

![image](fiscal_position/fiscal_position_01.png)

<div class="note">

<div class="title">

Note

</div>

You need to create your fiscal positions before using this feature.

</div>

## Using fiscal positions

Once on your *PoS* interface, click on the *Tax* button. Now, choose the
fiscal position you need for the current order.

![image](fiscal_position/fiscal_position_02.png)

## Set up a default fiscal position

If you want to use a default fiscal position, meaning that a preexisting
value is always automatically assigned, go to `Point of Sale -->
Configuration
--> Point of Sale` and enable *Fiscal Position*. Now, choose one to set
as the default one.

![image](fiscal_position/fiscal_position_03.png)

<div class="note">

<div class="title">

Note

</div>

Now, the *tax* button is replaced by a *on site* button when on the
*PoS* interface.

</div>


---
## File: ./content/applications/sales/point_of_sale/pricing/discounts.md

# Discounts

By offering discounts, you can entice your customers and drastically
increase your revenue. It is vital to offer discounts, whether they are
time-limited, seasonal or manually given.

To manage discounts, Odoo has powerful features that help set up a
pricing strategy tailored to every business.

## Apply manual discounts

If you seldom use discounts, applying manual ones might be the easiest
solution for your Point of Sale.

You can either apply a discount on the whole order or on specific
products inside an order.

### Apply a discount on a product

From your PoS session interface, use the *Disc* button.

![View of the discount button for manual
discount](discounts/discounts_01.png)

Then, you can input a discount over the product that is currently
selected.

### Apply a global discount

To apply a discount on the whole order, go to `Point of
Sales --> Configuration --> Point of Sale` and select your PoS.

Once on your PoS form, select *Global Discounts*, under the *Pricing*
category.

![View of the feature to enable for global
discount](discounts/discounts_02.png)

Now, you have a new *Discount* button appearing on your PoS interface.

![View of the button to use for global discount via the pos
interface](discounts/discounts_03.png)

Click on it and enter the wanted discount.

![View of the discount offered in the payment
summary](discounts/discounts_04.png)

<div class="note">

<div class="title">

Note

</div>

On this example, there is a global discount of 50% as well as a specific
50% discount on oranges.

</div>

## Apply time-limited discounts

To activate time-limited discounts, you must activate the *Pricelists*
feature. To do so, go to `Point of Sales -->
Configuration --> Point of Sale` and open your PoS. Then, enable the
pricelist feature.

![View of the pricelist feature](discounts/discounts_05.png)

Once activated, you must choose the pricelists you want to make
available in the PoS and define a default one.

### Create a pricelist

By default, Odoo has a *Public Pricelist* configured. To create more, go
to `Point of Sale --> Products --> Pricelists`. Then click on create.

When creating a pricelist, you can set several criteria to use a
specific price: period, min. quantity, etc. You can also decide to apply
that pricelist on specific products or on the whole range.

![View of a time-limited pricelist for two
products](discounts/discounts_06.png)

### Using a pricelist with the PoS interface

On the PoS interface, a new button appears. Use it to select a
pricelist.

![View of the button to use for time-limited discounts via the pos
interface](discounts/discounts_07.png)

Click on it to instantly update the prices with the selected pricelist.
Then, you can finalize the order.


---
## File: ./content/applications/sales/rental.md

# Rental

**Odoo Rental** is a comprehensive solution to manage your rentals.

From a single view, you can send out quotations, confirm orders,
schedule rentals, register when products are picked up and returned, and
invoice your customers.

<div class="seealso">

\- [Odoo Rental: product page](https://www.odoo.com/app/rental) - [Odoo
Tutorials: Rental](https://www.odoo.com/slides/rental-48)

</div>

## Rental Pricing

### Configuration

Go to `Rental --> Products`, select or create a product, and click on
the product's *Rental* tab. Under *Rental Pricing*, click on *Add a
price*. Then choose a *Unit* of time (hours, days, weeks, or months), a
*Duration*, and a *Price*. You can add as many price lines as necessary,
usually to give out discounts for longer rental durations.

![Example of rental pricing configuration in Odoo
Rental](rental/rental-pricing-example.png)

<div class="tip">

<div class="title">

Tip

</div>

Under *Reservations*, you can add fines for any *Extra Hour* or *Extra
Day*. You can also set a *Security Time*, expressed in hours, to make
the product temporarily unavailable between two rental orders.

</div>

<div class="note">

<div class="title">

Note

</div>

If you want to rent a product created outside of the Rental app, do not
forget to tick *Can be Rented* under the product's name. By default,
this option is ticked when you create a product directly from the Rental
app.

</div>

### Computing

Odoo always uses two rules to compute the price of a product when you
create a rental order:

1.  Only one price line is used.
2.  The cheapest line is selected.

<div class="exercise">

Consider the following rental pricing configuration for a product:

  - 1 day: $100
  - 3 days: $250
  - 1 week: $500

A customer wants to rent this product for eight days. What price will
they pay?

After an order is created, Odoo selects the second line as this is the
cheapest option. The customer has to pay three times '3 days' to cover
the rental's eight days, for a total of $750.

</div>

## Customer signature

You can ask your customers to sign a rental agreement outlining the
arrangement between you and your customers before they pick up products
to make sure your products are returned on time and in their original
condition. To do so, go to `Rental --> Configuration --> Settings`,
activate *Digital Documents*, and *Save*.

![Digital Documents settings in Odoo
Rental](rental/digital-documents-settings.png)

<div class="note">

<div class="title">

Note

</div>

This feature requires the `Sign <../finance/sign>` app. If necessary,
Odoo installs it after activating *Digital Documents*.

</div>

Once the app settings are saved, you have the option to change the
default *Rental Agreement* from the dropdown menu. You can pick any
document already uploaded to the *Sign* app, or upload a new one to the
*Sign* app by clicking on *Upload Template*.

To request a customer signature, select a confirmed rental order, click
on *Sign Documents*, choose the document template and click on *Sign
Documents* again. On the next window, select your customer and click on
*Sign Now* to start the signing process with your customer. Once the
document is completed, click on *Validate & Send Completed Document*.

<div class="seealso">

\- [Odoo Tutorials: Sign](https://www.odoo.com/slides/sign-61)

</div>

## Pickup and Return receipt

You can print and give your customers receipts when they pick up and/or
return products. To do so, open any rental order, click on *Print* and
select *Pickup and Return Receipt*. Odoo then generates a PDF detailing
all information about the current status of the rented items: which were
picked up, when they are expected to be returned, which were returned,
and potential rental delay costs.

![Printing a Pickup and Return receipt in Odoo
Rental](rental/print-receipt.png)


---
## File: ./content/applications/sales/crm.md

  - nosearch

  - show-content

  - hide-page-toc

  - show-toc

# CRM

**Odoo CRM** helps you organize your sales activities: track leads,
close opportunities and get accurate forecasts. Keep opportunities
organized with the pipeline and manage your day-to-day activities with
meetings and next activities.

<div class="seealso">

\- [Odoo Tutorials: CRM](https://www.odoo.com/slides/crm-16)

</div>

<div class="toctree" data-titlesonly="">

crm/pipeline crm/acquire\_leads crm/track\_leads crm/performance
crm/optimize

</div>


---
## File: ./content/applications/sales/sales.md

  - nosearch

  - show-content

  - hide-page-toc

  - show-toc

# Sales

**Odoo Sales** is the application to run your sales process (from
quotation to sales order) and deliver and invoice what has been sold.

<div class="seealso">

\- [Odoo Tutorials: Sales
Tutorials](https://www.odoo.com/slides/sales-17)

</div>

<div class="toctree" data-titlesonly="">

sales/send\_quotations sales/invoicing sales/products\_prices
sales/amazon\_connector sales/ebay\_connector

</div>


---
## File: ./content/applications/sales/subscriptions.md

  - nosearch

  - show-content

  - hide-page-toc

  - show-toc

# Subscriptions

**Odoo Subscriptions** is used to run recurring businesses: sell new
contracts, upsell customers, keep the churn under control and have
reporting on the main KPIs: MRR, ARR, retention, churn, upselling, etc.

<div class="seealso">

\- [Odoo Tutorials:
Subscriptions](https://www.odoo.com/slides/subscription-20)

</div>

<div class="toctree" data-titlesonly="">

subscriptions/configuration subscriptions/sales\_flow
subscriptions/follow\_up subscriptions/reporting

</div>


---
## File: ./content/applications/general/apps_modules.md

# Apps and modules

You can `install <general/install>`, `upgrade <general/upgrade>` and
`uninstall
<general/uninstall>` all apps and modules from the `Apps` dashboard.

By default, an *Apps* filter is applied. If you want to search for
modules, click on *Filters* and select *Extra*.

![Add "Extra" filter in Odoo Apps](apps_modules/apps-search-filter.png)

<div class="warning">

<div class="title">

Warning

</div>

Odoo is *not a smartphone*, and its apps shouldn't be installed or
uninstalled carelessly. Apply caution when adding or removing apps and
modules on your database since this may impact your subscription costs.

  - **Installing or uninstalling apps and managing users is up to
    you.**  
    As the administrator of your database, you are responsible for its
    usage, as you know best how your organization works.

  - **Odoo apps have dependencies.**  
    Installing some apps and features with dependencies may also install
    additional apps and modules that are technically required, even if
    you won't actively use them.

  - **Test app installation/removal on a duplicate of your database.**  
    This way, you can know what app dependencies may be required or what
    data may be erased.

</div>

## Install apps and modules

Go to `Apps`, and click on the *Install* button of the app you want to
install.

<div class="note">

<div class="title">

Note

</div>

If the module you are looking for is not listed, you can **update the
app list**.

To do so, activate the `developer mode <developer-mode>`, then go to
`Apps
--> Update Apps List` and click on *Update*.

</div>

## Upgrade apps and modules

On some occasions, new improvements or app features are added to
`supported versions of Odoo
</administration/maintain/supported_versions>`. To be able to use them,
you must **upgrade** your app.

Go to `Apps`, click on the *dropdown menu* of the app you want to
upgrade, then on *Upgrade*.

## Uninstall apps and modules

Go to `Apps`, click on the *dropdown menu* of the app you want to
uninstall, then on *Uninstall*.

![image](apps_modules/uninstall.png)

Some apps have dependencies, meaning that one app requires another.
Therefore, uninstalling one app may uninstall multiple apps and modules.
Odoo warns you which dependent apps and modules are affected by it.

![image](apps_modules/uninstall_deps.png)

To complete the uninstallation, click on *Confirm*.

<div class="danger">

<div class="title">

Danger

</div>

Uninstalling an app also uninstalls all its dependencies and permanently
erases their data.

</div>


---
## File: ./content/applications/general/auth/2fa.md

# Two-factor Authentication

Two-factor authentication ("2FA") is a good way to improve the security
of an account, to make it less likely that an other person will manage
to log in instead of you.

Practically, it means storing a secret inside an *authenticator*
(usually your cell phone) and exchanging a code from the authenticator
when you try to log in.

This means an attacker needs *both* to have guessed (or found) your
password and to access (or steal) your authenticator, a more difficult
proposition than either one or the other.

## Requirements

<div class="note">

<div class="title">

Note

</div>

These lists are just examples, they are not endorsements of any specific
software.

</div>

If you don't already have one, you will need to choose an authenticator.

Phone-based authenticators are the easiest and most common so we will
assume you'll pick and install one on your phone, examples include
[Authy](https://authy.com/), [FreeOTP](https://freeotp.github.io/),
[Google
Authenticator](https://support.google.com/accounts/answer/1066447?hl=en),
[LastPass Authenticator](https://lastpass.com/auth/), [Microsoft
Authenticator](https://www.microsoft.com/en-gb/account/authenticator?cmp=h66ftb_42hbak),
...; password managers also commonly include `2FA (two-factor
authentication)` support e.g.
[1Password](https://support.1password.com/one-time-passwords/),
[Bitwarden](https://bitwarden.com/help/article/authenticator-keys/), ...

For the sake of demonstration we will be using Google Authenticator (not
because it is any good but because it is quite common).

## Setting up two-factor authentication

Once you have your authenticator of choice, go to the Odoo instance you
want to setup `2FA (two-factor authentication)`, then open `Preferences`
(or `My Profile`):

![](2fa/preferences.png)

Open the `Account Security` tab, then click the `Enable two-factor
authentication` button:

![](2fa/sec_tab.png)

Because this is a security-sensitive action, you will need to input your
password:

![](2fa/sec_enhanced.png)

After which you will see this screen with a barcode:

![](2fa/totp_scan.png)

In most applications, you can simply *scan the barcode* via the
authenticator of your choice, the authenticator will then take care of
all the setup:

![](2fa/scan_barcode.jpg)

<div class="note">

<div class="title">

Note

</div>

If you can not scan the screen (e.g. because you are doing this set-up
on the same phone as the authenticator application), you can click the
provided link, or copy the secret to manually set-up your authenticator:

![](2fa/secret_visible.png)

![](2fa/input_secret.png)

</div>

Once this is done, the authenticator should display a *verification
code* with some useful identifying information (e.g. the domain and
login for which the code is):

![](2fa/authenticator.png)

You can now input the code into the `Verification Code` field, then
click the `Enable two-factor authentication` button.

Congratulation, your account is now protected by two-factor
authentication\!

![](2fa/totp_enabled.png)

## Logging in

You should now `Log out` to follow along.

On the login page, input the username and password of the account for
which you set up `2FA (two-factor authentication)`, rather than
immediately enter Odoo you will now get a second log-in screen:

![](2fa/2fa_input.png)

Get your authenticator, input the code it provides for the domain and
account, validate, and you're now in.

And that's it. From now on, unless you disable `2FA (two-factor
authentication)` you will have a two-step log-in process rather than the
old one-step process.

<div class="danger">

<div class="title">

Danger

</div>

Don't lose your authenticator, if you do, you will need an *Odoo
Administrator* to disable `2FA (two-factor
authentication)` on the account.

</div>


---
## File: ./content/applications/general/auth/ldap.md

# Sign in with LDAP

  - Install the LDAP module in General Settings.
  - Click on **Create** in Setup your LDAP Server.

![image](ldap/ldap01.png)

![image](ldap/ldap02.png)

  - Choose the company about to use the LDAP.

![image](ldap/ldap03.png)

  - In **Server Information**, enter the IP address of your server and
    the port it listens to.
  - Tick **User TLS** if your server is compatible.

![image](ldap/ldap04.png)

  - In **Login Information**, enter ID and password of the account used
    to query the server. If left empty, the server will be queried
    anonymously.

![image](ldap/ldap05.png)

  - In **Process Parameter**, enter the domain name of your LDAP server
    in LDAP nomenclature (e.g. `dc=example,dc=com`).
  - In **LDAP filter**, enter `uid=%s`

![image](ldap/ldap06.png)

  - In **User Information**, tick *Create User* if you want Odoo to
    create a User profile the first time someone log in with LDAP.
  - In **Template User**, indicate a template for the new profiles
    created. If left blanked, the admin profile will be used as
    template.

![image](ldap/ldap07.png)


---
## File: ./content/applications/general/auth/google.md

# Google Sign-In Authentication

The *Google Sign-In Authentication* is a useful function that allows
Odoo users to sign in to their database with their Google account.

This is particularly helpful if the organization uses Google Workspace,
and wants employees within the organization to connect to Odoo using
their Google Accounts.

<div class="warning">

<div class="title">

Warning

</div>

Databases hosted on Odoo.com should not use Oauth login for the owner or
administrator of the database as it would unlink the database from their
Odoo.com account. If Oauth is set up for that user, the database will no
longer be able to be duplicated, renamed or otherwise managed from the
Odoo.com portal.

</div>

<div class="seealso">

\- `/applications/productivity/calendar/google` -
`/administration/maintain/google_oauth`

</div>

## Configuration

The integration of the Google sign-in function requires configuration
both on Google *and* Odoo.

### Google API Dashboard

1.  Go to the [Google API
    Dashboard](https://console.developers.google.com/).

2.  Make sure the right project is opened. If there isn't a project yet,
    click on `Create
    Project`, fill out the project name and other details of the
    company, and click on `Create`.
    
    ![Filling out the details of a new
    project.](google/new-project-details.png)
    
    <div class="tip">
    
    <div class="title">
    
    Tip
    
    </div>
    
    Choose the name of the company from the drop-down menu.
    
    </div>

#### OAuth consent screen

1.  On the left side menu, click on `OAuth consent screen`.
    
    ![Google OAuth consent selection
    menu.](google/consent-selection.png)

2.  Choose one of the options (`Internal` / `External`), and click on
    `Create`.
    
    ![Choice of a user type in OAuth consent.](google/consent.png)
    
    <div class="warning">
    
    <div class="title">
    
    Warning
    
    </div>
    
    *Personal* Gmail Accounts are only allowed to be **External** User
    Type, which means Google may require an approval, or for *Scopes* to
    be added on. However, using a *Google WorkSpace* account allows for
    **Internal** User Type to be used.
    
    Note, as well, that while the API connection is in the *External*
    testing mode, then no approval is necessary from Google. User limits
    in this testing mode is set to 100 users.
    
    </div>

3.  Fill out the required details and domain info, then click on `Save
    and Continue`.

4.  On the `Scopes` page, leave all fields as is, and click on `Save and
    Continue`.

5.  Next, if continuing in testing mode (*External*), add the email
    addresses being configured under the `Test users` step by clicking
    on `Add Users`, and then the `Save and Continue` button. A summary
    of the app registration appears.

6.  Finally, scroll to the bottom, and click on `Back to Dashboard`.

#### Credentials

1.  On the left side menu, click on `Credentials`.
    
    ![Credentials button menu.](google/credentials-button.png)

2.  Click on `Create Credentials`, and select `OAuth client ID`.
    
    ![OAuth client id selection.](google/client-id.png)

3.  Select `Web Application` as the `Application Type`. Now, configure
    the allowed pages on which Odoo will be redirected.
    
    In order to achieve this, in the `Authorized redirect URIs` field,
    enter the database's domain immediately followed by
    <span class="title-ref">/auth\_oauth/signin</span>. For example:
    <span class="title-ref">https://mydomain.odoo.com/auth\_oauth/signin</span>,
    then click on `Create`.

4.  Now that the *OAuth client* has been created, a screen will appear
    with the `Client ID` and `Client Secret`. Copy the `Client ID` for
    later, as it will be necessary for the configuration in Odoo, which
    will be covered in the following steps.

### Google Authentication on Odoo

#### Retrieve the Client ID

Once the previous steps are complete, two keys are generated on the
Google API Dashboard: `Client ID` and `Client Secret`. Copy the `Client
ID`.

![Google OAuth Client ID generated.](google/secret-ids.png)

#### Odoo activation

1.  Go to `Odoo General Settings --> Integrations` and activate `OAuth
    Authentication`.
    
    <div class="note">
    
    <div class="title">
    
    Note
    
    </div>
    
    Odoo may prompt the user to log-in again after this step.
    
    </div>

2.  Go back to `General Settings --> Integrations --> OAuth
    Authentication`, activate the selection and `Save`. Next, return to
    `General Settings -->
    Integrations --> Google Authentication` and activate the selection.
    Then fill out the `Client ID` with the key from the Google API
    Dashboard, and `Save`.
    
    ![Filling out the client id in Odoo
    settings.](google/odoo-client-id.png)
    
    <div class="note">
    
    <div class="title">
    
    Note
    
    </div>
    
    Google OAuth2 configuration can also be accessed by clicking on
    `OAuth Providers` under the `OAuth Authentication` heading in
    `Integrations`.
    
    </div>

## Log in to Odoo with Google

To link the Google account to the Odoo profile, click on `Log in with
Google` when first logging into Odoo.

> ![Reset password screen with "Log in with Google"
> button.](google/first-login.png)

Existing users must `reset their password <users/reset-password>` to
access the `Reset Password` page, while new users can directly click on
`Log in with
Google`, instead of choosing a new password.

<div class="seealso">

\- [Google Cloud Platform Console Help - Setting up
OAuth 2.0](https://support.google.com/cloud/answer/6158849)

</div>


---
## File: ./content/applications/general/auth/azure.md

# Microsoft Azure sign-in authentication

The Microsoft Azure OAuth sign-in authentication is a useful function
that allows Odoo users to sign in to their database with their Microsoft
Azure account.

This is particularly helpful if the organization uses Azure Workspace,
and wants employees within the organization to connect to Odoo using
their Microsoft Accounts.

<div class="warning">

<div class="title">

Warning

</div>

Databases hosted on Odoo.com should not use OAuth login for the owner or
administrator of the database as it would unlink the database from their
Odoo.com account. If OAuth is set up for that user, the database will no
longer be able to be duplicated, renamed, or otherwise managed from the
Odoo.com portal.

</div>

<div class="seealso">

\- `../../productivity/calendar/outlook` -
`/administration/maintain/azure_oauth`

</div>

## Configuration

Integrating the Microsoft sign-in function requires configuration on
Microsoft and Odoo.

### Odoo System Parameter

First activate the `developer mode <developer-mode>`, and then go to
`Settings
--> Technical --> System Parameters`.

Click `Create` and on the new/blank form that appears, add the following
system parameter
<span class="title-ref">auth\_oauth.authorization\_header</span> to the
`Key` field, and set the `Value` to <span class="title-ref">1</span>.
Then click `Save` to finish.

### Microsoft Azure dashboard

#### Create a new application

Now that the system parameters in Odoo have been set up, it's time to
create a corresponding application inside of Microsoft Azure. To get
started creating the new application, go to [Microsoft's Azure
Portal](https://portal.azure.com/). Log in with the `Microsoft
Outlook Office 365` account if there is one, otherwise, log in with a
personal `Microsoft
account`.

<div class="important">

<div class="title">

Important

</div>

A user with administrative access to the *Azure Settings* must connect
and perform the following configuration steps below.

</div>

Next, navigate to the section labeled `Manage Microsoft Entra ID`
(formally *Azure Active Directory*). The location of this link is
usually in the center of the page.

Now, click on the `Add (+)` icon, located in the top menu, and then
select `App
registration` from the drop-down menu. On the `Register an application`
screen, rename the `Name` field to <span class="title-ref">Odoo Login
OAuth</span> or a similarly recognizable title. Under the `Supported
account types` section select the option for `Accounts in this
organizational directory only (Default Directory only - Single tenant)`.

<div class="warning">

<div class="title">

Warning

</div>

The `Supported account types` can vary by Microsoft account type and end
use of the OAuth. For example: Is the login meant for internal users
within one organization or is it meant for customer portal access? The
above configuration is used for internal users in an organization.

Choose `Personal Microsoft accounts only` if the target audience is
meant for portal users. Choose `Accounts in this organizational
directory only (Default Directory only -
Single tenant)` if the target audience is company users.

</div>

Under the `Redirect URL` section, select `Web` as the platform, and then
input <span class="title-ref">https://\<odoo base
url\>/auth\_oauth/signin</span> in the `URL` field. The Odoo base `URL
(Uniform Resource Locator)` is the canonical domain at which your Odoo
instance can be reached (e.g. *mydatabase.odoo.com* if you are hosted on
Odoo.com) in the `URL` field. Then, click `Register`, and the
application is created.

#### Authentication

Edit the new app's authentication by clicking on the `Authentication`
menu item in the left menu after being redirected to the application's
settings from the previous step.

Next, the type of *tokens* needed for the OAuth authentication will be
chosen. These are not currency tokens but rather authentication tokens
that are passed between Microsoft and Odoo. Therefore, there is no cost
for these tokens; they are used merely for authentication purposes
between two `APIs (application programming interfaces)`. Select the
tokens that should be issued by the authorization endpoint by scrolling
down the screen and check the boxes labeled: `Access tokens (used for
implicit flows)` and `ID tokens (used for implicit and
hybrid flows)`.

![Authentication settings and endpoint
tokens.](azure/authentication-tokens.png)

Click `Save` to ensure these settings are saved.

#### Gather credentials

With the application created and authenticated in the Microsoft Azure
console, credentials will be gathered next. To do so, click on the
`Overview` menu item in the left-hand column. Select and copy the
`Application (client) ID` in the window that appears. Paste this
credential to a clipboard / notepad, as this credential will be used in
the Odoo configuration later.

After finishing this step, click on `Endpoints` on the top menu and
click the *copy icon* next to `OAuth 2.0 authorization endpoint (v2)`
field. Paste this value in the clipboard / notepad.

![Application ID and OAuth 2.0 authorization endpoint (v2)
credentials.](azure/overview-azure-app.png)

### Odoo setup

Finally, the last step in the Microsoft Azure OAuth configuration is to
configure some settings in Odoo. Navigate to `Settings --> Integrations
--> OAuth Authentication` and check the box to activate the OAuth login
feature. Click `Save` to ensure the progress is saved. Then, sign in to
the database once the login screen loads.

Once again, navigate to `Settings --> Integrations --> OAuth
Authentication` and click on `OAuth Providers`. Now, select `New` in the
upper-left corner and name the provider
<span class="title-ref">Azure</span>.

Paste the `Application (client) ID` from the previous section into the
`Client
ID` field. After completing this, paste the new `OAuth 2.0 authorization
endpoint (v2)` value into the `Authorization URL` field.

For the `UserInfo URL` field, paste the following `URL (Uniform Resource
Locator)`:
<span class="title-ref">https://graph.microsoft.com/oidc/userinfo</span>

In the `Scope` field, paste the following value:
<span class="title-ref">openid profile email</span>. Next, the Windows
logo can be used as the CSS class on the login screen by entering the
following value: <span class="title-ref">fa fa-fw fa-windows</span>, in
the `CSS class` field.

Check the box next to the `Allowed` field to enable the OAuth provider.
Finally, add <span class="title-ref">Microsoft Azure</span> to the
`Login button label` field. This text will appear next to the Windows
logo on the login page.

![Odoo provider setup in the Settings
application.](azure/odoo-provider-settings.png)

`Save` the changes to complete the OAuth authentication setup in Odoo.

### User experience flows

For a user to log in to Odoo using Microsoft Azure, the user must be on
the `Odoo
password reset page`. This is the only way that Odoo is able to link the
Microsoft Azure account and allow the user to log in.

<div class="note">

<div class="title">

Note

</div>

Existing users must `reset their password <users/reset-password>` to
access the `Odoo password reset page`. New Odoo users must click the new
user invitation link that was sent via email, then click on `Microsoft
Azure`. Users should not set a new password.

</div>

To sign in to Odoo for the first time using the Microsoft Azure OAuth
provider, navigate to the `Odoo password reset page` (using the new user
invitation link). A password reset page should appear. Then, click on
the option labeled `Microsoft Azure`. The page will redirect to the
Microsoft login page.

![Microsoft Outlook login page.](azure/odoo-login.png)

Enter the `Microsoft Email Address` and click `Next`. Follow the process
to sign in to the account. Should `2FA (Two Factor Authentication)` be
turned on, then an extra step may be required.

![Enter Microsoft login credentials.](azure/login-next.png)

Finally, after logging in to the account, the page will redirect to a
permissions page where the user will be prompted to `Accept` the
conditions that the Odoo application will access their Microsoft
information.

![Accept Microsoft conditions for permission access to your account
information.](azure/accept-access.png)


---
## File: ./content/applications/general/export_import_data.md

# Export and import data

## Export data from Odoo

When working with a database, it sometimes is necessary to export your
data in a distinct file. Doing so can help to do reporting over your
activities (even if Odoo offers a precise and easy reporting tool with
each available application).

With Odoo, you can export the values from any field in any record. To do
so, activate the list view on the items that need to be exported, click
on *Action*, and, then, on *Export*.

![view of the different things to enable/click to export
data](export_import_data/list-view-export.png)

Pretty simple, this action still comes with some specificities. In fact,
when clicking on *Export*, a pop-up window appears with several options
for the data to export:

![overview of all the options to take into account when exporting data
in Odoo](export_import_data/export-data-overview.png)

1.  With the *I want to update data* option ticked, the system only
    shows the fields which can be imported. This is very helpful in case
    you want to update existing records. Basically, this works like a
    filter. Leaving the box unticked gives way more field options
    because it shows all the fields, not just the ones which can be
    imported.
2.  When exporting, you can choose between two formats: .csv and .xls.
    With .csv, items are separated with a comma, while .xls holds
    information about all the worksheets in a file, including both
    content and formatting.
3.  Those are the items you may want to export. Use the arrows to
    display more sub-field options. Of course, you can use the search
    bar to find specific fields more easily. To use the search option
    more efficiently, display all the fields by clicking on all the
    arrows\!
4.  The + button is there to add fields to the "to export" list.
5.  The "handles" next to the selected fields allow you to move the
    fields up and down to change the order in which they must be
    displayed in the exported file.
6.  The trashcan is there if you need to remove fields.
7.  For recurring reports, it might be interesting to save export
    presets. Select all the needed ones and click on the template bar.
    There, click on *New template* and give a name to yours. The next
    time you need to export the same list, simply select the related
    template.

<div class="tip">

<div class="title">

Tip

</div>

It’s good to keep the field’s external identifier in mind. For example,
*Related Company* is equal to *parent\_id*. Doing so helps export only
what you would like to import next.

</div>

## Import data into Odoo

### How to start

You can import data on any Odoo's business object using either Excel
(.xlsx) or CSV (.csv) formats: contacts, products, bank statements,
journal entries and even orders\!

Open the view of the object you want to populate and click on `Favorites
--> Import
records`.

![image](export_import_data/import_button.png)

There you are provided with templates you can easily populate with your
own data. Such templates can be imported in one click; The data mapping
is already done.

### How to adapt the template

  - Add, remove and sort columns to fit at best your data structure.
  - We advise to not remove the **ID** one (see why in the next
    section).
  - Set a unique ID to every single record by dragging down the ID
    sequencing.

![image](export_import_data/dragdown.gif)

  - When you add a new column, Odoo might not be able to map it
    automatically if its label doesn't fit any field in Odoo. Don't
    worry\! You can map new columns manually when you test the import.
    Search the list for the corresponding field.
    
    > ![image](export_import_data/field_list.png)
    
    Then, use this field's label in your file in order to make it work
    straight on the very next time.

### How to import from another application

In order to re-create relationships between different records, you
should use the unique identifier from the original application and map
it to the **ID** (External ID) column in Odoo. When you import another
record that links to the first one, use **XXX/ID** (XXX/External ID) to
the original unique identifier. You can also find this record using its
name but you will be stuck if at least 2 records have the same name.

The **ID** will also be used to update the original import if you need
to re-import modified data later, it's thus good practice to specify it
whenever possible.

### I cannot find the field I want to map my column to

Odoo tries to find with some heuristic, based on the first ten lines of
the files, the type of field for each column inside your file. For
example if you have a column only containing numbers, only the fields
that are of type *Integer* will be displayed for you to choose from.
While this behavior might be good and easy for most cases, it is also
possible that it goes wrong or that you want to map your column to a
field that is not proposed by default.

If that happens, you just have to check the \*\* Show fields of relation
fields (advanced)\*\* option, you will then be able to choose from the
complete list of fields for each column.

![image](export_import_data/field_list.png)

### Where can I change the date import format?

Odoo can automatically detect if a column is a date, and it will try to
guess the date format from a set of most commonly used date formats.
While this process can work for many date formats, some date formats
will not be recognized. This can cause confusion due to day-month
inversions; it is difficult to guess which part of a date format is the
day and which part is the month in a date such as '01-03-2016'.

To view which date format Odoo has found from your file you can check
the **Date Format** that is shown when clicking on **Options** under the
file selector. If this format is incorrect you can change it to your
liking using the *ISO 8601* to define the format.

<div class="note">

<div class="title">

Note

</div>

If you are importing an excel (.xls, .xlsx) file, you can use date cells
to store dates as the display of dates in excel is different from the
way it is stored. That way you will be sure that the date format is
correct in Odoo whatever your locale date format is.

</div>

### Can I import numbers with currency sign (e.g.: $32.00)?

Yes, we fully support numbers with parenthesis to represent negative
sign as well as numbers with currency sign attached to them. Odoo also
automatically detect which thousand/decimal separator you use (you can
change those under **options**). If you use a currency symbol that is
not known to Odoo, it might not be recognized as a number though and it
will crash.

Examples of supported numbers (using thirty-two thousands as an
example):

  - 32.000,00
  - 32000,00
  - 32,000.00
  - \-32000.00
  - (32000.00)
  - $ 32.000,00
  - (32000.00 €)

Example that will not work:

  - ABC 32.000,00
  - $ (32.000,00)

### What can I do when the Import preview table isn't displayed correctly?

By default the Import preview is set on commas as field separators and
quotation marks as text delimiters. If your csv file does not have these
settings, you can modify the File Format Options (displayed under the
Browse CSV file bar after you select your file).

Note that if your CSV file has a tabulation as separator, Odoo will not
detect the separations. You will need to change the file format options
in your spreadsheet application. See the following question.

### How can I change the CSV file format options when saving in my spreadsheet application?

If you edit and save CSV files in spreadsheet applications, your
computer's regional settings will be applied for the separator and
delimiter. We suggest you use OpenOffice or LibreOffice Calc as they
will allow you to modify all three options (in `'Save As' dialog box -->
Check the
box 'Edit filter settings' --> Save`).

Microsoft Excel will allow you to modify only the encoding when saving
(in `'Save As'
dialog box --> click 'Tools' dropdown list --> Encoding tab`).

### What's the difference between Database ID and External ID?

Some fields define a relationship with another object. For example, the
country of a contact is a link to a record of the 'Country' object. When
you want to import such fields, Odoo will have to recreate links between
the different records. To help you import such fields, Odoo provides
three mechanisms. You must use one and only one mechanism per field you
want to import.

For example, to reference the country of a contact, Odoo proposes you 3
different fields to import:

  - Country: the name or code of the country
  - Country/Database ID: the unique Odoo ID for a record, defined by the
    ID postgresql column
  - Country/External ID: the ID of this record referenced in another
    application (or the .XML file that imported it)

For the country Belgium, you can use one of these 3 ways to import:

  - Country: Belgium
  - Country/Database ID: 21
  - Country/External ID: base.be

According to your need, you should use one of these 3 ways to reference
records in relations. Here is when you should use one or the other,
according to your need:

  - Use Country: This is the easiest way when your data come from CSV
    files that have been created manually.
  - Use Country/Database ID: You should rarely use this notation. It's
    mostly used by developers as it's main advantage is to never have
    conflicts (you may have several records with the same name, but they
    always have a unique Database ID)
  - Use Country/External ID: Use External ID when you import data from a
    third party application.

When you use External IDs, you can import CSV files with the "External
ID" column to define the External ID of each record you import. Then,
you will be able to make a reference to that record with columns like
"Field/External ID". The following two CSV files give you an example for
Products and their Categories.

`CSV file for categories
<export_import_data/External_id_3rd_party_application_product_categories.csv>`.

`CSV file for Products
<export_import_data/External_id_3rd_party_application_products.csv>`.

### What can I do if I have multiple matches for a field?

If for example you have two product categories with the child name
"Sellable" (ie. "Misc. Products/Sellable" & "Other Products/Sellable"),
your validation is halted but you may still import your data. However,
we recommend you do not import the data because they will all be linked
to the first 'Sellable' category found in the Product Category list
("Misc. Products/Sellable"). We recommend you modify one of the
duplicates' values or your product category hierarchy.

However if you do not wish to change your configuration of product
categories, we recommend you use make use of the external ID for this
field 'Category'.

### How can I import a many2many relationship field (e.g. a customer that has multiple tags)?

The tags should be separated by a comma without any spacing. For
example, if you want your customer to be linked to both tags
'Manufacturer' and 'Retailer' then you will encode
"Manufacturer,Retailer" in the same column of your CSV file.

`CSV file for Manufacturer, Retailer
<export_import_data/m2m_customers_tags.csv>`

### How can I import a one2many relationship (e.g. several Order Lines of a Sales Order)?

If you want to import sales order having several order lines; for each
order line, you need to reserve a specific row in the CSV file. The
first order line will be imported on the same row as the information
relative to order. Any additional lines will need an additional row that
does not have any information in the fields relative to the order. As an
example, here is `purchase.order_functional_error_line_cant_adpat.CSV`
file of some quotations you can import, based on demo data.

`File for some Quotations
<export_import_data/purchase.order_functional_error_line_cant_adpat.csv>`.

The following CSV file shows how to import purchase orders with their
respective purchase order lines:

`Purchase orders with their respective purchase order lines
<export_import_data/o2m_purchase_order_lines.csv>`.

The following CSV file shows how to import customers and their
respective contacts:

`Customers and their respective contacts
<export_import_data/o2m_customers_contacts.csv>`.

### Can I import several times the same record?

If you import a file that contains one of the column "External ID" or
"Database ID", records that have already been imported will be modified
instead of being created. This is very useful as it allows you to import
several times the same CSV file while having made some changes in
between two imports. Odoo will take care of creating or modifying each
record depending if it's new or not.

This feature allows you to use the Import/Export tool of Odoo to modify
a batch of records in your favorite spreadsheet application.

### What happens if I do not provide a value for a specific field?

If you do not set all fields in your CSV file, Odoo will assign the
default value for every non defined fields. But if you set fields with
empty values in your CSV file, Odoo will set the EMPTY value in the
field, instead of assigning the default value.

### How to export/import different tables from an SQL application to Odoo?

If you need to import data from different tables, you will have to
recreate relations between records belonging to different tables. (e.g.
if you import companies and persons, you will have to recreate the link
between each person and the company they work for).

To manage relations between tables, you can use the "External ID"
facilities of Odoo. The "External ID" of a record is the unique
identifier of this record in another application. This "External ID"
must be unique across all the records of all objects, so it's a good
practice to prefix this "External ID" with the name of the application
or table. (like 'company\_1', 'person\_1' instead of '1')

As an example, suppose you have a SQL database with two tables you want
to import: companies and persons. Each person belong to one company, so
you will have to recreate the link between a person and the company he
work for. (If you want to test this example, here is a `dump of such a
PostgreSQL database <export_import_data/database_import_test.sql>`)

We will first export all companies and their "External ID". In PSQL,
write the following command:

``` sh
> copy (select 'company_'||id as "External ID",company_name as "Name",'True' as "Is a Company" from companies) TO '/tmp/company.csv' with CSV HEADER;
```

This SQL command will create the following CSV file:

``` text
External ID,Name,Is a Company
company_1,Bigees,True
company_2,Organi,True
company_3,Boum,True
```

To create the CSV file for persons, linked to companies, we will use the
following SQL command in PSQL:

``` sh
> copy (select 'person_'||id as "External ID",person_name as "Name",'False' as "Is a Company",'company_'||company_id as "Related Company/External ID" from persons) TO '/tmp/person.csv' with CSV
```

It will produce the following CSV file:

``` text
External ID,Name,Is a Company,Related Company/External ID
person_1,Fabien,False,company_1
person_2,Laurence,False,company_1
person_3,Eric,False,company_2
person_4,Ramsy,False,company_3
```

As you can see in this file, Fabien and Laurence are working for the
Bigees company (company\_1) and Eric is working for the Organi company.
The relation between persons and companies is done using the External ID
of the companies. We had to prefix the "External ID" by the name of the
table to avoid a conflict of ID between persons and companies (person\_1
and company\_1 who shared the same ID 1 in the original database).

The two files produced are ready to be imported in Odoo without any
modifications. After having imported these two CSV files, you will have
4 contacts and 3 companies. (the firsts two contacts are linked to the
first company). You must first import the companies and then the
persons.

## How to adapt an import template

Import templates are provided in the import tool of the most common data
to import (contacts, products, bank statements, etc.). You can open them
with any spreadsheets software (Microsoft Office, OpenOffice, Google
Drive, etc.).

## How to customize the file

  - Remove columns you don't need. We advise to not remove the *ID* one
    (see why here below).

  - Set a unique ID to every single record by dragging down the ID
    sequencing.
    
    ![image](export_import_data/dragdown.gif)

  - When you add a new column, Odoo might not be able to map it
    automatically if its label doesn't fit any field of the system. If
    so, find the corresponding field using the search.
    
    > ![image](export_import_data/field_list.png)
    
    Then, use the label you found in your import template in order to
    make it work straight away the very next time you try to import.

## Why an “ID” column

The **ID** (External ID) is an unique identifier for the line item. Feel
free to use the one of your previous software to ease the transition to
Odoo.

Setting an ID is not mandatory when importing but it helps in many
cases:

  - Update imports: you can import the same file several times without
    creating duplicates;
  - Import relation fields (see here below).

## How to import relation fields

An Odoo object is always related to many other objects (e.g. a product
is linked to product categories, attributes, vendors, etc.). To import
those relations you need to import the records of the related object
first from their own list menu.

You can do it using either the name of the related record or its ID. The
ID is expected when two records have the same name. In such a case add "
/ ID" at the end of the column title (e.g. for product attributes:
Product Attributes / Attribute / ID).


---
## File: ./content/applications/general/email_communication.md

  - nosearch

# Email Communication

<div class="toctree" data-titlesonly="">

email\_communication/email\_servers email\_communication/email\_domain
email\_communication/email\_template email\_communication/faq

</div>


---
## File: ./content/applications/general/email_communication/email_domain.md

# Sending emails with Odoo

## Using your email domain in Odoo

Documents in Odoo (a CRM opportunity, a sales order, an invoice ...)
have a discussion thread, called *chatter*.

When you post a message in the chatter, this message is sent by email to
the followers of the document. If a follower replies to the message, the
reply updates the chatter, and Odoo relays the reply to the followers.

Emails from your users to partners (customers, vendors) are sent from
the email address of your users. Similarly, emails from partners to
users are sent from the email address of the partners. This allows you
to recognize at a glance who sent an email relayed by Odoo.

If your database is hosted on our cloud (Odoo Online or Odoo.sh), it is
not necessary to add an outgoing email server to send emails from your
custom domain. You can enjoy this feature by using the default Odoo
email server.

<div class="important">

<div class="title">

Important

</div>

The Odoo server is subject to a daily email limit to prevent abuse. The
default limit is 200 emails sent per day for databases with an
Enterprise subscription. This limit can be increased under certain
conditions. See our `FAQ <faq>` or contact support for more information.

</div>

However, it is recommended that you configure your domain name to ensure
that emails from your users reach your partners, rather than being
considered spam.

For the same reason, we recommend that you always give your users an
email address from a domain you manage, rather than a generic email
address (gmail.com, outlook.com, etc.).

## Be SPF compliant

The Sender Policy Framework (SPF) protocol allows the owner of a domain
name to specify which servers are allowed to send email from that
domain. When a server receives an incoming email, it checks whether the
IP address of the sending server is on the list of allowed IPs according
to the SPF record of the sender.

<div class="note">

<div class="title">

Note

</div>

The SPF verification is performed on the domain mentioned in the
Return-Path field of the email. In the case of an email sent by Odoo,
this domain corresponds to the value of the
<span class="title-ref">mail.catchall.domain</span> key in the database
system parameters.

See the `documentation on incoming emails
<email_communication/inbound_messages>`.

</div>

The SPF policy of a domain is set using a TXT record. How to create or
modify a TXT record depends on the provider hosting the DNS zone of your
domain name. In order for the verification to work properly, each domain
can only have one SPF record.

If your domain name does not yet have an SPF record, the content of the
record to create is as follows:

`v=spf1 include:_spf.odoo.com ~all`

If your domain name already has an SPF record, you need to update this
record (and do not create a new one).

<div class="example">

If your TXT record is <span class="title-ref">v=spf1
include:\_spf.google.com \~all</span>, you need to edit it to add
\`include:\_spf.odoo.com\`: <span class="title-ref">v=spf1
include:\_spf.odoo.com include:\_spf.google.com \~all</span>

</div>

You can check if your SPF record is valid with a free tool like
[MXToolbox SPF](https://mxtoolbox.com/spf.aspx).

## Enable DKIM

The DomainKeys Identified Mail (DKIM) allows you to authenticate your
emails with a digital signature.

When sending an email, the Odoo server includes a unique DKIM signature
in the headers. The recipient's server decrypts this signature using the
DKIM record in your domain name. If the signature and the key contained
in the record match, this guarantees that your message is authentic and
has not been altered during transport.

To enable DKIM, you must add a CNAME record to the DNS zone of your
domain name:

`odoo._domainkey IN CNAME odoo._domainkey.odoo.com.`

<div class="tip">

<div class="title">

Tip

</div>

If your domain name is <span class="title-ref">mycompany.com</span>, you
need to create a subdomain
<span class="title-ref">odoo.\_domainkey.mycompany.com</span> whose
canonical name is
<span class="title-ref">odoo.\_domainkey.odoo.com.</span>.

</div>

How to create or modify a CNAME record depends on the provider hosting
the DNS zone of your domain name. The most common providers are list
below.

You can check if your DKIM record is valid with a free tool like [DKIM
Core](https://dkimcore.org/tools/). If a selector is asked, enter
<span class="title-ref">odoo</span>.

## Check your DMARC policy

The Domain-based Message Authentication, Reporting & Conformance (DMARC)
is a protocol that unifies SPF and DKIM. The instructions contained in
the DMARC record of a domain name tell the destination server what to do
with an incoming email that fails the SPF and/or DKIM check.

There are three DMARC policies: - `p=none` - `p=quarantine` - `p=reject`

`p=quarantine` and `p=reject` instruct the server that receives an email
to quarantine that email or ignore it if the SPF and/or DKIM check
fails.

If your domain name uses DMARC and has defined one of these policies, it
is therefore imperative to be SPF compliant or to enable DKIM.

<div class="danger">

<div class="title">

Danger

</div>

Yahoo or AOL are examples of email providers with a DMARC policy set to
`p=reject`. We strongly advise against using an *@yahoo.com* or
*@aol.com* address for your users. These emails will never reach their
recipient.

</div>

`p=none` is used for the domain owner to receive reports about entities
using their domain. It should not impact the deliverability if the DMARC
check fails.

You can check the DMARC record of a domain name with a tool like
[MXToolbox DMARC](https://mxtoolbox.com/DMARC.aspx).

If one of your partners, customer or vendor, uses DMARC and has defined
one of these policies, the Odoo server cannot relay emails from this
partner to your users.

You need to `handle user notifications in Odoo
<discuss_app/notification_preferences>`, or replace the email address of
the partner with a default email address.

## SPF, DKIM & DMARC documentation of common providers

  - [OVH
    DNS](https://docs.ovh.com/us/en/domains/web_hosting_how_to_edit_my_dns_zone/)
  - [OVH
    SPF](https://docs.ovh.com/us/en/domains/web_hosting_the_spf_record/)
  - [GoDaddy TXT
    record](https://www.godaddy.com/help/add-a-txt-record-19232)
  - [GoDaddy SPF](https://www.godaddy.com/help/add-an-spf-record-19218)
  - [GoDaddy
    DKIM](https://www.godaddy.com/help/add-a-cname-record-19236)
  - [NameCheap](https://www.namecheap.com/support/knowledgebase/article.aspx/317/2237/how-do-i-add-txtspfdkimdmarc-records-for-my-domain/)
  - [CloudFlare
    DNS](https://support.cloudflare.com/hc/en-us/articles/360019093151)
  - [Google
    Domains](https://support.google.com/domains/answer/3290350?hl=en)
  - [Azure
    DNS](https://docs.microsoft.com/en-us/azure/dns/dns-getstarted-portal)

To fully test your configuration, the tool
[Mail-Tester](https://www.mail-tester.com/) will give you a full
overview of the content and configuration you have in one email sent\!
Mail-Tester can also be used for other lesser known providers.

## Use a default email address

To force the email address from which emails are sent, you need to
create one of these two keys in the System Parameters of the database:

  - If `mail.force.smtp.from` is set, all outgoing emails are sent from
    the given address. This is a requirement to use [Outlook with
    Odoo](https://docs.microsoft.com/en-us/exchange/mail-flow-best-practices/how-to-set-up-a-multifunction-device-or-application-to-send-email-using-microsoft-365-or-office-365#option-1-authenticate-your-device-or-application-directly-with-a-microsoft-365-or-office-365-mailbox-and-send-mail-using-smtp-auth-client-submission).
  - If `mail.dynamic.smtp.from` is set, the from email address is
    replaced by the given one if the domain does not match the domain
    set in <span class="title-ref">mail.catchall.domain</span>.

You access the **System Parameters** in `developer mode
<developer-mode>` in the `Settings -->
Technical --> Parameters --> System Parameters` menu.


---
## File: ./content/applications/general/email_communication/email_template.md

# Email Templates

We all know writing good emails is vital to get a high response rate,
but you do not want to rewrite the same structure every time, do you?
That is where email templates come in. Without the need to rewrite the
entire email structure every time, you save time to focus on the
content. Multiple templates also let you deliver the right message to
the right audience, improving their overall experience with the company.

## Enable it and understand a few concepts

The `Developer mode <developer-mode>` must be activated). Then, go to
`Settings --> Technical --> Templates`. A view of the existing templates
is shown.

<div class="danger">

<div class="title">

Danger

</div>

It is highly recommended not to change the content in existing templates
unless the user has prior knowledge about placeholders.

</div>

To add a new one, click on *Create* and choose the type of document this
template is used with. In the example below, the template would be sent
to job applicants.

![New email template form in
Odoo](email_template/new-template-creation.png)

Under *Email Configuration*, fields such as *From*, *To (Emails)*, *To
(Partners)*, require placeholders. If the *From* field is not set, the
default value is the author’s email alias, if configured, or email
address.  
Under *Advanced Settings*, if an *Outgoing Mail Server* is not set, the
one with the highest priority is used.  
The option *Auto Delete* permanently deletes the emails after they are
sent, saving space in your database.

### Writing content including placeholder expressions

A placeholder is a string of characters that temporarily takes the place
of the final data. With email templates, for example, placeholders let
you put dynamic content in order to personalize the email for the
recipient.

A common use is to use it to indicate the name of the recipient in the
newsletter so that each recipient gets a personalized newsletter.

Placeholders and more specifically fields that are available for a
template will depend on the template you modify. One way to see the
fields that are available is to check the Dynamic Placeholder Generator
tab.

<div id="email_communication/dynamic_placeholder_generator">

1.  Under the tab *Dynamic Placeholder Generator*, look for the *Field*
    you would like to use.
    
    ![View of the dynamic placeholder generator tab under a new template
    in Odoo](email_template/placeholders.png)

2.  Next, copy the *Placeholder Expression* and paste it in the *Body*
    of the email, under the *Content* tab, using - essentially - the
    *Code View*.
    
    ![View of the body code view under the content tab in
    Odoo](email_template/codeview.png)

3.  Deactivate the *Code View* option by simply clicking on it again,
    and easily design the message. Click on *Preview* to check how the
    email looks before sending it.
    
    ![View of the content with the standard body view in
    Odoo](email_template/preview.png)

</div>

### Using functions with placeholders

Functions can be used along with your placeholders in order to format
the data as you'd like within your mail templates, for example, the time
format can be changed using a function such as `format_time`.

In order to use functions, you have to know the available fields to
format. To know that, you have to check the fields (the properties) of
the object that are available to be used.

#### Checking the fields (properties) available on the object

To check the **fields available**, click on the link next to Applies to.
For the example we use the Portal: new user template, so we click on
Portal user Config.

![Template is capable of using the field of the defined
Models.](email_template/apply-to-model.png)

By clicking on the link, you are redirected to the model, in this case
the `Portal user Config` model that lists all the fields that you can
use within your mail template.

![Existing fields of a model](email_template/fields-of-model.png)

As a side note, you can also see the fields that are available by
accessing the dynamic placeholder generator, as described `previously
<email_communication/dynamic_placeholder_generator>`.

See below an example with the email field that was added in the template
and its result as well as some other placeholders already present by
default.

![Adding a field on a template and see the
result](email_template/field-and-rendering.png)

#### Using fields with functions

Now that you know the *fields* that can be used, you can use one of them
with a function. For this example, we add the creation date,
*create\_date* field to the body of the template ‘Portal: new user’
along with the `format_date` function so that the user knows when he was
invited.

![Example of the format\_date on a create\_date
field](email_template/format-date-functions-example.png)

As you can see we use the placeholder <span class="title-ref">${}</span>
with the `format_date` function which uses as a parameter the field
create\_date available on the current object, this gives the following
line of code `${format_date(object.create_date)}`.

<div class="warning">

<div class="title">

Warning

</div>

It's really important to check that the preview is working, if it's
broken your template might appear totally blank when previewing it. We
also recommend not changing the content in existing templates unless you
have prior knowledge. We highly recommend duplicating the template and
apply your changes within this one.

</div>

Find below the result of the e-mail received in the recipient's mailbox
with the modifications applied.

![Rendering of the format\_date function on a create\_date
field](email_template/rendering-format-date-function.png)

Still by using the `format_date` function, you have the possibility to
adapt the format of the date just in a specific email by specifying the
formatting of the date as a second parameter. If not specified, the
format used by default is the one defined in the settings of the
language. More information on how to access these parameters can be
found `here <email_communication/usable_functions>`.

In order to adapt the date format, the piece of code used in the above
example `${format_date(object.create_date)}` becomes
`${format_date(object.create_date, date_format='dd -- MM -- YYYY')}`
here dd is the day, MM the month and YYYY the year.

Here is the result once the function is adapted in the template.

![Adapted rendering of the
format\_date](email_template/adapted-rendering-format-date-function.png)

##### Functions used by default within email templates

To format your data, many functions can be used, here are some examples.

<div class="note">

<div class="title">

Note

</div>

**This list of functions is not exhaustive**, meaning that all functions
that are available aren't listed in the below list, for more functions,
we invite you to check the
[babel](http://babel.pocoo.org/en/latest/api/dates.html) documentation,
last but not least, modifications on the templates are considered as
customization and isn’t covered by our support.

</div>

For the following examples, we will introduce mostly some date
functions. By default, the format of the date used is the one defined in
the settings of the language.

These settings can only be accessed when the `developer mode
<developer-mode>` is enabled. Once developer is enabled go to `Settings
--> Translations --> Languages` and click on one of the languages to see
all the settings such as the time format or date format used by the
language.

  - **format\_date()** - formats the date (without the time).
    
    Can be found on the template \`Purchase Order: Send PO\`:
    
    ![Code of the format\_date on existing template
    Purchase](email_template/po-template-format-date.png)
    
    The result will look like this:
    
    ![Rendering of the format\_date on existing template
    Purchase](email_template/po-template-format-date-rendering.png)

  - **format\_datetime()** - formats the datetime, defining a specific
    timezone, in this case Central European Time (CET).
    
    Can be found on the template <span class="title-ref">Event:
    Registration</span>.
    
    ![Code of the format\_datetime on existing template
    Event](email_template/event-reg-template-format-datetime.png)
    
    The result will look like this:
    
    ![Rendering of the format\_datetime on existing template
    Event](email_template/event-reg-template-format-datetime-rendering.png)

  - **format\_time()** - Similar to the format\_datetime function except
    It's used only for the time, not a date.

  - **format\_amount()** - Formats a number, an amount to display the
    currency depending on the display setting that has been defined on
    the currency (the `debug mode <developer-mode>` must be activated to
    see this feature) `Accounting --> Configuration --> Currencies`
    (before or after the amount depending on the convention).
    
    ![Code of the format\_amount on existing template Sales
    Order](email_template/so-template-format-amount.png)
    
    Which will look like this:
    
    ![Rendering of the format\_amount on existing template Sales
    Order](email_template/so-template-format-amount-rendering.png)

#### Defining a default reply to on your mail template

Although the field *reply to* is available within the mail templates,
**this field is only used for mass mailing** mode (this means when
sending templates on what we call bulk emailing). You can send emails in
bulk in almost every app that has a list view. Select the records you
want and click on the action button. If you have an option to send an
email, you will see a mail composer with possible values to define:

![Composer in mass mailing mode after selecting multiple
quotations.](email_template/composer-mass-mailing-quotations.png)

You can also define them by default on the template:

![Reply-to field on
template.](email_template/reply-to-template-sales.png)

Because of this, setting a value in this field is useless as the value
defined will be totally ignored. The default *reply-to* value is the
default catchall email address to ensure a communication between your
customer and your Odoo database. For more information about the way the
catchall works, please check `how to manage inbound messages
<email_communication/inbound_messages>`.

#### Transactional emails and corresponding URL for each company

When using Odoo, multiple events trigger the sending of automated
emails. These emails are known as transactional emails and sometimes
contain links pointing to your Odoo database.

By default, links generated by the database use the dynamic web.base.url
key defined in the system parameters. More information about this
`parameter <domain-name/web-base-url>`.

If the website application isn't installed, the web.base.url key will
always be the default parameter used to generate all the links.

It’s important to know that this key can only have a single value,
meaning that in a multi-website/company database environment, even if
you have a specific domain name for each website, the links generated to
share a document or within a transactional email might remain the same,
whatever the website/company related to the sending of the
email/document.

This is not always the case as some Odoo applications have a link
established in the database with the website application, meaning that
in this case, if a specific domain is defined for the websites, the URL
generated in the email template will use the domain defined on the
corresponding website of the company.

<div class="caution">

<div class="title">

Caution

</div>

A document shared using the documents application will always use the
web.base.url key, as the document shared isn't associated with any
particular website. Meaning that the URL will always be the same (the
web.base.url key value), whatever the company it's shared from, this is
a known limitation\!

</div>

On the other hand, sales orders made by a customer on one of your Odoo
e-commerce websites have a link established with the website from which
the order was made. As a result, the e-mail sent for the sales orders
uses the domain name defined for the corresponding website to generate
the links.

For more information about how to configure your domains, we invite you
to check `our domain name
documentation </administration/maintain/domain_names>`.

##### Updating translations within email templates

Email templates are automatically translated. Changing the translations
shouldn’t be necessary. However, if for a specific reason you’d like to
change some of the translations, this can be done.

Like any modification in the code, keep in mind that modifications that
aren’t done correctly (for example modifications leading to bad syntax)
can break the template, as a result, the template will appear blank.

In order to edit your translations, follow these steps from the
template.

1.  Click on the edit button, then on the language button
    
    ![Edit the language of a
    template](email_template/edit-language-template.png)

2.  A pop-up window with the different languages installed on the
    database will be displayed. From here, editing the translations will
    be possible. Don't forget to hit the save button to preserve your
    changes.
    
    ![Translation of the body of the Application template in the
    different languages installed.](email_template/translation-body.png)


---
## File: ./content/applications/general/email_communication/email_servers.md

# Send and receive emails in Odoo with an email server

## Odoo Online or Odoo.sh users

Since **Odoo sets up its own mail servers for the database**, outgoing
and incoming emails already work out-of-the-box. So for **Odoo Online**
and **Odoo.sh** customers, nothing needs to be done\!

Unless an external mail server is required to send large batches of mass
mailing, simply use the standard online Odoo database normally since it
has already been preconfigured for email.

## Scope of this documentation

This document is **mainly dedicated to Odoo on-premise users** who don't
benefit from an out-of-the-box solution to send and receive emails in
Odoo, unlike [Odoo Online \<https://www.odoo. com/trial\>]() and
[Odoo.sh](https://www.odoo.sh).

The following sections below contain information on how to integrate an
external email server with Odoo.

<div class="warning">

<div class="title">

Warning

</div>

If no one in the company is used to managing email servers, Odoo Online
and Odoo.sh are strongly recommended. Those Odoo hosting types' email
systems work instantly and are monitored by professionals. Nevertheless,
a company can use their own email server if they want to manage the
email server's reputation themselves.

</div>

<div class="note">

<div class="title">

Note

</div>

Office 365 email servers don't easily allow the sending of external
emails from hosts like Odoo. Refer to [Microsoft's documentation
\<https://support.office.com/en-us/article/How-to-set-up-a-
multifunction-device-or-application-to-send-email-using-Office-365-69f58e99-c550-4274-ad18-
c805d654b4c4\>]() to make it work.

</div>

## Manage outbound messages

As a system admin, go to `Settings --> General Settings --> Discuss` in
Odoo, and enable the `External Email Servers` option. Then, click
`Save`. Next, click `Outgoing Email Servers` and click `Create` to
create a new outgoing mail server record in Odoo. Reference the SMTP
data of the external email server. Once all the information has been
filled out, click `Test Connection`.

Here is a typical configuration for a G Suite server.

![The typical G Suite configuration on
Odoo.](email_servers/outgoing-server.png)

Then, go back to `Settings --> General Settings --> Discuss` and set the
email domain name in the `Alias Domain` name. Finally, click `Save` to
finish setting up the email server.

<div class="note">

<div class="title">

Note

</div>

If an <span class="title-ref">\[AUTHENTICATION FAILED\] Invalid
credentials (Failure)</span> warning appears when `Test Connection` is
clicked for a Gmail address, activate the `Less secure
app access` option. A direct link can be [accessed here
\<https://myaccount.google.com/ lesssecureapps?pli=1\>]().

In addition to that, enable the `IMAP setting` on the Gmail account.

</div>

### Use an Office 365 server

An Office 365 server can be used if the database's hosting type is
**Odoo on-premise**. Office 365 SMTP relays are not compatible with Odoo
Online or Odoo.sh unless Odoo is configured to `force the outgoing
"From" address <email_communication/default_from>`.

Please refer to [Microsoft's documentation
\<https://support.office.com/en-us/article/How-to-set-up-
a-multifunction-device-or-application-to-send-email-using-Office-365-69f58e99-c550-4274-ad18-
c805d654b4c4\>]() to configure an SMTP relay for the Odoo database's IP
address.

### Use a G Suite server

A G Suite server can be used for any Odoo hosting type. To do so, set up
the SMTP relay service. The configuration steps are explained in
<span class="title-ref">Google documentation
\<https://support.google.com /a/answer/2956491?hl=en\></span>\_\_.

### Restriction

Please note that port 25 is blocked for security reasons on Odoo Online
and Odoo.sh platforms. Try using ports 465, 587, or 2525 instead.

### Use a default "From" email address

Sometimes, an email's "From" (outgoing) address can belong to a
different domain, and that can be a problem.

For example, if a customer with the email address
*mary@customer.example.com* responds to a message, Odoo will try to
redistribute that same email to the other subscribers in the thread.
However, if the domain *customer.example.com* forbids that kind of usage
for security, the email that Odoo is trying to redistribute would get
rejected by some recipients' email servers.

To avoid that problem, make sure all emails use a "From" address from
the same authorized domain.

If the MTA supports [SRS (Sender Rewriting Scheme)
\<https://en.wikipedia.org/wiki/Sender\_Rewriting \_Scheme\>](), SRS can
be enabled to handle these situations. However, that is more complex and
requires more technical knowledge that is not meant to be covered by
this documentation.

Instead, Odoo can be configured to do something similar by itself:

1.  Set the `Alias Domain` name in the `Settings --> General Settings
    --> Discuss`.
    
    ![Setting the domain alias configuration on
    Odoo.](email_servers/alias-domain.png)

2.  Turn on `developer mode </applications/general/developer_mode>`.

3.  Go to `Settings --> Technical --> Parameters --> System Parameters`.

4.  Add one system parameter from the following list:
    
      - To use the same "From" address for *all* outgoing messages, use
        the key <span class="title-ref">mail.force.smtp.from</span> and
        set that address as value (such as
        <span class="title-ref">outgoing@mycompany.example.com</span>).
      - To keep the original "From" address for emails that use the same
        domain, but change it for emails that use a different domain,
        use the key
        <span class="title-ref">mail.dynamic.smtp.from</span> and set
        the value as the email address that should be used in those
        cases (such as
        <span class="title-ref">outgoing@mycompany.example.com</span> ).

## Manage inbound messages

Odoo relies on generic email aliases to fetch incoming messages.

  - **Reply messages** of messages sent from Odoo are routed to their
    original discussion thread (and to the inbox of all its followers)
    by the catchall alias (**catchall@**).
  - **Bounced messages** are routed to **bounce@** in order to track
    them in Odoo. This is especially used in [Odoo Email
    Marketing](https://www.odoo.com/page/email-marketing) to opt-out
    invalid recipients.
  - **Original messages**: Several business objects have their own alias
    to create new records in Odoo from incoming emails:
      - Sales Channel (to create Leads or Opportunities in [Odoo
        CRM](https://www.odoo.com/page/crm)),
      - Support Channel (to create Tickets in [Odoo
        Helpdesk](https://www.odoo.com/page/helpdesk)),
      - Projects (to create new Tasks in <span class="title-ref">Odoo
        Project \<https://www.odoo.com/page
        /project-management\></span>\_\_),
      - Job Positions (to create Applicants in
        <span class="title-ref">Odoo Recruitment
        \<https://www.odoo.com/page /recruitment\></span>\_\_),
      - etc.

Depending on the mail server, there might be several methods to fetch
emails. The easiest and most recommended method is to manage one email
address per Odoo alias in the mail server.

  - Create the corresponding email addresses in the mail server
    (catchall@, bounce@, sales@, etc.).

  - Set the `Alias Domain` name in `Settings --> General Settings -->
    Discuss`.

  - If the database's hosting type is Odoo on-premise, create an
    `Incoming Mail Server` in Odoo for each alias. This can be done from
    the General Settings as well. Fill out the form according to the
    email provider's settings. Leave the `Actions to Perform on Incoming
    Mails` field blank. Once all the information has been filled out,
    click on `TEST &
    CONFIRM`.
    
    ![Incoming mail server configuration on
    Odoo.](email_servers/incoming-server.png)

  - If the database's hosting type is Odoo Online or Odoo.sh,
    redirecting incoming messages to Odoo's domain name instead of the
    external email server is recommended. That way, incoming messages
    can be received without delay. Odoo Online only fetches incoming
    messages of external servers once every hour. Redirections for all
    email addresses should be set to Odoo's domain name in the email
    server (e.g. *catchall@mydomain.ext* to
    *catchall@mycompany.odoo.com*).

All the aliases are customizable in Odoo. Object aliases can be edited
from their respective configuration view.

<div class="tip">

<div class="title">

Tip

</div>

To edit catchall and bounce aliases, first activate the `developer mode
<developer-mode>`. Then, go to `Settings --> Technical --> Parameters
--> System Parameters` to customize the aliases (*mail.catchall.alias* &
*mail.bounce.alias*).

![System parameters with catchall configuration in
Odoo.](email_servers/system-parameters.png)

</div>

By default, inbound messages are fetched every 5 minutes in Odoo
on-premise.

<div class="note">

<div class="title">

Note

</div>

This value can be changed in `developer mode <developer-mode>`. Go to
`Settings --> Technical --> Automation --> Scheduled Actions` and look
for `Mail: Fetchmail Service`.

</div>

## Set up different dedicated servers for transactional and mass mails

In Odoo a separate Mail Transfer Agent (MTA) server can be used for
transactional emails and mass mailings. Example: Use Postmark or
SendinBlue for transactional emails, and Amazon SES, Mailgun or Sendgrid
for mass mailings.

<div class="tip">

<div class="title">

Tip

</div>

A default outgoing email server is already configured. Do not create an
alternative one unless a specific external outgoing email server is
needed for technical reasons.

</div>

To do this, first activate the `developer mode <developer-mode>`, and
then go to `Settings --> Technical --> Outgoing` email servers. There,
create two email MTA server settings; one for the transactional emails
and one for the mass mailing server. Make sure to give priority to the
transactional server over the mass mailing server by providing a lower
priority number for the transactional MTA server.

Now, go to `Email Marketing --> Settings` and enable `Dedicated Server`.
With these settings, Odoo uses the server with the lower priority for
transactional emails, and the server here selected for mass mails. Note
that in this case, the domain's Sender Policy Framework (SPF) records
must be set to include both transactional and mass mail servers.


---
## File: ./content/applications/general/email_communication/faq.md

# FAQ

This document contains an explanation of the most recurring mailing
concerns.

We will start by addressing issues of outgoing emails (ex: my client has
not received my email), and then, of incoming emails (ex: I do not
receive responses from my customers in the database).

## Outgoing emails

### What do you have to check if your email is not sent?

The first indicator showing you that the email has not been sent is the
red envelope next to the date and time of the message.

![Red envelope displayed in chatter](faq/red-envelop.png)

#### Common error messages

##### You reached your daily limit:

![Warning in Odoo upon email limit reached](faq/email-limit.png)

Each email service provider has its own email sending limits. The limits
may be daily, hourly, and sometimes even per minute. This is the same
for Odoo, we have to limit our customers to prevent our e-mail servers
from being blacklisted.

Here are the default limits for new databases:

  - 200 emails/day for Odoo Online and Odoo.sh databases with an active
    subscription,
  - 20 emails/day for one-app free databases,
  - 50 emails/day for trial databases,
  - in case of migration, your daily limit might be reset to 50 emails a
    day.

In case you hit the limit, you can:

  - Ask our support team to increase your daily limit. We will analyze
    the situation of your database depending on (non-exhaustive list):
      - How many users in your database,
      - Which apps are installed,
      - Your bounce rate: the percentage of email addresses that did not
        receive your emails because it was returned by a mail server on
        its way to the final recipient. You can contact the
        [support](https://www.odoo.com/help).
  - Use your own outgoing email server to be independent of Odoo’s mail
    limit (please refer to `the corresponding documentation
    </applications/general/email_communication/email_servers>`),
  - Wait until 11pm UTC for the reset and click on the retry button: The
    `Developer mode <developer-mode>` must be activated. Then, go to
    `Settings --> Technical --> Emails`

![Retry button of an emails](faq/email-retry-technical.png)

<div class="warning">

<div class="title">

Warning

</div>

The daily limit is global to your database and can rise quickly\! By
default an internal message, a notification, a note, etc. counts as an
email in your daily limit if it notifies someone.

</div>

You can mitigate this by receiving your `notifications in Odoo
<discuss_app/notification_preferences>` instead of by emails.

##### SMTP Error

You can find out why an email wasn't transmitted successfully by
reviewing the Simple Mail Transport Protocol (SMTP) error messages. SMTP
is a protocol to describe the email structure and transmit it over the
Internet, and the error messages generated by email services are helpful
tools to diagnose and troubleshoot email problems.

##### No Error

Odoo is not always capable of providing information for the reason it
failed. The different providers implement a personalized policy of the
bounce emails and it is not always possible for Odoo to interpret it
correctly.

If you have this problem on a recurring basis with the same client or
the same domain, please do not hesitate to contact [Odoo
Support](https://www.odoo.com/help) for help in finding a reason.

Note: in such case, one of the most common reasons is related to `SPF
<email_communication/spf_compliant>` and/or `DKIM
<email_communication/DKIM_compliant>` configuration.

##### Why is my email sent late?

It may happen that you schedule an email campaign but it is not sent on
time. We know that we use a delayed job to send emails that we consider
as not urgent (Newsletters concept such as mass mailing, marketing
automation, events). The system utility **cron** can be used to schedule
programs to run automatically at predetermined intervals. We use that
policy in order to avoid cluttering the mail servers and prioritize the
communication.

The emails considered urgent (communication from one person to another
one such as Sales Orders, Invoices, Purchase Orders, etc.) are sent
directly.

![Email scheduled to be sent later.](faq/email-scheduled-later.png)

By default, the Mass Mailing cron runs every 60 minutes. So, you should
wait maximum an hour before the campaign is actually sent.

## Incoming emails

When you have an issue with incoming emails, there might not be an
indication per se in Odoo. This is the client who tries to contact a
database who will get a bounce (most of the time 550: mailbox
unavailable).

### Emails are not received

Depending on the platform you are using:

  - The **Odoo.sh** users can find their live logs on the folder
    `~/logs/`.
  - The folder `~/logs/` (preferably accessed by the command line) of an
    Odoo.sh contains a list of files containing the logs of the
    database. The log files are created everyday at 5:00 AM UTC. The two
    last days are not compressed, while the older ones are, in order to
    gain space. The naming of the files for Today and Yesterday are
    `odoo.log` and `odoo.log.1`. For the following, they are named with
    their dates and compressed. See the Odoo.sh documentation about
    `logs <odoosh/logs>`. Use the command `grep` and `zgrep` (for the
    compressed ones) to search through the files.
  - **Odoo Online** users won’t have access to their logs. However you
    can still contact [Odoo Support](https://www.odoo.com/help) , if you
    have a recurring issue with the same client or domain.

### Get help from support

In order to get helped efficiently, please provide as much information
as possible. Here is a list of what can be helpful:

  - The **EML** of the email, stating for *Electronic Mail*, is the file
    format containing all the technical information required for an
    investigation. The documentation of your own email provider might
    help you on how to get your EML files. Once you get the EML of the
    email, adding it in the attachment of your ticket is the most
    efficient way for us to investigate. The support will mainly focus
    on redundant issues.
    
    <div class="seealso">
    
    \- [Gmail
    documentation](https://support.google.com/mail/answer/29436)
    
    \- [Outlook
    documentation](https://support.microsoft.com/en-us/office/view-internet-message-headers-in-outlook-cd039382-dc6e-4264-ac74-c048563d212c#tab=Web)
    
    </div>

  - The exact flow you are following in order to normally receive those
    emails in Odoo. Here are examples of questions whose answers can be
    useful:
    
      - Is this simply a reply from an email going out from Odoo ?
      - Are you using an incoming email server or somehow redirecting?
      - Can you provide us with an example of an email that has been
        correctly forwarded ?

  - Providing answers to the following questions:
    
      - Is it a generic issue or is it specific to a use case? If yes,
        which one exactly?
      - Is it working as expected? In case the email is sent using Odoo,
        the bounce email should reach the Odoo database and display the
        `red envelope <red_envelop>`.


---
## File: ./content/applications/general/voip.md

  - nosearch

# VoIP (Voice over Internet Protocol)

<div class="toctree" data-titlesonly="">

voip/asterisk voip/onsip voip/axivox

</div>


---
## File: ./content/applications/general/users.md

  - nosearch

# Users and companies

Odoo defines a *user* as someone who has access to a database to perform
daily tasks. You can add as many users as you need and, in order to
restrict the type of information each user can access, rules can be
applied. Users and access rights can be added and changed at any point.

<div class="toctree" data-titlesonly="">

users/manage\_users users/language users/access\_rights users/companies
users/portal users/odoo\_account

</div>


---
## File: ./content/applications/general/developer_mode.md

# Developer Mode (debug mode)

The developer mode (or debug mode) unlocks access to extra and advanced
tools in Odoo. There are several ways to activate the developer mode:
through the `settings <general/developer_mode/settings>`, the `browser
extension <general/developer_mode/browser-extension>`, through the
`command palette <general/developer_mode/command-palette>` or the `URL
<general/developer_mode/url>`.

## Activate through the Settings

The debug mode can be activated in the Odoo database settings. Go to
`Settings -->
General Settings --> Developer Tools` and click on `Activate the
developer mode`. At least one application needs to be installed for the
`Developer Tools` section to appear in the `Settings` module.

![Overview of the debug options under settings in
Odoo.](developer_mode/settings.png)

<div class="note">

<div class="title">

Note

</div>

`Activate the developer mode (with assets)` is used by developers;
`Activate
the developer mode (with tests assets)` is used by developers and
testers.

</div>

Once activated, the `Deactivate the developer mode` option becomes
available.

## Activate through the browser extension

Within a web browser, navigate to the browser settings and extensions
and search for the <span class="title-ref">Odoo Debug</span> extension.
Once the extension is installed, a new icon will be shown on the
browser's toolbar.

For the *Odoo Debug* extension, a single click enables a normal version
of the mode, while a double click enables it with assets. To deactivate
it, use a single click.

![View of Odoo's debug icon in a Google Chrome
toolbar.](developer_mode/developer-mode-monkey.png)

## Activate through the command palette

In Odoo, the command palette tool has a command to activate the debug
mode. First, open the command palette tool with the keyboard shortcut
<span class="title-ref">ctrl+k</span> and then type
<span class="title-ref">debug</span>. A command will show up to activate
the debug mode.

![Command palette with debug
command.](developer_mode/command-palette.png)

## Activate through the URL

The debug mode can also be activated by adding an extra query string to
the database's URL. In the URL, add
<span class="title-ref">?debug=1</span> or
<span class="title-ref">?debug=true</span> after
<span class="title-ref">/web</span>. To deactivate the debug mode,
change the value to <span class="title-ref">?debug=0</span> instead.

![Overview of a URL with the debug mode command
added.](developer_mode/url.png)

<div class="tip">

<div class="title">

Tip

</div>

Additional modes are available for developers:
<span class="title-ref">?debug=assets</span> enables the assets mode,
and <span class="title-ref">?debug=tests</span> enables the tests mode.

</div>

## Locate the developer mode tools

Once developer mode is activated, the developer mode tools can be
accessed from the `Open
Developer Tools` button, the bug icon located in the header of the Odoo
database.

![Overview of a console page and the debug icon being shown in
Odoo.](developer_mode/button-location.png)

This menu contains additional tools that are useful to understand or
edit technical data, such as the views or actions of a page. On a page
that has filters, actions, and view options, the developer mode tools
contain some useful menu items such as:

  - `Edit Action`
  - `Manage Filters`
  - Edit the current view (e.g. Kanban, List, Graph, etc.)
  - See the `Fields View Get`


---
## File: ./content/applications/general/auth.md

  - nosearch

# Authentication

<div class="toctree" data-titlesonly="">

auth/google auth/azure auth/ldap auth/2fa

</div>


---
## File: ./content/applications/general/users/language.md

# Change language

Odoo provides you with the option to manage Odoo in different languages,
and each user can use Odoo in his own language .

## Load your desired language

The first thing to do is to load your desired language on your Odoo
instance.

From the general dashboard click on the **Settings** app; on the top
left of the page select `Translations --> Load a Translation`, select a
language to install and click on **LOAD.**

![image](language/choose_language01.png)

<div class="note">

<div class="title">

Note

</div>

If you check the "Websites to translate" checkbox you will have the
option to change the navigation language on your website.

</div>

## Change your language

You can change the language to the installed language by going to the
drop-down menu at the top right side of the screen, choose
**Preferences**.

![image](language/choose_language02.png)

Then change the Language setting to your installed language and click
**SAVE.**

![image](language/choose_language03.png)

Open a new menu to view the changes.

## Change another user's language

Odoo also gives you the possibility for each user to choose his
preferred language.

To change the language for a different user, choose `Users --> Users`
from the Settings app. Here you have a list of all users and you can
choose the user who you'd like to change the language for. Select the
user and click on **Edit** in the top left corner. Under Preferences you
can change the Language to any previously installed language and click
**SAVE.**

![image](language/choose_language04.png)

<div class="seealso">

\* `../../websites/website/configuration/translate`

</div>


---
## File: ./content/applications/general/users/manage_users.md

# Manage users

Odoo defines a **user** as someone who has access to a database to
perform daily tasks. You can add as many users as you need and, in order
to restrict the type of information each user can access, rules can be
applied. Users and access rights can be added and changed at any point.

<div class="seealso">

\- `language` - `access_rights`

</div>

## Add individual users

Go to `Settings --> Manage Users` and click on *Create*.

![View of the settings page emphasizing the manage users field in
Odoo](manage_users/manage-users.png)

Fill in the form with the needed information. Under the tab `Access
Rights <access_rights>` choose the group within each application the
user can have access to.  
The list of applications shown is based on the applications installed on
the database.

![View of a user’s form emphasizing the access rights tab in
Odoo](manage_users/new_user.png)

When you are done editing the page and have *Saved* it, an invitation
email is automatically sent to the user. The user must click on it to
accept the invitation and create a login.

![View of a user’s form with a notification that the invitation email
has been sent in Odoo](manage_users/invitation-email.png)

<div class="note">

<div class="title">

Note

</div>

Remember that subscription prices follow the number of users. Refer to
our [pricing page](https://www.odoo.com/pricing) for more information.

</div>

With the `developer mode <developer-mode>` activated, *User Types* can
be selected.

![View of a user’s form in developer mode emphasizing the user type
field in Odoo](manage_users/user-type.png)

The *Portal* and *Public* options do not allow you to choose access
rights. Members have specific ones (such as record rules and restricted
menus) and usually do not belong to the usual Odoo groups.

## Deactivate users

Go to `Settings --> Users & Companies --> Users`, open the user you want
to deactivate, click on *Action*, and then on *Archive*.

<div class="danger">

<div class="title">

Danger

</div>

**Never** deactivate the main user (*admin*).

</div>

## Passwords management

### Reset passwords

#### Enable password resets from login page

It is possible to enable password resets directly from the login page.

To do so, go to `Settings --> Permissions`, activate **Password Reset**
and *Save*.

![Enabling Password Reset in Odoo
Settings](manage_users/password-reset-login.png)

#### Send reset instructions to users

Go to `Settings --> Users & Companies --> Users`, select the user out of
the list and click on *Send Password Reset Instructions* on its user
form. An email is automatically sent to them.

<div class="note">

<div class="title">

Note

</div>

The *Send Password Reset Instructions* button only appears if the Odoo
invitation email has already been confirmed by the user.

</div>

This email contains all the instructions needed to reset the password,
along with a link redirecting the user to an Odoo login page.

![Example of an email with a password reset link for an Odoo
account](manage_users/password-email.png)

### Change users’ passwords

Go to `Settings --> Users & Companies --> Users` and select a user to
access its form. Click on the *Action* button and select *Change
Password*.

![Change another user's password on
Odoo](manage_users/change-password.png)

Enter a new password and confirm by clicking on *Change Password*.

<div class="note">

<div class="title">

Note

</div>

This operation only modifies the password of the users locally and does
not affect their odoo.com account. If you want to change the odoo.com
password, you can `send the password reset
instructions <users/reset-password-email>`.

</div>

Click on *Change Password* one more time. You are then redirected to an
Odoo login page where you can reaccess your database using your new
password.

## Multi Companies

The *Multi Companies* field allows you to set to which of the multiple
companies database you hold the user can have access.

<div class="note">

<div class="title">

Note

</div>

Note that if not handled correctly, it may be the source of a lot of
inconsistent multi-company behaviors. Therefore, a good knowledge of
Odoo is required. For technical explanations refer to `this
</developer/howtos/company>` documentation.

</div>

![View of a user’s form emphasizing the multi companies field in
Odoo](manage_users/multi-companies.png)

<div class="seealso">

\- `companies`

</div>


---
## File: ./content/applications/general/users/companies.md

# Companies

A centralized management environment allows you to select multiple
companies simultaneously and set their specific warehouses, customers,
equipment, and contacts. It provides you the ability to generate reports
of aggregated figures without switching interfaces, which facilitates
daily tasks and the overall management process.

## Manage companies and records

Go to `Settings --> Manage Companies` and fill in the form with your
company’s information. If a *Parent Company* is selected, records are
shared between the two companies (as long as both environments are
active).

![Overview of a new company's form in
Odoo](companies/create_js_store_us.png)

<div class="tip">

<div class="title">

Tip

</div>

Activate the `developer mode <developer-mode>` to choose a *Favicon* for
each of your companies, and easily identify them by the browser tabs.
Set your favicons’ files size to 16x16 or 32x32 pixels. JPG, PNG, GIF,
and ICO are extensions accepted.

![View of a web browser and the favicon for a specific company chosen in
Odoo](companies/favicon.png)

</div>

Switch between or select multiple companies by enabling their selection
boxes to activate them. The grayed company is the one which environment
is in use. To switch environments, click on the company’s name. In the
example below, the user has access to three companies, two are
activated, and the environment in use is of *JS Store US*.

![View of the companies menu through the main dashboard in
Odoo](companies/multi_companies_menu_dashboard.png)

Data such as Products, Contacts, and Equipment can be shared or set to
be shown for a specific company only. To do so, on their forms, choose
between:

  - *A blank field*: the record is shared within all companies.
  - *Adding a company*: the record is visible to users logged in to that
    specific company.

![View of a product's form emphasizing the company field in Odoo
Sales](companies/product_form_company.png)

## Employees' access

Once companies are created, manage your employees' `Access Rights
<access_rights>` for *Multi Companies*.

![View of an user form emphasizing the multi companies field under the
access rights tabs&#10;in
Odoo](companies/access_rights_multi_companies.png)

If a user has multiple companies *activated* on his database, and he is
**editing** a record, the editing happens on the record's related
company.  
Example: if editing a sale order issued under JS Store US while working
on the JS Store Belgium environment, the changes are applied under JS
Store US (the company from which the sale order was issued).  
When **creating** a record, the company taken into account is:

  - The current company (the one active) or,
  - No company is set (on products and contacts’ forms for example) or,
  - The company set is the one linked to the document (the same as if a
    record is being edited).

## Documents’ format

To set documents' formats according to each company, *activate* and
*select* the respective one and, under *Settings*, click on *Configure
Document Layout*.

![View of the settings page emphasizing the document layout field in
Odoo](companies/document_layout.png)

## Inter-Company Transactions

First, make sure each one of your companies is properly set in relation
to:

  - `Chart of Accounts
    <../../finance/accounting/getting_started/initial_configuration/chart_of_accounts>`
  - `Taxes <../../finance/accounting/taxation/taxes/default_taxes>`
  - `Fiscal Positions
    <../../finance/accounting/taxation/taxes/fiscal_positions>`
  - `Journals <../../finance/accounting/bank/setup/bank_accounts>`
  - `Fiscal Localizations <../../finance/fiscal_localizations>`
  - `Pricelists <../../sales/sales/products_prices/prices/pricing>`

Now, activate the *Inter-Company Transactions* option under *Settings*.
With the respective company *activated* and *selected*, choose if you
would like operations between companies to be synchronized at an
invoice/bills level or at a sales/purchase orders level.

![View of the settings page emphasizing the inter company transaction
field in Odoo](companies/inter_company_transactions.png)

  - **Synchronize invoice/bills**: generates a bill/invoice when a
    company confirms a bill/invoice for the selected company.
    
    *Example:* an invoice posted on JS Store Belgium, for JS Store US,
    automatically creates a vendor bill on the JS Store US, from the JS
    Store Belgium.

![View of an invoice for JS Store US created on JS Store Belgium in
Odoo](companies/invoice_inter_company.png)

  - **Synchronize sales/purchase order**: generates a drafted
    purchase/sales order using the selected company warehouse when a
    sales/purchase order is confirmed for the selected company. If
    instead of a drafted purchase/sales order you rather have it
    validated, enable *Automatic Validation*.
    
    *Example:* when a sale order for JS Store US is confirmed on JS
    Store Belgium, a purchase order on JS Store Belgium is automatically
    created (and confirmed if the *Automatic Validation* feature was
    enabled).

![View of the purchase created on JS Store US from JS Store Belgium in
Odoo](companies/purchase_order_inter_company.png)

<div class="note">

<div class="title">

Note

</div>

Products have to be configured as *Can be sold* and must be shared
between the companies.

</div>

<div class="tip">

<div class="title">

Tip

</div>

Remember to test all workflows as an user other than the administrator.

</div>

<div class="seealso">

\- `Multi-company Guidelines </developer/howtos/company>` -
`../../finance/accounting/others/multicurrencies/how_it_works`

</div>


---
## File: ./content/applications/general/users/odoo_account.md

# Odoo.com account changes

This documentation is dedicated to edits made to an Odoo.com account.
The following processes describe how to delete an Odoo.com account, and
how to change the password on an Odoo.com account.

## Delete Odoo.com account

To delete an Odoo.com account, start by clicking the profile icon in the
upper-right corner (represented by the username and icon) to reveal a
drop-down menu. From the drop-down menu, select `My Odoo.com account`,
which reveals the user portal.

From the user portal, the delete option can be accessed by going to `My
Account -->
Edit Security Settings --> Delete Account`. It can also be accessed by
going to <https://www.odoo.com/my/home>.

<div class="danger">

<div class="title">

Danger

</div>

Deleting an Odoo account is irreversible. Be careful performing this
action, as the Odoo.com account is **not** retrievable once deleted.

</div>

Upon clicking the `Delete Account` button, a pop-up window appears,
requesting confirmation for the account deletion.

![Clicking on the Delete Account button will populate a window verifying
the change.](odoo_account/delete-account.png)

To confirm the deletion, enter the `Password` and the `Login` for the
account being deleted. Then, click the `Delete Account` button to
confirm the deletion.

## Odoo.com account password change

To change an Odoo.com account password, first login into the Odoo.com
user account from the Odoo.com login page. After logging-in, go to the
upper-right corner of the screen, and click the `▼
(down arrow)` icon next to the profile icon. Then, select `My Account`,
and a portal dashboard appears.

To change the Odoo.com password, click on the `Edit Security Settings`
link, below the `Account Security` section. Next, make the necessary
changes by typing in the current `Password`, `New Password`, and verify
the new password. Lastly, click on `Change Password` to complete the
password change.

<div class="note">

<div class="title">

Note

</div>

If a customer would like to change the login, contact Odoo support
[here](https://www.odoo.com/help).

</div>

<div class="note">

<div class="title">

Note

</div>

Passwords for Odoo.com users and portal users remain separate, even if
the same email address is used.

</div>

## Add two-factor authentication

To add two-factor authentication, login into the Odoo.com user account
from the Odoo.com login page. After logging-in, go to the upper-right
corner of the screen, and click the `▼ (down
arrow)` icon next to the `profile icon`. Then, select `My Account`, and
a portal dashboard appears.

If the user would like to turn on two-factor authentication (2FA) for
Odoo.com access, click on the `Edit Security Settings` link below the
`Account Security` section.

Click on `Enable two-factor authentication` to turn on `2FA (two-factor
authentication)`. Then, confirm the current password in the `Password`
field. Next, click on `Confirm Password`. Following that, activate `2FA
(two-factor authentication)` in a `2FA (two-factor authentication)` app
(Google Authenticator, Authy, etc.), by scanning the `QR code` or
entering a `Verification Code`.

Finally, click on `Enable two-factor authentication` to complete the
setup.

<div class="note">

<div class="title">

Note

</div>

Under `My Account` Odoo.com users can also access the following:

  - `My Partner dashboard`
  - `My In-App Services`
  - `My Apps Dashboard`

</div>


---
## File: ./content/applications/general/users/portal.md

# Portal access

<div id="portal/main">

Portal access is given to users who need the ability to view certain
documents or information within an Odoo database.

</div>

Some common use cases for providing portal access include allowing
customers to read/view any or all of the following in Odoo:

  - leads/opportunities
  - quotations/sales orders
  - purchase orders
  - invoices & bills
  - projects
  - tasks
  - timesheets
  - tickets
  - signatures
  - subscriptions

<div class="note">

<div class="title">

Note

</div>

Portal users only have read/view access, and will not be able to edit
any documents in the database.

</div>

## Provide portal access to customers

From the main Odoo dashboard, select the `Contacts` application. If the
contact is not yet created in the database, click on the `Create`
button, enter the details of the contact, and then click `Save`.
Otherwise, choose an existing contact, and then click on the `Action`
drop-down menu located at the top-center of the interface.

![Use the Contacts application to give portal access to
users.](portal/grant-portal-access.png)

Then select `Grant portal access`. A pop-up window appears, listing
three fields:

  - `Contact`: the recorded name of the contact in the Odoo database
  - `Email`: the contact's email address that they will use to log into
    the portal
  - `In Portal`: whether or not the user has portal access

To grant portal access, first enter the contact's `Email` they will use
to log into the portal. Then, check the box under the `In Portal`
column. Optionally, add text to the invitation message the contact will
receive. Then click `Apply` to finish.

![An email address and corresponding checkbox for the contact need to be
filled in before&#10;sending a portal
invitation.](portal/add-contact-to-portal.png)

An email will be sent to the specified email address, indicating that
the contact is now a portal user for that Odoo database.

<div class="tip">

<div class="title">

Tip

</div>

To grant portal access to multiple users at once, navigate to a company
contact, then click `Action --> Grant portal access` to view a list of
all of the company's related contacts. Check the box under the `In
Portal` column for all the contacts that need portal access, then click
`Apply`.

</div>

<div class="note">

<div class="title">

Note

</div>

At any time, portal access can be revoked by navigating to the contact,
clicking `Action --> Grant portal access`, and then unselecting the
checkbox under the `In Portal` column and clicking `Apply`.

</div>

## Change portal username

There may be times when a portal user wants to change their user login.
This can be done by any user in the database with administrator access
rights. The following process outlines the necessary steps to change the
portal user login.

<div class="seealso">

`See the documentation on setting access rights
</applications/general/users/access_rights>`.

</div>

First, navigate to `Settings app --> Users`. Then, under `Filters`,
select `Portal Users`, or select `Add Custom Filter` and set the
following configuration `Groups` \> `contains` \>
<span class="title-ref">portal</span>. After making this selection,
search for (and open) the portal user that needs to be edited.

Next, click `Edit` (if necessary), click into the `Email Address` field,
and proceed to make any necessary changes to this field. The `Email
Address` field is used to log into the Odoo portal.

<div class="note">

<div class="title">

Note

</div>

Changing the `Email Address` (or login) only changes the *username* on
the customer's portal login.

In order to change the contact email, this change needs to take place on
the contact template in the *Contacts* app. Alternatively, the customer
can change their email directly from the portal, but the login
**cannot** be changed. `See change customer info <portal/custinfo>`.

</div>

## Customer portal changes

There may be times when the customer would like to make changes to their
contact information, password/security, or payment information attached
to the portal account. This can be performed by the customer from their
portal. The following process is how a customer can change their contact
information.

### Change customer info

First enter the username and password (login) into the database login
page to access the portal user account. A portal dashboard will appear
upon successfully logging in. Portal documents from the various
installed Odoo applications will appear with the number count of each.

<div class="seealso">

`Portal access documentation <portal/main>`.

</div>

Next, navigate to the upper-right corner of the portal, and click the
`Edit` button, next to the `Details` section. Then, change the pertinent
information, and click `Confirm`.

### Change password

First enter the username and password (login) into the database login
page to access the portal user account. A portal dashboard will appear
upon successfully logging in.

If the customer would like to change their password for portal access,
click on the `Edit
Security Settings` link, below the `Account Security` section. Then,
make the necessary changes, by typing in the current `Password`, `New
Password`, and verify the new password. Lastly, click on `Change
Password` to complete the password change.

<div class="note">

<div class="title">

Note

</div>

If a customer would like to change the login, as documented above,
contact the Odoo database point-of-contact. `See above documentation on
changing the portal username <portal/login>`.

</div>

<div class="note">

<div class="title">

Note

</div>

Passwords for portal users and Odoo.com users remain separate, even if
the same email address is used.

</div>

### Add two-factor authentication

First enter the username and password (login) into the database login
page to access the portal user account. A portal dashboard will appear
upon successfully logging in.

If the customer would like to turn on two-factor authentication (2FA)
for portal access, click on the `Edit Security Settings` link, below the
`Account Security` section.

Click on `Enable two-factor authentication` to turn on `2FA (two-factor
authentication)`. Confirm the current portal password in the `Password`
field. Then, click on `Confirm Password`. Next, activate `2FA
(two-factor authentication)` in a `2FA (two-factor authentication)` app
(Google Authenticator, Authy, etc.), by scanning the `QR code` or
entering a `Verification Code`.

Finally, click `Enable two-factor authentication` to complete the setup.

### Change payment info

First enter the username and password (login) into the database login
page to access the portal user account. A portal dashboard will appear
upon successfully logging in.

If the customer would like to manage payment options, navigate to the
`Manage payment
methods` in the menu on the right. Then, add the new payment
information, and select `Add
new card`.


---
## File: ./content/applications/general/users/access_rights.md

# Access Rights

Activate the `developer mode <developer-mode>`, then go to `Settings -->
Users &
Companies --> Groups`.

## Groups

When choosing the groups the user can have access under `Access Rights
<users/add-individual>`, details of the rules and inheritances of that
group are not shown, so this is when the menu *Groups* comes along.
*Groups* are created to define rules to models within an application.  
Under *Users*, have a list of the current ones. The ones with
administrative rights are shown in black.

![View of a group’s form emphasizing the tab users in
Odoo](access_rights/groups-users.png)

*Inherited* means that users added to this application group are
automatically added to the following ones. In the example below, users
who have access to the group *Administrator* of *Sales* also have access
to *Website/Restricted Editor* and *Sales/User: All Documents*.

![View of a group’s form emphasizing the tab inherited in
Odoo](access_rights/groups-inherited.png)

<div class="important">

<div class="title">

Important

</div>

Remember to always test the settings being changed in order to ensure
that they are being applied to the needed and right users.

</div>

The *Menus* tab is where you define which menus (models) the user can
have access to.

![View of a group’s form emphasizing the tab menus in
Odoo](access_rights/groups-menus.png)

*Access Rights* rules are the first level of rights. The field is
composed of the object name, which is the technical name given to a
model. For each model, enable the following options as appropriate:

  - *Read*: the values of that object can be only seen by the user.
  - *Write*: the values of that object can be edited by the user.
  - *Create*: values for that object can be created by the user.
  - *Delete*: the values of that object can be deleted by the user.

![View of a group’s form emphasizing the tab access rights in
Odoo](access_rights/groups-access-rights.png)

As a second layer of editing and visibility rules, *Record Rules* can be
formed. They overwrite, or refine, the *Access Rights*.  
A record rule is written using a *Domain*. Domains are conditions used
to filter or searching data. Therefore, a domain expression is a list of
conditions. For each rule, choose among the following options: *Read*,
*Write*, *Create* and *Delete* values.

![View of a group’s form emphasizing the tab record rules in
Odoo](access_rights/groups-record-rules.png)

<div class="important">

<div class="title">

Important

</div>

Making changes in access rights can have a big impact on the database.
For this reason, we recommend you to contact your Odoo Business Analyst
or our Support Team, unless you have knowledge about Domains in Odoo.

</div>


---
## File: ./content/applications/general/voip/axivox.md

# Use VoIP services in Odoo with Axivox

## Introduction

Odoo VoIP can be set up to work together with
[Axivox](https://www.axivox.com/). In that case, an `Asterisk server
<asterisk>` is not necessary as the infrastructure is hosted and managed
by Axivox.

To use this service, [contact Axivox](https://www.axivox.com/contact/)
to open an account. Before doing so, verify that Axivox covers your area
and the areas you wish to call.

## Configuration

Go to `Apps` and install the **VoIP Module**.

![VoIP module installation on an Odoo
database](axivox/voip-installation.png)

Go to `Settings --> General Settings --> Integrations`, and fill out the
**Asterisk (VoIP)** field:

  - **PBX Server IP**: set the domain created by Axivox for your account
    (e.g., *yourcompany.axivox.com*)
  - **WebSocket**: type in `wss://pabx.axivox.com:3443`
  - **VoIP Environment**: set as *Production*

![Integration of Axivox as VoIP provider in an Odoo
database](axivox/voip-configuration.png)

### Configure the VOIP user in the Odoo's user

Go to `Settings --> Users & Companies --> Users`, then open the user's
form you want to configure. Under the **Preferences** tab, fill out the
section **PBX Configuration**:

  - **SIP Login / Browser's Extension**: the Axivox *username*
  - **SIP Password**: the Axivox *SIP Password*

![Integration of Axivox user in the Odoo user
preference](axivox/odoo-user.png)

<div class="note">

<div class="title">

Note

</div>

You can find all this information by logging in at
<https://manage.axivox.com/>, selecting the user you want to configure,
and referring to the fields as pictured below.

![SIP credentials in the Axivox manager](axivox/manager-sip.png)

</div>

## Phone Calls

You can make phone calls by clicking on the phone icon in the navigation
bar.

You can also receive phone calls. Odoo rings and displays a
notification.

<div class="note">

<div class="title">

Note

</div>

Your number is the one provided by Axivox.

</div>

![Incoming VoIP call in Odoo](axivox/incoming-call.png)

<div class="tip">

<div class="title">

Tip

</div>

If you see a *Missing Parameter* message in the **Odoo softphone**,
refresh your Odoo window and try again.

!["Missing Parameter" error message in the Odoo
softphone](axivox/missing-parameter.png)

</div>

<div class="tip">

<div class="title">

Tip

</div>

If you see an *Incorrect Number* message in the Odoo softphone, make
sure to use the international format, leading with the plus (+) sign
followed by the international country code. E.g., +16506913277 (where +1
is the international prefix for the United States).

!["Incorrect Number" error message in the Odoo
softphone](axivox/incorrect-number.png)

</div>


---
## File: ./content/applications/general/voip/onsip.md

# Use VoIP services in Odoo with OnSIP

## Introduction

Odoo VoIP can be set up to work together with OnSIP (www.onsip.com). In
that case, the installation and setup of an Asterisk server is not
necessary as the whole infrastructure is hosted and managed by OnSIP.

You will need to open an account with OnSIP to use this service. Before
doing so, make sure that your area and the areas you wish to call are
covered by the service. After opening an OnSIP account, follow the
configuration procedure below.

## Configuration

Go to Apps and install the module **VoIP OnSIP**.

![image](onsip/onsip01.png)

Go to Settings/General Settings. In the section Integrations/Asterisk
(VoIP), fill in the 3 fields:

  - **OnSIP Domain** is the domain you chose when creating an account on
    www.onsip.com. If you don't know it, log in to
    <https://admin.onsip.com/> and you will see it in the top right
    corner of the screen.
  - **WebSocket** should contain <wss://edge.sip.onsip.com>
  - **Mode** should be Production

![image](onsip/onsip02.png)

Go to **Settings/Users**. In the form view of each VoIP user, in the
Preferences tab, fill in the section **PBX Configuration**:

  - **SIP Login / Browser's Extension**: the OnSIP 'Username'
  - **OnSIP authorization User**: the OnSIP 'Auth Username'
  - **SIP Password**: the OnSIP 'SIP Password'
  - **Handset Extension**: the OnSIP 'Extension'

You can find all this information by logging in at
<https://admin.onsip.com/users>, then select the user you want to
configure and refer to the fields as pictured below.

![image](onsip/onsip03.png)

You can now make phone calls by clicking the phone icon in the top right
corner of Odoo (make sure you are logged in as a user properly
configured in Odoo and in OnSIP).

<div class="note">

<div class="title">

Note

</div>

If you see a *Missing Parameters* message in the Odoo softphone, make
sure to refresh your Odoo window and try again.

![image](onsip/onsip04.png)

</div>

<div class="note">

<div class="title">

Note

</div>

If you see an *Incorrect Number* message in the Odoo softphone, make
sure to use the international format, leading with the plus (+) sign
followed by the international country code. E.g.:
<span class="title-ref">+16506913277</span> (where
<span class="title-ref">+1</span> is the international prefix for the
United States).

![image](onsip/onsip05.png)

</div>

You can now also receive phone calls. Your number is the one provided by
OnSIP. Odoo will ring and display a notification.

![image](onsip/onsip06.png)

## OnSIP on Your Cell Phone

In order to make and receive phone calls when you are not in front of
your computer, you can use a softphone app on your cell phone in
parallel of Odoo VoIP. This is useful for on-the-go calls, but also to
make sure to hear incoming calls, or simply for convenience. Any SIP
softphone will work.

On Android and iOS, OnSIP has been successfully tested with [Grandstream
Wave](https://play.google.com/store/apps/details?id=com.grandstream.ucm).
When creating an account, select OnSIP in the list of carriers. You will
then have to configure it as follows:

  - **Account name**: OnSIP
  - **SIP Server**: the OnSIP 'Domain'
  - **SIP User ID**: the OnSIP 'Username'
  - **SIP Authentication ID**: the OnSIP 'Auth Username'
  - **Password**: the OnSIP 'SIP Password'

Aside from initiating calls from Grandstream Wave on your phone, you can
also initiate calls by clicking phone numbers in your browser on your
PC. This will make Grandstream Wave ring and route the call via your
phone to the other party. This approach is useful to avoid wasting time
dialing phone numbers. In order to do so, you will need the Chrome
extension [OnSIP Call
Assistant](https://chrome.google.com/webstore/detail/onsip-call-assistant/pceelmncccldedfkcgjkpemakjbapnpg).

<div class="warning">

<div class="title">

Warning

</div>

The downside of using a softphone on your cell phone is that your calls
will not be logged in Odoo, as the softphone acts as an independent,
separate app.

</div>


---
## File: ./content/applications/general/voip/asterisk.md

# Configure your VoIP Asterisk server for Odoo

## Installing Asterisk server

### Dependencies

Before installing Asterisk you need to install the following
dependencies:

  - wget
  - gcc
  - g++
  - ncurses-devel
  - libxml2-devel
  - sqlite-devel
  - libsrtp-devel
  - libuuid-devel
  - openssl-devel
  - pkg-config

In order to install libsrtp, follow the instructions below:

``` console
cd /usr/local/src/
wget http://srtp.sourceforge.net/srtp-1.4.2.tgz
tar zxvf srtp-1.4.2.tgz
cd /usr/local/src/srtp
./configure CFLAGS=-fPIC --prefix=/usr/local/lib
make && make install
```

You also need to install PJSIP, you can download the source
[here](http://www.pjsip.org/download.htm). Once the source directory is
extracted:

  - **Change to the pjproject source directory:**

<!-- end list -->

``` console
# cd pjproject
```

  - **run:**

<!-- end list -->

``` console
# ./configure --prefix=/usr --enable-shared --disable-sound --disable-resample --disable-video --disable-opencore-amr CFLAGS='-O2 -DNDEBUG'
```

  - **Build and install pjproject:**

<!-- end list -->

``` console
# make dep
# make
# make install
```

  - **Update shared library links:**

<!-- end list -->

``` console
# ldconfig
```

  - **Verify that pjproject is installed:**

<!-- end list -->

``` console
# ldconfig -p | grep pj
```

  - **The result should be:**

<!-- end list -->

``` console
libpjsua.so (libc6,x86-64) => /usr/lib/libpjsua.so
libpjsip.so (libc6,x86-64) => /usr/lib/libpjsip.so
libpjsip-ua.so (libc6,x86-64) => /usr/lib/libpjsip-ua.so
libpjsip-simple.so (libc6,x86-64) => /usr/lib/libpjsip-simple.so
libpjnath.so (libc6,x86-64) => /usr/lib/libpjnath.so
libpjmedia.so (libc6,x86-64) => /usr/lib/libpjmedia.so
libpjmedia-videodev.so (libc6,x86-64) => /usr/lib/libpjmedia-videodev.so
libpjmedia-codec.so (libc6,x86-64) => /usr/lib/libpjmedia-codec.so
libpjmedia-audiodev.so (libc6,x86-64) => /usr/lib/libpjmedia-audiodev.so
libpjlib-util.so (libc6,x86-64) => /usr/lib/libpjlib-util.so
libpj.so (libc6,x86-64) => /usr/lib/libpj.so
```

### Asterisk

  - In order to install Asterisk 13.7.0, you can download the source
    directly
    [there](http://downloads.asterisk.org/pub/telephony/asterisk/old-releases/asterisk-13.7.0.tar.gz).
  - Extract Asterisk:

<!-- end list -->

``` console
tar zxvf asterisk*
```

  - Enter the Asterisk directory:

<!-- end list -->

``` console
cd ./asterisk*
```

  - Run the Asterisk configure script:

<!-- end list -->

``` console
./configure --with-pjproject --with-ssl --with-srtp
```

  - Run the Asterisk menuselect tool:

<!-- end list -->

``` console
make menuselect
```

  - In the menuselect, go to the resources option and ensure that
    res\_srtp is enabled. If there are 3 x’s next to res\_srtp, there is
    a problem with the srtp library and you must reinstall it. Save the
    configuration (press x). You should also see stars in front of the
    res\_pjsip lines.
  - Compile and install Asterisk:

<!-- end list -->

``` console
make && make install
```

  - If you need the sample configs you can run 'make samples' to install
    the sample configs. If you need to install the Asterisk startup
    script you can run 'make config'.

### DTLS Certificates

  - After you need to setup the DTLS certificates.

<!-- end list -->

``` console
mkdir /etc/asterisk/keys
```

  - Enter the Asterisk scripts directory:

<!-- end list -->

``` console
cd /asterisk*/contrib/scripts
```

  - Create the DTLS certificates (replace pbx.mycompany.com with your ip
    address or dns name, replace My Super Company with your company
    name):

<!-- end list -->

``` console
./ast_tls_cert -C pbx.mycompany.com -O "My Super Company" -d /etc/asterisk/keys
```

## Configure Asterisk server

For WebRTC, a lot of the settings that are needed MUST be in the peer
settings. The global settings do not flow down into the peer settings
very well. By default, Asterisk config files are located in
/etc/asterisk/. Start by editing http.conf and make sure that the
following lines are uncommented:

``` console
;http.conf
[general]
enabled=yes
bindaddr=127.0.0.1 ; Replace this with your IP address
bindport=8088 ; Replace this with the port you want to listen on
```

Next, edit sip.conf. The WebRTC peer requires encryption, avpf, and
icesupport to be enabled. In most cases, directmedia should be disabled.
Also under the WebRTC client, the transport needs to be listed as ‘ws’
to allow websocket connections. All of these config lines should be
under the peer itself; setting these config lines globally might not
work:

``` console
;sip.conf
[general]
realm=127.0.0.1 ; Replace this with your IP address
udpbindaddr=127.0.0.1 ; Replace this with your IP address
transport=udp

[1060] ; This will be WebRTC client
type=friend
username=1060 ; The Auth user for SIP.js
host=dynamic ; Allows any host to register
secret=password ; The SIP Password for SIP.js
encryption=yes ; Tell Asterisk to use encryption for this peer
avpf=yes ; Tell Asterisk to use AVPF for this peer
icesupport=yes ; Tell Asterisk to use ICE for this peer
context=default ; Tell Asterisk which context to use when this peer is dialing
directmedia=no ; Asterisk will relay media for this peer
transport=udp,ws ; Asterisk will allow this peer to register on UDP or WebSockets
force_avp=yes ; Force Asterisk to use avp. Introduced in Asterisk 11.11
dtlsenable=yes ; Tell Asterisk to enable DTLS for this peer
dtlsverify=no ; Tell Asterisk to not verify your DTLS certs
dtlscertfile=/etc/asterisk/keys/asterisk.pem ; Tell Asterisk where your DTLS cert file is
dtlsprivatekey=/etc/asterisk/keys/asterisk.pem ; Tell Asterisk where your DTLS private key is
dtlssetup=actpass ; Tell Asterisk to use actpass SDP parameter when setting up DTLS
```

In the sip.conf and rtp.conf files you also need to add or uncomment the
lines:

``` console
icesupport = true
stunaddr = stun.l.google.com:19302
```

Lastly, set up extensions.conf:

``` console
;extensions.conf
[default]
exten => 1060,1,Dial(SIP/1060) ; Dialing 1060 will call the SIP client registered to 1060
```

## Configure Odoo VOIP

In Odoo, the configuration should be done in the user's preferences.

![image](asterisk/voip_config01.png)

  - The SIP Login/Browser's Extension is the number you configured
    previously in the sip.conf file (in our example: 1060).
  - The SIP Password is the secret you chose in the sip.conf file.
  - The extension of your office's phone is not a required field but it
    is used if you want to transfer your call from Odoo to an external
    phone also configured in the sip.conf file.

The configuration should also be done in the General Settings under the
"Integrations" section.

![image](onsip/onsip02.png)

  - The PBX Server IP should be the same as the IP you define in the
    http.conf file.
  - The WebSocket should be: <ws://localhost:XXXX/ws> where "localhost"
    needs to be the same as the IP defined previously and "XXXX" needs
    to be the port defined in the http.conf file.


---
## File: ./content/applications/general/in_app_purchase.md

# In-App Purchase (IAP)

In-App Purchases (IAP) gives access to additional services through Odoo.
For instance, it allows you to send SMS Text Messages or to send
Invoices by post directly from your database.

## Buying Credits

Each IAP Service relies on prepaid credits to work and has its own
pricing. To consult your current balance or to recharge your account, go
to `Settings --> Odoo IAP --> View my
Services`.

![image](in_app_purchase/image1.png)

<div class="tip">

<div class="title">

Tip

</div>

If you are on Odoo Online and have the Enterprise version, you benefit
from free credits to test our IAP features.

</div>

## IAP accounts

Credits to use IAP services are stored on IAP accounts, which are
specific to each service. By default, IAP accounts are common to all
companies, but can be restricted to specific ones. Activate the
`developer mode <developer-mode>`, then go to `Technical
Settings --> IAP Account`.

![image](in_app_purchase/image2.png)

<div class="tip">

<div class="title">

Tip

</div>

An IAP account can be disabled by appending
<span class="title-ref">+disabled</span> to its token. Reverting this
change will re-enable the account.

</div>

## IAP Portal

The IAP Portal is a platform regrouping your IAP Services. It is
accessible from `Settings app --> Odoo IAP --> View my Services`. From
there, you can view your current balance, recharge your credits and set
a reminder when your balance falls below a threshold.

![image](in_app_purchase/image3.png)

## Get notified when credits are low

To be notified when it’s time to recharge your credits, you can go to
your IAP Portal through `Settings app --> Odoo IAP --> View my
Services`, unfold a service and check the Receive threshold warning
option. Then, you can provide a minimum amount of credits and email
addresses. Now, every time that the limit is reached, an automatic
reminder will be sent by email\!

![image](in_app_purchase/image4.png)


---
## File: ./content/applications/general.md

# Miscellaneous

<div class="toctree">

general/users general/auth general/apps\_modules
general/export\_import\_data general/email\_communication general/voip
general/in\_app\_purchase general/developer\_mode

</div>


---
## File: ./content/applications/marketing.md

  - nosearch

# Marketing

<div class="toctree">

marketing/email\_marketing marketing/marketing\_automation
marketing/sms\_marketing marketing/events marketing/surveys
marketing/social\_marketing

</div>


---
## File: ./content/applications/finance.md

  - nosearch

# Finance

<div class="toctree">

finance/accounting finance/expenses finance/documents finance/sign
finance/payment\_acquirers finance/fiscal\_localizations

</div>


---
## File: ./content/applications/hr/payroll.md

  - show-content

  - show-toc

# Payroll

Odoo *Payroll* is used to process work entries and create payslips for
employees, including both regular pay and commission. Payroll works in
conjunction with other Odoo apps, such as *Employees*, *Timesheets*,
*Time Off*, and *Attendances*.

The *Payroll* app helps ensure there are no issues or conflicts when
validating work entries, handles country-specific localizations to
ensure that payslips follow local rules and taxes, and allows for salary
assignments. Payroll configuration is critical to ensure accurate and
timely processing of payslips.

## Settings

To access the *Settings*, go to `Payroll --> Configuration -->
Settings`. Whether or not payslips are posted in accounting, and whether
SEPA payments are created, is selected here.

The `Settings` screen is where localization settings are configured.
*Localizations* are country-specific settings pre-configured in Odoo at
the creation of the database, and account for all taxes, fees, and
allowances for that particular country. The `Localization` section of
the `Settings` includes a detailed view of all benefits provided to
employees.

![Settings available for Payroll.](payroll/payroll-settings.png)

Any country-specific localizations are set up in the `Localization`
section of the `Settings` screen. All localization items are
pre-populated when the country is specified during the creation of the
database. It is not recommended to alter the localization settings
unless specifically required.

## Work entries

A *work entry* is an individual record on an employee's timesheet. Work
entries can be configured to account for all types of work and time off,
such as `Attendance`, `Sick Time
Off`, `Training`, or `Public Holiday`.

<div class="seealso">

`Manage work entries <payroll/work_entries>`

</div>

### Work entry types

When creating a work entry in the *Payroll* application, or when an
employee enters information in the *Timesheets* application, a `Work
Entry Type` needs to be selected. The list of `Work Entry Types` is
automatically created based on localization settings set in the
database.

To view the current work entry types available, go to `Payroll -->
Configuration -->
Work Entry Types`.

Each work entry type has a code to aid in the creation of payslips, and
ensure all taxes and fees are correctly entered.

![List of all work entry types currently
available.](payroll/work-entry-types.png)

#### New work entry type

To create a new work entry type, click the `Create` button. Enter the
information on the form:

  - `Work Entry Type Name`: The name should be short and descriptive,
    such as <span class="title-ref">Sick Time</span> or
    <span class="title-ref">Public Holiday</span>.
  - `Code`: This code appears with the work entry type on timesheets and
    payslips. Since the code is used in conjunction with the
    *Accounting* application, it is advised to check with the accounting
    department for a code to use.
  - `Sequence`: The sequence determines the order that the work entry is
    computed in the payslip list.
  - Check boxes: If any of the items in the list applies to the work
    entry, check off the box by clicking it. If `Time Off` is checked
    off, a `Time Off Type` field appears. This field has a drop-down
    menu to select the specific type of time off, or a new type of time
    off can be entered.

![New work entry type form.](payroll/new-work-entry.png)

  - `Rounding`: The rounding method determines how timesheet entries are
    displayed on the payslip.
      - `No Rounding`: A timesheet entry is not modified.
      - `Half Day`: A timesheet entry is rounded to the closest half day
        amount.
      - `Day`: A timesheet entry is rounded to the closest full day
        amount.

<div class="example">

If the working time is set to an 8-hour work day (40-hour work week),
and an employee enters a time of 5.5 hours on a timesheet, and
`Rounding` is set to `No Rounding`, the entry remains 5.5 hours. If
`Rounding` is set to `Half Day`, the entry is changed to 4 hours. If it
is set to `Day`, it is changed to 8 hours.

</div>

### Working times

To view the currently configured working times, go to `Payroll -->
Configuration -->
Working Times`. The working times that are available for an employee's
contracts and work entries are found in this list.

Working times are company-specific. Each company must identify each type
of working time they use. For example, an Odoo database containing
multiple companies that use a standard 40-hour work week needs to have a
separate working time entry for each company that uses the 40-hour
standard work week.

![All working times currently set up in the
database.](payroll/working-times.png)

#### New working time

To create a new working time, click the `Create` button. Enter the
information on the form.

![New working type form.](payroll/new-working-times.png)

The fields are auto-populated for a regular 40-hour work week but can be
modified. First, change the name of the working time by modifying the
text in the `Name` field. Next, make any adjustments to the days and
times that apply to the new working time.

In the `Working Hours` tab, modify the `Day of Week`, `Day Period`, and
`Work Entry Type` selections by clicking on the drop-down menus in each
column and making the desired selection. The `Work From` and `Work To`
columns are modified by typing in the time.

<div class="note">

<div class="title">

Note

</div>

The `Work From` and `Work To` times must be in a 24-hour format. For
example, <span class="title-ref">2:00 PM</span> would be entered as
<span class="title-ref">14:00</span>.

</div>

If the working time should be in a two-week configuration, click the
`Switch To 2 Week
Calendar` button. This creates entries for an `Even week` and an `Odd
week`.

## Salary

### Structure types

In Odoo, an employee's payslip is based on *structures* and *structure
types*, which both affect how an employee enters timesheets. Each
structure type is an individual set of rules for processing a timesheet
entry, which consists of different structures nested within it.
Structure types define how often an employee gets paid, the working
hours, and if wages are based on a salary (fixed) or how many hours the
employee worked (varied).

For example, a structure type could be
<span class="title-ref">Employee</span>, and that structure type could
have two different structures in it: a <span class="title-ref">Regular
Pay</span> structure which includes all the separate rules for
processing regular pay, as well as a structure for an
<span class="title-ref">End of Year Bonus</span> which includes the
rules only for the end of year bonus. Both the
<span class="title-ref">Regular Pay</span> structure and
<span class="title-ref">End of Year Bonus</span> structure are
structures within the <span class="title-ref">Employee</span> structure
type.

The different structure types can be seen by going to `Payroll -->
Configuration -->
Structure Types`.

There are two default structure types configured in Odoo: *Employee* and
*Worker*. Typically, *Employee* is used for salaried employees, which is
why the wage type is *Monthly Fixed Wage*, and *Worker* is typically
used for employees paid by the hour, so the wage type is *Hourly Wage*.

![List of all structure types.](payroll/structure-type.png)

Click the `Create` button to make a new structure type. Most fields are
pre-populated, but all fields can be edited. Once the fields are edited,
click the `Save` button to save the changes, or click `Discard` to
delete the entry.

![New structure type box.](payroll/new-structure.png)

### Structures

*Salary structures* are the different ways an employee gets paid within
a specific *structure*, and are specifically defined by various rules.

The amount of structures a company needs for each structure type depends
on how many different ways employees are paid, and how their pay is
calculated. For example, a common structure that could be useful to add
may be a <span class="title-ref">Bonus</span>.

To view all the various structures for each structure type, go to
`Payroll -->
Configuration --> Structures`.

![All available salary structures.](payroll/salary-structure.png)

Each `structure type <payroll/structure-types>` lists the various
structures associated with it. Each structure contains a set of rules
that define it.

Click on a structure to view its `Salary Rules`. These rules are what
calculate the payslip for the employee.

![Salary structure details for Regular
Pay.](payroll/structure-regular-pay-rules.png)

### Rules

Each structure has a set of *salary rules* to follow for accounting
purposes. These rules are configured by the localization, and affect the
*Accounting* application, so modifications to the default rules, or the
creation of new rules, should only be done when necessary.

To view all the rules, go to `Payroll app --> Configuration --> Rules`.
Click on a structure (such as `Regular Pay`) to view all the rules.

![Rules for each salary structure type.](payroll/rules.png)

To make a new rule, click `Create`. A new rule form appears. Enter the
information in the fields, then click `Save`.

![Enter the information for the new rule.](payroll/new-rule.png)

The required fields for a rule are:

  - `Name`: Enter a name for the rule.
  - `Category`: Select a category the rule applies to from the drop-down
    menu, or enter a new one.
  - `Code`: Enter a code to be used for this new rule. It is recommended
    to coordinate with the accounting department for a code as this will
    affect them.
  - `Salary Structure`: Select a salary structure the rule applies to
    from the drop-down menu, or enter a new one.
  - `Condition Based on`: In the `General` tab, select from the
    drop-down menu whether the rule is `Always True` (always applies), a
    `Range` (applies to a specific range, which is entered beneath the
    selection), or a `Python Expression` (the code is entered beneath
    the selection).
  - `Amount Type`: In the `General` tab, select from the drop-down menu
    whether the amount is a `Fixed Amount`, a `Percentage (%)`, or a
    `Python
    Code`. Depending on what is selected, the fixed amount, percentage,
    or Python code needs to be entered next.

### Rule parameters

<div class="note">

<div class="title">

Note

</div>

Currently, the `Rule Parameters` feature found inside the `Payroll app
--> Configuration` menu is still in development and only serves a
specific use case for Belgian markets. The documentation will be updated
when this section has matured to more markets.

</div>

### Other input types

When creating payslips, it is sometimes necessary to add other entries
for specific circumstances, like expenses, reimbursements, or
deductions. These other inputs can be configured by going to `Payroll
--> Configuration --> Other Input Types`.

![Other input types for payroll.](payroll/other-input.png)

To create a new input type, click the `Create` button. Enter the
`Description`, the `Code`, and which structure it applies to in the
`Availability in Structure` field. Click the `Save` button to save the
changes, or click `Discard` to delete the entry.

![Create a new Input Type.](payroll/input-type-new.png)

## Salary package configurator

The various options under the `Salary Package Configurator` section of
the `Payroll --> Configuration` menu all affect an employee's potential
salary. These sections (`Advantages`, `Personal Info`, and `Resume`)
specify what benefits can be offered to an employee in their salary
package.

Depending on what information an employee enters (such as deductions,
dependents, etc.), their salary is adjusted accordingly. When an
applicant applies for a job on the company website, the sections under
`Salary Package Configurator` directly affect what the applicant sees,
and what is populated as the applicant enters information.

### Advantages

When offering potential employees a position, there can be certain
*advantages* set in Odoo in addition to the salary to make the offer
more appealing (such as extra time off, access to a company car,
reimbursement for a phone or internet, etc.).

To see the advantages, go to `Payroll --> Configuration --> Advantages`.
Advantages are grouped by `Structure type`.

![Settings available for payroll.](payroll/advantages.png)

To make a new advantage, click the `Create` button. Enter the
information in the fields, then click the `Save` button to save the
changes, or click `Discard` to delete the entry.

![List of advantages employee's can have.](payroll/new-advantage.png)

The required fields for an advantage are:

  - `Name`: Enter the name for the advantage.
  - `Advantage Field`: Select from the drop-down menu what field in the
    payslip this advantage appears under.
  - `Advantage Type`: Select from the drop-down menu what type of
    advantage the benefit is. Select from `Monthly Benefit in Kind`,
    `Monthly Advantages in Net`, `Monthly Advantages in Cash`, or
    `Yearly Advantages in Cash`.
  - `Salary Structure Type`: Select from the drop-down menu which salary
    structure type this advantage applies to.

### Personal info

Every employee in Odoo has an *employee card* that includes all of their
personal information, resume, work information, and documents. To view
an employee's card, go to the main `Payroll` app dashboard, and click on
the employee's card, or go to `Payroll --> Employees --> Employees` and
click on the employee's card. Employee cards can also be viewed by going
to the `Employees` app.

<div class="note">

<div class="title">

Note

</div>

An employee card can be thought of as an employee personnel file.

</div>

The *Personal Information* section lists all of the fields that are
available to enter on the employee's card. To access this section, go to
`Payroll --> Configuration -->
Personal Info`.

![Personal information that appear on employee cards to
enter.](payroll/personal-info.png)

To edit an entry, select it from the list. Then, click the `Edit`
button, and modify the entry. When done, click `Save` or `Discard` to
save the information or cancel the edits.

![New personal information entry.](payroll/personal-new.png)

The two most important fields on the personal info form are `Is
Required` and `Display Type`. Checking the `Is Required` box makes the
field mandatory on the employee's card.

The `Display Type` drop-down menu allows for the information to be
entered in a variety of ways, from a `Text` box, to a customizable
`Radio` button, a `Checkbox`, a `Document`, and more.

Once the information is entered, click the `Save` button to save the
entry.

### Resume

<div class="note">

<div class="title">

Note

</div>

Currently, the `Resume` feature found inside the `Payroll app -->
Configuration` menu is still in development and only serves a specific
use case for Belgian markets. The documentation will be updated when
this section has matured to more markets.

</div>

<div class="toctree" data-titlesonly="">

payroll/contracts payroll/payslips payroll/work\_entries
payroll/reporting

</div>


---
## File: ./content/applications/hr/recruitment/new_job.md

# Job positions

In the default `Recruitment` dashboard view, all job positions are
shown, regardless of status. Current published positions with active
applicants are shown, as well as job positions that have been created
but have not yet been published.

Each job position is shown in an individual kanban card. If the job
position is active and candidates can apply, then a `Published` banner
will appear in the top-right corner of the card.

View submitted applications by clicking the `# Applications` button,
with <span class="title-ref">\#</span> being the number of applications
received. If a position is not published, a `Start Recruitment` button
will appear instead.

![Main dashboard view of Recruitment showing all job
positions.](new_job/jobs.png)

## Create a new job position

There are two ways a job position can be created: from the main
`Recruitment` dashboard, or from the `Configuration` menu.

To create a job position from the `Configuration` menu, go to
`Recruitment
app --> Configuration --> Job Positions`. The job positions in this view
are displayed in a list.

Create a new job position from the `Job Positions` dashboard by clicking
the `Create` button in the top-left corner.

Then, a `Create a Job Position` pop-up window will appear. From here,
enter the name of the position (such as <span class="title-ref">Sales
Manager</span>, <span class="title-ref">Mechanical Engineer</span>,
etc.). When complete, click the `Create` button to save the entry, or
the `Discard` button to delete it.

![Create a new job position.](new_job/job-title.png)

Once the job position has been created, it will appear as a card in the
kanban view on the main `Recruitment`<span class="title-ref"> dashboard,
as well as in the list view on the :guilabel:\`Configuration</span>
dashboard.

### Edit a new job position

Once the job position is created, it's time to enter the details for the
position. Click on the `⋮ (three dots)` icon in the upper-right corner
of the relevant card to reveal several options, and then click `Edit` to
edit the details.

![Edit the job position card.](new_job/edit-job.png)

Enter the job description in the `Job Description` tab. This information
is what is visible to potential employees when searching for available
jobs.

#### Recruitment

All the basic information about the job position is listed under the
`Recruitment` tab. None of the fields are required, but it is a good
idea to provide at least a few details, such as where the job is
located.

The fields can be filled out as follows:

  - `Company`: Select the company the job is for.

  - `Website`: Select the website where the job will be published.

  - `Department`: Select the relevant department for the job position.

  - `Expected New Employees`: Enter the number of employees to be hired
    for this position.

  - `Contract Template`: Select a contract template that will be used
    when offering the job to a candidate.

  - `Interview Form`: Select a form that applicants will fill out prior
    to their interview, or create a new form. Once selected, a `Display
    (Name) Form` button will appear next to the selected form. Click on
    this to see how the form will be displayed to the candidate on the
    front end.
    
    ![The interview form will display a link to see the form as the
    candidate will.](new_job/interview-form.png)

  - `Recruiter`: Select the person who will be doing the recruiting for
    this role.

![Enter job information details in the recruitment
tab.](new_job/recruitment-tab.png)

#### Appraisals

This tab displays the `Employee Feedback Template` and the `Manager
Feedback
Template`, both of which will be used after the employee has been hired,
the predetermined time has passed, and feedback is requested.

### Create interview form

Once a job position has been made, the `Interview Form` needs to be
created. In the kanban view of the `Recruitment` dashboard, click on the
`⋮ (three dots)` icon in the upper-right corner of the card to reveal
several options, and then click `Create Interview Form`.

![Create an interview form for the new
position.](new_job/new-interview-form.png)

Click on `Add a section` to add a section to the form. A line will
appear, and a section heading can be entered. When complete, click off
the line, or press enter to lock in the new section on the form.

![Enter job information details in the recruitment
tab.](new_job/add-section.png)

Next, click `Add a question` to add a question to the section. A pop-up
window appears to enter the question details. Type out the question in
the top line.

There are several *Question Types* to choose from:

  - `Multiple Lines Text Box`: allows the applicant to enter several
    lines of text
  - `Single Line Text Box`: limits the applicant to only a single line
    of text
  - `Numerical Value`: only allows a number to be entered
  - `Date`: a calendar module is presented to select a date
  - `Datetime`: a calendar module and a clock icon is presented to
    select a date and time
  - `Multiple choice: only one answer`: a multiple choice question that
    only allows the candidate to select one answer
  - `Multiple choice: multiple answers allowed`: a multiple choice
    question that allows the candidate to select multiple answers
  - `Matrix`: a customizable table that allows the candidate to choose
    an answer for each row

![Add a new question to the interview form.](new_job/questions.png)

Questions and sections can be reorganized. Move them by clicking and
dragging individual section headings or question lines to their desired
position(s).

Sections are indicated by a gray background, while questions have a
white background.

![A sample of categories and questions for a
candidate.](new_job/questions-matrix.png)

Next, configure the options for the interview form. Click the `Options`
tab to view all the options to configure, by category.

#### Questions

  - `Layout`: Choose how the questions should be displayed.
    
      - `One page with all the questions`: Display all sections and
        questions at the same time.
      - `One page per section`: Display each section with the
        corresponding questions on an individual page.
      - `One page per question`: Display a single question on each page.

  - `Progression Mode`: Display the progress the candidate is making,
    either as a `Percentage`, or as a `Number`.

  - `Survey Time Limit`: Check this box to limit the time allowed to
    complete the form. When selected, a field to enter the minutes
    appears next to the checked box. Enter the time (using an XX:XX
    minute/second format) in the field.

  - `Selection`: Display the entire form (e.g. `All questions`), or only
    a random selection of questions from each section (`Randomized per
    section`).
    
    <div class="note">
    
    <div class="title">
    
    Note
    
    </div>
    
    Although it is a selectable option, the `Randomized per section`
    option is not typically selected for an interview form.
    
    </div>

#### Scoring

  - `No scoring`: Select this option to not score the form.

  -   - `Scoring with answers at the end`: Select this option to score
        the form and display the  
        correct answers for the candidate when they are finished with
        the form.

  - `Scoring without answers at the end`: Select this option to score
    the form but not display the answers to the candidate.

If one of the scoring options was selected, a `Success %` field will
appear. Enter the percentage the candidate needs to pass the exam
(example, 80.00%). The entry should be written in an “XX.XX” format.

#### Candidates

  - `Access Mode`: Specify who can access the exam. Either `Anyone with
    the link` or `Invited people only`.
  - `Appraisal Managers Only`: Check this box so only the managers who
    are reviewing the exam can see the answers. If left unchecked,
    anyone can view the results.
  - `Login Required`: Check this box to require candidates to log in
    before taking the exam, whether they have a valid token or not.
  - `Attempts Limit`: If there is a limit to how many times the exam can
    be taken, check this box, then enter the maximum attempt number in
    the field next to it.

#### Live Session

  - `Reward quick answers`: If the exam is to be taken live, check this
    box to award more points to participants who answer quickly.
  - `Session Code`: Enter an access code that will allow the viewers
    into the live exam session.

After all fields have been entered, click the `Save` button to save the
changes, or click `Discard` to delete the changes.

![Various options to configure for the interview
form.](new_job/options.png)


---
## File: ./content/applications/hr/employees.md

  - nosearch

  - show-content

  - show-toc

# Employees

Odoo *Employees* organizes a company's employee records, contracts, and
departments.

<div class="toctree" data-titlesonly="">

employees/new\_employee

</div>


---
## File: ./content/applications/hr/attendances.md

  - nosearch

  - show-content

  - hide-page-toc

  - show-toc

# Attendances

**Odoo Attendances** functions as a time clock. Employees check in and
check out of work, while managers can see who is available at any given
time.

<div class="seealso">

[Odoo Tutorials:
Attendances](https://www.odoo.com/slides/slide/attendances-684)

</div>

<div class="toctree" data-titlesonly="">

attendances/hardware

</div>


---
## File: ./content/applications/hr/recruitment.md

  - nosearch

# Recruitment

<div class="toctree" data-titlesonly="">

recruitment/new\_job

</div>


---
## File: ./content/applications/hr/payroll/payslips.md

# Payslips

Payslips are created either by the employees themselves or their
managers, and are approved by authorized employees (typically managers).
Then, once payslips are approved, employees are issued payslips and are
paid either by check or direct deposit, depending on how their employee
profile is configured.

The `Payslips` drop-down header of the `Payroll` application consists of
three sections: `To Pay`, `All Payslips`, and `Batches`.

These three sections provide all the tools needed to create payslips for
employees, including individual payslips, a batch of payslips, or
commission payslips.

![Payslips menu selection in Payroll.](payslips/payslips.png)

## To pay

Click on `Payroll app --> Payslips --> To Pay` to see the payslips that
need to be paid. On this page, Odoo displays the payslips that have not
been generated yet, and can be created from this dashboard.

![View all payslips that need to be paid on the Payslips To Pay
page.](payslips/all-pay-slips.png)

Each payslip will list the `Reference` number for the individual
payslip, the `Employee` name, `Batch Name`, the `From` and `To` date
range, the `Company`, the `Basic Wage`, `Net Wage`, and the `Status` of
the payslip.

Clicking on an individual payslip entry will show the details for the
individual payslip.

### Create new payslip

A new payslip can be created from the `Payslips To Pay` page (`Payroll
app
--> Payslips --> To Pay`) or the `Employee Payslips` page (`Payroll app
--> Payslips --> All Payslips`), by clicking the `Create` button in the
top-left corner.

Clicking `Create` reveals a blank payslip form, wherein the necessary
payslip information can be entered.

#### Required fields

On the blank payslip form, a number of fields are required to be filled
in with the necessary information. These required fields are represented
by **bold** lines.

![The necessary fields for a new payslip.](payslips/new-payslip.png)

  - `Employee`: Type in the name of an employee, or select the desired
    employee from the drop-down list. Upon selecting an employee,
    several other fields on the payslip form may auto-populate.
    Typically, after making a selection in the `Employee` field, Odoo
    auto-populates the `Contract`, `Structure`, and `Payslip Name`
    fields, but **only** if that information is already on that
    employee's form in the *Employees* app.
  - `Period`: Click the default date to reveal a pop-up calendar. On
    this calendar, use the `< (less-than)` and `> (greater than)` icons
    to select the desired month, and click on the desired day to select
    that specific date as the start date for the payslip. Repeat this
    process to add an end date for the payslip in the field below.
  - `Contract`: Using the drop-down menu, select the desired contract
    for the employee. Only the available corresponding contracts for the
    selected employee appear as options.
  - `Structure`: Using the drop-down menu, select the salary structure
    type. Only the available corresponding structures for the selected
    contract for that specific employee appear as options.
  - `Payslip Name`: In the blank field, type in the name for the
    payslip. The name should be short and descriptive, such as
    <span class="title-ref">April 2023</span>.
  - `Company`: In the `Accounting Information` tab, select the company
    the payslip applies to from the `Company` drop-down menu.
  - `Salary Journal`: In the `Accounting Information` tab, enter the
    salary journal in which the payment will be reflected, and found in
    the *Accounting* application.

![The necessary fields for a new payslip in the Accounting Information
tab.](payslips/new-payslip-tab.png)

<div class="important">

<div class="title">

Important

</div>

It is recommended to check with the accounting department to ensure
every entry that affects the *Accounting* application is correct.

</div>

#### Optional fields

  - `Reference`: Any note or reference message for the new entry can be
    entered here.
  - `Company Car`: If applicable, select the company car from the
    drop-down.
  - `Worked Days`: In the `Worked Days \& Inputs` tab, the entries under
    `Worked Days` (including the `Type`, `Description`, `Number of
    Days`, `Number of Hours`, and `Amount`) are automatically filled in,
    based on what was entered for the `Period`, `Contract`, and
    `Structure` fields of the payslip form.
  - `Salary Computation`: The `Salary Computation` tab is automatically
    filled in after the `Compute Sheet` button is clicked. Doing so
    displays all the wages, deductions, taxes, etc. for the entry.
  - `Batch Name`: Located in the `Accounting Information` tab, select
    the payslip batch this new payslip should be added to from the
    drop-down menu.
  - `Date Account`: Located in the `Accounting Information` tab, enter
    the date on which the payslip should be posted, by clicking on the
    drop-down menu, and navigating to the correct month and year using
    the `< > (less-than/greater-than)` icons in the calendar pop-up
    window. Then, click on the desired date.
  - `Salary Journal`: This field, located in the `Accounting
    Information` tab, represents the journal that the payslip will be
    logged in, and is automatically selected when the `Contract` and
    `Structure` are entered in the payslip form.
  - `Accounting Entry`: This field, located in the `Accounting
    Information` tab, is automatically filled in once the payslip is
    confirmed.

#### Save and process new payslip

When all the necessary information on the payslip is entered, click
`Save` to save the data, or click `Discard` to delete the entry.

<div class="note">

<div class="title">

Note

</div>

Saving the entry is not required in order to compute the sheet, although
it is considered best practice to do so. The `Compute Sheet` button can
be clicked without first saving the payslip. Doing so will save the
entry *and* compute the sheet.

</div>

Click the `Compute Sheet` button to register all the information, and
have the `Salary Computation` tab populated. If any modifications need
to be made, click the `Edit` button, make the desired changes, then
click the `Recompute Worked Days` button to have the changes reflected
in the `Worked
Days` and `Salary Computation` tabs.

To print the payslip, click the `Print` button. To cancel the payslip,
click the `Cancel Payslip` button.

Once everything on the payslip form is correct, click the `Create Draft
Entry` button to create the payslip. The chatter is automatically
updated to show the email sent to the employee, along with a PDF copy of
the payslip.

![The new payslip is emailed to the employee and the email appears in
the chatter.](payslips/payslip-chatter.png)

Next, the payment must be sent to the employee. To do this, click the
`Make Payment` button. Doing so reveals a pop-up form, in which the
desired `Bank Journal` that the payment should be made against must be
selected from a drop-down menu. Then, click the `Confirm` button to
confirm the journal, and return to the payslip.

![Click Make Payment to send the payment to the
employee.](payslips/make-payment.png)

If a payment needs to be cancelled or refunded, click the corresponding
`Refund` or `Cancel Payslip` button, located at the top of the payslip
form.

<div class="important">

<div class="title">

Important

</div>

In order for a payslip to be paid, the employee *must* have a bank
account entered in their contact information. If there is no bank
information, a payslip cannot be paid, and an error will appear when the
`Make Payment` button is clicked. Banking information can be found in
the `Private Information` tab on the employee's card. Edit the employee
card, and add banking information, if it is missing.

![Banking information can be entered in an employee's
card.](payslips/banking.png)

</div>

## All payslips

To view all payslips regardless of status, go to `Payroll app -->
Payslips --> All
Payslips`. Here, all payslips are organized by batch (in a default list
view).

Click on the `▶ (arrow)` next to the individual batch name to view all
the payslips in that particular batch, along with all the payslip
details. The number of payslips in the batch is written in parenthesis
after the batch name. The `Status` for each individual payslip appears
on the far-right side, indicating if it is in `Draft Mode`, `Waiting`,
or if it is `Done`.

<div class="note">

<div class="title">

Note

</div>

\- `Draft` indicates the payslip is created, and there is still time to
make edits, since the amounts are not calculated. -
<span class="title-ref">Waiting</span> indicates the payslip has been
calculated and the salary details can be found in the *Salary
Computation* tab. - <span class="title-ref">Done</span> indicates the
payslip is calculated and ready to be paid.

</div>

![View all payslips organized by batches. Click on the arrow to expand
each batch.](payslips/all-payslips.png)

Click on an individual payslip to view the details for that payslip on a
separate page. Using the breadcrumb menu, click `Employee Payslips` to
go back to the list view of all payslips.

A new payslip can be created from the `Employee Payslips` page, by
clicking the `Create` button in the upper-left corner. Doing so reveals
a separate blank payslip form page. On that blank payslip form page,
enter all the necessary information, as described in the `Create a new
payslip <payroll/new-payslip>` section.

To print PDF versions of payslips from the `Payslips to Pay` or
`Employee
Payslips` pages, first select the desired payslips by clicking on the
individual checkbox next to each payslip to be printed. Or, click the
box next to `Reference`, which selects all visible payslips on the page.
Then, click the `Print` button to print the payslips.

![Click on the Print smart button to print payslips to a
PDF.](payslips/print.png)

Payslips can also be exported to an Excel spreadsheet. When exporting,
all payslips are exported regardless of whether some are selected or
not. Click on the `Export All` button (download icon) to export all
payslips to an Excel spreadsheet.

![Click on the Export All smart button to export all payslips to an
Excel payslip.](payslips/export.png)

<div class="note">

<div class="title">

Note

</div>

Both *To Pay* and *All Payslips* display all the detailed information
for each payslip.

</div>

## Batches

To view payslips in batches, navigate to `Payroll app --> Payslips -->
Batches` to display all the payslip batches that have been created.
These payslip batches are displayed in a list view, by default.

Each batch displays the `Name`, `Date From` and `Date To` dates, whether
it was a `Credit note`, its `Status`, and the `Company`.

![View displaying all batches created.](payslips/batches.png)

Click on an individual batch to view the details for that batch on a
separate page. On this batch detail page, modifications can be made. To
make any modifications to a batch, click the `Edit` button. Then,
proceed to make any necessary changes.

When all desired changes have been made, click either `Save` to save the
changes, or `Discard` to revert back to the original data.

After modifications have been saved, click the `Generate Payslips`
button to reveal a `Generate Payslips` pop-up form, in which payslips
affected by the changes can be created or modified.

All payslips associated with the batch are displayed in the employees
section of the `Generate Payslips` pop-up. To filter the results by
either the `Salary
Structure` and/or the `Department`, select a salary structure and/or
department from the respective drop-down menus.

Only employees that match the selected `Salary Structure` and/or
`Department` appear in the employees list. Click the `Generate` button
at the bottom of the `Generate Payslips` pop-up window to generate the
modified payslips, and close the pop-up window.

![Generate payslips from the edited
batch.](payslips/generate-payslips-batch.png)

Back on the batch details page, click the `Create Draft Entry` smart
button to create a draft of the payslips.

![Generate payslips from the edited
batch.](payslips/draft-from-batch.png)

Once the draft payslips are created, the button changes to say `Make
Payment`. Click the `Make Payment` button. A pop-up window appears, in
which the bank journal information must be entered. Select the `Bank
Journal` from the drop-down list, and click `Confirm` to process the
payslips, and pay the employees.

On the batch detail page, the number of payslips in the batch is
accessible via the `Payslips` smart button, located in the top-right
corner. Individual payslips for the batch can be viewed by clicking the
`Payslips` smart button in the top-right corner.

Use the breadcrumb menu to navigate back to the individual batch detail
page, or back to the list of all batches.

![Click the Payslips smart button to view the individual payslips in the
batch.](payslips/payslip-batches.png)

### Create a new batch

To create a new batch of payslips from the `Payslips Batches` page
(`Payroll app --> Payslips --> Batches`), click the `Create` button in
the upper-left corner. Doing so reveals a blank payslip batch form on a
separate page.

On the new payslip batch form, enter the `Name` for the batch, and
select the date range to which the batch applies, by clicking the `▼
(drop-down arrow)` icon in the `Period` fields, which reveals a calendar
pop-up window. From this calendar pop-up window, navigate to the correct
month, and click on the corresponding day for both the start and end
dates.

![Enter the details for the new batch.](payslips/new-batch-details.png)

If the batch is a credit note, check the box next to `Credit Note`.
Then, in the `Generation Date` field, select the date the payslips
should be generated from a calendar pop-up window. This generated date
is reflected in the accounting journal entries.

Lastly, in the `Company` field, select the company these payslips are
written against.

When all the information on the payslip batch form is correct, click the
`Save` button to save the information. To delete the entry, click the
`Discard` button.

To create the payslips for the newly-created batch, click the `Generate
Payslips` button at the top of the form.

When clicked, a pop-up window appears showing all the payslips that will
be created. To remove any individual payslips, click the black `✖ (x
mark)` icon at the far right of the payslip line.

If a specific `Salary Structure` or `Department` needs to be specified
for the batch, select them from the corresponding drop-down menus.

Click the `Generate` button at the bottom of the pop-up window to create
the payslips for the batch.

![Generate payslips for the new batch.](payslips/generate-payslips.png)

<div class="note">

<div class="title">

Note

</div>

On the `Generate Payslips` pop-up window, selecting a `Department`
and/or `Salary Structure` only displays payslips that apply to those
specifically-selected parameters.

</div>

If there are any errors or issues preventing the payslips from being
generated, an error message appears in the top-right section. This error
box disappears on its own after several seconds, or the `✖ (x mark)`
icon can be clicked to close the alert.

To remedy the issue, make any necessary modifications (e.g. removing any
payslip lines that cannot be processed), then click the `Generate`
button again.

Once the payslips have been successfully generated, the screen returns
to the payslip batch form.

From here, click the `Generate Draft Entry` button to change the
payslips' status from `Draft` to `Done`.

Once payslips have been generated, click the `Make Payment` button to
process the payments. Doing so reveals a pop-up window, in which the
proper banking information must be entered. In this pop-up window,
select the appropriate `Bank Journal` from the drop-down menu, and enter
the appropriate file name.

When done, click the `Confirm` button to confirm the information, or
click `Cancel` to discard.

### Generate commission payslips

Commission payslips can be generated directly from the `Payslips
Batches` page (`Payroll app --> Payslips --> Batches`). To generate
commission payslips from this page, click on the desired batch (or
batches) to create commissions payslips for, then click the `Generate
Commission Payslips` button.

Doing so reveals a `Generate Commission Payslip` pop-up window, in which
the necessary information **must** be filled out.

![Enter the commission details.](payslips/commission-details.png)

On this pop-up window, click on the drop-down menus, located beside the
`Period` field, to reveal calendar pop-up windows. On these calendar
pop-up windows, select the desired period for which the payslips are
being generated. Using the `< (left)` and `> (right)` arrows, navigate
to the correct month, and click on the date to select it.

In the `Department` field, select the desired department from the
drop-down menu.

When a department is selected, the employees listed for that department
appear in the `Employee` section.

Under the `Employee` section, enter the `Commission Amount` for each
employee in the appropriate column. To remove an employee, click the `🗑️
(trash)` icon to remove the line.

Add a new entry by clicking `Add a Line`, and entering the `Employee`
and the appropriate `Commission Amount`.

Click the `Upload Your File` button to add a file, if necessary. Any
file type is accepted.

Using the drop-down menu beside the `Commission Type` field, select
either `Classic Commission` or `Warrant`. `Classic` is the most typical
of commission, while `Warrant` is primarily used for Belgium companies.

Once all the commissions are properly entered, click the `Generate
Payslips` button to create the commission payslips.


---
## File: ./content/applications/hr/payroll/contracts.md

# Contracts

Every employee in Odoo is required to have a contract in order to be
paid. A contract outlines the terms of an employee's position, their
compensation, their working hours, and any other details about their
position.

<div class="important">

<div class="title">

Important

</div>

Contract documents (PDFs) are uploaded and organized using the
*Documents* application, and are signed using the *Sign* application.
Ensure these applications are installed in order to send and sign
contracts. Please refer to the `/applications/finance/documents` and
`/applications/finance/sign` documentation.

</div>

To view the employee contracts, go to the `Payroll app --> Employees -->
Contracts` from the top menu. All employee contracts, and their current
contract status, are displayed in a default kanban view. The default
view displays both running contracts and contracts that need action.
Expired and canceled contracts are hidden in the default view.

![Contracts dashboard view showing running contracts and contracts with
issues.](contracts/contracts-overview.png)

<div class="note">

<div class="title">

Note

</div>

The list of contracts in the *Payroll* application matches the list of
contracts in the *Employees* application. The default contracts view in
the *Payroll* application displays running contracts and contracts
needing attention, while the default contracts view in the *Employees*
application displays all contracts in a kanban view, organized by their
stage, regardless of status. All contracts can be viewed by changing the
filters.

</div>

## Create a new contract

In order for an employee to be paid, an active contract is required. If
a new contract is needed, click the `Create` button on the contracts
dashboard. A contract form appears where the information can be entered.
Required fields are underlined in bold.

### Required fields

![New contract form to be filled in when creating a new
contract.](contracts/required-fields.png)

  - `Contact Reference`: Type in the name or title for the contract,
    such as <span class="title-ref">John Smith Contract</span>.
  - `Company`: Select the company the contract applies to by clicking on
    the drop-down menu. A new company can be created by typing the name
    in the field, then clicking either `Create` to create the new
    company, or `Create and Edit` to create the new company and edit the
    company details.
  - `Salary Structure Type`: Select one of the salary structure types
    from the drop-down menu. The default salary structure types are
    `Employee` or `Worker`. A new salary structure type can be created
    by typing the name in the field.
  - `Start Date`: The date the contract starts. Choose a date by
    clicking on the drop-down menu, navigating to the correct month and
    year by using the `< > (arrow)` icons, then clicking on the `date`.
  - `Working Schedule`: Select one of the working schedules from the
    drop-down menu.

<div class="tip">

<div class="title">

Tip

</div>

The `Working Schedule` drop-down menu displays all the working times for
the selected `Company`. To modify or add to this list, go to `Payroll
-->
Configuration --> Working Times` and either `Create` a new working time
or click on an existing working time and edit it by clicking `Edit`.

</div>

### Optional fields

  - `Employee`: Name of the employee that the contract applies to.
  - `Department`: The department the contract applies to.
  - `Job Position`: The specific job position the contract applies to.
  - `Contract Type`: Choose from `CDI`, `CDD`, or `PFI` from the
    drop-down menu.
      - `CDI` is an open-ended contract with only a start date but no
        end date.
      - `CDD` is a contract with both a start date and an end date.
      - `PFI` is a Belgian-specific contract used when hiring employees
        that need training, and covers the training period specifically.
  - `End Date`: If the contract has a specific end date, click the
    drop-down menu, navigate to the correct month and year using the
    arrow icons, then click on the date.
  - `HR Responsible`: If there is a specific person in HR that is
    responsible for the contract, select the person from the drop-down
    menu.
  - `Analytic Account`: This field allows a link between the contract
    and a specific analytic account for accounting purposes.

### Contract details

The contract details section allows for the addition and editing of a
contract, and the ability to send the contract to the employee for
approval and signatures.

![Contract details in optional tabs for a new
contract.](contracts/contract-details.png)

  - `Contract Template`: Select a pre-existing contract template from
    the drop-down menu. Contract templates are typically created through
    the *Recruitment* application.
  - `New Contract Document Template`: Select a contract from the
    drop-down menu to be modified for this new employee contract.
  - `Contract Update Document Template`: Select a contract from the
    drop-down menu if the employee has an existing contract that
    requires updating.
  - `Notes`: The notes field is a text field where any notes for the
    employee contract can be entered for future reference.

#### Modifying a contract

Click the `External Link` button at the end of each line to open the
corresponding contract template and make any changes.

![Contract details in optional tabs for a new
contract.](contracts/external-link.png)

A pop-up window appears with all the contract details. Modify the fields
for the contract as needed.

![Edit the details for the contract.](contracts/modify-contract.png)

  - `Tags`: Select any tags associated with the contract.
  - `Signed Document Workspace`: This is where the signatures are
    stored. Choose a pre-configured workspace or create a new one.
  - `Signed Document Tags`: Select or create any tags associated only
    with the signed contract as opposed to the original unsigned
    contract.
  - `Redirect Link`: Enter a redirect link for the employee to access
    the contract. A redirect link takes the user from one URL to
    another, in this case, to the newly updated contract specifically
    written for them.
  - `Who can Sign`: Select either `All Users` or `On Invitation`.
      - `All Users`: Any user in the organization can sign the contract.
      - `On Invitation`: Only users selected in this field can sign the
        contract.
  - `Invited Users`: Select the person(s) that can sign the document.
  - `Document`: The attached document can be replaced by clicking the
    `✏️
    (pencil)` icon. A pop-up window appears so another document can be
    selected for upload. The file must be a PDF. To remove the document,
    click the `🗑️ (trash can)` icon.

Once the edits are complete, click the `Save` button. All the
information for the selected contract template populates the fields in
the `Salary Information` tab. Any additional tabs, such as `Personal
Documents`, appears if applicable.

### Salary information

![Optional tabs for a new contract.](contracts/salary-info.png)

This section is where the specific salary details are defined. This
section is country-specific, so depending on where the company is
located, these fields may vary.

Enter the amount in the various fields, or check a box to apply a
benefit. Some options that can be entered here include `Meal Vouchers`,
`Fuel Card`, `Internet`, `Paid Time Off`, etc.

Some fields may be automatically filled in based off of the contracts
selected in the `Contract Details` tab.

### Attachment of salary

Any automatic deductions or allocations for an employee, such as child
support payments and wage garnishments, are referred to as a *salary
attachment*. This section is where all of these deductions or
allocations are set.

To add a new deduction, click `Add a line`. Type in a description for
the allocation under `Description`.

![Enter a new line for each type of
garnishment.](contracts/garnishment.png)

Select the `Garnished Type` from the drop-down menu. Choose from:

  - `Attachment of Salary`: Any payments taken out towards something
    that is *not* child support. Typically any garnishments such as
    lawsuit payments, payments toward taxes owed, etc.
  - `Assignment of Salary`: Any deduction that is not required but
    voluntary, such as a pre-tax allocation to a college savings
    account.
  - `Child Support`: Any payments taken out specifically for child
    support.

Enter the start and end dates the entry applies to. Click on the
drop-down menu under `From` and `To`, navigate to the correct month and
year by using the `< > (arrow)` icons, then click on the `date`.

Last, enter the `Amount` that each payslip pays towards the entry.

To delete a line, click the `🗑️ (trash can)` icon at the end of the
line.

### Save and send the contract

Once a contract has been created and/or modified, save the contract by
clicking the `Save` button. Next, the contract must be sent to the
employee to be signed.

Click on one of the following buttons to send the contract to the
employee:

![Send the contract to the employee via one of the
buttons.](contracts/send-contract.png)

  - `Generate Simulation Link`: This option is for Belgian companies
    only. Clicking this opens a pop-up window that contains the basic
    information from the contract as well as a link for the contract
    when using the salary configurator. Click `Send Offer` to send an
    email to the employee so they can sign the contract.
    
    ![Sends a link to the employee for the
    contract.](contracts/simulation.png)
    
    <div class="note">
    
    <div class="title">
    
    Note
    
    </div>
    
    In order to send a contract using the `Generate Simulation Link`,
    there must be a signature field in the contract PDF being sent to
    the employee so they can sign it.
    
    </div>

  - `Signature Request`: Click this and a pop-up window appears where an
    email can be typed to the employee. Select the document, such as a
    contract, NDA, or Homeworking Policy, from the drop-down menu, and
    fill out the email section. Click `Send` when the email is ready to
    be sent.
    
    ![Request a signature for the contract via
    email.](contracts/sign-contract.png)

  - `Credit Time`: This option is for Belgian companies only. When
    clicked, a pop-up window appears that allows for the changing of
    working times, and can compute time off.


---
## File: ./content/applications/hr/payroll/work_entries.md

# Work entries

The *Work Entries* dashboard, which can be found by going to `Payroll
--> Work
Entries --> Work Entries`, provides a visual overview of the individual
time sheets of every employee, with each day split into a morning shift
and an afternoon shift.

![Work Entries dashboard view showing all employee's work
entries.](work_entries/work-entries-overview.png)

To change the view so that only the entries for a single day, week, or
month are shown, click on one of the corresponding links for `Day`,
`Week`, or `Month`, located at the top of the dashboard.

Use the `⬅️ (left arrow)` and `➡️ (right arrow)` icons on the left and
right side of the `Today` button to adjust the displayed dates. The
arrows will adjust the date based on the type of time selected. For
example, if month is selected, the arrows will move one month with each
click of the arrow. If week or day is selected, the time will move by
either a week or a day for each click of the arrow, respectively.

## Adding a new work entry

If a work entry is missing and needs to be added, such as sick time or
time off, click `Add` to create a new work entry. A pop-up will appear,
with several fields to fill in.

Enter the `Work Entry Name`, such as <span class="title-ref">Sick
Time</span> or any other short description. Select the `Employee` and
the `Work Entry Type` from the respective drop-down lists.

![Filling in the work entry Create form in
Odoo.](work_entries/create.png)

Next, enter the date and time for the work entry in the `From` and `To`
drop-downs. First, select the date by navigating to the correct month
and year using the `⬅️ (left arrow)` and `➡️ (right arrow)` icons, then
click on the specific day.

Then, select the time by clicking on the `⏰ (clock)` icon, and using the
`⬆️ (up
arrow)` and `⬇️ (down arrow)` icons for each section to enter the hour,
minute, and second for the time period.

The `Period` will display the hours based on the `To` and `From`
entries.

<div class="tip">

<div class="title">

Tip

</div>

Before clicking either `Save & Close` or `Save & New`, it is good to
double check the `Period` to ensure the time stated corresponds to the
`To` and `From` fields.

![Hours entered in the Period field.](work_entries/period.png)

</div>

Once the information is entered, click `Save & Close` to save the entry
and close the pop-up, or `Save & New` to save the entry and create
another `Work Entry Type`.

## Regenerate work entries

After a work entry has been either added or modified, the work entries
need to be regenerated for the affected employee(s). Click on the
`Regenerate Work Entries` button at the top of the main dashboard, and a
pop-up will appear.

Select the `Employee` to regenerate work entries for from the `drop-down
menu`, and adjust the `From` and `To` fields so the correct date range
is displayed. Click the `Regenerate Work Entries` button and the work
entries will be recreated. Once finished, the pop-up will close.

![Regenerate a work entry for a particular
employee.](work_entries/regenerate-details.png)

## Conflicts

A conflict appears for any request that has not been approved, such as
sick time or vacation, or if there are any errors on the work entry,
such as required fields being left blank. Conflicts are required to be
resolved before payslips can be generated.

Any work entry that has a conflict to be resolved is indicated on the
main `Work Entry` overview dashboard, located by going to `Payroll -->
Work Entries --> Conflicts`, where only conflicts needing resolution are
shown.

![Conflicts dashboard view showing all employee's conflicts in work
entries.](work_entries/conflicts.png)

Conflicts are indicated with an orange triangle in the top left corner
of each individual entry. Click on an individual work entry to see the
conflict details in a pop-up.

The conflict is briefly explained in an orange text box.

![Details for a conflict appear in the
pop-up.](work_entries/conflict-detail.png)

The `Work Entry Name`, `Employee`, and `Work Entry Type` are listed on
the left side of the pop-up. The `From` and `To` date range, as well as
the total time requested (in hours), appear in the `Period` field on the
right side.

If there is a conflict because a time-off request for the same time
already exists in the system, the time-off will be entered in the `Time
Off` field. Clicking the `External
Link` button next to the `Time Off` entry will bring up the duplicate
time-off request.

The details for the time-off request appear in the pop-up. The request
can be modified if needed. Click either the `Validate` or `Refuse`
button to approve or deny the request, then click the `Save` button to
save the changes.

![Edit and/or validate a duplicate time-off
request.](work_entries/validate.png)

Once the duplicate time-off request has been approved and saved, the
screen goes back to the conflict. Click `Refuse Time Off` or `Approve
Time Off` via the buttons in the top right to either approve or deny the
request. Repeat for all conflicts until there are no conflicts to
resolve.

After conflicts have been resolved, work entries must be regenerated for
each employee by clicking the `Regenerate Work Entries` button, and
entering the corresponding information for each employee.

![Regenerate Work Entries button on the Work Entries Regeneration
form.](work_entries/regenerate-employee.png)

## Generating payslips

To generate payslips, navigate to the time period the payslips should be
generated for, either day, week, or month. When the desired pay period
is displayed, click the `Generate Payslips` button.

![Generate Payslips button on the Work Entry
dashboard.](work_entries/generate-payslips.png)

<div class="tip">

<div class="title">

Tip

</div>

If the `Generate Payslips` button is not active (appears light turquoise
instead of dark turquoise), that indicates there are conflicts. *Solve
conflicts first* will appear as a warning when `Generate Payslips` is
moused over. Resolve all conflicts before generating payslips.

</div>

A batch entry will appear for the time period selected. The batch name
appears at the top in the `Name` field, typically listing the month and
year for the particular batch.

The date range the payslips apply to appears in the `Period` field. The
company appears in the `Company` field, along with an option to mark the
payslips as a credit note. To make changes, click the `Edit` button in
the top left, make any changes, then click either `Save` to accept the
changes or `Discard` to revert to the original data.

![Batch information that appears when making a
batch.](work_entries/batch.png)

Click the `Create Draft Entry` button to create the payslips for the
batch.

Click on the `Payslips` button in the top right to view all the payslips
for the batch.

<div class="note">

<div class="title">

Note

</div>

Payslips will have a status of *Waiting* until the `Create Draft Entry`
button has been clicked. After, the payslip status will change to
*Done*.

</div>

Payslips can be printed by clicking the box next to each payslip to
print, or clicking the box next to `Reference` to select all the
payslips at once. Click the `Print` button, and a PDF file will be
created with all the specified payslips.

![Print button for printing the
payslips.](work_entries/print-payslips.png)

<div class="seealso">

`Configure work entries <payroll/work-entries-config>`

</div>


---
## File: ./content/applications/hr/payroll/reporting.md

# Reporting

The `Reporting` section of the *Payroll* app offers a variety of reports
to choose from. The `Payroll`, `Meal Vouchers`, `Attachment of Salary`,
and `DMFA` reports are universal and available for all companies
regardless of location. The `Paid Time Off Allocation`, `273S Sheet`,
and `274.XX Sheets` reports are specific to Belgian companies only.

To view a report, go to `Payroll --> Reporting` and click on the
specific report.

![Report dashboard view.](reporting/reports.png)

If a report is unavailable to a company, a user error pops up, stating
<span class="title-ref">You must be logged in to a Belgian company to
use this feature.</span>

At the top of each report, click on `Filters` to display the optional
filters for the specific report. Filters show information that matches
the specific filter parameters. For example, when selecting the
`Last 365 Day Payslip` filter, only payslips for the last 365 days
appear. All reports have the option to add a custom filter, and each
have different default custom filter options. Select the parameters,
then click the `Apply` button.

![Report dashboard view.](reporting/custom-filter.png)

Clicking on `Favorites` displays three options: `Save the current
search`, `Add the search to the dashboard`, or `Insert the search to a
Google
spreadsheet`.

![Favorite options for reports.](reporting/favorites.png)

## Payroll

Click on `Payroll --> Reporting --> Payroll` to display the `Payroll
Analysis` report.

![Report dashboard view.](reporting/payroll-report.png)

This shows all the payslips generated in the last 365 days. The report
can display metrics for a variety of parameters. Click the `Measures`
box to view a drop-down menu with the various options to display. The
options available include: `# Payslip`, `Basic Wage`, `Basic Wage for
Time Off`, `Days of Paid Time Off`, `Days of
Unforeseen Absence`, `Days of Unpaid Time Off`, `Gross Wage`, `Net
Wage`, `Number of Days`, `Number of Hours`, `Work Days`, `Work Hours`,
and `Count`.

![Report dashboard view.](reporting/measures.png)

### Line chart

A line chart is the default view for the *Payroll Analysis* report. If a
different view was selected, click on the `Line Chart` icon (middle
icon) in the menu bar to change the view back to a line chart. An option
to display the line chart in ascending or descending order appears at
the end of the options.

![Report dashboard view.](reporting/line-chart.png)

### Bar chart

To display the data in a bar chart, click on the `Bar Chart` icon (first
icon) in the menu bar.

![Report dashboard view.](reporting/bar-chart.png)

Click the `Stacked` icon to view the bar chart in a stacked format
(where multiple values appear in each column). An option to display the
columns in ascending or descending order appears at the end of the
options.

<div class="tip">

<div class="title">

Tip

</div>

Clicking an option enables it. To disable the option, click it again.
When the option is enabled it appears grey. When it is inactive, it
appears white.

</div>

### Pie chart

To display the data in a pie chart, click on the `Pie Chart` icon (last
icon) in the menu bar. There are no additional options available in this
view.

![Report dashboard view.](reporting/pie-chart.png)

### Pivot table

The bottom half of the `Payroll Analysis` dashboard presents a pivot
table no matter which type of chart is selected for the top of the
dashboard. The default information displayed is the number of payslips,
net wage, gross wage, days of paid time off, and days of unpaid time
off. The information is divided by department. To display more
information on the report, select the `Measures` drop-down menu, then
click on any other items to display.

![Report dashboard view.](reporting/measures-bottom.png)

To sort the entries by a specific column, such as `Net Wage`, click on
the column name twice. The first click selects the column, and the
second click sorts the information in descending order.

![To sort information by descending order, click the column head
twice.](reporting/net-wage.png)

To export the data in an XLSX format, click the `Download xlsx` icon.
The information will be downloaded into an Excel spreadsheet.

![Download an Excel spreadsheet of the data by clicking the download
button.](reporting/export.png)

The data can be inserted into a spreadsheet by clicking the `Insert in
Spreadsheet` button. A pop-up appears asking which spreadsheet to place
the information in. Select an existing spreadsheet or enter the name for
a new spreadsheet. Click the `Confirm` button to move to a spreadsheet
view with all the information populated.

![Send the data to a spreadsheet.](reporting/spreadsheet.png)

Once in the spreadsheet view, click on `File`, then select `Save` to
save the data, or `Save as Template` to save the setting as a template
to use in the future.

<div class="note">

<div class="title">

Note

</div>

The *Documents* application must be installed in order to use the
`Insert in
Spreadsheet` option.

</div>

## Meal Vouchers

`Meal Vouchers` provides an overview of the meal vouchers used by
employees, and can be shown by `Day`, `Week`, `Month`, `Quarter`, or
`Year`. The default view is by month.

![Meal voucher](reporting/meal-vouchers.png)

To change the displayed view, click on `Total`. The data collapses,
showing only the count column. Click on `Total` again, then hover over
`Day`, then click on one of the other time-period options available.

![Meal voucher](reporting/voucher-day.png)

It is possible to compare the current meal voucher report to the one for
the previous time period or the previous year. To view these
comparisons, click on the `Comparison` drop-down menu at the top, then
select either `Date: Previous Period` or `Date: Previous Year`.

![Meal voucher](reporting/meal-comparison.png)

To export the data in an XLSX format, click the `Download xlsx` icon.
The information will be downloaded into an Excel spreadsheet.

![Download an Excel spreadsheet of the data by clicking the download
button.](reporting/voucher-download.png)

The data can be inserted into a spreadsheet by clicking the `Insert in
Spreadsheet` button. A pop-up appears asking which spreadsheet to place
the information in. Select an existing spreadsheet or enter the name for
a new spreadsheet. Click the `Confirm` button to move to a spreadsheet
view with all the information populated.

Once in the spreadsheet view, click on `File`, then select `Save` to
save the data, or `Save as Template` to save the settings as a template
to use in the future.

<div class="note">

<div class="title">

Note

</div>

The *Documents* application must be installed in order to use the
`Insert in
Spreadsheet` option.

</div>

## Attachment of Salary

The `Attachment of Salary` report shows all deductions or allocations
per employee, such as child support payments and wage garnishments.

![View the Attachment of Salary report that shows all salary
garnishments.](reporting/attachment-of-salary.png)

The employees are listed in the left-side column, while the different
deductions are listed in the top row, organized by month.

The report can be exported as a XLSX file, or inserted into a
spreadsheet, using the corresponding buttons at the top.

Clicking on the `Measures` button shows options for how the data is
displayed. `Assignment of salary`, `Attachment of salary`, `Child
support`, and `Count`, can all be selected or deselected by clicking on
the item. If an item has a check mark, it is displayed.

![Select the options that be displayed in the
report.](reporting/attachment-measures.png)

The salary attachment report can be compared to the one for the previous
time period or the previous year. To view these comparisons, click on
the on the `Comparison` drop-down menu at the top, then select either
`Payslip End Date: Previous Period` or `Payslip End
Date: Previous Year`.


---
## File: ./content/applications/hr/attendances/hardware.md

# Hardware

## Kiosk management

A kiosk is a self-service station that allows employees to check in and
check out for work shifts.

There are two ways to set up a kiosk:

  - **Laptop and desktop PC**
    
    Running a kiosk in a web browser is the cheapest and most flexible
    option. You can print employee badges with any thermal or inkjet
    printer compatible with your web browser.

  - **Tablet and mobile phone (Android or iOS)**
    
    Tablets and mobile phones take up much less space, and their
    touchscreens are easy to use. Consider putting them in a secure
    stand at the front desk or mounting them securely on a wall.
    
    <div class="tip">
    
    <div class="title">
    
    Tip
    
    </div>
    
    We recommend using an iPad together with the [Heckler Design
    WindFall
    Stand](https://hecklerdesign.com/products/windfall-stand-for-ipad)
    
    </div>

## RFID key fob readers

Employees can scan personal RFID key fobs with an RFID reader to manage
check-ins and check-outs quickly and easily.

![An RFID key fob is placed on an RFID reader](hardware/rfid-reader.jpg)

<div class="tip">

<div class="title">

Tip

</div>

We recommend using the [Neuftech USB RFID
Reader](https://neuftech.net/Neuftech-USB-RFID-Reader-ID-Kartenleseger%C3%A4t-Kartenleser-Kontaktlos-Card-Reader-f%C3%BCr-EM4100).

</div>

<div class="note">

<div class="title">

Note

</div>

An IoT box is **not** required.

</div>

## Barcode scanners

Employees can scan the barcode on their employee badges to manage
check-ins and check-outs quickly and easily. The kiosk mode works with
most USB barcode scanners connected directly to a computer. Bluetooth
barcode scanners are also supported natively.

<div class="tip">

<div class="title">

Tip

</div>

We recommend using the [Honeywell product
line](https://sps.honeywell.com/us/en/products/productivity/barcode-scanners).
If the barcode scanner is connected directly to a computer, it must be
configured to use the computer's keyboard layout.

</div>

<div class="note">

<div class="title">

Note

</div>

An IoT box is **not** required.

</div>


---
## File: ./content/applications/hr/employees/new_employee.md

# Add a new employee

When a new employee is hired, the first step is to create a new employee
form. Starting in the `Employees` app default view, click the `Create`
button to access a new employee form. Fill out the required information
(underlined in bold) and any additional details, then click `Save`.

![Create a new employee card.](new_employee/employee-new.png)

<div class="note">

<div class="title">

Note

</div>

The current company phone number and name is populated in the `Work
Phone` and `Company` fields.

</div>

## General information

### Required fields

  - `Name`: Enter the employee's name.
  - `Company`: Select the company from the drop-down menu that the new
    employee is hired by, or create a new company by typing the name in
    the field.
  - `Working Hours`: In the `Work Information` tab, select the desired
    `Working Hours` from the drop-down menu.

![Working Hours are located in the Work Information
tab.](new_employee/working-hours.png)

<div class="note">

<div class="title">

Note

</div>

`Working Hours` are related to a company's working times, and an
employee cannot have working hours that are outside of a company's
working times.

Each individual working time is company-specific, so for multi-company
databases, each company needs to have its own working hours set.

If an employee's working hours are not configured as a working time for
the company, new working times can be added, or existing working times
can be modified. To add or modify a working time, go to the `Payroll app
--> Configuration --> Working Times`, and add a new working time or edit
an existing one.

After the new working time is created, set the working hours for the
employee.

</div>

### Optional fields

  - `Photo`: In the top right image box of the employee card, click on
    the `✏️
    (pencil)` edit icon to select a photo to upload.
  - `Job Position`: Enter the employee's job position title.
  - Tags: Click on a tag in the drop-down menu to add any tags
    applicable to the employee. Any tag can be created in this field by
    typing it in. Once created, the new tag is available for all
    employee cards. There is no limit to the amount of tags that can be
    added.
  - Work Contact Information: Enter the employees `Work Mobile`, `Work
    Phone`, `Work Email`, and/or `Company` name.
  - `Department`: Select the employee's department from the drop-down
    menu.
  - `Manager`: Select the employee's manager from the drop-down menu.
  - `Coach`: Select the employee's coach from the drop-down menu.

<div class="note">

<div class="title">

Note

</div>

After a `Manager` is selected, if the `Coach` field is blank, the
selected manager automatically populates the `Coach` field.

</div>

<div class="tip">

<div class="title">

Tip

</div>

To make edits to the selected `Department`, `Manager`, `Coach`, or
`Company`, click the `External Link` button next to the respective
selection. The `External Link` button opens the selected form, allowing
for modifications. Click `Save` after any edits are made.

</div>

## Additional information tabs

### Resumé tab

#### Resumé

Next, the employee's work history is entered in the `Resumé` tab. Each
previous experience must be entered individually. Click `Create a New
Entry`, and the `Create Resumé
lines` form appears. Enter the following information, then click the
`Save & Close` button if there is only one entry to add, or click the
`Save & New` button to save the current entry and create another line.

![Add information for the previous work experience in this
form.](new_employee/resume-lines.png)

  - `Name`: Type in the name of the previous work experience.
  - `Type`: From the drop-down menu, select either `Experience`,
    `Education`, `Internal Certification`, `Internal Training`, or type
    in a new entry.
  - `Display Type`: Select either `Classic`, `Certification`, or
    `Course` from the drop-down menu.
  - `Date Start` and `Date End`: Enter the start and end dates for the
    work experience. To select a date, use the `< (left)` and `>
    (right)` arrow icons to scroll to the desired month, then click on
    the day to select it.
  - `Description`: Enter any relevant details in the field.

#### Skills

An employee's skills can be entered in the `Resumé` tab in the same
manner a resumé line is created. Click the `Create a New Entry` button
under `Skills` and a `Create Skills` form appears. Fill in the
information, then click the `Save &
Close` button if there is only one entry to add, or click the `Save &
New` button to save the current entry and immediately create a new
entry.

![Create a new skill for the employee.](new_employee/create-skill.png)

  - `Skill Type`: Select from the drop-down menu either `Languages`,
    `Dev`, `Music`, `Marketing`, or type in a new skill type. After
    entering the new skill type, an option to `Create` the skill or
    `Create and
    Edit` the skill appears. Click `Create and Edit`, and a pop-up for
    the specific skill type appears. This can also be accessed with the
    `External Link` button next to the new skill. This form allows for
    the creation of specific skills and levels. Click `Add a
    line` and enter the information for the new skill, then repeat for
    all other added skills. Repeat this process for the `Levels`
    section. Click `Add a line` to add each level and progress.
    
    ![Add a new skill and levels.](new_employee/new-skills.png)
    
    <div class="example">
    
    To add a math skill set, enter <span class="title-ref">Math</span>
    in the `Name` field. In the `Skills` field, enter
    <span class="title-ref">Algebra</span>,
    <span class="title-ref">Calculus</span>, and
    <span class="title-ref">Trigonometry</span>. And, in the `Levels`
    field enter <span class="title-ref">beginner</span>,
    <span class="title-ref">intermediate</span>, and
    <span class="title-ref">expert</span>. Then, either click `Save &
    Close` or `Save & New`.
    
    </div>

  - `Skill`: The corresponding skills associated with the selected
    `Skill Type` appear in a drop-down menu. For example, selecting
    `Language` as the `Skill
    Type` presents a variety of languages to select from under the
    `Skills` field. Select the appropriate pre-configured skill, or type
    in a new one.

  - `Skill Level`: Pre-defined skill levels associated with the selected
    `Skill
    Type` appear in a drop-down menu. Select a level or create a new
    skill level by typing it in.

  - `Progress`: Progress is automatically selected based on the selected
    `Skill
    Level`. Skill levels and progress can be modified in the `Skill
    Type` pop-up form, which is accessed via the `External Link` button
    next to `Skill Type` field.

To delete any line from the `Resumé` tab, click the `🗑️ (trash can)`
delete icon to delete the entry. Add a new line by clicking the `ADD`
button next to the corresponding section.

### Work information tab

  - `Location`: Select the `Work Address` from the drop-down menu. The
    `External Link` button opens up the selected company form in a
    window, and allows for editing. The `Work Location` is where any
    specific location details should be noted, such as a floor, or
    building.

  - `Approvers`: Using the drop-down menus, select the employees
    responsible for approving `Time Off`, `Expenses`, and `Timesheets`
    for the employee. The `External Link` button opens a form with the
    approver's `Name`, `Email Address`, `Company`, `Phone`, and `Mobile`
    fields. These can be modified, if needed. Click `Save` after making
    any edits.

  - `Schedule`: Select the `Working Hours` (required) and `Timezone` for
    the employee. The `External Link` button opens up a detailed view of
    the specific daily working hours. Working hours can be created,
    modified, or deleted here. Global time off (such as holidays) can be
    entered in the `Global Time Off` tab. Click `Add a line` to add a
    new global time off.

  - `Planning`: Click on a planning role from the drop-down menu for
    both the `Default Planning Role` and the `Planning Roles` fields to
    add a role. There is no limit to the amount of `Planning Roles` that
    can be selected for an employee, but there can only be one `Default
    Planning Role`. The default is the *typical* role that the employee
    performs, where the `Planning Roles` are *all* the specific roles
    the employee is able to perform.
    
    ![Add the work information to the Work Information
    tab.](new_employee/work-info.png)

### Private information tab

No information in the `Private Information` tab is required, however,
some information in this section may be critical for the company's
payroll department. In order to properly process payslips and ensure all
deductions are accounted for, the employee's personal information should
be entered.

Here, the employee's `Private Contact`, `Marital Status`, `Emergency
Contact`, `Education`, `Citizenship`, `Dependant`, and `Work
Permit` information is entered. Fields are entered either using a
drop-down menu, clicking a check box, or typing in the information.

  - `Private Contact`: Enter the `Address` for the employee. The
    selection can be made with the drop-down menu. If the information is
    not available, type in the name for the new address. To edit the new
    address, click the `External Link` button to open the address form.
    On the address form, enter the necessary details, then click `Save`.
    Some other information in the `Private Contact` section may
    auto-populate, if the address is already listed in the drop-down
    menu.
  - `Marital Status`: Select either `Single`, `Married`, `Legal
    Cohabitant`, `Widower`, or `Divorced` from the drop-down menu.
  - `Emergency Contact`: Type in the name and phone number of the
    employee's emergency contact.
  - `Education`: Select the highest level of education completed by the
    employee from the `Certificate Level` drop-down menu. Options
    include `Graduate`, `Bachelor`, `Master`, `Doctor`, or `Other`. Type
    in the `Field of Study`, and the name of the `School` in the
    respective fields.
  - `Citizenship`: This section houses all the information relevant to
    the citizenship of the employee. Some selections use a drop-down
    menu, as does the `Nationality (Country)`, `Gender`, and `Country of
    Birth` sections. The `Date of Birth` uses a calendar module to
    select the date. First, click on the name of the month, then the
    year, to access the year ranges. Use the `< (left)` and `> (right)`
    arrow icons, navigate to the correct year range, and click on the
    year. Next, click on the month. Last, click on the day to select the
    date. Type in the information for the `Identification No`, `Passport
    No`, and `Place of Birth` fields. If the employee is `Disabled` or a
    `Nonresident`, click the check box next to the respective fields.
  - `Dependant`: If the employee has any dependants, that information is
    entered here. Type in the number of children the employee has, and
    check the boxes next to `Disabled
    Children` and/or `Other Dependent People` if applicable.
  - `Work Permit`: If the employee has a work permit, enter the
    information in this section. Type in the `Visa No` and/or `Work
    Permit No` in the corresponding fields. Using the calendar module,
    select the `Visa Expire Date` to enter the expiration date.

![Add the private information to the Private Information
tab.](new_employee/private-info.png)

### HR settings tab

This tab provides various fields for different information, depending on
the country the company is located. Different fields are configured for
different locations, however some sections appear regardless.

  - `Status`: If applicable, select a `Related User`, `Job Position`,
    and `Language` with the drop-down menus. Type in the `Registration
    Number of
    the Employee`, and the `NIF Country Code` if available.
  - `Fleet`: If the employee has access to a company car, enter the
    `Mobility
    Card` information here.
  - `Timesheets`: Enter the employee's cost per hour in a $XX.XX format.
    This is factored in when the employee is working at a work center.
    This value affects the employee's pay, and may also affect
    manufacturing costs for a product, if the value of the manufactured
    product is not a fixed amount.
  - `Attendance`: This section may only appear for Belgian companies.
    Enter the `INSZ or BIS` number if applicable. `Badge ID` and a `PIN
    Code` can be entered here, if the employee needs/has one. Click
    `Generate` next to the `Badge ID` to create a badge ID.

![Enter any information prompted in the HR Settings tab for the
employee.](new_employee/hr-settings.png)

### Personal documents tab

The `Personal Documents` tab is only displayed for certain countries. If
this tab is not visible, it is not applicable to the company's location.

Add a file for the employee's `ID Card Copy`, `Driving License`, `Mobile
Subscription Invoice`, `SIM Card Copy`, and `Internet
Subscription Invoice` by clicking the `Upload Your File` button next to
the corresponding field. File types that can be accepted are `.jpg`,
`.png`, and `.pdf`.

![Upload personal documents for the employee in the Personal Documents
tab, either a jpg,&#10;png, or pdf.](new_employee/personal.png)


---
## File: ./content/applications/productivity.md

  - nosearch

# Productivity

<div class="toctree">

productivity/discuss productivity/calendar productivity/iot
productivity/studio

</div>


---
## File: ./content/applications/services.md

  - nosearch

# Services

<div class="toctree">

services/project services/timesheets services/field\_service
services/helpdesk

</div>


---
## File: ./content/applications/marketing/sms_marketing.md

  - nosearch

  - show-content

  - hide-page-toc

  - show-toc

# SMS Marketing

<div class="seealso">

\- [Odoo Tutorials: Marketing](https://www.odoo.com/slides/marketing-27)

</div>

<div class="toctree" data-titlesonly="">

sms\_marketing/pricing

</div>


---
## File: ./content/applications/marketing/social_marketing.md

  - nosearch

  - show-content

  - hide-page-toc

  - show-toc

# Social Marketing

<div class="seealso">

\- [Odoo Tutorials: Marketing](https://www.odoo.com/slides/marketing-27)

</div>

<div class="toctree" data-titlesonly="">

social\_marketing/essentials

</div>


---
## File: ./content/applications/marketing/email_marketing/unsubscriptions.md

# Manage unsubscriptions (Blacklist)

Providing recipients with the power to unsubscribe from mailing lists is
not only a smart business practice, it's often a legal requirement. By
allowing recipients to unsubscribe from a mailing list establishes a
sense of trust with an audience, and helps companies appear genuine (and
not spammy).

## Enable the Blacklist feature

First, the *Blacklist* feature must be enabled. To do that, navigate to
`Email
Marketing app --> Configuration --> Settings`, enable to `Blacklist
Options when
Unsubscribing`, and click `Save`.

![View of the blacklist feature in the Settings page of the Odoo Email
Marketing app.](unsubscriptions/blacklist-feature.png)

With that feature activated, an *Unsubscribe* link appears in mailings.
If a recipient clicks that link, Odoo reveals a `Unsubscriptions` page,
where they can directly manage their subscriptions.

<div class="note">

<div class="title">

Note

</div>

With a test mailing, clicking the `Unsubscribe` link reveals an error
page (*error 403 - Access Denied*). To make sure the link is working
properly, create the mailing, and only send it to a personal email.

</div>

## Blacklist

In addition to having the option to *Unsubscribe* from specific mailing
lists, the recipient can also *Blacklist* themselves, meaning they will
not receive *any* more emails.

<div class="note">

<div class="title">

Note

</div>

The mailing list has to be configured as *Public* in order to be visible
for users.

</div>

To view a complete collection of blacklisted email addresses, navigate
to `Email
Marketing app --> Configuration --> Blacklisted Email Addresses`.

![View of the blacklisted email addresses page in Odoo Email
Marketing.](unsubscriptions/blacklisted-email-addresses.png)

When a blacklisted record is selected from this page, Odoo reveals a
separate page with that blacklisted recipient's contact information.

![View of a blacklisted contact detail form in Odoo Email
Marketing.](unsubscriptions/blacklisted-contact-form.png)

In the `Chatter` of this page, there's a time-stamped message, informing
the user when that recipient blacklisted themselves (via a `Mail
Blacklist created` log note).

## Unblacklist contacts

To *Unblacklist* contacts, click the `Unblacklist` button in the
upper-left corner to remove the contact from the blacklist, allowing
them to receive mailings once again.

When `Unblacklist` is clicked, a pop-up appears. In this pop-up, the
specific email address is listed, and there's a `Reason` field, in which
a reason can be entered, explaining why this particular contact was
removed from the blacklist.

![View of the unblacklist pop-up window in the Odoo Email Marketing
application.](unsubscriptions/unblacklist-popup.png)

After filling in the fields, click `Confirm` to officially remove that
particular contact from the blacklist.

<div class="seealso">

\- `/applications/marketing/email_marketing` -
`/applications/marketing/email_marketing/mailing_lists`

</div>


---
## File: ./content/applications/marketing/email_marketing/mailing_lists.md

# Mailing lists

Mailing lists are important for a number of reasons. Mailing lists can
provide valuable leads for sales teams, communicate with focus groups
participants, contact consumers directly for useful feedback, and more.

## Create mailing lists

To create a mailing list in the *Email Marketing* application, navigate
to `Mailing
lists --> Mailing lists --> Create`. Clicking `Create` reveals a pop-up
window.

![View of the mailing list pop-up in the Odoo Email Marketing
application.](mailing_lists/new-mailing-list-popup.png)

In the pop-up, name the mailing list and designate if the mailing list
should be public with the `Is Public` checkbox.

The `Is Public` option allows the mailing list to be accessible by
recipients in the unsubscription page, making it possible for them to
update their subscription preferences.

After those options have been configured, click `Create` to create the
mailing list, which Odoo automatically adds to the `Mailing Lists` page.

## Add contacts to a mailing list

After a mailing list has been created (and added to the `Mailing Lists`
dashboard), click on the desired mailing list to add contacts to the
list.

Clicking the desired mailing list reveals a separate `Mailing List
Contacts` page, in which contacts can be added to this specific list by
clicking `Create`, and adding contact information directly on a separate
contact detail form.

Or, while in the `Email Marketing` application, navigate to `Mailing
Lists --> Mailing List Contacts`. Doing so reveals a separate page with
all the mailing list contacts in the database.

From here, click `Create`, and add a contact with the same previous
steps. Or, click the `Import` icon (to the right of the `Create` button)
to import contacts into the database.

Once contacts are in the database, click into the desired contact's
detail form, and add the preferred mailing list in the `Mailing List`
tab (at the bottom of the contact detail form), by clicking `Add a
line`, and selecting the desired mailing list. Multiple mailing lists
can be added to a single contact's detail form.

![View of a contact detail form with mailing list tab in Odoo Email
Marketing.](mailing_lists/contact-form-mailing-list-tab.png)

### Create new mailing list from contact detail form

To create a mailing list from a contact detail form, click `Add a line`,
and type in the name of a new mailing list in the empty field that
appears. Then, select either `Create` or `Create and Edit...`.

![View of the new mailing list drop-down on contact form in Odoo Email
Marketing.](mailing_lists/new-list-dropdown-create-options.png)

The `Create` option quickly creates the mailing list to the contact
detail form, and the list can be configured at a later date. The `Create
and Edit...` option creates the mailing list, and reveals a pop-up
window, in which the new mailing list can be configured right away.

![View of the create and edit mailing list pop-up in Odoo Email
Marketing.](mailing_lists/create-and-edit-mailing-list-popup.png)

## Link a mailing list to website (Newsletter blocks)

When a mailing list is created in the database, Odoo provides the option
to directly link the mailing list on the Odoo-built website (created via
Odoo's `Website` application).

To link a mailing list to a website, navigate to the front-end of the
website, and enter `Edit` mode by clicking `Edit` in the upper-right
corner. When clicked, Odoo reveals a right-sidebar, filled with
drag-and-drop *Building Blocks* that are packed with various features,
options, and design elements.

Then, to add a *subscription field* for a specific mailing list onto a
website, drag-and-drop any of the `Newsletter` options (`Newsletter
Block`, `Newsletter Popup`, or `Newsletter`).

<div class="tip">

<div class="title">

Tip

</div>

To quickly locate the `Newsletter` building block options (while in
`Edit` mode on the front-end of the website), type
<span class="title-ref">Newsletter</span> into the search bar, located
in the right sidebar, under the `Blocks` tab, and Odoo reveals the three
different `Newsletter` block options.

![View of how to quickly search for Newsletter blocks in the Odoo
Website application.](mailing_lists/newsletter-block-search.png)

</div>

When a `Newsletter` block is dragged onto the body of the website, Odoo
reveals a pop-up window, in which the desired mailing list is selected
from a drop-down menu (and linked) to this block on the website.

![View of the add mailing list subscription pop-up on an Odoo
Website.](mailing_lists/add-mailing-list-popup-website.png)

  - `Newsletter Block` - Adds a block onto the webpage, providing
    visitors with the option to add their email address to this mailing
    list, and subscribe to future communications.
    
    Here's an example of a `Newsletter Block`.
    
    ![View of a sample newsletter block in the Odoo Website
    application.](mailing_lists/newsletter-block-sample.png)

  - `Newsletter Popup` - Tells Odoo to reveal a subscription pop-up
    window to occur at a certain part of the webpage. When the visitor
    scrolls to this predetermined point, a pop-up subscription window
    appears, asking for their email address to subscribe to the mailing
    list. The pop-up window can be edited further to fit any business
    needs.
    
    Here's an example of a `Newsletter Popup`.
    
    ![View of a sample newsletter pop-up sample on an Odoo
    Website.](mailing_lists/newsletter-popup-sample.png)

  - `Newsletter` - Provides visitors with a simple field to add their
    email address to the mailing list, and subscribe to future mailings
    in the footer (or anywhere else on the page).
    
    Here's an example of a `Newsletter` dynamic block.
    
    ![View of a Newsletter dynamic block on an Odoo
    Website.](mailing_lists/newsletter-footer-block-sample.png)

<div class="seealso">

\- `/applications/marketing/email_marketing` -
`/applications/marketing/email_marketing/unsubscriptions`

</div>


---
## File: ./content/applications/marketing/marketing_automation/advanced/understanding_metrics.md

# Understanding metrics

Metrics are detailed statistics that measure the progress and success of
marketing campaigns. When creating marketing activities in a workflow,
Odoo visually displays various metrics related to the campaign with
detailed graphs and in-depth data.

<div class="example">

A typical line graph in a marketing automation workflow showcasing the
success rate of an email.

![An example of a marketing automation campaign in
Odoo.](understanding_metrics/commercial-prospection-campaign-example.png)

</div>

In this case, the `Target` of this campaign is set to
`Lead/Opportunity`, and was narrowed down to *only* focus on the leads
(or opportunities) whose `Tag Name` contains a value of
<span class="title-ref">product</span> — and *also* have an email
address set up in the database.

Beneath the filter nodes, Odoo displays how many records in the database
fall into the previously-specified criteria filter.

<div class="example">

Below, there are 18 records in the database that match the criteria.

![Lead generation filters used to refine records on automation campaigns
in Odoo.](understanding_metrics/marketing-automation-lead-filters.png)

</div>

At the top of the marketing automation campaign form, there are a series
of smart buttons. The `Participations` smart button in this example
indicates that, out of those 18 records, 25 have become participants. In
other words, they have matched the criteria, and have already interacted
with the campaign in one way or another.

<div class="note">

<div class="title">

Note

</div>

`Records` represent a real-time number. Therefore, while the workflow is
running, changes in opportunity records (deletions, additions, or
adjustments) may occur.

This means there will be real-time updates to the number of `Records`,
but such updates do *not* change the number of `Participants`, as the
metric *will not* exclude opportunities that have already been set as
`Participants` before — Odoo just adds new ones.

That's why the number of `Records` can be different from the number of
`Participants` from time to time.

</div>

![Difference between real-time record count and total participants on a
markeing
campaign.](understanding_metrics/campaign-records-vs-participants.png)

Whenever the system runs, updating numbers and triggering actions, it
will look at the `Target` model, and check if new `Records` have been
added (or modified), which always keeps the flow up-to-date.

<div class="note">

<div class="title">

Note

</div>

The `Filter` here is applied to *all* activities. Leads that lose that
specific tag (<span class="title-ref">product</span>) in the meantime
will be excluded from later activities.

</div>

<div class="tip">

<div class="title">

Tip

</div>

Filters can also be applied to individual activities, in the `Domain`
section of the `Activity` pop-up form. Use this feature to specify an
individual filter that will *only* be performed if the records satisfy
*both* filter criteria — the activity filter and its specific domain
filter.

</div>

<div class="example">

When configuring an SMS activity, make sure a certain phone number is
set, in order to avoid triggering a SMS that would never be sent.

![A relevant targeting filter that applies to a type of individual
activity.](understanding_metrics/individual-filter-to-activity.png)

</div>

`Success` represents the number of times that the searching for
participants — who match the criteria filter(s) of that activity — was
performed successfully, in relation to the total number of participants.
If a participant does *not* match the conditions, it will be added to
the `Rejected` number.

![Overview showing participants who do or do not match filtering
criteria on an
activity.](understanding_metrics/participant-matching-success-vs-rejected.png)

Hovering over the graph on an automation activity block, Odoo displays
the number of successful and rejected participants, per day, over the
last 15 days.

<div class="note">

<div class="title">

Note

</div>

Whenever a new record is added to the `Target` model, it's automatically
added to the workflow, and it will start the workflow from the beginning
(`Parent Action`).

</div>


---
## File: ./content/applications/marketing/marketing_automation/getting_started.md

  - nosearch

# Getting Started

<div class="toctree" data-titlesonly="">

getting\_started/first\_campaign getting\_started/target\_audience
getting\_started/workflow\_activities getting\_started/testing\_running

</div>


---
## File: ./content/applications/marketing/marketing_automation/advanced.md

  - nosearch

# Advanced

<div class="toctree" data-titlesonly="">

advanced/understanding\_metrics

</div>


---
## File: ./content/applications/marketing/marketing_automation/getting_started/testing_running.md

# Testing/running campaigns

Odoo gives users the ability to test marketing campaigns (and mailings)
before officially running them.

First, open the `Marketing Automation` application, and select the
desired campaign, which reveals that campaign's detail form.

On the campaign detail form, make sure the campaign already has
activities configured (or build a campaign by following the directions
here on `this documentation
</applications/marketing/marketing_automation/getting_started/workflow_activities>`).

To start a test, click the `Launch a Test` button at the top of the
campaign form.

![Launch a test button in Odoo Marketing
Automation.](testing_running/launch-test.png)

When clicked, a `Launch a test` pop-up window appears. In the drop-down
field, choose an existing record (or create a new one) to run the test
on. To create a brand new record, click the `Search More...` link at the
bottom of the drop-down menu, and then click the `Create` button.

Doing so reveals a blank contact form, in which the `Name` and `Email`
**must** be entered. When all the necessary information has been
entered, click `Save`, and Odoo returns to the `Launch a test` pop-up,
with that new record in the `Choose an
existing record or create a new one to test` field.

Once a record is selected, click `Continue`, and Odoo reveals the
campaign test page.

![Test screen in Odoo Marketing
Automation.](testing_running/test-screen.png)

On the campaign test page, the name of the `Record` being tested is
visible, along with the precise time this test workflow was started in
the `Workflow Started On` field. Beneath that, in the `Workflow` section
is the first activity (or activities) in the workflow that's being
tested.

To start a test, click the `Run` button, represented by a `▶️ (play
button)` icon beside the first activity in the workflow. When clicked,
the page reloads, and Odoo shows the various results (and analytics)
connected to that specific activity as they occur, in real-time.

![Workflow test progress in Odoo Marketing
Automation.](testing_running/workflow-test-progress.png)

Once all the workflow activities are completed, the test will end, and
move to the `Completed` stage. To stop a test before all the workflow
activities are completed, click the `Stop` button in the upper-left
corner of the campaign test page.


---
## File: ./content/applications/marketing/marketing_automation/getting_started/first_campaign.md

# Getting started

The Odoo *Marketing Automation* app automates a variety of marketing
tasks, by combining specific rules and filters to generate timed
actions. Instead of manually having to build each stage of a campaign
(such as a series of timed massmails), the *Marketing Automation* app
allows marketers to build the entire campaign, and all of its stages, in
one place on a single dashboard.

## Create a campaign

To create a new automated marketing campaign, open the `Marketing
Automation` app, and click the `Create` button in the upper-left corner.
Doing so reveals a blank marketing automation campaign detail form on a
separate page.

On the blank marketing automation campaign page, the following smart
buttons and fields are available:

![A dashboard showing the creation of a new marketing automation
campaign in Odoo.](first_campaign/marketing-template-sample.png)

**Smart buttons**

  - `Templates`: represents the number of pre-configured mail templates
    being used in this particular campaign. (Templates can always be
    created on-the-fly, as well).
  - `SMS`: represents the number of personalized SMS messages connected
    to this campaign.
  - `Clicks`: represents the number of times attached links have been
    clicked by recipients of this campaign.
  - `Participants`: represents the number of contacts that have directly
    participated in this campaign.

**Fields**

  - `Name`: represents the name of the marketing automation campaign
    being created.
  - `Target`: this field is a drop-down menu to choose which model is
    targeted by this campaign (i.e., by Contacts, Sales Order,
    Lead/Opportunity, etc.).
  - `Filter`: this field provides numerous configurable criteria that
    can be used to further narrow down the target recipients/audience
    for the marketing automation campaign.

## Campaign filters

To add a `Filter` to the target audience, click `Add Filter`, and a node
field appears. In the node field, a custom equation can be configured
for Odoo to use when filtering who to include (and exclude) in this
specific marketing campaign.

![A filter node in Odoo Marketing
Automation.](first_campaign/filter-node.png)

When the first field of the node is clicked, a nested drop-down menu of
options appears on the screen, wherein specific criteria is chosen based
on needs of the campaign. The remaining fields on the node further
define the criteria determining which records to include (or exclude) in
the execution of the campaign.

To add another node, click the `➕ (plus sign)` icon to the right of the
filtering rule. To add a branch of multiple nodes at the same time,
click the `⋯ (ellipses)` icon.

For further information on filters, refer to `this documentation page
</applications/marketing/marketing_automation/getting_started/target_audience>`.

<div class="note">

<div class="title">

Note

</div>

`Records` represent the number of contacts in the system that fit the
specified criteria for a campaign.

</div>

<div class="seealso">

\-
`/applications/marketing/marketing_automation/getting_started/testing_running`
-
`/applications/marketing/marketing_automation/getting_started/workflow_activities`

</div>


---
## File: ./content/applications/marketing/marketing_automation/getting_started/workflow_activities.md

# Marketing activities

When creating a campaign in the *Marketing Automation* app, users can
plan marketing activities, such as email or SMS campaigns.

To get started, navigate to the bottom of a marketing automation
campaign detail form, and click `Add New Activity`. Doing so reveals a
`Create Activities` pop-up window. This pop-up window is a blank
activity template, where specific parameters can be set for that
particular activity.

The following fields are available in the `Create Activities` pop-up
window (when `Add New Activity` is clicked):

![An activity template in Odoo Marketing
Automation.](workflow_activities/activity-template.png)

  - `Activity Name`: the title of the activity.
  - `Activity Type`: choose between
    <span class="title-ref">Email</span>, <span class="title-ref">Server
    Action</span> (internal Odoo operation), or
    <span class="title-ref">SMS</span>.
  - `Mail Template`: choose from pre-configured templates (or create a
    new one on-the-fly).
  - `Trigger`: choose when this activity should be triggered.
  - `Expiry Duration`: configure to stop the actions after a specific
    amount of time (after the scheduled date). When selected, a `Cancel
    after` field appears, in which the user can choose how many `Hours,
    Days, Weeks, or Months` they want the actions to cease after the
    initial date.
  - `Activity Filter`: domain related to this activity (and all
    subsequent child activities).
  - `Applied Filter`: activity will *only* be performed if it satisfies
    the specified domain (filter).

After the activity's settings are fully configured, click `Save & Close`
to save the activity and return to the marketing automation campaign
form, `Save & New` to save the activity and immediately create another
one in a fresh `Create Activities` pop-up window, or `Discard` to delete
the activity and return to the marketing automation campaign form.

## Workflow activity

Once an activity is saved, the `Workflow Activity` section appears at
the bottom of the marketing automation campaign form. Each activity is
displayed as a line graph.

The configured `Trigger` time for that activity can be found to the left
of the `Workflow Activity` card in the `Workflow` section.

Once the activity has been triggered, a figure representing the number
of `Success` or `Rejected` activities will be displayed to the right of
the graph.

![Typical workflow activity in Odoo Marketing
Automation.](workflow_activities/workflow-activity.png)

<div class="tip">

<div class="title">

Tip

</div>

If the `Activity Type` of the activity is set to `Email`, there are more
in-depth analytics beneath the activity graph data, detailing how many
emails have been `Sent`, and what percentage of those have been
`Clicked`, `Replied` to, or `Bounced`.

</div>

## Child activities

There is also the option to add a *child activity* by clicking `Add
child activity`, located at the bottom of each activity block in the
`Workflow` section of a marketing automation form.

Child activities are sub-activities that are connected to (and triggered
by) the activity above it, which is also known as its *parent activity*.

Odoo provides a number of triggering options to launch a child activity
- all of which depend on the trigger configurations related to the
parent activity. Under the desired parent activity, hover over `Add
child activity`, and select any of the following triggers:

  - `Add Another Activity`: instantly add another activity.
  - `Opened`: the next activity will be triggered if the (email)
    recipient opens the mailing.
  - `Not Opened`: the next activity will be triggered if the recipient
    does not open the mailing.
  - `Replied`: the next activity will be triggered if the recipient
    replies to the mailing.
  - `Not Replied`: the next activity will be triggered if the recipient
    does not reply to the mailing.
  - `Clicked`: the next activity will be triggered if the recipient
    clicks on a link included in the mailing.
  - `Not Clicked`: the next activity will be triggered if the recipient
    does not click on a link included in the mailing.
  - `Bounced`: the next activity will be triggered if the mailing is
    bounced (not sent).

Once a trigger is selected, the user can configure the child activity
(it has the same configuration options as a regular activity), and click
`Save & Close` to finish creating the child activity, which will then be
displayed in the `Workflow` section, in a slightly indented position
beneath its parent activity.


---
## File: ./content/applications/marketing/marketing_automation/getting_started/target_audience.md

# Target an audience

Delivering marketing campaigns to the right audience is paramount when
trying to grow a business. The Odoo *Marketing Automation* application
helps marketers to do just that by providing detailed filtering tools,
which can be as simple (or as complex) as necessary, to reach the right
customers at the right time.

## Configure target filters

When configuring the target filters on a marketing campaign, there are
some options that have an `> (arrow)` icon beside them. The `> (arrow)`
icon signifies that the particular filter has more refined parameters
within it that can be customized.

![The drop-down filter menu in the Marketing Automation
application.](target_audience/marketing-filters.png)

Filters can be extended by adding *branches* and *nodes*. A *node* adds
another filtering parameter to a group of targeting conditions (e.g. a
new line), and a *branch* creates a narrowly refined cluster of
parameters, allowing filters to be grouped with `ANY` or `ALL`
statements.

Every time a new branch is created, there are two options:

  - Either the records can match `ALL` criteria for the upcoming rules
    (creating an AND statement where *all* criteria must match).
  - Or, the records can match `ANY` criteria for the upcoming rules
    (creating an OR statement where *only one* of the criteria must
    match).

To change between these two options, simply click the drop-down arrow
icon in the green box and select `ANY` or `ALL`.

To add a node, click on the `➕ (plus sign)` icon, and to add another
branch click on the `⋯ (ellipses)` icon. To exclude a node or a branch,
click on `✖ (delete)` icon to delete it.

![The drop-down filter menu in the Marketing Automation
application.](target_audience/marketing-filter-nodes.png)

## Use cases

The following scenarios outline different combinations of filters a
marketing campaign might commonly use.

### Scenario \#1: Narrow target down to new opportunities in the pipeline

While in *Edit mode* on a campaign template form (by clicking the `Edit`
button), select the `Target` field, and click `Search More` from the
drop-down menu. Then, search for `Lead/Opportunity`, and select it.

Next, click `Add Filter` in the `Filter` field. Then, click on the
default `ID` filter option in the first portion of the filter equation.
Doing so reveals a drop-down menu full of filter options. From this
drop-down, scroll down (or search for) `Type`.

Keep the second portion of the filter equation on the default `🟰 (equal
sign)` icon.

Next, change the third (and final) portion of the filter equation from
`Lead` to `Opportunity`. The number of `Records` that fit this specific
filter equation changes as the equation is customized.

Add another node to this filter by clicking the `➕ (plus sign)` icon to
the right of the equation.

With "new" opportunities being the target of this filter, the second
node will focus on *only* locating opportunities that are in the `New`
stage of the pipeline. To do that, select the default `ID` from the
first portion of the second filter equation, and scroll down (or search
for) `Stage` from the field drop-down menu.

Once again, leave the second portion of the filter equation on `🟰 (equal
sign)` icon.

Lastly, highlight the default value in the third (and final) portion of
the second filter equation, and type in
<span class="title-ref">New</span>. With that in place, Odoo only
targets opportunities that are in the "New" stage of the pipeline.

![A standard scenario using filters in the Odoo Marketing Automation
app.](target_audience/filters-opportunities.png)

### Scenario \#2: Narrow down target to event attendees who purchased a specific ticket

While in *Edit mode* on a campaign template form (by clicking the `Edit`
button), select the `Target` field, and click `Search More` from the
drop-down menu. Then, scroll down (or search for) `Event`, and select
it.

Next, click `Add Filter` in the `Filter` field. Click on the default
`ID` filter option in the first portion of the filter equation. Doing so
reveals a drop-down menu full of filter options. From this drop-down,
scroll down (or search for) `Event`.

Click the default `🟰 (equal sign)` icon in the second portion of the
filter equation. This reveals a drop-down menu. From this drop-down
menu, select `contains`.

In the third (and final) empty portion of the filter equation, type in
the name of the event(s) that Odoo should consider for this campaign
filter.

Then, add another node to this filter by clicking the `➕ (plus sign)`
icon to the right of the equation.

The second node will focus on targeting this campaign to attendees who
purchase a specific type of ticket to the aforementioned event(s)
mentioned in the first filter equation.

To do that, select the default `ID` from the first portion of the second
filter equation, and scroll down (or search for) `Event Ticket` from the
field drop-down menu. Then, in that same drop-down menu, select `Name`.

Once again, click the default `🟰 (equal sign)` icon in the second
portion of the filter equation, and select `contains`.

Lastly, in the third (and final) portion of the second filter equation,
which is blank, type in the name of the ticket type that should be used
for the filter. In this case, `Standard` is the name of the event ticket
type for this sample filter.

![An event ticket filter in the Odoo Marketing Automation
application.](target_audience/filters-event-ticket.png)


---
## File: ./content/applications/marketing/social_marketing/essentials.md

  - nosearch

# Essentials

<div class="toctree" data-titlesonly="">

essentials/social\_essentials essentials/social\_campaigns

</div>


---
## File: ./content/applications/marketing/social_marketing/essentials/social_campaigns.md

# Social marketing campaigns

Social marketing campaigns help companies connect directly with the
marketplace. These campaigns are helpful when introducing a new product
to customers, explaining the value of a product or service, or when
advertising an upcoming event or product release.

The most effective social marketing campaigns typically involve multiple
channels to maximize content distribution, and Odoo's *Social Marketing*
application acts as a singular control center to monitor, plan, post,
track, and analyze all of the various content and content channels
within a single dashboard.

## Campaigns page

To access a complete overview of all social marketing campaigns, open
the `Social
Marketing` application, and click `Campaigns` from the header menu.
Doing so reveals a separate page with every campaign in a default kanban
view.

![View of the campaigns page in the Odoo Social Marketing
application.](social_campaigns/campaigns-page.png)

Each *stage* in the kanban view can be edited, by clicking the `gear
icon` to the left of the `+ (plus sign)` - located to the right of the
stage title.

<div class="note">

<div class="title">

Note

</div>

The **gear icon** *only* appears when the cursor hovers to the left of
the **+ (plus sign)**. When the gear icon is clicked, a drop-down menu
reveals the options: `Fold`, `Edit Stage`, and `Delete`.

</div>

![View of the campaigns page in the Odoo Social Marketing
application.](social_campaigns/campaign-stage-dropdown.png)

Clicking `Fold` minimizes that specific stage's column. The stage column
can be restored by clicking the folded version of it on the main
`Campaigns` dashboard in the default kanban view.

Selecting `Edit Stage` reveals a pop-up window, in which the name and
the sequence of the stage can be modified. If changes are made, be sure
to click `Save`.

Clicking `Delete` removes the stage entirely.

<div class="note">

<div class="title">

Note

</div>

To add a new stage to the pipeline, side-scroll to the right on the
`Campaigns` dashboard, click `Add a Column`, enter in the desired
information, and click `Add`.

</div>

<div class="tip">

<div class="title">

Tip

</div>

The same social marketing campaign information on the `Campaigns`
dashboard can also be viewed as a list, by selecting the `List` option,
located under the search bar, in the upper-right corner.

</div>

## Create social marketing campaigns

First, open the `Social Marketing` application, and select `Campaigns`
from the header menu.

On the `Campaigns` dashboard, a new campaign can be created by clicking
the quick add `+ (plus sign)` located in the top-right corner of each
stage in the pipeline, visible in the kanban view. Campaigns can also be
created by clicking `Create` in the upper-left corner of the `Campaigns`
dashboard.

Both options reveal a new campaign detail window directly on the
`Campaigns` dashboard when clicked.

![View of the quick add option for campaigns in Odoo Social
Marketing.](social_campaigns/quick-add-campaign.png)

Here, the `Campaign Name`, `Responsible`, and `Tags` can be entered.
When all modifications are complete, click `Add` to add the campaign to
the database.

## Edit social marketing campaigns

In order to edit a campaign in greater detail, and create/send various
forms of communications related to it, the template page for that
campaign must be accessed and modified, accordingly. There are multiple
ways to access a template page for a campaign.

  - After entering the pertinent information in the `Quick Add` campaign
    drop-down, click `Edit`.
  - Simply select the desired campaign from the `Campaigns` dashboard in
    list or kanban view.
  - On the `Campaigns` dashboard in the kanban view, select the `⋮
    (three dots)` drop-down menu on the desired campaign, and select
    `Edit`.

Any of the above routes will reveal the *Campaign Template* page for
that specific campaign.

## Social marketing campaign templates

On a *Campaign Template* page, numerous elements can be
customized/modified, and various forms of communications can be created,
modified, and sent or scheduled. Below is a sample of a completed
campaign template.

![View of a sample campaign template page in Odoo Social
Marketing.](social_campaigns/create-campaign.png)

<div class="important">

<div class="title">

Important

</div>

In order for the `Send New Mailing` option to appear on campaign
templates, make sure the *Mailing Campaigns* feature is enabled in the
*Email Marketing* app. To do that, navigate to `Email Marketing -->
Configuration --> Settings`, activate `Mailing
Campaigns`, and click `Save`.

</div>

<div class="note">

<div class="title">

Note

</div>

In order for the `Send SMS` option to appear, the Odoo *SMS Marketing*
application must be installed on the database.

</div>

## Add content and communications to campaigns

If the proper settings and applications are installed (as instructed
above), there are four forms of communication/content options that can
be added to campaigns. Each of these options are displayed as buttons in
the upper-left corner of the campaign template page.

  - `Send New Mailing`: reveals a blank email template on a separate
    page, in which the message can be fully customized in a variety of
    ways.
  - `Send SMS`: reveals a blank SMS template on a separate page, in
    which a SMS communication can be created and configured.
  - `Send Social Post`: reveals a blank social post template on a
    separate page, in which a post can be created, and applied to social
    media accounts that are already connected to the database.
  - `Push Notification`: reveals a similar blank social post template on
    a separate page, however, the `Push Notification` options are
    already pre-selected in the `Post
    on` field.

Whichever form of communication is created, once it's completed, Odoo
returns to the `Campaign Template` page, showcasing that new content in
its corresponding tab (e.g. `Mailings`, `SMS`, `Social Media`, and/or
`Push
Notifications`).

As content and communications are added to a campaign, tabs for those
specific mediums appear, along with a variety of analytical smart
buttons (e.g. `Revenues`, `Quotations`, `Leads`, etc.).

These smart buttons, located at the top of the template, display
different metrics related to the campaign, and its various
communications and content. Clicking any smart button reveals a separate
page dedicated to that particular element of the campaign, allowing for
quicker, more organized analysis.

<div class="note">

<div class="title">

Note

</div>

The Odoo *Social Marketing* app is integrated with other Odoo
applications, such as *Sales*, *Invoicing*, *CRM*, and *Website*.

</div>

<div class="seealso">

`/applications/marketing/social_marketing/essentials/social_essentials`

</div>


---
## File: ./content/applications/marketing/social_marketing/essentials/social_essentials.md

# Social marketing essentials

Odoo's *Social Marketing* helps content marketers create and schedule
posts, manage various social media accounts, analyze content
effectiveness, and engage directly with social media followers in one,
centralized location.

## Add social media accounts

In order to create posts, each social media account must be added as a
stream in the Odoo *Social Marketing* application.

### Add a social media stream

Add a social media account as a stream by navigating to `Social
Marketing` and then select the `Add A Stream` button located in the
upper left corner

When `Add A Stream` is clicked, the following pop-up appears, displaying
the different social media outlets to choose from.

![View of the pop-up that appears when 'Add a Stream' is selected in
Odoo.](social_essentials/social-add-streams.png)

<div class="note">

<div class="title">

Note

</div>

Additional social media outlet options are available depending on your
version of Odoo.

</div>

From this pop-up, select a social media option: `Facebook`, `LinkedIn`,
or `Twitter`.

Then, Odoo navigates directly to that specific social media outlet's
authorization page, where permission must be granted, in order for Odoo
to add that particular social media account to the *Social Marketing*
application as a stream on the main dashboard of the app.

<div class="note">

<div class="title">

Note

</div>

A Facebook page can be added as long as the Facebook account that grants
permission is the administrator for the page. Also, different pages can
be added for different streams.

</div>

Once permission is granted, Odoo navigates back to the `Feed` on the
main `Social Marketing` dashboard, and a new column with that account's
posts are automatically added.

From here, new accounts and/or streams can be added and managed at any
time.

![Example of how a populated stream-filled dashboard looks in Odoo
Social Marketing](social_essentials/feed.png)

<div class="note">

<div class="title">

Note

</div>

Adding social media accounts to the feed also links that specific social
media platform's KPIs (if the platform has them). To get redirected to
the statistics and metrics related to any social account, click on
`Insights`.

![The insights link that can be accessed for each social media stream
added in Odoo.](social_essentials/insights.png)

</div>

## Create and publish social media posts in Odoo

To create content for social media accounts in the `Social Marketing`
application, click the `New Post` button located in the upper-left
corner of the main dashboard, or navigate to `Posts --> Create` from the
header menu.

Either route reveals a blank post template page that can be customized
and configured in a number of different ways.

![How to create a social media post directly through
Odoo](social_essentials/social-create-post.png)

### Post template

The post template page has many different options avaiable.

#### 'Your Post' section

The first option is the `Post on` field. This is where it's determined
on what social media account(s), or on which website(s) via push
notification, this post will be published.

<div class="important">

<div class="title">

Important

</div>

In order for the `Push Notification` option to appear, make sure the
*Enable Web Push Notifications* feature is enabled in the *Website* app.
To do that, navigate to `Website --> Configuration --> Settings`,
activate `Enable Web Push
Notifications`, fill out the corresponding fields, and click `Save`.

</div>

Odoo automatically provides every available social media account that's
been linked to the database as an option in this section, as well.

<div class="note">

<div class="title">

Note

</div>

If a social media account hasn't been added as a stream to the *Social
Marketing* application, it will not appear as an option on the post
template.

</div>

Next, there's the `Message` field. This is where the main content of the
post is created.

Type the desired message for the post in this field. To the right, as
the `Message` field is populated, Odoo displays visual samples of how
the post will look on all the previously selected social media accounts
from the `Post on` field above.

<div class="tip">

<div class="title">

Tip

</div>

Emojis can also be added directly to the text in the `Message` field.
Just click the `emoji (smiley face) icon`, located on the line of the
`Message` field to the far right. Clicking this icon reveals a drop-down
containing numerous emojis to choose from.

</div>

If images are to be used in the post, click the `ATTACH IMAGES` link
beneath the `Message` field, and Odoo reveals a pop-up window. In this
pop-up, the desired image must be chosen, and then uploaded.

A preview of the entire post, text and image (if applicable), is
instantly displayed in the visual preview of the post.

Next, there's the option to attach this post to a specific marketing
campaign in the database in the `Campaign` field. Click the blank line
next to `Campaign` to reveal the previously configured campaigns to
choose from.

<div class="tip">

<div class="title">

Tip

</div>

A new campaign can be created, as well, by typing the name of the new
campaign on the blank `Campaign` field, and selecting `Create` from the
drop-down field menu. Or, select `Create and edit` from the menu to
further customize that newly-created campaign.

</div>

<div class="note">

<div class="title">

Note

</div>

A social post does *not* need to be attached to a campaign.

</div>

Then, in the `When` field, choose either `Send Now` to have Odoo publish
the post immediately, or `Schedule later` to have Odoo publish the post
at a later date and time.

If `Schedule later` is selected, Odoo reveals a new field beneath it
(the `Scheduled post date` field). Clicking that empty field reveals a
pop-up calendar, in which a future date and time is designated. At which
time, Odoo will promptly publish the post on the pre-determined social
media accounts.

Click on the desired date to schedule the post for that day. Then,
either select and customize the default time in the `Scheduled post
date` field manually. Or, adjust the desired post time, by clicking the
`scheduling (clock) icon` located on the calendar pop-up, and choose the
desired time for Odoo to publish this post on that future date.

If scheduling a post, remember to hit `Schedule` in the upper left of
the post template. Doing so, locks in that specific date/time for Odoo
to send the post, and it changes the status of the post to `Scheduled`.

<div class="note">

<div class="title">

Note

</div>

Also, when `Schedule` is clicked, a number of analytical smart buttons
appear on the post page. Each one offers up a detailed anaylsis of the
corresponding metric (e.g. `Leads`, `Revenues`, etc.). These same smart
buttons appear when a post is officially published, as well.

</div>

#### 'Web Notification Options' section

If any `Push Notifications` are selected in the `Post on` field, Odoo
provides another section of settings/options at the bottom of the post
template. It should be noted that *none* of these fields are required.

The first field is for a `Push Notification Title`. This is text that is
displayed as the title of the push notification whenever it's sent. Odoo
displays a visual preview of this title, if one is created.

To designate a specific page on the website that should trigger this
push notification, enter that page's URL in the `Push Target URL` field.
Then, once a visitor reaches that specific page, Odoo will display the
push notification.

Below that field is the option to add a custom `Push Icon Image`. This
is an icon that appears beside the push notification. By default, Odoo
uses a "smiley face" as the icon.

To upload a new image, click the `Edit (pencil) icon` when the `Push
Icon Image` field is hovered over with the cursor. Then, proceed to
locate and upload the desired image, and Odoo automatically displays a
preview of how the icon will appear on the push notification.

Next, there is the option to `Send at Visitors' Timezone`. If enabled,
Odoo will send it at the appropriate, pre-determined time, taking the
visitor's location into consideration.

### Save, post, and test notification options

When all the modifications have been made, and the post is completed,
either click `Save` to save the post as a *Draft*. Or, if the post is
ready to be published immediately, click `Post`, and Odoo automatically
publishes the post on the pre-determined social media accounts.

There is also the option to `Test Notification`, if a `Push
Notification` was selected in the `Post on` field. Clicking that,
provides a quick example of how the notification will appear for
visitors.

### Social post status bar

In the top-right of the `Post Template` page is the `Status Bar`. This
displays the current status of the post.

When `Save` is clicked, the post is in the *Draft* status.

If the post is scheduled to be sent at a future date/time, and the
`Schedule` button has been clicked, the status of the post is
*Scheduled*.

If the post is in the process of currently being published or sent, the
status of the post is *Posting*. And, lastly, if the post has already
been published or sent, the status is *Posted*.

## Posts page

To see a complete overview of posts, go to Odoo `Social Marketing`, and
click `Posts` in the header menu. Here, every post that has been created
and posted with Odoo is available.

There are four different view options for `Posts` page data: *kanban*,
*calendar*, *list*, and *pivot*. The view options are located in the
upper right corner of the `Posts` page, beneath the search bar.

<div class="tabs">

<div class="tab">

Kanban view

By default, Odoo displays the posts in a kanban view. The information on
this page can be sorted even further, via the `Filters` and `Group by`
drop-down menu.

![Kanban view of the posts page in the Odoo Social Marketing
application.](social_essentials/posts-page.png)

</div>

<div class="tab">

Calendar view

The calendar view option displays a visual representation in a calendar
format of when posts were published, or are scheduled to be published.
This option provides a clear overview of any planned day, week, or
month, and Odoo displays all drafted, scheduled, and published posts.

![Example of the calendar view in Odoo Social
Marketing.](social_essentials/calendar-view.png)

</div>

<div class="tab">

List view

The list view option is similar to the kanban option, but instead of
individual blocks, all the post information is displayed in a clear,
list layout. Each line of the list displays the `Social Accounts`,
`Message`, and `Status` of every post.

![View of the list option on the posts page in Odoo Social
Marketing.](social_essentials/list-view.png)

</div>

<div class="tab">

Pivot view

The pivot view option provides a fully customizable grid table, where
different measures of data can be added and analyzed.

![View of the pivot option on the posts page in Odoo Social
Marketing.](social_essentials/pivot-view.png)

The pivot view option provides numerous analytical options, allowing for
in-depth, detailed analysis of various posts.

Click on any `+ (plus sign) icon` next to a line in the pivot table to
reveal more metric options to add to the grid.

While in the pivot view, the option to `Insert in Spreadsheet` is
available, located to the right of the `Measures` drop-down.

When clicked, a pop-up appears, where the option to add this information
to a current spreadsheet is available. The option to create a new
spreadsheet for this information on-the-fly is also available in this
pop-up, as well.

Next to the `Insert in Spreadsheet` are three view options, specific to
the pivot view.

From left to right, the options are:

  - `Flip Axis`, which switches the *X* and *Y* axis in the grid table.
  - `Expand All`, which expands each line in the grid, revealing more
    detailed information related to it.
  - `Download`, which, when clicked, instantly downloads the pivot table
    as a spreadsheet.

</div>

</div>

## Visitors

To see a complete overview of all the people who have visited the
website(s) connected to the database, navigate to `Social Marketing -->
Visitors` in the header menu.

![View of the Visitors page in the Odoo Social Marketing
application.](social_essentials/visitors.png)

Here, Odoo provides a detailed layout of all the visitors' pertinent
information in a default kanban view. This same information can be
sorted via the `Filters` and `Group
By` options.

The visitor data can also be viewed as a list or a graph. Those view
options are located in the upper-right corner of the `Visitors` page
beneath the search bar.

## Social media page

Go to `Configuration --> Social Media` to see a collection of all social
media options: `Facebook`, `LinkedIn`, `Twitter`, and `Push
Notifications`.

![View of the social media page in the Odoo Social Marketing
application.](social_essentials/social-media-page.png)

If no account has been linked to any particular social media, click
`Link Account` to proceed through the linking process.

## Social accounts page

To see a list of all social accounts linked to the database, go to
`Configuration -->
Social Accounts`. This page will display the `Medium Name` and the
`Social
Media` platform it is associated with.

![View of the social accounts page in the Odoo Social Marketing
application.](social_essentials/social-accounts-page.png)

To edit/modify any social accounts, simply select the desired account
from the list on this page, and proceed to make any adjustments
necessary. Don't forget to hit `Save` to secure any changes.

## Social streams page

Navigate to `Configuration --> Social Streams` to reveal a separate page
containing all of the social media streams that have been added to the
main dashboard of the *Social Marketing* app, accessible via the `Feed`
option in the header menu.

![View of the social accounts page in the Odoo Social Marketing
application.](social_essentials/social-streams-page.png)

Here, the social stream information is organized in a list with the
`Social Media`, the `Title` of the stream, and the `Type` of the stream
(e.g. `Posts`, `Keyword`, etc.).

To modify any stream's information, simply click the desired stream from
the list, and proceed to make any necessary adjustments. Don't forget to
hit `Save` to secure any changes.

<div class="seealso">

`/applications/marketing/social_marketing/essentials/social_campaigns`

</div>


---
## File: ./content/applications/marketing/surveys/create.md

# Survey essentials

Companies often use surveys to collect valuable information from their
customers and employees, which in turn, allows them to make more
informed business decisions.

In Odoo, surveys are used to collect customer feedback, evaluate the
success of a recent event, measure the satisfaction of customers (or
employees), and gain more insight into shifting market sentiments.

## Getting started

To begin, open the `Surveys` application and click `Create`. Odoo then
redirects the page to a blank survey template form.

On the survey form, add a `Survey Title` and then add a cover image to
the survey by hovering over the photo icon and clicking on the `Edit
(pencil)` icon. When the file explorer window opens, choose an image
from the local files.

Below the `Survey Title` are various tabs in which the survey questions
and format can be created and customized. These tabs are labeled as
follows:

  - `Questions`: the list of questions to be asked in the survey
  - `Description`: contextual information to aid in understanding the
    survey
  - `Options`: choices for survey respondents to answer the questions

![Various tabs that can be found on the survey template
page.](create/questions-description-options.png)

## Questions tab

Add questions and sections to the survey in the `Questions` tab. A
section divides the survey into parts in order to visually group similar
questions together. To make a section, click `Add a section` and type in
a section name. Then, add questions or drag and drop questions into the
divided sections.

Clicking `Add a question` opens the `Create Sections and Questions`
pop-up to create and customize the survey question.

![The survey question pop-up window.](create/survey-question-pop-up.png)

### Create questions

In the `Create Sections and Questions` pop-up, type the question in the
`Question` field. Then, choose the `Question Type`. A preview of how the
question type looks is shown in the preview window.

Choose from the following `Question Types`:

  - `Multiple Lines Text Box`
  - `Single Line Text Box`
  - `Numerical Value`
  - `Date`
  - `Datetime`
  - `Multiple choice: only one answer`
  - `Multiple choice: multiple answers allowed`
  - `Matrix`

<div class="note">

<div class="title">

Note

</div>

Different features appear in the `Answers` and `Options` tabs, depending
on the `Question Type` chosen. However, the `Description` tab always
remains the same, regardless of what question is chosen.

</div>

#### Create sections and questions

Once a `Question Type` has been selected, there are three possible tabs
where information can be customized for the question. These include the
`Answers` (if applicable), `Description`, and `Options` tabs.

Each tab offers a variety of different features depending on what
`Question Type` was chosen.

For example, in the `Options` tab, the following options may appear:

  - `Mandatory Answer`: the question must be answered.
  - `Matrix Type`: for matrix-type questions, select if one choice or
    multiple choices can be selected per row.
  - `Number of columns`: select how many columns are displayed.
  - `Images on answers`: allow images on the answer options.
  - `Conditional Display`: determine if the question is displayed based
    on the participant's answer to a previous question.
  - `Show Comments Field`: allow the participant to type a comment in a
    text box.
  - `Question Time Limit`: for live session surveys, set a time limit
    for the question.

##### Conditional Display

`Conditional Display` means the question is only displayed if the
specified conditional answer has been selected in a previous question.

When the box next to `Conditional Display` is selected, the `Triggering
Question` field appears. Select a question from the survey.

Then, a `Triggering Answer` field appears. Here, select which answer
will trigger this `Conditional Display` question.

## Options tab

Back on the main survey template form, under the `Options` tab, there
are different sections of settings that can be modified.

The sections include:

  - `Questions`: focuses on the overall presentation of the survey
  - `Scoring`: decides how the survey is scored
  - `Candidates`: manages access to the survey
  - `Live Session`: enables the survey into a real-time group activity.

### Questions

First, select the `Layout` of the survey. The following options can be
chosen:

  - `One page with all the questions`
  - `One page per section`
  - `One page per question`

If either the `One page per section` or `One page per question` options
are chosen, then the `Back Button` option appears. If selected, the
`Back Button` option allows the participant to go back to a question
during the survey.

Under the `Layout` options is the `Progression Mode` setting, which
indicates how the participant's progress during the survey is displayed.
It is shown as either a `Percentage` or a `Number`.

Next, there is an option available to add a `Survey Time Limit`. To
implement this option, simply check the box, and enter the amount of
time (in minutes) participants have to complete the survey.

After the `Survey Time Limit` option is a section labeled `Selection`.
Here, questions can be `Randomized per section`, in other words, the
number of random questions can be configured by section. This mode is
ignored in a live session.

<div class="seealso">

`time_random`

</div>

### Scoring

The following options are available when deciding how a `Scoring`
method:

  - `No scoring`
  - `Scoring with answers at the end`
  - `Scoring without answers at the end`

If either the `Scoring with answers at the end` or `Scoring without
answers at
the end` options are selected, a `Success %` field appears. Set the
percentage of correct answers needed to pass the survey.

Next, there is the option to make the survey a certification. To do so,
check the box next to the option labeled `Is a Certification`, and two
additional fields appear. Select a color theme in the `Certification
Template` field and then choose an `Email
Template`. When a participant passes the certification with the required
score, an email from Odoo will automatically be sent to that person
using the selected email template.

If the `Give Badge` feature is enabled and the `Certification Badge` is
set, the survey participant also receives a badge upon passing the
certification.

<div class="seealso">

`scoring`

</div>

### Candidates

To determine access to the survey, the `Access Mode` has two options to
choose between: `Anyone with the link` and `Invited people only`.

Below the `Appraisal Managers Only` checkbox is the `Login Required`
option to require a login to participate in the survey. If this option
is activated, an `Attempts
Limit` field also populates, in which the number of survey attempts is
defined for the participant.

### Live Session

The `Live Session` section is dedicated to users who are conducting
surveys in real-time, wherein they directly engage with and collect
answers from a live audience.

Customize the `Session Code` here; this code is needed for participants
to access the live session survey. Reward participants for quick answers
by selecting the checkbox labeled `Reward quick answers`. By checking
it, attendees will get more points if they answer quickly.

## Description tab

Back on the main survey template page is the `Description` tab, where a
custom description of the survey can be added. This is displayed beneath
the title on the survey's homepage, which is on the front end of the
website made through the Odoo `Website` app.

## Test and share the survey

Once the survey is created and saved, run a test to check for possible
errors before finally sending it out to the participants by clicking
`Test` in the upper left corner of the survey template page.

When activated, Odoo redirects the page to a test version of the survey
on the front end of the website. This page displays how the survey will
look to participants. Proceed to run through the survey, like a normal
participant, to check for errors.

To return to the survey template form in the backend, simply click the
`This is a test
survey. Edit Survey` link in the blue banner along the top of the page.
Once Odoo redirects the page to the survey template in the backend, make
any further changes, as needed, before officially sending the survey out
to participants.

When the survey is ready to be shared with the audience, click the
`Start Survey` button in the upper-left corner of the survey template
form. Then, click `Share`.

In the pop-up window, add the survey recipients in the `Recipients`
field (for existing contacts in the Odoo database) or the `Additional
emails` field (for contacts that do not want to be listed in the Odoo
database). Finally, click `Send`.

As answers are received, check them by clicking the `Answers` smart
button on the survey template form, or the `See Results` button in the
upper left corner. To end the survey, click the `Close` button on the
survey template form.


---
## File: ./content/applications/marketing/surveys/time_random.md

# Timed and randomized questions

When creating a survey in Odoo, there are options to set a time limit on
the survey and randomize the questions.

## Time limit

During a timed survey, participants must finish the survey within a
specified period of time. A common use case for implementing a time
limit is that it greatly reduces the chance of participants looking up
responses via external resources (e.g. web search), and reduces the
survey to a "closed book" testing environment.

Find the `Survey Time Limit` setting in the `Options` tab of the survey
form, under the `Questions` section.

![Time limit field in the options tab of a survey template
form.](time_random/time-limit.png)

When the `Survey Time Limit` option is checked, a timer will be
displayed on every page of the survey, letting participants keep track
of the time remaining while the survey is active.

<div class="note">

<div class="title">

Note

</div>

Participants that do not submit their survey by the preconfigured time
limit will *not* have their answers saved.

</div>

## Randomized selection

When a survey is randomized, Odoo shuffles the questions and reveals
them in a random order every time a participant begins the
questionnaire. Using randomization as a survey method discourages
participants from looking at each other's responses, and helps control
for individual testing.

To randomize a survey, click the `Options` tab on the survey form. In
the `Questions` section, select `Randomized per section` for the
`Selection` field. After enabling, navigate to the `Questions` tab and
look in the `Random questions count` column. From there, determine how
many questions (per section) Odoo should select and display during the
shuffling of questions.

![Randomized question count in the questions tab of a
survey.](time_random/random-questions.png)

<div class="seealso">

`scoring`

</div>


---
## File: ./content/applications/marketing/surveys/scoring.md

# Scoring surveys

To measure a survey participant's performance, knowledge, or overall
satisfaction, Odoo ascribes points to survey answers. At the end of the
survey, these points are summed up, resulting in the participant's final
score.

To add points to questions, open the `Surveys` application, choose the
desired survey form, and then click on the `Options` tab. Under the
:guilabel;\`Scoring\` section, choose between `Scoring with answers at
the end` or `Scoring without answers at the
end`.

  - `Scoring with answers at the end` shows the survey participant their
    answers after completing the survey, and displays which questions
    they got right or wrong. On questions where there was an incorrect
    answer, the correct answer will be highlighted.
  - `Scoring without answers at the end` does not show the survey
    participant their answer choices after completing the survey, only
    their final score.

To indicate correct answers, click on the `Questions tab` and choose a
question. In the question form, check the `Is a correct answer` box for
the choice that is the correct answer and attach a score value.

Back on the `Options` tab of the survey, set the `Success %`. The
percentage entered determines what percentage of correct answers is
needed to pass the survey.

Further on the `Options` tab of the survey, survey administrators can
also choose to make the survey a certification. A certification
indicates that the survey asks questions to test the participants'
knowledge level on a subject.

When enabling the `Is a certification` option, choose a `Certification
email
template`. The certification will automatically be emailed using this
email template to users who pass the survey with a final score that is
greater than or equal to the set `Success %`.

In the `Candidates` section, participants can be required to log in to
take the survey. If the `Login Required` setting is enabled, two new
options appear: the `Attempts Limit` checkbox, which limits the number
of times a participant can attempt the survey, and the option to `Give
Badge`, located beneath the `Certification` options in the `Scoring`
section.

![Setting the Required Score (percentage), login required, and
certification template.](scoring/required-score-login.png)

Badges are displayed on the eLearning portion of a given user's portal,
and are a way to set milestones and reward participants for passing
surveys or gaining points. Besides the awardee, website visitors who
access the `Courses` page will also be able to see the granted badges.

![Example of how a badge looks on the eLearning portion of the
website.](scoring/frontend-badges.png)

<div class="seealso">

`time_random`

</div>


---
## File: ./content/applications/marketing/sms_marketing/pricing.md

  - nosearch

# Pricing and FAQ

<div class="toctree" data-titlesonly="">

pricing/pricing\_and\_faq

</div>


---
## File: ./content/applications/marketing/sms_marketing/pricing/pricing_and_faq.md

# SMS Pricing and FAQ

## What do I need to send SMSs?

SMS Text Messaging is an In-App Purchase (IAP) service that *requires
prepaid credits* to work.

## How many types of SMSs are there?

There are 2 types: GSM7 and UNICODE.

**GSM7** is the standard format, with a limit of 160 characters per
message, that includes the following characters:

![GSM7 characters available in Odoo SMS
Marketing.](pricing_and_faq/faq1.png)

**UNICODE** is the format applied if a special character, that *is not*
in the GSM7 list, is used. Limit per SMS: 70 characters.

<div class="note">

<div class="title">

Note

</div>

For GSM7 SMS the size limit is 160 characters, and for Unicode is 70.
*Above these limits, the content is divided into a multi-part message*
and the limit of characters is lowered to 153 for GSM7 and to 67 for
Unicode. Then, in real-time, the system displays the number of SMS
mailings the message represents.

</div>

## How much does it cost to send an SMS?

The price of an SMS depends on the destination and the length (number of
characters) of the message. To see the **price per country, please
consult**: [Odoo SMS -
FAQ](https://iap-services.odoo.com/iap/sms/pricing#sms_faq_01).

The number of SMSs a message represents will always be available in the
database.

![Number of GSM7 characters that fit in an SMS message in Odoo SMS
Marketing.](pricing_and_faq/faq2.png)

## How to buy credits

Go to `Settings --> Buy Credits`.

![Buying credits for SMS Marketing in Odoo
settings.](pricing_and_faq/faq3.png)

Or go to `Settings --> View my Services`.

![Using Odoo IAP to recharge credits for SMS Marketing in Odoo
settings.](pricing_and_faq/faq4.png)

<div class="tip">

<div class="title">

Tip

</div>

If Odoo Online (Saas) is being used, along with the Enterprise version,
free trial credits are available to test the feature.

</div>

## More common questions

1.  **Is there an expiration time for my credits?**  
    No, credits do not expire.

2.  **Can I send an SMS to a phone number (which is not a mobile phone)
    because I see the icon in front of the field “phone”?**  
    Only if that phone number supports SMS (e.g. SIP phones).

3.  **Do I receive an invoice to buy my credits?**  
    Yes.

4.  **Can the recipient answer me?**  
    No, it is not possible to reply to the SMS.

5.  **What happens if I send multiple SMSs at once, but I don't have
    enough credits to send them all?**  
    Multiple SMS communications at once at are counted as a single
    transaction, so no SMSs will be sent until there are enough credits
    to send them all.

6.  **Do I have a history of the sent SMSs?**  
    A history of sent SMSs, along with all pertinent information related
    to its sent contacts (and the message itself), can be found in the
    `Sent` column of the main `SMS Marketing` dashboard (while in
    `Kanban` view).
    
    > For more detailed information, select a desired SMS from the main
    > dashboard (in `Kanban` view), and click on either link in the blue
    > banner above the SMS detail form to learn more.

7.  **Can I send as many SMSs I want at once?**  
    Yes, if you have enough credits.

8.  **If an SMS is sent to a number that doesn't exist in the list of
    recipients, will credits be lost?**  
    No, not if the phone number is incorrectly formatted (e.g. too many
    digits). However, if the SMS is sent to the wrong person (or to a
    fake number), the credit for that SMS will be lost.

9.  **What happens if I send my SMS to a paying number (e.g.: a contest
    to win a ticket for a festival)?**  
    The SMS will not be delivered to that kind of number, so no charges
    will be made.

10. **Can I identify the numbers that do not exist when I send several
    SMSs?**  
    Only the ones that have an invalid format.

11. **How does the GDPR regulation affect this service?**  
    Please find our [Privacy Policy
    here](https://iap.odoo.com/privacy#sms).

12. **Can I use my own SMS provider?**  
    Yes, but it is not possible out-of-the-box. Odoo experts can help
    customize a database to allow for the use of a personal SMS
    provider. Please check our success packs
    [here](https://www.odoo.com/pricing-packs).


---
## File: ./content/applications/marketing/events/sell_tickets.md

# Sell tickets

Create custom ticket tiers (with various price points) for potential
attendees to choose from, directly on the event template form, under the
`Tickets` tab. Odoo simplifies the ticket-purchasing process by
providing plenty of payment method options.

## Configuration

First, in order to enable the creation (and selling of) event tickets,
go to `Configuration --> Settings`, then enable the `Tickets` and
`Online Ticketing` features.

The `Tickets` feature allows tickets to be sold for an event.

The `Online Tickets` feature allows for the sale of tickets to occur
through the website.

<div class="note">

<div class="title">

Note

</div>

If these options are *not* enabled, a default `Register` button will be
available for free registrations.

</div>

![View of the settings page for Odoo
Events.](sell_tickets/events-settings-tickets.png)

## Sell tickets through sales orders

In the `Sales` application, choose a previously-created Event
Registration (as if it were a product), and add it as a product line.
Upon adding the registration, a pop-up appears, which allows for the
selection of a specific event (and ticket tier). That specific event
ticket is then attached to the sales order.

![View of a sales order and option to choose the specific event in Odoo
Events.](sell_tickets/events-through-sales-order.png)

Events with tickets sold online or through sales orders have a `Sales
Smart Button` shortcut, located at the top of the event template form
(in the `Events` application).

Clicking the `Sales Smart Button` reveals a page with all the sales
orders related to that event.

![View of an event's form and the sales smart button in Odoo
Events.](sell_tickets/events-sales-smartbutton.png)

![View of an event form highlighting the column product under the
tickets tab in
Odoo&#10;Events.](sell_tickets/events-tickets-registration-product.png)

## Sell tickets through the website

With tickets purchased through the website, the process is similar to
creating a `Sales
Order` with a specific `Registration` product. Here, tickets are added
to a virtual cart, and the transaction can be completed as usual -
utilizing any of the pre-configured payment methods options that have
been set up on the website.

The completed purchase is automatically produced in a `Sales Order`,
which can be easily accessed in the back end of the database.

![View of website transaction for Odoo
Events.](sell_tickets/events-online-ticket-purchase.png)


---
## File: ./content/applications/marketing/events/event_essentials.md

# Event essentials

Odoo Events provides event coordinators with an arsenal of planning,
communications, and reporting tools to create immersive and engaging
experiences for customers. Namely, staff can create and publish events
on their website, sell tickets online, scan tickets with Odoo barcode,
send out automated emails, and generate rich reporting data once the
event accepts registrations.

## Kanban concepts and organization

To get started, click on the `Events` application on the home dashboard,
which then leads to the kanban view populated with a variety of pipeline
stages. Key information is listed on each event card, such as the
date/time of the event, along with the number of expected (and
confirmed) attendees.

To create a new stage, click `Add a Column` and provide a befitting
title to reflect the purpose of that stage.

To reorganize the stages, just drag-and-drop them until they are in the
correct order. Stages can also be “folded” in the kanban for a cleaner
presentation, via the `Settings` menu to the right of each stage's
title, which is represented by a gear icon.

<div class="note">

<div class="title">

Note

</div>

The gear icon, by default, is hidden and will appear next to the `+`
icon when moused over.

</div>

When clicked, a drop-down menu of settings will appear.

![Overview of events setting with the kanban view in Odoo
Events.](event_essentials/events-dashboard.png)

## Create a new event

To create an event, click `Create` from the Events dashboard. Odoo will
then direct the page to a blank event template form.

From the event form, fill out the necessary fields, either by choosing
from existing data in the Odoo database or by creating and editing new
field data. Key information to enter for the event includes:

  - `Event Name`: give the event a title.
  - `Date`: includes the start and end dates/times for the event.
  - `Timezone`: covers the timezone for when the event is taking place.
  - `Template`: choose from a pre-built event template or build a custom
    one and connect it here.
  - `Tags`: add tags to indicate briefly what the event is for (e.g.
    <span class="title-ref">tradeshow</span>). Tags help better organize
    event cards in the kanban and are useful when using search filters
    during reporting periods.
  - `Organizer`: detail the organizer(s) for the event. This field is
    usually the company that owns the Odoo database, or a vendor.
  - `Responsible`: name the point person who is responsible for
    organizing the event.
  - `Website`: indicate which Odoo website(s) the event event should be
    published to.
  - `Venue`: list the venue details here if it's a new record, or choose
    from an existing location.
  - `Limit Registrations`: when enabled, this setting caps the attendee
    registrations to a specified amount
  - `Autoconfirmation`: when enabled, this setting skips the
    confirmation request that gets sent by email to event registrants,
    and automatically confirms their registration.

Once the fields in the event form are set, move on to the `Tickets` and
`Communication` tabs, and optionally the `Questions` tab if
registrations should require additional information.

### Add and sell event tickets

Under the `Tickets` tab, add line items for each type of ticket the
event plans to offer. Here, determine the ticket price, start/end dates
for registrations, as well as the maximum number of tickets that can be
sold.

If selling tickets isn't necessary for the event, a simple
`Registration` button will be displayed on the event's page by default.

![View of the ticket tab in Odoo
Events.](event_essentials/events-tickets-tab.png)

### Send automated emails, text, and social posts to event attendees

Under the `Communication` tab, configure personalized email, SMS, or
social post messages to keep in touch with event attendees. For each
communication, click `Add a line` in the `Communication` tab form, and
then choose (or create) a communications template using the drop-down
menu under the `Template` column.

Next, define the `Interval` and `Unit` of time for how often the
communication should be sent; use these time fields to specify the
frequency of `Hours`, `Days`, `Weeks`, or `Months` communications should
be sent. There is also the option to send communications
<span class="title-ref">Immediately</span> after a specified `Trigger`
is activated.

In the last column, determine the `Trigger` which controls how and when
the communication is sent. For this action, choose between: `Before the
event`, `After each
registration`, or `After the event`.

![View of the communication tab in Odoo
Events.](event_essentials/events-communication-tab.png)

### Attach a questionnaire to event registrations

Implementing a questionnaire during event sign up is an effective way to
gauge the wants, needs, and interests of the event's attendees ahead of
time. Questionnaires also act as informative analytics tools for
reporting periods before (or after) events take place.

To create a questionnaire, from the `Events` application, navigate to
`Configuration --> Settings` and then enable the `Questions` setting.

With the setting enabled, questions and answers can now be added (and
recorded) under the the `Questions` tab back on the event form. For each
question, specify if it should only be asked once with the `Ask once per
order` checkbox, or if the question requires a `Mandatory Answer`, which
will make the question required for registration.

<div class="example">

If the `Once per order` checkbox is enabled, then a single registration
for 3 event attendees will show the questionnaire only once.

</div>

There are two `Question Types` to choose from: `Selection` and `Text
Input`. The `Selection` type, allows attendees to select an answer from
pre-configured options, which are entered in the `Answers` tab below.
The `Text Input` type allows attendees to write in their own answer to
the question in a text box.

![View of an event form, open the questions tab, and add a
question.](event_essentials/events-questions-tab.png)

### Log internal notes or add ticket instructions

In the `Notes` tab, there is the option to add a `Note` and/or `Ticket
instructions`.

Under `Note`, internal notes can be left (such as: to-do lists, contact
information, etc.) for event staff to reference. In the `Ticket
instructions` field, helpful information for staff and attendees can be
shared (like, directions to the venue, opening/closing times, etc.)

<div class="tip">

<div class="title">

Tip

</div>

Type <span class="title-ref">/</span> in either text field (`Note` or
`Ticket instructions`) to reveal a sub-menu of `Structure` options.
These options provide various formatting options to ensure vital
internal information is organzied for event staff to review.

</div>

![View of the Notes tab in Odoo
Events.](event_essentials/events-notes-tab.png)

## Invite attendees to the event

To invite people to an event, click the `Invite` button located in the
top left corner of the event form.

Inside the invite template form, are options to sent email or SMS
invites. Each message can be fully customized, and recipients can be
added.

Adding a `Subject` line for the invite message is required, but the
`Preview
Text` field is optional. The `Preview Text` is a catchy preview sentence
meant to encourage recipients to open the email.

<div class="note">

<div class="title">

Note

</div>

In most cases, the `Preview Text` is displayed next to the subject. Keep
this field empty to ensure the first characters of the email content
appear, instead.

</div>

### Select invitees and configure recipient filters

In the middle of the invitation form, find and click the `Recipients`
field, to reveal a drop-down menu of recipient options. These choices
represent where Odoo will find the desired recipients' information.

Once an option from this menu is selected (e.g. `Applicant`, `Contact`,
`Event Registration`, `Lead/Opportunity`, etc.), Odoo will send the
invitation to all recipients who match that initial rule. Additional
rules can be added to narrow down the target recipients, by clicking
`Add Filter`.

![View of the add filter button beneath the recipients field in Odoo
Events.](event_essentials/add-filter-button.png)

Clicking `Add Filter` reveals three fields, formatted like an equation.
To reveal the sub-menu options, click each field, and make the desired
selections, until the preferred configuration has been acheived. The
number of `Records` that match the rule(s) are indicated to the right of
the `Recipients` field, in green.

<div class="note">

<div class="title">

Note

</div>

Some sub-menu options in the first rule field allow for a second choice
to provide even more specificity.

</div>

To the right of each rule, are `x`, `+`, and `...` icons. The `x` icon
deletes a specific node (line) of the rule. The `+` icon adds a node
(line) to the rule. And, the `...` icon adds a branch to the node. A
branch means two additional, indented sub-nodes are added to the rule,
providing even more specificity to the line above it.

### Build a custom event invite

In the `Mail Body` tab, there are a number of pre-configured message
templates to choose from. Select the desired template, and modify every
element of its design details with Odoo's drag-and-drop web builder,
located on the right sidebar.

![View of the drag and drop building blocks used to customize event
invite emails.](event_essentials/event-email-builder-block.gif)

<div class="tip">

<div class="title">

Tip

</div>

To build an email event invite from scratch, select the `Plain Text`
template, and Odoo will provide a blank email canvas, which can be
customized either by using the front-end rich text editor that accepts
slash (<span class="title-ref">/</span>) commands, or the XML code
editor when `developer
mode <developer-mode>` is engaged and the `</>` icon is pressed.

</div>

<div class="note">

<div class="title">

Note

</div>

The `Mail Body` tab (and template options), are only available if the
event invite `Mailing Type` is designated as an `Email`. If `SMS` is the
`Mailing Type`, a `SMS Content` tab (consisting of a blank text space),
is available, instead.

</div>

### Modify event invite settings

The options under the `Settings` tab are different, depending on the
specified `Mailing Type`.

If the `Email` option is selected as the `Mailing Type`, an employee can
be designated as the `Responsible`, meaning that person is the one
responsible for this particular invite message. `Send From` and `Reply
To` email aliases can be designated here, as well.

Also, if any specific documents are required (or helpful) for this event
invite, they can be sent along with this email, by clicking `ATTACH A
FILE`, and adding the appropriate document(s).

If the `SMS` option is selected as the `Mailing Type`, a `Responsible`
can be designated, and the option to `Include an opt-out link` is
available.

### Send event invitations to recipients

If the selected `Mailing Type` is `Email`, there are three options to
send the invite: `Send`, `Schedule`, and `Test`.

The `Send` option sends the invite right away. The `Schedule` option
reveals a pop-up, in which a scheduled date/time can be selected for the
email to be sent. The `Test` option reveals a `Test Mailing` pop-up,
where specific recipient email addresses can be entered for Odoo to send
them the current version of the mailing for review before officially
sending it out to prospective event attendees.

If the selected `Mailing Type` is `SMS`, there are four options to send
the invite: `Put in Queue`, `Send Now`, `Schedule`, and `Test`.

The `Put in Queue` option schedules an SMS message to all recipients
(that match the designated rules, if any) in the near future. Clicking
`Put in Queue` reveals a pop-up, requiring confirmation. When confirmed,
a blue banner appears on the event invite template form, indicating that
the SMS will be sent later that day.

<div class="note">

<div class="title">

Note

</div>

The `Send Now`, `Schedule`, and `Test` options all function the same way
for both `Mailing Type` options.

</div>

## Publish events

Until an event is published, it will remain hidden from public view on
the website and registering for it will not be possible. To publish an
event, navigate to it either from the back end of Odoo through the
`Events` application, or access the hidden event page through the front
end as either a priveliged user or administrator.

If navigating from the back end, go to the event form, and click the `Go
to Website` smart button to reach the event page on the website (on the
front end). If starting from the front end, simply navigate to the event
page that needs to be published.

No matter the route, an event page can only be published from the front
end. In the upper right corner of the event page on the website, toggle
the switch from the red `Unpublished` status to the green `Published`
status. Doing so instantly makes the event page accessible to the public
on the website.

![View of a website page and the option to publish the event in Odoo
Events.](event_essentials/events-frontend-publish.png)


---
## File: ./content/applications/marketing/events/track_manage_talks.md

# Track and manage talks

With Odoo Events, it's possible to provide attendees with the power to
propose presenters to speak at events.

## Configuration

First, go to `Events --> Configuration --> Settings` and enable
`Schedule &
Tracks`.

When that feature is enabled, two more options become available: *Live
Broadcast* and *Event Gamification*.

`Live Broadcast` allows for the airing of tracks online through a
YouTube integration.

`Event Gamification` allows for the sharing of a quiz with your
attendees, once a track (talk) is over.

<div class="tip">

<div class="title">

Tip

</div>

`Event Gamification` isn't necessary for tracks to appear on the event
page on the website, but it can enhance the engagement and overall
enjoyablity of the event for attendees.

</div>

## Talks, talk proposals, and agenda

Once those two features are enabled, the following links are
automatically added to the sub-header menu, located on the event page on
the website: `Talks`, `Talk Proposals`, and `Agenda`. Any attendee can
freely access these menu items and their corresponding content.

The `Talks` link takes the attendee to a page full of all the talks for
that event.

The `Talks Proposals` link takes the attendee to a form page, where they
can propose talks for the event.

The `Agenda` link takes the attendee to a page with all the talks for
the event, but in a calendar/time-slot format.

![View of the published website and the talks, talk proposals, and
agenda in Odoo
Events](track_manage_talks/events-talk-proposal-header.png)

## Manage talk proposals

When attendees fill out and submit a talk proposal form on the website,
a new `Proposal` is instantly created in the back end for the event.

<div class="note">

<div class="title">

Note

</div>

All talks (Proposals, Confirmed, Announced, etc.) are accessible via the
`Tracks` smart button on the event form.

</div>

![View of the talks' proposals page emphasizing the column proposal in
Odoo Events.](track_manage_talks/events-tracks-kanban.png)

If a proposal is accepted, move the `Event Track` to the appropriate
stage in the Kanban view (e.g. <span class="title-ref">Confirmed</span>,
etc.). Then, go to that particular event's template form, and click the
`Go to Website` smart button to reach that specific talk's page on the
website.

In the upper right corner, toggle the switch from `Unpublished` to
`Published`, and the talk is instantly accessible on the website.

<div class="note">

<div class="title">

Note

</div>

Without publishing a talk, attendees will never be able to access it.

</div>

![View of the website page to publish a proposed talk for Odoo
Events.](track_manage_talks/events-tracks-publish.png)

### Attendees list and attendance

Once attendees have registered for a specific event, they are added to
the `Attendee List` for that event, which is accessible via the
`Attendees` smart button on the event template form, or `Reporting -->
Attendees` and sorted by event.

<div class="note">

<div class="title">

Note

</div>

When an attendee arrives at the event, they will be marked as attending
(`Confirmed
Attendance`), and the status of that attendee will change to `Attended.`

</div>

![Overview of events with the kanban view in Odoo
Events.](track_manage_talks/events-attendees-smartbutton.png)

When analyzing an `Attendees list`, Odoo provides different ways to view
the information. Each view option presents the same information, but in
a slightly different layout. To change the view, click on the icons in
the upper right hand of the screen.

![Various view options on the attendees list
page.](track_manage_talks/events-attendees-view-options.png)

In the `Kanban` view, it can be confirmed whether the attendees have
already paid or remain unpaid.

The `List` view provides information in a more traditional list
formation.

The `Calendar` view provides a clear schedule visualization of which
attendees are arriving on specific dates of the event.

The `Graph` view provides graphical representations of that event's
attendees, along with numerous filters and customizable measures for
deeper analysis.

The `Cohort` view lays out attendee data to better analyze the number of
registration dates.

<div class="note">

<div class="title">

Note

</div>

Tickets sold through sales orders validate attendees as soon as the
quotation is confirmed.

</div>

### Manage registrations

Upon selecting an attendee, Odoo reveals that specific attendee's detail
form.

From here, event badges can be sent manually, by selecting `Send By
Email`. The `Attendee` can also be marked as `Attended`, or the
registration can be canceled altogether via the `Cancel Registration`
button.

![View of an attendee form emphasizing the send by email and cancel
registration in
Odoo&#10;Events.](track_manage_talks/events-send-email-button.png)

### Lead Generation Rules

With Odoo, leads can be generated from events.

To create and configure a `Lead Generation Rule` related to events,
navigate to `Events app --> Configuration --> Lead Generation`.

On the `Lead Generation Rule` page, every configured `Lead Generation
Rule` can be found, along with pertinent data related to those rules.

![How the Lead Generation Rule page looks in Odoo
Events.](track_manage_talks/events-lead-generation-rule-page.png)

To create a new `Lead Generation Rule`, click `Create`, and fill out the
`Lead Generation Rule` form.

![How the Lead Generation Rule template looks in Odoo
Events.](track_manage_talks/events-lead-generation-rule-template.png)

After naming the rule, configure *how* the lead should be created
(either `Per Attendee` or `Per Order`), and *when* they should be
created, (when `Attendees are created`, when `Attendees are confirmed`,
or when `Attendees attended` the event).

In the `For any of these Events` section, there are fields to attach
this rule to any specific event categories, company, and/or event. To
add even more specificity to the rule, a domain filter rule can be
configured to ensure the rule only applies to a specific target audience
of attendees (found in the `If the Attendees meet these Conditions`
section).

Lastly, in the `Lead Default Values` section, designate a `Lead Type`,
then assign it to a specific `Sales Team` (and/or `Salesperson`), and
attach tags to the rule, if necessary.


---
## File: ./content/applications/marketing/email_marketing.md

  - show-content

  - show-toc

# Email marketing

Emails are an effective, fully-customizable form of communication that
are able to reach any target audience - large or small. The success of
an email is easily measurable, especially when a creative call-to-action
is involved.

Odoo *Email Marketing* provides professional-grade email design tools,
templates, and features, designed to simplify the otherwise complex
process required to create engaging emails, build successful campaigns,
and track their overall effectiveness in a single application.

<div class="seealso">

\- `/applications/marketing/email_marketing/mailing_lists` -
`/applications/marketing/email_marketing/unsubscriptions`

</div>

## Email marketing dashboard

To get started, click on the `Email Marketing` app icon, located on the
main Odoo dashboard, which leads to the main `Email Marketing` dashboard
(in the default kanban view).

To see all the mailings in the database, remove the default `My
Mailings` filter from the search bar.

![View of the main dashboard of the Odoo Email Marketing
application.](email_marketing/dashboard.png)

<div class="note">

<div class="title">

Note

</div>

In the search bar, by default, the filter: `My Mailings` is present.
That means the only information being seen (at that time) on the `Email
Marketing` dashboard are emails that the current user has created, sent,
or is responsible for.

This filter can be removed by clicking the `X` next to `My Mailings` in
the search bar. Doing so, reveals all the information for every email in
the database.

</div>

### Default kanban view and stages

The four kanban columns each represent the various stages of emails that
have been built or sent within the *Email Marketing* application.

The stages are: `Draft`, `In Queue`, `Sending`, `Sent`.

  - `Draft`: means the email is still being written/created.
  - `In Queue`: means the email is scheduled, and sent at a later date.
  - `Sending`: means the email is currently being sent to its
    recipients.
  - `Sent`: means the email has already been sent to its recipients.

In each stage, there are drag-and-drop cards representing the email
campaigns that have been created, and the stage they are in represents
the current status of that mailing.

Each mailing block on the `Email Marketing` dashboard provides key
information related to that specific email.

When the cursor hovers over the upper-right corner of an email campaign
card, three vertical dots (`⋮`) appear. When clicked, a mini drop-down
menu reveals the option to color-code the email `Delete` the email
altogether, or `Archive` the message for potential future use.

![View of the three-dot drop-down menu on the Odoo Email Marketing
dashboard.](email_marketing/three-dot-dropdown.png)

In the upper-right corner of the main `Email Marketing` dashboard, there
are other view options to choose from: `List` and `Graph`.

### List view

The `List` view (represented by the `☰ (three vertical lines)` icon)
provides the same key information, but in a classic list format.

![How the List view appears in the Odoo Email Marketing
application.](email_marketing/list-view.png)

### Graph view

The `Graph` view (represented by the `📊 (bar graph)` icon) provides the
same key information, but in a variety of customizable graph (and chart)
layouts.

![How the Graph view appears in the Odoo Email Marketing
application.](email_marketing/graph-view.png)

In the upper-left corner, there is a `Measures` menu, providing even
more filter options to further customize the graph views.

Those `Measures` options are: `A/B Testing percentage`, `Color Index`,
and `Count` (which is selected, by default).

### Filters, Group By, and Favorites search options

Regardless of the view chosen for the `Email Marketing` dashboard, the
`Filters`, `Group by`, and `Favorites` options are always available.

These options provide various ways to specify and organize the
information seen on the `Email Marketing` dashboard.

<div class="tabs">

<div class="tab">

Filters

This drop-down menu provides different ways to filter email campaigns on
the dashboard. The options are: `My Mailings`, `Sent Date`, `Archived`,
and `Add Custom Filter`. If `Add Custom Filter` is selected, Odoo
reveals an additional drop-down menu, with three customizable fields to
fill in, in order to retrieve results that fit more specific criteria.

![View of filters drop-down menu options on the Odoo Email Marketing
dashboard.](email_marketing/filters-dropdown.png)

</div>

<div class="tab">

Group By

This drop-down menu provides additional ways to organize the data on the
dashboard by grouping them in specific ways. Using this drop-down menu,
the data can be grouped by the messages' `Status`, or who it was `Sent
By`.

There is also the option to group the data by `Sent Period`, which has
its own sub-menu of options to choose from. The `Sent Period` options
are `Year`, `Quarter`, `Month`, `Week`, and `Day`.

If none of the above `Group By` options deliver the desired results,
click `Add Custom Group` at the bottom of the drop-down menu. Doing so
reveals a new field, wherein custom criteria can be selected and
applied, thus delivering any grouping of data that may be desired.

![View of the Group By drop-down menu on the Odoo Email Marketing
application.](email_marketing/group-by-dropdown.png)

</div>

<div class="tab">

Favorites

This drop-down menu provides different ways to incorporate past search
filters and other record-related options to customize the dashboard. The
options are: `Save current
search`, `Import records`, `Add to my dashboard`, and `Add to
Google Spreadsheet`.

![View of the Favorites drop-down menu on the Odoo Email Marketing
application.](email_marketing/favorites-dropdown.png)

</div>

</div>

## Settings

To view (and modify) the *Email Marketing* settings, navigate to `Email
Marketing
application --> Configuration --> Settings`.

![View of the Settings page in the Odoo Email Marketing
application.](email_marketing/settings-page.png)

On this `Settings` page, there are three features available. The
features are: `Mailing Campaigns`, `Blacklist Option when
Unsubscribing`, and `Dedicated Server`.

  - `Mailing Campaigns`: enables the option to manage mass mailing
    campaigns.
  - `Blacklist Option when Unsubscribing`: allows recipients to
    blacklist themselves from future mailings during the unsubscribing
    process.
  - `Dedicated Server`: provides the option to utilize a separate,
    dedicated server for mailings. When enabled, Odoo reveals a new
    field (and link), in which the specific server configurations must
    be entered, in order for it to connect properly to Odoo.

## Create an email

To create an email, open the `Email Marketing` application, and click
the `Create` button in the upper-left corner.

Clicking `Create` reveals a blank email detail form.

![View of a blank email detail form in Odoo Email Marketing
application.](email_marketing/blank-email-detail-form.png)

First, enter a `Subject` to the email. The `Subject` is visible in the
recipients' inbox, allowing them to get quickly see what the message is
about.

<div class="note">

<div class="title">

Note

</div>

The `Subject` field is mandatory. An email can not be sent without a
`Subject`.

</div>

<div class="tip">

<div class="title">

Tip

</div>

The `☺ (smiley face)` icon at the end of the `Subject` field (and
`Preview Text` field) represents emojis. Click that `☺ (smiley face)`
icon to reveal a menu of emojis that can be used in either field.

</div>

Next, there is the option to enter some `Preview Text`. This text is a
catchy preview sentence that encourages recipients to open the message.
In most inboxes, this is displayed next to the subject.

<div class="tip">

<div class="title">

Tip

</div>

Keep the `Preview Text` empty to show the first characters of the email
content, instead.

</div>

### Recipients

After that, it's time to choose the recipients of this email, which can
be completed in the `Recipients` field.

![View of recipients drop-down menu in the Odoo Email Marketing
application.](email_marketing/recipients-dropdown.png)

The default option is `Mailing List`. If `Mailing List` option is
selected, a specific `Mailing List` needs to be chosen from the adjacent
`Select mailing
lists` field drop-down menu.

Then, Odoo will only send this email to contacts on that specific
mailing list.

<div class="seealso">

`/applications/marketing/email_marketing/mailing_lists`

</div>

When the `Recipients` field is clicked, a drop-down menu of other
options is revealed. Each option provides different ways Odoo can create
a target audience for the email.

Those options (excluding the default `Mailing List`) provide the option
to create a more specified recipient filter, in an equation-like format.

The `Recipients` field options are as follows:

  - `Applicant`: filter focuses on specific job applicants in the
    database.
  - `Contact`: filter focuses on specific contacts in the database.
  - `Event Registration`: filter focuses on people in the database who
    purchased event registrations.
  - `Event Track`: filter focuses on people in the database who hosted a
    specific talk (track) at an event.
  - `Lead/Opportunity`: filter focuses on leads or opportunities in the
    database.
  - `Mailing Contact`: filter focuses on specific mailing contacts in
    the database.
  - `Sales Order`: filter focuses on a specific sales orders in the
    database.

If the specified recipient fields don't automatically reveal themselves,
simply click the `Add Filter` button beneath the `Recipients` field, and
Odoo reveals the necessary equation fields to further drill down the
target recipients for this mailing.

### Add a recipient filter

To add a more specified recipient filter, select any recipient option
(other than `Mailing
List`), and clicking `Add Filter`, if needed, to reveal three fields,
formatted like an equation.

To reveal the sub-menu options, click each field, and make the desired
selections, until the preferred configuration has been achieved. The
number of `Records` that match the rule(s) are indicated to the right of
the `Recipients` field, in green.

![View of how recipient filters can be customized in Odoo Email
Marketing.](email_marketing/add-filter-button.png)

<div class="note">

<div class="title">

Note

</div>

Some sub-menu options in the first rule field allow for a second choice
to provide even more specificity.

</div>

To the right of each rule, are `× (Delete node)`, `＋ (Add node)`, and `⋯
(Add branch)` icons.

The `× (Delete node)` icon deletes a specific node (line) of the rule.
The `＋
(Add node)` icon adds a node (line) to the rule. And, the `⋯ (Add
branch)` icon adds a branch to the node. A branch means two additional,
indented sub-nodes are added to the rule, providing even more
specificity to the line above it.

### Mail body tab

At the bottom of the email form are two tabs: `Mail Body` and
`Settings`. Let's focus on `Mail Body` tab first.

In the `Mail Body` tab, there are a number of pre-configured message
templates to choose from. Select the desired template, and modify every
element of its design details with Odoo's drag-and-drop building blocks,
located on the right sidebar. Each building block provides unique
features and professional design elements.

![View of the building blocks used to create mailings in Odoo Email
Marketing application.](email_marketing/mail-blocks.png)

<div class="tip">

<div class="title">

Tip

</div>

To build an email from scratch, select the `Plain Text` template, and
Odoo provides a blank email canvas, which can be customized in a number
of ways - either by using the front-end rich text editor that accepts
slash (`/`) commands, or with the XML code editor when `Developer Mode
(debug mode) <developer-mode>` is engaged, and the `</>` icon is
clicked.

</div>

### Settings tab

To the right of the `Mail Body` tab is the `Settings` tab.

<div class="note">

<div class="title">

Note

</div>

The options available in the `Settings` tab will be different, depending
on if the `Mailing Campaigns` feature is activated in the `Settings`
page of the `Email Marketing` application (`Email Marketing -->
Configuration
--> Settings`).

</div>

Without the `Mailing Campaigns` feature activated, the `Settings` tab on
the email detail form looks like this:

![View of settings tab in Odoo Email Marketing app, without settings
activated.](email_marketing/settings-without-features.png)

  - `Responsible`: choose an employee (in the database) to be
    responsible for this particular email.
  - `Send From`: designate an email alias that'll display as the sender
    of this particular email.
  - `Reply To`: designate an email alias to whom all the replies to this
    particular email will be sent.
  - `Attachments`: if any specific documents are required (or helpful)
    for this event invite, they can be sent along with this email, by
    clicking `ATTACH A FILE`, and adding the appropriate document(s).

When the `Mailing Campaigns` feature *is* activated, additional
`Marketing` options appear in the `Settings` tab, which look like this:

![View of settings tab in Odoo Email Marketing when settings are
activated.](email_marketing/settings-tab-with-settings.png)

The additional features are: `Mailing Campaign`, `Allow A/B Testing`,
and `A/B Testing percentage`.

## Mailing campaigns

The `Mailing Campaign` field provides the option to add this particular
email to a previously-made email campaign in the database. Click the
empty field to reveal a drop-down menu containing all previously-made
mailing campaigns in the database.

![View of a mailing campaign drop-down menu in Odoo Email Marketing
application.](email_marketing/mailing-campaign-dropdown.png)

If the desired campaign isn't available in the initial drop-down menu,
select `Search
More` to reveal a complete list of all mailing campaigns in the
database. Or, type the name of the desired mailing campaign in the
`Mailing Campaign` field, until Odoo reveals the desired campaign in the
drop-down menu. Then, select the desired campaign.

### Create new mailing campaign (from Settings tab)

To create a new campaign from this `Mailing Campaign` field, start
typing the name of this new campaign, and select `Create [Campaign
Name]` or `Create and Edit...`.

Click `Create` to add this new mailing campaign to the database, and
modify its settings in the future. And click `Create and Edit...` to add
this new mailing campaign to the database, and Odoo reveals a pop-up
window.

![View of the email mailing campaign pop-up window in Odoo Email
Marketing application.](email_marketing/mailing-campaign-popup.png)

Here, the new mailing campaign can be further customized. Adjust the
`Campaign Name`, assign a `Responsible`, and add `Tags`.

The top row of the `Create: Mailing Campaign` pop-up window is filled
with analytical smart buttons. Each of which displays various metrics
related to the campaign. When clicked, Odoo reveals a separate, more
detailed page with even more in-depth statistics.

The option to instantly a new communication from this pop-up window is
available in the upper-left corner. The adjustable status bar is located
in the upper-right.

When all modifications are ready to be finalized, click `Save`. To
delete the entire campaign, click `Discard`.

### Create new mailing campaign (from Campaigns page)

When the `Mailing Campaigns` feature is activated, a new `Campaigns`
option appears in the header of the *Email Marketing* application.
Campaigns can also be created on this `Campaigns` page in the *Email
Marketing* app.

To do that, navigate to `Email Marketing app --> Campaigns --> Create`.
When that's clicked, a pop-up window appears, in which the `Campaign
Name`, `Responsible`, and `Tags` can be added directly on the
`Campaigns` dashboard.

![View of the campaign pop-up window in Odoo Email
Marketing.](email_marketing/campaigns-page-popup.png)

Click `Add` to add the campaign to the database, and freely edit it
later on. Or, click `Edit` and Odoo reveals the campaign template form
on a separate page, providing the opportunity to further edit the
campaign, send communications related to the campaign, and analyze
various metrics related to the campaign, via the smart buttons at the
top of the form.

## A/B testing

Back in the `Settings` tab of the mailing, if the `Allow A/B Testing`
box is checked, recipients are only be mailed to once. This allows
different mailings to be sent to randomly selected recipients. This
tests the overall effectiveness of the mailing, and eliminates the need
for duplicate messages.

The `A/B Testing percentage` field represents the percentage of contacts
in the database that this message will be mailed to, as a part of the
`A/B Testing`. Enter a number between
<span class="title-ref">1-100</span>. The recipients are randomly
chosen.

## Send, schedule, or test

After finalizing the mailing, Odoo provides the following options in the
upper-left corner of the email template page. Those options are: `Send`,
`Schedule`, and `Test`.

While in `Edit` mode, there are also buttons to `Save` or `Discard` the
mailing, as well.

  - `Send` - Click to have Odoo send the email to the desired
    recipients. When Odoo has sent the mailing, the status changes to
    *Sent*.
  - `Schedule` - Click to reveal a pop-up window, in which a future
    date-time is chosen. Odoo sends the mailing to the desired
    recipients at that specified date-time. When a date-time is chosen,
    the status of the mailing changes to *In Queue*.
  - `Test` - Click to reveal a pop-up window, in which Odoo allows a
    sample email to be sent for testing purposes. Enter the desired
    recipient's email address in the `Recipients` field, and click `Send
    Sample Mail`.
  - `Save` - Click to save the mailing as a draft, which can be edited
    (and sent) at a later date. When clicked, the status of the mailing
    stays as `Draft`.
  - `Discard` - Click to discard any changes that have been made since
    the last save.

<div class="tip">

<div class="title">

Tip

</div>

When `Save` or `Discard` is selected (while in `Edit` mode), those
options are replaced with an `Edit` button and a `Create` button. Click
`Edit` to re-enter `Edit` mode. Click `Create` to start creating a new
mailing.

</div>

<div class="note">

<div class="title">

Note

</div>

By default, there's a daily limit applied for **all emails** sent
throughout *all* applications. So, if there are remaining emails to be
sent after a limit has been reached, those mailings *will not* be sent
automatically the next day. The sending needs to be forced, by opening
the email and clicking `Retry`.

</div>

<div class="toctree" data-titlesonly="">

email\_marketing/mailing\_lists email\_marketing/unsubscriptions

</div>


---
## File: ./content/applications/marketing/marketing_automation.md

  - nosearch

  - show-content

  - hide-page-toc

  - show-toc

# Marketing Automation

<div class="seealso">

\- [Odoo Tutorials: Marketing](https://www.odoo.com/slides/marketing-27)

</div>

<div class="toctree" data-titlesonly="">

marketing\_automation/getting\_started marketing\_automation/advanced

</div>


---
## File: ./content/applications/marketing/events.md

  - nosearch

# Events

<div class="seealso">

\- [Odoo Tutorials: Events](https://www.odoo.com/slides/surveys-63)

</div>

<div class="toctree">

events/event\_essentials events/sell\_tickets
events/track\_manage\_talks

</div>


---
## File: ./content/applications/marketing/surveys.md

  - nosearch

# Surveys

<div class="seealso">

\- [Odoo Tutorials: Surveys](https://www.odoo.com/slides/surveys-62)

</div>

<div class="toctree" data-titlesonly="">

surveys/create surveys/scoring surveys/time\_random

</div>


---
## File: ./content/applications/finance/accounting/receivables/customer_payments/followup.md

# Follow-up on invoices

A follow-up message can be sent to customers when a payment is overdue.
Odoo helps you identify late payments and allows you to schedule and
send the appropriate reminders, using **follow-up actions** that trigger
automatically one or more actions according to the number of overdue
days. You can send your follow-ups via different means such as email,
post, or SMS.

<div class="seealso">

\- [Odoo Tutorials: Payment
Follow-up](https://www.odoo.com/slides/slide/payment-follow-up-1682)

</div>

## Configuration

To configure a `Follow-Up Action`, go to `Accounting --> Configuration
-->
Follow-up Levels`. Several follow-up actions are available by default,
and you can customize them any way you want or create new ones to
trigger the following actions:

  - Send an email;
  - `Send an SMS message <pricing/pricing_and_faq>`;
  - Print a letter;
  - `Send a letter <customer_invoices/snailmail>`;
  - Manual action (creates a task).

It is also possible to automatically send a reminder by enabling the
`Auto Execute` option, within a specific `Follow-Up Action`.

<div class="tip">

<div class="title">

Tip

</div>

To send a reminder before the actual due date is reached, set a negative
number of due days.

</div>

## Follow-up reports

The overdue invoices you need to follow up on are available in
`Accounting -->
Customers --> Follow-up Reports`. From there, you can identify all the
customers that have late unpaid invoices.

When you open a customer, you see all their unpaid invoices (overdue or
not). The due dates of the late invoices appear in red. Select the
invoices that are not late yet in the `Excluded` column to exclude them
from the reminder you send.

It is up to you to decide how to remind your customer. You can select
`Print Letter`, `Send By Email`, `Send By Post`, `Send By SMS`. Then,
click on `Done` to view the next follow-up that needs your attention.

<div class="note">

<div class="title">

Note

</div>

\- The contact information available on the invoice or on the contact
form is used to send the reminder. - When the reminder is sent, it is
documented in the chatter of the invoice. - If it is not the right time
for a reminder, you can specify the `Next Reminder Date` and click on
`Remind me later`. You will get the next report according to the next
reminder date set on the statement.

</div>

<div class="tip">

<div class="title">

Tip

</div>

Reconcile your bank statements right before launching your follow-up
process to avoid sending a reminder to a customer that has already paid
you.

</div>

### Debtor's trust level

To know whether a customer usually pays late or not, you can set a trust
level by marking them as `Good Debtor`, `Normal Debtor`, or `Bad Debtor`
on their follow-up report. To do so, click on the bullet next to the
customer's name and select a trust level.

![Set debtor's trust level](followup/debtors-trust-level.png)

### Send reminders in batches

You can send reminder emails in batches from the `Follow-up Reports`
page. To do so, select all the reports you would like to process, click
on the `Action` gear icon, and select `Process follow-ups`.

<div class="seealso">

\- `../../../../general/in_app_purchase` -
`../../../../marketing/sms_marketing/pricing/pricing_and_faq` -
`../customer_invoices/snailmail`

</div>


---
## File: ./content/applications/finance/accounting/receivables/customer_payments/batch_sdd.md

# Batch payments: SEPA Direct Debit (SDD)

SEPA, the Single Euro Payments Area, is a payment-integration initiative
of the European Union for simplification of bank transfers denominated
in euros. With **SEPA Direct Debit** (SDD), your customers can sign a
mandate that authorizes you to collect future payments from their bank
accounts. This is particularly useful for recurring payments based on a
subscription.

You can record customer mandates in Odoo, and generate
<span class="title-ref">.xml</span> files containing pending payments
made with an SDD mandate.

<div class="note">

<div class="title">

Note

</div>

| SDD is supported by all SEPA countries, which includes the 27 member
states of the European Union as well as additional countries. | [List of
all SEPA
countries](https://www.europeanpaymentscouncil.eu/document-library/other/epc-list-sepa-scheme-countries).

</div>

## Configuration

Go to `Accounting app --> Configuration --> Settings`, activate `SEPA
Direct Debit (SDD)`, and click on `Save`. Enter your company's `Creditor
Identifier`. This number is provided by your bank institution, or the
authority responsible for delivering them.

![Add a SEPA Creditor Identifier to Odoo
Accounting](batch_sdd/creditor-identifier.png)

## SEPA Direct Debit Mandates

### Create a mandate

The `SDD (sepa direct debit)` Mandate is the document that your
customers sign to authorize you to collect money directly from their
bank accounts.

To create a new mandate, go to `Accounting app --> Customers -->
Direct Debit Mandates`, on `Create`, and fill out the form. Export the
PDF file by clicking on `Print`. It is then up to your customer to sign
this document. Once done, upload the signed file and click on `Validate`
to start running the mandate.

<div class="important">

<div class="title">

Important

</div>

Make sure that the **IBAN bank accounts details** are correctly recorded
on the debtor’s contact form, under the `Accounting` tab, and in your
own `Bank Account
<../../bank/setup/bank_accounts>` settings.

</div>

### SEPA Direct Debit as a payment method

SDD can be used as a payment method both on your **eCommerce** or on the
**Customer Portal** by activating SDD as a **Payment Acquirer**. With
this method, your customers can create and sign their mandates
themselves.

To do so, go to `Accounting app --> Configuration --> Payment
Acquirers`, click on `SEPA Direct Debit`.

<div class="important">

<div class="title">

Important

</div>

Make sure to change the `State` field to `Enabled`, and to check `Online
Signature`, as this is necessary to let your customers sign their
mandates.

</div>

Customers using SDD as payment method get prompted to add their IBAN,
email address, and to sign their SDD mandate.

### Close or revoke a mandate

Direct debit mandates are closed automatically after their `End Date`.
If this field is left blank, the mandate keeps being **Active** until it
is **Closed** or **Revoked**.

Clicking on `Close` updates the mandate’s end day to the current day.
This means that invoices issued after the present day will not be
processed with an SDD payment.

Clicking on `Revoke` disables the mandate immediately. No SDD payment
can be registered anymore, regardless of the invoice’s date. However,
payments that have already been registered are still included in the
next SDD <span class="title-ref">.xml</span> file.

<div class="warning">

<div class="title">

Warning

</div>

Once a mandate has been `closed` or `revoked`, it cannot be reactivated.

</div>

## Get paid with SEPA Direct Debit batch payments

### Customer invoices

You can register SDD payments for invoices issued to customers who have
an active SDD mandate.

To do so, open the invoice, click on `Register Payment`, and choose
`SEPA Direct Debit` as payment method.

### Generate SEPA Direct Debit <span class="title-ref">.XML</span> files to submit payments

<span class="title-ref">.xml</span> files with all SDD payment
instructions can be uploaded to your online banking interface to process
all payments at once.

<div class="note">

<div class="title">

Note

</div>

The files generated by Odoo follow the SEPA Direct Debit
**PAIN.008.001.02** specifications, as required by the SEPA
customer-to-bank [implementation
guidelines](https://www.europeanpaymentscouncil.eu/document-library/implementation-guidelines/sepa-credit-transfer-customer-psp-implementation),
which ensures compatibility with the banks.

</div>

To generate your <span class="title-ref">.xml</span> file of multiple
pending SDD payments, you can create a batch payment. To do so, go to
`Accounting app --> Customers --> Payments`, select the needed payments,
then click on `Action`, and finally `Create a batch Payment`. Once you
click on `Validate`, the <span class="title-ref">.xml</span> file is
directly available for download.

![Generate an .XML file for your SDD payments in Odoo
Accounting](batch_sdd/xml.png)

Finally, upload this file to your online banking interface to process
the payments.

<div class="tip">

<div class="title">

Tip

</div>

You can retrieve all the generated SDD
<span class="title-ref">.xml</span> files by going to `Accounting app
--> Customers --> Batch Payments`.

</div>

<div class="seealso">

\* `batch` \* `../../bank/setup/bank_accounts` \* [List of all SEPA
countries](https://www.europeanpaymentscouncil.eu/document-library/other/epc-list-sepa-scheme-countries)
\* [Sepa
guidelines](https://www.europeanpaymentscouncil.eu/document-library/implementation-guidelines/sepa-credit-transfer-inter-psp-implementation-guidelines)

</div>


---
## File: ./content/applications/finance/accounting/receivables/customer_payments/check.md

# Register customer payments by checks

There are two ways to handle payments received by checks. Odoo support
both approaches so that you can use the one that better fits your
habits.

1.  **Undeposited Funds:** once you receive the check, you record a
    payment by check on the invoice. (using a Check journal and posted
    on the Undeposited Fund account) Then, once the check arrives in
    your bank account, move money from Undeposited Funds to your bank
    account.
2.  **One journal entry only:** once your receive the check, you record
    a payment on your bank, paid by check, without going through the
    **Undeposited Funds**. Once you process your bank statement, you do
    the matching with your bank feed and the check payment, without
    creating a dedicated journal entry.

We recommend the first approach as it is more accurate (your bank
account balance is accurate, taking into accounts checks that have not
been cashed yet). Both approaches require the same effort.

Even if the first method is cleaner, Odoo support the second approach
because some accountants are used to it (quickbooks and peachtree
users).

<div class="note">

<div class="title">

Note

</div>

You may have a look at the *Deposit Ticket feature* if you deposit
several checks to your bank accounts in batch.

</div>

## Option 1: Undeposited Funds

### Configuration

  - Create a journal **Checks**
  - Set **Undeposited Checks** as a default credit/debit account
  - Set the bank account related to this journal as **Allow
    Reconciliation**

### From check payments to bank statements

The first way to handle checks is to create a check journal. Thus,
checks become a payment method in itself and you will record two
transactions.

Once you receive a customer check, go to the related invoice and click
on **Register Payment**. Fill in the information about the payment:

  - Payment method: Check Journal (that you configured with the debit
    and credit default accounts as **Undeposited Funds**)
  - Memo: write the Check number

![image](check/check02.png)

This operation will produce the following journal entry:

| Account            | Statement Match | Debit  | Credit |
| ------------------ | --------------- | ------ | ------ |
| Account Receivable |                 |        | 100.00 |
| Undeposited Funds  |                 | 100.00 |        |

The invoice is marked as paid as soon as you record the check.

Then, once you get the bank statements, you will match this statement
with the check that is in Undeposited Funds.

| Account           | Statement Match | Debit  | Credit |
| ----------------- | --------------- | ------ | ------ |
| Undeposited Funds | X               |        | 100.00 |
| Bank              |                 | 100.00 |        |

If you use this approach to manage received checks, you get the list of
checks that have not been cashed in the **Undeposit Funds** account
(accessible, for example, from the general ledger).

<div class="note">

<div class="title">

Note

</div>

Both methods will produce the same data in your accounting at the end of
the process. But, if you have checks that have not been cashed, this one
is cleaner because those checks have not been reported yet on your bank
account.

</div>

## Option 2: One journal entry only

### Configuration

These is nothing to configure if you plan to manage your checks using
this method.

### From check payments to bank statements

Once you receive a customer check, go to the related invoice and click
on **Register Payment**. Fill in the information about the payment:

  - **Payment method:** the bank that will be used for the deposit
  - Memo: write the check number

![image](check/check03.png)

The invoice is marked as paid as soon as you record the check.

Once you will receive the bank statements, you will do the matching with
the statement and this actual payment. (technically: point this payment
and relate it to the statement line)

With this approach, you will get the following journal entry in your
books:

| Account            | Statement Match | Debit  | Credit |
| ------------------ | --------------- | ------ | ------ |
| Account Receivable | X               |        | 100.00 |
| Bank               |                 | 100.00 |        |

<div class="tip">

<div class="title">

Tip

</div>

You may also record the payment directly without going on the customer
invoice, using the menu `Sales --> Payments`. This method may be more
convenient if you have a lot of checks to record in a batch but you will
have to reconcile entries afterwards (matching payments with invoices)

</div>

If you use this approach to manage received checks, you can use the
report **Bank Reconciliation Report** to verify which checks have been
received or paid by the bank. (this report is available from the
**More** option from the Accounting dashboard on the related bank
account).

![image](check/check01.png)


---
## File: ./content/applications/finance/accounting/receivables/customer_payments/recording.md

# Different ways to record a payment

In Odoo, payments can either be linked automatically to an invoice or
bill or be stand-alone records for use at a later date.

If a payment is **linked to an invoice or bill**, it reduces the amount
due of the invoice. You can have multiple payments related to the same
invoice.

If a payment is **not linked to an invoice or bill**, the customer has
an outstanding credit with your company, or your company has an
outstanding debit with a vendor. You can use those outstanding amounts
to reduce unpaid invoices/bills.

<div class="seealso">

\- `Internal transfers <../../bank/interbank>` -
`../../bank/reconciliation/use_cases` - [Odoo Tutorials: Bank
Configuration](https://www.odoo.com/slides/slide/bank-configuration-1880)

</div>

## Registering payment from an invoice or bill

When clicking on `Register payment` in a customer invoice or vendor
bill, it generates a new journal entry and changes the amount due
according to the amount of the payment. The counterpart is reflected in
an outstanding receipts or payments account. At this point, the customer
invoice or vendor bill is marked as `In payment`. Then, when the
outstanding account is reconciled with a bank statement line, the
invoice or vendor bill changes to the `Paid` status.

The information icon near the payment line displays more information
about the payment. You can access additional information, such as the
related journal, by clicking on `View`.

![See detailed information of a payment](recording/information-icon.png)

<div class="note">

<div class="title">

Note

</div>

\- The customer invoice or vendor bill should be in the status `Posted`
to register the payment. - When clicking on `Register payment`, you can
select the amount to pay and make a partial or full payment. - If your
main bank account is set as outstanding account, and the payment is made
in Odoo (not related to a bank statement), invoices and bills are
directly registered in the status `Paid`. - If you unreconciled a
payment, it still appears in your books but is no longer linked to the
invoice. - If you (un)reconcile a payment in a different currency, a
journal entry is automatically created to post the currency exchange
gains/losses (reversal) amount. - If you (un)reconcile a payment and an
invoice having cash basis taxes, a journal entry is automatically
created to post the cash basis tax (reversal) amount.

</div>

<div class="seealso">

\- `../../bank/reconciliation/use_cases`

</div>

## Registering payments not tied to an invoice or bill

When a new payment is registered via the menu `Customers / Vendors -->
Payments`, it is not directly linked to an invoice or bill. Instead, the
account receivable or the account payable are matched with the
outstanding account until they are manually matched with their related
invoice or bill.

### Matching invoices and bills with payments

A blue banner appears when you validate a new invoice or bill and there
is an outstanding payment for this specific customer or vendor. It can
easily be matched from the invoice or the bill by clicking on `ADD`
under `Outstanding Credits` or `Outstanding Debits`.

![Shows the ADD option to reconcile an invoice or a bill with a
payment](recording/add-option.png)

The invoice or bill is now marked as `In payment` until it is reconciled
with the bank statement.

<div class="seealso">

\- `../../bank/reconciliation/use_cases`

</div>

### Batch payment

Batch payments allow you to group different payments to ease
`reconciliation
<../../bank/reconciliation/use_cases>`. They are also useful when you
deposit checks to the bank or for SEPA Payments. To do so, go to
`Accounting --> Customers --> Batch Payments` or `Accounting --> Vendors
--> Batch Payments`. In the list view of payments, you can select
several payments and group them in a batch by clicking on `Action -->
Create
Batch Payment`.

<div class="seealso">

\- `../../receivables/customer_payments/batch` -
`../../receivables/customer_payments/batch_sdd`

</div>

### Payments matching

The `Payments matching` tool opens all unreconciled customer invoices or
vendor bills and gives you the opportunity to process them all one by
one, doing the matching of all their payments and invoices at once. You
can reach this tool from the `Accounting Dashboard -->
Customer Invoices / Vendor Bills`, and click on `⋮` and select `Payments
Matching`, or by going to `Accounting --> Reconciliation`.

<div class="note">

<div class="title">

Note

</div>

During the `reconciliation <../../bank/reconciliation/use_cases>`, if
the sum of the debits and credits does not match, there is a remaining
balance. This either needs to be reconciled at a later date or needs to
be written off directly.

</div>

### Batch payments matching

To reconcile several outstanding payments or invoices at once, for a
specific customer or vendor, the batch reconciliation feature can be
used. Go to `Accounting --> Reporting -->
Aged Receivable / Aged Payable`. You now see all transactions that have
not been reconciled yet, and when you select a customer or vendor, the
`Reconcile` option is displayed.

![See the reconcile option](recording/reconcile-option.png)

## Reconciling payments with bank statements

Once a payment has been registered, the status of the invoice or bill is
`In payment`. The next step is to reconcile it with the related bank
statement line to have the transaction finalized and the invoice or bill
marked as `Paid`.

<div class="seealso">

\- `../../bank/reconciliation/use_cases`

</div>


---
## File: ./content/applications/finance/accounting/receivables/customer_payments/online_payment.md

# Invoice online payment

To make it more convenient for your customers to pay the invoices you
issue, you can activate the **Invoice Online Payment** feature, which
adds a *Pay Now* button on their **Customer Portal**. This allows your
customers to see their invoices online and pay directly with their
favorite payment method, making the payment process much easier.

![Payment acquirer choice after having clicked on "Pay
Now"](online_payment/online-payment-acquirers.png)

## Configuration

Make sure your `Payment Acquirers are correctly configured
<payment_acquirers/configuration>`.

<div class="note">

<div class="title">

Note

</div>

By default, "`Wire Transfer
</applications/finance/payment_acquirers/wire_transfer>`" is the only
Payment Acquirer activated, but you still have to fill out the payment
details.

</div>

To activate the Invoice Online Payment, go to `Accounting -->
Configuration -->
Settings --> Customer Payments`, enable **Invoice Online Payment**, and
click on *Save*.

## Customer Portal

After issuing the invoice, click on *Send & Print* and send the invoice
by email to the customer. They will receive an email with a link that
redirects them to the invoice on their **Customer Portal**.

![Email with a link to view the invoice online on the Customer
Portal.](online_payment/online-payment-view-invoice.png)

They can choose which Payment Acquirer to use by clicking on *Pay Now*.

!["Pay now" button on an invoice in the Customer
Portal.](online_payment/online-payment-pay-now.png)

<div class="seealso">

  - `/applications/finance/payment_acquirers`

</div>


---
## File: ./content/applications/finance/accounting/receivables/customer_payments/batch.md

# Batch payments: Batch deposits (checks, cash etc.)

A **Batch Deposit** groups multiple payments in a single batch. This
allows you to deposit several payments into your bank account with a
single transaction. This is particularly useful to deposit cash and
checks.

This feature allows you to list several customer payments and print a
**deposit slip**. This ticket contains the details of the transactions
and a reference to the batch deposit. You can then select this reference
during a bank reconciliation to match the single bank statement line
with all the transactions listed in the batch deposit.

## Configuration

To activate the feature, go to `Accounting --> Configuration -->
Settings -->
Customer Payments`, activate **Batch Payments**, and click on *Save*.

### Payment Method Types

To record new payments as part of a Batch Deposit, you have to configure
first the Journal on which you record them.

To do so, go to `Accounting --> Configuration --> Journals`, open the
Journal you want to edit, click on *Edit*, and open the *Advanced
Settings* tab. In the *Payment Method Types* section, enable **Batch
Deposit**, and click on *Save*.

![Payment Method Types in a journal's advanced
settings](batch/batch-journal-settings.png)

<div class="note">

<div class="title">

Note

</div>

Your main bank accounts are automatically configured to process batch
payments when you activate the feature.

</div>

## Deposit multiple payments in batch

### Record payments to deposit in batch

`Register the payments <recording>` on the bank account on which you
plan to deposit them by opening the *Customer Invoice* for which you
received a payment, and clicking on *Register Payment*. There, select
the appropriate Journal linked to your bank account and select *Batch
Deposit* as Payment Method.

![Registering a customer payment as part of a Batch Deposit in Odoo
Accounting](batch/batch-register-payment.png)

Do this step for all checks or payments you want to process in batch.

<div class="note">

<div class="title">

Note

</div>

Make sure to write the payment reference in the **Memo** field.

</div>

### Add payments to a Batch Deposit

To add the payments to a Batch Deposit, go to `Accounting --> Customers
--> Batch
Payments`, and click on *Create*. Next, select the Bank and Payment
Method, then click on *Add a line*.

![Filling out a new Inbound Batch Payment form on Odoo
Accounting](batch/batch-new-inbound.png)

Select all payments to include in the current Batch Deposit and click on
*Select*. You can also record a new payment and add it to the list by
clicking on *Create*.

![Selection of all payments to include in the Batch
Deposit](batch/batch-payments-selection.png)

Once done, click on *Validate* to finalize your Batch Deposit. You can
then click on *Print* to download a PDF file to include with the deposit
slip that the bank usually requires to fill out.

### Bank Reconciliation

Once the bank statements are on your database, you can reconcile the
bank statement line with the *Batch Payment* reference. To do so, start
your **Bank Reconciliation** by going to your Accounting dashboard and
clicking on *Reconcile Items* on the related bank account. At the bank
statement line, click on *Choose counterpart or Create Write-off* to
display more options, open the *Batch Payments* tab, and select your
Batch Payment. All related payments are automatically added.

<div class="note">

<div class="title">

Note

</div>

The *Batch Payments* tab won't appear if a Partner is selected for this
bank statement line.

</div>

![Reconciliation of the Batch Payment with all its
transactions](batch/batch-bank-reconciliation.png)

If a check, or a payment, couldn't be processed by the bank and is
missing, remove the related payment before validating the bank
reconciliation.

<div class="seealso">

\- `recording` - `batch_sdd`

</div>


---
## File: ./content/applications/finance/accounting/receivables/customer_invoices/snailmail.md

# Snailmail

Sending direct mail can be an effective strategy for grabbing people's
attention, especially when their email inboxes are overflowing. With
Odoo, you have the ability to send invoices and follow-up reports
through postal mail worldwide, all from within your database.

## Configuration

Go to `Accounting --> Configuration --> Settings --> Customer invoices`
section to activate `Snailmail`.

To make it a by-default feature, select `Send by Post` in the `Default
Sending
Options` section.

![Under settings enable the snailmail feature in Odoo
Accounting](snailmail/setup-snailmail.png)

## Send invoices by post

Open your invoice, click on `Send & Print` and select `Send by Post`.
Make sure your customer’s address is set correctly, including the
country, before sending the letter.

<div class="important">

<div class="title">

Important

</div>

Your document must respect the following rules to pass the validation
before being sent:

  - Margins must be **5 mm** on all sides. As Odoo forces the outer
    margins by filling them with white before sending the snailmail, it
    can results in the user's custom being cut off if it protrudes into
    the margins. To check the margins, go to `Settings --> General
    Settings` and scroll down to the `Business Documents` section, and
    open the external link.
  - A square of **15mm by 15mm** on the bottom left corner has to stay
    clear.
  - The postage area has to stay clear (click `here
    <snailmail/snailmail-template.pdf>` to get more info about the
    area).
  - Pingen (Odoo Snailmail service provider) scans the area to process
    the address, so if something gets written outside the area, it is
    not counted as part of the address.

</div>

## Pricing

Snailmail is an `../../../../general/in_app_purchase` service that
requires prepaid stamps (=credits) to work. Sending one document
consumes one stamp.

To buy stamps, go to `Accounting --> Configuration --> Settings -->
Customer
invoices: Snailmail`, click on `Buy credits`, or go to `Settings -->
In-App
Purchases: Odoo IAP`, and click on `View my Services`.

<div class="tip">

<div class="title">

Tip

</div>

\- If you are on Odoo Online and have the Enterprise version, you
benefit from free trial credits to test the feature. - Click
[here](https://iap.odoo.com/privacy#header_4) to know about our *Privacy
Policy*.

</div>


---
## File: ./content/applications/finance/accounting/receivables/customer_invoices/deferred_revenues.md

# Deferred revenues

**Deferred revenues**, or **unearned revenue**, are payments made in
advance by customers for products yet to deliver or services yet to
render.

Such payments are a **liability** for the company that receives them
since it still owes its customers these products or services. The
company cannot report them on the current **Profit and Loss statement**,
or *Income Statement*, since the payments will be effectively earned in
the future.

These future revenues must be deferred on the company's balance sheet
until the moment in time they can be **recognized**, at once or over a
defined period, on the Profit and Loss statement.

For example, let's say we sell a five-year extended warranty for $ 350.
We already receive the money now but haven't earned it yet. Therefore,
we post this new income in a deferred revenue account and decide to
recognize it on a yearly basis. Each year, for the next 5 years, $ 70
will be recognized as revenue.

Odoo Accounting handles deferred revenues by spreading them in multiple
entries that are automatically created in *draft mode* and then posted
periodically.

<div class="note">

<div class="title">

Note

</div>

The server checks once a day if an entry must be posted. It might then
take up to 24 hours before you see a change from *draft* to *posted*.

</div>

## Prerequisites

Such transactions must be posted on a **Deferred Revenue Account**
rather than on the default income account.

### Configure a Deferred Revenue Account

To configure your account in the **Chart of Accounts**, go to
`Accounting -->
Configuration --> Chart of Accounts`, click on *Create*, and fill out
the form.

![Configuration of a Deferred Revenue Account in Odoo
Accounting](deferred_revenues/deferred_revenues01.png)

<div class="note">

<div class="title">

Note

</div>

This account's type must be either *Current Liabilities* or *Non-current
Liabilities*

</div>

### Post an income to the right account

#### Select the account on a draft invoice

On a draft invoice, select the right account for all the products of
which the incomes must be deferred.

![Selection of a Deferred Revenue Account on a draft invoice in Odoo
Accounting](deferred_revenues/deferred_revenues02.png)

#### Choose a different Income Account for specific products

Start editing the product, go to the *Accounting* tab, select the right
**Income Account**, and save.

![Change of the Income Account for a product in
Odoo](deferred_revenues/deferred_revenues03.png)

<div class="tip">

<div class="title">

Tip

</div>

It is possible to automate the creation of revenue entries for these
products (see: [Automate the Deferred
Revenues](#automate-the-deferred-revenues)).

</div>

#### Change the account of a posted journal item

To do so, open your Sales Journal by going to `Accounting --> Accounting
--> Sales`, select the journal item you want to modify, click on the
account, and select the right one.

![Modification of a posted journal item's account in Odoo
Accounting](deferred_revenues/deferred_revenues04.png)

## Deferred Revenues entries

### Create a new entry

A **Deferred Revenues entry** automatically generates all journal
entries in *draft mode*. They are then posted one by one at the right
time until the full amount of the income is recognized.

To create a new entry, go to `Accounting --> Accounting --> Deferred
Revenues`, click on *Create*, and fill out the form.

Click on **select related purchases** to link an existing journal item
to this new entry. Some fields are then automatically filled out, and
the journal item is now listed under the **Related Sales** tab.

![Deferred Revenue entry in Odoo
Accounting](deferred_revenues/deferred_revenues05.png)

Once done, you can click on *Compute Revenue* (next to the *Confirm*
button) to generate all the values of the **Revenue Board**. This board
shows you all the entries that Odoo will post to recognize your revenue,
and at which date.

![Revenue Board in Odoo
Accounting](deferred_revenues/deferred_revenues06.png)

#### What does "Prorata Temporis" mean?

The **Prorata Temporis** feature is useful to recognize your revenue the
most accurately possible.

With this feature, the first entry on the Revenue Board is computed
based on the time left between the *Prorata Date* and the *First
Recognition Date* rather than the default amount of time between
recognitions.

For example, the Revenue Board above has its first revenue with an
amount of $ 4.22 rather than $ 70.00. Consequently, the last entry is
also lower and has an amount of $ 65.78.

### Deferred Entry from the Sales Journal

You can create a deferred entry from a specific journal item in your
**Sales Journal**.

To do so, open your Sales Journal by going to `Accounting --> Accounting
--> Sales`, and select the journal item you want to defer. Make sure
that it is posted in the right account (see: [Change the account of a
posted journal item](#change-the-account-of-a-posted-journal-item)).

Then, click on *Action*, select **Create Deferred Entry**, and fill out
the form the same way you would do to [create a new
entry](#create-a-new-entry).

![Create Deferred Entry from a journal item in Odoo
Accounting](deferred_revenues/deferred_revenues07.png)

## Deferred Revenue Models

You can create **Deferred Revenue Models** to create your Deferred
Revenue entries faster.

To create a model, go to `Accounting --> Configuration --> Deferred
Revenue Models`, click on *Create*, and fill out the form the same way
you would do to create a new entry.

<div class="tip">

<div class="title">

Tip

</div>

You can also convert a *confirmed Deferred Revenue entry* into a model
by opening it from `Accounting --> Accounting --> Deferred
Revenues` and then, by clicking on the button *Save Model*.

</div>

### Apply a Deferred Revenue Model to a new entry

When you create a new Deferred Revenue entry, fill out the **Deferred
Revenue Account** with the right recognition account.

New buttons with all the models linked to that account appear at the top
of the form. Clicking on a model button fills out the form according to
that model.

![Deferred Revenue model button in Odoo
Accounting](deferred_revenues/deferred_revenues08.png)

## Automate the Deferred Revenues

When you create or edit an account of which the type is either *Current
Liabilities* or *Non-current Liabilities*, you can configure it to defer
the revenues that are credited on it automatically.

You have three choices for the **Automate Deferred Revenue** field:

1.  **No:** this is the default value. Nothing happens.
2.  **Create in draft:** whenever a transaction is posted on the
    account, a draft *Deferred Revenues entry* is created, but not
    validated. You must first fill out the form in `Accounting -->
    Accounting --> Deferred Revenues`.
3.  **Create and validate:** you must also select a Deferred Revenue
    Model (see: [Deferred Revenue Models](#deferred-revenue-models)).
    Whenever a transaction is posted on the account, a *Deferred
    Revenues entry* is created and immediately validated.

![Automate Deferred Revenue on an account in Odoo
Accounting](deferred_revenues/deferred_revenues09.png)

<div class="tip">

<div class="title">

Tip

</div>

You can, for example, select this account as the default **Income
Account** of a product to fully automate its sale. (see: [Choose a
different Income Account for specific
products](#choose-a-different-income-account-for-specific-products)).

</div>

<div class="seealso">

\* `../../getting_started/initial_configuration/chart_of_accounts` \*
[Odoo Academy: Deferred Revenues
(Recognition)](https://www.odoo.com/r/EWO)

</div>


---
## File: ./content/applications/finance/accounting/receivables/customer_invoices/overview.md

# Invoicing processes

Depending on your business and the application you use, there are
different ways to automate the customer invoice creation in Odoo.
Usually, draft invoices are created by the system (with information
coming from other documents like sales order or contracts) and
accountant just have to validate draft invoices and send the invoices in
batch (by regular mail or email).

Depending on your business, you may opt for one of the following way to
create draft invoices:

## Sales

### Sales Order ‣ Invoice

In most companies, salespeople create quotations that become sales order
once they are validated. Then, draft invoices are created based on the
sales order. You have different options like:

  - Invoice manually: use a button on the sale order to trigger the
    draft invoice
  - Invoice before delivery: invoice the full order before triggering
    the delivery order
  - Invoice based on delivery order: see next section

Invoice before delivery is usually used by the eCommerce application
when the customer pays at the order and we deliver afterwards.
(pre-paid)

For most other use cases, it's recommended to invoice manually. It
allows the salesperson to trigger the invoice on demand with options:
invoice the whole order, invoice a percentage (advance), invoice some
lines, invoice a fixed advance.

This process is good for both services and physical products.

<div class="seealso">

\- `/applications/sales/sales/invoicing/proforma`

</div>

### Sales Order ‣ Delivery Order ‣ Invoice

Retailers and eCommerce usually invoice based on delivery orders,
instead of sales order. This approach is suitable for businesses where
the quantities you deliver may differs from the ordered quantities:
foods (invoice based on actual Kg).

This way, if you deliver a partial order, you only invoice for what you
really delivered. If you do back orders (deliver partially and the rest
later), the customer will receive two invoices, one for each delivery
order.

<div class="seealso">

\- `/applications/sales/sales/invoicing/invoicing_policy`

</div>

### eCommerce Order ‣ Invoice

An eCommerce order will also trigger the creation of the order when it
is fully paid. If you allow paying orders by check or wire transfer,
Odoo only creates an order and the invoice will be triggered once the
payment is received.

## Contracts

### Regular Contracts ‣ Invoices

If you use contracts, you can trigger invoice based on time and material
spent, expenses or fixed lines of services/products. Every month, the
salesperson will trigger invoice based on activities on the contract.

Activities can be:

  - fixed products/services, coming from a sale order linked to this
    contract
  - materials purchased (that you will re-invoice)
  - time and material based on timesheets or purchases (subcontracting)
  - expenses like travel and accommodation that you re-invoice to the
    customer

You can invoice at the end of the contract or trigger intermediate
invoices. This approach is used by services companies that invoice
mostly based on time and material. For services companies that invoice
on fix price, they use a regular sales order.

<div class="seealso">

\- `/applications/sales/sales/invoicing/time_materials` -
`/applications/sales/sales/invoicing/expense` -
`/applications/sales/sales/invoicing/milestone`

</div>

### Recurring Contracts ‣ Invoices

For subscriptions, an invoice is triggered periodically, automatically.
The frequency of the invoicing and the services/products invoiced are
defined on the contract.

<div class="seealso">

\- `/applications/sales/sales/invoicing/subscriptions`

</div>

## Others

### Creating an invoice manually

Users can also create invoices manually without using contracts or a
sales order. It's a recommended approach if you do not need to manage
the sales process (quotations), or the delivery of the products or
services.

Even if you generate the invoice from a sales order, you may need to
create invoices manually in exceptional use cases:

  - if you need to create a refund
  - If you need to give a discount
  - if you need to change an invoice created from a sales order
  - if you need to invoice something not related to your core business

### Specific modules

Some specific modules are also able to generate draft invoices:

  - **membership**: invoice your members every year
  - **repairs**: invoice your after-sale services

### Resequencing of the invoices

It remains possible to resequence the invoices but with some
restrictions:

1.  The feature does not work when entries are previous to a lock date.
2.  The feature does not work if the sequence is inconsistent with the
    month of the entry.
3.  It does not work if the sequence leads to a duplicate.
4.  The order of the invoice remains unchanged.
5.  It is useful for people who use a numbering from another software
    and who want to continue the current year without starting over from
    the beginning.


---
## File: ./content/applications/finance/accounting/receivables/customer_invoices/cash_discounts.md

# Offer cash discounts

Cash discounts are incentives you can offer to customers to motivate
them to pay within a specific time frame. For instance, you offer a 2%
discount if the customer pays you within the first 5 days of the
invoice, when it is due in 30 days. This approach can greatly improve
your average collection period.

## Set up a cash discount

To set up a cash discount, go to `Accounting -->
Configuration --> Management --> Payment Terms` and click on *Create*.
Add a *Percent* type of term with a corresponding value (e.g. 98% of the
total price for a 2% discount) and the number of days during which the
offer is valid. You can also change the default balance term if needed.

![image](cash_discounts/cash_discounts01.png)

## Start offering the cash discount

Now, you can create a customer invoice and select the cash discount
payment term you added. Once the invoice is validated, Odoo will
automatically split the account receivables part of the journal entry
into two installments having different due dates. Since the discounted
price is already calculated, your payment controls will be simplified.

![image](cash_discounts/cash_discounts02.png)

## Grant the cash discount

The customer fulfilled the payment terms and therefore benefits from the
cash discount. When you process the bank statement, match the payment
with the related journal entry. Then, select the remaining cash discount
and click on *Create Write-off* to reconcile it.

![image](cash_discounts/cash_discounts03.png)

<div class="tip">

<div class="title">

Tip

</div>

You can also create a dedicated reconciliation model to make the process
easier. In this case, you should add a tax to the model based on the
taxes applied to your invoices. This means that if you handle multiple
tax rates, you need to create several reconciliation models. Note that
depending on your localisation, you might already have a Cash Discount
model available by default.

</div>

## Register the full payment

In this case, the customer has not fulfilled the payment term and cannot
benefit from the cash discount. When you process the bank statement,
match the payment with the two related journal entries.

![image](cash_discounts/cash_discounts04.png)

<div class="seealso">

\* `../../receivables/customer_invoices/payment_terms` \*
`../../bank/reconciliation/reconciliation_models`

</div>


---
## File: ./content/applications/finance/accounting/receivables/customer_invoices/cash_rounding.md

# Cash rounding

**Cash rounding** is required when the lowest physical denomination of
currency, or the smallest coin, is higher than the minimum unit of
account.

For example, some countries require their companies to round up or down
the total amount of an invoice to the nearest five cents, when the
payment is made in cash.

## Configuration

Go to `Accounting --> Configuration --> Settings` and enable *Cash
Rounding*, then click on *Save*.

![image](cash_rounding/cash_rounding01.png)

Go to `Accounting --> Configuration --> Cash Roundings`, and click on
*Create*.

Define here your *Rounding Precision*, *Rounding Strategy*, and
*Rounding Method*.

Odoo supports two **rounding strategies**:

1.  **Add a rounding line**: a *rounding* line is added on the invoice.
    You have to define which account records the cash roundings.
2.  **Modify tax amount**: the rounding is applied in the taxes section.

## Apply roundings

When editing a draft invoice, open the *Other Info* tab, go to the
*Accounting Information* section, and select the appropriate *Cash
Rounding Method*.


---
## File: ./content/applications/finance/accounting/receivables/customer_invoices/credit_notes.md

# Credit notes and refunds

A **credit note**, or **credit memo**, is a document issued to a
customer that notifies them that they have been credited a certain
amount.

  - There are several reasons that can lead to a credit note, such as:
    
      - a mistake in the invoice
      - a return of the goods, or a rejection of the services
      - the goods delivered are damaged

<div class="note">

<div class="title">

Note

</div>

Issuing a credit note is the only legal way to cancel, refund or modify
a validated invoice. Don’t forget to *register the payment* afterward if
you need to send money back to your customer.

</div>

## Issue a Credit Note

You can create a credit note from scratch by going to `Accounting -->
Customers --> Credit Notes`, and by clicking on *Create*. Filling the
Credit Note’s form works the same way as the Invoice’s form.

However, most of the time, credit notes are generated directly from the
invoices they are related to.

To do so, open the *Customer Invoice*, and click on *Add Credit Note*.

![image](credit_notes/credit_notes01.png)

  - You can choose between three options:
    
      - Partial Refund
      - Full Refund
      - Full refund and new draft invoice

<div class="note">

<div class="title">

Note

</div>

Credit Notes’ numbers start with “R” and are followed by the number of
the document they are related to (e.g., RINV/2019/0004).

</div>

### Partial Refund

Odoo creates a draft credit note already prefilled with all the
necessary information from the original invoice.

This is the option to choose to do a partial refund, or if you want to
modify any detail on the credit note.

<div class="note">

<div class="title">

Note

</div>

This is the only option available for invoices that are already marked
as *Paid*.

</div>

### Full Refund

Odoo creates a credit note, automatically validates it, and reconciles
the original invoice with it.

![image](credit_notes/credit_notes02.png)

This is the option to choose to do a full refund or cancel a validated
invoice.

### Full refund and new draft invoice

Odoo creates a credit note, automatically validates it, reconciles the
original invoice with it, and open a new draft invoice prefilled with
the same details from the original invoice.

This is the option to choose to modify the content of a validated
invoice.

## Record a Vendor Refund

**Vendor Refunds** are recorded the same way you would do with invoices’
credit notes:

You can either create a credit note from scratch by going to `Accounting
--> Vendors --> Refund`, and by clicking on *Create*, or by opening the
validated *Vendor Bill*, and clicking on *Add Credit Note*.

## Journal Entries

Issuing a credit note from an invoice creates a **reverse entry** that
zeroes out the journal items generated by the original invoice.

Here is an example of an invoice’s journal entry:

![image](credit_notes/credit_notes03.png)

And here is the credit note’s journal entry generated to reverse the
original invoice above:

![image](credit_notes/credit_notes04.png)


---
## File: ./content/applications/finance/accounting/receivables/customer_invoices/electronic_invoicing.md

# Electronic invoicing (`EDI (electronic data interchange)`)

EDI, or electronic data interchange, is the inter-company communication
of business documents, such as purchase orders and invoices, in a
standard format. Sending documents according to an EDI standard ensures
that the machine receiving the message can interpret the information
correctly. Various EDI file formats exist and are available depending on
your company's country.

EDI feature enables automating the administration between companies and
might also be required by some governments for fiscal control or to
facilitate the administration.

Electronic invoicing of your documents such as customer invoices, credit
notes or vendor bills is one of the application of EDI.

Odoo supports, among others, the following formats.

| Format Name                              | Applicability                                                                                                    |
| ---------------------------------------- | ---------------------------------------------------------------------------------------------------------------- |
| Factur-X (CII)                           | Default format on Odoo (enabled by default)                                                                      |
| Peppol BIS Billing 3.0 (UBL)             | For companies whose countries are part of the [EAS list](https://docs.peppol.eu/poacc/billing/3.0/codelist/eas/) |
| E-FFF                                    | For Belgian companies                                                                                            |
| XRechnung (UBL)                          | For German companies                                                                                             |
| Fattura PA (IT)                          | For Italian companies                                                                                            |
| CFDI (4.0)                               | For Mexican companies                                                                                            |
| Peru UBL 2.1                             | For Peruvian companies                                                                                           |
| SII IVA Llevanza de libros registro (ES) | For Spanish companies                                                                                            |

<div class="seealso">

`fiscal_localizations/packages`

</div>

## Configuration

Go to `Accounting --> Configuration --> Journals --> Customer Invoices
--> Advanced
Settings --> Electronic Invoicing` and enable the formats you need for
this journal.

![Select the EDI format you need](electronic_invoicing/formats.png)

Once an electronic invoicing format is enabled, XML documents are
generated when clicking on `Confirm` in documents such as invoices,
credit notes, etc. These documents are either visible in the attachment
section, or embedded in the PDF.

<div class="note">

<div class="title">

Note

</div>

\- For E-FFF, the xml file only appears after having generated the PDF
(`Print` or `Send & Print` button), since the PDF needs to be embedded
inside the xml. - By default, the `Factur-X` option is enabled. It means
that an XML file is automatically included in the PDF document that is
sent. - The formats available depend on the country registered in your
company's `General
Information`. - Odoo supports the **Peppol BIS Billing 3.0** format that
can be used via existing access points.

</div>

### Add new formats to a database created before July 2022

If your database was created before July 2022 and you wish to use one of
the formats available from July 2022, you have to `install
<general/install>` the module `Import/Export
electronic invoices with UBL/CII` (module’s technical name:
<span class="title-ref">account\_edi\_ubl\_cii</span>) and your
country-specific module.

<div class="example">

If you want to use the Belgian format E-FFF in a database created prior
to July 2022, you need to `install <general/install>`:

| Name                                           | Technical name                                        |
| ---------------------------------------------- | ----------------------------------------------------- |
| Belgium - E-Invoicing (UBL 2.0, e-fff)         | <span class="title-ref">l10n\_be\_edi</span>          |
| Import/Export electronic invoices with UBL/CII | <span class="title-ref">account\_edi\_ubl\_cii</span> |

</div>

<div class="note">

<div class="title">

Note

</div>

Once the new module is installed, UBL 2.0 and UBL 2.1 formats no longer
appear in the journal since UBL BIS Billing 3.0 is available and more
widely supported.

</div>


---
## File: ./content/applications/finance/accounting/receivables/customer_invoices/epc_qr_code.md

# EPC QR codes

European Payments Council quick response codes, or **EPC QR codes**, are
two-dimensional barcodes that customers can scan with their **mobile
banking applications** to initiate a **SEPA credit transfer (SCT)** and
pay their invoices instantly.

In addition to bringing ease of use and speed, it greatly reduces typing
errors that would potentially make for payment issues.

<div class="note">

<div class="title">

Note

</div>

This feature is only available for companies in several European
countries such as Austria, Belgium, Finland, Germany, and the
Netherlands.

</div>

<div class="seealso">

\- `../../bank/setup/bank_accounts` - [Odoo Academy: QR Code on Invoices
for European Customers](https://www.odoo.com/r/VuU)

</div>

## Configuration

Go to `Accounting --> Configuration --> Settings` and activate the `QR
Codes` feature in the `Customer Payments` section.

### Configure your bank account's journal

Make sure that your `Bank Account` is correctly configured in Odoo with
your IBAN and BIC.

To do so, go to `Accounting --> Configuration --> Journals`, open your
bank journal, then fill out the `Account Number` and `Bank` under the
`Bank Account
Number` column.

![Bank account number column in the bank
journal](epc_qr_code/bank-journal.png)

## Issue invoices with EPC QR codes

EPC QR codes are added automatically to your invoices. Customers whose
bank supports making payments via EPC QR codes will be able to scan the
code and pay the invoice.

Go to `Accounting --> Customers --> Invoices`, and create a new invoice.

Before posting it, open the `Other Info` tab. Odoo automatically fills
out the `Recipient Bank` field with your IBAN.

<div class="note">

<div class="title">

Note

</div>

In the `Other Info` tab, the account indicated in the `Recipient Bank`
field is used to receive your customer's payment. Odoo automatically
populates this field with your IBAN by default and uses it to generate
the EPC QR code.

</div>

When the invoice is printed or previewed, the QR code is included at the
bottom.

![QR code on a customer invoice](epc_qr_code/invoice-qr-code.png)

<div class="tip">

<div class="title">

Tip

</div>

If you want to issue an invoice without an EPC QR code, remove the IBAN
indicated in the `Recipient Bank` field, under the `Other Info` tab of
the invoice.

</div>


---
## File: ./content/applications/finance/accounting/receivables/customer_invoices/payment_terms.md

# Payment terms and installment plans

**Payment Terms** specify all the conditions under which a sale is paid,
mostly to ensure customers pay their invoices correctly and on time.

Payment Terms can be applied to sales orders, customer invoices,
supplier bills, and contacts. These conditions cover:

  - The due date
  - Some discounts
  - Any other condition on the payment

Defining Payment Terms automatically calculates the payments' due dates.
This is particularly helpful for managing installment plans.

An **installment plan** allows the customers to pay an invoice in parts,
with the amounts and payment dates defined beforehand by the seller.

**Examples of Payment Terms:**

  - **Immediate Payment**  
    The full payment is due on the day of the invoice's issuance.

  - **15 Days** (or **Net 15**)  
    The full payment is due 15 days after the invoice date.

  - **21 MFI**  
    The full payment is due by the 21st of the month following the
    invoice date.

  - **2% 10, Net 30 EOM**  
    2% `cash discount <cash_discounts>` if the payment is received
    within ten days. Otherwise, the full payment is due at the end of
    the month following the invoice date.

<div class="note">

<div class="title">

Note

</div>

Payment terms are not to be confused with down payment invoices. If, for
a specific order, you issue several invoices to your customer, that is
neither a payment term nor an installment plan, but an invoicing policy.

</div>

<div class="note">

<div class="title">

Note

</div>

This document is about the *Payment Terms* feature, not *Terms &
Conditions*.

</div>

<div class="seealso">

\- `cash_discounts` - [Odoo Tutorials: Payment
Terms](https://www.odoo.com/slides/slide/payment-terms-1679)

</div>

## Configuration

Go to `Accounting --> Configuration --> Payment Terms` and click on
*Create*.

The **Description on the Invoice** is the text displayed on the document
(sale order, invoice, etc.).

In the **Terms** section, you can add a set of rules, called *terms*, to
define what needs to be paid and by which due date.

To add a term, click on *Add a line*, and define its *Type*, *Value*,
and *Due Date Computation*.

<div class="important">

<div class="title">

Important

</div>

\- Terms are computed in the order they are set up. - The **balance**
should always be used for the last line.

</div>

In the following example, 30% is due on the day of issuance, and the
balance is due at the end of the following month.

![Example of Payment Terms. The last line is the balance due on the 31st
of the following&#10;month.](payment_terms/configuration.png)

## Using Payment Terms

Payment Terms can be defined in the **Due Date** field, with the
**Terms** drop-down list, on:

  - **Quotations**  
    To set specific payment terms automatically on all invoices
    generated from a quotation.

  - **Customer Invoices**  
    To set specific payment terms on an invoice.

  - **Vendor Bills**  
    To set specific payment terms on a bill. This is mostly useful when
    you need to manage vendor terms with several installments.
    Otherwise, setting the *Due Date* is enough.

<div class="tip">

<div class="title">

Tip

</div>

You can also define a **Due Date** manually. If Payment Terms are
already defined, empty the field so you can select a date.

</div>

Payment Terms can be defined with the **Payment Terms** field on:

  - **Contacts**  
    To set specific payment terms automatically on new sales orders,
    invoices, and bills of a contact. This can be modified in the
    contact’s *Form View*, under the *Sales & Purchase* tab.

## Journal Entries

Invoices with specific Payment Terms generate different *Journal
Entries*, with one *Journal Item* for every computed *Due Date*.

This makes for easier *Follow-ups* and *Reconciliation* since Odoo takes
each due date into account, rather than just the balance due date. It
also helps to get an accurate *Aged Receivable report*.

![The amount debited on the Account Receivable is split into two Journal
Items with distinct&#10;Due Dates](payment_terms/journal-entry.png)

In this example, an invoice of $1000 has been issued with the following
payment terms: *30% is due on the day of issuance, and the balance is
due at the end of the following month.*

| Account            | Due date    | Debit | Credit |
| ------------------ | ----------- | ----- | ------ |
| Account Receivable | February 21 | 300   |        |
| Account Receivable | March 31    | 700   |        |
| Product Sales      |             |       | 1000   |

The $1000 debited on the Account Receivable is split into two distinct
*Journal Items*. Both of them have their own **Due Date**.


---
## File: ./content/applications/finance/accounting/receivables/customer_invoices.md

  - nosearch

# Customer invoices

<div class="toctree" data-titlesonly="">

customer\_invoices/overview customer\_invoices/cash\_discounts
customer\_invoices/cash\_rounding customer\_invoices/payment\_terms
customer\_invoices/deferred\_revenues customer\_invoices/credit\_notes
customer\_invoices/epc\_qr\_code customer\_invoices/snailmail
customer\_invoices/electronic\_invoicing

</div>


---
## File: ./content/applications/finance/accounting/receivables/customer_payments.md

  - nosearch

# Customer payments

<div class="toctree" data-titlesonly="">

customer\_payments/recording customer\_payments/online\_payment
customer\_payments/check customer\_payments/batch
customer\_payments/batch\_sdd customer\_payments/followup

</div>


---
## File: ./content/applications/finance/accounting/reporting/overview.md

  - nosearch

# Overview

<div class="toctree" data-titlesonly="">

overview/main\_reports overview/customize overview/data\_inalterability

</div>


---
## File: ./content/applications/finance/accounting/reporting/declarations.md

  - nosearch

# Declarations

<div class="toctree" data-titlesonly="">

declarations/tax\_returns declarations/intrastat

</div>


---
## File: ./content/applications/finance/accounting/reporting/declarations/intrastat.md

# Intrastat

**Intrastat** is the system for data collection and statistic production
of goods traded among the EU Member States. Organizations whose annual
trade surpasses a certain threshold must provide data about the goods
traded with other EU countries.

<div class="seealso">

\- [Eurostat Statistics Explained - Glossary:
Intrastat](https://ec.europa.eu/eurostat/statistics-explained/index.php?title=Glossary:Intrastat)

</div>

<div class="note">

<div class="title">

Note

</div>

As of January 1, 2022, the reporting requirements have changed. One main
modification concerns the transaction codes which are now switching to a
2-digits format. All transactions recorded after this date have to
follow the new system’s rules.

</div>

## Configuration

Go to `Accounting --> Settings --> Customer Invoices`, then enable
**Intrastat** and *Save*. Once the Intrastat has been activated you are
able to choose the **Default incoterm**.

<div class="important">

<div class="title">

Important

</div>

If you created your Odoo database prior to **January 13, 2022**, please
`upgrade
<general/upgrade>` the `account_intrastat` module to add the new
transaction codes and `install <general/install>` the
`account_intrastat_expiry` module to archive the old codes.

</div>


---
## File: ./content/applications/finance/accounting/reporting/declarations/tax_returns.md

# Tax return (VAT declaration)

Companies with a registered `VAT (Value Added Tax)` number must submit a
**tax return** on a monthly or quarterly basis, depending on their
turnover and the registration regulation. A tax return - or VAT return -
gives the tax authorities information about the taxable transactions
made by the company. The **output tax** is charged on the number of
goods and services sold by a business, while the **input tax** is the
tax added to the price when goods or services are purchased. Based on
these values, the company can calculate the tax amount they have to pay
or be refunded.

<div class="note">

<div class="title">

Note

</div>

You can find additional information about VAT and its mechanism on this
page from the European Commission: ["What is
VAT?"](https://ec.europa.eu/taxation_customs/business/vat/what-is-vat_en).

</div>

## Prerequisites

### Tax Return Periodicity

The configuration of the **Tax Return Periodicity** allows Odoo to
compute your tax return correctly and also to send you a reminder to
never miss a tax return deadline.

To do so, go to `Accounting --> Configuration --> Settings`. Under the
`Tax Return Periodicity`, you can set:

  - `Periodicity`: define here whether you submit your tax return on a
    monthly or quarterly basis;
  - `Reminder`: define when Odoo should remind you to submit your tax
    return;
  - `Journal`: select the journal in which to record the tax return.

![Configure how often tax returns have to be made in Odoo
Accounting](tax_returns/tax_return_periodicity.png)

<div class="note">

<div class="title">

Note

</div>

This is usually configured during the `app's initial set up
<../../getting_started/initial_configuration/setup>`.

</div>

### Tax Grids

Odoo generates tax reports based on the `Tax Grids` settings that are
configured on your taxes. Therefore, it is crucial to make sure that all
recorded transactions use the right taxes. You can see the `Tax Grids`
by opening the `Journal Items` tab of any invoice and bill.

![see which tax grids are used to record transactions in Odoo
Accounting](tax_returns/tax_return_grids.png)

To configure your tax grids, go to `Accounting --> Configuration -->
Taxes`, and open the tax you want to modify. There, you can edit your
tax settings, along with the tax grids that are used to record invoices
or credit notes.

![Configure taxes and their tax grids in Odoo
Accounting](tax_returns/tax_return_taxes.png)

<div class="note">

<div class="title">

Note

</div>

Taxes and reports are usually already pre-configured in Odoo: a `fiscal
localization package
<fiscal_localizations/packages>` is installed according to the country
you select at the creation of your database.

</div>

## Close a tax period

### Tax Lock Date

Any new transaction whose accounting date prior to the `Tax Lock Date`
has its tax values moved to the next open tax period. This is useful to
make sure that no change can be made to a report once its period is
closed.

Therefore, we recommend locking your tax date before working on your
`Closing Journal Entry`. This way, other users cannot modify or add
transactions that would have an impact on the `Closing Journal Entry`,
which can help you avoid some tax declaration errors.

To check the current `Tax Lock Date`, or to edit it, go to `Accounting
--> Accounting --> Actions: Lock Dates`.

![Lock your tax for a specific period in Odoo
Accounting](tax_returns/tax_return_lock.png)

### Tax Report

Once all the transactions involving taxes have been posted for the
period you want to report, open your `Tax Report` by going to
`Accounting --> Reporting -->
Audit Reports: Tax Report`. Make sure to select the right period you
want to declare by using the date filter, this way you can have an
overview of your tax report. From this view, you can easily access
different formats of your tax report, such as
<span class="title-ref">PDF</span> and XLSX. These include all the
values to report to the tax authorities, along with the amount you have
to pay or be refunded.

![download the PDF with your Tax Report in Odoo
Accounting](tax_returns/tax_return_report.png)

<div class="note">

<div class="title">

Note

</div>

If you forgot to lock your tax date before clicking on `Closing Journal
Entry`, then Odoo automatically locks your fiscal period on the same
date as the accounting date of your entry. This safety mechanism can
prevent some fiscal errors, but it is advised to lock your tax date
manually before, as described above.

</div>

<div class="seealso">

\* `../../taxation/taxes/taxes` \*
`../../getting_started/initial_configuration/setup` \*
`../../../fiscal_localizations`

</div>


---
## File: ./content/applications/finance/accounting/reporting/overview/data_inalterability.md

# Data inalterability check report

Tax authorities in some countries require companies to **prove their
posted accounting entries are inalterable**, meaning that once an entry
has been posted, it can no longer be changed.

To do so, Odoo can use the **SHA-256 algorithm** to create a unique
fingerprint for each posted entry. This fingerprint is called a hash.
The hash is generated by taking an entry's essential data (the values of
the <span class="title-ref">date</span>,
<span class="title-ref">journal\_id</span>,
<span class="title-ref">company\_id</span>,
<span class="title-ref">debit</span>,
<span class="title-ref">credit</span>,
<span class="title-ref">account\_id</span>, and
<span class="title-ref">partner\_id</span> fields), concatenating it,
and inputting it to the SHA-256 hash function, which then outputs a
fixed size (256-bit) string of characters. The hash function is
deterministic (`the
same input always creates the same output`): any minor modification to
the original data would completely change the resulting hash.
Consequently, the SHA-256 algorithm is often used, among others, for
data integrity verification purposes.

In addition, the previous entry's hash is always added to the next entry
to form a **hash chain**. This is used to ensure a new entry is not
added afterward between two posted entries, as doing so would break the
hash chain.

<div class="note">

<div class="title">

Note

</div>

Hashes generated by the SHA-256 algorithm are theoretically not unique,
as there is a finite number of possible values. However, this number is
exceptionally high: 2²⁵⁶, which is a lot bigger than the number of atoms
in the known universe. This is why hashes are considered unique in
practice.

</div>

## Lock posted entries with hash

To start using the hashing function, go to `Accounting --> Configuration
> Journals`. Open the journal for which you want to activate the
feature, go to the `Advanced Settings` tab, and enable `Lock Posted
Entries with Hash`.

<div class="warning">

<div class="title">

Warning

</div>

Once you post an entry on a locked journal, you cannot disable the
feature anymore, nor edit any posted entry.

</div>

## Report download

To download the data inalterability check report, go to `Accounting -->
Configuration
--> Settings --> Reporting` and click on `Download the Data
Inalterability Check Report`.

The report's first section is an overview of all your journals and their
configuration. Under the inalterability check column, you can see
whether or not a journal's posted entries are locked with a hash (V) or
not (X). The coverage column tells you when a journal's posted entries
started being locked.

![Configuration report for two
journals](data_inalterability/journal-overview.png)

The second section gives you the result of the data consistency check
for each hashed journal. You can view the first hashed entry and its
corresponding hash and the last hashed entry and its corresponding hash.

![Data consistency check report for a
journal](data_inalterability/data-consistency-check.png)


---
## File: ./content/applications/finance/accounting/reporting/overview/main_reports.md

# Main reports available

Besides the reports created specifically in each localisation module, a
few very useful **generic** and **dynamic reports** are available for
all countries :

  - **Balance Sheet**
  - **Profit and Loss**
  - **Executive Summary**
  - **General Ledger**
  - **Aged Payable**
  - **Aged Receivable**
  - **Cash Flow Statement**
  - **Tax Report**
  - **Bank Reconciliation**

You can annotate every reports to print them and report to your adviser.
Export to xls to manage extra analysis. Drill down in the reports to see
more details (payments, invoices, journal items, etc.).

You can also compare values with another period. Choose how many periods
you want to compare the chosen time period with. You can choose up to 12
periods back from the date of the report if you don't want to use the
default **Previous 1 Period** option.

## Balance Sheet

The **Balance Sheet** shows a snapshot of the assets, liabilities and
equity of your organisation as at a particular date.

![image](main_reports/main_reports09.png)

## Profit and Loss

The **Profit and Loss** report (or **Income Statement**) shows your
organisation's net income, by deducting expenses from revenue for the
report period.

![image](main_reports/main_reports10.png)

## Executive Summary

The **Executive Summary** allows for a quick look at all the important
figures you need to run your company.

In very basic terms, this is what each of the items in this section is
reporting :

  -   - **Performance:**
        
          -   - **Gross profit margin:**  
                The contribution each individual sale made by your
                business less any direct costs needed to make those
                sales (things like labour, materials, etc).
        
          -   - **Net profit margin:**  
                The contribution each individual sale made by your
                business less any direct costs needed to make those
                sales, as well as any fixed overheads your company has
                (things like rent, electricity, taxes you need to pay as
                a result of those sales).
        
          -   - **Return on investment (p.a.):**  
                The ratio of net profit made, to the amount of assets
                the company used to make those profits.

  -   - **Position:**
        
          -   - **Average debtor days:**  
                The average number of days it takes your customers to
                pay you (fully), across all your customer invoices.
        
          -   - **Average creditor days:**  
                The average number of days it takes you to pay your
                suppliers (fully) across all your bills.
        
          -   - **Short term cash forecast:**  
                How much cash is expected in or out of your organisation
                in the next month i.e. balance of your **Sales account**
                for the month less the balance of your **Purchases
                account** for the month.
        
          -   - **Current assets to liabilities:**  
                Also referred to as **current ratio**, this is the ratio
                of current assets (assets that could be turned into cash
                within a year) to the current liabilities (liabilities
                which will be due in the next year). This is typically
                used as as a measure of a company's ability to service
                its debt.

![image](main_reports/main_reports01.png)

## General Ledger

The **General Ledger Report** shows all transactions from all accounts
for a chosen date range. The initial summary report shows the totals for
each account and from there you can view a detailed transaction report
or any exceptions. This report is useful for checking every transaction
that occurred during a certain period of time.

![image](main_reports/main_reports05.png)

## Aged Payable

Run the **Aged Payable Details** report to display information on
individual bills, credit notes and overpayments owed by you, and how
long these have gone unpaid.

![image](main_reports/main_reports02.png)

## Aged Receivable

The **Aged Receivables** report shows the sales invoices that were
awaiting payment during a selected month and several months prior.

![image](main_reports/main_reports07.png)

## Cash Flow Statement

The **Cash Flow Statement** shows how changes in balance sheet accounts
and income affect cash and cash equivalents, and breaks the analysis
down to operating, investing and financing activities.

![image](main_reports/main_reports03.png)

## Tax Report

This report allows you to see the **net** and **tax amounts** for all
the taxes grouped by type (sale/purchase).

![image](main_reports/main_reports04.png)

## Bank Reconciliation

![image](main_reports/main_reports06.png)


---
## File: ./content/applications/finance/accounting/reporting/overview/customize.md

# Create a customized reports with your own formulas

## Overview

Odoo 13 comes with a powerful and easy-to-use reporting framework.
Creating new reports (such as a tax report or a balance sheet or income
statement with specific groupings and layout ) to suit your needs is now
easier than ever.

## Activate the developer mode

In order to have access to the financial report creation interface, the
`developer mode <developer-mode>` needs to be activated.

## Create your financial report

First, you need to create your financial report. To do that, go to
`Accounting --> Configuration --> Financial Reports`

![image](customize/customize02.png)

Once the name is entered, there are two other parameters that need to be
configured:

  - **Show Credit and Debit Columns**
  - **Analysis Period** :
      - Based on date ranges (e.g. Profit and Loss)
      - Based on a single date (e.g. Balance Sheet)
      - Based on date ranges with 'older' and 'total' columns and last 3
        months (e.g. Aged Partner Balances)
      - Bases on date ranges and cash basis method (e.g. Cash Flow
        Statement)

## Add lines in your custom reports

After you've created the report, you need to fill it with lines. They
all need a **name**, a **code** (that is used to refer to the line), a
**sequence number** and a **level** (Used for the line rendering).

![image](customize/customize04.png)

In the **formulas** field you can add one or more formulas to assign a
value to the balance column (and debit and credit column if applicable –
separated by ;)

You have several objects available in the formula :

  - `Ndays` : The number of days in the selected period (for reports
    with a date range).
  - Another report, referenced by its code. Use `.balance` to get its
    balance value (also available are `.credit`, `.debit` and
    `.amount_residual`)

A line can also be based on the sum of account move lines on a selected
domain. In which case you need to fill the domain field with an Odoo
domain on the account move line object. Then an extra object is
available in the formulas field, namely `sum`, the sum of the account
move lines in the domain. You can also use the group by field to group
the account move lines by one of their columns.

Other useful fields :

  - **Type** : Type of the result of the formula.
  - **Is growth good when positive** : Used when computing the
    comparison column. Check if growth is good (displayed in green) or
    not.
  - **Special date changer** : If a specific line in a report should not
    use the same dates as the rest of the report.
  - **Show domain** : How the domain of a line is displayed. Can be
    foldable (`default`, hidden at the start but can be unfolded),
    `always` (always displayed) or `never` (never shown).

<div class="seealso">

\* `main_reports`

</div>


---
## File: ./content/applications/finance/accounting/payables.md

  - nosearch

# Account payables

<div class="toctree" data-titlesonly="">

payables/supplier\_bills payables/pay payables/misc

</div>


---
## File: ./content/applications/finance/accounting/bank/reconciliation/cash_transactions.md

# Cash reconciliation

By default in Odoo, payments registered in the **cash journal** are
automatically reconciled with an **outstanding account** and their
related invoices or bills marked as *In Payment* until they are
reconciled with a bank statement. It is possible to `bypass
<cash-reconciliation-bypass>` the *In Payment* status for cash
transactions, therefore removing the need to reconcile with a bank
statement.

![In Payment status of invoice or
bill.](cash_transactions/cash-inpayment-status.png)

## Cash logs

At the start of each day, create a **cash log**. To do so, go to your
`Accounting
Dashboard` and click `New Transaction` in the `Cash` journal.

![Create a new cash log.](cash_transactions/new-transaction.png)

Enter the `Starting Balance` of your cash float and save, but do *not*
post the entry yet. Create your invoice by going to `Accounting
dashboard --> Customers --> Invoices` and confirm it. Click `Register
Payment` and select the cash `Journal`. Repeat the process for each
invoice.

![Select Cash journal upon payment
registration.](cash_transactions/cash-payment-journal.png)

Go back to your `Accounting Dashboard`, and click again on `New
transactions`. Click on the `Add a line` button in the `Transactions`
tab, and enter the total of cash earned during the day. Add a label name
according to your needs. Input the amount displayed under `Computed
Balance` in the `Ending Balance` field, and make sure it matches your
end cash float.

Once certain the **computed balance** is correct, click `Save`, `Post`,
and then `Reconcile`. This will take you to the **bank reconciliation**
page.

## Cash payments reconciliation

On the **bank reconciliation** page, search through the list for the
**cash log** transaction you created earlier. To be able to match all
cash payments, make sure no **partner** is selected in the `Select
Partner` field. If a **partner** is selected, click in the field and
delete the partner. Then, pair (or match) each cash payment with your
cash log by clicking on the payment in the `Customer/Vendor Matching`,
and `validate`.

![Cash payments
reconciliation.](cash_transactions/cash-payment-reconciliation.png)

<div class="note">

<div class="title">

Note

</div>

If your ending cash balance is **over** or **under** the computed
balance, add another `Transaction` line corresponding to the **over** or
**under** amount in order to match it later during reconciliation.

</div>

## Cash reconciliation bypass

<div id="cash-reconciliation-bypass">

<div class="important">

<div class="title">

Important

</div>

Bypassing the cash journal is recommended **only for organizations**
that do not need a cash report or do not wish to reconcile cash.

</div>

</div>

To bypass the *In Payment* status, go to `Accounting app -->
Configuration -->
Accounting: Journals` and select the `Cash` journal. Click on the
`Payments
Configuration` tab and set a <span class="title-ref">Cash</span> account
in both the `Outstanding Receipts Account` and `Outstanding Payments
Account` fields, then save. Payments registered in the **cash** journal
now bypass the *In Payment* status.

![Configuration tab of the cash
journal.](cash_transactions/cash-payments-config.png)

<div class="tip">

<div class="title">

Tip

</div>

In case you use cash to pay expenses, advance employees, are required to
keep records of cash flows, or use anything resembling a cash box, you
can benefit from creating a second **cash journal** that *does* use the
**outstanding accounts**. This way, you can both generate *and*
reconcile bank statements when closing your POS session or your books at
the end of the day.

</div>


---
## File: ./content/applications/finance/accounting/bank/reconciliation/use_cases.md

# Bank reconciliation process - use cases

## Overview

Matching your bank statements with your accounting records can be a
tedious task. You need to find the corresponding invoices, compare the
amounts and partners' details with those in the bank statement. These
steps can take a lot of time. Luckily, with Odoo you can very easily
match your invoices or any other payment document with your bank
statements.

Two options of the reconciliation process exist in Odoo.

1.  We can directly specify the payment on the invoice
2.  We can reconcile open invoices with bank statements

## Configuration

No special configuration is necessary to record invoices. All we need to
do is to install the accounting app.

![image](use_cases/use01.png)

## Use cases

### Case 1: Payments registration

We received the proof of payment of our invoice in the amount of 2100
euros issued to Smith & Co.

We start at our issued Invoice of 2100 euros for Smith & Co. Because the
sold product is a service we demand an immediate payment. Our accountant
only handles bank statements at the end of week, so we have to mark this
invoice as paid immediately in order to indicate that we can start
rendering services to our customer.

Our customer send us a payment confirmation. We can thus register a
payment and mark the invoice as paid.

![image](use_cases/use02.png)

By clicking on **register payment,** we are telling Odoo that our
customer has paid the Invoice. We thus have to specify the amount and
the payment method.

![image](use_cases/use03.png)

Now we can always find the payment details in the Invoice by clicking on
the `Info --> Open Payment`.

![image](use_cases/use04.png)

The invoice has been paid and **the reconciliation has been done
automatically.**

### Case 2: Bank statements reconciliations

We start at our issued Invoice of 3000 euros for Smith & Co. Let's also
assume that other Invoices are open for different customers.

![image](use_cases/use05.png)

We receive our bank statement and find that not only the invoice issued
to Smith & Co has been paid, but the one to Buzz of 92 euros as well.

**Import** or **Create** the bank statements. Please refer to the
documents from the Bank Feeds section.

![image](use_cases/use06.png)

On the dashboard, click on **Reconcile \# Items**

![image](use_cases/use07.png)

If everything was right (correct partner name, right amount) odoo will
do the reconciliations **automatically**.

![image](use_cases/use08.png)

If some issues are found, you will need to take **manual actions**.

For example, if the partner is missing from your bank statement, just
fill it in :

![image](use_cases/use09.png)

If the payment is done with a down payment, just check if it is all
right and validate all related payments :

![image](use_cases/use10.png)

<div class="seealso">

`../bank_synchronization`

</div>


---
## File: ./content/applications/finance/accounting/bank/reconciliation/reconciliation_models.md

# Reconciliation models

Once the bank statements are correctly imported, it is essential to
reconcile the records properly and ensure all **journal entries** are
balanced and in agreement. To ease and speed up the reconciliation
process, you can configure **reconciliation models**, which are
particularly useful with **recurrent entries** such as bank fees.

<div class="note">

<div class="title">

Note

</div>

Reconciliation models are also useful when handling *Cash Discounts*.
Please refer to `the cash discounts
<../../receivables/customer_invoices/cash_discounts>` for more
information.

</div>

## Types of reconciliation models

There are three types of reconciliation models:

1.  `Write-off button <reconciliation_models_button>`
2.  `Suggestion of counterpart values
    <reconciliation_models_suggestion>`
3.  `Match existing invoices/bills <reconciliation_models_match>`

### Manually create a write-off on clicked button

When reconciling an entry with an *open balance*, you can use the
buttons available under the `Manual Operations` tab to pre-fill all the
values automatically before validating the reconciliation. Each button
corresponds to a reconciliation model.

![Example of a reconciliation model with a write-off button in Odoo
Accounting.](reconciliation_models/reconciliation_models_button.png)

### Suggest counterpart values

This type of reconciliation model immediately suggests counterpart
values when selecting an entry, which then only needs to be validated.
This automation is based on a set of rules defined in the reconciliation
model.

![Example of a reconciliation model that suggests counterpart values in
Odoo
Accounting.](reconciliation_models/reconciliation_models_suggestion.png)

### Match existing invoices/bills

This type of reconciliation model automatically selects the right
customer invoice or vendor bill that matches the payment. All that is
left to do is to validate the entry. This automation is based on a set
of rules defined in the reconciliation model.

![Example of a reconciliation model that matches existing invoices and
bills automatically&#10;in Odoo
Accounting.](reconciliation_models/reconciliation_models_match.png)

## Configuration

To manage or create new **reconciliation models**, go to `Accounting app
-->
Configuration --> Banks: Reconciliation Models`. Alternatively, you can
also open this menu from `Accounting app --> Bank --> Drop-down menu (⋮)
--> Reconciliation Models`.

![Open the reconciliation model menu from the overview dashboard in Odoo
Accounting.](reconciliation_models/reconciliation_models_overview.png)

<div class="important">

<div class="title">

Important

</div>

The first entry, `Invoices Matching Rule`, is responsible for the
current matching of invoices and bills. Therefore, it is advised to
leave it at the top of the list and not delete it.

</div>

Open the model you want to modify or click on `Create` to create a new
one, and fill out the form.

### Type

See `types of reconciliation models <reconciliation_models_types>` for
an explanation about the different types of reconciliation models.

<div class="note">

<div class="title">

Note

</div>

If the *Documents* application is installed on your database, an
additional `Activity type` field appears when `To Check` is ticked.
Selecting the value `Reconciliation request` implies that whenever you
use this model, a `Request Document` window pops up to request a
document from the user.

</div>

### Conditions on bank statement line

Define here all the conditions that should be fulfilled for the
reconciliation model to be applied. Depending on the `Type` of model you
choose, different options are available.

<div class="important">

<div class="title">

Important

</div>

If a record matches with several reconciliation models, the first one in
the list is applied. Models can be rearranged by dragging and dropping
the handle next to their name.

</div>

![Conditions for the reconciliation model to be applied in Odoo
Accounting.](reconciliation_models/reconciliation_models_conditions.png)

### Counterpart values

This section comprises the values that are applied by the reconciliation
model. If the value to reconcile needs to be written-off in two separate
accounts, click on `Add a second line` a second time.

![Counterparts values of a reconciliation model in Odoo
Accounting.](reconciliation_models/reconciliation_models_counterparts.png)

<div class="seealso">

  - `use_cases`
  - `../bank_synchronization`
  - `../../receivables/customer_invoices/cash_discounts`

</div>


---
## File: ./content/applications/finance/accounting/bank/bank_statements.md

# Bank statements

Importing your bank statements in Odoo Accounting allows you to keep
track of the financial movements that occur on your bank accounts and
reconcile them with the transactions recorded in your accounting.

We recommend you use bank synchronization for more efficiency. Please
read the related documentation: `bank_synchronization`.

However, if you don't want to use bank synchronization or if your bank
is not a supported institution, you still have other options:

1.  Import the bank statement files delivered by your bank
2.  Register the bank statements manually

## Import bank statements files

Odoo supports multiple file formats to import bank statements:

  - SEPA recommended Cash Management format (CAMT.053)
  - Comma-separated values (.CSV)
  - Open Financial Exchange (.OFX)
  - Quicken Interchange Format (.QIF)
  - Belgium: Coded Statement of Account (.CODA)

To import them, go to `Accounting --> Overview --> Bank`, click on
*Import Statements*, or on the three dots, and then on *Import
Statement*.

![Import a bank statement file in Odoo
Accounting](bank_statements/bank-statements-01.png)

Next, select the file you want to import and click on *Import*.

Odoo opens an **import widget** to help you set the **Formatting
Options** and **map** the different columns you want to import.

![Register bank statements manually in Odoo
Accounting](bank_statements/bank-statements-02.png)

<div class="note">

<div class="title">

Note

</div>

Quicken Interchange Format (.QIF) is an older file format that is no
longer supported since 2005. If possible, prefer OFX files over QIF.

</div>

## Register bank statements manually

If needed, you can also record your bank statements manually.

To do so, go to `Accounting --> Overview --> Bank`, click on *Create
Statements*, or on the three dots, and then on *New Statement*.

Add a new line for each transaction written on the original bank
statement.

To ease the reconciliation process, make sure to fill out the *Partner*
field. You can also write the payments’ references in the *Label* field.

![Register bank statements manually in Odoo
Accounting](bank_statements/bank-statements-03.png)

<div class="note">

<div class="title">

Note

</div>

The *Ending Balance* and the *Computed Balance* should have the same
amount. If it is not the case, make sure that there is no mistake in the
transactions’ amounts.

</div>

<div class="seealso">

\* `bank_synchronization`

</div>

<div class="todo">

add doc link to new documentation about reconciliation

</div>


---
## File: ./content/applications/finance/accounting/bank/setup.md

  - nosearch

# Setup

<div class="toctree" data-titlesonly="">

setup/bank\_accounts setup/foreign\_currency
setup/manage\_cash\_register

</div>


---
## File: ./content/applications/finance/accounting/bank/bank_synchronization/ponto.md

# Ponto

**Ponto** is a service that allows companies and professionals to
aggregate their accounts in one place and directly see all their
transactions within one app. It is a third-party solution that is
continuously expanding the number of bank institutions that can be
synchronized with Odoo.

![Logo of the Ponto brand](ponto/ponto-logo.png)

**Odoo** can synchronize directly with your bank to get all bank
statements imported automatically into your database.

Ponto is a paid third-party provider that can handle the synchronization
between your bank accounts and Odoo. [Its pricing is 4€/month per
account/integration](https://myponto.com/en#pricing).

<div class="seealso">

\- `../bank_synchronization` - `../bank_statements`

</div>

## Configuration

### Link your bank accounts with Ponto

1.  Go to [Ponto's website (https://myponto.com)](https://myponto.com).

2.  Create an account if you don't have one yet.

3.  Once you are logged in, create an *organization*.
    
    ![Fill out the form to add an organization in
    Ponto.](ponto/ponto-organization.png)

4.  Go to `Accounts --> Live`, and click on *Add account*.  
    You might have to add your **Billing Information** first.

5.  Select your country, your bank institutions, give your consent to
    Ponto, and follow the steps on-screen to link your bank account with
    your Ponto account.
    
    ![Add bank accounts to your Ponto
    account.](ponto/ponto-add-account.png)

6.  Make sure to add all bank accounts you want to synchronize with your
    Odoo database before moving on to the next steps.

### Link your Ponto account with your Odoo database

1.  Go to `Accounting --> Configuration --> Add a Bank Account`.

2.  Search your institution, make sure to select the right institution.
    By selecting the institution, you can verify that the third party
    provider is Ponto.

3.  Click on *Connect* and follow the steps.

4.  At some point, you will have to authorize the accounts you want to
    access in Odoo. Please select **all the accounts** you want to
    synchronize. Even the ones coming from other banking institutions.
    
    ![Selection of the accounts you wish to synchronize with
    Odoo.](ponto/ponto-select-accounts.png)

5.  Finish the flow.

<div class="note">

<div class="title">

Note

</div>

You have to authorize all the accounts you want to access in Odoo, but
Odoo will filter the accounts based on the institution you selected in
the second step.

</div>

### Update your synchronization credentials

You might have to update your Ponto credentials or modify the
synchronization settings.

To do so, go to `Accounting --> Configuration --> Online
Synchronization` and select the institution you want to fetch the other
accounts. Click on *Fetch Accounts* button to start the flow.

During the update, select **all the accounts** you want to synchronize,
even the ones coming from other banking institutions.

### Fetch new accounts

You might want to add new online accounts to your connection.

To do so, go to `Accounting --> Configuration --> Online
Synchronization` and select the institution you want to fetch the other
accounts. Click on *Fetch Accounts* button to start the flow.

Don't forget to keep authorization for existing accounts (for all
institutions that you have synchronized with Ponto).

## FAQ

### After my synchronization, no account appears

You selected an institution from the list and did not authorize any
accounts from this institution.

### I have an error about that my authorization has expired

Every **3 months** (90 days) you must re-authorize the connection
between your bank account and Ponto. This must be done from the [Ponto
website](https://myponto.com). If you do not do this, the
synchronization will stop for these accounts.

### I have some errors with my beta institution

Ponto provides institutions in *beta*, these institutions are not
directly supported by Odoo and we advise you to contact Ponto directly.

<div class="important">

<div class="title">

Important

</div>

Using an institution in beta is beneficial for Ponto, it allows them to
have real feedback on the connection with the institution.

</div>


---
## File: ./content/applications/finance/accounting/bank/bank_synchronization/enablebanking.md

# Enable Banking

**Enable Banking** is a third-party provider aggregating banking
information from bank accounts all in one place. It offers non-intrusive
connectivity to ASPSPs' official APIs across Europe without storing
data.

![Enable Banking logo](enablebanking/enablebanking.png)

**Odoo** synchronizes directly with banks to get access to all bank
transactions and automatically import them into your database.

<div class="seealso">

\- `../bank_synchronization` - [Enable Banking
website](https://enablebanking.com/)

</div>

## Configuration

### Link bank accounts with Odoo

1.  Start synchronization by clicking on `Accounting --> Configuration
    -->
    Add a Bank Account`;

2.  Select your bank;

3.  Make sure you give your consent to share your account information
    with Odoo by clicking `Continue authentication`;
    
    ![Enable Banking authentication
    page](enablebanking/enablebankingauth.png)

4.  Finally, you are redirected to your bank's login page.


---
## File: ./content/applications/finance/accounting/bank/bank_synchronization/saltedge.md

# Salt Edge

**Salt Edge** is a third-party provider that aggregates banking
information from your bank accounts. It supports \~5000 institutions in
more than 50 countries.

![Salt Edge Logo](saltedge/saltedge-logo.png)

Odoo can synchronize directly with your bank to get all bank statements
imported automatically into your database.

<div class="seealso">

\- `../bank_synchronization` - `../bank_statements`

</div>

## Configuration

### Link your bank accounts with Odoo

1.  Start synchronization by clicking on `Accounting --> Configuration
    --> Add a Bank Account`.

2.  Select the institution you want to synchronize. You can see if Salt
    Edge is the third party provider of the institution by selecting it.

3.  After giving your phone number, you are asked for an email address.
    This email address is used to create your Salt Edge account. Please
    make sure you enter a valid email address, as otherwise, you will
    not be able to access your Salt Edge account.
    
    ![Email address to provide to Salt Edge for the creation of your
    account.](saltedge/saltedge-contact-email.png)

4.  After entering your email address, you are redirected to Salt Edge
    to continue the synchronization process.
    
    ![Salt Edge Login page.](saltedge/saltedge-login-page.png)

5.  Make sure you give your consent by checking the consent checkbox.
    
    ![Salt Edge give consent page.](saltedge/saltedge-give-consent.png)

6.  Complete the synchronization by following the steps.

### Update your credentials

You might have to update your Salt Edge credentials or modify the
synchronization settings.

To do so, go to `Accounting --> Configuration --> Online
Synchronization` and select the institution you want to update
credentials. Click on the *Update Credentials* button to start the flow
and follow the steps.

Don't forget to check the consent checkbox. Otherwise, Odoo may not be
able to access your information.

### Fetch new accounts

You might want to add new online accounts to your connection.

To do so, go to `Accounting --> Configuration --> Online
Synchronization` and select the institution to fetch the new accounts.
Click on the *Fetch Accounts* button to start the flow and follow the
steps.

Don't forget to check the consent checkbox. Otherwise, Odoo may not be
able to access your information.

## FAQ

### I have an error when I try to delete my synchronization within Odoo

Odoo can't permanently delete the connection you have created with the
banking institution. However, it can revoke the consent you gave so that
Odoo won't be able to access your account anymore. The error you are
seeing is probably a message telling you that the consent was revoked,
but the record could not be deleted as it still exists within Salt edge.
If you want to remove the connection completely, please connect to your
[Salt Edge account](https://www.saltedge.com/dashboard) and manually
delete your synchronization. Once this is done, you can go back to Odoo
to delete the record.

### I have an error saying that I have already synchronized this account

You have probably already synchronized your bank account with Salt Edge,
please check on your [dashboard](https://www.saltedge.com/dashboard)
that you don't already have a connection with the same credentials.

In case you already have a synchronization with the same credentials
present on your Salt Edge dashboard and this synchronization has not
been created with Odoo, please delete it and create it from your Odoo
database.

In case you already have a connection with the same credentials present
on your Salt Edge dashboard and this synchronization was created with
Odoo, you will normally be able to find it by going to `Accounting -->
Configuration --> Online Synchronization`. Please make sure to do an
*Update Credentials* to reactivate the connection.


---
## File: ./content/applications/finance/accounting/bank/setup/foreign_currency.md

# Manage a bank account in a foreign currency

In Odoo, every transaction is recorded in the default currency of the
company, and reports are all based on that default currency. When you
have a bank account in a foreign currency, for every transaction, Odoo
stores two values:

  - The debit/credit in the currency of the *company*;
  - The debit/credit in the currency of the *bank account*.

Currency rates are updated automatically using the web services of a
banking institution. By default, Odoo uses the European Central Bank's
web services but other options are available.

## Configuration

### Activate multi-currencies

To work with multiple currencies, go to `Accounting --> Configuration
--> Settings
--> Currencies` and tick `Multi-Currencies`. Under `Post Exchange
difference
entries in:`, provide a `Journal`, a `Gain Account`, a `Loss Account`,
and then click on `Save`.

### Configure currencies

Once Odoo is configured to support multiple currencies, they are all
created by default, but not necessarily active. To activate the new
currencies, click on `Activate Other Currencies` under the
`Multi-Currencies` setting or go to `Accounting --> Configuration
--> Accounting: Currencies`.

When the currencies are activated, you can choose to **automate** the
currency rate update, or leave it on **manual**. To configure the rate
update, go back to `Accounting -->
Configuration --> Settings --> Currencies`, check `Automatic Currency
Rates`, set `Interval` to your desired frequency, and then click on
`Save`. You also have the option to choose the `Service` you wish to
obtain currency rates from.

Click on the Update now button (`🗘`) besides the `Next Run` field to
update the currency rates manually.

### Create a new bank account

In the accounting application, go to `Accounting --> Configuration -->
Journals` and create a new one. Enter a `Journal Name` and set the
`Type` to <span class="title-ref">Bank</span>. In the `Journal Entries`
tab, enter a **short code**, a **currency**, and then finally click on
the `Bank Account` field to create a new account. In the pop-up window
of the account creation, enter a name, a code (ex.: 550007), set its
type to <span class="title-ref">Bank and Cash</span>, set a currency
type, and save. When you are back on the **journal**, click on the
`Account Number` field, and in the pop-up window, fill out the `Account
Number`, `Bank` of your account, and save.

![Example of a created bank
journal.](foreign_currency/foreign-journal.png)

Upon creation of the journal, Odoo automatically links the bank account
to the journal. It can be found under `Accounting --> Configuration -->
Accounting: Chart of Accounts`.

## Vendor bill in a foreign currency

To pay a bill in a foreign currency, simply select the currency next to
the `Journal` field and register the payment. Odoo automatically creates
and posts the foreign **exchange gain or loss** as a new journal entry.

![How to set a bill
currency.](foreign_currency/foreign-bill-currency.png)

<div class="note">

<div class="title">

Note

</div>

Note that you can pay a foreign bill with another currency. In that
case, Odoo automatically converts between the two currencies.

</div>

## Unrealized Currency Gains/Losses Report

This report gives an overview of all unrealized amounts in a foreign
currency on your balance sheet, and allows you to adjust an entry or
manually set an exchange rate. To access this report, go to `Reporting
--> Management: Unrealized Currency Gains/Losses`. From here, you have
access to all open entries in your **balance sheet**.

![View of the Unrealized Gains/Losses
journal.](foreign_currency/foreign-gains-losses.png)

If you wish to use a different currency rate than the one set in
`Accounting -->
Configuration --> Settings --> Currencies`, click the `Exchange Rates`
button and change the rate of the foreign currencies in the report.

![Menu to manually change exchange
rates.](foreign_currency/foreign-exchange-rates.png)

When manually changing **exchange rates**, a yellow banner appears
allowing you to reset back to Odoo's rate. To do so, simply click on
`Reset to Odoo's Rate`.

![Banner to reset back to Odoo's
rates.](foreign_currency/foreign-reset-rates.png)

In order to update your **balance sheet** with the amount of the
`adjustment` column, click on the `Adjustment Entry` button. In the
pop-up window, select a `Journal`, `Expense Account` and `Income
Account` to calculate and process the **unrealized gains and losses**.

You can set the date of the report in the `Date` field. Odoo
automatically reverses the booking entry to the date set in `Reversal
Date`.

Once posted, the `adjustment` column should indicate
<span class="title-ref">0.00</span>, meaning all **unrealized
gains/losses** have been adjusted.

![Unrealized Currency Gains/Losses report once
adjusted.](foreign_currency/foreign-adjustment.png)


---
## File: ./content/applications/finance/accounting/bank/setup/manage_cash_register.md

# Manage a cash register

The cash register is a journal to register receivings and payments
transactions. It calculates the total money in and out, computing the
total balance.

## Configuration

![image](manage_cash_register/journal.png)

1.  Configure the Cash journal in `Accounting --> Configuration -->
    Journals`.
2.  In the tab Journal Entries, the Default Debit and Credit Account can
    be configured as well as the currency of the journal

## Usage

### How to register cash payments?

To register a cash payment specific to another customer, you should
follow these steps:

1.  Go to `Accounting --> Dashboard --> Cash --> Register
    Transactions`
2.  Fill in the start and ending balance
3.  Register the transactions, specifying the customers linked to the
    transaction

### Put money in

Put money in is used to placed your cash manually before starting your
transactions. From the Register Transactions window, go to `More
--> Put money in`

![image](manage_cash_register/put-money-in.png)

### Take money out

Take money out is used to collect/get yor your cash manually after
ending all your transactions. From the Register Transaction windows, go
to `More
--> Take money out`

![image](manage_cash_register/put-money-out.png)

The transactions will be added to the current cash payment registration.


---
## File: ./content/applications/finance/accounting/bank/setup/bank_accounts.md

# Bank accounts

You can manage as many **Bank Accounts** as needed on your database.
Configuring them well allows you to make sure that all your banking data
is up to date and ready for the reconciliation with your *Journal
Entries*.

In Odoo Accounting, each Bank Account is configured to have a dedicated
*Journal* which is configured to post all entries in a dedicated
*Account*.

<div class="note">

<div class="title">

Note

</div>

Whenever you add a Bank Account, a dedicated journal and a dedicated
account are automatically created and configured.

</div>

Every **Bank Journal** is displayed by default on the **Accounting
Overview** in the form of a convenient card. It includes action buttons
that are displayed when appropriate.

![Bank Journals Cards are displayed on the Accounting Overview in Odoo
Accounting](bank_accounts/bank_accounts_card.png)

## Add a new Bank Account

You can either connect your bank account to your Odoo database, or
configure your bank account manually and `upload the bank statements
manually <../bank_statements>`.

### Bank Synchronization

Connect your bank account to your database and have your bank statements
synced automatically.

To synchronize a new bank account, go to `Accounting --> Configuration`,
click on *Add a Bank Account*, then find your bank in the list, click on
*Connect*, and follow the instructions on-screen.

<div class="note">

<div class="title">

Note

</div>

`Click here <../../bank/bank_synchronization>` for more information
about this bank synchronization.

</div>

![Select a bank institution in the list and connect it to Odoo
Accounting](bank_accounts/bank_accounts_connect.png)

### Manual configuration

If your Bank Institution can’t be synchronized automatically, or if you
prefer not to sync it with your database, you may also configure your
bank account manually.

To add a new bank account manually, go to `Accounting -->
Configuration`, click on *Add a Bank Account*, then on *Create it*, and
fill out the form.

  - **Name**: the bank account's name, as displayed on Odoo.
  - **Account Number**: your bank account number (IBAN in Europe).
  - **Bank**: click on *Create and Edit* to configure the bank's
    details. Add the bank institution's name and its Identifier Code
    (BIC or SWIFT).
  - **Code**: this code is your Journal's *Short Code*, as displayed on
    Odoo. By default, Odoo creates a new Journal with this Short Code.
  - **Journal**: This field is displayed if you have an existing Bank
    Journal that is not linked yet to a bank account. If so, then select
    the *Journal* you want to use to record the financial transactions
    linked to this bank account or create a new one by clicking on
    *Create and Edit*.

<div class="note">

<div class="title">

Note

</div>

Odoo detects the bank account type (e.g., IBAN) and enables some
features accordingly.

</div>

![Add manually a new bank account in Odoo
Accounting](bank_accounts/bank_accounts_manual.png)

## Advanced configuration

To edit an existing bank account, go to `Accounting --> Configuration
--> Bank
Accounts`, and open the bank account you want to modify.

If you need to edit the bank account details, go to the *Bank Account*
field and click on the *External Link* button next to the list arrow.
There, you can edit the bank account's number, Account Holder, Account
Holder Name, and your Bank Institution's details by clicking on the
*External Link* next to the *Bank* field. These details are used to
register some payments.

You can configure which types of payments are enabled in the **Payment
Method Types** section and how the bank statements are recorded and
posted in the **Bank Statements** section.

![Advanced configuration of a bank account in Odoo
Accounting](bank_accounts/bank_accounts_configuration.png)

<div class="seealso">

\- `../bank_synchronization` - `../bank_statements` - [Odoo Tutorials:
Accounting Basics](https://www.odoo.com/r/lsZ)

</div>


---
## File: ./content/applications/finance/accounting/bank/interbank.md

# Do a bank wire transfer from one bank to another

A company might have several bank accounts or cash registers. Within
odoo it is possible to handle internal transfers of money with only a
couple of clicks.

We will take the following example to illustrate. My company has two
bank accounts and I want to transfer 50.000 euros from one of our bank
accounts to the another one.

## Configuration

### Check your Chart of Accounts and default transfer account

To handle internal transfers you need a transfer account in your charts
of account. Odoo will generate an account automatically based on the
country of your chart of account. To configure your chart of accounts
and check the default transfer account go into the accounting module
settings, select `Configuration --> Settings`.

Your chart of accounts will be pre-installed depending on the country
specified during your registration, it cannot be changed.

![image](interbank/interbank04.png)

The default transfer account will automatically be generated as well
depending on your country's legislation. If necessary it can be modified
from the same page.

![image](interbank/interbank05.png)

### Create a second bank account / Journal

Before we can register an internal transfer we need to add a new bank to
our accounting dashboard. To do so enter the accounting module, click on
`Configuration --> Bank Accounts`. Create a new bank account. You should
fill in the **Account Number**. You can also create and edit your bank
to specify your bank's details.

![image](interbank/interbank03.png)

By saving the changes you now have 2 bank accounts.

![image](interbank/interbank06.png)

## Register an internal transfer from one bank to another.

We will now transfer 50.000 euros from our **Bank** to our **Bank BE57
0633 9533 1498** account.

### Log an internal transfer

The first step is to register the internal payment. To do so go into
your accounting dashboard, click on the **more** button of one of your
banks and select `New --> Internal transfer`.

![image](interbank/interbank01.png)

Create a new payment. The payment type will automatically be set to
internal transfer. Select the **Bank** you want to transfer to, specify
the **Amount** and add a **Memo** if you wish.

<div class="note">

<div class="title">

Note

</div>

The memo is important if you wish to automatically reconcile (see
[Import bank statements and
reconcile](#import-bank-statements-and-reconcile)).

</div>

![image](interbank/interbank02.png)

Save and confirm the changes to register the payment.

In terms of accounting the money is now booked in the transfer account.
We'll need to import bank statements to book the money in the final
accounts.

### Import bank statements and reconcile

Note that the bank balance computed by Odoo is different that the last
statement of your bank.

![image](interbank/interbank11.png)

That is because we did not import the bank statement confirming the
receiving and sending of the money. It's thus necessary to import your
bank statement and reconcile the payment with the correct bank statement
line. Once you receive your bank statements click the **new statement**
button of the corresponding bank to import them.

![image](interbank/interbank07.png)

Fill in your **Transactions line**. Once done, Odoo will display a
**Computed Balance**. that computed balance is the theorical end balance
of your bank account. If it's corresponding to the bank statement, it
means that no errors were made. Fill in the **Ending balance** and click
on the **Reconcile** button.

![image](interbank/interbank10.png)

The following window will open:

![image](interbank/interbank09.png)

You need to choose counterparts for the payment. Select the correct bank
statement line corresponding to the payment and click on the
**reconcile** button. Close the statement to finish the transaction

![image](interbank/interbank08.png)

The same steps will need to be repeated once you receive your second
bank statement. Note that if you specify the same amount and the same
memo in both bank statements and payment transactions then the
reconciliation will happen automatically.

![image](interbank/interbank12.png)


---
## File: ./content/applications/finance/accounting/bank/reconciliation.md

  - nosearch

# Bank reconciliation

<div class="toctree" data-titlesonly="">

reconciliation/cash\_transactions reconciliation/use\_cases
reconciliation/reconciliation\_models

</div>


---
## File: ./content/applications/finance/accounting/bank/bank_synchronization.md

  - show-content

# Bank synchronization

Odoo can synchronize directly with your bank institution to get all bank
statements imported automatically into your database.

To check if your bank is compatible with Odoo, go to [Odoo Accounting
Features](https://www.odoo.com/page/accounting-features), and click on
`See list of supported institutions`.

Odoo supports more than 25,000 institutions around the world.

To connect to the banks, Odoo uses multiple web-services:

  - **Plaid**: United States of America and Canada
  - **Yodlee**: Worldwide
  - `Salt Edge <bank_synchronization/saltedge>`: Worldwide
  - `Ponto <bank_synchronization/ponto>`: Europe
  - `Enable Banking <bank_synchronization/enablebanking>`: Scandinavian
    countries

<div class="seealso">

`bank_statements`

</div>

## Configuration

### On-Premise users

To be able to use this service, you need to have a valid Odoo Enterprise
subscription. So make sure that your database is registered with your
Odoo Enterprise contract. We also use a proxy between your database and
the third party provider so, in case of a connection error, please check
that you don't have a firewall or a proxy blocking the following
address:

  - <https://production.odoofin.com/>

### First synchronization

You can start synchronization either by going to the Accounting app and
`Accounting Dashboard --> Configuration --> Banks: Add a Bank Account`.

Now you can search for your bank institution. Select it and follow the
steps to synchronize with it.

<div class="note">

<div class="title">

Note

</div>

If you have any issues during your first synchronization, please verify
that your web browser doesn't block pop-ups and that your ad-blocker is
disabled.

</div>

<div class="important">

<div class="title">

Important

</div>

When choosing the date for the first bank statement synchronization,
pick the date when you start recording accounting transaction on your
Odoo accounting database. For example, if you import your closing
balance in Odoo on the 31/12/2022 and you start recording accounting
transactions on the 01/01/2023, your synchronization date should be
01/01/2023.

</div>

You must provide a phone number during your first synchronization to
secure your account. We ask for such information because we don't want
your data falling into the wrong hands. Therefore, if we detect
suspicious activities on your account, we block all requests coming from
your account, and you need to reactivate it using that phone number.

The third-party provider may request more information in order to
connect with your bank institution. This information is not stored on
Odoo's servers.

By default, transactions fetched from an online source are grouped
inside the same statement, and one bank statement is created per month.
You can change the bank statement creation periodicity in your journal
settings.

You can find all your synchronizations by going to `Accounting Dashboard
-->
Configuration --> Accounting: Online Synchronization`.

### Synchronize manually

After your first synchronization, the created journals are synchronized
by default every 12 hours. If you wish, you can synchronize manually by
clicking on the `Synchronize Now` button on the dashboard.

Or you can go to `Accounting Dashboard --> Configuration -->
Accounting: Online Synchronization`, select your institution and then
click on the `fetch transactions` button.

<div class="important">

<div class="title">

Important

</div>

Some institutions do not allow transactions to be fetched automatically.
For such institutions, during the automatic synchronization of the
account, you receive an error message asking you to disable the
automatic synchronization. This message can be found in the chatter of
your online synchronizations. In this case, make sure to perform manual
synchronizations.

</div>

## Issues

### Synchronization in error

To report a connection error to the [Odoo
support](https://www.odoo.com/help), go to `Accounting Dashboard-->
Configuration --> Accounting: Online Synchronization`, select the
connection that failed, and copy the error description and the
reference.

### Synchronization disconnected

If your connection with the proxy is disconnected, you can reconnect
with the proxy using the `Fetch Account` button.

<div class="note">

<div class="title">

Note

</div>

This disconnection can be caused by the Odoo support. In this case,
please contact the [support](https://www.odoo.com/help) directly with
your client id or the reference of the error listed in the chatter.

</div>

## Migration process for users having installed Odoo before December 2020

If you are on-premise, please first make sure that your source is
up-to-date with the latest version of Odoo.

Users who have created a database before December 2020 need to install
the new module manually to use the new functionalities.

To do so, go to `Apps --> Update Apps List`, remove the default filter
in the search bar and type
<span class="title-ref">account\_online\_synchronization</span>. You can
then click on `Install`. Finally, make sure all your users refresh their
Odoo page by pressing CTRL+F5.

<div class="note">

<div class="title">

Note

</div>

  - All previous synchronizations are disconnected during the
    installation and won't work anymore.
  - You can find them directly in the synchronization menu (`Accounting
    Dashboard --> Configuration -->
    Accounting: Online Synchronization`). It is not possible to
    resynchronize these connections; you have to make new ones.
  - Do not uninstall
    <span class="title-ref">account\_online\_sync</span>, which is the
    previous module for online synchronization. The new one overrides
    it.
  - By default,
    <span class="title-ref">account\_online\_synchronization</span> is
    installed automatically with Accounting.

</div>

## FAQ

### The synchronization is not working in real-time. Is that normal?

The process is not intended to work in real-time as third party
providers synchronize your accounts at different intervals. To force the
synchronization and fetch the statements, go to your `Accounting
Dashboard`, and click on the `Synchronize Now` button. You can also
synchronize and fetch transactions through `Accounting Dashboard -->
Configuration --> Accounting: Online Synchronization`. Some providers
only allow one refresh per day, so it is possible that clicking on
`Synchronize Now` does not get your latest transactions if you already
performed such action earlier in the day.

A transaction can be visible on your bank account but not be fetched if
it has the status `Pending`. Only transactions with the `Posted` status
will be retrieved. If the transaction is not **Posted** yet, you will
have to wait until the status changes.

### Is the Online Bank Synchronization feature included in my contract?

  - **Community Version**: No, this feature is not included in the
    Community Version.
  - **Online Version**: Yes, even if you benefit from the One App Free
    contract.
  - **Enterprise Version**: Yes, if you have a valid enterprise contract
    linked to your database.

### Some banks have a status "Beta." What does this mean?

This means that banking institutions are not yet fully supported by our
Third Party Provider. Bugs or other problems may arise. Odoo does not
support technical problems that occur with banks in the Beta phase, but
the user may still choose to connect. Connecting with these banks
contributes to the development process since the Provider will have real
data and feedback from the connection.

### Why do my transactions only synchronize when I refresh manually?

Some banks have additional security measures and require extra steps,
such as an SMS/email authentication code or another type of MFA. Because
of this, the integrator cannot pull transactions until the security code
is provided.

### Not all of my past transactions are in Odoo, why?

For some institutions, transactions can only be fetched up to 3 months
in the past.

### Why don't I see any transactions?

During your first synchronization, you selected the bank accounts you
decided to synchronize with Odoo. If you didn't synchronize any of your
accounts, you can go to `Accounting Dashboard --> Configuration -->
Accounting: Online Synchronization` to click on the `Fetch Account`
button on the connection.

There may also be no new transactions.

If your bank account is properly linked to a journal and posted
transactions are not visible in your database, please [submit a support
ticket](https://www.odoo.com/help).

### How can I update my bank credentials?

You can update your credentials by going to `Accounting Dashboard -->
Configuration --> Accounting: Online Synchronization`,open the
connection you want to update your credentials and click on the `Update
Credentials` button.

<div class="toctree" data-titlesonly="">

bank\_synchronization/saltedge bank\_synchronization/ponto
bank\_synchronization/enablebanking

</div>


---
## File: ./content/applications/finance/accounting/receivables.md

  - nosearch

# Account receivables

<div class="toctree" data-titlesonly="">

receivables/customer\_invoices receivables/customer\_payments

</div>


---
## File: ./content/applications/finance/accounting/reporting.md

  - nosearch

# Reporting

<div class="toctree" data-titlesonly="">

reporting/overview reporting/declarations

</div>


---
## File: ./content/applications/finance/accounting/others.md

  - nosearch

# Others

<div class="toctree" data-titlesonly="">

others/analytic others/adviser others/multicurrencies others/inventory

</div>


---
## File: ./content/applications/finance/accounting/others/multicurrencies/exchange/full_reconcile_warning.md

<div class="warning">

<div class="title">

Warning

</div>

In order for an exchange difference entry to be created automatically,
the corresponding invoices and payments need to be fully reconciled.
This means the invoices are fully paid and the payments are fully spent
on invoices. If you partially pay 3 invoices from 2 payments, and the
last invoice still has an amount due, there will be no exchange
difference entry for any of them until that final amount is paid.

</div>


---
## File: ./content/applications/finance/accounting/others/multicurrencies/how_it_works.md

# Odoo's multi-currency system

## Overview

Choosing to use the multi-currency option in Odoo will allow you to send
sales invoices, quotes and purchase orders or receive bills and payments
in currencies other than your own. With multi-currency, you can also set
up bank accounts in other currencies and run reports on your foreign
currency activities.

## Configuration

### Turn on multi-currency

In the accounting module, Go to `Configuration --> Settings` and flag
**Allow multi currencies**, then click on **Apply**.

![image](how_it_works/works01.png)

### Exchange Rate Journal

The **Rate Difference Journal** records the differences between the
payment registration and the expected amount. For example, if a payment
is paid 1 month after the invoice was issued, the exchange rate has
probably changed. The fluctuation implies some loss or profit that are
recorded by Odoo.

You can change it in the settings:

![image](how_it_works/works02.png)

### View or edit rate being used

You can manually configure the currency rates in `Configuration -->
Currencies`. Open the currencies you want to use in Odoo and edit it.
Make sure the currency is active.

![image](how_it_works/works03.png)

Click on **View Rates** to edit it and to see the history :

![image](how_it_works/works04.png)

Click on **Create** to add the rate. Fill in the date and the rate.
Click on **Save** when you are done.

![image](how_it_works/works05.png)

### Live Currency Rate

By default, the currencies need to be updated manually. But you can
synchronize it with
[Yahoo](https://finance.yahoo.com/currency-converter/) or the [European
Central Bank](http://www.ecb.europa.eu). In `Configuration -->
Settings`, go to the **Live Currency Rate** section.

Choose the interval : Manually, Daily, Weekly or Monthly. You can always
force the update by clicking on **Update Now**. Select the provider, and
you are set \!

![image](how_it_works/works06.png)

<div class="note">

<div class="title">

Note

</div>

Only the **active** currencies are updated

</div>

### Configure your charts of account

In the accounting application, go to `Adviser --> Charts of Accounts`.
On each account, you can set a currency. It will force all moves for
this account to have the account currency.

If you leave it empty, it means that it can handle all currencies that
are Active.

![image](how_it_works/works07.png)

### Configure your journals

In order to register payments in other currencies, you have to remove
the currency constraint on the journal. Go to the accounting
application, Click on **More** on the journal and **Settings**.

![image](how_it_works/works08.png)

Check if the currency field is empty or in the foreign currency in which
you will register the payments. If a currency is filled in, it means
that you can register payments only in this currency.

![image](how_it_works/works09.png)

## How is Odoo's multi-currency working?

Now that you are working in a multi-currency environment, all
accountable items will be linked to a currency, domestic or foreign.

### Sales Orders and Invoices

You are now able to set a different currency than the company one on
your sale orders and on your invoices. The currency is set for the whole
document.

![image](how_it_works/works10.png)

### Purchases orders and Vendor Bills

You are now able to set a different currency than the company one on
your purchase orders and on your vendor bills. The currency is set for
the whole document.

![image](how_it_works/works11.png)

### Payment Registrations

In the accounting application, go to `Sales --> Payments`. Register the
payment and set the currency.

![image](how_it_works/works12.png)

### Bank Statements

When creating or importing bank statements, the amount is in the company
currency. But there are now two complementary fields, the amount that
was actually paid and the currency in which it was paid.

![image](how_it_works/works13.png)

When reconciling it, Odoo will directly match the payment with the right
Invoice. You will get the invoice price in the invoice currency and the
amount in your company currency.

### Exchange Rate Journal

Go to `Adviser --> Journal Entries` and look for the Exchange difference
journal entries. All the exchange rates differences are recorded in it.

![image](how_it_works/works14.png)

<div class="seealso">

\* `invoices_payments` \* `exchange`

</div>


---
## File: ./content/applications/finance/accounting/others/multicurrencies/invoices_payments.md

# Manage invoices and payment in multiple currencies

## Overview

Odoo provides multi-currency support with automatic currency gross or
loss entry adjustment. There are a few things Odoo has been to ease the
user's life.

All the account transactions will be done using the company currency.
However you can see two extra fields with the journal entry where
secondary currency and amount will visible. You can create
multi-currency journals of force a specific currency.

When creating an invoice, the currency can be changed very easily;
however Odoo takes the company currency as a default assignment. It will
convert all the amounts automatically using that currency.

## Configuration

### Enable Multi-Currency

For information about enabling Multi-Currency, please read the document:
`how_it_works`

### Configure your journal

In order to register payments in other currencies, you have to remove
the currency constraint on the journal. Go to the accounting
application, on the journal, click on `More --> Settings`.

![image](invoices_payments/invoice01.png)

Check if the currency field is empty or in the foreign currency in which
you will register the payments. If a currency is filled in, it means
that you can register payments only in this currency.

![image](invoices_payments/invoice02.png)

## Multi-currency invoices & Vendor Bills

Now that you are working in a multi-currency environment, all
accountable items will be linked to a currency, domestic or foreign.

### Invoices

You are now able to set a different currency than the company one on
your sale orders and on your invoices. The currency is set for the whole
document.

![image](invoices_payments/invoice03.png)

### Vendor Bills

You are now able to set a different currency than the company one on
your purchase orders and on your vendor bills. The currency is set for
the whole document.

![image](invoices_payments/invoice04.png)

## Multi-currency Payments

In the accounting application, go to `Sales --> Payments`. Register the
payment and indicate that it was done in the foreign currency. Then
click on **Confirm**.

![image](invoices_payments/invoice05.png)

The journal entry has been posted but not allocated.

Go back to your invoice (`Sales --> Customer Invoices`) and click on
**Add** to allocate the payment.

![image](invoices_payments/invoice06.png)

## Multi- Currency Bank Statements

When creating or importing bank statements, the amount is in the company
currency. But there are now two complementary fields, the amount that
was actually paid and the currency in which it was paid.

![image](invoices_payments/invoice07.png)

When reconciling it, Odoo will directly match the payment with the right
invoice. You will get the invoice price in the invoice currency and the
amount in your company currency.

![image](invoices_payments/invoice08.png)

## Exchange Rate Journal

Go to `Adviser --> Journal Entries` and look for the **Exchange
Difference** journal entries. All the exchange rates differences are
recorded in it.

![image](invoices_payments/invoice09.png)

<div class="seealso">

\* `how_it_works` \* `exchange`

</div>


---
## File: ./content/applications/finance/accounting/others/multicurrencies/exchange.md

# Record exchange rates at payments

## Overview

Any company doing international trade faces the case where the payments
are in a different currency.

After receiving their payments, you have the option to convert the
amount into your company currency. Multi currency payment implies rates
fluctuations. The rate differences are automatically recorded by Odoo.

## Configuration

### Enable multi-currencies

In the accounting module, Go to `Configuration --> Settings` and flag
**Allow multi currencies**, then click on **apply**.

![image](exchange/exchange_rate03.png)

Configure the currency rates in `Configuration --> Currencies`. Write
down the rate and make sure the currency is active.

![image](exchange/exchange_rate02.png)

In this document, the base currency is **Euro** and we will record
payments in **Dollars**.

![image](exchange/exchange_rate08.png)

<div class="tip">

<div class="title">

Tip

</div>

You can automatically fetch the currency rates from the **European
Central Bank** or from **Yahoo**. Please read the document :
`how_it_works`.

</div>

### Configure your journal

In order to register payments in other currencies, you have to **remove
the currency constraint** on the journal. Go to the accounting
application, Click on **More** on the journal and **Settings**.

![image](exchange/exchange_rate06.png)

Check if the **Currency** field is empty or in the foreign currency in
which you will register the payments. If a currency is filled in, it
means that you can register payments only in this currency.

![image](exchange/exchange_rate10.png)

## Record a payment in a different currency

In the **Accounting** application, go to `Sales --> Payments`. Register
the payment and indicate that it was done in the foreign currency. Then
click on **confirm**.

![image](exchange/exchange_rate05.png)

The journal entry has been posted but not allocated.

Go back to your invoice (`Sales --> Customer Invoices`) and click on
**Add** to allocate the payment.

![image](exchange/exchange_rate04.png)

## Record a bank statement in a different currency

Create or import the bank statement of your payment. The **Amount** is
in the company currency. There are two complementary fields, the
**Amount currency**, which is the amount that was actually paid and the
**Currency** in which it was paid.

![image](exchange/exchange_rate07.png)

When reconciling it, Odoo will directly match the payment with the right
**Invoice**. You will get the invoice price in the invoice currency and
the amount in your company currency.

![image](exchange/exchange_rate09.png)

## Check the exchange rate differences

Go to `Adviser --> Journal Entries` and look for the **Exchange
difference** journal entries. All the exchange rates differences are
recorded in it.

![image](exchange/exchange_rate01.png)

<div class="tip">

<div class="title">

Tip

</div>

The Exchange difference journal can be changed in your accounting
settings.

</div>

<div class="seealso">

\* `../../bank/reconciliation/reconciliation_models` \*
`../../bank/reconciliation/use_cases`

</div>


---
## File: ./content/applications/finance/accounting/others/adviser/budget.md

# Financial budget

Managing budgets is an essential part of running a business. Budgets
help people become more intentional with how money is spent and direct
people to organize and prioritize their work to meet financial goals.
They allow the planning of a desired financial outcome and then measure
the actual performance against the plan. Odoo manages budgets using both
**general** and **analytic accounts**.

## Configuration

Go to `Accounting --> Configuration --> Settings --> Analytics section`,
and enable `Budget Management`.

### Budgetary positions

Budgetary positions are lists of accounts for which you want to keep
budgets (typically expense or income accounts).

To define budgetary positions, go to `Accounting --> Configuration -->
Management:
Budgetary Positions` and `New`. Add a `Name` to your budgetary position
and select the `Company` it applies to. Click `Add a line` to add one or
more accounts.

<div class="note">

<div class="title">

Note

</div>

Each budgetary position can have any number of accounts from the chart
of accounts, though it must have at least one.

</div>

## Use case

Let’s illustrate this with an example.

We just started a project with *Smith & Co*, and we would like to budget
the income and expenses of that project. We plan on having a revenue of
1000, and we don’t want to spend more than 700.

First, we need to define what accounts relate to our project’s expenses.
Go to `Accounting --> Configuration --> Management: Budgetary
positions`, and click `New` to add a position. Add the accounts wherein
expenses will be booked.

![display the Smith and Co expenses](budget/smith-and-co-expenses.png)

Let's repeat the steps to create a budgetary position that reflects the
revenue.

![display the Smith and Co revenue](budget/smith-and-co-revenue.png)

### Analytical accounts

Odoo needs to know which costs or expenses are relevant to a specified
budget, as the above general accounts may be used for different
projects. Go to `Accounting --> Configuration -->
Analytic Accounting: Analytic Accounts` and click `New` to add a new
**Analytic Account** called *Smith & Co*.

The `Plan` field has to be completed. Plans group multiple analytic
accounts; they distribute costs and benefits to analyze business
performance. **Analytic Plans** can be created or configured by going to
`Accounting --> Configuration --> Analytic Accounting:
Analytic Plans`.

When creating a new customer invoice and/or vendor bill, you have to
refer to this analytic account.

![add analytic accounts in a new invoice or
bill.](budget/analytic-accounts.png)

### Define the budget

Let’s set our targets. We specified that we expect to gain 1000 with
this project, and we would like not to spend more than 700. Go to
`Accounting --> Management: Budgets` and click `New` to create a new
budget for *Smith & Co* project.

First, fill in your `Budget Name`. Then, select the `Period` wherein the
budget is applicable. Next, add the `Budgetary Position` you want to
track, define the related `Analytic Account`, and add the `Planned
Amount`.

![budget lines display](budget/define-the-budget.png)

<div class="note">

<div class="title">

Note

</div>

When recording a planned amount related to expenses, the amount must be
negative.

</div>

### Check your budget

Go to `Accounting --> Management: Budgets` and find the *Smith & Co*
Project to see how it evolves according to the expenses or income for
the related analytic account.

The `Practical Amount` evolves when a new journal entry related to your
analytic account and an account from your budgetary position is created.

The `Theoretical Amount` represents the amount of money you
theoretically could have spent or should have received based on the
date. For example, suppose your budget is 1200 for 12 months (January to
December), and today is 31 of January. In that case, the theoretical
amount will be 100 since this is the actual amount that could have been
made.


---
## File: ./content/applications/finance/accounting/others/adviser.md

  - nosearch

# Adviser

<div class="toctree" data-titlesonly="">

adviser/budget

</div>


---
## File: ./content/applications/finance/accounting/others/multicurrencies.md

  - nosearch

# Multicurrency

<div class="toctree" data-titlesonly="">

multicurrencies/how\_it\_works multicurrencies/invoices\_payments
multicurrencies/exchange

</div>


---
## File: ./content/applications/finance/accounting/others/inventory.md

  - nosearch

# Inventory

<div class="toctree" data-titlesonly="">

inventory/avg\_price\_valuation
/applications/inventory\_and\_mrp/inventory/management/reporting/inventory\_valuation\_config

</div>


---
## File: ./content/applications/finance/accounting/others/analytic.md

  - nosearch

# Analytic

<div class="toctree" data-titlesonly="">

analytic/usage analytic/timesheets analytic/purchases\_expenses

</div>


---
## File: ./content/applications/finance/accounting/others/inventory/avg_price_valuation.md

# Average price on returned goods

<div id="inventory/avg_cost/definition">

*Average cost valuation* (AVCO) is an inventory valuation method that
evaluates cost based on the total cost of goods bought or produced
during a period, divided by the total number of items on-hand. Inventory
valuation is used to:

</div>

  - reflect the value of a company's assets;
  - keep track of the amount of unsold goods;
  - account for monetary value in goods that have yet to generate
    profit;
  - report on flow of goods throughout the quarter.

Because `AVCO (Average Cost Valuation)` uses the weighted average to
evaluate the cost, it is a good fit for companies that sell only a few
different products in large quantities. In Odoo, this costing analysis
is *automatically updated* each time products are received.

Thus, when shipments are returned to their supplier, Odoo automatically
generates accounting entries to reflect the change in inventory
valuation. However, Odoo does **not** automatically update the `AVCO
(Average Cost Valuation)` calculation, because `this can potentially
create inconsistencies with inventory
valuation <inventory/avg_price/leaving_inventory>`.

<div class="note">

<div class="title">

Note

</div>

This document addresses a specific use case for theoretical purposes.
Navigate `here
<inventory/inventory_valuation_config>` for instructions on how to set
up and use `AVCO (Average Cost Valuation)` in Odoo.

</div>

<div class="seealso">

\- `Using inventory valuation <inventory/reporting/using_inventory_val>`
- `Other inventory valuation methods
<inventory/inventory_valuation_config/costing_methods>`

</div>

## Configuration

To use average cost inventory valuation on a product, navigate to
`Inventory -->
Configuration --> Product Categories` and select the category that will
be using `AVCO (Average Cost Valuation)`. On the product category page,
set `Costing Method` to <span class="title-ref">Average Cost
(AVCO)</span> and `Inventory Valuation` to
<span class="title-ref">Automated</span>.

<div class="seealso">

`Inventory valuation configuration
<inventory/inventory_valuation_config>`

</div>

## Using average cost valuation

The average cost method adjusts the inventory valuation when products
are received in the warehouse. This section explains how it works, but
if the explanation is unnecessary, skip to the `return
to supplier use case <inventory/avg_cost/return>` section.

### Formula

When new products arrive, the new average cost for each product is
recomputed using the formula:

\[Avg~Cost = \frac{(Old~Qty \times Old~Avg~Cost) + (Incoming~Qty \times Purchase~Price)}{Final~Qty}\]

  - **Old Qty**: product count in stock before receiving the new
    shipment;
  - **Old Avg Cost**: calculated average cost for a single product from
    the previous inventory valuation;
  - **Incoming Qty**: count of products arriving in the new shipment;
  - **Purchase Price**: estimated price of products at the reception of
    products (since vendor bills may arrive later). The amount includes
    not only the price for the products, but also added costs, such as
    shipping, taxes, and `landed costs
    <inventory/reporting/landed_costs>`. At reception of the vendor
    bill, this price is adjusted;
  - **Final Qty**: quantity of on-hand stock after the stock move.

<div id="inventory/avg_cost/definite_rule">

<div class="important">

<div class="title">

Important

</div>

When products leave the warehouse, the average cost **does not** change.
Read about why the average cost valuation is **not** adjusted `here
<inventory/avg_price/leaving_inventory>`.

</div>

</div>

### Compute average cost

To understand how the average cost of a product changes with each
shipment, consider the following table of warehouse operations and stock
moves. Each is a different example of how the average cost valuation is
affected.

| Operation                    | Incoming Value | Inventory Value | Qty On Hand | Avg Cost |
| ---------------------------- | -------------- | --------------- | ----------- | -------- |
|                              |                | $0              | 0           | $0       |
| Receive 8 tables at $10/unit | 8 \* $10       | $80             | 8           | $10      |
| Receive 4 tables at $16/unit | 4 \* $16       | $144            | 12          | $12      |
| Deliver 10 tables            | \-10 \* $12    | $24             | 2           | $12      |

<div id="inventory/avg_cost/ex-1">

<div class="exercise">

Ensure comprehension of the above computations by reviewing the "Receive
8 tables at $10/unit" example.

Initially, the product stock is 0, so all values are $0.

In the first warehouse operation, <span class="title-ref">8</span>
tables are received at <span class="title-ref">$10</span> each. The
average cost is calculated using the `formula
<inventory/avg_cost/formula>`:

\[Avg~Cost = \frac{0 + 8 \times $10}{8} = \frac{$80}{8} = $10\]

  - Since the *incoming quantity* of tables is
    <span class="title-ref">8</span> and the *purchase price* for each
    is <span class="title-ref">$10</span>,
  - The inventory value in the numerator is evaluated to
    <span class="title-ref">$80</span>;
  - <span class="title-ref">$80</span> is divided by the total amount of
    tables to store, <span class="title-ref">8</span>;
  - <span class="title-ref">$10</span> is the average cost of a single
    table from the first shipment.

To verify this in Odoo, in the *Purchase* app, order
<span class="title-ref">8</span> quantities of a new product,
<span class="title-ref">Table</span>, with no previous stock moves, for
<span class="title-ref">$10</span> each.

In the table's `Product Category` field in the `General Information` tab
of the product form, click the `➡️ (arrow)` icon, to open an `External
Link` to edit the product category. Set the `Costing Method` to
<span class="title-ref">Average Cost (AVCO)</span> and `Inventory
Valuation` to <span class="title-ref">Automated</span>.

Then, return to the purchase order. Click `Confirm Order`, and click
`Receive
Products` to confirm receipt.

Next, check the inventory valuation record generated by the product
reception by navigating to `Inventory --> Reporting --> Inventory
Valuation`. Select the drop-down for
<span class="title-ref">Table</span>, and view the `Total Value` column
for the *valuation layer* (`inventory
valuation at a specific point in time = on-hand quantity * unit price`).
The 8 tables in-stock are worth $80.

![Show inventory valuation of 8 tables in
Odoo.](avg_price_valuation/inventory-val-8-tables.png)

</div>

</div>

<div class="tip">

<div class="title">

Tip

</div>

When the product category's `Costing Method` is set to `AVCO`, then the
average cost of a product is also displayed on the `Cost` field, under
the `General Information` tab, on the product page itself.

</div>

#### Product delivery (use case)

For outgoing shipments, `outbound products have no effect on the average
cost valuation
<inventory/avg_cost/definite_rule>`. Although the average cost valuation
is not recalculated, the inventory value still decreases because the
product is removed from stock and delivered to the customer location.

<div class="exercise">

To demonstrate that the average cost valuation is not recalculated,
examine the "Deliver 10 tables" example.

\[Avg~Cost = \frac{12 \times $12 + (-10) \times $12}{12-10} = \frac{24}{2} = $12\]

1.  Because 10 tables are being sent out to customers, the *incoming
    quantity* is <span class="title-ref">-10</span>. The previous
    average cost (<span class="title-ref">$12</span>) is used in lieu of
    a vendor's *purchase price*;
2.  The *incoming inventory value* is <span class="title-ref">-10 \* $12
    = -$120</span>;
3.  The old *inventory value* (<span class="title-ref">$144</span>) is
    added to the *incoming inventory value*
    (<span class="title-ref">-$120</span>), so
    <span class="title-ref">$144 + -$120 = $24</span>;
4.  Only <span class="title-ref">2</span> tables remain after shipping
    out <span class="title-ref">10</span> tables from
    <span class="title-ref">12</span>. So the current *inventory value*
    (<span class="title-ref">$24</span>) is divided by the on-hand
    quantity (<span class="title-ref">2</span>);
5.  <span class="title-ref">$24 / 2 = $12</span>, which is the same
    average cost as the previous operation.

To verify this in Odoo, sell <span class="title-ref">10</span> tables in
the *Sales* app, validate the delivery, and then review the inventory
valuation record by going to in `Inventory --> Reporting -->
Inventory Valuation`. In the topmost valuation layer, delivering
<span class="title-ref">10</span> tables reduces the product's value by
<span class="title-ref">-$120</span>.

**Note**: What is not represented in this stock valuation record is the
revenue made from this sale, so this decrease is not a loss to the
company.

![Show how deliveries decrease inventory
valuation.](avg_price_valuation/inventory-val-send-10-tables.png)

</div>

## Return items to supplier (use case)

Because the price paid to suppliers can differ from the price the
product is valued at with the `AVCO (Average Cost Valuation)` method,
Odoo handles returned items in a specific way.

1.  Products are returned to suppliers at the original purchase price,
    but;
2.  The internal cost valuation remains unchanged.

The above `example table <inventory/avg_cost/math_table>` is updated as
follows:

| Operation                    | Qty\*Avg Cost | Inventory Value | Qty On Hand | Avg Cost |
| ---------------------------- | ------------- | --------------- | ----------- | -------- |
|                              |               | $24             | 2           | $12      |
| Return 1 table bought at $10 | \-1 \* $12    | $12             | 1           | $12      |

In other words, returns to vendors are perceived by Odoo as another form
of a product exiting the warehouse. To Odoo, because the table is valued
at $12 per unit, the inventory value is reduced by
<span class="title-ref">$12</span> when the product is returned; the
initial purchase price of <span class="title-ref">$10</span> is
unrelated to the table's average cost.

<div class="example">

To return a single table that was purchased for
<span class="title-ref">$10</span>, navigate to the receipt in the
*Inventory* app for the `8 tables purchased in Exercise 1
<inventory/avg_cost/ex-1>` by going to the `Inventory Overview`,
clicking on `Receipts`, and selecting the desired receipt.

Then, click `Return` on the validated delivery order, and modify the
quantity to <span class="title-ref">1</span> in the reverse transfer
window. This creates an outgoing shipment for the table. Select
`Validate` to confirm the outgoing shipment.

Return to `Inventory --> Reporting --> Inventory Valuation` to see how
the outgoing shipment decreases the inventory value by $12.

![Inventory valuation for
return.](avg_price_valuation/inventory-valuation-return.png)

</div>

### Eliminate stock valuation errors in outgoing products

Inconsistencies can occur in a company's inventory when the average cost
valuation is recalculated on outgoing shipments.

To demonstrate this error, the table below displays a scenario in which
1 table is shipped to a customer and another is returned to a supplier
at the purchased price.

| Operation                                | Qty\*Price | Inventory Value | Qty On Hand | Avg Cost |
| ---------------------------------------- | ---------- | --------------- | ----------- | -------- |
|                                          |            | $24             | 2           | $12      |
| Ship 1 product to customer               | \-1 \* $12 | $12             | 1           | $12      |
| Return 1 product initially bought at $10 | \-1 \* $10 | **$2**          | **0**       | $12      |

In the final operation above, the final inventory valuation for the
table is <span class="title-ref">$2</span> even though there are
<span class="title-ref">0</span> tables left in stock.

<div class="admonition">

Correct method

Use the average cost to value the return. This does not mean the company
gets $12 back for a $10 purchase; the item returned for $10 is valued
internally at $12. The inventory value change represents a product worth
$12 no longer being accounted for in company assets.

</div>

## Anglo-Saxon accounting

In addition to using `AVCO (Average Cost Valuation)`, companies that use
**Anglo-Saxon accounting** also keep a holding account that tracks the
amount to be paid to vendors. Once a vendor delivers an order,
**inventory value** increases based on the vendor price of the products
that have entered the stock. The holding account (called **stock
input**) is credited and only reconciled once the vendor bill is
received.

<div class="seealso">

\- `Anglo-Saxon vs. Continental
<inventory/inventory_valuation_config/accounting>`

</div>

The table below reflects journal entries and accounts. The *stock input*
account stores the money intended to pay vendors when the vendor bill
has not yet been received. To balance accounts when returning products
that have a price difference between the price the product is **valued
at** and the price it was bought for, a *price difference* account is
created.

<div id="inventory/avg_price/price-table">

| Operation                              | Stock Input | Price Diff | Inventory Value | Qty On Hand | Avg Cost |
| -------------------------------------- | ----------- | ---------- | --------------- | ----------- | -------- |
|                                        |             |            | $0              | 0           | $0       |
| Receive 8 tables at $10                | ($80)       |            | $80             | 8           | $10      |
| Receive vendor bill $80                | $0          |            | $80             | 8           | $10      |
| Receive 4 tables at $16                | ($64)       |            | $144            | 12          | $12      |
| Receive vendor bill $64                | $0          |            | $144            | 12          | $12      |
| Deliver 10 tables to customer          | $0          |            | $24             | 2           | $12      |
| Return 1 table initially bought at $10 | **$10**     | **$2**     | **$12**         | 1           | $12      |
| Receive vendor refund $10              | $0          | $2         | $12             | 1           | $12      |

</div>

### Product reception

#### Summary

At product reception, Odoo ensures companies can pay for goods that were
purchased by preemptively moving an amount matching the price of
received goods into the `liability account
</applications/finance/accounting/getting_started/cheat_sheet>`, **Stock
Input**. Then, once the bill has been received, the amount in the
holding account is transferred to *Accounts Payable*. Transfers into
this account means the bill has been paid. **Stock Input** is reconciled
once the vendor bill is received.

Inventory valuation is a method of calculating how much each in-stock
product is worth internally. Since there is a difference between the
price the product is **valuated at** and the price the product was
actually **purchased for**, the **Inventory Valuation** account is
unrelated to the crediting and debiting operations of the **Stock
Input** account.

To conceptualize all this, follow the breakdown below.

#### Accounts balanced at received products

In this example, a company starts with zero units of a product,
<span class="title-ref">table</span>, in stock. Then, 8 tables are
received from the vendor:

1.  The **Stock Input** account stores
    <span class="title-ref">$80</span> of credit owed to the vendor. The
    amount in this account is unrelated to the inventory value.
2.  <span class="title-ref">$80</span> worth of tables came **in**
    (**debit** the *Inventory Value* account
    <span class="title-ref">$80</span>), and
3.  <span class="title-ref">$80</span> must be paid **out** for received
    goods (**credit** the *Stock Input* account
    <span class="title-ref">$80</span>).

##### In Odoo

Odoo generates an accounting journal entry when shipments that use `AVCO
(Average Cost Valuation)` costing method are received. Configure a
`Price Difference Account` by selecting the `➡️ (arrow)` icon next to
the `Product Category` field on the product page.

Under `Account Properties`, create a new `Price Difference Account` by
typing in the name of the account and clicking `Create and Edit`. Then
set the account `Type` as <span class="title-ref">Expenses</span>, and
click `Save`.

![Create price difference
account.](avg_price_valuation/create-price-difference.png)

Then, receive the shipment in the *Purchase* app or *Inventory* app, and
navigate to the `Accounting app --> Accounting --> Journal Entries`. In
the list, find the `Reference` that matches the warehouse reception
operation for the relevant product.

![Show accounting entry of 8 tables from the
list.](avg_price_valuation/search-for-entry-of-tables.png)

Click on the line for 8 tables. This accounting journal entry shows that
when the 8 tables were received, the <span class="title-ref">Stock
Valuation</span> account increased by
<span class="title-ref">$80</span>. Conversely, the **Stock Input**
account (set as <span class="title-ref">Stock Interim (Received)</span>
account by default) is credited <span class="title-ref">$80</span>.

![Debit stock valuation and credit stock input 80
dollars.](avg_price_valuation/accounting-entry-8-tables.png)

#### Accounts balanced at received vendor bill

In this example, a company starts with zero units of a product, table,
in stock. Then, 8 tables are received from the vendor. When the bill is
received from vendor for 8 tables:

1.  Use <span class="title-ref">$80</span> in the **Stock Input**
    account to pay the bill. This cancels out and the account now holds
    <span class="title-ref">$0</span>.
2.  Debit **Stock Input** <span class="title-ref">$80</span> (to
    reconcile this account).
3.  Credit **Accounts payable** <span class="title-ref">$80</span>. This
    account stores the amount the company owes others, so accountants
    use the amount to write checks to vendors.

##### In Odoo

Once the vendor requests payment, navigate to the `Purchase app -->
Orders -->
Purchase` and select the `PO (Purchase Order)` for 8 tables. Inside the
`PO (Purchase
Order)`, select `Create Bill`.

Switch to the `Journal Items` tab to view how
<span class="title-ref">$80</span> is transferred from the holding
account, <span class="title-ref">Stock Interim (Received)</span> to
<span class="title-ref">Accounts Payable</span>. `Confirm` the bill to
record the payment to the vendor.

![Show bill linked to the purchase order for 8
tables.](avg_price_valuation/receive-8-table-bill.png)

### On product delivery

In the `above example table <inventory/avg_price/price-table>`, when 10
products are delivered to a customer, the **Stock Input** account is
untouched because there are no new products coming in. To put it simply:

1.  **Inventory valuation** is credited
    <span class="title-ref">$120</span>. Subtracting from inventory
    valuation represents <span class="title-ref">$120</span> worth of
    products exiting the company.
2.  Debit **Accounts Receivable** to record revenue from the sale.

![Show journal items linked to sale
order.](avg_price_valuation/sell-10-tables.png)

<div class="spoiler">

Understand Anglo-Saxon expensing

In the accounting journal entry invoicing a customer for 10 tables, the
accounts **Product Sales**, **Tax Received**, and **Accounts
Receivable** all pertain to the sale of the product. **Accounts
Receivable** is the account where the customer payment will be received.

Anglo-Saxon accounting recognizes the cost of goods sold (COGS) once the
sale is made. So, up until the product is sold, scrapped, or returned,
costs of keeping the product in stock are not accounted for. The
**Expense** account is debited <span class="title-ref">$120</span> to
log the costs of storing 10 tables during this period of time.

</div>

### On product return

In the `above example table <inventory/avg_price/price-table>`, when
returning 1 product to a vendor purchased at
<span class="title-ref">$10</span>, a company expects
<span class="title-ref">$10</span> in the **Accounts Payable** account
from the vendor. However, **Stock Input** account must be debited
<span class="title-ref">$12</span> because the average cost is
<span class="title-ref">$12</span> at the time of the return. The
missing <span class="title-ref">$2</span> is accounted for in the `Price
Difference
Account`, which is set up in the product's `Product Category`.

<div class="note">

<div class="title">

Note

</div>

Behavior of *price difference accounts* varies from localization. In
this case, the account is intended to store differences between vendor
price and *automated* inventory valuation methods.

</div>

Summary:

1.  Debit **Stock Input** account <span class="title-ref">$10</span> to
    move the table from stock to stock input. This move is to indicate
    that the table is to be processed for an outgoing shipment.
2.  Debit **Stock Input** an additional
    <span class="title-ref">$2</span> to account for the **Price
    Difference**.
3.  Credit **Stock Valuation** <span class="title-ref">$12</span>
    because the item is leaving the stock.

![2 dollar difference expensed in Price Difference
account.](avg_price_valuation/expensing-price-difference-account.png)

Once the vendor's refund is received,

1.  Credit **Stock Input** account <span class="title-ref">$10</span> to
    reconcile the price of the table.
2.  Debit **Accounts Payable** <span class="title-ref">$10</span> to
    have the accountants collect and register the payment in their
    journal.

![Return to get 10 dollars
back.](avg_price_valuation/return-credit-note.png)


---
## File: ./content/applications/finance/accounting/others/analytic/timesheets.md

# Track costs of human resources with timesheets

Human resource of course has a cost. It is interesting to see how much a
particular contract costs the company in term of human power in relation
to the invoiced amounts.

We will take the following example: Our two employees **Harry Potter**
and **Cedric Digory** both work on a **Consultancy pack** for our
customer **Smith\&Co**. Harry is paid 18€ p.h. and Cedric's salary is
12€ p.h. We would like to track their timesheet costs within the
accounting app, and compare them with the revenue of the consultancy
service.

## Configuration

First, install the three applications necessary to use this
functionality, namely **Accounting**, **Sales** and **Timesheet**. Enter
the apps module name and install them.

![image](timesheets/timesheets14.png)

![image](timesheets/timesheets05.png)

![image](timesheets/timesheets11.png)

Next you will need to enable analytical accounting. To do so enter the
**Accounting app**. Select `Configuration --> Settings` and tick the
**Analytic accounting** option (see picture below)

![image](timesheets/timesheets06.png)

Apply your changes.

### Create an employee

In order to check the revenue of an employee you need to have one. To
create an employee enter the **Employee** app. Select **Employees** and
create a new employee, fill in the name and the basic information.

On the employee sheet enter the **HR settings** tab. Here you are able
to specify the **Timesheet Cost** of your employee. In this case Harry
has a cost of 18 euros / hours. We will thus fill in 18 in this field.

![image](timesheets/timesheets07.png)

<div class="note">

<div class="title">

Note

</div>

If you want the employee to be able to enter timesheets he needs to be
related to a User.

</div>

Repeat the operation to create the Cedric Digory employee. Don't forget
to specify its related user and **Timesheet Costs**.

### Issue a Sales Order

We created two employees called Harry Potter and Cedric Diggory in the
**Employee** app. Both of them will work on a consultancy contract for
our customer Smith\&Co where they will point their hours on a timesheet.

We thus need to create a **sales order** with a **service** product
invoiced **based on time and material** and tracked by timesheets with
**hours** as unit of measures.

![image](timesheets/timesheets03.png)

For more information on how to create a sales order based on time and
material please see
`/applications/sales/sales/invoicing/time_materials`.

We save a Sales Order with the service product **External Consulting**.
An analytical account will automatically be generated once the **Sales
Order** is confirmed. Our employees will have to point to that account
(in this case **SO002-Smith\&Co**) in order to be able to invoice their
hours (see picture below).

![image](timesheets/timesheets10.png)

### Fill in timesheet

As an employee linked to a user, Harry can enter the **Timesheet** app
and specify his timesheets for the contract. Logged on Harry's account
we enter the **Timesheet** app and enter a detailed line pointing to the
**Analytical Account** discussed above.

Harry worked three hours on a SWOT analysis for Smith\&Co.

![image](timesheets/timesheets01.png)

In the meantime, Cedric discussed businesses needs with the customer for
1 hour and specified it as well in his personal timesheet, pointing as
well on the **Analytic Account**.

In the **Sales Order** we notice that the delivered amounts of hours is
automatically computed (see picture below).

![image](timesheets/timesheets02.png)

### Analytic accounting

Thanks to analytic accounts we are able to have an overview of HR cost
and revenues. All the revenues and cost of this transactions have been
registered in the **SO002-Smith\&Co** account.

We can use two methods to analyze this situation.

#### Without filters

If we pointed all our costs and revenues of the project on the correct
analytical account we can easily retrieve the cost and revenues related
to this analytical account. Enter the *Accounting* app, select `Adviser
--> Analytic Accounts --> Open Charts`.

Note : you can specify a period for **Analysis**. If you want to open
the current situation you should keep the fields empty. We can already
note the credit and debit balance of the account.

![image](timesheets/timesheets12.png)

If we click on the account a special button is provided to have the
details of cost and revenues (see picture below).

![image](timesheets/timesheets13.png)

Click the button **Cost/Revenue** to have an overview of cost and
revenues with the corresponding description.

#### With filters

We can thus filter this information from the **Analytic Entries**.

Enter the **Accounting** app, and click on `Adviser --> Analytic
Entries`. In this menu we have several options to analyse the human
resource cost.

1.  We filter on the **Analytic account** so we can see the cost and
    revenues of the project. Add a custom **Filter** where the
    **Analytic Account** contains the **Sales Order** number.
    
    ![image](timesheets/timesheets04.png)
    
    In the results we see timesheets activities and invoiced lines with
    the corresponding costs and revenues.
    
    ![image](timesheets/timesheets09.png)

2.  We can group the different analytical accounts together and check
    their respective revenues. Simply group by **Analytic account** and
    select the **Graph view** to have a clear overview.
    
    ![image](timesheets/timesheets08.png)


---
## File: ./content/applications/finance/accounting/others/analytic/usage.md

# Analytic account use cases

The analytic accounting can be used for several purposes:

  - analyse costs of a company
  - reinvoice time to a customer
  - analyse performance of a service or a project

To manage analytic accounting, you have to activate it in `Configuration
--> Settings`:

![image](usage/usage01.png)

To illustrate analytic accounts clearly, you will follow three use
cases, each in one of three different types of company:

1.  Industrial company: Costs Analyse
2.  Law Firm: reinvoice spent hours
3.  IT/Services Company: performance analysis

## Case 1: Industrial company: Costs Analyse

In industry, you will often find analytic charts of accounts structured
into departments and products the company itself is built on.

The objective is to examine the costs, sales and margins by
department/resources and by product. The first level of the structure
comprises the different departments, and the lower levels represent the
product ranges the company makes and sells.

**Analytic Chart of Accounts for an Industrial Manufacturing Company**:

1.  Marketing Department
2.  Commercial Department
3.  Administration Department
4.  Production Range 1
5.  Production Range 2

In daily use, it is useful to mark the analytic account on each purchase
invoice. When the invoice is approved, it will automatically generate
the entries for both the general and the corresponding analytic
accounts. For each entry on the general accounts, there is at least one
analytic entry that allocates costs to the department which incurred
them.

Here is a possible breakdown of some general accounting entries for the
example above, allocated to various analytic accounts:

| **General accounts**                |             |           |            |  | **Analytic accounts** |           |
| ----------------------------------- | ----------- | --------- | ---------- |  | --------------------- | --------- |
| **Title**                           | **Account** | **Debit** | **Credit** |  | **Account**           | **Value** |
| Purchase of Raw Material            | 2122        | 1500      |            |  | Production Range 1    | \-1 500   |
| Subcontractors                      | 2122        | 450       |            |  | Production Range 2    | \-450     |
| Credit Note for defective materials | 2122        |           | 200        |  | Production Range 1    | 200       |
| Transport charges                   | 2122        | 450       |            |  | Production Range 1    | \-450     |
| Staff costs                         | 2121        | 10000     |            |  | Marketing             | \-2 000   |
|                                     |             |           |            |  | Commercial            | \-3 000   |
|                                     |             |           |            |  | Administrative        | \-1 000   |
|                                     |             |           |            |  | Production Range 1    | \-2 000   |
|                                     |             |           |            |  | Production Range 2    | \-2 000   |
| PR                                  | 2122        | 450       |            |  | Marketing             | \-400     |

The analytic representation by department enables you to investigate the
costs allocated to each department in the company. The analytic chart of
accounts shows the distribution of the company's costs using the example
above:

![image](usage/usage02.png)

In this example of a hierarchical structure in Odoo, you can analyse not
only the costs of each product range, but also the costs of the whole
production. A report that relates both general accounts and analytic
accounts enables you to get a breakdown of costs within a given
department.

![image](usage/usage03.png)

The examples above are based on a breakdown of the costs of the company.
Analytic allocations can be just as effective for sales. That gives you
the profitability (sales - costs) of different departments.

This analytic representation by department is generally used by trading
companies and industries.

A variantion of this, is not to break it down by sales and marketing
departments, but to assign each cost to its corresponding product range.
This will give you an analysis of the profitability of each product
range.

Choosing one over the other depends on how you look at your marketing
effort. Is it a global cost allocated in some general way, or is each
product range responsible for its own marketing costs?

## Case 2: Law Firm: costs of human resources?

Law firms generally adopt management by case, where each case represents
a current client file. All of the expenses and products are then
attached to a given file/analytic account.

A principal preoccupation of law firms is the invoicing of hours worked,
and the profitability by case and by employee.

Mechanisms used for encoding the hours worked will be covered in detail
in timesheet documentation. Like most system processes, hours worked are
integrated into the analytic accounting. In the employee form, specify
the cost of the employee. The hourly charge is a function of the
employee's cost.

So a law firm will opt for an analytic representation which reflects the
management of the time that employees work on the different customer
cases.

Billing for the different cases is a bit unusual. The cases do not match
any entry in the general account nor do they come from purchase or sales
invoices. They are represented by the various analytic operations and do
not have exact counterparts in the general accounts. They are calculated
on the basis of the hourly cost per employee.

At the end of the month when you pay salaries and benefits, you
integrate them into the general accounts but not in the analytic
accounts, because they have already been accounted for in billing each
account. A report that relates data from the analytic and general
accounts then lets you compare the totals, so you can readjust your
estimates of hourly cost per employee depending on the time actually
worked.

The following table shows an example of different analytic entries that
you can find for your analytic account:

| **Title**                    | **Account**    | **Amount** |  | **General Account**      | **Debit** | **Credit** |
| ---------------------------- | -------------- | ---------- |  | ------------------------ | --------- | ---------- |
| Study the file (1 h)         | Case 1.1       | \-15       |  |                          |           |            |
| Search for information (3 h) | Case 1.1       | \-45       |  |                          |           |            |
| Consultation (4 h)           | Case 2.1       | \-60       |  |                          |           |            |
| Service charges              | Case 1.1       | 280        |  | 705 – Billing services   |           | 280        |
| Stationery purchase          | Administrative | \-42       |  | 601 – Furniture purchase | 42        |            |
| Fuel Cost -Client trip       | Case 1.1       | \-35       |  | 613 – Transports         | 35        |            |
| Staff salaries               |                |            |  | 6201 – Salaries          |           | 3 000      |

Such a structure allows you to make a detailed study of the
profitability of various transactions.

For more details about profitablity, please read the following document:
`timesheets`

But analytical accounting is not limited to a simple analysis of the
profitability of different customer. The same data can be used for
automatic recharging of the services to the customer at the end of the
month. To invoice customers, just link the analytic account to a sale
order and sell products that manage timesheet or expenses .

## Case 3: IT Services Company: performance analysis

Most IT service companies face the following problems:

  - project planning,
  - invoicing, profitability and financial follow-up of projects,
  - managing support contracts.

To deal with these problems, you would use an analytic chart of accounts
structured by project and by sale order.

The management of services, expenditures and sales is similar to that
presented above for lawyers. Invoicing and the study of profitability
are also similar.

But now look at support contracts. These contracts are usually limited
to a prepaid number of hours. Each service posted in the analytic
accounts shows the remaining hours of support. To manage support
contracts, you would create a product configured to invoice on order and
link the sale order to an analytic account

In Odoo, each analytic line lists the number of units sold or used, as
well as what you would usually find there – the amount in currency units
(USD or GBP, or whatever other choice you make). So you can sum the
quantities sold and used on each sale order to determine whether any
hours of the support contract remain.

## Conclusion

Analytic accounting helps you to analyse costs and revenues whatever the
use case. You can sell or purchase services, track time or analyse the
production performance.

Analytic accounting is flexible and easy to use through all Odoo
applications (sales, purchase, timesheet, production, invoice, …).


---
## File: ./content/applications/finance/accounting/others/analytic/purchases_expenses.md

# Track costs of purchases, expenses, subcontracting

## Overview

Thanks to analytical accounting we can track costs of purchases,
expenses and subcontracting in the accounting module.

We'll take the following example. We sold a consulting package for a
customer. The package is all inclusive meaning no extra cost can be
added. We would however like to follow which cost were attached to this
transaction as we need to pay for purchases, expenses, and
subcontracting costs related to the project.

## Configuration

The following modules needs to be installed to track cost. Enter the app
module and install the following apps:

|                                             |                                             |                                             |
| ------------------------------------------- | ------------------------------------------- | ------------------------------------------- |
| ![image](purchases_expenses/purchase01.png) | ![image](purchases_expenses/purchase02.png) | ![image](purchases_expenses/purchase03.png) |

Please note that the applications provided by these apps only allows us
to **track** the costs. We won't be able to automatically re invoice
those costs to our customers. To track and **re invoice costs** you
should install the Sales management app as well.

![image](purchases_expenses/purchase04.png)

### Enable Analytical accounting

Next step is to activate the analytical accounting. In the accounting
app, select `Configuration --> Settings` and thick the Analytic
accounting box.

![image](purchases_expenses/purchase05.png)

Moreover, scroll down and tick the **Analytic accounting for purchases**
box.

![image](purchases_expenses/purchase06.png)

Don't forget to save your changes.

## Create an Analytical account.

First of all you should create an Analytical account on which you can
point all your expenses. Enter the accounting app, select `Configuration
--> Analytic Accounts`. Create a new one. In this case we will call it
"consulting pack" for our customer Smith\&Co.

![image](purchases_expenses/purchase07.png)

We will point all our costs to this account to keep track of them.

## Record an expense

We start by booking an expense. Our IT technician had to take a train to
go see our customer. He paid for his ticket himself.

### Create an expense product

We first need to create an expense product. Enter the **Expense**
module, Click on `Configuration --> Expense Products`. Create a new
product called Train ticket and set the cost price to 15.50 euros. Make
sure the **Can be expensed** box is ticked.

![image](purchases_expenses/purchase08.png)

### Book the expense

Enter the Expense module, click on `My expenses --> Create`. Select the
Train ticket product and link it to the analytical account discussed
above.

![image](purchases_expenses/purchase09.png)

Submit to manager and wait for the manager to approve and post the
journal entries.

## Create a Purchase Order linked to the analytical account

### Purchase Product

We also need to buy a software for our customers. In the purchase app
create a purchase order for the software product. Within the line we can
link the product's cost with the analytical account. Specify the order
line and select the correct analytical account. Confirm the sale.

![image](purchases_expenses/purchase10.png)

Accept the delivery and enter the invoice. Once the invoice is entered
the cost price (**Vendor Price** field) will be booked in the analytical
account.

### Subcontracting

The purchase module can be used in the same way as seen previously to
handle subcontracting. if we purchase a service from another company we
can re invoice this cost by linking the purchase order line to the
correct analytical account. We simply need to create the correct vendors
product.

<div class="note">

<div class="title">

Note

</div>

You can also track cost with timesheets, see: `timesheets`

</div>

## Track costs in accounting

Now that everything is booked and points to the analytical account.
Simply open it to check the costs related to that account.

Enter the accounting module, click on `Advisers --> Analytic Accounts
--> Open Charts`.

Select "consulting pack - Smith" and click on the cost and revenue
button to have an overview of all cost linked to the account.

![image](purchases_expenses/purchase11.png)

<div class="note">

<div class="title">

Note

</div>

If you would like to have the revenue as well you should invoice the
Consulting Pack in the Invoice menu and link the invoice line to this
same analytical account.

</div>


---
## File: ./content/applications/finance/accounting/taxation.md

  - nosearch

# Taxation

<div class="toctree" data-titlesonly="">

taxation/taxes taxation/fiscal\_year

</div>


---
## File: ./content/applications/finance/accounting/taxation/taxes.md

  - nosearch

# Taxes

<div class="toctree" data-titlesonly="">

taxes/taxes taxes/default\_taxes taxes/fiscal\_positions
taxes/eu\_distance\_selling taxes/avatax taxes/taxcloud taxes/retention
taxes/B2B\_B2C taxes/cash\_basis\_taxes taxes/vat\_validation

</div>


---
## File: ./content/applications/finance/accounting/taxation/fiscal_year.md

  - nosearch

# Fiscal year

<div class="toctree" data-titlesonly="">

fiscal\_year/fiscal\_year fiscal\_year/close\_fiscal\_year

</div>


---
## File: ./content/applications/finance/accounting/taxation/taxes/eu_distance_selling.md

# EU intra-community distance selling

**Distance sales within the European Union** include cross-border sales
of goods and services to a private consumer (B2C) in another EU Member
State when the seller doesn't meet face-to-face with the customer.
Organizations must ensure that the VAT on distance sales is paid to the
Member State in which the goods or services are delivered.

<div class="note">

<div class="title">

Note

</div>

This remains true even if your organization is located outside of the
European Union.

</div>

While this regulation mainly applies to `eCommerce
<../../../../websites/ecommerce>` sales to private EU consumers, it is
also valid for mail order sales and telesales.

The Union **One-Stop Shop (OSS)** is an online portal where businesses
can register for the OSS and declare their intra-community distance
sales. Each EU member state integrates an online OSS portal.

The **EU intra-community Distance Selling** feature helps your
organization comply with this regulation by creating and configuring new
`fiscal positions <fiscal_positions>` and `taxes <taxes>` based on your
company's country.

<div class="seealso">

\- [European Commission: OSS | Taxation and Customs
Union](https://ec.europa.eu/taxation_customs/business/vat/oss_en)

</div>

## Configuration

Go to `Accounting/Invoicing --> Settings --> Taxes`, then enable **EU
intra-community Distance Selling** (or **EU Digital Goods VAT** if you
created your database before July 1, 2021), and *Save*.

![EU intra-community Distance Selling feature in Odoo Accounting
settings](eu_distance_selling/enable-feature.png)

<div class="important">

<div class="title">

Important

</div>

Please `upgrade the module <general/upgrade>`
<span class="title-ref">l10n\_eu\_service</span> if you already
installed it before **July 1, 2021**, or if you activated the feature
**EU Digital Goods VAT** in the Accounting settings. Then, make sure to
`refresh the tax mapping
<eu_distance_selling/refresh-mapping>`.

</div>

## Fiscal Positions and Taxes

Once enabled, the feature automatically creates all the necessary taxes
and fiscal positions needed for each EU member state, based on your
company's country.

We highly recommend checking that the proposed mapping is suitable for
the products and services you sell before using it.

### Refresh tax mapping

Whenever you add or modify taxes, you can update automatically your
fiscal positions.

To do so, go to `Accounting/Invoicing --> Settings --> Taxes --> EU
intra-community
Distance Selling` and click on the *Refresh tax mapping* button.

<div class="seealso">

\- `fiscal_positions` - `taxes`

</div>


---
## File: ./content/applications/finance/accounting/taxation/taxes/retention.md

# Manage withholding taxes

A withholding tax, also called a retention tax, is a government
requirement for the payer of a customer invoice to withhold or deduct
tax from the payment, and pay that tax to the government. In most
jurisdictions, withholding tax applies to employment income.

With normal taxes, the tax is added to the subtotal to give you the
total to pay. As opposed to normal taxes, withholding taxes are deducted
from the amount to pay, as the tax will be paid by the customer.

As, an example, in Colombia you may have the following invoice:

![image](retention/retention03.png)

In this example, the **company** who sent the invoice owes $20 of taxes
to the **government** and the **customer** owes $10 of taxes to the
**government**.

## Configuration

In Odoo, a withholding tax is defined by creating a negative tax. For a
retention of 10%, you would configure the following tax (accessible
through `Configuration --> Taxes`):

![image](retention/retention04.png)

In order to make it appear as a retention on the invoice, you should set
a specific tax group **Retention** on your tax, in the **Advanced
Options** tab.

![image](retention/retention02.png)

Once the tax is defined, you can use it in your products, sales order or
invoices.

<div class="tip">

<div class="title">

Tip

</div>

If the retention is a percentage of a regular tax, create a Tax with a
**Tax Computation** as a **Tax Group** and set the two taxes in this
group (normal tax and retention).

</div>

## Applying retention taxes on invoices

Once your tax is created, you can use it on customer forms, sales order
or customer invoices. You can apply several taxes on a single customer
invoice line.

![image](retention/retention01.png)

<div class="note">

<div class="title">

Note

</div>

When you see the customer invoice on the screen, you get only a **Taxes
line** summarizing all the taxes (normal taxes & retentions). But when
you print or send the invoice, Odoo does the correct grouping amongst
all the taxes.

</div>

The printed invoice will show the different amounts in each tax group.

![image](retention/retention03.png)

<div class="seealso">

  - `taxes`

</div>


---
## File: ./content/applications/finance/accounting/taxation/taxes/taxes.md

# Taxes

There are numerous types of **taxes**, and their application varies
greatly, depending mostly on your company's localization. To make sure
they are recorded with accuracy, Odoo's tax engine supports all kinds of
uses and computations.

## Activate Sales Taxes from the List view

As part of your `fiscal localization package
<fiscal_localizations/packages>`, most of your country's sales taxes are
already preconfigured on your database. However, only a few of them are
activated by default, so that you can activate only the ones relevant
for your business.

To activate Sale Taxes, go to `Accounting --> Configuration --> Taxes`
and use the *Activate* toggle button to activate or deactivate a tax.

![Activate pre-configured taxes in Odoo
Accounting](taxes/taxes-list.png)

## Configuration

To edit or create a **Tax**, go to `Accounting --> Configuration -->
Taxes` and open a tax or click on *Create*.

![Edition of a tax in Odoo Accounting](taxes/taxes-edit.png)

<div id="taxes/labels">

<div class="important">

<div class="title">

Important

</div>

Taxes have three different labels, each one having a specific use. Refer
to the following table to see where they are displayed.

| `Tax Name
<taxes/name>` | `Label on Invoice
<taxes/label-invoices>` | `Tax Group
<taxes/tax-group>`               |
| ----------------------- | ----------------------------------------- | ------------------------------------------- |
| Back end                | *Taxes* column on exported invoices       | Above the *Total* line on exported invoices |

</div>

</div>

### Basic Options

#### Tax Name

The **Tax Name** as you want to display it for backend users. This is
the `label
<taxes/labels>` you see while editing Sales Orders, Invoices, Products,
etc.

#### Tax Computation

  - **Group of Taxes**
    
    The tax is a combination of multiple sub-taxes. You can add as many
    taxes you want, in the order you want them to be applied.
    
    <div class="important">
    
    <div class="title">
    
    Important
    
    </div>
    
    Make sure that the tax sequence is correct, as the order in which
    they are may impact the taxes' amounts computation, especially if
    one of the taxes `affects the base of the
    subsequent ones <taxes/base-subsequent>`.
    
    </div>

  - **Fixed**
    
    The tax has a fixed amount in the default currency. The amount
    remains the same, regardless of the Sales Price.
    
    For example, a product has a Sales Price of $1000, and we apply a
    *$10 fixed* tax. We then have:
    
    | Product's Sales Price | Price without tax | Tax | Total    |
    | --------------------- | ----------------- | --- | -------- |
    | 1,000                 | 1,000             | 10  | 1,010.00 |
    

  - **Percentage of Price**
    
    The *Sales Price* is the taxable basis: the tax's amount is computed
    by multiplying the Sales Price by the tax's percentage.
    
    For example, a product has a Sales Price of $1000, and we apply a
    *10% of Price* tax. We then have:
    
    | Product's Sales Price | Price without tax | Tax | Total    |
    | --------------------- | ----------------- | --- | -------- |
    | 1,000                 | 1,000             | 100 | 1,100.00 |
    

  - **Percentage of Price Tax Included**
    
    The *Total* is the taxable basis: the tax's amount is a percentage
    of the Total.
    
    For example, a product has a Sales Price of $1000, and we apply a
    *10% of Price Tax Included* tax. We then have:
    
    | Product's Sales Price | Price without tax | Tax    | Total    |
    | --------------------- | ----------------- | ------ | -------- |
    | 1,000                 | 1,000             | 111.11 | 1,111.11 |
    

#### Active

Only **Active** taxes can be added to new documents.

<div class="important">

<div class="title">

Important

</div>

It is not possible to delete taxes that have already been used. Instead,
you can deactivate them to prevent future use.

</div>

<div class="note">

<div class="title">

Note

</div>

This field can be modified from the *List View*. See `above
<taxes/list_activation>` for more information.

</div>

#### Tax Scope

The **Tax Scope** determines the tax's application, which also restricts
where it is displayed.

  - **Sales**: Customer Invoices, Product's Customer Taxes, etc.
  - **Purchase**: Vendor Bills, Product's Vendor Taxes, etc.
  - **None**

<div class="tip">

<div class="title">

Tip

</div>

You can use **None** for taxes that you want to include in a `Group of
Taxes
<taxes/computation>` but that you don't want to list along with other
Sales or Purchase taxes.

</div>

### Definition tab

Allocate with precision the amount of the taxable basis or percentages
of the computed tax to multiple accounts and Tax Grids.

![Allocate tax amounts to the right accounts and tax
grids](taxes/taxes-definition.png)

  - **Based On**:
      - Base: the price on the invoice line
      - % of tax: a percentage of the computed tax.
  - **Account**: if defined, an additional Journal Item is recorded.
  - **Tax Grids**: used to generate `Tax Reports
    <../../reporting/declarations/tax_returns>` automatically, according
    to your country's regulations.

### Advanced Options tab

#### Label on Invoices

The label of the tax, as displayed on each invoice line in the **Taxes**
column. This is the `label <taxes/labels>` visible to *front end* users,
on exported invoices, on their Customer Portals, etc.

![The Label on Invoices is displayed on each invoice
line](taxes/taxes-invoice-label.png)

#### Tax Group

Select to which **Tax Group** the tax belongs. The Tax Group name is the
`label
<taxes/labels>` displayed above the *Total* line on exported invoices,
and the Customer Portals.

Tax groups include different iterations of the same tax. This can be
useful when you must record differently the same tax according to
`Fiscal Positions <fiscal_positions>`.

![The Tax Group name is different from the Label on
Invoices](taxes/taxes-invoice-tax-group.png)

In the example above, we see a 0% tax for Intra-Community customers in
Europe. It records amounts on specific accounts and with specific tax
grids. Still, to the customer, it is a 0% tax. That's why the `Label on
the Invoice <taxes/label-invoices>` indicates *0% EU*, and the Tax Group
name, above the *Total* line, indicates *0%*.

#### Include in Analytic Cost

With this option activated, the tax's amount is assigned to the same
**Analytic Account** as the invoice line.

#### Included in Price

With this option activated, the total (including the tax) equals the
**Sales Price**.

`Total = Sales Price = Computed Tax-Excluded price + Tax`

For example, a product has a Sales Price of $1000, and we apply a *10%
of Price* tax, which is *included in the price*. We then have:

| Product's Sales Price | Price without tax | Tax  | Total    |
| --------------------- | ----------------- | ---- | -------- |
| 1,000                 | 900.10            | 90.9 | 1,000.00 |

<div class="note">

<div class="title">

Note

</div>

If you need to define prices accurately, both tax-included and
tax-excluded, please refer to the following documentation: `B2B_B2C`.

</div>

<div class="note">

<div class="title">

Note

</div>

\- **Invoices**: By default, the Line Subtotals displayed on your
invoices are *Tax-Excluded*. To display *Tax-Included* Line Subtotals,
go to `Accounting --> Configuration -->
Settings --> Customer Invoices`, and select *Tax-Included* in the **Line
Subtotals Tax Display** field, then click on *Save*. - **eCommerce**: By
default, the prices displayed on your eCommerce website are
*Tax-Excluded*. To display *Tax-Included* prices, go to `Website -->
Configuration --> Settings
--> Pricing`, and select *Tax-Included* in the **Product Prices** field,
then click on *Save*.

</div>

#### Affect Base of Subsequent Taxes

With this option, the total tax-included becomes the taxable basis for
the other taxes applied to the same product.

You can configure a new `Group of Taxes <taxes/computation>` to include
this tax, or add it directly to a product line.

![The eco-tax is taken into the basis of the 21% VAT
tax](taxes/taxes-subsequent-line.png)

<div class="warning">

<div class="title">

Warning

</div>

The order in which you add the taxes on a product line has no effect on
how amounts are computed. If you add taxes directly on a product line,
only the tax sequence determines the order in which they are applied.

To reorder the sequence, go to `Accounting --> Configuration --> Taxes`,
and drag and drop the lines with the handles next to the tax names.

![The taxes' sequence in Odoo determines which tax is applied
first](taxes/taxes-list-sequence.png)

</div>

<div class="seealso">

  - `fiscal_positions`
  - `B2B_B2C`
  - `taxcloud`
  - `../../reporting/declarations/tax_returns`

</div>


---
## File: ./content/applications/finance/accounting/taxation/taxes/cash_basis_taxes.md

# Manage cash basis taxes

The cash basis taxes are due when the payment has been done and not at
the validation of the invoice (as it is the case with standard taxes).
Reporting your income and expenses to the administration based on the
cash basis method is legal in some countries and under some conditions.

Example : You sell a product in the 1st quarter of your fiscal year and
receive the payment the 2nd quarter of your fiscal year. Based on the
cash basis method, the tax you have to pay to the administration is due
for the 2nd quarter.

## How to configure cash basis taxes ?

You first have to activate the setting in `Accounting --> Configuration
--> Settings --> Allow Tax Cash Basis`. You will be asked to define the
Tax Cash Basis Journal.

![image](cash_basis_taxes/cash_basis_taxes01.png)

Once this is done, you can configure your taxes in `Accounting -->
Configuration --> Taxes`. At first set the proper transitional accounts
to post taxes until you register the payment.

![image](cash_basis_taxes/cash_basis_taxes02.png)

In the *Advanced Options* tab you will turn *Tax Due* to *Based on
Payment*. You will then have to define the *Tax Received* account in
which to post the tax amount when the payment is received and the *Base
Tax Received Account* to post the base tax amount for an accurate tax
report.

![image](cash_basis_taxes/cash_basis_taxes03.png)

## What is the impact of cash basis taxes in my accounting ?

Let’s take an example. You make a sale of $100 with a 15% cash basis
tax. When you validate the customer invoice, the following entry is
created in your accounting:

| Customer Invoices Journal |                           |
| ------------------------- | ------------------------- |
| **Debit**                 | **Credit**                |
| Receivables $115          |                           |
|                           | Temporary Tax Account $15 |
|                           | Income Account $100       |

A few days later, you receive the payment:

| Bank Journal |                  |
| ------------ | ---------------- |
| **Debit**    | **Credit**       |
| Bank $115    |                  |
|              | Receivables $115 |

When you reconcile the invoice and the payment, this entry is generated:

| Tax Cash Basis Journal    |                          |
| ------------------------- | ------------------------ |
| **Debit**                 | **Credit**               |
| Temporary Tax Account $15 |                          |
|                           | Tax Received Account $15 |
| Income Account $100       |                          |
|                           | Income Account $100      |

<div class="tip">

<div class="title">

Tip

</div>

The last two journal items are neutral but they are needed to insure
correct tax reports in Odoo with accurate base tax amounts. We advise to
use a default revenue account. The balance of this account will then
always be at zero.

</div>


---
## File: ./content/applications/finance/accounting/taxation/taxes/avatax.md

# Avatax integration

Avatax is a tax calculation provider that can be integrated in Odoo.

## Credential configuration

To integrate Avatax with Odoo, go to `Accounting --> Configuration -->
Settings -->
Taxes` and add your Avatax credentials in the `Avatax` section.

<div class="tip">

<div class="title">

Tip

</div>

If you do not yet have credentials, click on `How to Get Credentials`.

</div>

![Configure Avatax settings](avatax/avatax-configuration-settings.png)

## Tax mapping

The Avatax integration is available on Sale Orders and Invoices with the
included Avatax fiscal position.

Before using the integration, specify an `Avatax Category` on the
product categories.

![Specify Avatax Category on products](avatax/avatax-category.png)

Avatax Categories may be overridden or set on individual products as
well.

![Override product categories as
needed](avatax/override-avatax-product-category.png)

## Address validation

Manually validate customer addresses by clicking the `Validate address`
link in the customer form view.

![Validate customer addresses](avatax/validate-customer-address.png)

If preferred, choose to keep the newly validated address or the original
address in the wizard that pops up.

![Address validation wizard](avatax/choose-customer-address.png)

## Tax calculation

Automatically calculate taxes on Odoo quotations and invoices with
Avatax by confirming the documents. Alternatively, calculate the taxes
manually by clicking the `Compute taxes
using Avatax` button while these documents are in draft mode.

Use the `Avalara Code` field that's available on customers, quotations,
and invoices to cross-reference data in Odoo and Avatax.

<div class="seealso">

\- `fiscal_positions`

</div>


---
## File: ./content/applications/finance/accounting/taxation/taxes/fiscal_positions.md

# Fiscal positions (tax and account mapping)

Default taxes and accounts are set on products and customers to create
new transactions on the fly. However, you might have to use different
taxes and record the transactions on different accounts, according to
your customers' and providers' localizations and business types.

**Fiscal Positions** allow you to create *sets of rules* to
automatically adapt the taxes and the accounts used for a transaction.

![Example: Belgian to Intra-Community tax mapping with Fiscal Positions
in Odoo
Accounting](fiscal_positions/fiscal-positions-intra-community.png)

They can be applied in various ways:

  - `automatically applied, based on some rules
    <fiscal_positions/automatic>`
  - `manually applied on a transaction <fiscal_positions/partner>`
  - `assigned to a partner, on its contact form
    <fiscal_positions/transaction>`

<div class="note">

<div class="title">

Note

</div>

A few Fiscal Positions are already preconfigured on your database, as
part of your `fiscal
localization package <fiscal_localizations/packages>`.

</div>

## Configuration

### Tax and Account Mapping

To edit or create a Fiscal Position, go to `Accounting --> Configuration
--> Fiscal
Positions`, and open the entry you want to modify or click on *Create*.

The mapping of taxes and accounts is based on the default taxes and
accounts defined in the products' forms.

  - To map to another tax or account, fill out the right column (**Tax
    to Apply**/**Account to Use Instead**).
  - To remove a tax, rather than replacing it with another, leave the
    field **Tax to Apply** empty.
  - To replace a tax with multiple other taxes, add multiple lines with
    the same **Tax on Product**.

<div class="note">

<div class="title">

Note

</div>

The mapping only works with *active* taxes. Therefore, make sure they
are active by going to `Accounting --> Configuration --> Taxes`.

</div>

### Automatic application

You can configure your Fiscal Positions to be applied automatically,
following a set of conditions.

To do so, open the Fiscal Position you want to modify and click on
**Detect Automatically**. You can configure a few conditions:

  - **VAT Required**: The VAT number *must* be indicated in the
    customer's contact form.
  - **Country Group** / **Country**: The Fiscal Position is applied to
    these countries.

![Example of settings to apply a Fiscal Position
automatically](fiscal_positions/fiscal-positions-automatic.png)

<div class="note">

<div class="title">

Note

</div>

Taxes on **eCommerce orders** are automatically updated once the visitor
has logged in or filled out their billing details.

</div>

<div class="important">

<div class="title">

Important

</div>

The Fiscal Positions' **sequence** - the order in which they are
arranged - defines which Fiscal Position to apply if the conditions are
met in multiple Fiscal Positions.

For example, if the first Fiscal Position targets *country A*, and the
second Fiscal Position targets a *Country Group* that also comprises
*country A*, only the first Fiscal Position will be applied to customers
from *country A*.

</div>

## Application

### Assign a Fiscal Position to a partner

You can manually define which Fiscal Position must be used by default
for a specific partner.

To do so, open the partner's contact form, go to the **Sales &
Purchase** tab, edit the **Fiscal Position** field, and click on *Save*.

![Selection of a Fiscal Position on a Sales Order / Invoice / Bill in
Odoo Accounting](fiscal_positions/fiscal-positions-partner.png)

### Choose Fiscal Positions manually on Sales Orders, Invoices, and Bills

To manually select which Fiscal Position to use for a new Sales Order,
Invoice, or Bill, go to the **Other Info** tab and select the right
**Fiscal Position** *before* adding product lines.

![Selection of a Fiscal Position on a Sales Order / Invoice / Bill in
Odoo Accounting](fiscal_positions/fiscal-positions-transaction.png)

<div class="seealso">

  - `taxes`
  - `taxcloud`
  - `B2B_B2C`

</div>


---
## File: ./content/applications/finance/accounting/taxation/taxes/B2B_B2C.md

# Manage prices for B2B (tax excluded) and B2C (tax included)

When working with consumers, prices are usually expressed with taxes
included in the price (e.g., in most eCommerce). But, when you work in a
B2B environment, companies usually negotiate prices with taxes excluded.

Odoo manages both use cases easily, as long as you register your prices
on the product with taxes excluded or included, but not both together.
If you manage all your prices with tax included (or excluded) only, you
can still easily do sales order with a price having taxes excluded (or
included): that's easy.

This documentation is only for the specific use case where you need to
have two references for the price (tax included or excluded), for the
same product. The reason of the complexity is that there is not a
symmetrical relationship with prices included and prices excluded, as
shown in this use case, in belgium with a tax of 21%:

  - Your eCommerce has a product at **10€ (taxes included)**
  - This would do **8.26€ (taxes excluded)** and a **tax of 1.74€**

But for the same use case, if you register the price without taxes on
the product form (8.26€), you get a price with tax included at 9.99€,
because:

  - **8.26€ \* 1.21 = 9.99€**

So, depending on how you register your prices on the product form, you
will have different results for the price including taxes and the price
excluding taxes:

  - Taxes Excluded: **8.26€ & 10.00€**
  - Taxes Included: **8.26€ & 9.99€**

<div class="note">

<div class="title">

Note

</div>

If you buy 100 pieces at 10€ taxes included, it gets even more tricky.
You will get: **1000€ (taxes included) = 826.45€ (price) + 173.55€
(taxes)** Which is very different from a price per piece at 8.26€ tax
excluded.

</div>

This documentation explains how to handle the very specific use case
where you need to handle the two prices (tax excluded and included) on
the product form within the same company.

<div class="note">

<div class="title">

Note

</div>

In terms of finance, you have no more revenues selling your product at
10€ instead of 9.99€ (for a 21% tax), because your revenue will be
exactly the same at 9.99€, only the tax is 0.01€ higher. So, if you run
an eCommerce in Belgium, make your customer a favor and set your price
at 9.99€ instead of 10€. Please note that this does not apply to 20€ or
30€, or other tax rates, or a quantity \>1. You will also make you a
favor since you can manage everything tax excluded, which is less error
prone and easier for your salespeople.

</div>

## Configuration

### Introduction

The best way to avoid this complexity is to choose only one way of
managing your prices and stick to it: price without taxes or price with
taxes included. Define which one is the default stored on the product
form (on the default tax related to the product), and let Odoo compute
the other one automatically, based on the pricelist and fiscal position.
Negotiate your contracts with customers accordingly. This perfectly
works out-of-the-box and you have no specific configuration to do.

If you can not do that and if you really negotiate some prices with tax
excluded and, for other customers, others prices with tax included, you
must:

1.  always store the default price **tax excluded** on the product form,
    and apply a tax (price excluded on the product form)
2.  create a pricelist with prices in **tax included**, for specific
    customers
3.  create a fiscal position that switches the tax excluded to a tax
    included
4.  assign both the pricelist and the fiscal position to customers who
    want to benefit to this pricelist and fiscal position

For the purpose of this documentation, we will use the above use case:

  - your product default sale price is 8.26€ tax excluded
  - but we want to sell it at 10€, tax included, in our shops or
    eCommerce website

### Setting your products

Your company must be configured with tax excluded by default. This is
usually the default configuration, but you can check your **Default Sale
Tax** from the menu `Configuration --> Settings` of the Accounting
application.

![image](B2B_B2C/price_B2C_B2B01.png)

Once done, you can create a **B2C** pricelist. You can activate the
pricelist feature per customer from the menu: `Configuration -->
Settings` of the Sale application. Choose the option **different prices
per customer segment**.

Once done, create a B2C pricelist from the menu `Configuration -->
Pricelists`. It's also good to rename the default pricelist into B2B to
avoid confusion.

Then, create a product at 8.26€, with a tax of 21% (defined as tax not
included in price) and set a price on this product for B2C customers at
10€, from the `Sales --> Products` menu of the Sales application:

![image](B2B_B2C/price_B2C_B2B02.png)

### Setting the B2C fiscal position

From the accounting application, create a B2C fiscal position from this
menu: `Configuration --> Fiscal Positions`. This fiscal position should
map the VAT 21% (tax excluded of price) with a VAT 21% (tax included in
price)

![image](B2B_B2C/price_B2C_B2B03.png)

## Test by creating a quotation

Create a quotation from the Sale application, using the `Sales -->
Quotations` menu. You should have the following result: 8.26€ + 1.73€ =
9.99€.

![image](B2B_B2C/price_B2C_B2B04.png)

Then, create a quotation but **change the pricelist to B2C and the
fiscal position to B2C** on the quotation, before adding your product.
You should have the expected result, which is a total price of 10€ for
the customer: 8.26€ + 1.74€ = 10.00€.

![image](B2B_B2C/price_B2C_B2B05.png)

This is the expected behavior for a customer of your shop.

## Avoid changing every sale order

If you negotiate a contract with a customer, whether you negotiate tax
included or tax excluded, you can set the pricelist and the fiscal
position on the customer form so that it will be applied automatically
at every sale of this customer.

The pricelist is in the **Sales & Purchases** tab of the customer form,
and the fiscal position is in the accounting tab.

Note that this is error prone: if you set a fiscal position with tax
included in prices but use a pricelist that is not included, you might
have wrong prices calculated for you. That's why we usually recommend
companies to only work with one price reference.


---
## File: ./content/applications/finance/accounting/taxation/taxes/default_taxes.md

# Default taxes

**Default Taxes** define which `taxes <taxes>` are automatically
selected when there is no other indication about which tax to use. For
example, Odoo prefills the **Taxes** field with the Default Taxes when
you create a new product or add a new line on an invoice.

![Odoo fills out the Tax field automatically according to the Default
Taxes](default_taxes/default-taxes-invoice-line.png)

<div class="important">

<div class="title">

Important

</div>

`Fiscal Positions <fiscal_positions>` take the Default Tax into account.
Therefore, if a Fiscal Position is applied to an invoice, Odoo applies
the related tax instead of the Default Taxes, as mapped in the Fiscal
Position.

</div>

## Configuration

**Default Taxes** are automatically set up according to the country
selected at the creation of your database, or when you set up a `fiscal
localization package <fiscal_localizations/packages>` for your company.

To change your **Default Taxes**, go to `Accounting --> Configuration
--> Settings
--> Taxes --> Default Taxes`, select the appropriate taxes for your
default **Sales Tax** and **Purchase Tax**, and click on *Save*.

![Define which taxes to use by default on
Odoo](default_taxes/default-taxes-configuration.png)

<div class="note">

<div class="title">

Note

</div>

Databases with multiple companies: the Default Taxes values are
company-specific.

</div>

<div class="seealso">

  - `taxes`
  - `fiscal_positions`
  - `../../../fiscal_localizations`

</div>


---
## File: ./content/applications/finance/accounting/taxation/taxes/taxcloud.md

# TaxCloud integration

TaxCloud calculates the sales tax rate in real time for every state,
city, and special jurisdiction in the United States. It keeps track of
which products are exempt from sales tax and in which states each
exemption applies.

## TaxCloud registration

Register an account on [TaxCloud.com](https://taxcloud.com/register) and
complete the setup. Once you go live, get the `TaxCloud API Keys` by
clicking on `Stores`, then `Get Details`.

![Example of a store's TaxCloud API
Keys](taxcloud/taxcloud-api-keys.png)

## Enable TaxCloud

1.  Go to `Accounting Dashboard --> Configuration --> Settings` and in
    the `Taxes` section enable `TaxCloud`.

2.  Add the store's `Login ID` under `API ID` and the store's `Key`
    under `API KEY`. Click on `Save`.

3.  Click the `Refresh` button (`🗘`) next to `Default Category` to
    import the TIC `Taxability Information Codes` product categories
    from TaxCloud. Some categories may imply specific tax rates or
    exemptions.

4.  Select a `Default Category` and `Save`. The `Default Category` is
    applied when no `TaxCloud Category` is set on your products or
    product categories, or when no product is found on an order/invoice.
    
    ![Filling in TaxCloud API Keys in
    Odoo](taxcloud/taxcloud-settings.png)

## Set TaxCloud categories on products

If you need to use more than one TIC category (i.e., the `Default
Category`), go to the product's `General Information` tab and select a
`TaxCloud Category`.

If you want to configure multiple products simultaneously, ensure they
share the same `Product Category` and click on the external link button
(`🡕`) to set a `TaxCloud Category` on the `Product Category` instead.

<div class="note">

<div class="title">

Note

</div>

If you set a `TaxCloud Category` on a product and another on its
`Product
Category`, Odoo only considers the `TaxCloud Category` found on the
product itself.

A `TaxCloud Category` set on a **parent product category** does not
apply to its **child product categories**. For example, if you set
`TaxCloud Category` on the *All* `Product Category`, it is not applied
to the *All/Sales* `Product Category`.

</div>

<div class="important">

<div class="title">

Important

</div>

Make sure your company address is complete, including the state and the
ZIP code. Go to `Settings --> Companies: Update Info` to open and edit
your company address.

</div>

## Automatically post taxes in the correct tax payable account

To make sure the new taxes generated by the TaxCloud integration are
created with the correct **Tax Payable** account, create a
**user-defined default**. This process should be repeated for each one
of your companies that uses TaxCloud.

<div class="warning">

<div class="title">

Warning

</div>

A user-defined default impacts all records at creation. It means that
**every** new tax is set up to record income in the specified Tax
Payable account unless the tax is manually edited to specify a different
income account (or if another user-defined default takes precedence).

</div>

To do so, go to `Accounting Dashboard --> Configuration --> Accounting:
Chart of
Accounts`, find the company's `Tax Payable` account, and click on
`Setup`. Take note of the number after
<span class="title-ref">id=</span> in the URL string; it is the **Tax
Payable account ID** and will be used later.

![Example of Tax Payable account id in the URL
string](taxcloud/tax-payable-id.png)

Activate the `developer mode <developer-mode>`, then go to `Settings -->
Technical --> Actions: User-defined Defaults` and click on `Create`.

Click on `Field` drop-down menu and then on `Search More...`.

![User-defined Defaults Field
search](taxcloud/user-defaults-search-more.png)

Use the search bar to filter for the `Tax Repartition Line` model, and
use it a second time to filter for the `Account` field. Select the line
with `Tax Repartition
Line` under the `Model` column.

![Searching for the Tax Repartition Line model and Account
field](taxcloud/user-defaults-search-filters.png)

Once you are back to the `User-defined Defaults` creation, enter the
**Tax Payable account ID** you took note of earlier under the `Default
Value (JSON format)` field.

Select the company for which this configuration should apply under the
`Company` field and click `Save`.

![Example of a User-defined Defaults
configuration](taxcloud/user-defaults-complete-configuration.png)

## Automatically detect the fiscal position

Sales taxes are calculated in Odoo based on `fiscal positions
<fiscal_positions>`. A fiscal position for the United States is created
when enabling TaxCloud.

You can configure Odoo to automatically detect to which customers the
fiscal position should be applied. To do so, go to `Accounting Dashboard
--> Configuration --> Accounting:
Fiscal Positions` and select `Automatic Tax Mapping (TaxCloud)`. Enable
`Detect
Automatically` and then `Save`.

![Detect Automatically setting on the TaxCloud fiscal
position](taxcloud/fiscal-position-detect.png)

Now, this fiscal position is automatically set on any order or invoice
if the customer country is *United States*. This triggers the automated
tax computation.

<div class="note">

<div class="title">

Note

</div>

To get the sales taxes on a sales order, confirm it or click the `Update
Taxes` button next to `Add Shipping`.

</div>

## Interaction with coupons and promotions

If you use the **Coupon** or **Promotion Programs**, the integration
with TaxCloud might behave unexpectedly. Indeed, as TaxCloud does not
accept lines with negative amounts as part of the tax computation, the
amount of the lines added by the promotion program must be deduced from
the total of the lines it impacts.

<div class="important">

<div class="title">

Important

</div>

This means, amongst other complications, that orders using coupons or
promotions with a TaxCloud fiscal position **must** be invoiced
completely - you cannot create invoices for partial deliveries, etc.

</div>

Another unexpected behavior is possible. For example, you sell a product
for which you have a promotion program that provides a 50% discount. If
the product's tax rate is 7%, the tax rate computed from the TaxCloud
integration displays 3.5%. This happens because the discount is included
in the price sent to TaxCloud. However, in Odoo, the discount is on
another line entirely. Still, the tax computation is correct. Indeed, a
3.5% tax on the full price is the equivalent of a 7% tax on half the
price, but this might be unexpected from a user point of view.

<div class="seealso">

`fiscal_positions`

</div>


---
## File: ./content/applications/finance/accounting/taxation/taxes/vat_validation.md

# VIES VAT numbers validation

**VAT Information Exchange System** - abbreviated **VIES** - is a tool
provided by the European Commission that allows you to check the
validity of VAT numbers of companies registered in the European Union.

Odoo provides a feature to **Verify VAT Numbers** when you save a
contact. This helps you make sure that your contacts provided you with a
valid VAT number without leaving Odoo interface.

## Configuration

To enable this feature, go to `Accounting --> Configuration --> Settings
--> Taxes`, enable the **Verify VAT Numbers** feature, and click on
*Save*.

![Enable "Verify VAT Numbers" in Odoo
Accounting](vat_validation/vat-validation-configuration.png)

## VAT Number validation

Whenever you create or modify a contact, make sure to fill out the
**Country** and **VAT** fields.

![Fill out the contact form with the country and VAT number before
clicking on \*Save\*](vat_validation/vat-validation-contact-form.png)

When you click on *Save*, Odoo runs a VIES VAT number check, and
displays an error message if the VAT number is invalid.

![Odoo displays an error message instead of saving when the VAT number
is invalid](vat_validation/vat-validation-error.png)

<div class="important">

<div class="title">

Important

</div>

This tool checks the VAT number's validity but does not check the other
fields' validity.

</div>

<div class="seealso">

  - [European Commission: VIES search
    engine](https://ec.europa.eu/taxation_customs/vies/vatRequest.html)

</div>


---
## File: ./content/applications/finance/accounting/taxation/fiscal_year/close_fiscal_year.md

# Do a year end in Odoo (close a fiscal year)

Before going ahead with closing a fiscal year, there are a few steps one
should typically take to ensure that your accounting is correct, up to
date, and accurate:

  - Make sure you have fully reconciled your **bank account(s)** up to
    year end and confirm that your ending book balances agree with your
    bank statement balances.
  - Verify that all **customer invoices** have been entered and
    approved.
  - Confirm that you have entered and agreed all **vendor bills**.
  - Validate all **expenses**, ensuring their accuracy.
  - Corroborate that all **received payments** have been entered and
    recorded accurately.

## Year-end checklist

  - Run a **Tax report**, and verify that your tax information is
    correct.
  - Reconcile all accounts on your **Balance Sheet**:
      - Agree your bank balances in Odoo against your actual bank
        balances on your statements. Utilize the **Bank Reconciliation**
        report to assist with this.
      - Reconcile all transactions in your cash and bank accounts by
        running your **Aged Receivables** and **Aged Payables** reports.
      - Audit your accounts, being sure to fully understand the
        transactions affecting them and the nature of the transactions,
        making sure to include loans and fixed assets.
  - Run the optional **Payments Matching** feature, under the **More**
    dropdown on the dashboard, validating any open **Vendor Bills** and
    **Customer Invoices** with their payments. This step is optional,
    however it may assist the year-end process if all outstanding
    payments and invoices are reconciled, and could lead finding errors
    or mistakes in the system.
  - Your accountant/bookkeeper will likely verify your balance sheet
    items and book entries for:
      - Year-end manual adjustments, using the **Adviser Journal
        Entries** menu (For example, the **Current Year Earnings** and
        **Retained Earnings** reports).
      - **Work in Progress**.
      - **Depreciation Journal Entries**.
      - **Loans**.
      - **Tax adjustments**.

If your accountant/bookkeeper is going through end of the year auditing,
they may want to have paper copies of all balance sheet items (such as
loans, bank accounts, prepayments, sales tax statements, etc...) to
agree these against your Odoo balances.

During this process, it is good practice to set the **Lock date for
Non-Advisers** to the last day of the preceding financial year, which is
set under the accounting configuration. This way, the accountant can be
confident that nobody is changing the previous year transactions while
auditing the books.

![image](close_fiscal_year/close_fiscal_year01.png)

## Closing the fiscal year

In Odoo there is no need to do a specific year end closing entry in
order to close out income statement accounts. The reports are created in
real-time, meaning that the **Income statement** corresponds directly
with the year-end date you specify in Odoo. Therefore, any time you
generate the **Income Statement**, the beginning date will correspond
with the beginning of the **Fiscal Year** and the account balances will
all be 0.

Once the accountant/bookkeeper has created the journal entry to allocate
the **Current Year Earnings**, you should set the **Lock Date** to the
last day of the fiscal year. Making sure that before doing so, you
confirm whether or not the current year earnings in the **Balance
Sheet** is correctly reporting a 0 balance.

<div class="seealso">

\* `fiscal_year`

</div>


---
## File: ./content/applications/finance/accounting/taxation/fiscal_year/fiscal_year.md

# Manage Fiscal Years

In most cases, the fiscal years last 12 months. If it is your case, you
just have to define what is the last day of your fiscal year in the
accounting settings. By default, it is set on the 31st December.

![image](fiscal_year/fiscal_year01.png)

However, there might be some exceptions. For example, if it is the first
fiscal year of your business, it could last more or less than 12 months.
In this case, some additional configuration is required.

Go in `accounting --> configuration --> settings` and activate the
fiscal years.

![image](fiscal_year/fiscal_year02.png)

You can then configure your fiscal years in `accounting -->
configuration --> fiscal years`.

![image](fiscal_year/fiscal_year03.png)

<div class="note">

<div class="title">

Note

</div>

You only have to create fiscal years if they last more or less than 12
months.

</div>

<div class="seealso">

  - `close_fiscal_year`

</div>


---
## File: ./content/applications/finance/accounting/getting_started.md

  - nosearch

# Getting started

<div class="toctree" data-titlesonly="">

getting\_started/main\_concept getting\_started/cheat\_sheet
getting\_started/initial\_configuration
getting\_started/process\_overview

</div>


---
## File: ./content/applications/finance/accounting/payables/misc/forecast.md

# Forecast future bills to pay

In Odoo, you can manage payments by setting automatic **Payments Terms**
and **follow-ups**.

## Configuration: payment terms

In order to track vendor conditions, we use **Payment Terms** in Odoo.
They allow keeping track of due dates on invoices. Examples of **Payment
Terms** are:

  - 50% within 30 days
  - 50% within 45 days

To create them, go to `Accounting --> Configuration --> Invoicing:
Payment Terms` and click on `Create` to add new terms or click existing
ones to modify them.

<div class="seealso">

[Odoo Tutorials: Payment
Terms](https://www.odoo.com/slides/slide/payment-terms-1679?fullscreen=1)

</div>

Once **Payment Terms** are defined, you can assign them to your vendor
by default. To do so, go to `Vendors --> Vendors`, select a vendor,
click the `Sales & Purchase` tab, and select a specific **Payment
Term**. This way, every time you purchase from this vendor, Odoo
automatically proposes the chosen Payment Term.

<div class="note">

<div class="title">

Note

</div>

If you do not set a specific Payment Term on a vendor, you can still set
one on the vendor bill.

</div>

## Forecast bills to pay with the aged payable report

To track amounts to be paid to the vendors, use the **Aged Payable**
report. To access it, go to `Accounting --> Reporting --> Partner
Reports: Aged Payable`. This report gives you a summary per vendor of
the amounts to pay, compared to their due date (the due date being
computed on each bill using the terms). This report tells you how much
you will have to pay within the following months.

## Select bills to pay

You can get a list of all your vendor bills by going to `Vendors -->
Bills`. To view only the bills that you need to pay, click `Filters -->
Bills to Pay`. To view only overdue payments, select the `Overdue`
filter instead.

You can also group bills by their due date by clicking `Group By --> Due
Date` and selecting a time period.


---
## File: ./content/applications/finance/accounting/payables/pay.md

  - nosearch

# Vendor payments

<div class="toctree" data-titlesonly="">

pay/sepa pay/check pay/multiple

</div>


---
## File: ./content/applications/finance/accounting/payables/pay/sepa.md

# Pay with SEPA

SEPA, the Single Euro Payments Area, is a payment-integration initiative
of the European union for simplification of bank transfers denominated
in EURO. SEPA allows you to send payment orders to your bank to automate
bank wire transfer.

SEPA is supported by the banks of the 28 EU member states as well as
Iceland, Norway, Switzerland, Andorra, Monaco and San Marino.

With Odoo, once you decide to pay a vendor, you can select to pay the
bill with SEPA. Then, at the end of the day, the manager can generate
the SEPA file containing all bank wire transfers and send it to the
bank.

By default,the file follows the SEPA Credit Transfer
**'pain.001.001.03'** specifications. This is a well-defined standard
that makes consensus among banks. However, according to the country set
on your company, another format can be used :
**'pain.001.001.03.ch.02'** for Switzerland and **'pain.001.003.03'**
for Germany.

Once the payments are processed by your bank, you can directly import
the account statement inside Odoo. The bank reconciliation process will
seamlessly match the SEPA orders you sent to your bank with actual bank
statements.

## Configuration

### Install the required module

To pay suppliers with SEPA, you must install the **SEPA Credit
Transfer** module. This module handle the process of generating SEPA
files based on Odoo payments.

<div class="note">

<div class="title">

Note

</div>

According to your country and the chart of account you use, this module
may be installed by default.

</div>

### Activate SEPA payment methods on banks

In order to allow payments by SEPA, you must activate the payment method
on related bank journals. From the accounting dashboard (the screen you
get when you enter the accounting application), click on "More" on your
bank account and select the "Settings" option.

To activate SEPA, click the **Advanced Settings** tab and, in the
**Payment Methods** part of the **Miscellaneous** section, check the box
**Sepa Credit Transfer**.

Make sure to specify the IBAN account number (domestic account number
won't work with SEPA) and the BIC (bank identifier code) on your bank
journal.

<div class="note">

<div class="title">

Note

</div>

By default, the payments you send using SEPA will use your company name
as initiating party name. This is what appears on the recipient's bank
statement in the **payment from** field. You can customize it in your
company settings, in the tab **Configuration**, under the **SEPA**
section.

</div>

![image](sepa/sepa01.png)

## Pay with SEPA

### Register your payments

You can register a payment that is not related to a supplier bill. To do
so, use the top menu `Purchases --> Payments`. Register your payment and
select a payment method by Sepa Credit Transfer.

If it's the first time you pay this vendor, you will have to fill in the
Recipient Bank Account field with, at least, the bank name, IBAN and BIC
(Bank Identifier Code). Odoo will automatically verify the IBAN format.

For future payments to this vendor, Odoo will propose you automatically
the bank accounts but you will be able to select another one or create a
new one.

If you pay a specific supplier bill, put the reference of the bill in
the **memo** field.

![image](sepa/sepa02.png)

Once your payment is registered, don't forget to Confirm it. You can
also pay vendor bills from the bill directly using the Register Payment
button on top of a vendor bill. The form is the same, but the payment is
directly linked to the bill and will be automatically reconciled to it.

### Generate SEPA files

From your accounting dashboard, you should see if there are SEPA files
to generate for every bank account.

![image](sepa/sepa03.png)

Click on the link to check all the payments that are ready to transfer
via SEPA. Then, select all the payments you want to send (or check the
top box to select all payment at once) and click on `More -->
Download SEPA Payments`.

![image](sepa/sepa04.png)

## Troubleshooting

### The bank refuses my SEPA file

Ask your bank if they support the **SEPA Credit Transfer specification**
(the SEPA pain version depends on the country set on your company). If
they don't, or cannot provide relevant information, please forward the
error message to your Odoo partner.

### There is no Bank Identifier Code recorded for bank account ...

In order to send a SEPA payment, the recipient must be identified by a
valid IBAN and BIC. If this message appear, you probably encoded an IBAN
account for the partner you are paying but forgot to fill in the BIC
field.

<div class="seealso">

\- `check` - `../../bank/setup/bank_accounts` -
`../../bank/reconciliation/use_cases`

</div>


---
## File: ./content/applications/finance/accounting/payables/pay/check.md

# Pay by checks

Once you decide to pay a supplier bill, you can select to pay by check.
Then, at the end of the day, the manager can print all checks by batch.
Finally, the bank reconciliation process will match the checks you sent
to suppliers with actual bank statements.

## Configuration

### Install the required module

To record supplier payments by checks, you must install the **Check
Writing** module. This module handle the process of recording checks in
Odoo. Others modules are necessary to print checks, according to the
country. As an example, the **U.S. Check Printing** module is required
to print U.S. checks.

<div class="note">

<div class="title">

Note

</div>

According to your country and the chart of account you use, those
modules may be installed by default. (example: United States users have
nothing to install, it's configured by default).

</div>

### Activate checks payment methods

In order to allow payments by checks, you must activate the payment
method on related bank journals. From the accounting dashboard (the
screen you get when you enter the accounting application), click on your
bank account on `More --> Settings` option. On the **Payment Method**
field, set **Check**.

![image](check/check01.png)

## Compatible check stationery for printing checks

### United States

For the United States, Odoo supports by default the check formats of:

  - **Quickbooks & Quicken**: check on top, stubs in the middle and
    bottom
  - **Peachtree**: check in the middle, stubs on top and bottom
  - **ADP**: check in the bottom, and stubs on the top.

It is also possible to customize your own check format through
customizations.

## Pay a supplier bill with a check

Paying a supplier with a check is done in three steps:

1.  registering a payment you'd like to do on the bill
2.  printing checks in batch for all registered payments
3.  reconcile bank statements

### Register a payment by check

To register a payment on a bill, open any supplier bill from the menu
`Purchases --> Vendor Bills`. Once the supplier bill is validated, you
can register a payment. Set the **Payment Method** to **Check** and
validate the payment dialog.

![image](check/check02.png)

### Print checks

From the accounting dashboard, on your bank account, you should see a
link "X checks to print". Click on this link and you will get the list
of all checks that are not printed yet. From this screen, you can print
all checks in batch or review them one by one.

If you want to review every payment one by one before printing the
check, open on the payment and click on **Print Check** if you accept
it. A dialog will ask you the number of the check. It automatically
proposes you the next number, but you can change it if it does not match
your next check number.

To print all checks in batch, select all payments from the list view and
Print Check from the top "print" menu.

![image](check/check03.png)

### Reconcile bank statements

Once you process your bank statement, when the check is credited from
your bank account, Odoo will propose you automatically to match it with
the payment. This will mark the payment as **Reconciled**.

<div class="tip">

<div class="title">

Tip

</div>

To review checks that have not been credited, open the list of payments
and filter on the Sent state. Review those payments that have a date
more than 2 weeks ago.

</div>

## Pay anything with a check

You can register a payment that is not related to a supplier bill. To do
so, use the top menu `Purchases --> Payments`. Register your payment and
select a payment method by check.

If you pay a specific supplier bill, put the reference of the bill in
the **Memo** field.

![image](check/check04.png)

Once your payment by check is registered, don't forget to **Confirm**
it. Once confirmed, you can use **Print Check** directly or follow the
preceding flow to print checks in batch:

  - [Print checks](#print-checks)
  - [Reconcile bank statements](#reconcile-bank-statements)


---
## File: ./content/applications/finance/accounting/payables/pay/multiple.md

# Pay several bills at once

Odoo offers the possibility of grouping multiple bills' payments into
one, facilitating the reconciliation process.

<div class="seealso">

\- `/applications/inventory_and_mrp/purchase/manage_deals/manage` -
`/applications/finance/accounting/bank/reconciliation/use_cases`

</div>

## Group payments

To register the payment of multiple bills at once, go to `Accounting app
-->
Vendors --> Bills`. Then, select the bills you wish to register a
payment for by **ticking** the boxes next to the bills. When done,
either click `Register Payment` or `Action --> Register Payment`.

![Register payment button.](multiple/register-payment-button.png)

<div class="note">

<div class="title">

Note

</div>

Payments can only be registered for `posted` bills.

</div>

When registering the payments, a **pop-up window** appears. From here,
you can either create **separate payments** for each bill all at once by
clicking `Create Payment`, *or* create one payment by combining **all**
bills' payments. To **combine** all payments, tick the `Group Payments`
box.

<div class="note">

<div class="title">

Note

</div>

The `Group Payments` option only appears when selecting two or more
bills.

</div>

![Group payments options when registering a
payment.](multiple/multiple-group-payments.png)

When selecting `Group Payments`, the `amount, currency, date and memo`
are all set automatically, but you can modify them according to your
needs.

### Partial group payments with cash discounts

In case of **partial group payments with cash discounts**, you can
follow the steps found on the `cash discount documentation page
</applications/finance/accounting/receivables/customer_invoices/cash_discounts>`.
Make sure to apply the `payment terms
</applications/finance/accounting/receivables/customer_invoices/payment_terms>`
to the **bills** *instead* of the invoices.

<div class="seealso">

`/applications/finance/accounting/receivables/customer_invoices/payment_terms`

</div>


---
## File: ./content/applications/finance/accounting/payables/supplier_bills/assets.md

# Non-current assets and fixed assets

**Non-current Assets**, also known as **long-term assets**, are
investments that are expected to be realized after one year. They are
capitalized rather than being expensed and appear on the company's
balance sheet. Depending on their nature, they may undergo
**depreciation**.

**Fixed Assets** are a type of Non-current Assets and include the
properties bought for their productive aspects, such as buildings,
vehicles, equipment, land, and software.

For example, let's say we buy a car for $ 27,000. We plan to amortize it
over five years, and we will sell it for $ 7,000 afterward. Using the
linear, or straight-line, depreciation method, $ 4,000 are expensed each
year as **depreciation expenses**. After five years, the **Accumulated
Depreciation** amount reported on the balance sheet equals $ 20,000,
leaving us with $ 7,000 of **Not Depreciable Value**, or Salvage value.

Odoo Accounting handles depreciation by creating all depreciation
entries automatically in *draft mode*. They are then posted
periodically.

Odoo supports the following **Depreciation Methods**:

  - Straight Line
  - Declining
  - Declining Then Straight Line

<div class="note">

<div class="title">

Note

</div>

The server checks once a day if an entry must be posted. It might then
take up to 24 hours before you see a change from *draft* to *posted*.

</div>

## Prerequisites

Such transactions must be posted on an **Assets Account** rather than on
the default expense account.

### Configure an Assets Account

To configure your account in the **Chart of Accounts**, go to
`Accounting -->
Configuration --> Chart of Accounts`, click on *Create*, and fill out
the form.

![Configuration of an Assets Account in Odoo
Accounting](assets/assets01.png)

<div class="note">

<div class="title">

Note

</div>

This account's type must be either *Fixed Assets* or *Non-current
Assets*.

</div>

### Post an expense to the right account

#### Select the account on a draft bill

On a draft bill, select the right account for all the assets you are
buying.

![Selection of an Assets Account on a draft bill in Odoo
Accounting](assets/assets02.png)

#### Choose a different Expense Account for specific products

Start editing the product, go to the *Accounting* tab, select the right
**Expense Account**, and save.

![Change of the Assets Account for a product in
Odoo](assets/assets03.png)

<div class="tip">

<div class="title">

Tip

</div>

It is possible to `automate the creation of assets entries
<assets-automation>` for these products.

</div>

#### Change the account of a posted journal item

To do so, open your Purchases Journal by going to `Accounting -->
Accounting -->
Purchases`, select the journal item you want to modify, click on the
account, and select the right one.

![Modification of a posted journal item's account in Odoo
Accounting](assets/assets04.png)

## Assets entries

### Create a new entry

An **Asset entry** automatically generates all journal entries in *draft
mode*. They are then posted one by one at the right time.

To create a new entry, go to `Accounting --> Accounting --> Assets`,
click on *Create*, and fill out the form.

Click on **select related purchases** to link an existing journal item
to this new entry. Some fields are then automatically filled out, and
the journal item is now listed under the **Related Purchase** tab.

![Assets entry in Odoo Accounting](assets/assets05.png)

Once done, you can click on *Compute Depreciation* (next to the
*Confirm* button) to generate all the values of the **Depreciation
Board**. This board shows you all the entries that Odoo will post to
depreciate your asset, and at which date.

![Depreciation Board in Odoo Accounting](assets/assets06.png)

#### What does "Prorata Temporis" mean?

The **Prorata Temporis** feature is useful to depreciate your assets the
most accurately possible.

With this feature, the first entry on the Depreciation Board is computed
based on the time left between the *Prorata Date* and the *First
Depreciation Date* rather than the default amount of time between
depreciations.

For example, the Depreciation Board above has its first depreciation
with an amount of $ 241.10 rather than $ 4,000.00. Consequently, the
last entry is also lower and has an amount of $ 3758.90.

#### What are the different Depreciation Methods

The **Straight Line Depreciation Method** divides the initial
Depreciable Value by the number of depreciations planned. All
depreciation entries have the same amount.

The **Declining Depreciation Method** multiplies the Depreciable Value
by the **Declining Factor** for each entry. Each depreciation entry has
a lower amount than the previous entry. The last depreciation entry
doesn't use the declining factor but instead has an amount corresponding
to the balance of the depreciable value so that it reaches $0 by the end
of the specified duration.

The **Declining Then Straight Line Depreciation Method** uses the
Declining Method, but with a minimum Depreciation equal to the Straight
Line Method. This method ensures a fast depreciation at the beginning,
followed by a constant one afterward.

### Assets from the Purchases Journal

You can create an asset entry from a specific journal item in your
**Purchases Journal**.

To do so, open your Purchases Journal by going to `Accounting -->
Accounting -->
Purchases`, and select the journal item you want to record as an asset.
Make sure that it is posted in the right account (see:
`journal-assets-account`).

Then, click on *Action*, select **Create Asset**, and fill out the form
the same way you would do to `create a new entry <create-assets-entry>`.

![Create Asset Entry from a journal item in Odoo
Accounting](assets/assets07.png)

## Modification of an Asset

You can modify the values of an asset to increase or decrease its value.

To do so, open the asset you want to modify, and click on *Modify
Depreciation*. Then, fill out the form with the new depreciation values
and click on *Modify*.

A **decrease in value** posts a new Journal Entry for the **Value
Decrease** and modifies all the future *unposted* Journal Entries listed
in the Depreciation Board.

An **increase in value** requires you to fill out additional fields
related to the account movements and creates a new Asset entry with the
**Value Increase**. The Gross Increase Asset Entry can be accessed with
a Smart Button.

![Gross Increase smart button in Odoo Accounting](assets/assets08.png)

## Disposal of Fixed Assets

To **sell** an asset or **dispose** of it implies that it must be
removed from the Balance Sheet.

To do so, open the asset you want to dispose of, click on *Sell or
Dispose*, and fill out the form.

![Disposal of Assets in Odoo Accounting](assets/assets09.png)

Odoo Accounting then generates all the journal entries necessary to
dispose of the asset, including the gain or loss on sale, which is based
on the difference between the asset's book value at the time of the sale
and the amount it is sold for.

<div class="note">

<div class="title">

Note

</div>

To record the sale of an asset, you must first post the related Customer
Invoice so you can link the sale of the asset with it.

</div>

## Assets Models

You can create **Assets Models** to create your Asset entries faster. It
is particularly useful if you recurrently buy the same kind of assets.

To create a model, go to `Accounting --> Configuration --> Assets
Models`, click on *Create*, and fill out the form the same way you would
do to create a new entry.

<div class="tip">

<div class="title">

Tip

</div>

You can also convert a *confirmed Asset entry* into a model by opening
it from `Accounting --> Accounting --> Assets` and then, by clicking on
the button *Save Model*.

</div>

### Apply an Asset Model to a new entry

When you create a new Asset entry, fill out the **Fixed Asset Account**
with the right asset account.

New buttons with all the models linked to that account appear at the top
of the form. Clicking on a model button fills out the form according to
that model.

![Assets model button in Odoo Accounting](assets/assets10.png)

## Automate the Assets

When you create or edit an account of which the type is either
*Non-current Assets* or *Fixed Assets*, you can configure it to create
assets for the expenses that are credited on it automatically.

You have three choices for the **Automate Assets** field:

1.  **No:** this is the default value. Nothing happens.
2.  **Create in draft:** whenever a transaction is posted on the
    account, a draft *Assets entry* is created, but not validated. You
    must first fill out the form in `Accounting -->
    Accounting --> Assets`.
3.  **Create and validate:** you must also select an Asset Model (see:
    [Assets Models](#assets-models)). Whenever a transaction is posted
    on the account, an *Assets entry* is created and immediately
    validated.

![Automate Assets on an account in Odoo Accounting](assets/assets11.png)

<div class="tip">

<div class="title">

Tip

</div>

You can, for example, select this account as the default **Expense
Account** of a product to fully automate its purchase. (see:
`product-assets-account`).

</div>

<div class="seealso">

\* `../../getting_started/initial_configuration/chart_of_accounts`

</div>


---
## File: ./content/applications/finance/accounting/payables/supplier_bills/ocr.md

# Digitize vendor bills with optical character recognition (OCR)

Encoding bills manually can be a time-consuming task. Having a solution
that allows you to digitize them and automatically import the data into
your database reduces errors and saves you time.

<div class="important">

<div class="title">

Important

</div>

[Try it out](https://www.odoo.com/app/invoice-automation)\! Upload one
of your Bills or try one of our samples.

</div>

## Set up the feature

Go to `Accounting --> Settings --> Bill Digitalization`, and choose
whether the bills should be processed automatically (with OCR) or
manually (on demand).

![Activate the feature going to the settings application in Odoo
Accounting](ocr/setup_ocr.png)

### Start digitizing your bills

Scan your bills and then go to `Accounting --> Vendors --> Bills` and
upload your document. Based on your configuration, it either processes
the documents automatically, or you need to click on *Send for
Digitalization* to do it manually.

<div class="tip">

<div class="title">

Tip

</div>

You can also create a vendor bill through the *Documents* app or by
using an email alias on your journals.

</div>

Once the data is extracted from the PDF, you can correct it if necessary
by clicking on the respective tag (available in *Edit* mode), and
selecting the right information instead.

![Example of a scanned bill in Odoo Accounting](ocr/example_ocr.png)

<div class="note">

<div class="title">

Note

</div>

The more bills you scan, the better the system gets at identifying the
correct data.

</div>

## Pricing

The *Bill Digitalization* is an *In-App Purchase (IAP)* service which
requires prepaid credits to work. Digitizing one document consumes one
credit.  
To buy credits, go to `Accounting --> Configuration --> Settings -->
Bill Digitalization` and click on *Buy credits*, or go to `Settings -->
Odoo IAP` and click on *View My Services*.

<div class="important">

<div class="title">

Important

</div>

\- If you are on Odoo Online and have the Enterprise version, you
benefit from free trial credits to test the feature.

</div>

<div class="seealso">

\- Our [Privacy Policy](https://iap.odoo.com/privacy#header_6).

</div>


---
## File: ./content/applications/finance/accounting/payables/supplier_bills/purchase_receipts.md

# Purchase receipts

**Purchase Receipts** are not invoices but rather confirmations of
received payments, such as a ticket or a receipt.

This feature is meant to be used when you pay directly with your
company's money for an expense. **Vendor Bills**, on the other hand, are
recorded when an invoice is issued to you and that the amount is first
credited on a debt account before a later payment reconciliation.

<div class="note">

<div class="title">

Note

</div>

Expenses paid by employees can be managed with **Odoo Expenses**, an app
dedicated to the approval of such expenses and the payments management.
Click `here
</applications/finance/expenses>` for more information on how to use
Odoo Expenses.

</div>

## Register a receipt

To record a new receipt, go to `Accounting --> Vendors --> Receipts`,
click on *Create*, fill out the form, and click on *Post*.

![Fill out the draft purchase receipt in Odoo
Accounting](purchase_receipts/purchase_receipts_draft.png)

You can register the payment by clicking on *Register Payment*, then
filling out the payment's details, and clicking on *Validate*.

## Edit the Journal Entry before posting it

Once you have filled out the *Invoice Lines* tab, you can modify the
**Journal Entry** before you post it.

To do so, click on the **Journal Items** tab, change the accounts and
values according to your needs, and click on *Post*.

![Change the accounts used in the journal entry to record a purchase
receipt.](purchase_receipts/purchase_receipts_journal_items.png)

<div class="seealso">

\- `/applications/inventory_and_mrp/purchase/manage_deals/manage` -
`/applications/finance/expenses`

</div>


---
## File: ./content/applications/finance/accounting/payables/supplier_bills/deferred_expenses.md

# Deferred expenses and prepayments

**Deferred expenses** and **prepayments** (also known as **prepaid
expense**), are both costs that have already occurred for unconsumed
products or services yet to receive.

Such costs are **assets** for the company that pays them since it
already paid for products and services still to receive or that are yet
to be used. The company cannot report them on the current **Profit and
Loss statement**, or *Income Statement*, since the payments will be
effectively expensed in the future.

These future expenses must be deferred on the company's balance sheet
until the moment in time they can be **recognized**, at once or over a
defined period, on the Profit and Loss statement.

For example, let's say we pay $ 1200 at once for one year of insurance.
We already pay the cost now but haven't used the service yet. Therefore,
we post this new expense in a *prepayment account* and decide to
recognize it on a monthly basis. Each month, for the next 12 months, $
100 will be recognized as an expense.

Odoo Accounting handles deferred expenses and prepayments by spreading
them in multiple entries that are automatically created in *draft mode*
and then posted periodically.

<div class="note">

<div class="title">

Note

</div>

The server checks once a day if an entry must be posted. It might then
take up to 24 hours before you see a change from *draft* to *posted*.

</div>

## Prerequisites

Such transactions must be posted on a **Deferred Expense Account**
rather than on the default expense account.

### Configure a Deferred Expense Account

To configure your account in the **Chart of Accounts**, go to
`Accounting -->
Configuration --> Chart of Accounts`, click on *Create*, and fill out
the form.

![Configuration of a Deferred Expense Account in Odoo
Accounting](deferred_expenses/deferred_expenses01.png)

<div class="note">

<div class="title">

Note

</div>

This account's type must be either *Current Assets* or *Prepayments*

</div>

### Post an expense to the right account

#### Select the account on a draft bill

On a draft bill, select the right account for all the products of which
the expenses must be deferred.

![Selection of a Deferred Expense Account on a draft bill in Odoo
Accounting](deferred_expenses/deferred_expenses02.png)

#### Choose a different Expense Account for specific products

Start editing the product, go to the *Accounting* tab, select the right
**Expense Account**, and save.

![Change of the Expense Account for a product in
Odoo](deferred_expenses/deferred_expenses03.png)

<div class="tip">

<div class="title">

Tip

</div>

It is possible to automate the creation of expense entries for these
products (see: [Automate the Deferred
Expenses](#automate-the-deferred-expenses)).

</div>

#### Change the account of a posted journal item

To do so, open your Purchases Journal by going to `Accounting -->
Accounting -->
Purchases`, select the journal item you want to modify, click on the
account, and select the right one.

![Modification of a posted journal item's account in Odoo
Accounting](deferred_expenses/deferred_expenses04.png)

## Deferred Expenses entries

### Create a new entry

A **Deferred Expense entry** automatically generates all journal entries
in *draft mode*. They are then posted one by one at the right time until
the full amount of the expense is recognized.

To create a new entry, go to `Accounting --> Accounting --> Deferred
Expense`, click on *Create*, and fill out the form.

Click on **select related purchases** to link an existing journal item
to this new entry. Some fields are then automatically filled out, and
the journal item is now listed under the **Related Expenses** tab.

![Deferred Expense entry in Odoo
Accounting](deferred_expenses/deferred_expenses05.png)

Once done, you can click on *Compute Deferral* (next to the *Confirm*
button) to generate all the values of the **Expense Board**. This board
shows you all the entries that Odoo will post to recognize your expense,
and at which date.

![Expense Board in Odoo
Accounting](deferred_expenses/deferred_expenses06.png)

#### What does "Prorata Temporis" mean?

The **Prorata Temporis** feature is useful to recognize your expense the
most accurately possible.

With this feature, the first entry on the Expense Board is computed
based on the time left between the *Prorata Date* and the *First
Recognition Date* rather than the default amount of time between
recognitions.

For example, the Expense Board above has its first expense with an
amount of $ 70.97 rather than $ 100.00. Consequently, the last entry is
also lower and has an amount of $ 29.03.

### Deferred Entry from the Purchases Journal

You can create a deferred entry from a specific journal item in your
**Purchases Journal**.

To do so, open your Purchases Journal by going to `Accounting -->
Accounting -->
Purchases`, and select the journal item you want to defer. Make sure
that it is posted in the right account (see: [Change the account of a
posted journal item](#change-the-account-of-a-posted-journal-item)).

Then, click on *Action*, select **Create Deferred Entry**, and fill out
the form the same way you would do to [create a new
entry](#create-a-new-entry).

![Create Deferred Entry from a journal item in Odoo
Accounting](deferred_expenses/deferred_expenses07.png)

## Deferred Expense Models

You can create **Deferred Expense Models** to create your Deferred
Expense entries faster.

To create a model, go to `Accounting --> Configuration --> Deferred
Expense Models`, click on *Create*, and fill out the form the same way
you would do to create a new entry.

<div class="tip">

<div class="title">

Tip

</div>

You can also convert a *confirmed Deferred Expense entry* into a model
by opening it from `Accounting --> Accounting --> Deferred Expenses` and
then, by clicking on the button *Save Model*.

</div>

### Apply a Deferred Expense Model to a new entry

When you create a new Deferred Expense entry, fill out the **Deferred
Expense Account** with the right recognition account.

New buttons with all the models linked to that account appear at the top
of the form. Clicking on a model button fills out the form according to
that model.

![Deferred Expense model button in Odoo
Accounting](deferred_expenses/deferred_expenses08.png)

## Automate the Deferred Expenses

When you create or edit an account of which the type is either *Current
Assets* or *Prepayments*, you can configure it to defer the expenses
that are credited on it automatically.

You have three choices for the **Automate Deferred Expense** field:

1.  **No:** this is the default value. Nothing happens.
2.  **Create in draft:** whenever a transaction is posted on the
    account, a draft *Deferred Expenses entry* is created, but not
    validated. You must first fill out the form in `Accounting -->
    Accounting --> Deferred Expenses`.
3.  **Create and validate:** you must also select a Deferred Expense
    Model (see: [Deferred Expense Models](#deferred-expense-models)).
    Whenever a transaction is posted on the account, a *Deferred
    Expenses entry* is created and immediately validated.

![Automate Deferred Expense on an account in Odoo
Accounting](deferred_expenses/deferred_expenses09.png)

<div class="tip">

<div class="title">

Tip

</div>

You can, for example, select this account as the default **Expense
Account** of a product to fully automate its purchase. (see: [Choose a
different Expense Account for specific
products](#choose-a-different-expense-account-for-specific-products)).

</div>

<div class="seealso">

\* `../../getting_started/initial_configuration/chart_of_accounts`

</div>


---
## File: ./content/applications/finance/accounting/payables/misc.md

  - nosearch

# Miscellaneous

<div class="toctree" data-titlesonly="">

misc/forecast

</div>


---
## File: ./content/applications/finance/accounting/payables/supplier_bills.md

  - nosearch

# Vendor bills

<div class="toctree" data-titlesonly="">

supplier\_bills/purchase\_receipts supplier\_bills/deferred\_expenses
supplier\_bills/assets supplier\_bills/ocr

</div>


---
## File: ./content/applications/finance/accounting/bank.md

  - nosearch

# Bank and cash

<div class="toctree" data-titlesonly="">

bank/setup bank/bank\_synchronization bank/bank\_statements
bank/reconciliation bank/interbank

</div>


---
## File: ./content/applications/finance/accounting/getting_started/process_overview.md

  - nosearch

# Process overview

<div class="toctree" data-titlesonly="">

process\_overview/customer\_invoice process\_overview/supplier\_bill

</div>


---
## File: ./content/applications/finance/accounting/getting_started/initial_configuration.md

  - nosearch

# Initial configuration

<div class="toctree" data-titlesonly="">

initial\_configuration/setup initial\_configuration/chart\_of\_accounts

</div>


---
## File: ./content/applications/finance/accounting/getting_started/process_overview/customer_invoice.md

# From Customer Invoice to Payments Collection

Odoo supports multiple invoicing and payment workflows, so you can
choose and use the ones that match your business needs. Whether you want
to accept a single payment for a single invoice, or process a payment
spanning multiple invoices and taking discounts for early payments, you
can do so efficiently and accurately.

## From Draft Invoice to Profit and Loss

If we pick up at the end of a typical 'order to cash' scenario, after
the goods have been shipped, you will: issue an invoice; receive
payment; deposit that payment at the bank; make sure the Customer
Invoice is closed; follow up if Customers are late; and finally present
your Income on the Profit and Loss report and show the decrease in
Assets on the Balance Sheet report.

Invoicing in most countries occurs when a contractual obligation is met.
If you ship a box to a customer, you have met the terms of the contract
and can bill them. If your supplier sends you a shipment, they have met
the terms of that contract and can bill you. Therefore, the terms of the
contract is fulfilled when the box moves to or from the truck. At this
point, Odoo supports the creation of what is called a Draft Invoice by
Warehouse staff.

## Invoice creation

Draft invoices can be manually generated from other documents such as
Sales Orders, Purchase Orders,etc. Although you can create a draft
invoice directly if you would like.

An invoice must be provided to the customer with the necessary
information in order for them to pay for the goods and services ordered
and delivered. It must also include other information needed to pay the
invoice in a timely and precise manner.

## Draft invoices

The system generates invoice which are initially set to the Draft state.
While these invoices

remain unvalidated, they have no accounting impact within the system.
There is nothing to stop users from creating their own draft invoices.

Let's create a customer invoice with following information:

  - Customer: Agrolait
  - Product: iMac
  - Quantity: 1
  - Unit Price: 100
  - Taxes: Tax 15%

![image](customer_invoice/invoice01.png)

![image](customer_invoice/invoice02.png)

The document is composed of three parts:

  - the top of the invoice, with customer information,
  - the main body of the invoice, with detailed invoice lines,
  - the bottom of the page, with detail about the taxes, and the totals.

## Open or Pro-forma invoices

An invoice will usually include the quantity and the price of goods
and/or services, the date, any parties involved, the unique invoice
number, and any tax information.

"Validate" the invoice when you are ready to approve it. The invoice
then moves from the Draft state to the Open state.

When you have validated an invoice, Odoo gives it a unique number from a
defined, and modifiable, sequence.

![image](customer_invoice/invoice03.png)

Accounting entries corresponding to this invoice are automatically
generated when you validate the invoice. You can see the details by
clicking on the entry in the Journal Entry field in the "Other Info"
tab.

![image](customer_invoice/invoice04.png)

## Send the invoice to customer

After validating the customer invoice, you can directly send it to the
customer via the 'Send by email' functionality.

![image](customer_invoice/invoice05.png)

A typical journal entry generated from a validated invoice will look
like as follows:

| **Account**         | **Partner** | **Due date** | **Debit** | **Credit** |
| ------------------- | ----------- | ------------ | --------- | ---------- |
| Accounts Receivable | Agrolait    | 01/07/2015   | 115       |            |
| Taxes               | Agrolait    |              |           | 15         |
| Sales               |             |              |           | 100        |

## Payment

In Odoo, an invoice is considered to be paid when the associated
accounting entry has been reconciled with the payment entries. If there
has not been a reconciliation, the invoice will remain in the Open state
until you have entered the payment.

A typical journal entry generated from a payment will look like as
follows:

| **Account**         | **Partner** | **Due date** | **Debit** | **Credit** |
| ------------------- | ----------- | ------------ | --------- | ---------- |
| Bank                | Agrolait    |              | 115       |            |
| Accounts Receivable | Agrolait    |              |           | 115        |

## Receive a partial payment through the bank statement

You can manually enter your bank statements in Odoo, or you can import
them in from a csv file or from several other predefined formats
according to your accounting localisation.

Create a bank statement from the accounting dashboard with the related
journal and enter an amount of $100 .

![image](customer_invoice/invoice06.png)

## Reconcile

Now let's reconcile\!

![image](customer_invoice/invoice07.png)

You can now go through every transaction and reconcile them or you can
mass reconcile with instructions at the bottom.

After reconciling the items in the sheet, the related invoice will now
display "You have outstanding payments for this customer. You can
reconcile them to pay this invoice. "

![image](customer_invoice/invoice08.png)

![image](customer_invoice/invoice09.png)

Apply the payment. Below, you can see that the payment has been added to
the invoice.

![image](customer_invoice/invoice10.png)

## Payment Followup

There's a growing trend of customers paying bills later and later.
Therefore, collectors must make every effort to collect money and
collect it faster.

Odoo will help you define your follow-up strategy. To remind customers
to pay their outstanding invoices, you can define different actions
depending on how severely overdue the customer is. These actions are
bundled into follow-up levels that are triggered when the due date of an
invoice has passed a certain number of days. If there are other overdue
invoices for the same customer, the actions of the most overdue invoice
will be executed.

By going to the customer record and diving into the "Overdue Payments"
you will see the follow-up message and all overdue invoices.

![image](customer_invoice/invoice11.png)

![image](customer_invoice/invoice12.png)

### Customer aging report:

The customer aging report will be an additional key tool for the
collector to understand the customer credit issues, and to prioritize
their work.

Use the aging report to determine which customers are overdue and begin
your collection efforts.

![image](customer_invoice/invoice13.png)

## Profit and loss

The Profit and Loss statement displays your revenue and expense details.
Ultimately, this gives you a clear image of your Net Profit and Loss. It
is sometimes referred to as the "Income Statement" or "Statement of
Revenues and Expenses."

![image](customer_invoice/invoice14.png)

## Balance sheet

The balance sheet summarizes your company's liabilities, assets and
equity at a specific moment in time.

![image](customer_invoice/invoice15.png)

![image](customer_invoice/invoice16.png)

For example, if you manage your inventory using the perpetual accounting
method, you should expect a decrease in account "Current Assets" once
the material has been shipped to the customer.


---
## File: ./content/applications/finance/accounting/getting_started/process_overview/supplier_bill.md

# From Vendor Bill to Payment

Once vendor bills are registered in Odoo, you can easily pay vendors for
the correct amount and at the right time (not too late, not too early;
depending on your vendor policy). Odoo also offers reports to track your
aged payable balances.

If you want to control vendor bills received from your vendors, you can
use the Odoo Purchase application that allows you to control and
pre-complete them automatically based on past purchase orders.

## From Vendor Bill to Payment

### Record a new vendor bill

When a vendor bill is received, you can record it from `Purchases -->
Vendor Bills` in the Accounting application. As a shortcut, you can also
use the **New Bill** feature on the accounting dashboard.

![image](supplier_bill/vendor_bill05.png)

To register a new vendor bill, start by selecting a vendor and inputting
their invoice as the **Vendor Reference**, then add and confirm the
product lines, making sure to have the right product quantities, taxes
and prices.

![image](supplier_bill/vendor_bill01.png)

Save the invoice to update the pre tax and tax amounts at the bottom of
the screen. You will most likely need to configure the prices of your
products without taxes as Odoo will compute the tax for you.

<div class="note">

<div class="title">

Note

</div>

On the bottom left corner, Odoo shows a summary table of all taxes on
the vendor bill. In several countries, different methods are accepted to
round the totals (round per line, or round globally). The default
rounding method in Odoo is to round the final prices per line (as you
may have different taxes per product. E.g. Alcohol and cigarettes).
However if your vendor has a different tax amount on their bill, you can
change the amount in the bottom left table to adjust and match.

</div>

### Validate The Vendor Bill

Once the vendor bill is validated, a journal entry will be generated
based on the configuration on the invoice. This journal entry may differ
depending on the the accounting package you choose to use.

For most European countries, the journal entry will use the following
accounts:

  - **Accounts Payable:** defined on the vendor form
  - **Taxes:** defined on the products and per line
  - **Expenses:** defined on the line item product used

For Anglo-Saxon (US) accounting, the journal entry will use the
following accounts:

  - **Accounts Payable:** defined on the vendor form
  - **Taxes:** defined on the products and per line
  - **Goods Received:** defined on the product form

You can check your Profit & Loss or the Balance Sheet reports after
having validated a couple of vendor bills to see the impact on your
general ledger.

### Pay a bill

To create a payment for an open vendor bill directly, you can click on
**Register a Payment** at the top of the form.

From there, you select the payment method (i.e. Checking account, credit
card, check, etc…) and the amount you wish to pay. By default, Odoo will
propose the entire remaining balance on the bill for payment. In the
memo field, we recommend you set the vendor invoice number as a
reference (Odoo will auto fill this field from the from the vendor bill
if set it correctly).

![image](supplier_bill/vendor_bill06.png)

<div class="note">

<div class="title">

Note

</div>

You can also register a payment to a vendor directly without applying it
to a vendor bill. To do that, `Purchases --> Payments`. Then, from the
vendor bill you will be able to reconcile this payment with directly.

</div>

### Printing vendor Checks

If you choose to pay your vendor bills by check, Odoo offers a method to
do so directly from your vendor payments within Odoo. Whether you do so
on a daily basis or prefer to do so at the end of the week, you can
print in checks in batches.

If you have checks to print, Odoo's accounting dashboard acts as a to do
list and reminds you of how many checks you have left to be printed.

![image](supplier_bill/vendor_bill02.png)

By selecting the amount of checks to be printed, you can dive right into
a list of all payments that are ready to be processed.

Select all the checks you wish to print (use the first checkbox to
select them all) and set the action to **Print Checks**. Odoo will ask
you to set the next check number in the sequence and will then print all
the checks at once.

![image](supplier_bill/vendor_bill03.png)

## Reporting

### Aged payable balance

In order to get a list of open vendor bills and their related due dates,
you can use the **Aged Payable** report, under the reporting menu, (in
`Reporting --> Business Statement --> Aged payable`) to get a visual of
all of your outstanding bills.

![image](supplier_bill/vendor_bill04.png)

From here, you can click directly on a vendors name to open up the
details of all outstanding bills and the amounts due, or you can
annotate any line for managements information. At any point in time
while you're looking through the report, you can print directly to Excel
or PDF and get exactly what you see on the screen.

<div class="seealso">

\* `customer_invoice`

</div>


---
## File: ./content/applications/finance/accounting/getting_started/cheat_sheet.md

  - code-column

  - custom-css  
    accounting.css

  - custom-js  
    accounts.js,chart-of-accounts.js,entries.js,misc.js,reconciliation.js

# Accounting cheat sheet

What is owned (an asset) has been financed through debts to reimburse
(liabilities) or equity (profits, capital).

  - A difference is made between **assets** and **expenses**:
    
      - An **asset** is a resource with economic value that an
        individual, corporation, or country owns or controls with the
        expectation that it will provide a future benefit. Assets are
        reported on a company's balance sheet. They are bought or
        created to increase a firm's value or benefit its operations.
      - An **expense** is the costs of operations a company bears to
        generate revenues.

<div class="rst-class">

doc-aside

</div>

> 

## Chart of accounts

The **chart of accounts** lists all the company's accounts: both Balance
sheet accounts and P\&L accounts. Every transaction is recorded by
debiting and crediting multiple accounts in a journal entry. In a way, a
chart of accounts is like a company's DNA\!

Every account listed in the chart of accounts belongs to a specific
category. In Odoo, each account has a unique code and belongs to one of
these categories:

  -   - **Equity and subordinated debts**
        
          - **Equity** is the amount of money invested by a company's
            shareholders to finance the company's activities.
          - **Subordinated debts** are the amount of money lent by a
            third party to a company to finance its activities. In the
            event of the dissolution of a company, these third parties
            are reimbursed before the shareholders.

  - **Fixed assets** are tangible (i.e., physical) items or properties
    that a company purchases and uses to produce its goods and services.
    Fixed assets are long-term assets. This means the assets have a
    useful life of more than one year. They also include properties,
    plants, and equipments (also known as "PP\&E") and are recorded on
    the balance sheet with that classification.

  -   - **Current assets and liabilities**
        
          - The **current assets** account is a balance sheet line item
            listed under the Assets section, which accounts for all
            company-owned assets that can be converted to cash within
            one year. Current assets include cash, cash equivalents,
            accounts receivable, stock inventory, marketable securities,
            prepaid liabilities, and other liquid assets.
          - **Current liabilities** are a company's short-term financial
            obligations due within one year. An example of a current
            liability is money owed to suppliers in the form of accounts
            payable.

  -   - **Bank and cash accounts**
        
          - A **bank account** is a financial account maintained by a
            bank or other financial institution in which the financial
            transactions between the bank and a customer are recorded.
          - A **cash account**, or cash book, may refer to a ledger in
            which all cash transactions are recorded. The cash account
            includes both the cash receipts and the cash payment
            journals.

  -   - **Expenses and income**
        
          - An **expense** is the costs of operations a company bears to
            generate revenues. It is simply defined as the cost one is
            required to spend on obtaining something. Common expenses
            include supplier payments, employee wages, factory leases,
            and equipment depreciation.
          - The term "**income**" generally refers to the amount of
            money, property, and other transfers of value received over
            a set period of time in exchange for services or products.

### Example

## Journal entries

Every financial document of the company (e.g., an invoice, a bank
statement, a pay slip, a capital increase contract) is recorded as a
journal entry, impacting several accounts.

For a journal entry to be balanced, the sum of all its debits must be
equal to the sum of all its credits.

## Reconciliation

`Reconciliation <../../accounting/bank/reconciliation/use_cases>` is the
process of linking journal items of a specific account and matching
credits and debits.

Its primary purpose is to link payments to their related invoices to
mark them as paid. This is done by doing a reconciliation on the
accounts receivable account and/or the accounts payable account.

Reconciliation is performed automatically by the system when:

  - the payment is registered directly on the invoice
  - the links between the payments and the invoices are detected at the
    bank matching process

## Bank Reconciliation

Bank reconciliation is the matching of bank statement lines (provided by
your bank) with transactions recorded internally (payments to suppliers
or from customers). For each line in a bank statement, it can be:

  - **matched with a previously recorded payment**: a payment is
    registered when a check is received from a customer, then matched
    when checking the bank statement.
  - **recorded as a new payment**: the payment's journal entry is
    created and reconciled with the related invoice when processing the
    bank statement.
  - **recorded as another transaction**: bank transfer, direct charge,
    etc.

Odoo should automatically reconcile most transactions; only a few should
need manual review. When the bank reconciliation process is finished,
the balance on the bank account in Odoo should match the bank
statement's balance.

<div class="rst-class">

checks-handling

</div>

## Checks Handling

There are two approaches to managing checks and internal wire transfers:

  - Two journal entries and a reconciliation
  - One journal entry and a bank reconciliation


---
## File: ./content/applications/finance/accounting/getting_started/initial_configuration/setup.md

# Initial setup of Odoo Accounting and Odoo Invoicing

When you first open your Odoo Accounting app, the *Accounting Overview*
page welcomes you with a step-by-step onboarding banner, a wizard that
helps you get started. This onboarding banner is displayed until you
choose to close it.

The settings visible in the onboarding banner can still be modified
later by going to `Accounting --> Configuration --> Settings`.

<div class="note">

<div class="title">

Note

</div>

Odoo Accounting automatically installs the appropriate **Fiscal
Localization Package** for your company, according to the country
selected at the creation of the database. This way, the right accounts,
reports, and taxes are ready-to-go. `Click here
<fiscal_localizations/packages>` for more information about Fiscal
Localization Packages.

</div>

## Accounting onboarding banner

The step-by-step Accounting onboarding banner is composed of four steps:

![Step-by-step onboarding banner in Odoo
Accounting](setup/setup_accounting_onboarding.png)

1.  `accounting-setup-company`
2.  `accounting-setup-bank`
3.  `accounting-setup-periods`
4.  `accounting-setup-chart`

### Company Data

This menu allows you to add your company’s details such as the name,
address, logo, website, phone number, email address, and Tax ID, or VAT
number. These details are then displayed on your documents, such as on
invoices.

![Add your company's details in Odoo Accounting and Odoo
Invoicing](setup/setup_company.png)

<div class="note">

<div class="title">

Note

</div>

You can also change these settings by going to `Settings --> General
Settings -->
Settings --> Companies` and clicking on **Update Info**.

</div>

### Bank Account

Connect your bank account to your database and have your bank statements
synced automatically. To do so, find your bank in the list, click on
*Connect*, and follow the instructions on-screen.

<div class="note">

<div class="title">

Note

</div>

`Click here <../../bank/bank_synchronization>` for more information
about this feature.

</div>

If your Bank Institution can’t be synchronized automatically, or if you
prefer not to sync it with your database, you may also configure your
bank account manually by clicking on *Create it*, and filling out the
form.

  - **Name**: the bank account's name, as displayed on Odoo.
  - **Account Number**: your bank account number (IBAN in Europe).
  - **Bank**: click on *Create and Edit* to configure the bank's
    details. Add the bank institution's name and its Identifier Code
    (BIC or SWIFT).
  - **Code**: this code is your Journal's *Short Code*, as displayed on
    Odoo. By default, Odoo creates a new Journal with this Short Code.
  - **Journal**: This field is displayed if you have an existing Bank
    Journal that is not linked yet to a bank account. If so, then select
    the *Journal* you want to use to record the financial transactions
    linked to this bank account or create a new one by clicking on
    *Create and Edit*.

<div class="note">

<div class="title">

Note

</div>

\- You can add as many bank accounts as needed with this tool by going
to `Accounting
--> Configuration`, and clicking on *Add a Bank Account*. - `Click here
<../../bank/setup/bank_accounts>` for more information about Bank
Accounts.

</div>

### Accounting Periods

Define here your **Fiscal Years**’ opening and closing dates, which are
used to generate reports automatically, and your **Tax Return
Periodicity**, along with a reminder to never miss a tax return
deadline.

By default, the opening date is set on the 1st of January and the
closing date on the 31st of December, as this is the most common use.

<div class="note">

<div class="title">

Note

</div>

You can also change these settings by going to `Accounting -->
Configuration -->
Settings --> Fiscal Periods` and updating the values.

</div>

### Chart of Accounts

With this menu, you can add accounts to your **Chart of Accounts** and
indicate their initial opening balances.

Basic settings are displayed on this page to help you review your Chart
of Accounts. To access all the settings of an account, click on the
*double arrow button* at the end of the line.

![Setup of the Chart of Accounts and their opening balances in Odoo
Accounting](setup/setup_chart_of_accounts.png)

<div class="note">

<div class="title">

Note

</div>

`Click here <chart_of_accounts>` for more information on how to
configure your Chart of Accounts.

</div>

## Invoicing onboarding banner

There is another step-by-step onboarding banner that helps you take
advantage of your Odoo Invoicing and Accounting apps. The *Invoicing
onboarding banner* is the one that welcomes you if you use the Invoicing
app rather than the Accounting app.

If you have Odoo Accounting installed on your database, you can reach it
by going to `Accounting --> Customers --> Invoices`.

The Invoicing onboarding banner is composed of four main steps:

![Step-by-step onboarding banner in Odoo
Invoicing](setup/setup_invoicing_onboarding.png)

1.  `invoicing-setup-company`
2.  `invoicing-setup-layout`
3.  `invoicing-setup-payment`
4.  `invoicing-setup-sample`

### Company Data

This form is the same as `the one presented in the Accounting onboarding
banner
<accounting-setup-company>`.

### Invoice Layout

With this tool, you can design the appearance of your documents by
selecting which layout template, paper format, colors, font, and logo
you want to use.

You can also add your *Company Tagline* and the content of the
documents’ *footer*. Note that Odoo automatically adds the company's
phone number, email, website URL, and Tax ID (or VAT number) to the
footer, according to the values you previously configured in the
`Company Data
<accounting-setup-company>`.

![Document layout configuration in Odoo
Invoicing](setup/setup_document_layout.png)

<div class="tip">

<div class="title">

Tip

</div>

Add your **bank account number** and a link to your **General Terms &
Condition** in the footer. This way, your contacts can find the full
content of your GT\&C online without having to print them on the
invoices you issue.

</div>

<div class="note">

<div class="title">

Note

</div>

These settings can also be modified by going to `Settings --> General
Settings`, under the *Business Documents* section.

</div>

### Payment Method

This menu helps you configure the payment methods with which your
customers can pay you.

<div class="important">

<div class="title">

Important

</div>

Configuring a *Payment Acquirer* with this tool also activates the
*Invoice Online Payment* option automatically. With this, users can
directly pay online, from their Customer Portal.

</div>

### Sample Invoice

Send yourself a sample invoice by email to make sure everything is
correctly configured.

<div class="seealso">

\* `../../bank/setup/bank_accounts` \* `chart_of_accounts` \*
`../../bank/bank_synchronization` \* `../../../fiscal_localizations` \*
[Odoo Tutorials: Accounting Basics](https://www.odoo.com/r/lsZ)

</div>


---
## File: ./content/applications/finance/accounting/getting_started/initial_configuration/chart_of_accounts.md

# Chart of accounts

The **chart of accounts (COA)** is the list of all the accounts used to
record financial transactions in the general ledger of an organization.

The accounts are usually listed in the order of appearance in the
financial reports. Most of the time, they are listed as follows :

  - Balance Sheet accounts:
      - Assets
      - Liabilities
      - Equity
  - Profit & Loss:
      - Income
      - Expense

When browsing your chart of accounts, you can filter the accounts by
number, in the left column, and also group them by `Account Type`.

![Group the accounts by type in Odoo
Accounting](chart_of_accounts/chart-of-accounts.png)

## Configuration of an account

The country you select at the creation of your database (or additional
company on your database) determines which **fiscal localization
package** is installed by default. This package includes a standard
chart of accounts already configured according to the country's
regulations. You can use it directly or set it according to your
company's needs.

<div class="warning">

<div class="title">

Warning

</div>

It is not possible to modify the **fiscal localization** of a company
once a journal entry has been posted.

</div>

To create a new account, go to `Accounting --> Configuration --> Chart
of Accounts`, click on `Create`, and fill out the form.

### Code and name

Each account is identified by its **code** and **name**, which also
indicates the account's purpose.

### Type

Correctly configuring the **account type** is critical as it serves
multiple purposes:

  - Information on the account's purpose and behavior
  - Generate country-specific legal and financial reports
  - Set the rules to close a fiscal year
  - Generate opening entries

To configure an account type, open the `Type` field's drop-down selector
and select the right type among the following list:

<table style="width:79%;">
<colgroup>
<col style="width: 22%" />
<col style="width: 20%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="header">
<th>Report</th>
<th>Category</th>
<th>Account Types</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Balance Sheet</p>
<blockquote>
<ul>
<li></li>
<li></li>
</ul>
</blockquote></td>
<td><blockquote>
<dl>
<dt>Assets</dt>
<dd><ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</dd>
</dl>
</blockquote>
<dl>
<dt>--------------+</dt>
<dd><dl>
<dt>Liabilities</dt>
<dd><ul>
<li></li>
<li></li>
<li></li>
</ul>
</dd>
</dl>
</dd>
<dt>--------------+</dt>
<dd><dl>
<dt>Equity</dt>
<dd><ul>
<li></li>
</ul>
</dd>
</dl>
</dd>
</dl></td>
<td><blockquote>
<p>Receivable</p>
</blockquote>
<dl>
<dt>-------------------------+</dt>
<dd><p>Bank and Cash</p>
</dd>
<dt>-------------------------+</dt>
<dd><p>Current Assets</p>
</dd>
<dt>-------------------------+</dt>
<dd><p>Non-current Assets</p>
</dd>
<dt>-------------------------+</dt>
<dd><p>Prepayments</p>
</dd>
<dt>-------------------------+</dt>
<dd><p>Fixed Assets</p>
</dd>
<dt>-------------------------+</dt>
<dd><p>Payable</p>
</dd>
<dt>-------------------------+</dt>
<dd><p>Credit Card</p>
</dd>
<dt>-------------------------+</dt>
<dd><p>Current Liabilities</p>
</dd>
<dt>-------------------------+</dt>
<dd><p>Non-current Liabilities</p>
</dd>
<dt>-------------------------+</dt>
<dd><p>Equity</p>
</dd>
<dt>-------------------------+</dt>
<dd><p>Current Year Earnings</p>
</dd>
</dl></td>
</tr>
<tr class="even">
<td><p>Profit &amp; Loss</p>
<blockquote>
<ul>
<li></li>
</ul>
</blockquote></td>
<td><blockquote>
<dl>
<dt>Income</dt>
<dd><ul>
<li></li>
</ul>
</dd>
</dl>
</blockquote>
<dl>
<dt>--------------+</dt>
<dd><dl>
<dt>Expense</dt>
<dd><ul>
<li></li>
<li></li>
</ul>
</dd>
</dl>
</dd>
</dl></td>
<td><blockquote>
<p>Income</p>
</blockquote>
<dl>
<dt>-------------------------+</dt>
<dd><p>Other Income</p>
</dd>
<dt>-------------------------+</dt>
<dd><p>Expense</p>
</dd>
<dt>-------------------------+</dt>
<dd><p>Depreciation</p>
</dd>
<dt>-------------------------+</dt>
<dd><p>Cost of Revenue</p>
</dd>
</dl></td>
</tr>
<tr class="odd">
<td>Other</td>
<td>Other</td>
<td>Off-Balance Sheet</td>
</tr>
</tbody>
</table>

#### Assets, deferred expenses, and deferred revenues automation

Some **account types** display a new field **to automate** the creation
of `assets
<assets-automation>` entries, `deferred expenses
<deferred-expenses-automation>` entries, and `deferred revenues
<deferred-revenues-automation>` entries.

You have three choices for the `Automation` field:

1.  `No`: this is the default value. Nothing happens.
2.  `Create in draft`: whenever a transaction is posted on the account,
    a draft entry is created, but not validated. You must first fill out
    the corresponding form.
3.  `Create and validate`: you must also select a **model**. Whenever a
    transaction is posted on the account, an entry is created and
    immediately validated.

### Default taxes

Select a **default tax** that will be applied when this account is
chosen for a product sale or purchase.

### Tags

Some accounting reports require **tags** to be set on the relevant
accounts. By default, you can choose among the tags that are used by the
*Cash Flow Statement*.

### Account groups

**Account groups** are useful to list multiple accounts as
*sub-accounts* of a bigger account and thus consolidate reports such as
the **Trial Balance**. By default, groups are handled automatically
based on the code of the group. For example, a new account
<span class="title-ref">131200</span> is going to be part of the group
<span class="title-ref">131000</span>.

### Create account groups manually

<div class="note">

<div class="title">

Note

</div>

Regular users should not need to create account groups manually. The
following section is only intended for rare and advanced use cases.

</div>

To create a new account group, `developer mode <developer-mode>` and
head to `Accounting app --> Configuration --> Account Groups`. Here,
create a new group and enter the `name, code prefix, and company` to
which that group account should be available. Note that you must enter
the same code prefix in both `From` and `to` fields.

![Account groups creation.](chart_of_accounts/account-groups.png)

To display your **Trial Balance** report with your account groups, go to
`Accounting
app-->Reporting-->Trial Balance`, then open the `Options` menu and
select `Hierarchy and Subtotals`.

![Account Groups in the Trial Balance in Odoo
Accounting](chart_of_accounts/trial-balance.png)

### Allow reconciliation

Some accounts, such as accounts made to record the transactions of a
payment method, can be used for the reconciliation of journal entries.

For example, an invoice paid with a credit card can be marked as `paid`
if reconciled with its payment. Therefore, the account used to record
credit card payments needs to be configured as **allowing
reconciliation**.

To do so, check the `Allow Reconciliation` box in the account's
settings, and save.

### Deprecated

It is not possible to delete an account once a transaction has been
recorded on it. You can make them unusable by using the **Deprecated**
feature.

To do so, check the `Deprecated` box in the account's settings, and
save.

<div class="seealso">

\* `../cheat_sheet` \* `../../payables/supplier_bills/assets` \*
`../../payables/supplier_bills/deferred_expenses` \*
`../../receivables/customer_invoices/deferred_revenues` \*
`../../../fiscal_localizations`

</div>


---
## File: ./content/applications/finance/accounting/getting_started/main_concept.md

# Main accounting concepts

## Double-entry bookkeeping

Odoo automatically creates all the behind-the-scenes journal entries for
each of your accounting transactions: customer invoices, point of sale
order, expenses, inventory moves, etc.

Odoo uses the rules of double-entry bookkeeping system: all journal
entries are automatically balanced (sum of debits = sum of credits).

<div class="seealso">

\- `Understand Odoo's accounting transactions per document
<cheat_sheet>`

</div>

## Accrual and Cash Basis Methods

Odoo supports both accrual and cash basis reporting. This allows you to
report income / expense at the time transactions occur (i.e., accrual
basis), or when payment is made or received (i.e., cash basis).

## Multi-companies

Odoo allows one to manage several companies within the same database.
Each company has its own chart of accounts and rules. You can get
consolidation reports following your consolidation rules.

Users can access several companies but always work in one company at a
time.

## Multi-currencies

Every transaction is recorded in the default currency of the company.
For transactions occurring in another currency, Odoo stores both the
value in the currency of the company and the value in the currency of
the transaction. Odoo can generate currencies gains and losses after the
reconciliation of the journal items.

Currency rates are updated once a day using a yahoo.com online
web-service.

## International Standards

Odoo accounting supports more than 50 countries. The Odoo core
accounting implements accounting standards that are common to all
countries. Specific modules exist per country for the specificities of
the country like the chart of accounts, taxes, or bank interfaces.

In particular, Odoo's core accounting engine supports:

  - Anglo-Saxon Accounting (U.S., U.K.,, and other English-speaking
    countries including Ireland, Canada, Australia, and New Zealand)
    where costs of good sold are reported when products are
    sold/delivered.
  - European accounting where expenses are accounted at the supplier
    bill.

Odoo has modules to comply with IFRS rules.

## Accounts Receivable and Payable

By default, Odoo uses a single account for all account receivable
entries and one for all accounts payable entries. You can create
separate accounts per customers/suppliers, but you don't need to.

As transactions are associated to customers or suppliers, you get
reports to perform analysis per customer/supplier such as the customer
statement, revenues per customers, aged receivable/payables, ...

## Wide range of financial reports

In Odoo, you can generate financial reports in real time. Odoo's reports
range from basic accounting reports to advanced management reports.
Odoo's reports include:

  - Performance reports (such as Profit and Loss, Budget Variance)
  - Position reports (such as Balance Sheet, Aged Payables, Aged
    Receivables)
  - Cash reports (such as Bank Summary)
  - Detail reports (such as Trial Balance and General Ledger)
  - Management reports (such as Budgets, Executive Summary)

Odoo's report engine allows you to customize your own report based on
your own formulae.

## Import bank feeds automatically

Bank reconciliation is a process that matches your bank statement lines,
as supplied by the bank, to your accounting transactions in the general
ledger. Odoo makes bank reconciliation easy by frequently importing bank
statement lines from your bank directly into your Odoo account. This
means you can have a daily view of your cashflow without having to log
into your online banking or wait for your paper bank statements.

Odoo speeds up bank reconciliation by matching most of your imported
bank statement lines to your accounting transactions. Odoo also
remembers how you've treated other bank statement lines and provides
suggested general ledger transactions.

## Calculate the tax you owe your tax authority

Odoo totals all your accounting transactions for your tax period and
uses these totals to calculate your tax obligation. You can then check
your sales tax by running Odoo's Tax Report.

## Inventory Valuation

Odoo support both periodic (manual) and perpetual (automated) inventory
valuations. The available methods are standard price, average price,
LIFO (for countries allowing it) and FIFO.

<div class="seealso">

\- `View impact of the valuation method on your transactions
</applications/inventory_and_mrp/inventory/management/reporting/inventory_valuation_config>`

</div>

## Easy retained earnings

Retained earnings are the portion of income retained by your business.
Odoo automatically calculates your current year earnings in real time so
no year-end journal or rollover is required. This is calculated by
reporting the profit and loss balance to your balance sheet report
automatically.


---
## File: ./content/applications/finance/payment_acquirers.md

  - show-content

# Payment Acquirers (Credit Cards, Online Payment)

<div class="toctree" data-titlesonly="">

payment\_acquirers/wire\_transfer payment\_acquirers/adyen
payment\_acquirers/authorize payment\_acquirers/paypal
payment\_acquirers/stripe

</div>

Odoo embeds several **payment acquirers** that allow your customers to
pay on their *Customer Portals* or your *eCommerce website*. They can
pay Sales Orders, invoices, or subscriptions with recurring payments
with their favorite payment methods such as **Credit Cards**.

Offering several payment methods increases the chances of getting paid
in time, or even immediately, as you make it more convenient for your
customers to pay with the payment method they prefer and trust.

![Pay online in the customer portal and select which payment acquirer to
use.](payment_acquirers/online-payment.png)

<div class="note">

<div class="title">

Note

</div>

Odoo apps delegate the handling of sensitive information to the
certified payment acquirer so that you don't ever have to worry about
PCI compliance.

This means that no sensitive information (such as credit card numbers or
credentials) is stored on Odoo servers or Odoo databases hosted
elsewhere. Instead, Odoo apps use a unique reference number to the data
stored safely in the payment acquirers' systems.

</div>

## Payment Acquirers

From an accounting perspective, we can distinguish two types of payment
acquirers: the payments that go directly on the bank account and follow
the usual reconciliation workflow, and the payment acquirers that are
third-party services and require you to follow another accounting
workflow.

### Bank Payments

  - `Wire Transfer <payment_acquirers/wire_transfer>`  
    When selected, Odoo displays your payment information with a payment
    reference. You have to approve the payment manually once you have
    received it on your bank account.

  - `SEPA Direct Debit
    <../finance/accounting/receivables/customer_payments/batch_sdd>`  
    Your customers can sign a SEPA Direct Debit mandate online and get
    their bank account charged directly.

### Online Payment Providers

|                                               | Redirection to the acquirer website | Payment from Odoo | Save Cards | Capture Amount Manually |
| --------------------------------------------- | ----------------------------------- | ----------------- | ---------- | ----------------------- |
| `Adyen
<payment_acquirers/adyen>`             | ✔                                   |                   |            |                         |
| Alipay                                        | ✔                                   |                   |            |                         |
| `Authorize.Net
<payment_acquirers/authorize>` | ✔                                   | ✔                 | ✔          | ✔                       |
| Buckaroo                                      | ✔                                   |                   |            |                         |
| Ingenico                                      | ✔                                   | ✔                 | ✔          |                         |
| `PayPal
<payment_acquirers/paypal>`           | ✔                                   |                   |            |                         |
| PayUMoney                                     | ✔                                   |                   |            |                         |
| SIPS                                          | ✔                                   |                   |            |                         |
| Stripe                                        | ✔                                   | ✔                 | ✔          |                         |

<div class="note">

<div class="title">

Note

</div>

Some of these Online Payment Providers can also be added as `Bank
Accounts
<../finance/accounting/bank/setup/bank_accounts>`, but this is **not**
the same process as adding them as Payment Acquirers. Payment Acquirers
allow customers to pay online, and Bank Accounts are added and
configured on your Accounting app to do a bank reconciliation, which is
an accounting control process.

</div>

## Configuration

Some of the features described in this section are available only with
some Payment Acquirers. Refer to `the table above
<payment_acquirers/online_providers>` for more details.

### Add a new Payment Acquirer

To add a new Payment acquirer and make it available to your customers,
go to `Accounting / Website --> Configuration --> Payment Acquirers`,
look for your payment acquirer, install the related module, and activate
it. To do so, open the payment acquirer and change its state from
*Disabled* to *Enabled*.

![Click on install, then on activate to make the payment acquirer
available on Odoo.](payment_acquirers/activation.png)

<div class="warning">

<div class="title">

Warning

</div>

We recommend using the *Test Mode* on a duplicated database or a test
database. The Test Mode is meant to be used with your test/sandbox
credentials, but Odoo generates Sales Orders and Invoices as usual. It
isn't always possible to cancel an invoice, and this could create some
issues with your invoices numbering if you were to test your payment
acquirers on your main database.

</div>

#### Credentials tab

If not done yet, go to the **Online Payment Provider**'s website, create
an account, and make sure to have the credentials required for
third-party use. Odoo requires these credentials to communicate with the
Payment Acquirer and get the confirmation of the *payment
authentication*.

The form in this section is specific to the Payment Acquirer you are
configuring. Please refer to the related documentation for more
information.

#### Configuration tab

You can change the Payment Acquirer front-end appearance by modifying
its name under the **Displayed as** field and which credit card icons to
display under the **Supported Payment Icons** field.

##### Save and reuse Credit Cards

With the **Save Cards** feature, Odoo can store **Payment Tokens** in
your database, which can be used for subsequent payments, without having
to reenter the payment details. This is particularly useful for
subscriptions' recurring payments.

##### Place a hold on a card

If the **Capture Amount Manually** field is enabled, the funds are
reserved for a few days on the customer's card, but not charged yet. You
must then go to the related Sales Order and manually *capture* the funds
before its automatic cancellation, or *void the transaction* to unlock
the funds from the customer's card.

##### Payment Flow

Choose in the **Payment Flow** field if to redirect the user to the
payment acquirer's portal to authenticate the payment, or if to stay on
the current page and authenticate the payment from Odoo.

<div class="note">

<div class="title">

Note

</div>

Some features are available only if you select *Redirection to the
acquirer website*.

</div>

<div class="warning">

<div class="title">

Warning

</div>

When configuring a payment acquirer with the payment flow `Payment from
Odoo`, the payment acquirer is visible only to people who have an
account and are logged in on the related database. To add a payment
acquirer visible to everyone, the payment flow has to be set to
`Redirection to the acquirer website`.

</div>

##### Countries

Restrict the use of the Payment Acquirer to a selection of countries.
Leave this field blank to make the Payment Acquirer available to all
countries.

##### Payment Journal

The **Payment Journal** selected for your Payment Acquirer must be a
*Bank* journal.

<div class="important">

<div class="title">

Important

</div>

In many cases, Odoo automatically creates a new **Journal** and a new
**Account** when you activate a new Payment Acquirer. Both of them are
preset to work out-of-the-box, but we strongly recommend you to make
sure these fields are correctly set according to your accounting needs,
and adapt them if necessary.

</div>

#### Messages tab

Change here the messages displayed by Odoo after a payment's
confirmation or failure.

### Multi-company environment

If you have multiple companies on your database and wish to use the same
payment acquirer for several or all of them, switch to the company on
which the payment acquirer is configured, then go to `Accounting /
Website --> Configuration --> Payment Acquirers` and select the payment
acquirer to use. Then, click `Action --> Duplicate`, and in the
`Company` field, set the company for which you want to have that payment
acquirer available. Configure the rest of the fields according to your
needs, and `Save`.

<div class="note">

<div class="title">

Note

</div>

Creating a payment acquirer from the `Create` button is not supported.
You *must* use the `Duplicate` action instead.

</div>

## Accounting perspective

The **Bank Payments** that go directly to one of your bank accounts
follow their usual reconciliation workflows. However, payments recorded
with **Online Payment Providers** require you to consider how you want
to record your payments' journal entries. We recommend you to ask your
accountant for advice.

Odoo default method is to record the payments on a *Current Assets
Account*, on a dedicated *Bank Journal*, once the *Payment
Authentication* is confirmed. At some point, you transfer the funds from
the *Payment Acquirer* to your *Bank Account*.

Here are the requirements for this to work:

  - Bank Journal
      - The Journal's **type** must be *Bank Journal*.
    
      - Select the right **Default Debit Account** and **Default Credit
        Account**.
    
      - Under the *Advanced Settings* tab, make sure that **Posting** is
        set as *Post At Payment Validation*.  
        This implies that the Journal Entry is recorded directly when
        your Odoo database receives the confirmation of the *Payment
        Authentication* from the Online Payment Provider.
  - Current Asset Account
      - The Account's **type** is *Current Assets*
      - The Account must **Allow Reconciliation**

<div class="note">

<div class="title">

Note

</div>

In many cases, Odoo automatically creates a new **Journal** and a new
**Current Asset Account** when you activate a new Payment Acquirer. You
can modify them if necessary.

</div>

<div class="seealso">

  - `../finance/accounting/receivables/customer_payments/recording`
  - `payment_acquirers/wire_transfer`
  - `payment_acquirers/authorize`
  - `payment_acquirers/paypal`

</div>


---
## File: ./content/applications/finance/payment_acquirers/adyen/install_pay_by_link_patch.md

# Install the Adyen Pay by Link Patch

Starting October 2022, due to [Adyen deprecating their Hosted Payment
Page
solution](https://docs.adyen.com/online-payments/classic-integrations/hosted-payment-pages/deprecation),
`Adyen <../adyen>` needs to be updated to continue accepting payments.

<div class="note">

<div class="title">

Note

</div>

If your Odoo database is created after the update was released, the
update module is installed automatically. To check if this module is
already installed, go to `Apps`, remove the `Apps` filter and search for
`Adyen`. If the module `Adyen Payment
Acquirer/Pay by Link Patch` is present and marked as installed, your
Odoo database is already up-to-date and you can proceed with the
configuration step of `Adyen <../adyen>`.

</div>

## Update Odoo to the latest release

The new integration is made available through a new Odoo module; to be
able to install it, you must make sure that your Odoo source code is
up-to-date.

If you use Odoo on Odoo.com or Odoo.sh platform, your code is already
up-to-date and you can proceed to the next step.

If you use Odoo with an on-premise setup or through a partner, then you
must update your installation as detailed in `this documentation page
</administration/maintain/update>` or by contacting your integrating
partner.

## Update the list of available modules

New modules must be *discovered* by your Odoo instance to be available
in the **Apps** menu.

To do so, activate the `developer mode <developer-mode>`, and go to
`Apps -->
Update Apps List`. A wizard will ask for confirmation.

## Install the Adyen Payment Acquirer/Pay by Link Patch

<div class="warning">

<div class="title">

Warning

</div>

You should never install new modules in your production database without
first testing them in a duplicate or staging environment. For Odoo.com
customers, a duplicate database can be created from the database
management page. For Odoo.sh users, you should use a staging or
duplicate database. For on-premise users, you should use a staging
environment---contact your integrating partner for more information
regarding how to test a new module in your particular setup.

</div>

The module should now be available in your `Apps` menu. Remove the
`Apps` filter and search for `Adyen`; the module `Adyen Payment
Acquirer/Pay by Link Patch` should be available for installation. If you
cannot find the module after having updated the list of available
modules, it means your Odoo source code is not up-to-date; refer to step
one of this page.

Once the module is installed, configure your acquirer following the
instructions on the `Adyen <../adyen>` page.


---
## File: ./content/applications/finance/payment_acquirers/wire_transfer.md

# Wire transfers

The **Wire transfer** payment method allows you to provide payment
instructions to your customers, such as the bank details and
communication. They are displayed:

  - at the end of the checkout process, once the customer has selected
    `Wire transfer` as a payment method and clicked the `Pay now`
    button:
    
    ![Payment instructions at
    checkout](wire_transfer/payment_instructions_checkout.png)

  - on the customer portal:
    
    ![Payment instructions on the customer
    portal](wire_transfer/payment_instructions_portal.png)

<div class="note">

<div class="title">

Note

</div>

\- While this method is very accessible and requires minimal setup, it
is very inefficient process-wise. We recommend setting up a `payment
acquirer <../payment_acquirers>` instead. - Online orders remain in the
`Quotation sent` (i.e., unpaid order) stage until you receive the
payment and `Confirm` the order.

</div>

<div class="tip">

<div class="title">

Tip

</div>

**Wire transfer** can be used as a template for other payment methods
that are processed manually, such as checks, by renaming or duplicating
it.

</div>

## Configuration

**Wire Transfer** is installed and enabled by default.

To configure it, go to `Accounting / Website --> Configuration -->
Payment Acquirers`, and open the `Wire Transfer` card. Then, select the
`Communication` to be used in the `Configuration` tab:

>   - `Based on Document Reference`: sales order or invoice number
>   - `Based on Customer ID`: customer identifier

Define the payment instructions in the `Messages` tab:

![Define payment instructions](wire_transfer/payment_instructions.png)

<div class="seealso">

`../accounting/getting_started/cheat_sheet`

</div>


---
## File: ./content/applications/finance/payment_acquirers/stripe.md

# Stripe

[Stripe](https://stripe.com/) is a United States-based online payment
solution provider, allowing businesses to accept **credit cards** and
other payment methods.

## Enable Local Payment Methods

Local payment methods are payment methods that are only available for
certain merchants and customers countries and currencies.

The Stripe connector in Odoo supports the following local payment
methods:

  - Bancontact
  - EPS
  - Giropay
  - iDeal:
  - Przelewy24 (P24)

To enable some of these local payment methods with Stripe, list them as
supported payment icons. To do so, go to `Payment Acquirers --> Stripe
--> Configuration` and add the desired payment methods in the
**Supported Payment Icons** field. If the desired payment method is
already listed, you don't have anything to do.

![Select and add icons of the payment methods you want to
enable](stripe/stripe_enable_local_payment_method.png)

<div class="note">

<div class="title">

Note

</div>

If your local payment method is not listed above but is supported by
Stripe, we cannot guarantee that your local payment method works with
Odoo.

</div>

<div class="important">

<div class="title">

Important

</div>

When configuring a payment acquirer with the payment flow `Payment from
Odoo`, the payment acquirer is visible only to people who have an
account and are logged-in on the related database. To add a payment
acquirer visible to everyone, the payment flow has to be set to
`Redirection to the acquirer website`.

</div>


---
## File: ./content/applications/finance/payment_acquirers/paypal.md

# Configure your Paypal account

Paypal is available and popular worldwide. It doesn’t charge any
subscription fee and creating an account is very easy. That’s why we
definitely recommend it for starters in Odoo. It works as a seamless
flow where the customer is routed to Paypal website to register the
payment.

## Paypal account

A business account is needed to get paid with Paypal. Create a [Paypal
Business Account \<https://www.paypal.com/us/merchantsignup/
applicationChecklist?signupType=CREATE\_NEW\_ACCOUNT\&productIntentId=wp\_standard\>]()
or upgrade your Personal account to a Business account. Go to the Paypal
settings and click on *Upgrade to a Business account*. Then follow the
few configuration steps.

## Settings in Paypal

First, let’s see how to set up your Paypal account in order to build a
seamless customer experience with Odoo.  
Log in and open the settings. Go to `Products & Services --> Website
payments` and click **Update** on **Website preferences**.

![image](paypal/paypal01.png)

### Auto Return

*Auto Return* automatically redirects your customers to Odoo once the
payment is processed. Check *Auto Return* and enter your domain name
with the suffix `/shop/confirmation` as *Return URL* (e.g.
`https://yourcompany.odoo.com/shop/confirmation`).

This URL is requested in Paypal but not used in practice as Odoo
transmits it at each transaction. Don’t worry if you manage several
sales channels or Odoo databases.

![image](paypal/paypal02.png)

### Payment Data Transfer (PDT)

*Payment Data Transfer* delivers the payment confirmation to Odoo as
soon as it is processed. Without it, Odoo cannot end the sales flow.
This setting must be activated as well. When saving, an *Identity Token*
is generated. You will be later requested to enter it in Odoo.

![image](paypal/paypal03.png)

Paypal Account Optional

We advise you to not prompt customers to log in with a Paypal account
when they get to pay. Let them pay with debit/credit cards as well, or
you might lose some deals. Make sure this setting is turned on.

![image](paypal/paypal04.png)

### Instant Payment Notification (IPN)

PDT sends order confirmations once and only once. As a result, your site
must be running when it happens; otherwise, it will never receive the
message. That’s why we advise to activate the *Instant Payment
Notification* (IPN) on top. With IPN, delivery of order confirmations is
virtually guaranteed since IPN resends a confirmation until your site
acknowledges receipt.

To activate IPN, get back to *Website payments* menu and click *Update*
in *Instant Payment Notification*.  
The *Notification URL* to set is your domain name + “payment/paypal/ipn”
(e.g. `https://yourcompany.odoo.com/payment/paypal/ipn`).

![image](paypal/paypal05.png)

### Payment Messages Format

If you use accented characters (or anything else than basic Latin
characters) for your customer names, addresses... you MUST configure the
encoding format of the payment request sent by Odoo to Paypal.

<div class="danger">

<div class="title">

Danger

</div>

If you don't configure this setting, some transactions fail without
notice.

</div>

To do so, open:

  - [this page for a test
    account](https://sandbox.paypal.com/cgi-bin/customerprofileweb?cmd=_profile-language-encoding)
  - [this page for a production
    account](https://www.paypal.com/cgi-bin/customerprofileweb?cmd=_profile-language-encoding)

Then, click *More Options* and set the two default encoding formats as
**UTF-8**.

![image](paypal/paypal07.png)

![image](paypal/paypal08.png)

Your Paypal account is ready\!

<div class="tip">

<div class="title">

Tip

</div>

If you want your customers to pay without creating a Paypal account,
*Paypal Account Optional* needs to be turned on.

![image](paypal/paypal_account_optional.png)

</div>

<div class="tip">

<div class="title">

Tip

</div>

For Encrypted Website Payments & EWP\_SETTINGS error, please check the
[Paypal documentation \<https://developer.paypal.com/docs/
classic/paypal-payments-standard/integration-guide/encryptedwebpayments/
\#encrypted-website-payments-ewp\>]().

</div>

## Settings in Odoo

### Activation

Activate *Paypal* from the config bar of Sales, Invoicing and eCommerce
apps, or from the configuration menu of *Payment Acquirers*.

### Credentials

Odoo requires three Paypal credentials:

  - *Email ID* is your login email address in Paypal.
  - *Merchant ID* can be found in the settings of your Paypal account,
    in `Account Settings --> Business information`.
  - *Paypal PDT Token* is given in *Website payments* configuration as
    explained here above.

![image](paypal/paypal09.png)

### Fees

You can charge extra fees to your customers for paying with Paypal; This
to cover the transaction fees Paypal charges you. Once redirected to
Paypal, your customer sees an extra applied to the order amount.

To activate this, go to the `Fees` tab of Paypal configuration in Odoo
and check `Add Extra Fees`.

![image](paypal/paypal10.png)

You can refer to [Paypal
Fees](https://www.paypal.com/webapps/mpp/paypal-fees) to set up fees.

<div class="note">

<div class="title">

Note

</div>

[Traders in the EU
\<https://europa.eu/youreurope/citizens/consumers/shopping/pricing-payments/
index\_en.htm\>]() are not allowed to charge extra fees for paying with
credit cards.

</div>

## Go live\!

Your configuration is ready to roll. Make sure *Production* mode is on.
Then publish the payment method by clicking the *Published* button right
next to it.

![image](paypal/paypal11.png)

![image](paypal/paypal12.png)

Paypal is now available in your payment form available in eCommerce,
Sales and Invoicing apps. Customers are redirected to Paypal website
when hitting *Pay Now*. They get back to a confirmation page in Odoo
once the payment is processed.

![image](paypal/paypal13.png)

## Test environment

You can test the entire payment flow in Odoo thanks to Paypal Sandbox
accounts.

Log in to [Paypal Developer Site](https://developer.paypal.com/) with
your Paypal credentials.

This will create two sandbox accounts:

  - A business account (to use as merchant, e.g.
    <pp.merch01-facilitator@example.com>).
  - A default personal account (to use as shopper, e.g.
    <pp.merch01-buyer@example.com>).

Log in to Paypal Sandbox with the merchant account and follow the same
configuration instructions. Enter your sandbox credentials in Odoo and
make sure Paypal is still set on *Test Environment*. Also, make sure the
automatic invoicing is not activated in your eCommerce settings, to not
generate invoices when a fictitious transaction is completed.

Run a test transaction from Odoo using the sandbox personal account.

<div class="seealso">

\- `../payment_acquirers` -
`../../websites/ecommerce/shopper_experience/payment_acquirer`

</div>


---
## File: ./content/applications/finance/payment_acquirers/adyen.md

  - show-content

# Adyen

<div class="toctree" data-titlesonly="">

adyen/install\_pay\_by\_link\_patch

</div>

[Adyen](https://www.adyen.com/) is a Dutch company that offers several
online payment possibilities.

<div class="seealso">

\- `adyen/install_pay_by_link_patch` - `payment_acquirers/add_new` -
`../payment_acquirers`

</div>

<div class="note">

<div class="title">

Note

</div>

Adyen works only with customers processing **more** than **10 million
annually** or invoicing a **minimum** of **1.000** transactions **per
month**.

</div>

## Configuration

### Credentials tab

Odoo needs your **API Credentials** to connect with your Adyen account,
which comprise:

  - **Merchant Account**: The code of the merchant account to use with
    Adyen.
  - `API Key <adyen/api_key>`: The API key of the webservice user.
  - `HMAC Key <adyen/hmac_key>`: The HMAC key of the webhook.
  - `Checkout API URL <adyen/urls>`: The base URL for the Checkout API
    endpoints.

You can copy your credentials from your Adyen account, and paste them in
the related fields under the **Credentials** tab.

<div class="important">

<div class="title">

Important

</div>

If you are trying Adyen as a test, with a *test account*, change the
**State** to *Test Mode*. We recommend doing this on a test Odoo
database, rather than on your main database.

</div>

#### API Key

In order to retrieve the API Key, log into your Adyen account, go to
`Developers --> API Credentials`. - If you already have an API user,
open it. - If you don't have an API user yet, click on **Create new
credential**. Go to `Authentication` and get or generate your **API
Key**. Be careful to copy your API key as you'll not be allowed to get
it later without generating a new one.

#### HMAC key

In order to retrieve the HMAC Key, you'll need to configure a
<span class="title-ref">Standard Notification</span> webhook. For this,
log into your Adyen account then go to `Developers --> Webhooks --> Add
webhook
--> Add Standard notification`.

![Configure a webhook.](adyen/add-webhook.png)

There, in `General --> Server Configuration --> URL`, enter your server
address followed by
<span class="title-ref">/payment/adyen/notification</span> and in
`General --> Server Configuration
--> Method`, select <span class="title-ref">HTTP Post</span>.

![Enter the notification URL.](adyen/webhook-url.png)

Then continue in `Security --> HMAC Key --> Generate new HMAC key`. Be
careful to copy it as you'll not be allowed to get it later without
generating a new one.

You have to save the webhook to finalize its creation.

#### URLs

To retrieve the URLs, log into your Adyen account, go to `Developers -->
API URLs`. Pick one of the URLs listed next to **Checkout API** as your
**Checkout API URL**.

![Get the links for the different API.](adyen/api-urls.png)


---
## File: ./content/applications/finance/payment_acquirers/authorize.md

# Authorize.Net

[Authorize.Net](https://www.authorize.net) is a United States-based
online payment solution provider allowing businesses to accept **credit
cards**. Among others, it offers the ability to process customer
payments after delivery.

## Authorize.Net account

First, choose a plan and [create an Authorize.Net
account](https://www.authorize.net/sign-up/pricing.html).

Odoo needs the Authorize.Net account's **API credentials and keys** to
connect to it, which comprises the:

  - API login ID,
  - Transaction key, and
  - Signature key.

To retrieve them, log in to Authorize.Net and go to `Account -->
Security Settings:
API Credentials & Keys`. While the `API Login ID` is displayed, both
keys need to be generated.

To do so, select `New Transaction Key` and click `Submit`. Copy the key
and store it somewhere secure as it will not be displayed afterward.
Repeat the same process for the `Signature Key`.

![Generating the transaction and signature keys on
Authorize.Net](authorize/authorize-api-keys.png)

<div class="seealso">

[Authorize.Net Getting Started
Guide](https://support.authorize.net/knowledgebase/Knowledgearticle/?code=000002939)

</div>

## Configuration

<div class="seealso">

Refer to the `payment acquirers documentation <../payment_acquirers>`
for more information about general configuration options.

</div>

To activate Authorize.Net as a payment acquirer in Odoo, go to
`Accounting -->
Configuration --> Payment Acquirers`. Find `Authorize.Net`, click the
`Activate` button, and change the `State` to `Enabled`.

### Credentials

Fill in the `API Login Id`, `API Transaction Key`, and `API Signature
Key` fields with the values displayed or generated on Authorize.Net's
`API Credentials &
Keys` page, and `Save`.

<div class="note">

<div class="title">

Note

</div>

An `API Client Key` is only necessary if the `Payment from Odoo` option
is selected as `Payment Flow <payment_acquirers/payment_flow>`.

</div>

<div class="important">

<div class="title">

Important

</div>

To test Authorize.Net with a **sandbox account**, first change the
`State` field to `Test Mode`. It is recommended to do so on a test Odoo
database, rather than on a production database.

<div class="note">

<div class="title">

Note

</div>

If the `Test Mode` is used with the credentials of a non-sandbox
account, it will result in the following error: *The merchant login ID
or password is invalid or the account is inactive*.

</div>

</div>

### Payment flow

It is possible either to redirect users to Authorize.Net's portal to
authenticate the payment or to keep users on the current page and
authenticate the payment from Odoo.

To configure the payment flow, go to `Accounting --> Configuration -->
Payment
Acquirers --> Authorize.Net --> Configuration tab`. Under `Payment
Flow`, select `Redirection to the acquirer website` or `Payment from
Odoo` and `Save`.

#### Payment from Odoo

If `Payment from Odoo` is selected, an `API Client Key` is needed. To
generate one, go to `Accounting --> Configuration --> Payment Acquirers
--> Authorize.Net -->
Credentials tab`. Click `Generate Client Key` to automatically fill in
the `API
Client Key` field and `Save`.

#### Redirection to the acquirer website

If `Redirection to the acquirer website` is selected, a `Default Receipt
URL` and `Default Relay Response URL` should be added to the
Authorize.Net account.

To do so, log in to Authorize.Net, and go to `Account --> Transaction
Format
Settings: Response/Receipt URLs`. Click `Add URL`, enter the URL
following the format below, and click `Submit`:

  - `Default Receipt URL`: add
    <span class="title-ref">/payment/authorize/return</span> after the
    main website URL.
    
    <div class="example">
    
    <span class="title-ref">https://example.odoo.com/payment/authorize/return</span>
    
    </div>

  - `Default Relay Response URL`: add
    <span class="title-ref">/shop/confirmation</span> after the main
    website URL.
    
    <div class="example">
    
    <span class="title-ref">https://example.odoo.com/shop/confirmation</span>
    
    </div>

![Adding the response and receipt URLs on
Authorize.Net](authorize/authorize-redirect-urls.png)

<div class="note">

<div class="title">

Note

</div>

Failing to complete this step results in the following error: *The
referrer, relay response or receipt link URL is invalid*.

</div>

### Capture payments after delivery

To reserve funds for 30 days on the customer's card without charging
them yet, go to `Accounting --> Configuration --> Payment Acquirers -->
Authorize.Net -->
Configuration tab`, enable `Capture Amount Manually`, and `Save`.

To capture the payment, go to the related sales order and click `Capture
Transaction`. If the order is canceled, click `Void Transaction` to
unlock the funds from the customer's card.

![Capturing the payment manually](authorize/authorize-capture.png)

<div class="warning">

<div class="title">

Warning

</div>

After **30 days**, transactions are **voided automatically** by
Authorize.Net.

</div>

## Import an Authorize.Net statement

### Export from Authorize.Net

<div id="authorize-import-template">

<div class="admonition">

Template

[Download the Excel import
template](https://docs.google.com/spreadsheets/d/1CMVtBWLLVIrUpYA92paw-cL7-WdKLbaa/edit?usp=share_link&ouid=105295722917050444558&rtpof=true&sd=true)

</div>

</div>

To export a statement:

  - Log in to Authorize.Net.
  - Go to `Account --> Statements --> eCheck.Net Settlement Statement`.
  - Define an export range using an *opening* and *closing* batch
    settlement. All transactions within the two batch settlements will
    be exported to Odoo.
  - Select all transactions within the desired range, copy them, and
    paste them into the `Report 1 Download` sheet of the `Excel import
    template
    <authorize-import-template>`.

![Selecting Authorize.Net transactions to
import](authorize/authorize-report1.png)

<div class="example">

![Settlement batch of an Authorize.Net
statement](authorize/authorize-settlement-batch.png)

In this case, the first batch (01/01/2021) of the year belongs to the
settlement of 12/31/2020, so the **opening** settlement is from
12/31/2020.

</div>

Once the data is in the `Report 1 Download` sheet:

  - Go to the `Transaction Search` tab on Authorize.Net.
  - Under the `Settlement Date` section, select the previously used
    range of batch settlement dates in the `From:` and `To:` fields and
    click `Search`.
  - When the list has been generated, click `Download to File`.
  - In the pop-up window, select `Expanded Fields with CAVV
    Response/Comma Separated`, enable `Include Column Headings`, and
    click `Submit`.
  - Open the text file, select `All`, copy the data, and paste it into
    the `Report
    2 Download` sheet of the `Excel import template
    <authorize-import-template>`.
  - Transit lines are automatically filled in and updated in the
    `transit for report 1` and `transit for report 2` sheets of the
    `Excel import template
    <authorize-import-template>`. Make sure all entries are present, and
    **if not**, copy the formula from previously filled-in lines of the
    `transit for report 1` or `2` sheets and paste it into the empty
    lines.

<div class="important">

<div class="title">

Important

</div>

To get the correct closing balance, **do not remove** any line from the
Excel sheets.

</div>

### Import into Odoo

To import the data into Odoo:

  - Open the `Excel import template <authorize-import-template>`.
  - Copy the data from the `transit for report 2` sheet and use *paste
    special* to only paste the values in the `Odoo Import to CSV` sheet.
  - Look for *blue* cells in the `Odoo Import to CSV` sheet. These are
    chargeback entries without any reference number. As they cannot be
    imported as such, go to `Authorize.Net --> Account --> Statements
    --> eCheck.Net Settlement Statement`.
  - Look for `Charge Transaction/Chargeback`, and click it.
  - Copy the invoice description, paste it into the `Label` cell of the
    `Odoo
    Import to CSV` sheet, and add <span class="title-ref">Chargeback
    /</span> before the description.
  - If there are multiple invoices, add a line into the `Excel import
    template
    <authorize-import-template>` for each invoice and copy/paste the
    description into each respective `Label` line.

<div class="note">

<div class="title">

Note

</div>

For **combined chargeback/returns** in the payouts, create a new line in
the `Excel import
template <authorize-import-template>` for each invoice.

</div>

<div class="example">

![Chargeback description](authorize/authorize-chargeback-desc.png)

</div>

  - Next, delete *zero transaction* and *void transaction* line items,
    and change the format of the `Amount` column in the `Odoo Import to
    CSV` sheet to *Number*.
  - Go back to `eCheck.Net Settlement Statement --> Search for a
    Transaction` and search again for the previously used batch
    settlements dates.
  - Verify that the batch settlement dates on eCheck.Net match the
    related payments' dates found in the `Date` column of the `Odoo
    Import to CSV`.
  - If it does not match, replace the date with the one from eCheck.Net.
    Sort the column by *date*, and make sure the format is
    <span class="title-ref">MM/DD/YYYY</span>.
  - Copy the data - column headings included - from the `Odoo Import to
    CSV` sheet, paste it into a new Excel file, and save it using the
    CSV format.
  - Open the Accounting app, go to `Configuration --> Journals`, tick
    the `Authorize.Net` box, and click `Favorites --> Import records -->
    Load
    file`. Select the CSV file and upload it into Odoo.

<div class="tip">

<div class="title">

Tip

</div>

List of [eCheck.Net return
codes](https://support.authorize.net/knowledgebase/Knowledgearticle/?code=000001293)

</div>

<div class="seealso">

\- [Authorize.Net: Getting Started
Guide](https://support.authorize.net/s/article/Authorize-Net-Getting-Started-Guide)
- `../payment_acquirers` -
`../../websites/ecommerce/shopper_experience/payment_acquirer`

</div>


---
## File: ./content/applications/finance/fiscal_localizations/colombia.md

# Colombia

Odoo's Colombian localization package provides accounting, fiscal, and
legal features for databases in Colombia – such as chart of accounts,
taxes, and electronic invoicing.

In addition, a series of videos on the subject is also available. These
videos cover how to start from scratch, set up configurations, complete
common workflows, and provide in-depth looks at some specific use cases
as well.

<div class="seealso">

[Smart Tutorial - Colombian
Localization](https://www.odoo.com/slides/smart-tutorial-localizacion-de-colombia-132).

</div>

## Configuration

### Modules installation

`Install <general/install>` the following modules to get all the
features of the Colombian localization:

| Name                                              | Technical name                                   | Description                                                                                                                                                                                                                                   |
| ------------------------------------------------- | ------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `Colombia - Accounting`                           | <span class="title-ref">l10n\_co</span>          | Default `fiscal localization package <fiscal_localizations/packages>`. This module adds the base accounting features for the Colombian localization: chart of accounts, taxes, withholdings, and identification document type.                |
| `Colombian - Accounting Reports`                  | <span class="title-ref">l10n\_co\_reports</span> | Includes accounting reports for sending certifications to suppliers for withholdings applied.                                                                                                                                                 |
| `Electronic invoicing for Colombia with Carvajal` | <span class="title-ref">l10n\_co\_edi</span>     | This module includes the features required for integration with Carvajal, and generates the electronic invoices and support documents related to the vendor bills, based on `DIAN (Dirección de Impuestos y Aduanas Nacionales)` regulations. |
| `Colombian - Point of Sale`                       | <span class="title-ref">l10n\_co\_pos</span>     | Includes Point of Sale receipts for Colombian localization.                                                                                                                                                                                   |

<div class="note">

<div class="title">

Note

</div>

When <span class="title-ref">Colombia</span> is selected for a company's
`Fiscal Localization`, Odoo automatically installs certain modules.

</div>

### Company configuration

To configure your company information, go to the `Contacts` app, and
search for your company.

Alternatively, activate `developer mode <developer-mode>` and navigate
to `General Setting --> Company --> Update Info --> Contact`. Then, edit
the contact form and configure the following information:

  - `Company Name`.
  - `Address`: Including `City`, `Department` and `ZIP` code.
  - `Identification Number`: Select the `Identification Type`
    (<span class="title-ref">NIT</span>, <span class="title-ref">Cédula
    de Ciudadanía</span>, <span class="title-ref">Registro Civil</span>,
    etc.). When the `Identification Type` is
    <span class="title-ref">NIT</span>, the `Identification Number`
    **must** have the *verification digit* at the end of the ID prefixed
    by a hyphen (<span class="title-ref">-</span>).

Next, configure the `Fiscal Information` in the `Sales & Purchase` tab:

  - `Obligaciones y Responsabilidades`: Select the fiscal responsibility
    for the company (<span class="title-ref">O-13</span> Gran
    Contribuyente, <span class="title-ref">O-15</span> Autorretenedor,
    <span class="title-ref">O-23</span> Agente de retención IVA,
    <span class="title-ref">O-47</span> Regimen de tributación simple,
    <span class="title-ref">R-99-PN</span> No Aplica).
  - `Gran Contribuyente`: If the company is *Gran Contribuyente* this
    option should be selected.
  - `Fiscal Regimen`: Select the Tribute Name for the company
    (<span class="title-ref">IVA</span>,
    <span class="title-ref">INC</span>, <span class="title-ref">IVA e
    INC</span>, or <span class="title-ref">No Aplica</span>)
  - `Commercial Name`: If the company uses a specific commercial name,
    and it needs to be displayed in the invoice.

### Carjaval credentials configuration

Once the modules are installed, the user credentials **must** be
configured, in order to connect with Carvajal Web Service. To do so,
navigate to `Accounting --> Configuration -->
Settings` and scroll to the `Colombian Electronic Invoicing` section.
Then, fill in the required configuration information provided by
Carvajal:

  - `Username` and `Password`: Username and password (provided by
    Carvajal) to the company.
  - `Company Registry`: Company's NIT number *without* the verification
    code.
  - `Account ID`: Company's NIT number followed by
    <span class="title-ref">\_01</span>.
  - `Colombia Template Code`: Select one of the two available templates
    (<span class="title-ref">CGEN03</span> or
    <span class="title-ref">CGNE04</span>) to be used in the PDF format
    of the electronic invoice.

Enable the `Test mode` checkbox to connect with the Carvajal testing
environment.

Once Odoo and Carvajal are fully configured and ready for production,
deactivate the `Test
mode` checkbox to use the production database.

![Configure credentials for Carvajal web service in
Odoo.](colombia/carvajal-configuration.png)

<div class="important">

<div class="title">

Important

</div>

`Test mode` must **only** be used on duplicated databases, **not** the
production environment.

</div>

### Report data configuration

Report data can be defined for the fiscal section and bank information
of the PDF as part of the configurable information sent in the XML.

Navigate to `Accounting --> Configuration --> Settings`, and scroll to
the `Colombian Electronic Invoicing` section, in order to find the
`Report
Configuration` fields. Here the header information for each report type
can be configured.

  - `Gran Contribuyente`
  - `Tipo de Régimen`
  - `Retenedores de IVA`
  - `Autorretenedores`
  - `Resolución Aplicable`
  - `Actividad Económica`
  - `Bank Information`

### Master data configuration

#### Partner

Partner contacts can be created in the *Contacts* app. To do so,
navigate to `Contacts`, and click the `Create` button.

Then, name the contact, and using the radio buttons, select the contact
type, either `Individual` or `Company`.

Complete the full `Address`, including the `City`, `State`, and `ZIP`
code. Then, complete the identification and fiscal information.

##### Identification information

Identification types, defined by the `DIAN (Dirección de Impuestos y
Aduanas Nacionales)`, are available on the partner form, as part of the
Colombian localization. Colombian partners **must** have their
`Identification Number` (VAT) and `Document Type` set.

<div class="tip">

<div class="title">

Tip

</div>

When the `Document Type` is <span class="title-ref">NIT</span>, the
`Identification Number` needs to be configured in Odoo, including the
*verification digit at the end of the ID, prefixed by a hyphen (\`-\`)*.

</div>

##### Fiscal information

The partner's responsibility codes (section 53 in the `RUT (Registro
único tributario)` document) are included as part of the electronic
invoicing module, as it is required by the `DIAN (Dirección de Impuestos
y Aduanas Nacionales)`.

The required fields can be found under `Partner --> Sales & Purchase Tab
--> Fiscal
Information section`:

  - `Obligaciones y Responsabilidades`: Select the fiscal responsibility
    for the company (<span class="title-ref">O-13</span> Gran
    Contribuyente, <span class="title-ref">O-15</span> Autorretenedor,
    <span class="title-ref">O-23</span> Agente de retención IVA,
    <span class="title-ref">O-47</span> Regimen de tributación simple,
    or <span class="title-ref">R-99-PN</span> No Aplica).
  - `Gran Contribuyente`: If the company is *Gran Contribuyente* this
    option should be selected.
  - `Fiscal Regimen`: Select the tribute name for the company
    (<span class="title-ref">IVA</span>,
    <span class="title-ref">INC</span>, <span class="title-ref">IVA e
    INC</span>, or <span class="title-ref">No Aplica</span>)
  - `Commercial Name`: If the company uses a specific commercial name,
    and it needs to be displayed in the invoice.

#### Products

To manage products, navigate to `Accounting --> Customers --> Products`,
then click on a product.

When adding general information on the product form, it is required that
either the `UNSPSC Category` (`Accounting` tab), or `Internal Reference`
(`General Information` tab) field is configured. Be sure to `Save` the
product once configured.

#### Taxes

To create or modify taxes, go to `Accounting --> Configuration -->
Taxes`, and select the related tax.

If sales transactions include products with taxes, the `Value Type`
field in the `Advanced Options` tab needs to be configured per tax.
Retention tax types (`ICA`, `IVA`, `Fuente`) are also included. This
configuration is used to display taxes correctly in the invoice PDF.

![The ICA, IVA and Fuente fields in the Advanced Options tab in
Odoo.](colombia/retention-tax-types.png)

#### Sales journals

Once the `DIAN (Dirección de Impuestos y Aduanas Nacionales)` has
assigned the official sequence and prefix for the electronic invoice
resolution, the sales journals related to the invoice documents **must**
be updated in Odoo. To do so, navigate to `Accounting --> Configuration
--> Journals`, and select an existing sales journal, or create a new one
with the `Create` button.

On the sales journal form, input the `Journal Name`, `Type`, and set a
unique `Short Code` in the `Journals Entries` tab. Then, configure the
following data in the `Advanced Settings` tab:

  - `Electronic invoicing`: Enable `UBL 2.1 (Colombia)`.
  - `Invoicing Resolution`: Resolution number issued by `DIAN (Dirección
    de Impuestos y Aduanas Nacionales)` to the company.
  - `Resolution Date`: Initial effective date of the resolution.
  - `Resolution end date`: End date of the resolution's validity.
  - `Range of Numbering (minimum)`: First authorized invoice number.
  - `Range of Numbering (maximum)`: Last authorized invoice number.

<div class="note">

<div class="title">

Note

</div>

The sequence and resolution of the journal **must** match the one
configured in Carvajal and the `DIAN (Dirección de Impuestos y Aduanas
Nacionales)`.

</div>

##### Invoice sequence

The invoice sequence and prefix **must** be correctly configured when
the first document is created.

<div class="note">

<div class="title">

Note

</div>

Odoo automatically assigns a prefix and sequence to the following
invoices.

</div>

##### Purchase journals

Once the `DIAN (Dirección de Impuestos y Aduanas Nacionales)` has
assigned the official sequence and prefix for the *support document*
related to vendor bills, the purchase journals related to their
supporting documents need to be updated in Odoo. The process is similar
to the configuration of the `sales journals <co-journals>`.

##### Chart of accounts

The `chart of accounts
<../accounting/getting_started/initial_configuration/chart_of_accounts>`
is installed by default as part of the localization module. The accounts
are mapped automatically in taxes, default account payable, and default
account receivable. The chart of accounts for Colombia is based on the
PUC (Plan Unico de Cuentas).

## Main workflows

### Electronic invoices

The following is a breakdown of the main workflow for electronic
invoices with the Colombian localization:

1.  Sender creates an invoice.
2.  Electronic invoice provider generates the legal XML file.
3.  Electronic invoice provider creates the CUFE (Invoice Electronic
    Code) with the electronic signature.
4.  Electronic invoice provider sends a notification to `DIAN (Dirección
    de Impuestos y Aduanas Nacionales)`.
5.  `DIAN (Dirección de Impuestos y Aduanas Nacionales)` validates the
    invoice.
6.  `DIAN (Dirección de Impuestos y Aduanas Nacionales)` accepts or
    rejects the invoice.
7.  Electronic invoice provider generates the PDF invoice with a QR
    code.
8.  Electronic invoice provider sends invoice to the acquirer.
9.  Acquirer sends a receipt of acknowledgement, and accepts or rejects
    the invoice.
10. Sender downloads a `.zip` file with the PDF and XML.

![Electronic invoice workflow for Colombian
localization.](colombia/workflow-electronic-invoice.png)

#### Invoice creation

<div class="note">

<div class="title">

Note

</div>

The functional workflow taking place before an invoice validation does
**not** alter the main changes introduced with the electronic invoice.

</div>

Electronic invoices are generated and sent to both the `DIAN (Dirección
de Impuestos y Aduanas Nacionales)` and customer through Carvajal's web
service integration. These documents can be created from your sales
order or manually generated. To create a new invoice, go to `Accounting
--> Customers --> Invoices`, and select `Create`. On the invoice form
configure the following fields:

  - `Customer`: Customer's information.
  - `Journal`: Journal used for electronic invoices.
  - `Electronic Invoice Type`: Select the type of document. By default,
    `Factura
    de Venta` is selected.
  - `Invoice Lines`: Specify the products with the correct taxes.

When done, click `Confirm`.

#### Invoice validation

After the invoice confirmation, an XML file is created and sent
automatically to Carvajal. The invoice is then processed asynchronously
by the E-invoicing service UBL 2.1 (Colombia). The file is also
displayed in the chatter.

![Carvajal XML invoice file in Odoo chatter.](colombia/invoice-sent.png)

The `Electronic Invoice Name` field is now displayed in the `EDI
Documents` tab, with the name of the XML file. Additionally, the
`Electronic Invoice Status` field is displayed with the initial value
`In progress`, which is located in the invoice header.

#### Reception of legal XML and PDF

The electronic invoice vendor (Carvajal) receives the XML file, and
proceeds to validate its structure and information.

The *electronic invoice status* can be checked in the `Action` menu, by
clicking the `Check Carvajal Status` button. The `Electronic Invoice
Status` field value changes to `Validated`, if everything is correct.

Then, proceed to generate a legal XML, which includes a digital
signature and a unique code (CUFE), and a PDF invoice that includes a QR
code, along with the previously-generated CUFE code.

A `.zip` containing the legal electronic invoice (in XML format) and the
invoice in (PDF format) is downloaded and displayed in the invoice
chatter:

![ZIP file displayed in the invoice chatter in
Odoo.](colombia/invoice-zip.png)

The electronic invoice status changes to `Accepted`.

### Credit notes

The process for credit notes is the same as for invoices. To create a
credit note with reference to an invoice, go to `Accounting -->
Customers --> Invoices`. On the invoice, click `Add Credit Note`, and
complete the following information:

  - `Credit Method`: Select the type of credit method.
      - `Partial Refund`: Use this option when it is a partial amount.
      - `Full Refund`: Use this option if the credit note is for the
        full amount.
      - `Full refund and new draft invoice`: Use this option if the
        credit note is auto-validated and reconciled with the invoice.
        The original invoice is duplicated as a new draft.
  - `Reason`: Enter the reason for the credit note.
  - `Reversal Date`: Select if you want a specific date for the credit
    note or if it is the journal entry date.
  - `Use Specific Journal`: Select the journal for your credit note or
    leave it empty if you want to use the same journal as the original
    invoice.
  - `Refund Date`: If you chose a specific date, select the date for the
    refund.

Once reviewed, click the `Reverse` button.

### Debit notes

The process for debit notes is similar to credit notes. To create a
debit note with reference to an invoice, go to `Accounting --> Customers
--> Invoices`. On the invoice, click the `Add Debit Note` button, and
enter the following information:

  - `Reason`: Type the reason for the debit note.
  - `Debit note date`: Select the specific options.
  - `Copy lines`: Select this option if you need to register a debit
    note with the same lines of invoice.
  - `Use Specific Journal`: Select the printer point for your debit
    note, or leave it empty if you want to use the same journal as the
    original invoice.

When done, click `Create Debit Note`.

### Support document for vendor bills

With master data, credentials, and the purchase journal configured for
support documents related to vendor bills, you can start using *support
documents*.

Support documents for vendor bills can be created from your purchase
order or manually. Go to `Accounting --> Vendors --> Bills` and fill in
the following data:

  - `Vendor`: Enter the vendor's information.
  - `Bill Date`: Select the date of the bill.
  - `Journal`: Select the journal for support documents related to the
    vendor bills.
  - `Invoiced Lines`: Specify the products with the correct taxes.

Once reviewed, click the `Confirm` button. Upon confirmation, an XML
file is created and automatically sent to Carvajal.

### Common errors

During the XML validation, the most common errors are related to missing
master data (*Contact Tax ID*, *Address*, *Products*, *Taxes*). In such
cases, error messages are shown in the chatter after updating the
electronic invoice status.

After the master data has been corrected, you can reprocess the XML with
the new data and send the updated version using the `Action` menu.

![XML validation errors shown in the invoice chatter in
Odoo.](colombia/xml-validation-errors.png)

## Financial reports

### Certificado de Retención en ICA

This report is a certification to vendors for withholdings made for the
Colombian Industry and Commerce (ICA) tax. The report can be found under
`Accounting --> Reporting -->
Colombian Statements --> Certificado de Retención en ICA`.

![Certificado de Retención en ICA report in Odoo
Accounting.](colombia/ica-report.png)

### Certificado de Retención en IVA

This report issues a certificate on the amount withheld from vendors for
VAT withholding. The report can be found under `Accounting --> Reporting
--> Colombian Statements --> Certificado
de Retención en IVA`.

![Certificado de Retención en IVA report in Odoo
Accounting.](colombia/iva-report.png)

### Certificado de Retención en la Fuente

This certificate is issued to partners for the withholding tax that they
have made. The report can be found under `Accounting --> Reporting -->
Colombian Statements --> Certificado de
Retención en Fuente`.

![Certificado de Retención en Fuente report in Odoo
Accounting.](colombia/fuente-report.png)


---
## File: ./content/applications/finance/fiscal_localizations/chile.md

# Chile

## Webinars

Below you can find videos with a general description of the
localization, and how to configure it.

  - [VIDEO WEBINAR OF CHILEAN LOCALIZATION: INTRO AND
    DEMO](https://youtu.be/BHnByZiyYcM).
  - [VIDEO WEBINAR OF DELIVERY GUIDE](https://youtu.be/X7i4PftnEdU).

## Introduction

The Chilean localization has been improved and extended in Odoo v13. In
this version, the next modules are available:

  - **l10n\_cl:** Adds accounting features for the Chilean localization,
    which represent the minimal configuration required for a company to
    operate in Chile and under the SII (Servicio de Impuestos Internos)
    regulations and guidelines.
  - **l10n\_cl\_edi:** Includes all technical and functional
    requirements to generate and receive Electronic Invoice via web
    service, based on the SII regulations.
  - **l10n\_cl\_reports:** Adds the reports Propuesta F29 y Balance
    Tributario (8 columnas).

## Configuration

### Install the Chilean localization modules

For this, go to *Apps* and search for Chile. Then click *Install* in the
module **Chile E-invoicing**. This module has a dependency with **Chile
- Accounting**. In case this last one is not installed, Odoo installs it
automatically with E-invoicing.

![Chilean module to install on Odoo.](chile/Chile01.png)

<div class="note">

<div class="title">

Note

</div>

When you install a database from scratch selecting Chile as country,
Odoo will automatically install the base module: Chile - Accounting.

</div>

### Company Settings

Once the modules are installed, the first step is to set up your company
data. Additional to the basic information, you need to add all the data
and elements required for Electronic Invoice, the easiest way to
configure it is in `Accounting --> Settings --> Chilean Localization`.

<div class="important">

<div class="title">

Important

</div>

All the following configuration and functionality is only available in
Odoo if your company already passed the [Certification process
\<https://www.sii.cl/factura\_electronica/
factura\_mercado/proceso\_certificacion.htm\>]() in the SII - Sistema de
Facturación de Mercado, this certification enables you to generate
electronic invoices from your ERP and send them automatically to the
SII. If your company has not passed this certification yet, make sure
you communicate this to your Account Manager as a special process
outside Odoo is required in order to complete this certification.

</div>

#### Fiscal Information

Fill in the fiscal information for your company according to the SII
register, follow the instructions on each section.

![Chilean company fiscal data.](chile/Chile02.png)

#### Electronic Invoice Data

This is part of the main information required to generate electronic
Invoice, select your environment and the legal information, as well as
the email address to receive invoices from your vendors and the alias
you use to send invoices to your customers.

![Chilean edi environment settings.](chile/Chile03.png)

##### Configure DTE Incoming email server

In order to receive you the claim and acceptance emails from your
customers, it is crucial to define the DTE incoming email server,
considering this configuration:

![Incoming email server configuration for Chilean
DTE.](chile/Chile03_2.png)

<div class="tip">

<div class="title">

Tip

</div>

For your Go-live make sure you archive/remove from your inbox all the
emails related to vendor bills that are not required to be processed in
Odoo.

</div>

#### Certificate

In order to generate the electronic invoice signature, a digital
certificate with the extension `pfx` is required, proceed to this
section and load your file and password.

![Digital certificate access.](chile/Chile03_3.png)

![Digital certificate configuration.](chile/Chile04.png)

A certificate can be shared between several users. If this is the case
leave the user field empty, so all your billing users can use the same
one. On the other hand, if you need to restrict the certificate for a
particular user, just define the users in the certificate.

<div class="note">

<div class="title">

Note

</div>

In some cases, depending on the certificate format, it is possible that
the field Subject Serial Number is not loaded automatically. If this is
the case, you can manually edit this field by filling it with the
Certificate's legal representative RUT.

</div>

#### Financial Reports

The report Propuesta F29 requires two values that need to be defined as
part of the company configuration:

![Fiscal reports parameters.](chile/Chile05.png)

#### Multicurrency

The official currency rate in Chile is provided by the Chilean service
[mindicador.cl](https://mindicador.cl). You can find this service in the
currency rate configuration, and you can set a predefined interval for
the rate updates.

![Currency reate service for Chile.](chile/Chile05_2.png)

#### Chart of accounts

The chart of accounts is installed by default as part of the set of data
included in the localization module. The accounts are mapped
automatically in:

  - Taxes.
  - Default Account Payable.
  - Default Account Receivable.
  - Transfer Accounts.
  - Conversion Rate.

### Master Data

#### Partner

##### Identification Type and VAT

As part of the Chilean localization, the identification types defined by
the SII are now available on the Partner form. This information is
essential for most transactions.

![Chilean identification types for partners.](chile/Chile06.png)

##### TaxpayerType

In Chile, the document type associated with customers and vendors
transactions is defined based on the Taxpayer Type. This field should be
defined in the partner form, when creating a customer is important you
make sure this value is set:

![Chilean taxpayer types for partners.](chile/Chile07.png)

##### Electronic Invoice Data

As part of the information that is sent in the electronic Invoice, you
need to define the email that is going to appear as the sender of the
electronic invoice to your customer, and the Industry description.

![Chilean electronic invoice data for partners.](chile/Chile07_2.png)

#### Taxes

As part of the localization module, the taxes are created automatically
with their related financial account and configuration.

![Chilean taxes list.](chile/Chile08.png)

##### Taxes Types

Chile has several tax types, the most common ones are:

  - VAT. Is the regular VAT and it can have several rates.
  - ILA (Impuesto a la Ley de Alcholes). Taxes for alcoholic drinks. It
    has a different rate.

#### Fiscal Positions

Based on the purchase transactions, the VAT can have different
affections. This will be done in Odoo using the default purchase fiscal
positions.

#### Document Types

In some Latin American countries, including Chile, some accounting
transactions like invoices and vendor bills are classified by document
types defined by the government fiscal authorities (In Chile case: SII).

The document type is essential information that needs to be displayed in
the printed reports and that needs to be easily identified within the
set of invoices as well of account moves.

Each document type can have a unique sequence per company. As part of
the localization, the Document Type includes the country on which the
document is applicable and the data is created automatically when the
localization module is installed.

The information required for the document types is included by default
so the user doesn't need to fill anything on this view:

![Chilean fiscal document types list.](chile/Chile09.png)

<div class="note">

<div class="title">

Note

</div>

There are several document types that are inactive by default but can be
activated if needed.

</div>

##### Use on Invoices

The document type on each transaction will be determined by:

  - The Journal related to the Invoice, identifying if the journal uses
    documents.
  - Condition applied based on the type of Issues and Receiver (ex. Type
    of fiscal regimen of the buyer and type of fiscal regimen of the
    vendor).

### Journals

#### Usage

##### Sales

Sales Journals in Odoo usually represent a business unit or location,
example:

  - Ventas Santiago.
  - Ventas Valparaiso.

For the retail stores is common to have one journal per POS:

  - Cashier 1.
  - Cashier 2.

##### Purchases

The transactions purchase can be managed with a single journal, but
sometimes companies use more than one in order to handle some accounting
transactions that are not related to vendor bills but can be easily
registered using this model, for example:

  - Tax Payments to government.
  - Employees payments.

#### Configuration

When creating sales journals the next information must be filled in:

**Point of sale type**: If the Sales journal will be used for electronic
documents, the option Online must be selected. Otherwise, if the journal
is used for invoices imported from a previous system or if you are using
the SII portal “Facturación MiPyme“ you can use the option Manual.

**Use Documents**: This field is used to define if the journal will use
Document Types. It is only applicable to Purchase and Sales journals
that can be related to the different sets of document types available in
Chile. By default, all the sales journals created will use documents.

![Document type configuration on Journal.](chile/Chile41.png)

<div class="important">

<div class="title">

Important

</div>

For the Chilean localization, it is important to define the default
Debit and Credit accounts as they are required for one of the debit
notes use cases.

</div>

### CAF

A CAF (Folio Authorization Code) is required, for each document type
that is issued to your customers, the CAF is a file the SII provides to
the Emisor with the folio/sequence authorized for the electronic invoice
documents.

Your company can make several requests for folios and obtain several
CAFs, each one associated with different ranges of folios. The CAFs are
shared within all the journals, this means that you only need one active
CAF per document type and it will be applied on all journals.

Please refer to the [SII
documentation](https://palena.sii.cl/dte/mn_timbraje.html) to check the
detail on how to acquire the CAF.

<div class="important">

<div class="title">

Important

</div>

The CAFs required by the SII are different from Production to Test
(Certification mode). Make sure you have the correct CAF set depending
on your environment.

</div>

#### Configuration

Once you have the CAF files you need to associate them with a document
type in Odoo, in order to add a CAF, just follow these steps:

1.  Access to `Accounting --> Settings --> CAF`
2.  Upload the file.
3.  Save the CAF.

![Steps to add a new CAF.](chile/Chile39.png)

Once loaded, the status changes to *In Use*. At this moment, when a
transaction is used for this document type, the invoice number takes the
first folio in the sequence.

<div class="important">

<div class="title">

Important

</div>

In case you have used some folios in your previous system, make sure you
set the next valid folio when the first transaction is created.

</div>

## Usage and Testing

### Electronic Invoice Workflow

In the Chilean localization the electronic Invoice workflow covers the
Emission of Customer Invoices and the reception of Vendor Bills, in the
next diagram we explain how the information transmitted to the SII and
between the customers and Vendors.

![Diagram with Electronic invoice transactions.](chile/Chile14.png)

### Customer invoice Emission

After the partners and journals are created and configured, the invoices
are created in the standard way, for Chile one of the differentiators is
the document type which is selected automatically based on the Taxpayer.

You can manually change the document type if needed.

![Document type selection on invoices.](chile/Chile15.png)

<div class="important">

<div class="title">

Important

</div>

Documents type 33: Electronic Invoice must have at least one item with
tax, otherwise the SII rejects the document validation.

</div>

#### Validation and DTE Status

When all the invoice information is filled, either manually or
automatically when it's created from a sales order, proceed to validate
the invoice. After the invoice is posted:

  - The DTE File (Electronic Tax Document) is created automatically and
    added in the chatter.

  - The DTE SII status is set as: Pending to be sent.
    
    ![DTE XML File displayed in chatter.](chile/Chile16.png)

The DTE Status is updated automatically by Odoo with a scheduled action
that runs every day at night, if you need to get the response from the
SII immediately you can do it manually as well. The DTE status workflow
is as follows:

![Transition of DTE statuses.](chile/Chile17.png)

1.  In the first step the DTE is sent to the SII, you can manually send
    it using the button: Enviar Ahora, a SII Tack number is generated
    and assigned to the invoice, you can use this number to check the
    details the SII sent back by email. The DTE status is updated to Ask
    for Status.

2.  Once the SII response is received Odoo updates the DTE Status, in
    case you want to do it manually just click on the button: Verify on
    SII. The result can either be Accepted, Accepted With Objection or
    Rejected.
    
    ![Identification transaction for invoice and Status
    update.](chile/Chile18.png)
    
    There are several internal status in the SII before you get
    Acceptance or Rejection, in case you click continuously the Button
    Verify in SII, you will receive in the chatter the detail of those
    intermediate statuses:
    
    ![Descprtion of each DTE status in the
    chatter.](chile/Chile18_2.png)

3.  The final response from the SII, can take on of these values:
    
    **Accepted:** Indicates the invoice information is correct, our
    document is now fiscally valid and it's automatically sent to the
    customer.
    
    **Accepted with objections:** Indicates the invoice information is
    correct but a minor issue was identified, nevertheless our document
    is now fiscally valid and it's automatically sent to the customer.
    
    ![Email track once it is sent to the customer.](chile/Chile19.png)
    
    **Rejected:** Indicates the information in the invoice is incorrect
    and needs to be corrected, the detail of the issue is received in
    the emails you registered in the SII, if it is properly configured
    in Odoo, the details are also retrieved in the chatter once the
    email server is processed.
    
    If the invoice is Rejected please follow this steps:
    
      - Change the document to draft.
      - Make the required corrections based on the message received from
        the SII.
      - Post the invoice again.
    
    ![Message when an invoice is rejected.](chile/Chile20.png)

#### Crossed references

When the Invoice is created as a result of another fiscal document, the
information related to the originator document must be registered in the
Tab Cross Reference, which is commonly used for credit or debit notes,
but in some cases can be used on Customer Invoices as well. In the case
of the credit and debit notes, they are set automatically by Odoo:

![Invoice tab with origin document number and data.](chile/Chile21.png)

#### Invoice PDF Report

Once the invoice is accepted and validated by the SII and the PDF is
printed, it includes the fiscal elements that indicate that the document
is fiscally valid:

![Barcode and fiscal elements in the invoice report.](chile/Chile22.png)

<div class="important">

<div class="title">

Important

</div>

If you are hosted in Odoo SH or On-Premise, you should manually install
the `pdf417gen` library. Use the following command to install it: `pip
install pdf417gen`.

</div>

#### Commercial Validation

Once the invoice has been sent to the customer:

1.  DTE partner status changes to “Sent”.
2.  The customer must send a reception confirmation email.
3.  Subsequently, if all the commercial terms and invoice data are
    correct, they will send the Acceptance confirmation, otherwise they
    send a Claim.
4.  The field DTE acceptation status is updated automatically.

![Message with the commercial acceptance from the
customer.](chile/Chile23.png)

#### Processed for Claimed invoices

Once the invoice has been Accepted by the SII **it can not be cancelled
in Odoo**. In case you get a Claim for your customer the correct way to
proceed is with a Credit Note to either cancel the Invoice or correct
it. Please refer to the `chile/credit-notes` section for more details.

![Invoice Comercial status updated to Claimed.](chile/Chile24.png)

#### Common Errors

There are multiple reasons behind a rejection from the SII, but these
are some of the common errors you might have and which is the related
solution.

  - Error: `RECHAZO- DTE Sin Comuna Origen.`
    
    *Hint:* Make sure the Company Address is properly filled including
    the State and City.

  - Error en Monto: `- IVA debe declararse.`
    
    *Hint:* The invoice lines should include one VAT tax, make sure you
    add one on each invoice line.

  - Error: `Rut No Autorizado a Firmar.`
    
    *Hint:* The invoice lines should include one VAT tax, make sure you
    add one on each invoice line.

  - Error: `Fecha/Número Resolucion Invalido RECHAZO- CAF Vencido :
    (Firma_DTE[AAAA-MM-DD] - CAF[AAAA-MM-DD]) &gt; 6 meses.`
    
    *Hint:* Try to add a new CAF related to this document as the one
    you're using is expired.

  - Error: `Element '{http://www.sii.cl/SiiDte%7DRutReceptor': This
    element is not expected. Expected is (
    {http://www.sii.cl/SiiDte%7DRutEnvia ).`
    
    *Hint:* Make sure the field Document Type and VAT are set either in
    the Customer and in the main company.

  - GLOSA: `Usuario sin permiso de envio.`
    
    *Hint:* This error indicates that most likely, your company has not
    passed the [Certification
    process](https://www.sii.cl/factura_electronica/factura_mercado/proceso_certificacion.htm)
    in the SII - Sistema de Facturación de Mercado. If this is the case,
    please contact your Account Manager or Customer Support as this
    certification is not part of the the Odoo services, but we can give
    you some alternatives.

### Credit Notes

When a cancellation or correction is needed over a validated invoice, a
credit note must be generated. It is important to consider that a CAF
file is required for the Credit Note, which is identified as document 64
in the SII.

![Creation of CAF for Credit notes.](chile/Chile40.png)

<div class="tip">

<div class="title">

Tip

</div>

Refer to the `CAF section <chile/caf-documentation>` where we described
the process to load the CAF on each document type.

</div>

#### Use Cases

##### Cancel Referenced document

In case you need to cancel or invalid an Invoice, use the button Add
Credit note and select Full Refund, in this case the SII reference Code
is automatically set to: Anula Documento de referencia.

![Full invoice refund with SII reference code 1.](chile/Chile26.png)

##### Corrects Referenced Document Text

If a correction in the invoice information is required, for example the
Street Name, use the button Add Credit note,select Partial Refund and
select the option “Solo corregir Texto”. In this case the SII reference
Code is automatically set to: Corrige el monto del Documento de
Referencia.

![Partial refund to correct text including the corrected
value.](chile/Chile27.png)

Odoo creates a Credit Note with the corrected text in an invoice and
price 0.

![Credit note with the corrected value on the invoice
lines.](chile/Chile28.png)

<div class="important">

<div class="title">

Important

</div>

It's important to define the default credit account in the Sales journal
as it is taken for this use case in specific.

</div>

##### Corrects Referenced Document Amount

When a correction on the amounts is required, use the button Add Credit
note and select Partial Refund. In this case the SII reference Code is
automatically set to: Corrige el monto del Documento de Referencia.

![Credit note for partial refund to correct amounts, using the SII
reference code 3.](chile/Chile30.png)

### Debit Notes

As part of the Chilean localization, besides creating credit notes from
an existing document you can also create debit Notes. For this just use
the button “Add Debit Note”. The two main use cases for debit notes are
detailed below.

#### Use Cases

##### Add debt on Invoices

The most common use case for debit notes is to increase the value of an
existing invoice, you need to select option 3 in the field Reference
code SII:

![Debit note for partial refund to crrect amounts, using the SII
reference code 3.](chile/Chile31.png)

In this case Odoo automatically includes the source invoice in the cross
reference section:

![Invoice data on crossed reference section for debit
notes.](chile/Chile32.png)

##### Cancel Credit Notes

In Chile the debits notes are used to cancel a validated Credit Note, in
this case just select the button Add debit note and select the first
option in the wizard: *1: Anula Documentos de referencia.*

![Creating a debit note to cancel a credit note with the SII code
reference 1.](chile/Chile33.png)

### Vendor Bills

As part of the Chilean localization, you can configure your Incoming
email server as the same you have register in the SII in order to:

  - Automatically receive the vendor bills DTE and create the vendor
    bill based on this information.
  - Automatically Send the reception acknowledgement to your vendor.
  - Accept or Claim the document and send this status to your vendor.

#### Reception

As soon as the vendor email with the attached DTE is received: 1. The
vendor Bill mapping all the information included in the xml. 2. An email
is sent to the vendor with the Reception acknowledgement. 3. The DTE
status is set as: Acuse de Recibido Enviado

![Messages recorded in the chatter with the reception notification for
the vendor.](chile/Chile34.png)

#### Acceptation

If all the commercial information is correct on your vendor bill then
you can accept the document using the `Aceptar Documento` button. Once
this is done the DTE Acceptation Status changes to `Accepted`\` and an
email of acceptance is sent to the vendor.

![Acceptance button in vendor bills to inform vendor the document is
comercially accepted.](chile/Chile35.png)

#### Claim

In case there is a commercial issue or the information is not correct on
your vendor bill, you can Claim the document before validating it, using
the button: Claim, once this is done the DTE Acceptation Status change
to: Claim and an email of acceptance is sent to the vendor.

![Claim button in vendor bills to inform the vendor all the document is
comercially rejected.](chile/Chile36.png)

If you claim a vendor bill, the status changes from draft to cancel
automatically. Considering this as best practice, all the Claim
documents should be canceled as they won't be valid for your accounting
records.

### Delivery Guide

To install the Delivery Guide module, go to `Apps` and search for `Chile
(l10n_cl)`. Then click `Install` on the module `Chile - E-Invoicing
Delivery
Guide`.

<div class="note">

<div class="title">

Note

</div>

*Chile - E-Invoicing Delivery Guide* has a dependency with *Chile -
Facturación Electrónica*. Odoo will install the dependency automatically
when the Delivery Guide module is installed.

</div>

The Delivery Guide module includes sending the DTE to SII and the stamp
in PDF reports for deliveries.

![Install Delivery Guide Module](chile/chile42.png)

Once all configurations have been made for electronic invoices (e.g.,
uploading a valid company certificate, setting up master data, etc.),
Delivery Guides need their own CAFs. Please refer to the `CAF
documentation <chile/caf-documentation>` to check the details on how to
acquire the CAFs for electronic Delivery Guides.

Verify the following important information in the *Price for the
Delivery Guide* configuration:

  - `From Sales Order`: Delivery Guide takes the product price from the
    Sales Order and shows it on the document.
  - `From Product Template`: Odoo takes the price configured in the
    product template and shows it on the document.
  - `No show price`: no price is shown in the Delivery Guide.

Electronic delivery guides are used to move stock from one place to
another and they can represent sales, sampling, consignment, internal
transfers, and basically any product move.

#### Delivery Guide from a Sales Process

<div class="warning">

<div class="title">

Warning

</div>

A delivery guide should **not** be longer than one page or contain more
than 60 product lines.

</div>

When a Sales Order is created and confirmed, a Delivery Order is
generated. After validating the Delivery Order, the option to create a
Delivery Guide is activated.

![Create Delivery Guide Button](chile/chile43.png)

When clicking on `Create Delivery Guide` for the first time, a warning
message pops up, showing the following:

![An example sequence error when creating a Delivery Guide in
Odoo](chile/chile44.png)

This warning message means the user needs to indicate the next sequence
number Odoo has to take to generate the Delivery Guide, and only only
happens the *first time* a Delivery Guide is created in Odoo. After the
first document has been correctly generated, Odoo takes the CAFs next
available number to generate the following Delivery Guide and so on.

After the Delivery Guide is created:

  - The DTE file (Electronic Tax Document) is automatically created and
    added to the chatter.
  - The DTE SII status is set as: Pending to be sent.

![DTE Status in SII and creation of DTE/XML](chile/chile45.png)

The DTE Status is automatically updated by Odoo with a scheduled action
that runs every day at night. To get a response from the SII
immediately, press the `Send now to SII` button.

Once the Delivery Guide is sent, it may then be printed by clicking on
the `Print
Delivery Guide` button.

![Printing Delivery Guide PDF](chile/chile46.png)

### Electronic Receipt

To install the Electronic Receipt module, go to `Apps` and search for
`Chile (l10n_cl)`. Then click `Install` on the module `Chile -
Electronic Receipt`.

<div class="note">

<div class="title">

Note

</div>

*Chile - Electronic Receipt* has a dependency with *Chile - Facturación
Electrónica*. Odoo will install the dependency automatically when the
E-invoicing Delivery Guide module is installed.

</div>

This module contains the electronic receipt and daily sales report,
which are automatically sent to SII.

![Install Electronic Receipt module](chile/chile47.png)

Once all configurations have been made for Electronic Invoices (e.g.,
uploading a valid company certificate, setting up master data, etc.),
Electronic Receipts need their own CAFs. Please refer to the `CAF
documentation <chile/caf-documentation>` to check the details on how to
acquire the CAFs for Electronic Receipts.

Electronic Receipts are useful when clients do not need an Electronic
Invoice. By default, there is a partner in the database called
*Anonymous Final Consumer* with a generic RUT 66666666-6 and taxpayer
type of *Final Consumer*. This partner can be used for Electronic
Receipts or a new record may be created for the same purpose.

Although Electronic Receipts should be used for final consumers with a
generic RUT, it can also be used for specific partners. After the
partners and journals are created and configured, the Electronic
Receipts are created in the standard way as Electronic Invoice, but the
type of document `(39) Electronic Receipt` should be selected, like so:

![Select type of Document: (39) Boleta Electrónica](chile/chile48.png)

#### Validation and DTE Status

When all of the Electronic Receipt information is filled, either
manually or automatically from a Sales Order, proceed to validate the
receipt. By default, Electronic Invoice is selected as the Document
Type, however in order to validate the receipt correctly, make sure to
edit the Document Type and change to Electronic Receipt.

After the receipt is posted:

  - The DTE file (Electronic Tax Document) is created automatically and
    added to the chatter.
  - The DTE SII status is set as: Pending to be sent.

![DTE status in SII and creation of DTE/XML](chile/chile49.png)

The DTE Status is automatically updated by Odoo with a scheduled action
that runs every day at night. To get a response from the SII
immediately, press the `Send now to SII` button.

Please refer to the `DTE Workflow <chile/electronic-invoice-validation>`
for Electronic Invoices as the workflow for Electronic Receipt follows
the same process.

#### Daily Sales Report

Once Electronic Receipts have been created, the system creates a daily
sales report containing all Electronic Receipts per day. This report is
electronically stamped and sent to the SII overnight in XML format.
These daily reports can be found in `Reports --> Daily Sales Reports`.

![Find Electronic Receipts in the Reports menu, under Daily Sales
Reports](chile/chile50.png)

A list of daily reports is displayed with all daily DTE sent to SII.

![List of Daily Reports](chile/chile51.png)

If no Electronic Receipt was made on a particular day, the report is
sent but it will not have any receipts in it. The report will also have
an answer from the SII if it was accepted or rejected (depending on the
company's certificate and validated receipts).

![Daily Sales Book example](chile/chile52.png)

<div class="important">

<div class="title">

Important

</div>

For Chilean localization, note that the feature tax included in the
price is *not* supported for the Electronic Receipt.

If a Daily Sales Report has already been created for a specific day in
another system, the daily report in Odoo will be rejected due to the
sequence number used. If that is the case, the user has to manually
click on `Retry` in order for a new sequence number to be generated
(this action is automatically done by Odoo). Afterwards, users can
manually verify report status with SII or wait for Odoo to update status
later at night.

</div>

## Financial Reports

### Balance Tributario de 8 Columnas

This report presents the accounts in detail (with their respective
balances), classifying them according to their origin and determining
the level of profit or loss that the business had within the evaluated
period of time, so that a real and complete knowledge of the status of a
company.

You can find this report in `Accounting --> Accounting --> Reports`

![Columns and data displayed in the report Balance Tributario 8
Columnas.](chile/Chile37.png)

### Propuesta F29

The form F29 is a new system that the SII enabled to taxpayers, and that
replaces the Purchase and Sales Books. This report is integrated by
Purchase Register (CR) and the Sales Register (RV). Its purpose is to
support the transactions related to VAT, improving its control and
declaration.

This record is supplied by the electronic tax documents (DTE's) that
have been received by the SII.

You can find this report in `Accounting --> Accounting --> Reports`

![Parameters to required to generate the Report Propuesta
F29](chile/Chile38.png)


---
## File: ./content/applications/finance/fiscal_localizations/australia.md

# Australia

## Employment Hero Australian Payroll

The Employment Hero module synchronizes payslip accounting entries
(e.g., expenses, social charges, liabilities, taxes) from Employment
Hero to Odoo automatically. Payroll administration is still done in
Employment Hero. We only record the journal entries in Odoo.

<div class="important">

<div class="title">

Important

</div>

KeyPay was rebranded as **Employment Hero** in March 2023.

</div>

### Configuration

1.  `Activate <general/install>` the `Employment Hero Australian
    Payroll` module (technical name:
    <span class="title-ref">l10n\_au\_keypay</span>).

2.  Configure the **Employment Hero API** by going to `Accounting -->
    Configuration -->
    Settings`. More fields become visible after clicking on `Enable
    Employment Hero
    Integration`.
    
    ![Enabling Employment Hero Integration in Odoo Accounting displays
    new fields in
    the&#10;settings](australia/employment-hero-integration.png)
    
      - You can find the API Key in the `My Account` section of the
        Employment Hero platform.
        
        !["Account Details" section on the Employment Hero
        dashboard](australia/employment-hero-myaccount.png)
    
      - The **Payroll URL** is pre-filled with
        <span class="title-ref">https://keypay.yourpayroll.com.au</span>.
        *Please do not change it.*
    
      - You can find the **Business ID** in the Employment Hero URL.
        (i.e., <span class="title-ref">189241</span>)
        
        ![The Employment Hero "Business ID" number is in the
        URL](australia/employment-hero-business-id.png)
    
      - You can choose any Odoo journal to post the payslip entries.

### How does the API work?

The API syncs the journal entries from Employment Hero to Odoo and
leaves them in draft mode. The reference includes the Employment Hero
payslip entry ID in brackets for the user to easily retrieve the same
record in Employment Hero and Odoo.

![Example of a Employment Hero Journal Entry in Odoo Accounting
(Australia)](australia/employment-hero-journal-entry.png)

By default, the synchronization happens once per week. You can fetch the
records manually by going to `Accounting --> Configuration --> Settings`
and, in the `Enable
Employment Hero Integration` option, click on `Fetch Payruns Manually`.

Employment Hero payslip entries also work based on double-entry
bookkeeping.

The accounts used by Employment Hero are defined in the section `Payroll
settings`.

![Chart of Accounts menu in Employment
Hero](australia/employment-hero-chart-of-accounts.png)

For the API to work, you need to create the same accounts as the default
accounts of your Employment Hero business (**same name and same code**)
in Odoo. You also need to choose the correct account types in Odoo to
generate accurate financial reports.


---
## File: ./content/applications/finance/fiscal_localizations/united_kingdom.md

# United Kingdom

## Configuration

`Install <general/install>` the `UK - Accounting` and the `UK -
Accounting
Reports` modules to get all the features of the UK localization.

<table>
<thead>
<tr class="header">
<th>Name</th>
<th>Technical name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code class="interpreted-text" role="guilabel">UK - Accounting</code></td>
<td><span class="title-ref">l10n_uk</span></td>
<td><ul>
<li>CT600-ready chart of accounts</li>
<li>VAT100-ready tax structure</li>
<li>Infologic UK counties listing</li>
</ul></td>
</tr>
<tr class="even">
<td><code class="interpreted-text" role="guilabel">UK - Accounting Reports</code></td>
<td><span class="title-ref">l10n_uk_reports</span></td>
<td><ul>
<li>Accounting reports for the UK</li>
<li>Allows sending the tax report via the MTD-VAT API to HMRC.</li>
</ul></td>
</tr>
</tbody>
</table>

![Odoo uk packages](united_kingdom/uk.png)

<div class="note">

<div class="title">

Note

</div>

\- Only UK-based companies can submit reports to HMRC. - Installing the
module `UK - Accounting Reports` installs all two modules at once.

</div>

<div class="seealso">

\- [HM Revenue &
Customs](https://www.gov.uk/government/organisations/hm-revenue-customs/)
- [Overview of Making Tax
Digital](https://www.gov.uk/government/publications/making-tax-digital/overview-of-making-tax-digital/)

</div>

## Chart of accounts

The UK chart of accounts is included in the `UK - Accounting` module. Go
to `Accounting --> Configuration --> Accounting: Chart of Accounts` to
access it.

Setup your `CoA (chart of accounts)` by going to `Accounting -->
Configuration
--> Settings --> Accounting Import section` and choose to `Review
Manually` or `Import (recommended)` your initial balances.

## Taxes

As part of the localization module, UK taxes are created automatically
with their related financial accounts and configuration.

Go to `Accounting --> Configuration --> Settings --> Taxes` to update
the `Default Taxes`, the `Tax Return Periodicity` or to `Configure your
tax accounts`.

To edit existing taxes or to `Create` a new tax, go to `Accounting -->
Configuration --> Accounting: Taxes`.

<div class="seealso">

\- `taxes <../accounting/taxation/taxes>` - Tutorial: [Tax report and
return](https://www.odoo.com/slides/slide/tax-report-and-return-1719?fullscreen=1).

</div>

### Making Tax Digital (MTD)

In the UK, all VAT-registered businesses have to follow the MTD rules by
using software to submit their VAT returns.

The **UK - Accounting Reports** module enables you to comply with the
[HM Revenue &
Customs](https://www.gov.uk/government/organisations/hm-revenue-customs/)
requirements regarding [Making Tax
Digital](https://www.gov.uk/government/publications/making-tax-digital/overview-of-making-tax-digital/).

<div class="important">

<div class="title">

Important

</div>

If your periodic submission is more than three months late, it is no
longer possible to submit it through Odoo, as Odoo only retrieves open
bonds from the last three months. Your submission has to be done
manually by contacting HMRC.

</div>

#### Register your company to HMRC before the first submission

Go to `Accounting --> Reporting --> Tax report` and click on `Connect to
HMRC`. Enter your company information on the HMRC platform. You only
need to do it once.

<div class="note">

<div class="title">

Note

</div>

When entering your VAT number, do not add the GB country code. Only the
9 digits are required.

</div>

#### Periodic submission to HMRC

Import your obligations HMRC, filter on the period you want to submit,
and send your tax report by clicking `Send to HMRC`.

#### Periodic submission to HMRC for multi-company

Only one company and one user can connect to HMRC simultaneously. If
several UK-based companies are on the same database, the user who
submits the HMRC report must follow these instructions before each
submission:

1.  Log into the company for which the submission has to be done.
2.  Go to `General Settings`, and in the `Users` section, click `Manage
    Users`. Select the user who is connected to HMRC.
3.  Go to the `UK HMRC Integration` tab and click `Reset Authentication
    Credentials` or `Remove Authentication Credentials` button.
4.  You can now `register your company to HMRC
    <uk_localization/hmrc-registration>` and submit the tax report for
    this company.
5.  Repeat the steps for other companies' HMRC submissions.

<div class="note">

<div class="title">

Note

</div>

During this process, the `Connect to HMRC` button no longer appears for
other UK-based companies.

</div>


---
## File: ./content/applications/finance/fiscal_localizations/luxembourg.md

# Luxembourg

## Standard Chart of Accounts - PCN 2020

Odoo's `fiscal localization package <fiscal_localizations/packages>` for
Luxembourg includes the current **Standard Chart of Accounts (PCN
2020)**, effective since January 2020.

## eCDF tax return

Tax returns in Luxembourg require a specific XML file to upload on the
eCDF.

To download it, go to `Accounting --> Report --> Audit Reports --> Tax
Report`, and click on `Export eCDF declaration`.

<div class="seealso">

\- `../accounting/reporting/declarations/tax_returns` - [Platform for
electronic gathering of financial data (eCDF)](http://www.ecdf.lu)

</div>

## Annual tax report

You can generate an XML file to electronically file your annual tax
report with the tax office.

To do so, go to `Accounting --> Report --> Luxembourg --> Annual Tax
Report`, click on `Create`, then define the annual period in the `Year`
field.

The **simplified annual declaration** is automatically generated. You
can manually add values in all the fields to get a **complete annual
declaration**.

![Odoo Accounting (Luxembourg localization) generates an annual tax
declaration.](luxembourg/annual-tax-report.png)

To help you complete it, you can use the information provided on the
`Tax Report`. To do so, go to `Accounting --> Report --> Audit Reports
--> Tax Report`, then click on the `Tax Report` dropdown menu and select
the type of report you want to display.

![Dropdown menu to select the type of Tax
Report](luxembourg/tax-report-types.png)

Finally, click on `Export XML` to download the XML file.

## FAIA (SAF-T)

**FAIA (Fichier d’Audit Informatisé AED)** is a standardized and
structured file that facilitates the exchange of information between the
taxpayers' accounting system and the tax office. It is the Luxembourgish
version of the OECD-recommended SAF-T (Standard Audit File for Tax).

Odoo can generate an XML file that contains all the content of an
accounting period according to the rules imposed by the Luxembourg tax
authorities on digital audit files.

### Configuration

`Install <general/install>` the module `Luxembourg Standard Audit File
for Tax` (module's technical name: `l10n_lu_saft`).

### Export FAIA file

Go to `Accounting --> Reporting --> Audit Reports --> General Ledger`,
then click on `Export SAF-T (Luxembourg)`.


---
## File: ./content/applications/finance/fiscal_localizations/belgium.md

# Belgium

## Fiscal certification: POS restaurant

In Belgium, the owner of a cooking business such as a restaurant or food
truck is required by law to use a government-certified **Cash Register
System** for their receipts. This applies if their yearly earnings
(excluding VAT, drinks, and take-away food) exceed 25,000 euros.

This government-certified system entails the use of a `certified POS
system
<belgium/certified-pos>`, along with a device called a `Fiscal Data
Module <belgium/fdm>` (or **black box**) and a `VAT Signing Card
<belgium/vat>`.

<div class="important">

<div class="title">

Important

</div>

Do not forget to register as *foodservice industry manager* on the
[Federal Public Service Finance registration
form](https://www.systemedecaisseenregistreuse.be/fr/enregistrement).

</div>

### Certified POS system

The Odoo POS system is certified for the major versions of databases
hosted on **Odoo Online** and **Odoo.sh**. Please refer to the following
table to ensure that your POS system is certified.

|           | Odoo Online   | Odoo.sh       | On-Premise    |
| --------- | ------------- | ------------- | ------------- |
| Odoo 16.0 | Certified     | Certified     | Not certified |
| Odoo 15.2 | Not certified | Not certified | Not certified |
| Odoo 15.0 | Certified     | Certified     | Not certified |
| Odoo 14.0 | Certified     | Certified     | Not certified |

<div class="seealso">

`/administration/maintain/supported_versions`

</div>

A [certified POS
system](https://www.systemedecaisseenregistreuse.be/systemes-certifies)
must adhere to rigorous government regulations, which means it operates
differently from a non-certified POS.

  - On a certified POS, you cannot:
      - Make a refund.
      - Set up and use the **global discounts** feature (the
        <span class="title-ref">pos\_discount</span> module is
        blacklisted and cannot be activated).
      - Set up and use the **loyalty programs** feature (the
        <span class="title-ref">pos\_loyalty</span> module is
        blacklisted and cannot be activated).
      - Reprint receipts (the
        <span class="title-ref">pos\_reprint</span> module is
        blacklisted and cannot be activated).
      - Modify prices in order lines.
      - Modify or delete order lines in POS orders.
      - Sell products without a valid VAT number.
      - Use a POS that is not connected to an IoT box.
  - The `cash rounding
    <../../sales/point_of_sale/pricing/cash_rounding>` feature must be
    activated and set to a `Rounding Precision` of
    <span class="title-ref">0,05</span> and a `Rounding Method` set as
    `Half-Up`.
  - Taxes must be set as included in the price. To set it up, go to
    `Point of Sale -->
    Configuration --> Settings`, and from the `Taxes` section, open the
    `Default
    Sales Tax` form by clicking the arrow next to the default sales tax
    field. There, click `Advanced Options` and enable `Included in
    Price`.
  - At the start of a POS session, users must click `Work in` to clock
    in. Doing so allows the registration of POS orders. If users are not
    clocked in, they cannot make POS orders. Likewise, they must click
    `Work Out` to clock out at the end of the session.

<div class="warning">

<div class="title">

Warning

</div>

If you configure a POS to work with a black box, you cannot use it again
without it.

</div>

### The Fiscal Data Module

The `FDM (Fiscal Data Module)`, or [black
box](https://www.boîtenoire.be/fonctionnement), is a
government-certified device that works together with the Point of Sale
application and saves your POS orders information. Concretely, a
**hash** (`unique code`) is generated for each POS order and added to
its receipt. This allows the government to verify that all revenue is
declared.

<div class="note">

<div class="title">

Note

</div>

Ensure your black box is approved by the Belgian government. You can
check the compliance of your black box by visiting the [Federal Public
Service
Finance](https://www.systemedecaisseenregistreuse.be/systemes-certifies#FDM%20certifiés)
website.

</div>

#### Configuration

Before setting up your database to work with an FDM, ensure you have the
following hardware:

  - a registered `black box <belgium/blackbox>` (go to
    [www.boîtenoire.be](https://www.boîtenoire.be/ma-caisse/) to order
    yours);
  - an RS-232 serial null modem cable per FDM;
  - an RS-232 serial-to-USB adapter per FDM;
  - an `IoT Box <belgium/iotbox>` (one IoT box per black box); and
  - a receipt printer.

##### Black box module

As a pre-requisite, `activate <general/install>` the
<span class="title-ref">Belgian Registered Cash Register</span> module
(technical name: <span class="title-ref">pos\_blackbox\_be</span>).

![black box modules for belgian fiscal
certification](belgium/be-modules.png)

Once the module is activated, add your VAT number to your company
information. To set it up, go to `Settings --> Companies --> Update
Info`, and fill in the `VAT` field. Then, enter a national registration
number for every staff member who operates the POS system. To do so, go
to the `Employees` app and open an employee form. There, go to `HR
settings tab --> Attendance`, and fill in the `INSZ or BIS number`
field.

![ISNZ or BIS number field on employee form](belgium/bis-number.png)

<div class="tip">

<div class="title">

Tip

</div>

To input your information, click on your avatar, go to `My Profile -->
Preference
tab`, and enter your INSZ or BIS number in the designated field.

</div>

<div class="warning">

<div class="title">

Warning

</div>

You must configure the black box directly in the production database.
Utilizing it in a testing environment may result in incorrect data being
stored within the black box.

</div>

##### IoT Box

In order to use a Fiscal Data Module, you need a registered IoT Box. To
register your IoT box, you must contact us through our [support contact
form](https://www.odoo.com/help) and provide the following information:

  - your VAT number;
  - your company's name, address, and legal structure; and
  - the Mac address of your IoT Box.

Once your IoT box is certified, `connect
<../../productivity/iot/config/connect>` it to your database. To verify
that the IoT Box recognizes the FDM, go to the IoT homepage and scroll
down the `IOT Device` section, which should display the FDM.

![Hardware status page on a registered IoT Box](belgium/iot-devices.png)

Then, add the IoT to your POS. To do so, go to `Point of Sale -->
Configuration -->
Point of Sale`, select your POS, scroll down to the `Connected Device`
section, and enable `IoT Box`. Lastly, add the FMD in the `Fiscal Data
Module` field.

<div class="note">

<div class="title">

Note

</div>

To be able to use an FDM, you must at least connect one `Receipt
Printer`.

</div>

### VAT signing card

When you open a POS session and make your initial transaction, you are
prompted to enter the PIN provided with your `VSC (VAT signing card)`.
The card is delivered by the `FPS (Service
Public Federal Finances)` upon
[registration](https://www.systemedecaisseenregistreuse.be/fr/enregistrement).


---
## File: ./content/applications/finance/fiscal_localizations/mexico.md

# Mexico

## Webinars

Below you can find videos with a general description of the
localization, and how to configure it.

  - [VIDEO WEBINAR OF A COMPLETE DEMO](https://youtu.be/JSqQo5eRqlI).

## Introduction

Odoo Enterprise users in Mexico have free access to a set of modules
that allow them to issue electronic invoices according to the
specifications of the SAT for [version 3.3 of the
CFDI](http://omawww.sat.gob.mx/informacion_fiscal/factura_electronica/Documents/GuiaAnexo20Global.pdf),
a legal requirement as of January 1, 2018. These modules also add
relevant accounting reports (for example, the DIOT), and enable foreign
trade, with support for associated customs operations.

With the Mexican location in Odoo you will not only be able to comply
with the legal requirements to invoice in Mexico, but also use it as
your accounting system, satisfying the normal needs of the market. This
makes Odoo the perfect solution to manage your business in Mexico.

## Pre requirements

Before installing the modules and making the necessary configurations to
have the Mexican localization in Odoo, it is necessary to meet the
following requirements:

1.  Be registered with the SAT and have an RFC.
2.  Have a [Certificate of Digital
    Seal](https://www.gob.mx/sat/acciones-y-programas/certificado-de-sello-digital)
    (CSD).
3.  Choose a PAC and purchase stamps. Currently the Mexican location in
    Odoo works with the following PACs: [Solución
    Factible](https://solucionfactible.com/), [Quadrum (formerly
    Finkok)](https://cfdiquadrum.com.mx/index.html) and [SW Sapien -
    Smarter Web](https://info.sw.com.mx/sw-smarter-odoo/).
4.  Have knowledge and experience with billing, sales and accounting in
    Odoo. This documentation contains only the information necessary to
    enable the use of Odoo in a company based in Mexico.

## Modules

To install the Mexican localization module, go to `Apps`, then remove
the default filter "Apps" and search for `l10n_mx`.

![Installation of the Mexican localization module in Odoo
Apps](mexico/mx_mo_01.png)

<div class="note">

<div class="title">

Note

</div>

If you created the database from [www.odoo.com](https://www.odoo.com)
and chose "Mexico" as the country when creating your account, some of
the Mexican localization modules will have been installed automatically.
In that case we observe that some modules have a button that says
"Install", while others will instead have a label that says "Installed".

</div>

The following modules are necessary for all databases that require
Mexican localization:

1.  **Mexico - Accounting (l10n\_mx)**  
    All the basic data to manage accounting, taxes and the chart of
    accounts. The installed chart of accounts is based on [the SAT
    account grouping
    code](https://www.gob.mx/cms/uploads/attachment/file/151586/codigo_agrupador.pdf).

2.  **EDI for Mexico (l10n\_mx\_edi & l10n\_mx\_edi\_extended)**  
    Necessary for electronic transactions, CFDI 3.3, payment complement,
    and addenda on invoices.

3.  **Odoo Mexican localization reports (l10n\_mx\_reports &
    l10n\_mx\_reports\_closing)**  
    All mandatory reports for electronic accounting. (Requires the
    accounting application).

The following modules are optional, and should be installed only if they
meet a specific organization requirement. Installing these modules is
not recommended unless you are sure they are needed as they add fields
that can unnecessarily complicate form filling.

1.  **Odoo Mexico Localization for Stock / Landing
    (l10n\_mx\_edi\_landing)**  
    This module allows managing the requests as part of the shipping
    costs.

2.  **Odoo Mexican XML Polizas Export (l10n\_mx\_xml\_polizas)**  
    With this module, you will be able to export your Journal Entries in
    XML ready to be uploaded to the SAT.

## Configuration

### Enable electronic invoicing

Go to `Settings --> Accounting --> Customer Invoices`, and make sure
that the option **Mexican Electronic Invoicing** is enabled. With this
you will be able to generate the signed invoice and also generate the
signed payment complement, all automatically integrated into the normal
billing flow in Odoo.

![Steps to enable electronic invoicing](mexico/mx_co_01.png)

### Enter legal information

After verifying the general configuration, you must verify that the
company is configured with the correct data. To do so, go to `Settings
--> General Settings --> Companies`, and click on *Update information*
under your company name.

![Update the company's details in the Settings of
Odoo](mexico/mx_co_02.png)

In the resulting form, put your full address (including zip code), RFC
(VAT number), and the rest of the data.

<div class="important">

<div class="title">

Important

</div>

From a legal point of view, a Mexican company must use the local
currency (MXN). Therefore, Odoo does not provide features to manage an
alternative configuration. If you want to manage another currency, let
MXN be the default currency and use a `pricelist
</applications/sales/sales/products_prices/prices/pricing>` instead.

</div>

<div class="warning">

<div class="title">

Warning

</div>

Make sure that in the address, for the Country field, "Mexico" is chosen
from the list of countries that Odoo shows, because if it is entered
manually there is a risk of creating a "new country" in the system,
which it will result in errors later when the CFDIs are generated.

![Company data information](mexico/mx_co_03.png)

</div>

<div class="tip">

<div class="title">

Tip

</div>

If you want to test the Mexican localization, you can configure the
company with a real address within Mexico (including all fields) and add
`EKU9003173C9` as RFC.

</div>

### Set the fiscal regime of the company

The following is to indicate what is the fiscal regime of the company
that we are configuring, which is done through a pre-existing field in
Odoo called "Fiscal Regime".

Go to `Settings --> Accounting --> Electronic Invoicing (MX) --> Fiscal
Regime`, and select the option that applies to your company from the
drop-down list.

![Set the Fiscal Regime in Odoo Accounting](mexico/mx_co_04.png)

<div class="tip">

<div class="title">

Tip

</div>

For the test environment: Select the option **General Law on Legal
Persons** from the drop-down menu.

</div>

### Contacts Configuration

When creating a contact to be invoiced in Odoo, the following
information must be configured for invoice validation: **complete
address** (including postal code, city, state, country, etc.) and the
**VAT** number.

![Contact form example](mexico/mx_co_05.png)

### Taxes Configuration

A necessary configuration for electronic invoicing to work correctly in
Odoo is to add the factor type associated with sales taxes.

To make this configuration you first have to go to `Accounting -->
Configuration -->
Settings --> Taxes`.

Within the list of taxes that are pre-loaded, select the option *Sales*
on the filter, this is to see only taxes associated with sales, which
are those that are validated for the stamping of invoices. Open the form
view of any of the sales taxes, select the **Advanced Options** tab and
within the field **Factor Type** choose the option *Tasa*.

![Taxes configuration](mexico/mx_co_06.png)

Do the same for all the sales taxes that the company needs, either those
that come by default in Odoo, or those that you add that are necessary
for your company bill.

<div class="tip">

<div class="title">

Tip

</div>

For the 0% VAT tax, select the option `Tasa` within the `Factor Type`
field. For the 0% VAT **exempt** tax, select the option `Exento` instead
of `Tasa` within the `Factor Type` field.

</div>

When registering a payment, Odoo will carry out the movement of taxes
from the **Cash Basis Transition Account** to the account set in the
**Definition** tab. For such movement, a tax base account will be used
("Base Imponible de Impuestos en Base a Flujo de Efectivo" - **do not
eliminate this account**) in the Journal Entry when reclassifying taxes.

![Taxes accounts](mexico/mx_co_07.png)

### Products Configuration

All products to be sold need to have the SAT code associated with their
classification so that the invoices do not give an error when
validating.

To configure products, go to the **General Information** tab and in the
**UNSPSC Product Category** field select the category that represents
that product. The process can be done manually or through a bulk import.

![Configure products](mexico/mx_co_08.png)

### PAC Configuration to sign invoices

Another important step to configure electronic invoicing in Odoo is to
enter the PAC which you are working with and the credentials. That way,
electronic invoicing will be enabled.

<div class="warning">

<div class="title">

Warning

</div>

Remember that you must register directly with the PAC of your choice
before you start creating invoices from Odoo. We have the following PACs
available: [Quadrum](https://cfdiquadrum.com.mx/index.html), [Solución
Factible](https://solucionfactible.com/) and [SW Sapien - Smarter
Web](https://info.sw.com.mx/sw-smarter-odoo/).

You must process your **Private Key (CSD)** with the SAT institution
before following these steps. If you do not have this information, try
with the Test Credentials and return to this process when you have the
SAT Credentials for your production environment to work with real
transactions.

</div>

To add the credentials, go to `Settings --> Accounting --> Electronic
Invoicing
(MX)`. Under the **PAC MX** section, enter the name of your PAC with
your credentials (PAC username and PAC password).

![PAC credentials](mexico/mx_co_09.png)

<div class="tip">

<div class="title">

Tip

</div>

If you check the checkbox **Test Environment**, it is not necessary to
enter a PAC username and/or password, but you must select a PAC from the
drop-down list.

</div>

Finally, upload the digital certificates of the company within the
section **MX Certificates**. Click on *Add a line*, a window will open,
click on *Create* and from there you can upload your digital
certificate, your key and your password. To finish, click on *Save and
Close*.

![Certificate and key](mexico/mx_co_10.png)

<div class="tip">

<div class="title">

Tip

</div>

If you still do not have one of the contracted PACs and you want to test
electronic invoicing you can use the following SAT test certificates:

  - `Certificate <mexico/certificate.cer>`
  - `Certificate Key <mexico/certificate.key>`
  - **Password:** `12345678a`

You must also configure the company with a real address within Mexico
(including all fields) and add `EKU9003173C9` as the **VAT** number.

</div>

## Workflows

### Electronic invoicing

The invoicing process in Odoo is based on
[Annex 20](http://omawww.sat.gob.mx/tramitesyservicios/Paginas/anexo_20_version3-3.htm)
version 3.3 of electronic invoicing of the SAT.

To start invoicing from Odoo, an invoice must be created using the
standard invoicing flow, that is, either from a sales order or from the
invoice menu in the Accounting application.

The invoice will be stamped after clicking on *Validate*, before that
the status is still in draft mode and changes can be made to it. After
validating the invoice, you can verify that it was successfully stamped,
as it would look like this:

![Creating an invoice](mexico/mx_ft_01.png)

The details of the invoice will be reflected in the Chatter, which is
what you see on the right of the invoice in the attached image. There
you can find your XML sent to the SAT and the status of the stamping,
that is, if it was validated or not.

To send the stamped invoice to your client, you can send the XML
together with the PDF file directly from Odoo, by clicking the *Send and
Print* button. You can also download the PDF file directly to your
computer by clicking the *Print* button and selecting the desired
option.

<div class="tip">

<div class="title">

Tip

</div>

Depending on the size of the screen, the Chatter can be seen next to or
below the document.

</div>

### Invoicing Special Cases

#### Foreign Trade Invoice

The foreign trade invoicing process in Odoo is based on the
corresponding [SAT
regulation](http://omawww.sat.gob.mx/tramitesyservicios/Paginas/complemento_comercio_exterior.htm).
SAT electronic invoicing version is 3.3.

##### What do we mean when we talk about foreign trade?

Since January 2018, the SAT requires a Foreign Trade Supplement in
export transactions.

##### What is the Foreign Trade complement?

It is an Annex to the electronic invoice that allows the identification
of exporters and importers, in addition to expanding the description of
the merchandise sold.

##### What information can be incorporated in this new complement?

  - Information on the operation type it covers.
  - Tax identification data of the issuer, receiver or recipient of the
    merchandise.
  - Description of the goods to be exported.

##### Who is obliged to generate it?

Taxpayers who carry out export operations of A1 type.

##### To which exports does the A1 type apply?

  - Entry of goods of foreign origin to remain in national territory for
    an unlimited time.
  - Exit of goods from the country to stay abroad for an unlimited time.
  - Definitive importation of vehicles by diplomatic and consular
    missions and offices of international organizations and their
    foreign personnel, in accordance with the import of vehicles in
    diplomatic exemption.

##### Is Foreign Trade the same as Pedimentos?

Not necessarily, the Pedimentos are directly related to the process of
Importing goods, while the Foreign Trade Complement is related to the
Exporting process.

##### Required Modules

In order to generate foreign trade invoices, the following modules must
be installed.

  - EDI for Mexico (l10n\_mx\_edi)
    
    ![EDI para México](mexico/mx_ft_02.png)

  - EDI for Mexico (l10n\_mx\_edi\_extended)
    
    ![EDI Advanced Features](mexico/mx_ft_03.png)

##### Company

Configure the company with a valid postal code, and if you have a colony
code, this should match with the corresponding Zip Code. At the same
time, remember to place the Tax Identification Number (VAT Number -
RFC).

![Contact address configuration](mexico/mx_ft_04.png)

##### Receiving Client

Generally it will be a foreign client, in which you must verify that you
have at least the following fields completed with the corresponding
information.

![External trade invoice](mexico/mx_ft_05.png)

<div class="warning">

<div class="title">

Warning

</div>

\- The customer's delivery address must also contain the zip code. - The
format of the foreign VAT (Tax Identification Number) will be validated
as appropriate in each Country (Example: Colombia `123456789-1`) - In
the XML, the VAT is automatically replaced by the Generic VAT for abroad
transactions: `XEXX010101000`

</div>

##### Products

At the product level there must also configure some parameters in the
following fields.

![SAT product code](mexico/mx_ft_06.png)

![Tariff fraction](mexico/mx_ft_07.png)

<div class="warning">

<div class="title">

Warning

</div>

\- You must select the **UMT Aduana** (Unit of Measure) in *KG* since it
is only accepted by the SAT - The weight refers to **the unit weight**
of the product - The tariff item must be from the code UoM of Kilograms
(**UoM = 01**)

Although the product is sold in pieces or in units, the value that must
be registered with customs in the tariff item must be reported in
Kilograms.

</div>

##### Invoicing Flow

When creating the foreign sales invoice, you must select the
**Incoterm** corresponding and the **Need external trade?** checkbox
must be checked. With this configuration enabled, the **PDF** and the
complement **XML** of the invoice will have the necessary information to
comply with the SAT regulations.

##### What is the certificate of origin and when is it used?

The **Certificate Source** (or proof of origin) is the document that
allows an importer or exporter to prove the country or region from which
a good is considered to originate and serves to receive tariff
preferences generally agreed in trade agreements.

![Incoterm on invoice](mexico/mx_ft_08.png)

![PDF external Trade](mexico/mx_ft_09.png)

#### Assign Pedimentos

If your company imports products and you need to add the **Pedimentos**
number in your invoices, you can also configure Odoo to record the
process.

First, go to `Apps`, remove the "Apps" filter and search for `Mexico`,
`mx` or `l10n_mx`. Then, install **Odoo Mexico Localization for Stock /
Landing module (l10n\_mx\_edi\_landing)**.

![MX stock module](mexico/mx_ft_10.png)

<div class="tip">

<div class="title">

Tip

</div>

The l10n\_mx\_edi\_landing module depends on the **Inventory** and
**Sales** apps, since the products must be entered into inventory to be
able to add their Pedimentos number to the corresponding receipt of
products.

</div>

Then, go to `Inventory --> Settings --> Settings`. Within the options,
activate **Landed Costs**. This option will allow adding the Pedimentos
number to the corresponding product receptions.

![Costos en destino](mexico/mx_ft_11.png)

<div class="tip">

<div class="title">

Tip

</div>

In order to use landed costs, the accounting configuration of the
inventory valuation of the products must be configured as *Automated*
and its costing method *Average* or *FIFO* (first in, first out).

</div>

To associate the Pedimentos number indicated with an import (merchandise
reception) a new **Landed Cost** must be created. They can be accessed
through `Inventory --> Operations -->
Landed Costs`. There you will find the option to attach the Pedimentos
number.

![Customs number](mexico/mx_ft_12.png)

<div class="warning">

<div class="title">

Warning

</div>

You can only add the Pedimentos number once, so be careful when
associating the correct number with the transfer(s).

<div class="seealso">

`/applications/inventory_and_mrp/inventory/management/reporting/integrating_landed_costs`.

</div>

</div>

#### Payment Terms

The **Payment Terms** are already configured in Odoo when installing the
Mexican localization, this means that if you go to `Accounting -->
Configuration --> Payment Terms`, you will find the default list in
Odoo.

![Payment terms](mexico/mx_ft_13.png)

In Mexico you can have 2 types of payments: PPD or PUE. These are given
by the **Payment Term** chosen (or if there is no chosen payment term it
will be based on the due date of the invoice).

##### PPD Payments

To configure PPD payments (payment in installments or deferred) it is
only necessary to choose a date expiration date for your invoice and
Odoo will detect if it is after the first day of the following month (in
this case no payment term is set - with the payment term you can also
stipulate if it will be PPDo PUE).

##### PUE

To configure PUE payments (payment in a single payment) you must select
an invoice due date within the same month or choose a payment term that
does not imply changing the due month (immediate payment, 15 days, 21
days, all falling within the current month).

### Payments

[According to the SAT
documentation](https://www.sat.gob.mx/consultas/92764/comprobante-de-recepcion-de-pagos),
there may be 2 types of payments: **PUE** or **PPD**. In both cases the
payment process in Odoo is the same, the difference of whether the
payment is PUE or PPD lies in the payment term of the invoice - as
indicated in the previous point in the **Payment Terms**.

If the payment is a PPD type, Odoo will generate the corresponding
payment complement automatically when you *Confirm* it. If the payment
is PUE, the payment complement will not be generated. The type of
payment is visible from the invoice in the field called **Payment
Policy** and takes the invoice date and the due date as parameters.

![Payment policy](mexico/mx_ft_14.png)

When configuring the contacts that will be used when making payments,
you must configure the banks in the **Accounting** tab, place both the
Bank, Account Number and CLABE.

![Contact bank account](mexico/mx_ft_15.png)

#### Register PPD Payments

If at the time of registering a payment it is of type PPD then a Payment
Complement (XML) will be generated with its details.

The payment can be registered from the invoice and once it is confirmed,
the invoice will be paid and with its payment associated.

![PPD payments](mexico/mx_ft_16.png)

![PPD payment information](mexico/mx_ft_17.png)

<div class="note">

<div class="title">

Note

</div>

The journal will be the payment method where you receive or send the
payment from. You must also associate a **Payment Way** and a Recipient
Bank Account (this last one must be created within the contact
associated with the invoice).

</div>

Once the payment is made, it will be associated with the corresponding
invoice and its status will be *In Payment* since the payment will be
effectively validated when it is bank reconciled.

<div class="seealso">

`../accounting/bank/reconciliation/use_cases`.

</div>

![PPD payment created](mexico/mx_ft_18.png)

<div class="note">

<div class="title">

Note

</div>

The **Recipient Bank Account** is the one attached to the **Accounting**
tab in the contact associated with the invoice, it must be valid so that
the stamped payment complement can be created.

</div>

<div class="warning">

<div class="title">

Warning

</div>

\- When making a payment in MXN for an invoice in USD, the payment must
be created using the `Register Payment` button **on the invoice view**
and not separately as a payment. Otherwise, the payment CFDI is not
correctly generated. - As such, a payment in MXN cannot be used to pay
multiple invoices in USD. Rather, the payment should be separated into
multiple payments created using the `Register Payment` button on the
corresponding invoices.

</div>

#### Register PUE Payments

If at the time of registering a payment it is of the PUE type then in
this case a Payment Complement (XML) will not be generated since it is
not necessary.

The payment can be registered from the invoice and once it is confirmed,
the invoice will be paid and with its payment associated.

![PUE payments](mexico/mx_ft_19.png)

![PUE payment information](mexico/mx_ft_20.png)

![PUE payment created](mexico/mx_ft_21.png)

<div class="note">

<div class="title">

Note

</div>

In this case it is not created as a payment supplement by the nature of
it.

</div>

#### Down Payments

This is a special case in which we must receive an advance payment from
a client to later be applied to an invoice.

<div class="seealso">

[The official documentation for registration of down payments in
Mexico](http://omawww.sat.gob.mx/tramitesyservicios/Paginas/documentos/Caso_uso_Anticipo.pdf).

</div>

##### Process to create advance in Mexico

1.  Issuance of electronic invoicing with the amount of the advance
    payment received.
2.  Issuance of the electronic invoice for the total value of the
    operation (full invoice). (CFDI Origin: 07 | Advance invoice, point
    1)
3.  Issuance of the electronic invoice with the *Egreso* type. (CFDI
    Origin: 07 | Invoice\_total, point 2)

##### Steps to follow in Odoo

1.  Preparation: Create the product
2.  Down Payment issuance of the electronic invoice for the amount of
    the advance payment received
3.  Issuance of the electronic invoice for the total value of the
    operation
4.  Add a credit note from the down payment invoice

###### Preparation: Create the Product

The Down Payment product must be type *Service* and must use the **NSPSC
Product Category**: *84111506 Servicios de facturación*.

![Down payment product](mexico/mx_ft_22.png)

Add the down payment product as default to be used from the Odoo
configurations.

![Down payment configuration](mexico/mx_ft_23.png)

###### Issuance of the electronic invoice for the value of the advance received

Create the Advance Payment Invoice: From the sales order, create an
advance payment invoice for the percentage of the purchase to be paid in
advance (or for a fixed amount).

![Applying down payment](mexico/mx_ft_24.png)

Validate invoice with the down payment product.

![Confirm down payment](mexico/mx_ft_25.png)

![Folio fiscal down payment](mexico/mx_ft_26.png)

Register Payment to the advance payment invoice.

![Down payment invoice](mexico/mx_ft_27.png)

![Down payment registered](mexico/mx_ft_28.png)

###### Issuance of the electronic invoice for the total value of the operation.

From the sales order, create an invoice for the total, that is, for all
the order lines without discounting the advance.

![Full invoice](mexico/mx_ft_29.png)

<div class="note">

<div class="title">

Note

</div>

Remove the check mark from the **Deduct down payments** field.

</div>

Add the original CFDI of the advance payment invoice by adding `07 |` at
the beginning + Folio Fiscal of the advance payment Invoice created in
the previous step.

Copy the Folio Fiscal of the following invoice following this example:

![Folio full invoice](mexico/mx_ft_30.png)

And paste it in the draft invoice created from the Sales Order without
deducting the advances:

![CFDI origen folio](mexico/mx_ft_31.png)

Validate and copy the Folio Fiscal for later (in the example the Folio
Fiscal copy is: 50E4FF06-4341-4006-A7C3-A7F653CBEFAE )

###### Add credit note from invoice

Create a **Credit Note** from the down payment invoice (the corrective
invoice must be edited prior to confirming it, see explanation below the
2 following images)

![Creation of a Credit Note](mexico/mx_ft_32.png)

![Matching down payment](mexico/mx_ft_33.png)

Before you *Confirm* the Credit Note, edit the Origin CFDI with `07 |
XXX` instead of the prefix `01 | XXX`

![Modify folio fiscal](mexico/mx_ft_34.png)

![CFDI origen type](mexico/mx_ft_35.png)

Now the invoice can be confirmed.

![Post credit note](mexico/mx_ft_36.png)

Now the Credit Note (Advance Payment) must be applied to the total
invoice, this is added at the bottom below the amount owed.

![Add credit note](mexico/mx_ft_37.png)

![Down payment applied](mexico/mx_ft_38.png)

Register a payment for the difference of the down payment and the total
of the sale.

![Residual amount payment](mexico/mx_ft_39.png)

If you go to the XML of the invoice, you should see in CFDI related the
type of relationship 07 and the Folio Fiscal of the advance payment
invoice.

![XML down payment](mexico/mx_ft_40.png)

#### Discounts based on payment days

Cash discounts are incentives that you can offer to motivate customers
to pay within a specified time period. For example, you offer a 2%
discount if the customer pays you within the first 5 days of the
invoice, when it is due in 30 days. This approach can greatly improve
your average customer payments period.

1.  Create and assign the corresponding Payment Term
2.  Register the Payment within the days of the discount
3.  Create a credit note

##### Create and assign the corresponding Payment Term

To configure the discount for advance payment, go to `Accounting -->
Configuration
--> Payment Terms` and click on *Create*. Add a Percentage type with a
corresponding value (for example, 98% of the total price for a 2%
discount) and the number of days for which the offer is valid (for
example 5 days). You can also change the balance due type if necessary
(in this example 30 days).

![Discount payment term](mexico/mx_ft_41.png)

Then when creating our Sales Order or Sales Invoice, assign the Payment
Term created previously.

![discount on invoice](mexico/mx_ft_42.png)

##### Register the Payment within the days of the discount

Register the payment within the days in which the application of the
discount was specified, in our case it is within 5 days after the
creation of the Sales Invoice.

![Discount payment](mexico/mx_ft_43.png)

Then go to the bottom of the invoice where the totals are located and
there you will see 2 payments created, reset to draft and cancel the
payment that does not correspond - the one related to the discount.

![See discount payment](mexico/mx_ft_44.png)

![Mote to draft payment](mexico/mx_ft_45.png)

![Cancel payment](mexico/mx_ft_46.png)

##### Create a credit note

Finally to close the cycle we must close the invoice, but as in this
case we apply a discount, to close it correctly we must create a credit
note specifying that the difference was given to the customer on a
**Credit Note**.

![Discount credit note](mexico/mx_ft_47.png)

![Reason of credit note](mexico/mx_ft_48.png)

Adjust the amount to the remaining balance in the original invoice.

![Total credit note](mexico/mx_ft_49.png)

Add the Credit Note to the original invoice so that it is settled.

![Add credit note for discount](mexico/mx_ft_50.png)

### Cancellation of invoices

#### Before 72 Hours

If it is necessary to cancel an invoice validated and sent to the SAT in
less than 72 hours follow the steps below.

1.  Request Cancellation
    
    ![Cancel within 72 hours](mexico/mx_ft_51.png)

2.  The status of the **Electronic invoicing** changes to *Cancelled*

3.  Click on *RESET TO DRAFT*
    
    ![Invoice to draft](mexico/mx_ft_52.png)

4.  Click on *CANCEL ENTRY*
    
    ![Cancel journal entry](mexico/mx_ft_53.png)

#### After 72 Hours

If It is necessary to cancel an invoice validated and sent to the SAT
more than 72 hours, the client must be asked to accept the cancellation,
for this the following steps must be followed.

1.  Click on *Request EDI Cancellation* to inform the SAT that you want
    to cancel the invoice, in this case the client has to enter the SAT
    webpage and approve it. (The status of the **Electronic invoicing**
    field in Odoo changes to *To Cancel*)
2.  When the client (Receiver / Customer) approves the Cancellation in
    their SAT portal it is now possible to Change the invoice to Draft
    and then click on *Cancel entry*.
3.  Odoo synchronizes with the SAT to update the status of the
    **Electronic invoicing** with a scheduled action, Invoices canceled
    in the SAT will be canceled in Odoo.

![Cancel after 72 hours](mexico/mx_ft_54.png)

After clicking on **Request EDI cancellation**, the status of the
**Electronic invoicing** field will be *To Cancel* but the status of the
SAT will be the same to *Valid*, it will remain active until the end
customer / Recipient approves the cancellation in the SAT.

![Check estado del PAC](mexico/mx_ft_55.png)

Once canceled in the SAT, Odoo will synchronize the status of the SAT
through scheduled actions that are executed every day to synchronize the
statuses of the SAT, Electronic invoicing and Odoo (this scheduled
action can be executed manually by entering with developer mode).

If the invoice is canceled in the SAT, in Odoo it is also canceled,
which allows you to switch the invoice to draft and finally cancel the
invoice (*cancel entry*).

![PAC scheduled action](mexico/mx_ft_56.png)

#### Cancel Paid Invoices

If the invoice has already been paid, a credit note must be created from
the invoice so that the originating CFDI is recognized and later cancel
the original invoice.

![Cancel paid invoice](mexico/mx_ft_57.png)

![Credit note to cancel](mexico/mx_ft_58.png)

#### Cancel Invoices from the previous period

##### Problem

If the invoice is from the previous month and the period is closed, the
income has already been declared in Financial Reports and to the
government. In Odoo, when canceling an invoice, the journal entry is
eliminated as if the income already reported had not existed, this
represents a fiscal problem because the income was already declared in
the previous month.

The problem resides when the fiscal period has been closed, in the
current period you have to make the reverse entry and save the
cancellation information.

Invoice to be canceled

![Previous period](mexico/mx_ft_59.png)

This is how the Balance Sheet looks like:

![Previous BS](mexico/mx_ft_60.png)

If the invoice is canceled, the journal entry and the Balance Sheet
looks like this after canceling:

![AR in BS](mexico/mx_ft_61.png)

##### Solution

1.  Close the fiscal period every month (Best Practice Mexican
    Localization)
2.  Cancel invoice in SAT
3.  Create a Manual Reversion entry (Journal Entry)
4.  Reconcile the open invoice with the reversal entry (Journal Entry)
5.  Change Electronic invoicing status to Cancelled with server action

###### Close accounting period each month (Best Practice Mexican Localization)

If the accounting period is closed due to the blocking dates, Odoo will
not allow to modify or add accounting entries of a date corresponding to
that accounting period.

![Closing fiscal period](mexico/mx_ft_62.png)

###### Cancel invoice in the SAT

If the accounting period is closed, and the invoice was canceled in the
SAT, the status in Odoo will be published while the **Electronic
invoicing** status will be *Sent* and the SAT status is *Cancelled*.

![Cancel in SAT](mexico/mx_ft_63.png)

###### Create Manual Reversal Journal Entry

The solution is to create the reversal journal entry manually dated in
the current fiscal period and reconcile the open invoice with the
reversion created manually.

It must be clearly indicated in the reference that it is a cancellation
(you can use a cancellation account for invoices from previous periods
such as **Other Income**).

![Manual reversal](mexico/mx_ft_64.png)

###### Reconcile the open invoice with the reversal entry

![Reconcile open invoice](mexico/mx_ft_65.png)

![Open invoice paid](mexico/mx_ft_66.png)

In the Balance Sheet and Trial balance they are now with the correct
balances.

![New BS](mexico/mx_ft_67.png)

![Up to date BS](mexico/mx_ft_68.png)

![Balanza de comprobación](mexico/mx_ft_69.png)

###### Change status of Electronic invoicing to Cancelled with server action

A server action can be created that modifies the status of the invoice
to *Cancelled* once it is reconciled with the reversal entry (You should
check this with support or with your Assigned Functional Consultant
prior to performing this action).

![Scheduled action PAC status](mexico/mx_ft_70.png)

![Execute server action](mexico/mx_ft_71.png)

### Electronic Accounting

Accounting for Mexico in Odoo is composed of 3 reports:

1.  Electronic Chart of Accounts (Called and displayed as COA).
2.  Electronic Trial Balance.
3.  DIOT report.

1\. and 2. are considered electronic accounting, and DIOT is a report
only available in the context of accounting.

You can find all of those reports in `Accounting --> Reporting -->
Mexico`

![MX reports](mexico/mx_ce_01.png)

#### Electronic Chart of Accounts (Called and displayed as COA).

Electronic invoicing has never been so easy, just go to `Accounting ->
Reports ->
Mexico -> COA` and click the button **Export for SAT (XML)**.

![COA for SAT](mexico/mx_ce_02.png)

#### How to add new accounts ?

If you add an account with the NNN.YY.ZZ encoding convention where
NNN.YY is a SAT encoding group, your account will be set up
automatically.

Example to add an Account for a new Bank account go to `Accounting -->
Settings -->
Chart of Account` and then create a new account in the «Create» button
and try to create an account with the number 102.01.99 once you change
to establish the name you will see an automatically configured label,
the configured labels are the ones chosen to be used in the COA in XML.

![Create account](mexico/mx_ce_03.png)

#### What is the meaning of the tags?

To know all the possible labels, you can read
[Annex 24](http://www.sat.gob.mx/fichas_tematicas/buzon_tributario/Documents/Anexo24_05012015.pdf)
on the SAT website in the section called **Código agrupador de cuentas
del SAT**.

<div class="tip">

<div class="title">

Tip

</div>

When you install the l10n\_mx module and your chart of accounts depends
on it (this happens automatically when you install the configuration of
Mexico as a country in your database), it will have the most common
labels by default. If the tag you need is not created, you can create
it.

</div>

### Trial Balance

Exactly like the COA but with the credit and debit of the initial
balance, once you have correctly configured your COA, you can go to
`Reports --> Trial Balance` this is automatically generated and can be
exported to XML using the button on the top **Export for SAT (XML)**
with the previous selection of the period you want to export.

![Electronic verification balance](mexico/mx_ce_04.png)

All normal analysis and listed functions are available here as well as
any normal Odoo Report.

#### DIOT Report (Requires Accounting App)

##### What is DIOT and the importance of presenting it SAT

When it comes to procedures with the SAT Administration Service, we know
that we should not neglect what we present.

The DIOT is the Informative Declaration of Operations with Third Parties
(DIOT), which is an additional obligation with VAT, where we must give
the status of our operations to third parties, or what is considered the
same, with our suppliers.

This applies to both individuals and Personas Morales, so if we have VAT
to present to the SAT and also deal with suppliers it is necessary to
send the DIOT.

##### When to file the DIOT and in what format ?

It is easy to present the DIOT, since, like all formats, you can obtain
it on the SAT page, it is the electronic form A-29 that you can find on
the SAT website.

Every month if you have operations with third parties, it is necessary
to present the DIOT, as we do with VAT, so if in January we have deals
with suppliers, by February we must present the information relevant to
said data.

##### Where is DIOT presented?

You can present DIOT in different ways, it is up to you which one you
will choose and which one will be more comfortable for you since you
will present it every month or every time you have dealings with
suppliers.

The A-29 form is electronic so you can present it on the SAT page, but
this after having made up to 500 registrations.

Once these 500 records have been entered in the SAT, you must submit
them to the Local Taxpayer Services Administration (ALSC) with
correspondence to your tax address, these records can be submitted on a
digital storage medium such as a CD or USB, which a Once validated, they
will return you, so do not doubt that you will still have these discs
and of course, your CD or USB.

##### One more thing to know: batch loading?

When reviewing the official SAT documents in DIOT, you will find the
Batch load, and of course the first thing we think is what is that ?,
and according to the SAT site it is:

The "batch load" is the conversion of databases from records of
transactions with suppliers made by taxpayers in text files (.txt).
These files have the necessary structure for their application and
import into the Informative Declaration of Operations with third parties
system, avoiding direct capture and consequently, optimizing the time
invested in their integration for the presentation in time and form to
the SAT.

You can use it to present the DIOT, since it is allowed, which will
facilitate this operation, so that it does not exist to avoid being in
line with the SAT in regards to the Informative Declaration of
Operations with Third Parties.

<div class="seealso">

[official
information](http://www.sat.gob.mx/fichas_tematicas/declaraciones_informativas/Paginas/declaracion_informativa_terceros.aspx)

</div>

##### How to generate this report in Odoo?

1.  Go to `Accounting --> Reports --> Mexico --> Transactions with third
    partied
    (DIOT)`.
    
    ![DIOT report](mexico/mx_ce_05.png)

2.  A report view is displayed, select the last month to report the
    immediately preceding month or leave the current month if it suits
    you.
    
    ![DIOT filter](mexico/mx_ce_06.png)

3.  Click on *Export (XLSX)* or *Print (TXT)*

![Print DIOT](mexico/mx_ce_07.png)

1.  Save the downloaded file in a safe place, go to the SAT website and
    follow the necessary steps to declare it.

#### Important considerations about your supplier and invoice data for DIOT

  - All suppliers must have the fields configured in the accounting tab
    called "DIOT Information", the L10N MX Nationality field is
    completed by simply selecting the appropriate country in the
    address, not You need to do nothing else there, but the l10n MX type
    of operation must be configured in all your providers.

![DIOT configuration](mexico/mx_ce_08.png)

  - There are 3 VAT options for this report, 16%, 0% and exempt, one
    invoice line in Odoo is considered exempt if there is no tax on it,
    the other 2 taxes are already configured correctly.
  - Remember that to pay an invoice that represents a prepayment, you
    must first request the invoice and then pay it and properly
    reconcile the payment following the standard Odoo procedure.
  - You do not need to fill in all your partner data to try to generate
    the supplier invoice, you can correct this information when you
    generate the report.
  - Remember that this report only shows vendor invoices that were
    actually paid.

If some of these considerations are not taken into account, a message
like this will appear when you generate the DIOT in TXT with all the
partners you need to verify this particular report, this is the reason
why we recommend to use this report not only for exporting your legal
information. obligation, but generate it before the end of the month and
use it as your auditory process to see that all your partners are
configured correctly.

![DIOT Error](mexico/mx_ce_09.png)

### Closing Fiscal Period in Odoo

Before proceeding to the close of the fiscal year, there are some steps
that you should normally take to ensure that your accounting is correct,
updated and accurate:

  - Make sure that you have fully reconciled your bank account (s)
    through the end of the year and confirm that the closing book
    balances match the balances on your bank statements.
  - Verify that all customer invoices have been entered and approved.
  - Confirm that you have entered and approved all vendor bills.
  - Validate all expenses, ensuring their accuracy.
  - Check that all payments received have been entered and recorded
    exactly.

#### Year-end checklist

  - Run a **Tax Report**, and verify that your tax information is
    correct.
  - Reconcile all accounts on your **Balance Sheet**
      - Compare your bank balances in Odoo against the current bank
        balances on your statements. Use the report **Bank
        Reconciliation** to help you with this.
      - Reconcile all cash and bank account transactions by running your
        **Old Accounts Receivable** and **Old Accounts Payable** reports
      - Audit your accounts, making sure you fully understand the
        transactions that affect them and the nature of the
        transactions, making sure to include loans and fixed assets.
  - Run the optional function **Payments Matching**, under the *More*
    drop-down on the Journal options from the Accounting dashboard,
    validating any Vendor Bill and Customer Invoices with its payments.
    This step is optional, however it can assist the year-end process if
    all pending payments and invoices are reconciled, and it can lead to
    finding errors or mistakes in the system.
  - Your accountant will probably like to check your items in the
    balance sheet and do some Journal Entries for:
      - Manual year-end adjustments, using the **Journal Audit** report
        (For example, the **Current Earnings for the Year** and
        **Retained Earnings reports**).
      - **Work in Progress**.
      - **Depreciation Journals**.
      - **Loans**.
      - **Tax Adjustments**.

If your accountant is on the year-end audit, they will want to have
copies of the balance sheet items (such as loans, bank accounts,
prepayments, sales tax reports, etc ...) to compare against. your
balances in Odoo.

During this process, it is a good practice setting the **Closing Date
for Non-Advisers** to the last day of the preceding financial year,
which is set under the accounting settings. In this way, the accountant
can trust that no one else is changing the previous year's transactions
while auditing the books.

![Fiscal year](mexico/mx_cc_01.png)

#### Accounting Closing Process

In Odoo there is no need to make a specific year-end entry to close the
reporting income accounts . The result of the exercise is automatically
calculated in the account type (Current Year Earnings) and the
difference between Income - Expenses will be accumulated to calculate
it.

The reports are created in real-time, which means that the **Income
Report** corresponds directly to the closing date of the year that you
specify in Odoo. In addition, at any time that you generate the **Income
Report**, the start date will correspond to the start date of the
**Fiscal Year** and the account balances will all be 0.

As of December 31, the Balance Sheet shows the earnings of the Current
Year that do not have been recognized (Account type Total Current Year
Unallocated Earnings in MX account 305.01.01 \['current year earnings'
type\])

![Balance sheet closing](mexico/mx_cc_02.png)

The accountant should create a Journal Entry to recognize the result of
the year in Accumulated Earnings from previous years on the account
"previous years results" account (304.01.01 in Mexico) - that is an
equity account.

After posting the Journal Entry, click on *Mark as Closing Entry for the
Fiscal Year*. This step is important because it is linked to the Trial
Balance report. If this Journal Entry is not marked as a Closing Entry,
the Trial Balance won't be correct.

The simplified accounting entry would look like this:

![Closing journal entry](mexico/mx_cc_03.png)

Once the accountant has created the journal entry to locate the
**Current Earnings for the Year**, they must set the **Closing Date** to
the last day of the fiscal year. Making sure that before doing this,
whether or not the current gain of the year in the **Balance Sheet** is
properly reporting a balance 0.

![Check BS closing](mexico/mx_cc_04.png)

## Extra Recommended features

### Contacts App (Free)

If you want to properly manage your customers, suppliers and addresses,
this module, even if it is not a technical need, it is highly
recommended to install it.

### Multi-currency (Requires Accounting application)

In Mexico, almost all companies send and receive payments in different
currencies. If you want to do this you can enable the use of
multi-currency. You should also enable synchronization with the
**Mexican Bank Service**, as this would allow you to automatically have
the exchange rate from the SAT without having to manually create this
information every day in Odoo.

Go to settings and enable the multi-currency feature.

![Multi currency configuration](mexico/mx_mc_01.png)

### Enabling Explicit errors on the CFDI using the XSD local validator (CFDI 3.3)

Frequently you want receive explicit errors from the fields incorrectly
set on the xml, those errors are better informed to the user if the
check is enable, to enable the Check with xsd feature follow the next
steps (with the `developer mode <developer-mode>` enabled).

  - Go to `Settings --> Technical --> Actions --> Server Actions`
  - Look for the Action called "Download XSD files to CFDI"
  - Click on button "Create Contextual Action"
  - Go to the company form `Settings --> Users&Companies --> Companies`
  - Open any company you have.
  - Click on "Action" and then on "Download XSD file to CFDI".

![Download XSD files to CFDI from the Companies list view on
Odoo](mexico/mx-xsd-cfdi.png)

Now you can make an invoice with any error (for example a product
without code which is pretty common) and an explicit error will be shown
instead a generic one with no explanation.

<div class="note">

<div class="title">

Note

</div>

If you see an error like this:

`The cfdi generated is not valid`  
`attribute decl. 'TipoRelacion', attribute 'type': The QName value
'{http://www.sat.gob.mx/sitio_internet/cfd/catalogos}c_TipoRelacion'
does not resolve to a(n) simple type definition., line 36`

This can be caused by a database backup restored in another server, or
when the XSD files are not correctly downloaded. Follow the same steps
as above but:

  - Go to the company in which the error occurs.
  - Click on *Action* and then on *Download XSD file to CFDI*.

</div>

## Common problems and errors

  - **Error messages** (Only applicable on CFDI 3.3):
    
      - `9:0:ERROR:SCHEMASV:SCHEMAV_CVC_MINLENGTH_VALID: Element
        '{http://www.sat.gob.mx/cfd/3}Concepto', attribute
        'NoIdentificacion': [facet 'minLength'] The value '' has a
        length of '0'; this underruns the allowed minimum length of
        '1'.`
      - `9:0:ERROR:SCHEMASV:SCHEMAV_CVC_PATTERN_VALID: Element
        '{http://www.sat.gob.mx/cfd/3}Concepto', attribute
        'NoIdentificacion': [facet 'pattern'] The value '' is not
        accepted by the pattern '[^|]{1,100}'.`
    
    **Solution**: You forgot to set the proper "Reference" field in the
    product, please go to the product form and set your internal
    reference properly.

  - **Error messages**:
    
      - `6:0:ERROR:SCHEMASV:SCHEMAV_CVC_COMPLEX_TYPE_4: Element
        '{http://www.sat.gob.mx/cfd/3}RegimenFiscal': The attribute
        'Regimen' is required but missing.`
      - `5:0:ERROR:SCHEMASV:SCHEMAV_CVC_COMPLEX_TYPE_4: Element
        '{http://www.sat.gob.mx/cfd/3}Emisor': The attribute
        'RegimenFiscal' is required but missing.`
    
    **Solution**: You forgot to set the proper "Fiscal Position" on the
    partner of the company. Go to customers, remove the customer filter
    and look for the partner called as your company and set the proper
    fiscal position which is the kind of business your company does
    related to SAT list of possible values, another option can be that
    you forgot to follow the considerations about fiscal positions.
    
    You need to go to Fiscal Position settings and set the proper code
    (it is the first 3 numbers of the name), for example, for the test,
    you need to set 601, it will look like the picture.
    
    ![Fiscal position error](mexico/mx_faq_01.png)
    
    <div class="tip">
    
    <div class="title">
    
    Tip
    
    </div>
    
    For testing purposes this value must be set to `601 - General de Ley
    Personas Morales` which is the one required for the VAT demo.
    
    </div>

  - **Error message**:
    
      - `2:0:ERROR:SCHEMASV:SCHEMAV_CVC_ENUMERATION_VALID: Element
        '{http://www.sat.gob.mx/cfd/3}Comprobante', attribute
        'FormaPago': [facet 'enumeration'] The value '' is not an
        element of the set {'01', '02', '03', '04', '05', '06', '08',
        '12', '13', '14', '15', '17', '23', '24', '25', '26', '27',
        '28', '29', '30', '99'}`
    
    **Solution**: The payment method is required on your invoice.

![Payment method error](mexico/mx_faq_02.png)

  - **Error messages**:
    
      - `2:0:ERROR:SCHEMASV:SCHEMAV_CVC_ENUMERATION_VALID: Element
        '{http://www.sat.gob.mx/cfd/3}Comprobante', attribute
        'LugarExpedicion': [facet 'enumeration'] The value '' is not an
        element of the set {'00`
      - `2:0:ERROR:SCHEMASV:SCHEMAV_CVC_DATATYPE_VALID_1_2_1: Element
        '{http://www.sat.gob.mx/cfd/3}Comprobante', attribute
        'LugarExpedicion': '' is not a valid value of the atomic type
        '{http://www.sat.gob.mx/sitio_internet/cfd/catalogos}c_CodigoPostal'.`
      - `5:0:ERROR:SCHEMASV:SCHEMAV_CVC_COMPLEX_TYPE_4: Element
        '{http://www.sat.gob.mx/cfd/3}Emisor': The attribute 'Rfc' is
        required but missing.`
    
    **Solution**: You must configure your company address correctly,
    this is a mandatory group of fields, you can go to your company
    configuration in `Settings --> Users & Companies --> Companies` and
    fill complete all the mandatory fields for your address by following
    the steps in this section: `mx-legal-info`.

  - **Error message**:
    
      - `2:0:ERROR:SCHEMASV:SCHEMAV_CVC_DATATYPE_VALID_1_2_1: Element
        '{http://www.sat.gob.mx/cfd/3}Comprobante', attribute
        'LugarExpedicion': '' is not a valid value of the atomic type
        '{http://www.sat.gob.mx/sitio_internet/cfd/catalogos}c_CodigoPostal'.`
    
    **Solution**: The postal code of your company address is not valid
    for Mexico, please correct it.

![ZIP code error](mexico/mx_faq_03.png)

  - **Error messages**:
    
      - `18:0:ERROR:SCHEMASV:SCHEMAV_CVC_COMPLEX_TYPE_4: Element
        '{http://www.sat.gob.mx/cfd/3}Traslado': The attribute
        'TipoFactor' is required but missing.`
      - `34:0:ERROR:SCHEMASV:SCHEMAV_CVC_COMPLEX_TYPE_4: Element
        '{http://www.sat.gob.mx/cfd/3}Traslado': The attribute
        'TipoFactor' is required but missing.", '')`
    
    **Solution**: Set the Mexican name for the 0% and 16% tax in your
    system and use it on the invoice. Your tax, which represents 16% VAT
    and 0%, must have the **Factor Type** field set to *Tasa*.
    
    ![Factor type error](mexico/mx_faq_04.png)
    
    ![Rate error](mexico/mx_faq_05.png)

  - **Error messages**:
    
      - `CCE159`  
        `The XXXX attribute must be registered if the key of cce11:
        ComercioExterior: TipoOperacion registered is '1' or '2'.`
    
    **Solution**: It is necessary to specify the Incoterm.

  - **Error messages**:
    
      - `CCE209`  
        `The attribute cce11: Foreign Trade: Goods: Goods: Customs Unit
        must have the value specified in the catalog catCFDI:
        c_FraccionArancelaria column 'UMT' when the attribute cce11:
        Foreign Trade: Goods: Me`
    
    **Solution**: The Tariff Fraction must have the code of the unit of
    measure 01, corresponding to Kilograms.

## Glossary

  - `CFDI (Comprobante Fiscal Digital por Internet)`: Online Digital Tax
    Receipt
  - `CSD (Certificado de Sello Digital)`: Digital Seal Certificate
  - `PAC (Proveedores Autorizados de Certificación)`: Authorized
    Certification Provider
  - Stamp: Digital signature of the electronic invoice
  - Addenda: Complement of information that can be attached to an
    Internet Digital Tax Receipt (CFDI) normally required by certain
    companies in Mexico such as Walmart, Tiendas Sorianas, etc.
  - `UUID (Universally Unique Identifier)`: It is the acronym in English
    of the Universally Unique Identifier. The UUID is the equivalent of
    Folio Fiscal, it is composed of 32 hexadecimal digits, shown in 5
    groups separated by hyphens.
  - LCO: List of Obliged Taxpayers (LCO) is a list issued by the SAT
    that accounts for all the taxpayers whom it authorizes the issuance
    of invoices and payroll receipts. This means that, to be able to
    electronically bill your clients, you must be in this database.


---
## File: ./content/applications/finance/fiscal_localizations/switzerland.md

# Switzerland

## ISR (In-payment Slip with Reference number)

The ISRs are payment slips used in Switzerland. You can print them
directly from Odoo. On the customer invoices, there is a new button
called *Print ISR*.

![image](switzerland/switzerland00.png)

<div class="tip">

<div class="title">

Tip

</div>

The button *Print ISR* only appears there is well a bank account defined
on the invoice. You can use CH6309000000250097798 as bank account number
and 010391391 as CHF ISR reference.

</div>

![image](switzerland/switzerland01.png)

Then you open a pdf with the ISR.

![image](switzerland/switzerland02.png)

There exists two layouts for ISR: one with, and one without the bank
coordinates. To choose which one to use, there is an option to print the
bank information on the ISR. To activate it, go in `Accounting -->
Configuration --> Settings --> Customer Invoices` and enable **Print
bank on ISR**:

![image](switzerland/switzerland03.png)

### ISR reference on invoices

To ease the reconciliation process, you can add your ISR reference as
**Payment Reference** on your invoices.

To do so, you need to configure the Journal you usually use to issue
invoices. Go to `Accounting --> Configuration --> Journals`, open the
Journal you want to modify (By default, the Journal is named *Customer
Invoices*), click en *Edit*, and open the *Advanced Settings* tab. In
the **Communication Standard** field, select *Switzerland*, and click on
*Save*.

![Configure your Journal to display your ISR as payment reference on
your invoices in Odoo](switzerland/switzerland-isr-reference.png)

## Currency Rate Live Update

You can update automatically your currencies rates based on the Federal
Tax Administration from Switzerland. For this, go in `Accounting -->
Settings`, activate the multi-currencies setting and choose the service
you want.

![image](switzerland/switzerland04.png)

## Updated VAT for January 2018

Starting from the 1st January 2018, new reduced VAT rates will be
applied in Switzerland. The normal 8.0% rate will switch to 7.7% and the
specific rate for the hotel sector will switch from 3.8% to 3.7%.

### How to update your taxes in Odoo Enterprise (Odoo Online or On-premise)?

If you have the V11.1 version, all the work is already been done, you
don't have to do anything.

If you have started on an earlier version, you first have to update the
module "Switzerland - Accounting Reports". For this, you go in `Apps -->
remove the filter "Apps" --> search for "Switzerland - Accounting
Reports" --> open the module --> click on "upgrade"`.

![image](switzerland/switzerland05.png)

Once it has been done, you can work on creating new taxes for the
updated rates.

<div class="tip">

<div class="title">

Tip

</div>

**Do not suppress or modify the existing taxes** (8.0% and 3.8%). You
want to keep them since you may have to use both rates for a short
period of time. Instead, remember to archive them once you have encoded
all your 2017 transactions.

</div>

The creation of such taxes should be done in the following manner:

  - **Purchase taxes**: copy the origin tax, change its name, label on
    invoice, rate and tax group (effective from v10 only)
  - **Sale taxes**: copy the origin tax, change its name, label on
    invoice, rate and tax group (effective from v10 only). Since the vat
    report now shows the details for old and new rates, you should also
    set the tags accordingly to
      - For 7.7% taxes: Switzerland VAT Form: grid 302 base, Switzerland
        VAT Form: grid 302 tax
      - For 3.7% taxes: Switzerland VAT Form: grid 342 base, Switzerland
        VAT Form: grid 342 tax

You'll find below, as examples, the correct configuration for all taxes
included in Odoo by default

| **Tax Name**                                  | **Rate** | **Label on Invoice** | **Tax Group (effective from V10)** | **Tax Scope** | **Tag**                                                                 |
| --------------------------------------------- | -------- | -------------------- | ---------------------------------- | ------------- | ----------------------------------------------------------------------- |
| TVA 7.7% sur achat B\&S (TN)                  | 7.7%     | 7.7% achat           | TVA 7.7%                           | Purchases     | Switzerland VAT Form: grid 400                                          |
| TVA 7.7% sur achat B\&S (Incl. TN)            | 7.7%     | 7.7% achat Incl.     | TVA 7.7%                           | Purchases     | Switzerland VAT Form: grid 400                                          |
| TVA 7.7% sur invest. et autres ch. (TN)       | 7.7%     | 7.7% invest.         | TVA 7.7%                           | Purchases     | Switzerland VAT Form: grid 405                                          |
| TVA 7.7% sur invest. et autres ch. (Incl. TN) | 7.7%     | 7.7% invest. Incl.   | TVA 7.7%                           | Purchases     | Switzerland VAT Form: grid 405                                          |
| TVA 3.7% sur achat B\&S (TS)                  | 3.7%     | 3.7% achat           | TVA 3.7%                           | Purchases     | Switzerland VAT Form: grid 400                                          |
| TVA 3.7% sur achat B\&S (Incl. TS)            | 3.7%     | 3.7% achat Incl.     | TVA 3.7%                           | Purchases     | Switzerland VAT Form: grid 400                                          |
| TVA 3.7% sur invest. et autres ch. (TS)       | 3.7%     | 3.7% invest          | TVA 3.7%                           | Purchases     | Switzerland VAT Form: grid 405                                          |
| TVA 3.7% sur invest. et autres ch. (Incl. TS) | 3.7%     | 3.7% invest Incl.    | TVA 3.7%                           | Purchases     | Switzerland VAT Form: grid 405                                          |
| TVA due a 7.7% (TN)                           | 7.7%     | 7.7%                 | TVA 7.7%                           | Sales         | Switzerland VAT Form: grid 302 base, Switzerland VAT Form: grid 302 tax |
| TVA due à 7.7% (Incl. TN)                     | 7.7%     | 7.7% Incl.           | TVA 7.7%                           | Sales         | Switzerland VAT Form: grid 302 base, Switzerland VAT Form: grid 302 tax |
| TVA due à 3.7% (TS)                           | 3.7%     | 3.7%                 | TVA 3.7%                           | Sales         | Switzerland VAT Form: grid 342 base, Switzerland VAT Form: grid 342 tax |
| TVA due a 3.7% (Incl. TS)                     | 3.7%     | 3.7% Incl.           | TVA 3.7%                           | Sales         | Switzerland VAT Form: grid 342 base, Switzerland VAT Form: grid 342 tax |

If you have questions or remarks, please contact our support using
odoo.com/help.

<div class="tip">

<div class="title">

Tip

</div>

Don't forget to update your fiscal positions. If you have a version 11.1
(or higher), there is nothing to do. Otherwise, you will also have to
update your fiscal positions accordingly.

</div>


---
## File: ./content/applications/finance/fiscal_localizations/italy.md

# Italy

## Configuration

`Install <general/install>` the following modules to get all the
features of the Italian localization:

| Name                          | Technical name                                        | Description                                                           |
| ----------------------------- | ----------------------------------------------------- | --------------------------------------------------------------------- |
| Italy - Accounting            | <span class="title-ref">l10n\_it</span>               | Default `fiscal localization package <fiscal_localizations/packages>` |
| Italy - E-invoicing           | <span class="title-ref">l10n\_it\_edi</span>          | e-invoice implementation                                              |
| Italy - E-invoicing (SdiCoop) | <span class="title-ref">l10n\_it\_edi\_sdicoop</span> | Web service e-invoice implementation                                  |
| Italy - Accounting Reports    | <span class="title-ref">l10n\_it\_reports</span>      | Country-specific reports                                              |
| Italy - Stock DDT             | <span class="title-ref">l10n\_it\_stock\_ddt</span>   | Transport documents - Documento di Trasporto (DDT)                    |

<div class="warning">

<div class="title">

Warning

</div>

Once the <span class="title-ref">l10\_it\_edi\_sdicoop</span> module is
installed, sending invoices via PEC mails is no longer possible.

</div>

![Italian localization modules](italy/italy-modules.png)

### Company information

Configuring the company's information ensures your Accounting database
is properly set up. To add information, go to `Settings --> General
Settings`, and in the `Companies` section, click `Update info`. From
here, fill out the fields:

  - `Address`: the address of the company;
  - `VAT`: VAT of the company;
  - `Codice Fiscale`: the fiscal code of the company;
  - `Tax System`: the tax system under which the company falls;
  - `PEC address email`: the certified email address of the company.

![Company information to provide](italy/italy-company.png)

### PEC mail

The **PEC email** is a specific type of **certified** email providing a
legal equivalent to the traditional registered mail. The **PEC email**
of the main company must be the same as the one registered by the
**Agenzia delle Entrate** authorities.

### E-invoicing

The `SdI (Sistema di Interscambio)` is the electronic invoicing system
used in Italy. It enables to send and receive electronic invoices to and
from customers. The documents must be in XML format and formally
validated by the system before being delivered.

To be able to receive invoices and notifications, the `SdI (Sistema di
Interscambio)` service must be notified that the user's files are to be
sent to **Odoo** and processed on their behalf. To so, you must set up
Odoo's `Codice Destinatario` on the **Agenzia Delle Entrate** portal.

1.  Go to <https://ivaservizi.agenziaentrate.gov.it/portale/> and
    authenticate;
2.  Go to section `Fatture e Corrispettivi`;
3.  Set the user as Legal Party for the VAT number you wish to configure
    the electronic address;
4.  In `Servizi Disponibili --> Fatturazione Elettronica -->
    Registrazione
    dell’indirizzo telematico dove ricevere tutte le fatture
    elettroniche`, insert Odoo's `Codice Destinatario`
    <span class="title-ref">K95IV18</span>, and confirm.

#### Electronic Data Interchange (EDI)

Odoo uses the **FatturaPA** `EDI (Electronic Data Interchange)` format
for the Italian localization and is enabled on the default journals when
installed. When the **file processing authorization** has been set, all
**invoices** and **bills** are automatically sent.

<div class="note">

<div class="title">

Note

</div>

You can `enable electronic invoicing for other sales and purchase
journals
<e-invoicing/configuration>` than the default ones.

</div>

You can check the current status of an invoice by the `Electronic
invoicing` field. The XML file can be found in the **chatter** of the
invoice.

![Electronic invoicing status (waiting for
confirmation)](italy/italy-test.png)

<div class="seealso">

`../accounting/receivables/customer_invoices/electronic_invoicing`

</div>

### File processing authorization (Odoo)

Since the files are transmitted through Odoo's server before being sent
to the `SdI (Sistema
di Interscambio)` or received by your database, you need to authorize
Odoo to process your files from your database. To do so, go to
`Accounting --> Configuration --> Settings -->
Electronic Document Invoicing`.

There are **three** modes available:

  - `Demo`  
    This mode simulates an environment in which invoices are sent to the
    government. In this mode, invoices need to be *manually* downloaded
    as XML files and uploaded to the **Agenzia delle Entrate**'s
    website.

  - `Test (experimental)`  
    This mode sends invoices to a non-production (i.e., test) service
    made available by the **Agenzia delle Entrate**. Saving this change
    directs all companies on the database to use this configuration.

  - `Official`  
    This is a production mode that sends your invoices directly to the
    **Agenzia delle Entrate**.

Once a mode is selected, you need to accept the **terms and conditions**
by ticking `Allow
Odoo to process invoices`, and then `Save`. You can now record your
transactions in Odoo Accounting.

<div class="warning">

<div class="title">

Warning

</div>

Selecting either `Test (experimental)` or `Official` is
**irreversible**. Once in `Official` mode, it is not possible to select
`Test (experimental)` or `Demo`, and same for `Test (experimental)`. We
recommend creating a separate database for testing purposes only.

</div>

<div class="note">

<div class="title">

Note

</div>

When in `Test (Experimental)` mode, all invoices sent *must* have a
partner using one of the following fake `Codice Destinatario` given by
the **Agenzia Delle Entrate**: <span class="title-ref">0803HR0</span> -
<span class="title-ref">N8MIMM9</span> -
<span class="title-ref">X9XX79Z</span>. Any real production `Codice
Destinario` of your customers will not be recognized as valid by the
test service.

</div>

![Italy's electronic document invoicing options](italy/italy-edi.png)

## Taxes configuration

Many of the e-invoicing features are implemented using Odoo's tax
system. As such, it is very important that taxes are properly configured
in order to generate invoices correctly and handle other billing use
cases. For example, specific configurations are required for the
**reverse charge** type of taxes. In case of a **reverse charge** tax,
the seller does *not* charge the customer for the VAT but, instead, the
customer pays the VAT *themselves* to their government. There are
**two** main types:

  - `external reverse charge <italy/external-reverse>`;
  - `internal reverse charge <italy/internal-reverse>`.

### External reverse charge

#### Invoices

To make an export invoice, make sure that the invoice lines all use a
tax configured for **reverse charge**. The **Italian** localization
contains an **example** of a reverse charge tax for export in the EU to
be used as reference (<span class="title-ref">0% EU</span>, invoice
label <span class="title-ref">00eu</span>), which can be found under
`Accounting --> Configuration --> Taxes`. Exports are exempt from VAT,
and therefore **reverse charge** taxes require the `Has exoneration of
tax (Italy)` option ticked, with both the `Exoneration` kind and `Law
Reference` filled in.

![External reverse charge settings](italy/italy-tax.png)

<div class="note">

<div class="title">

Note

</div>

If you need to use a different kind of `Exoneration`, click `Action -->
Duplicate` within the tax menu to create a copy of an existing similar
tax. Then, select another `Exoneration`, and `Save`. Repeat this process
as many times as you need different kind of `Exoneration` taxes.

</div>

<div class="tip">

<div class="title">

Tip

</div>

**Rename** your taxes in the `Name` field according to their
`Exoneration` to differentiate them easily.

</div>

On your invoice, select the corresponding tax you need in the `Taxes`
field. You can find the following **additional info** by opening the
**XML** file of the issued invoice:

  - `SdI address (Codice Destinatario)`: must be filled for both **EU**
    or **non-EU**;
  - `Country Id`: must contain the country of the foreign seller in the
    two-letter ISO (Alpha-2) code (ex.,
    <span class="title-ref">IT</span> for 'Italy');
  - `CAP`: must be filled with <span class="title-ref">00000</span>;
  - `Partita Iva` (**VAT number**): must contain the **VAT** number for
    **EU businesses** and <span class="title-ref">OO99999999999</span>
    (double 'O' **letter**, not 'zero') for **non-EU businesses**. In
    case of private customers without **VAT** number, use
    <span class="title-ref">0000000</span>;
  - `Fiscal Code`: for foreign entities without an actual **Codice
    Fiscale**, any recognizable identifier is valid.

<div class="note">

<div class="title">

Note

</div>

Odoo does not support sending user-modified XML files.

</div>

For **invoices**, multiple configurations are technically identified by
a `Tipo Documento` code:

  - <span class="title-ref">TD02</span> - Down payments;
  - <span class="title-ref">TDO7</span> - Simplified invoice;
  - <span class="title-ref">TD08</span> - Simplified credit note;
  - <span class="title-ref">TD09</span> - Simplified debit note;
  - <span class="title-ref">TD24</span> - Deferred invoice.

<div class="tabs">

<div class="tab">

<span class="title-ref">TD02</span>

Down payments.

**Down payment** invoices are imported/exported with a different `Tipo
Documento` code <span class="title-ref">TDO2</span> than regular
invoices. Upon import of the invoice, it creates a regular vendor bill.

Odoo exports moves as <span class="title-ref">TD02</span> if the
following conditions are met:

  - Is an invoice;

<!-- end list -->

  - \- All invoice lines are related to **sales order lines** that have
    the flag <span class="title-ref">is\_downpayment</span>  
    set as <span class="title-ref">True</span>.

</div>

<div class="tab">

<span class="title-ref">TD07</span>,
<span class="title-ref">TD08</span>, and
<span class="title-ref">TD09</span>

Simplified invoices, and credit/debit notes.

Simplified invoices and credit notes can be used to certify **domestic
transactions** under **400 EUR** (VAT included). Its status is the same
as a regular invoice, but with fewer information requirements.

For a **simplified** invoice to be established, it must include:

  - `Customer Invoice` reference: **unique** numbering sequence with
    **no gaps**;
  - `Invoice Date`: issue **date** of the invoice;
  - `Company Info`: the **seller**'s full credentials (VAT/TIN number,
    name, full address) under `General Settings --> Companies
    (section)`;
  - `VAT`: the **buyer**'s VAT/TIN number (on their profile card);
  - `Total`: the total **amount** (VAT included) of the invoice.

In the `EDI (Electronic Data Interchange)`, Odoo exports invoices as
simplified if:

  - It is a **domestic** transaction (i.e., the partner is from Italy);
  - The buyer's data is **insufficient** for a regular invoice;
  - The **required fields** for a regular invoice (address, ZIP code,
    city, country) are provided;
  - The total amount VAT included is **less** than **400 EUR**.

<div class="note">

<div class="title">

Note

</div>

The 400 EUR threshold was defined in [the decree of the 10th of May 2019
in the Gazzetta
Ufficiale](https://www.gazzettaufficiale.it/eli/id/2019/05/24/19A03271/sg).
We advise you to check the current official value.

</div>

</div>

<div class="tab">

<span class="title-ref">TD24</span>

Deferred invoices.

The **deferred invoice** is an invoice that is **issued at a later
time** than the sale of goods or the provision of services. A **deferred
invoice** has to be issued at the latest within the **15th day** of the
month following the delivery covered by the document.

It usually is a **summary invoice** containing a list of multiple sales
of goods or services, carried out in the month. The business is allowed
to **group** the sales into **one invoice**, generally issued at the
**end of the month** for accounting purposes. Deferred invoices are
default for **wholesaler** having recurrent clients.

If the goods are transported by a **carrier**, every delivery has an
associated **Documento di Transporto (DDT)**, or **Transport Document**.
The deferred invoice **must** indicate the details of all the **DDTs**
information for better tracing.

<div class="note">

<div class="title">

Note

</div>

E-invoicing of deferred invoices requires the
<span class="title-ref">l10n\_it\_stock\_ddt</span> `module
<italy/modules>`. In this case, a dedicated `Tipo Documento`
<span class="title-ref">TD24</span> is used in the e-invoice.

</div>

Odoo exports moves as <span class="title-ref">TD24</span> if the
following conditions are met:

  - Is an invoice;
  - Is associated to deliveries whose **DDTs** have a **different** date
    than the issuance date of the invoice.

</div>

</div>

#### Vendor bills

Italian companies buying goods or services from EU countries (or
services from non-EU countries) must send the information contained
within the bill received to the **Agenzia delle Entrate**. This allows
you to complete tax-related information on your bill, and to send it.
The seller must be set as `Cedente/Prestatore`, and the buyer as
`Cessionario/Committente`. Contained within the **XML** document for the
vendor bill, the vendor's credentials show as `Cedente/Prestatore`, and
your company's credentials as `Cessionario/Committente`.

<div class="note">

<div class="title">

Note

</div>

Self-billing invoices or VAT invoice integrations must be issued and
sent to the tax agency.

</div>

When inputting taxes in a vendor bill, it is possible to select
**reverse charge** taxes. These are automatically activated in the
Italian fiscal position. By going to `Accounting -->
Configuration --> Taxes`, the <span class="title-ref">10%</span> and
<span class="title-ref">22%</span> `Goods` and `Services` tax scopes are
activated and preconfigured with the correct tax grids. These are set up
automatically to ensure the correct booking of accounting entries and
display of the tax report.

For **vendor bills**, **three** types of configurations are technically
identified by a code called `Tipo Documento`:

  - <span class="title-ref">TD17</span> - Buying services from **EU**
    and **non-EU** countries;
  - <span class="title-ref">TD18</span> - Buying **goods** from **EU**;
  - <span class="title-ref">TD19</span> - Buying **goods** from a
    **foreign** vendor, but the **goods** are already in **Italy** in a
    **VAT deposit**.

<div class="tabs">

<div class="tab">

<span class="title-ref">TD17</span>

Buying **services** from **EU** and **non-EU** countries:

The foreign *seller* invoices a service with a **VAT-excluded** price,
as it is not taxable in Italy. The VAT is paid by the *buyer* in Italy;

  - Within EU: the *buyer* integrates the invoice received with the
    **VAT information** due in Italy (i.e., **vendor bill tax
    integration**);
  - Non-EU: the *buyer* sends themselves an invoice (i.e.,
    **self-billing**).

Odoo exports a transaction as <span class="title-ref">TD17</span> if the
following conditions are met:

  - Is a vendor bill;
  - At least one tax on the invoice lines targets the tax grids `VJ
    <italy/grids>`;
  - All invoice lines either have `Services` as **products**, or a tax
    with the `Services` as **tax scope**.

</div>

<div class="tab">

<span class="title-ref">TD18</span>

Buying **goods** from **EU**:

Invoices issued within the EU follow a **standard format**, therefore
only an integration of the existing invoice is required.

Odoo exports a transaction as <span class="title-ref">TD18</span> if the
following conditions are met:

  - Is a vendor bill;
  - At least one tax on the invoice lines targets the tax grids `VJ
    <italy/grids>`;
  - All invoice lines either have `Consumable` as **products**, or a tax
    with the `Goods` as **tax scope**.

</div>

<div class="tab">

<span class="title-ref">TD19</span>

Buying **goods** from a **foreign** vendor, but the **goods** are
already in **Italy** in a **VAT deposit**:

  - From EU: the *buyer* integrates the invoice received with the **VAT
    information** due in Italy (i.e., **vendor bill tax integration**);
  - Non-EU: the *buyer* sends an invoice to *themselves* (i.e.,
    **self-billing**).

Odoo exports a move as a <span class="title-ref">TD19</span> if the
following conditions are met:

  - Is a vendor bill;
  - At least one tax on the invoice lines targets the tax grid `VJ3
    <italy/grids>`;
  - All invoice lines either have `Consumable` products, or a tax with
    `Goods` as tax scope.

</div>

</div>

<div class="warning">

<div class="title">

Warning

</div>

Odoo does not offer the [Conservazione
Sostitutiva](https://www.agid.gov.it/index.php/it/piattaforme/conservazione)
requirements. Other providers and **Agenzia delle Entrate** supply free
and certified storage to meet the requested conditions.

</div>

### Internal reverse charge

<div class="warning">

<div class="title">

Warning

</div>

Odoo currently does not support domestic **internal reverse charge**
processes.

</div>

### 'Reverse Charge' tax grids

The Italian localization has a specific **tax grid** section for
**reverse charge** taxes. These tax grids are identifiable by the `VJ
<italy/grids>` tag, and can be found under `Accounting --> Reporting -->
Audit Reports: Tax Report`.

![Italian reverse charge tax grids](italy/italy-grids.png)

## San Marino

### Invoices

San Marino and Italy have special agreements on e-invoicing operations.
As such, **invoices** follow the regular **reverse charge** rules.
Additional requirements are not enforced by Odoo, however, the user is
requested by the **State** to:

  - Select a tax with the option `Has exoneration of tax (Italy)`
    ticked, and the `Exoneration` set to
    <span class="title-ref">N3.3</span>;
  - Use the generic `SdI (Sistema di Interscambio)` `Codice
    Destinatario` <span class="title-ref">2R4GT08</span>. The invoice is
    then routed by a dedicated office in San Marino to the correct
    business.

### Bills

When a **paper bill** is received from San Marino, any Italian company
**must** submit that invoice to the **Agenzia delle Entrate** by
indicating the e-invoice's `Tipo Documento` field with the special value
<span class="title-ref">TD28</span>.

<div class="tabs">

<div class="tab">

<span class="title-ref">TD28</span>

Odoo exports a move as <span class="title-ref">TD28</span> if the
following conditions are met:

  - Is a vendor bill;
  - At least one tax on the invoice lines targets the tax grids `VJ
    <italy/grids>`;
  - The **country** of the partner is **San Marino**.

</div>

</div>

## Pubblica amministrazione (B2G)

<div class="warning">

<div class="title">

Warning

</div>

Odoo does **not** send invoices directly to the government as they need
to be signed. If we see that the codice destinatario is 6 digits, then
it is not sent to the PA automatically, but you can download the XML,
sign it with an external program and send it through the portal.

</div>

### Digital qualified signature

For invoices and bills intended to the **Pubblica Amministrazione
(B2G)**, a **Digital Qualified Signature** is required for all files
sent through the `SdI (Sistema di Interscambio)`. The **XML** file must
be certified using a certificate that is either:

  - a **smart card**;
  - a **USB token**;
  - a **Hardware Security Module (HSM)**.

### CIG, CUP, DatiOrdineAcquisto

To ensure the effective traceability of payments by public
administrations, electronic invoices issued to the public
administrations must contain:

  - The `CIG (Codice Identificativo Gara)`, except in cases of exclusion
    from traceability obligations provided by law n. 136 of August 13,
    2010;
  - The `CUP (Codice Unico di Progetto)`, in case of invoices related to
    public works.

If the **XML** file requires it, the **Agenzia Delle Entrate** can
*only* proceed payments of electronic invoices when the **XML** file
contains a `CIG (Codice Identificativo Gara)` and `CUP (Codice Unico di
Progetto)`. For each electronic invoice, it is **necessary** to indicate
the `CUU (Codice Univoco Ufficio)`, which represents the unique
identifier code that allows the `SdI (Sistema di Interscambio)` to
correctly deliver the electronic invoice to the recipient office.

<div class="note">

<div class="title">

Note

</div>

\- The `Codice Unico di Progetto)` and the `CIG (Codice Identificativo
Gara)` must be included in one of the **2.1.2** (DatiOrdineAcquisto),
**2.1.3** (Dati Contratto), **2.1.4** (DatiConvenzione), **2.1.5** (Date
Ricezione), or **2.1.6** (Dati Fatture Collegate) information blocks.
These correspond to the elements named `CodiceCUP` and `CodiceCIG` of
the electronic invoice **XML** file, whose table can be found on the
government [website](http://www.fatturapa.gov.it/). - The `CUU (Codice
Univoco Ufficio)` must be included in the electronic invoice
corresponding to the element **1.1.4** (`CodiceDestinario`).

</div>


---
## File: ./content/applications/finance/fiscal_localizations/argentina.md

# Argentina

## Webinars

Below you can find videos with a general description of the
localization, and how to configure it.

  - [VIDEO WEBINAR OF A COMPLETE DEMO](https://youtu.be/c41-8cVaYAI).
  - [ECOMMERCE](https://youtu.be/5gUi2WWfRuI).

## Introduction

The Argentinean localization has been improved and extended in Odoo v13,
in this version the next modules are available:

  - **l10n\_ar**: This module add accounting features for the
    Argentinian localization, which represent the minimal configuration
    needed for a company to operate in Argentina and under the AFIP
    (Administración Federal de Ingresos Públicos) regulations and
    guidelines.
  - **l10n\_ar\_reports**: Add VAT Book report which is a legal
    requirement in Argentine and that holds the VAT detail info of sales
    or purchases recorded on the journal entries. This module includes
    as well the VAT summary report that is used to analyze the invoice
  - **l10n\_ar\_edi**: This module includes all technical and functional
    requirements to generate Electronic Invoice via web service, based
    on the AFIP regulations.

## Configuration

### Install the Argentinean localization modules

For this, go to *Apps* and search for Argentina. Then click *Install*
for the first two modules.

![image](argentina/argentina01.png)

#### Configure your company

Once that the modules are installed, the first step is to set up your
company data. Additional to the basic information, a key field to fill
in the AFIP Responsibility Type, that represent the fiscal obligation
and structure of the company:

![image](argentina/argentina02.png)

#### Chart of Account

In Accounting settings there are three available packages of Chart of
accounts, which are related to the AFIP responsibility type of the
Company, considering that if the base companies don't require as many
accounts as the companies that gave more complex fiscal requirements:

  - Monotributista (149 accounts).
  - IVA Exempto (159 accounts).
  - Responsables Inscriptos (166 Accounts).

![image](argentina/argentina03.png)

### Configure Master data

#### Electronic Invoice Credentials

##### Environment

The AFIP infrastructure is replicated in two separate environments,
Testing and Production.

Testing is provided so that the Companies can test their developments
until they are ready to move into the Production environment. As these
two environments are completely isolated from each other, the digital
certificates of one instance are not valid in the other one.

Go to `Accounting --> Settings --> Argentinian Localization` to select
the environment:

![image](argentina/argentina_edi_01.png)

##### AFIP Certificates

The electronic invoice and other afip services work with WebServices
(WS) provided by the AFIP.

In order to enable communication with the AFIP, the first step is to
request a Digital Certificate if you don’t have one already.

1.  Generate certificate Sign Request (Odoo). When this option is
    selected a file with extension `.csr` (certificate signing request)
    is generated to be used the AFIP portal to request the certificate.
    
    ![image](argentina/argentina_edi_02.png)

2.  Generate Certificate (AFIP). Access the AFIP portal and follow the
    instructions described in the next document in order to get a
    certificate. [Get AFIP
    Certificate](http://www.afip.gob.ar/ws/WSAA/wsaa_obtener_certificado_produccion.pdf).

3.  Upload Certificate and Private Key (Odoo). Once the certificate has
    been generated, it needs to be uploaded in Odoo, using the pencil
    next in the field “Certificado” and selecting the corresponding
    file.
    
    ![image](argentina/argentina_edi_03.png)

<div class="tip">

<div class="title">

Tip

</div>

In case you need to configure the Homologation Certificate, please refer
to the AFIP official documentation: [Homologation
Certificate](http://www.afip.gob.ar/ws/documentacion/certificados.asp).

</div>

#### Partner

##### Identification Type and VAT

As part of the Argentinean localization, the document types defined by
the AFIP are now available on the Partner form, this information is
essential for most transactions. There are six identification types
available by default:

![image](argentina/argentina04.png)

<div class="note">

<div class="title">

Note

</div>

The complete list of Identification types defined by the AFIP is
included in Odoo but only the common ones are active.

</div>

##### AFIP Responsibility Type

In Argentina the document type associated with customers and vendors
transactions is defined based on the AFIP Responsibility type, this
field should be defined in the partner form:

![image](argentina/argentina05.png)

#### Taxes

As part of the localization module, the taxes are created automatically
with their related financial account and configuration.

![image](argentina/argentina06.png)

##### Taxes Types

Argentina has several tax types, the most common ones are:

  - VAT. Is the regular VAT and it can have several percentages.
  - Perception. Advance payment of a tax that is applied on Invoices.
  - Retention. Advance payment of a tax that is applied on payments
  - Otros.

##### Special Taxes

Some argentine taxes are not commonly used for all companies, these type
of taxes are included as inactive by default, it's important that before
creating a new tax you confirm if they are not already included in the
Inactive taxes:

![image](argentina/argentina07.png)

#### Document Types

In some Latin America countries, including Argentina, some accounting
transactions like invoices and vendor bills are classified by document
types defined by the government fiscal authorities (In Argentina case:
AFIP).

The document type is an essential information that needs to be displayed
in the printed reports and that needs to be easily identified, within
the set of invoices as well of account moves.

Each document type can have a unique sequence per journal where it is
assigned. As part of the localization, the Document Type include the
country on which the document is applicable and the data is created
automatically when the localization module is installed.

The information required for the document types is included by default
so the user doesn't need to fill anything on this view:

![image](argentina/argentina08.png)

<div class="note">

<div class="title">

Note

</div>

There are several document types that are inactive by default but can be
activated if needed.

</div>

##### Letters

For Argentina, the document types include a letter that helps that
indicates the transaction/operation, example:

  - When an invoice is related to a B2B transaction, a document type "A"
    must be used.
  - When an invoice is related to a B2C transaction, a document type "B"
    must be used.
  - When an invoice is related to exportation transaction, a document
    type "E" must be used.

The documents included in the localization have the proper letter
associated, the user doesn't need to configure anything additional.

![image](argentina/argentina09.png)

##### Use on Invoices

The document type on each transaction will be determined by:

  - The Journal related to the Invoice, identifying if the journal use
    documents.
  - Condition applied based on the type of Issues and Receiver (ex. Type
    of fiscal regimen of the buyer and type of fiscal regimen of the
    vendor)

### Journals

In the Argentinean localization the Journal can have a different
approach depending on its usage and internal type, to configure you
journals go to `Accounting --> Configuration -->
Journals`:

For Sales and Purchase Journals it’s possible to enable the option *Use
Documents*, this indicates the Journal enables a list of document types
that can be related to the Invoices and vendor Bills, for more detail of
the invoices, please refer to the section 2.3 Document Types.

If the Sales/Purchase journal are used without the option *Use
Documents* it because they won’t be used to generate fiscal invoices,
but mostly for account moves related to internal control process.

#### AFIP Information (also known as AFIP Point of Sale)

![image](argentina/argentina10.png)

**AFIP POS System**: This field is only visible for the Sales journals
and defined the type of AFIP POS that will be used to manage the
transactions for which the journal is created. The AFIP POS defines as
well:

1.  The sequences of document types related to the Web service.
2.  The structure and data of the electronic invoice file.

##### Web Services

  - `wsfev1: Electronic Invoice.` This is the most common service, is
    used to generated invoices for document types A, B, C, M with no
    detail per item.
  - `wsbfev1: Electronic Fiscal Bond.` For those who invoice capital
    goods and wish to access the benefit of the Electronic Tax Bonds
    granted by the Ministry of Economy. For more detail you can refer to
    the next link: [Fiscal
    Bond](https://www.argentina.gob.ar/acceder-un-bono-por-fabricar-bienes-de-capital).
  - `wsfexv1: Electronic Exportation Invoice.` Used to generate invoices
    for international customers and transactions that involve
    exportation process, the document type related is type “E”.

![image](argentina/argentina_edi_04.png)

**AFIP POS Number**: This is the number configured in the AFIP to
identify the operations related to this AFIP POS.

**AFIP POS Address**: This field is related to commercial address
registered for the POS, which is usually the same address than the
Company. For example: has multiple stores (fiscal locations) then AFIP
will require that you have one AFIP POS per location: this location will
be printed in the invoice report.

**Unified Book**: When AFIP POS System is Preimpresa the document types
(applicable to the journal) with the same letter will share the same
sequence. For example:

  - Invoice: FA-A 0001-00000002.
  - Credit Note: NC-A 0001-00000003.
  - Debit Note: ND-A 0001-00000004.

#### Sequences

In case that you want to synchronize the next number in the sequence in
Odoo based on the next number in the AFIP POS, the next button that is
visible under `developer mode <developer-mode>` can be used:

![image](argentina/argentina_edi_05.png)

<div class="note">

<div class="title">

Note

</div>

When creating the Purchase journals, it's possible to define if they can
be related to document types or not. In case that the option to use
documents is selected, there is no need to manually associate the
document type sequences as the document number is provided by the
vendor.

</div>

## Usage and testing

### Invoice

After the partners and journals are created and configured, when the
invoices are created the will have the next behaviour:

#### Document type assignation

Once the partner is selected the document type will filled
automatically, based on the AFIP document type:

**Invoice for a customer IVA Responsable Inscripto, prefix A**.

![image](argentina/argentina11.png)

**Invoice for an end customer, prefix B**.

![image](argentina/argentina12.png)

**Exportation Invoice, prefix E**.

![image](argentina/argentina13.png)

As it is shown in the invoices, all of them use the same journal but the
prefix and sequence is given by the document type.

The most common document type will be defined automatically for the
different combinations of AFIP responsibility type but it can be updated
manually by the user.

#### Electronic Invoice elements

When using electronic invoice, if all the information is correct the
Invoice is posted in the standard way, in case that something needs to
be addressed (check the section common errors for more detail), an error
message is raised indicating the issue/proposed solution and the invoice
remains in draft until the related data is corrected.

Once the invoice is posted, the information related to the AFIP
validation and status is displayed in the AFIP Tab, including:

  - AFIP Autorisation: CAE number.
  - Expiration date: Deadline to deliver the invoice to the customers.
    Normally 10 days after the CAE is generated.
  - Result:
      - Aceptado en AFIP.
      - Aceptado con Observaciones.

![image](argentina/argentina_edi_15.png)

#### Invoice Taxes

Based on the AFIP Responsibility type, the VAT tax can have a different
behavior on the pdf report:

**A. Tax excluded:** In this case the taxed amount needs to be clearly
identified in the report. This condition applies when the customer has
the following AFIP Responsibility type:

  - Responsable Inscripto.

![image](argentina/argentina14.png)

**B. Tax amount included:** This means that the taxed amount is included
as part of the product price, subtotal and totals. This condition
applies when the customer has the following AFIP Responsibility types:

  - IVA Sujeto Exento.
  - Consumidor Final.
  - Responsable Monotributo.
  - IVA liberado.

![image](argentina/argentina15.png)

#### Special Use Cases

##### Invoices for Services

For electronic invoices that include Services, the AFIP requires to
report the service starting and ending date, this information can be
filled in the tab “Other Info”:

![image](argentina/argentina_edi_06.png)

If the dates are not selected manually before the invoice is validated,
the values will be filled automatically considering the beginning and
day of the invoice month:

![image](argentina/argentina_edi_07.png)

##### Exportation Invoices

The invoices related to Exportation transactions required a Journal that
used the AFIP POS System “Expo Voucher - Web Service” so the proper
document type be associated:

![image](argentina/argentina_edi_08.png)

When the customer selected in the Invoice has set the AFIP
responsibility type as “Cliente / Proveedor del Exterior” or “IVA
Liberado – Ley Nº 19.640”, Odoo automatically assigned:

  - Journal related to the exportation Web Service.
  - Exportation document type .
  - Fiscal position: Compras/Ventas al exterior.
  - Concepto AFIP: Products / Definitive export of goods.
  - Exempt Taxes.

![image](argentina/argentina_edi_09.png)

<div class="note">

<div class="title">

Note

</div>

The Exportation Documents required the Incoterm in `Other Info -->
Accounting`:

</div>

![image](argentina/argentina_edi_13.png)

##### Fiscal Bond

The Electronic Fiscal bond is used for those who invoice capital goods
and wish to access the benefit of the Electronic Tax Bonds granted by
the Ministry of Economy.

For these transactions it’s important to have into consideration the
next requirements:

  - Currency (according to parameter table) and invoice quotation.
  - Taxes.
  - Zone.
  - Detail each item.
      - Code according to the Common Nomenclator of Mercosur (NCM).
      - Complete description.
      - Unit Net Price.
      - Quantity.
      - Unit of measurement.
      - Bonus.
      - VAT rate.

##### Electronic Credit Invoice MiPyme (FCE)

**Invoices:** There are several document types classified as Mipyme also
known as Electronic Credit Invoice (FCE in spanish), which is used to
impulse the SME, its purpose is to develop a mechanism that improves the
financing conditions of these companies and allows them to increase
their productivity, through the early collection of credits and
receivables issued to their clients and / or vendors.

For these transactions it’s important to have into consideration the
next requirements:

  - Specific document types (201, 202, 206, etc).
  - The emisor should be eligible by the AFIP to MiPyme transactions.
  - The amount should be bigger than 100,000 ARS.
  - A bank account type CBU must be related to the emisor, otherwise the
    invoice can’t be validated, having these errors messages for
    example:

![image](argentina/argentina_edi_10.png)

**Credit& Debit Notes:** When creating a Credit/Debit note related to a
FCE document, it is important take the next points into consideration:

  - Use the Credit and Debit Note buttons, so the correct reference of
    the originator document passed to the note.

![image](argentina/argentina_edi_11.png)

  - The document letter should be the same than the originator document
    (either A or B).
  - The same currency as the source document must be used. When using a
    secondary currency there is an exchange difference if the currency
    rate is different between the emission day and the payment date,
    it’s possible to create a credit/debit note to decrease/increase
    the amount to pay in ARS.

In the workflow we can have two scenarios:

1.  The FCE is rejected so the Credit Note should have the field “FCE,
    is Cancellation?” as True.
2.  The Credit Note, is created with the negative amount to annulate the
    FCE document, in this case the field “FCE, is Cancellation?” must be
    empty (false).

![image](argentina/argentina_edi_12.png)

#### Invoice printed report

The PDF report related to electronic invoices that have been validated
by the AFIP includes a barcode at the bottom of the format which
represent the CAE number, the Expiration Date is also displayed as it’s
legal requirement:

![image](argentina/argentina_edi_14.png)

#### Troubleshooting and Auditing

For auditing and troubleshooting purposes you can get the detailed
information of an invoice number that has been previously sent to the
AFIP,

![image](argentina/argentina_edi_23.png)

![image](argentina/argentina_edi_24.png)

You can also get the last number used in AFIP for a specific Document
Type and POS Number as support for any possible issues on the sequence
synchronization between Odoo and AFIP.

![image](argentina/argentina_edi_22.png)

### Vendor Bills

Based on the purchase journal selected for the vendor bill, the document
type is now a required field. This value is auto populated based on the
AFIP Responsibility type of Issuer and Customer, but the value can be
switched if necessary.

![image](argentina/argentina16.png)

The document number needs to be registered manually and the format is
validated automatically, in case that the format is invalid a user error
will be displayed indicating the correct format that is expected.

![image](argentina/argentina17.png)

The vendor bill number is structured in the same way that the invoices
with the difference that the document sequence is input by the user:
“Document Prefix - Letter - Document number".

#### Validate Vendor Bill number in AFIP

As most companies have internal controls to verify that the vendor bill
is related to an AFIP valid document, an automatic validation can be set
in `Accounting --> Settings -->
Argentinian Localization --> Validate document in the AFIP`, considering
the following levels:

  - **Not available:** The verification is not done (this is the default
    value).
  - **Available:** The verification is done, in case the number is not
    valid it only raises a warning but it allows you to post the vendor
    bill.
  - **Required:** The verification is done and it doesn't allow the user
    to post the vendor bill if the document number is not valid.

![image](argentina/argentina_edi_16.png)

##### How to use it in Odoo

This tool incorporates in the vendor bill a new "Verify on AFIP" button
located next to the AFIP Authorization code.

![image](argentina/argentina_edi_17.png)

In case it’s not a valid AFIP authorization the value “Rejected” will be
displayed and the details of the validation will be added to the
chatter.

![image](argentina/argentina_edi_18.png)

#### Special Use cases

##### Untaxed Concepts

There are some transactions that include items that are not part of the
VAT base amount, this is commonly used in fuel and gasoline invoices.

The vendor bill will be registered using 1 item for each product that is
part of the VAT base amount and an additional item to register the
amount of the Exempt concept:

![image](argentina/argentina_edi_19.png)

##### Perception Taxes

The vendor bill will be registered using 1 item for each product that is
part of the VAT base amount, the perception tax can be added in any of
the product lines, as result we will have one tax group for the VAT and
one for the perception, the perception default value is always 1.00.

![image](argentina/argentina_edi_20.png)

You should use the pencil that is the next to the Perception amount to
edit it and set the correct amount.

![image](argentina/argentina_edi_21.png)

After this is done the invoice can be validated.

## Reports

As part of the localization the next Financial reports were added:

![image](argentina/argentina18.png)

### VAT Reports

#### Libro de IVA Ventas

![image](argentina/argentina19.png)

#### Libro de IVA Compras

![image](argentina/argentina20.png)

#### Resumen de IVA

![image](argentina/argentina21.png)

### IIBB - Reports

#### IIBB - Ventas por Jurisdicción

![image](argentina/argentina22.png)

#### IIBB - Compras por Jurisdicción

![image](argentina/argentina23.png)


---
## File: ./content/applications/finance/fiscal_localizations/netherlands.md

# Netherlands

## XAF Export

With the Dutch accounting localization installed, you will be able to
export all your accounting entries in XAF format. For this, you have to
go in `Accounting --> Reporting --> General Ledger`, you define the
entries you want to export using the filters (period, journals, ...) and
then you click on the button **EXPORT (XAF)**.

## Dutch Accounting Reports

If you install the Dutch accounting localization, you will have access
to some reports that are specific to the Netherlands such as :

  - Profit & Loss
  - Tax Report (Aangifte omzetbelasting)
  - Intrastat Report (ICP)


---
## File: ./content/applications/finance/fiscal_localizations/france.md

# France

## FEC

If you have installed the French Accounting, you will be able to
download the FEC. For this, go in `Accounting --> Reporting --> France
--> FEC`.

<div class="tip">

<div class="title">

Tip

</div>

If you do not see the submenu **FEC**, go in **Apps** and search for the
module called **France-FEC** and verify if it is well installed.

</div>

## French Accounting Reports

If you have installed the French Accounting, you will have access to
some accounting reports specific to France:

  - Bilan comptable
  - Compte de résultats
  - Plan de Taxes France

## Get the VAT anti-fraud certification with Odoo

As of January 1st 2018, a new anti-fraud legislation comes into effect
in France and DOM-TOM. This new legislation stipulates certain criteria
concerning the inalterability, security, storage and archiving of sales
data. These legal requirements are implemented in Odoo, version 9
onward, through a module and a certificate of conformity to download.

### Is my company required to use an anti-fraud software?

Your company is required to use an anti-fraud cash register software
like Odoo (CGI art. 286, I. 3° bis) if:

  - You are taxable (not VAT exempt) in France or any DOM-TOM,
  - Some of your customers are private individuals (B2C).

This rule applies to any company size. Auto-entrepreneurs are exempted
from VAT and therefore are not affected.

### Get certified with Odoo

Getting compliant with Odoo is very easy.

Your company is requested by the tax administration to deliver a
certificate of conformity testifying that your software complies with
the anti-fraud legislation. This certificate is granted by Odoo SA to
Odoo Enterprise users
[here](https://www.odoo.com/my/contract/french-certification/). If you
use Odoo Community, you should `upgrade to Odoo Enterprise
</administration/maintain/enterprise>` or contact your Odoo service
provider.

In case of non-conformity, your company risks a fine of €7,500.

To get the certification just follow the following steps:

  - If you use **Odoo Point of Sale**, `install <general/install>` the
    **France - VAT Anti-Fraud Certification for Point of Sale (CGI 286
    I-3 bis)** module by going to `Apps`, removing the *Apps* filter,
    then searching for *l10n\_fr\_pos\_cert*, and installing the module.
  - Make sure a country is set on your company, otherwise your entries
    won’t be encrypted for the inalterability check. To edit your
    company’s data, go to `Settings --> Users & Companies -->
    Companies`. Select a country from the list; Do not create a new
    country.
  - Download the mandatory certificate of conformity delivered by Odoo
    SA [here](https://www.odoo.com/my/contract/french-certification/).

<div class="note">

<div class="title">

Note

</div>

\* To install the module in any system created before December 18th
2017, you should update the modules list. To do so, activate the
`developer mode <developer-mode>`. Then go to the *Apps* menu and press
*Update Modules List* in the top-menu. \* In case you run Odoo
on-premise, you need to update your installation and restart your server
beforehand. \* If you have installed the initial version of the
anti-fraud module (prior to December 18th 2017), you need to update it.
The module's name was *France - Accounting - Certified CGI 286 I-3 bis*.
After an update of the modules list, search for the updated module in
*Apps*, select it and click *Upgrade*. Finally, make sure the following
module *l10n\_fr\_sale\_closing* is installed.

</div>

### Anti-fraud features

The anti-fraud module introduces the following features:

  - **Inalterability**: deactivation of all the ways to cancel or modify
    key data of POS orders, invoices and journal entries;
  - **Security**: chaining algorithm to verify the inalterability;
  - **Storage**: automatic sales closings with computation of both
    period and cumulative totals (daily, monthly, annually).

#### Inalterability

All the possible ways to cancel and modify key data of paid POS orders,
confirmed invoices and journal entries are deactivated, if the company
is located in France or in any DOM-TOM.

<div class="note">

<div class="title">

Note

</div>

If you run a multi-companies environment, only the documents of such
companies are impacted.

</div>

#### Security

To ensure the inalterability, every order or journal entry is encrypted
upon validation. This number (or hash) is calculated from the key data
of the document as well as from the hash of the precedent documents.

The module introduces an interface to test the data inalterability. If
any information is modified on a document after its validation, the test
will fail. The algorithm recomputes all the hashes and compares them
against the initial ones. In case of failure, the system points out the
first corrupted document recorded in the system.

Users with *Manager* access rights can launch the inalterability check.
For POS orders, go to `Point of Sales --> Reporting --> French
Statements`. For invoices or journal entries, go to
`Invoicing/Accounting --> Reporting --> French Statements`.

#### Storage

The system also processes automatic sales closings on a daily, monthly
and annual basis. Such closings distinctly compute the sales total of
the period as well as the cumulative grand totals from the very first
sales entry recorded in the system.

Closings can be found in the *French Statements* menu of Point of Sale,
Invoicing and Accounting apps.

<div class="note">

<div class="title">

Note

</div>

\* Closings compute the totals for journal entries of sales journals
(Journal Type = Sales).

  - For multi-companies environments, such closings are performed by
    company.
  - POS orders are posted as journal entries at the closing of the POS
    session. Closing a POS session can be done anytime. To prompt users
    to do it on a daily basis, the module prevents from resuming a
    session opened more than 24 hours ago. Such a session must be closed
    before selling again.
  - A period’s total is computed from all the journal entries posted
    after the previous closing of the same type, regardless of their
    posting date. If you record a new sales transaction for a period
    already closed, it will be counted in the very next closing.

</div>

<div class="tip">

<div class="title">

Tip

</div>

For test & audit purposes such closings can be manually generated in the
`developer mode <developer-mode>`. Then go to `Settings -->
Technical --> Automation --> Scheduled Actions`.

</div>

### Responsibilities

Do not uninstall the module\! If you do so, the hashes will be reset and
none of your past data will be longer guaranteed as being inalterable.

Users remain responsible for their Odoo instance and must use it with
due diligence. It is not permitted to modify the source code which
guarantees the inalterability of data.

Odoo absolves itself of all and any responsibility in case of changes in
the module’s functions caused by 3rd party applications not certified by
Odoo.

### More Information

You will find more information about this legislation in the official
documents:

  - [Frequently Asked
    Questions](https://www.economie.gouv.fr/files/files/directions_services/dgfip/controle_fiscal/actualites_reponses/logiciels_de_caisse.pdf)
  - [Official
    Statement](http://bofip.impots.gouv.fr/bofip/10691-PGP.html?identifiant=BOI-TVA-DECLA-30-10-30-20160803)
  - [Item 88 of Finance
    Law 2016](https://www.legifrance.gouv.fr/affichTexteArticle.do?idArticle=JORFARTI000031732968&categorieLien=id&cidTexte=JORFTEXT000031732865)


---
## File: ./content/applications/finance/fiscal_localizations/spain.md

# Spain

## Spanish Chart of Accounts

In Odoo, there are several Spanish Chart of Accounts that are available
by default:

  - PGCE PYMEs 2008
  - PGCE Completo 2008
  - PGCE Entitades

You can choose the one you want by going in `Accounting -->
Configuration` then choose the package you want in the **Fiscal
Localization** section.

Be careful, you can only change the accounting package as long as you
have not created any accounting entry.

<div class="tip">

<div class="title">

Tip

</div>

When you create a new Odoo Online database, the PGCE PYMEs 2008 is
installed by default.

</div>

## Spanish Accounting Reports

If the Spanish Accounting Localization is installed, you will have
access to accounting reports specific to Spain:

  - Balance Sheet
  - Tax Report (Modelo 111)
  - Tax Report (Modelo 115)
  - Tax Report (Modelo 303)


---
## File: ./content/applications/finance/fiscal_localizations/indonesia.md

# Indonesia

## E-Faktur Module

The **E-Faktur Module** is installed by default with the Indonesian
localization module. It allows one to generate a CSV file for one tax
invoice or for a batch of tax invoices to upload to the **Tax Office
e-Faktur** application.

### NPWP/NIK settings

  - **Your Company**  
    This information is used in the FAPR line in the effect file format.
    You need to set a VAT number on the related partner of your Odoo
    company. If you don't, it won't be possible to create an e-Faktur
    from an invoice.

  - **Your Clients**  
    You need to set the checkbox *ID PKP* to generate e-fakturs for a
    customer. You can use the VAT field on the customer's contact to set
    the NPWP needed to generate the e-Faktur file. If your customer does
    not have an NPWP, just enter the NIK in the same VAT field.
    
    ![image](indonesia/indonesia-partner-nik.png)

### Usage

#### Generate Tax Invoice Serial Number

1.  Go to `Accounting --> Customers --> e-Faktur`. In order to be able
    to export customer invoices as e-Faktur for the Indonesian
    government, you need to put here the ranges of numbers you were
    assigned by the government. When you validate an invoice, a number
    will be assigned based on these ranges. Afterwards, you can filter
    the invoices still to export in the invoices list and click on
    *Action*, then on *Download e-Faktur*.

2.  After receiving new serial numbers from the Indonesian Revenue
    Department, you can create a set of tax invoice serial numbers group
    through this list view. You only have to specify the Min and Max of
    each serial numbers' group and Odoo will format the number
    automatically to a 13-digits number, as requested by the Indonesia
    Tax Revenue Department.

3.  There is a counter to inform you how many unused numbers are left in
    that group.
    
    ![image](indonesia/indonesia-sn-count.png)

#### Generate e-faktur csv for a single invoice or a batch invoices

1.  Create an invoice from `Accounting --> Customers --> Invoices`. If
    the invoice customer's country is Indonesia and the customer is set
    as *ID PKP*, Odoo will allow you to create an e-Faktur.

2.  Set a Kode Transaksi for the e-Faktur. There are constraints related
    to the Kode transaksi and the type of VAT applied to invoice lines.
    
    ![image](indonesia/indonesia-kode-transaksi.png)

3.  Odoo will automatically pick the next available serial number from
    the e-Faktur number table (see the `section above
    <localization_indonesia/tax_invoice_sn>`) and generate the e-faktur
    number as a concatenation of Kode Transaksi and serial number. You
    can see this from the invoice form view under the page *Extra Info*
    in the box *Electronic Tax*.
    
    ![image](indonesia/indonesia-e-faktur-sn.png)

4.  Once the invoice is posted, you can generate and download the
    e-Faktur from the *Action* menu item *Download e-faktur*. The
    checkbox *CSV created* will be set.
    
    ![image](indonesia/indonesia-csv-created.png)

5.  You can select multiple invoices in list view and generate a batch
    e-Faktur .csv.

#### Kode Transaksi FP (Transaction Code)

The following codes are available when generating an e-Faktur. - 01
Kepada Pihak yang Bukan Pemungut PPN (Customer Biasa) - 02 Kepada
Pemungut Bendaharawan (Dinas Kepemerintahan) - 03 Kepada Pemungut Selain
Bendaharawan (BUMN) - 04 DPP Nilai Lain (PPN 1%) - 06 Penyerahan Lainnya
(Turis Asing) - 07 Penyerahan yang PPN-nya Tidak Dipungut (Kawasan
Ekonomi Khusus/ Batam) - 08 Penyerahan yang PPN-nya Dibebaskan (Impor
Barang Tertentu) - 09 Penyerahan Aktiva (Pasal 16D UU PPN)

#### Correct an invoice that has been posted and downloaded: Replace Invoice feature

1.  Cancel the original wrong invoice in Odoo. For instance, we will
    change the Kode Transakski from 01 to 03 for the INV/2020/0001.
2.  Create a new invoice and set the canceled invoice in the *Replace
    Invoice* field. In this field, we can only select invoices in
    *Cancel* state from the same customer.
3.  As you validate, Odoo will automatically use the same e-Faktur
    serial number as the canceled and replaced invoice replacing the
    third digit of the original serial number with *1* (as requested to
    upload a replacement invoice in the e-Faktur app).

![image](indonesia/indonesia-replace-invoice.png)

#### Correct an invoice that has been posted but not downloaded yet: Reset e-Faktur

1.  Reset the invoice to draft and cancel it.
2.  Click on the button *Reset e-Faktur* on the invoice form view.
3.  The serial number will be unassigned, and we will be able to reset
    the invoice to draft, edit it and re-assign a new serial number.

![image](indonesia/indonesia-e-faktur-reset.png)


---
## File: ./content/applications/finance/fiscal_localizations/peru.md

# Peru

## Introduction

The Peruvian localization has been improved and extended, in this
version the next modules are available:

  - **l10n\_pe**: Adds accounting features for the Peruvian
    localization, which represent the minimal configuration required for
    a company to operate in Peru and under the SUNAT regulations and
    guidelines. The main elements included in this module are: Chart of
    account, taxes, document types.
  - **l10n\_pe\_edi**: includes all technical and functional
    requirements to generate and validate Electronic Invoice, based on
    the SUNAT specification to create and process valid electronic
    documents, for more technical detail you can access the [SUNAT EDI
    specifications](https://cpe.sunat.gob.pe/node/88/), that keeps track
    of new changes and updates. The features of this module are based on
    the resolutions published on the [SUNAT
    Legislation](https://www.sunat.gob.pe/legislacion/general/index.html/).

## Configuration

### Install the Peruvian localization modules

Go to *Apps* and search for Peru, then click Install in the module Peru
EDI. This module has a dependency with *Peru - Accounting*. In case this
last one is not installed, Odoo installs it automatically within EDI.

![The "Module" filter is set on "Peru"](peru/peru-modules.png)

<div class="note">

<div class="title">

Note

</div>

When you install a database from scratch selecting Peru as country, Odoo
automatically installs the base module: Peru - Accounting.

</div>

#### Configure your company

In addition to the basic information in the Company, we need to set Peru
as the Country, this is essential for the Electronic Invoice to work
properly. The field **Address Type Code** represents the establishment
code assigned by the SUNAT when companies register their RUC (Unique
Contributor Registration):

![Company data for Peru including RUC and Address type
code](peru/peru-company.png)

<div class="tip">

<div class="title">

Tip

</div>

In case the Address type code is unknown, you can set it as the default
value: 0000. Be aware that if an incorrect value is entered, the
Electronic invoice validation might have errors.

</div>

<div class="note">

<div class="title">

Note

</div>

The NIF should be set following the RUC format.

</div>

#### Chart of Account

The chart of accounts is installed by default as part of the set of data
included in the localization module, the accounts are mapped
automatically in:

  - Taxes
  - Default Account Payable.
  - Default Account Receivable

The chart of accounts for Peru is based on the most updated version of
the `PCGE (Plan
Contable General Empresarial)`, which is grouped in several categories
and is compatible with NIIF accounting.

### Accounting Settings

Once the modules are installed and the basic information of your company
is set, you need to configure the elements required for Electronic
Invoice. For this, go to `Accounting
--> Settings --> Peruvian Localization`.

#### Basic Concepts

Here are some terms that are essential on the Peruvian localization:

  - **EDI**: Electronic Data Interchange, which in this refers to the
    Electronic Invoice.
  - **SUNAT**: is the organization that enforces customs and taxation in
    Peru.
  - **OSE**: Electronic Service Operator, [OSE SUNAT's
    definition](https://cpe.sunat.gob.pe/aliados/ose#:~:text=El%20Operador%20de%20Servicios%20Electr%C3%B3nicos%20\(OSE\)%20es%20qui%C3%A9n%20se%20encarga,otro%20documento%20que%20se%20emita).
  - **CDR**: Receipt certificate (Constancia de Recepción).
  - **SOL Credentials**: Sunat Operaciones en Línea. User and password
    are provided by the SUNAT and grant access to Online Operations
    systems.

#### Signature Provider

As part of the requirements for Electronic Invoice in Peru, your company
needs to select a Signature Provider that will take care of the document
signing process and manage the SUNAT validation response. Odoo offers
three options:

1.  IAP (Odoo In-App Purchase)
2.  Digiflow
3.  SUNAT

Please refer to the sections below to check the details and
considerations for each option.

##### IAP (Odoo In-App Purchase)

This is the default and the suggested option, considering the digital
ceritificate is included as part of the service.

![IAP option as signature providers](peru/peru-IAP.png)

###### What is the IAP?

This is a signature service offered directly by Odoo, the service takes
care of the next process:

1.  Provides the Electronic invoice Certificate, so you do not need to
    acquire one by yourself.
2.  Send the document to the OSE, in this case, Digiflow.
3.  Receive the OSE validation and CDR.

###### How does it work?

The service requires Credits in order to process your electronic
documents. Odoo provides 1000 credits for free in new databases. After
these credits are consumed, you need to buy a Credit Package.

| Credits | EUR |
| ------- | --- |
| 1000    | 22  |
| 5000    | 110 |
| 10,000  | 220 |
| 20,000  | 440 |

The credits are consumed per each document that is sent to the OSE.

<div class="important">

<div class="title">

Important

</div>

If you have a validation error and the document needs to be sent one
more time, one additional credit will be charged. Therefore, it is
paramount that you verify all information is correct before sending your
document to the OSE.

</div>

###### What do you need to do?

  - In Odoo, once your enterprise contract is activated and you start
    working in Production, you need to buy credits once the first 1000
    are consumed.
  - As Digiflow is the OSE used in the IAP, you need to affiliate it as
    the official OSE for your company on the SUNAT website. This is a
    simple process. For more information, please check [OSE Affiliation
    guide](https://drive.google.com/file/d/1BkrMTZIiJyi5XI0lGMi3rbMzHddOL1pa/view?usp=sharing).
  - Register Digiflow as the authorized PSE, please check [PSE
    Affiliation
    guide](https://drive.google.com/file/d/1QZoqWvtQERpS0pqp6LcKmw7EBlm9EroU/view?usp=sharing).

##### Digiflow

This option can be used as an alternative, instead of using the IAP
services you can send your document validation directly to Digiflow. In
this case you need to consider:

  - Buy your own digital Certificate: For more detail regarding the
    official vendor list, and the process to acquire it, please refer to
    [SUNAT Digital
    Ceritifcates](https://cpe.sunat.gob.pe/informacion_general/certificados_digitales/).
  - Sign a service agreement directly with
    [Digiflow](https://www.digiflow.pe/).
  - Provide your SOL credentials.

![Digiflow](peru/peru-Digiflow.png)

##### SUNAT

In case your company wants to sign directly with the SUNAT, it is
possible to select this option in your configuration. In this case you
need to consider: - Get the SUNAT Certification process accepted.

  - Buy your own digital Certificate: For more detail regarding the
    official vendor list, and the process to acquire it, please refer to
    [SUNAT Digital
    Ceritifcates](https://cpe.sunat.gob.pe/informacion_general/certificados_digitales/).
  - Provide you SOL credentials.

<div class="important">

<div class="title">

Important

</div>

When using direct connection with the SUNAT, the SOL User must be set
with the Company RUT + User Id. Example: `20121888549JOHNSMITH`

</div>

#### Testing environment

Odoo provides a testing environment that can be activated before your
company goes into production.

When using the testing environment and the IAP signature, you don’t need
to buy testing credits for your transactions as all of them are
validated by default.

<div class="tip">

<div class="title">

Tip

</div>

By default the databases are set to work on production, make sure to
enable the testing mode if needed.

</div>

#### Certificate

In case you don’t use Odoo IAP, in order to generate the electronic
invoice signature, a digital certificate with the extension `.pfx` is
required. Proceed to this section and load your file and password.

![EDI Certificate wizard](peru/peru-Certificate.png)

#### Multicurrency

The official currency exchange rate in Peru is provided by the Bank of
Peru. Odoo can connect directly to its services and get the currency
rate either automatically or manually.

![Bank of Peru is displayed in Multicurrency Service
option](peru/peru-multicurrency.png)

Please refer to the next section in our documentation for more
information about `multicurrency
<../accounting/others/multicurrencies/how_it_works>`.

### Configure Master data

#### Taxes

As part of the localization module the taxes are created automatically
with their related financial account and electronic invoice
configuration.

![List of default taxes](peru/peru-taxes.png)

##### EDI Configuration

As part of the taxes configuration, there are three new fields required
for electronic invoice, the taxes created by default have this data
included, but in case you create new taxes make sure you fill in the
fields:

![Taxes EDI data for Peru](peru/peru-taxes-edi.png)

#### Fiscal Positions

There are two main fiscal positions included by default when you install
the Peruvian localization.

**Extranjero - Exportación**: Set this fiscal position on customers for
Exportation transactions.

**Local Peru**: Set this fiscal position on local customers.

#### Document Types

In some Latin American countries, including Peru, some accounting
transactions like invoices and vendor bills are classified by document
types, defined by the government fiscal authorities, in this case by the
SUNAT.

Each document type can have a unique sequence per journal where it is
assigned. As part of the localization, the Document Type includes the
country on which the document is applicable;the data is created
automatically when the localization module is installed.

The information required for the document types is included by default
so the user does not need to fill anything on this view:

![Document Type list](peru/peru-document-type.png)

<div class="warning">

<div class="title">

Warning

</div>

Currently the documents supported on customer invoices are: Invoice,
Boleta, Debit Note and Credit Note.

</div>

#### Journals

When creating Sales Journals, the following information must be filled,
in addition to the standard fields on the Journals:

##### Use Documents

This field is used to define if the journal uses Document Types. It is
only applicable to Purchase and Sales journals, which are the ones that
can be related to the different set of document types available in Peru.
By default, all the sales journals created use documents.

##### Electronic Data Interchange

This section indicates which EDI workflow is used in the invoice, for
Peru we must select “Peru UBL 2.1”.

![Journal EDI field](peru/peru-journal-edi.png)

<div class="warning">

<div class="title">

Warning

</div>

By default, the value Factur-X (FR) is always displayed, make sure you
can uncheck it manually.

</div>

#### Partner

##### Identification Type and VAT

As part of the Peruvian localization, the identification types defined
by the SUNAT are now available on the Partner form, this information is
essential for most transactions either on the sender company and in the
customer, make sure you fill in this information in your records.

![Partner identification type](peru/peru-id-type.png)

#### Product

Additional to the basic information in your products, for the Peruvian
localization, the UNSPC Code on the product is a required value to be
configured.

![UNSPC Code on products](peru/peru-unspc-code.png)

## Usage and testing

### Customer invoice

#### EDI Elements

Once you have configured your master data, the invoices can be created
from your sales order or manually. Additional to the basic invoice
information described on `our page about the
invoicing process
<../accounting/receivables/customer_invoices/overview>`, there are a
couple of fields required as part of the Peru EDI:

  - **Document type**: The default value is “Factura Electronica” but
    you can manually change the document type if needed and select
    Boleta for example.
    
    ![Invoice document type field on
    invoices](peru/peru-invoice-document-type.png)

  - **Operation type**: This value is required for Electronic Invoice
    and indicates the transaction type, the default value is “Internal
    Sale” but another value can be selected manually when needed, for
    example Export of Goods.
    
    ![Invoice operation type field on
    invoices](peru/peru-operation-type.png)

  - **EDI Affectation Reason**: In the invoice lines, additional to the
    Tax there is a field “EDI Affectation Reason” that determines the
    tax scope based on the SUNAT list that is displayed. All the taxes
    loaded by default are associated with a default EDI affection
    reason, if needed you can manually select another one when creating
    the invoice.
    
    ![Tax affectation reason in invoice
    line](peru/peru-tax-affectation-reason.png)

#### Invoice validation

Once you check all the information in your invoice is correct, you can
proceed to validate it. This action registers the account move and
triggers the Electronic invoice workflow to send it to the OSE and the
SUNAT. The following message is displayed at the top of the invoice:

![Sending of EDI Invoice in blue](peru/peru-posted-invoice.png)

Asynchronous means that the document is not sent automatically after the
invoice has been posted.

##### Electronic Invoice Status

**To be Sent**: To be sent: Indicates the document is ready to be sent
to the OSE, this can be done either automatically by Odoo with a *cron*
that runs every hour, or the user can send it immediately by clicking on
the button “Sent now”.

![Send EDI manually](peru/peru-sent-manual.png)

**Sent**: Indicates the document was sent to the OSE and was
successfully validated. As part of the validation a ZIP file is
downloaded and a message is logged in the chatter indicating the correct
Government validation.

![Message on chatter when the invoice is
valid](peru/peru-invoice-sent.png)

In case there is a validation error the Electronic Invoice status
remains in “To be sent” so the corrections can be made and the invoice
can be sent again.

<div class="warning">

<div class="title">

Warning

</div>

One credit is consumed each time that you send a document for
validation, in this sense if an error is detected on an invoice and you
send it one more time, two credits are consumed in total.

</div>

#### Common Errors

There are multiple reasons behind a rejection from the OSE or the SUNAT,
when this happens Odoo sends a message at the top of the invoice
indicating the error details and in the most common cases a hint to fix
the issue.

If a validation error is received, you have two options:

  - In case the error is related to master data on the partner, customer
    or taxes, you can simply apply the change on the record (example
    customer identification type) and once it is done click on the Retry
    button.

  - If the error is related to some data recorded on the invoice
    directly (Operation type, missing data on the invoice lines), the
    correct solution is to reset the invoice to Draft, apply the
    changes, and then send the invoice again to the SUNAT for another
    validation.
    
    ![List of common errors on invoices](peru/peru-errors.png)

For more detail please refert to [Common errors in
SUNAT](https://www.nubefact.com/codigos-error-sunat/).

#### Invoice PDF Report

After the invoice is accepted and validated by the SUNAT, the invoice
PDF report can be printed. The report includes a QR code, indicating the
invoice is a valid fiscal document.

![Invoice PDF report](peru/peru-PDF.png)

#### IAP Credits

Odoo’s Electronic IAP offers 1000 credits for free, after these credits
are consumed in your production database, your company must buy new
credits in order to process your transactions.

Once you run out of credits a red label is displayed at the top of the
invoice indicating that additional credits are required, you can easily
buy them by accessing the link provided in the message.

![Buying credits in the IAP](peru/peru-credits-IAP.png)

In the IAP service includes packages with different pricing based on the
number of credits. The price list in the IAP is always displayed in EUR.

#### Special Use cases

##### Cancellation process

Some scenarios require an invoice cancellation, for example, when an
invoice was created by mistake. If the invoice was already sent and
validated by the SUNAT, the correct way to proceed is by clicking on the
button Request Cancellation:

![Request invoice cancellation button](peru/peru-cancellation.png)

In order to cancel an invoice, please provide a cancellation Reason.

###### Electronic Invoice Status

**To Cancel**: Indicates the cancellation request is ready to be sent to
the OSE, this can be done either automatically by Odoo with a *cron*
that runs every hour, or the user can send it immediately by clicking on
the button “Send now”. Once it is sent, a cancellation ticket is
created, as a result the next message and CDR File are logged in the
chatter:

![Cancellation CDR sent by the SUNAT](peru/peru-cancellation-cdr.png)

**Cancelled**: Indicates the cancellation request was sent to the OSE
and was successfully validated. As part of the validation a ZIP file is
downloaded and a message is logged in the chatter indicating the correct
Government validation.

![nvoice after cancellation](peru/peru-cancelled.png)

<div class="warning">

<div class="title">

Warning

</div>

One credit is consumed on each cancellation request.

</div>

##### Cancellation process

When creating exportation invoices, take into account the next
considerations:

  - The Identification type on your customer must be Foreign ID.
  - Operation type in your invoice must be an Exportation one.
  - The taxes included in the invoice lines should be EXP taxes.

![Exportation invoices main data](peru/peru-exp-invoice.png)

##### Advance Payments

1.  Create the advance payment Invoice and apply its related payment.
2.  Create the final invoice without considering the advance payment.
3.  Create a credit note for the Final invoice with the advance payment
    amount.
4.  Reconcile the Credit note with the final invoice.
5.  The remaining balance on the final invoice should be paid with a
    regular payment transaction.

##### Detraction Invoices

When creating invoices that is subject to Detractions, take into account
the next considerations:

1.  All the products included in the invoice must have these fields
    configured:
    
    ![Detraction fields on products](peru/peru-detraction.png)

2.  Operation type in your invoice must be `1001`
    
    ![Detraction code on invoices.](peru/peru-detraction-invoice.png)

### Credit Notes

When a correction or refund is needed over a validated invoice, a credit
note must be generated, for this just click on the button “Add Credit
Note”, a part of the Peruvian localization you need to prove a Credit
Reason selecting one of the options in the list.

![Add Credit Note from invoice](peru/peru-credit-note.png)

<div class="tip">

<div class="title">

Tip

</div>

When creating your first credit Note, select the Credit Method: Partial
Refund, this allows you to define the credit note sequence.

</div>

By default the Credit Note is set in the document type:

![Credit Note document type](peru/peru-credit-note-document.png)

To finish the workflow please follow the instructions on `our page about
Credit Notes
<../accounting/receivables/customer_invoices/credit_notes>`.

<div class="note">

<div class="title">

Note

</div>

The EDI workflow for the Credit notes works in the same way as the
invoices.

</div>

### Debit Notes

As part of the Peruvian localization, besides creating credit notes from
an existing document you can also create debit Notes. For this just use
the button “Add Debit Note”.

By default the Debit Note is set in the document type.


---
## File: ./content/applications/finance/fiscal_localizations/germany.md

# Germany

## German Chart of Accounts

The chart of accounts SKR03 and SKR04 are both supported in Odoo. You
can choose the one you want by going in `Accounting --> Configuration`
then choose the package you want in the Fiscal Localization section.

Be careful, you can only change the accounting package as long as you
have not created any accounting entry.

<div class="tip">

<div class="title">

Tip

</div>

When you create a new Odoo Online database, the SKR03 is installed by
default.

</div>

## German Accounting Reports

Here is the list of German-specific reports available on Odoo
Enterprise:

  - Balance Sheet
  - Profit & Loss
  - Tax Report (Umsatzsteuervoranmeldung)
  - Partner VAT Intra

## Export from Odoo to Datev

It is possible to export your accounting entries from Odoo to Datev. To
be able to use this feature, the german accounting localization needs to
be installed on your Odoo Enterprise database. Then you can go in
`Accounting --> Reporting --> General Ledger` then click on the **Export
Datev (csv)** button.

## Point of Sale in Germany: Technical Security System

The **Kassensicherungsverordnung** (The Act on Protection against
Manipulation of Digital Records) requires that electronic record-keeping
systems - including the `point of sale
</applications/sales/point_of_sale>` systems - must be equipped with a
**Technical Security System** (also called **TSS** or **TSE**).

Odoo offers a service that is compliant with the help of
[fiskaly](https://fiskaly.com), a *cloud-based solution*.

<div class="important">

<div class="title">

Important

</div>

Since this solution is cloud-based, a working internet connection is
required.

</div>

<div class="note">

<div class="title">

Note

</div>

The only VAT rates allowed are given by fiskaly. You can check these
rates by consulting: [fiskaly DSFinV-K API: VAT
Definition](https://developer.fiskaly.com/api/dsfinvk/v0/#tag/VAT-Definition).

</div>

### Configuration

#### Modules installation

1.  If your database was created before June 2021, `upgrade
    <general/upgrade>` your **Point of Sale** app
    (<span class="title-ref">point\_of\_sale</span>) and the
    **Restaurant** module
    (<span class="title-ref">pos\_restaurant</span>).

2.  `Install <general/install>` the **Germany - Certification for Point
    of Sale** (<span class="title-ref">l10n\_de\_pos\_cert</span>) and
    **Germany - Certification for Point of Sale of type restaurant**
    (<span class="title-ref">l10n\_de\_pos\_res\_cert</span>) modules.
    
    <div class="tip">
    
    <div class="title">
    
    Tip
    
    </div>
    
    If these modules are not listed, `update the app list
    <general/install>`.
    
    </div>

![Upgrading Odoo Point of Sale from the Apps
dashboard](germany/pos-upgrade.png)

#### Register your company at the financial authority

To register your company, go to `Settings --> General Settings -->
Companies -->
Update Info`, fill out the following fields and *Save*.

  - **Company name**
  - Valid **address**
  - **VAT** number
  - **St.-Nr** (Steuernummer): this number is assigned by the tax office
    to every taxable natural or legal person. (e.g.,
    <span class="title-ref">2893081508152</span>)
  - **W-IdNr** (Wirtschafts-Identifikationsnummer): this number is used
    as a permanent identification number for economically active
    persons.

You can then **register your company through fiskaly** by opening the
*fiskaly* tab and clicking on the *fiskaly Registration* button.

![Button to register a company through fiskaly in
Odoo](germany/fiskaly-registration.png)

<div class="tip">

<div class="title">

Tip

</div>

If you do not see the *fiskaly Registration* button, make sure that you
*saved* your company details and are not in *editing mode* anymore.

</div>

Once the registration has been finalized, new fields appear:

  - **fiskaly organization ID** refers to the ID of your company at the
    fiskaly side.
  - **fiskaly API key** and **secret** are the credentials the system
    uses to access the services offered by fiskaly.

![fiskaly keys as displayed on Odoo](germany/fiskaly-keys.png)

<div class="note">

<div class="title">

Note

</div>

It is possible to request new credentials if there is any issue with the
current ones.

</div>

#### Create and link a Technical Security System to your PoS

![Create TSS option from a point of sale](germany/create-tss.png)

To use your point of sale in Germany, you first have to create a `TSS
(Technical Security
System)` for it.

To do so, go to `Point of Sale --> Configuration --> Point of Sale`,
open the point of sale you want to edit, then check the box next to
**Create TSS** and *Save*.

![Example of TSS ID and Client ID from fiskaly in Odoo Point of
Sale](germany/tss-ids.png)

Once the creation of the TSS is successful, you can find your **TSS ID**
and **Client ID** under the *fiskaly API* section.

  - **TSS ID** refers to the ID of your TSS at fiskaly's side.
  - **Client ID** refers to your PoS but at fiskaly's side.

### DSFinV-K

![Menu to export DSFinV-K](germany/dsfinv-k-export.png)

Whenever you close a PoS session, the orders' details are sent to the
`DSFinV-K (Digitale
Schnittstelle der Finanzverwaltung für Kassensysteme)` service of
fiskaly.

In case of an audit, you can export the data sent to DSFinV-K by going
to `Point of
Sale --> Orders --> DSFinV-k exports`.

These fields are mandatory:

  - **Name**
  - **Start Datetime** (export data with dates larger than or equal to
    the given start date)
  - **End Datetime** (export data with dates smaller than or equal to
    the given end date)

Leave the **Point of Sale** field blank if you want to export the data
of all your points of sale. Specify a Point of Sale if you want to
export this specific PoS' data only.

The creation of a DSFinV-K export triggers on export at fiskaly's side.

![Pending DSFinV-K export on Odoo](germany/dsfinv-k-export-fields.png)

As you can see, the **State** is *Pending*. This means that the export
has been successfully triggered and is being processed. You have to
click on *Refresh State* to check if it is ready.

## German Tax Accounting Standards: Odoo's guide to GoBD Compliance

**GoBD** stands for [Grundsätze zur ordnungsmäßigen Führung und
Aufbewahrung von Büchern, Aufzeichnungen und Unterlagen in
elektronischer Form sowie zum
Datenzugriff](https://www.bundesfinanzministerium.de/Content/DE/Downloads/BMF_Schreiben/Weitere_Steuerthemen/Abgabenordnung/2019-11-28-GoBD.pdf).
In short, it is a **guideline for the proper management and storage of
books, records, and documents in electronic form, as well as for data
access**, that is relevant for the German tax authority, tax
declaration, and balance sheet.

These principles have been written and published by the Federal Ministry
of Finance (BMF) in November 2014. Since January 2015, **they have
become the norm** and replace previously accepted practices linked to
computer-based accounting. Several changes have been made by the BMF in
2019 and January 2020 to specify some of the content and due to the
development of digital solutions (cloud hosting, paperless companies,
etc.).

<div class="important">

<div class="title">

Important

</div>

Odoo gives you **the means to be compliant with GoBD**.

</div>

### What do you need to know about GoBD when relying on accounting software?

<div class="note">

<div class="title">

Note

</div>

If you can, the best way to understand GoBD is to Read the [Official
GoBD
text](https://www.bundesfinanzministerium.de/Content/DE/Downloads/BMF_Schreiben/Weitere_Steuerthemen/Abgabenordnung/2019-11-28-GoBD.pdf).
It is a bit long but quite readable for non-experts. But in short, here
is what to expect:

</div>

The **GoBD is binding for companies that have to present accounts, which
includes SMEs, freelancers, and entrepreneurs, to the financial
authorities**. As such, **the taxpayer himself is the sole responsible**
for the complete and exhaustive keeping of fiscal-relevant data
(above-mentioned financial and related data).

Apart from software requirements, the user is required to ensure
Internal control systems (*in accordance with sec. 146 of the Fiscal
Code*):

  - Access rights control;
  - Segregation of Duties, Functional separating;
  - Entry controls (error notifications, plausibility checks);
  - Reconciliation checks at data entry;
  - Processing controls;
  - Measures to prevent intentional or unintentional manipulation of
    software, data, or documents.

The user must distribute tasks within its organization to the relevant
positions (*control*) and verify that the tasks are properly and
completely performed (*supervision*). The result of these controls must
be recorded (*documentation*), and should errors be found during these
controls, appropriate measures to correct the situation should be put
into place (*prevention*).

### What about data security?

**The taxpayer must secure the system against any data loss due to
deletion, removal, or theft of any data**. If the entries are not
sufficiently secured, the bookkeeping will be regarded as not in
accordance with the GoBD guidelines.

Once bookings have been finally posted, they can no longer be changed or
deleted via the application.

  - If Odoo is used in the cloud, regular backups are part of the Odoo
    Online service. In addition, regular backups can be downloaded and
    backed up on external systems.
    
    <div class="seealso">
    
    [Odoo Cloud Hosting - Service Level
    Agreement](https://www.odooo.com/cloud-sla)
    
    </div>

  - If the server is operated locally, it is the responsibility of the
    user to create the necessary backup infrastructure.

<div class="important">

<div class="title">

Important

</div>

In some cases, data has to be kept for ten years or more, so always have
backups saved. It is even more important if you decide to change
software provider.

</div>

### Responsibility of the software editor

Considering GoBD only applies between the taxpayer and the financial
authority, **the software editor can by no means be held responsible for
the accurate and compliant documentation of financial transactional data
of their users**. It can merely provide the necessary tools for the user
to respect the software related guidelines described in the GoBD.

### How can Odoo help you achieve Compliance?

The key words, when it comes to GoBD, are: **traceable, verifiable,
true, clear, and continuous**. In short, you need to have audit-proof
archiving in place and Odoo provides you with the means to achieve all
of these objectives:

1.  **Traceability and verifiability**  
    Each record in Odoo is stamped with the creator of the document, the
    creation date, the modification date, and who modified it. In
    addition, relevant fields are tracked thus it can be seen which
    value was changed by whom in the chatter of the relevant object.

2.  **Completeness**  
    All financial data must be recorded in the system, and there can be
    no gaps. Odoo ensures that there is no gap in the numbering of the
    financial transactions. It is the responsibility of the user to
    encode all financial data in the system. As most financial data in
    Odoo is generated automatically, it remains the responsibility of
    the user to encode all vendor bills and miscellaneous operations
    completely.

3.  **Accuracy**  
    Odoo ensures with the correct configuration that the correct
    accounts are used. In addition, the control mechanisms between
    purchase orders and sales orders and their respective invoices
    reflect the business reality. It is the responsibility of the user
    to scan and attach the paper-based vendor bill to the respective
    record in Odoo. *Odoo Document helps you automate this task*.

4.  **Timely booking and record-keeping**  
    As most financial data in Odoo is generated by the transactional
    objects (for example, the invoice is booked at confirmation), Odoo
    ensures out-of-the-box timely record-keeping. It is the
    responsibility of the user to encode all incoming vendor bills in a
    timely manner, as well as the miscellaneous operations.

5.  **Order**  
    Financial data stored in Odoo is per definition ordered and can be
    reordered according to most fields present in the model. A specific
    ordering is not enforced by the GoBD, but the system must ensure
    that a given financial transaction can be quickly found by a
    third-party expert. Odoo ensures this out-of-the-box.

6.  **Inalterability**  
    With the German Odoo localization, Odoo is in standard configured in
    such a way that the inalterability clause can be adhered to without
    any further customization.

### Do you need a GoBD-Export?

In the case of fiscal control, the fiscal authority can request three
levels of access to the accounting system (Z1, Z2, Z3). These levels
vary from direct access to the interface to the handover of the
financial data on a storage device.

In case of a handover of the financial data on a storage device, the
format is **not** enforced by the GoBD. It can be, for example, in XLS,
CSV, XML, Lotus 123, SAP-format, AS/400-format, or else. Odoo supports
the CSV and XLS-export of financial data out-of-the-box. The GoBD
**recommends** the export in a specific XML-based GoBD-format (see
"Ergänzende Informationen zur Datenntträgerüberlassung" §3) but it is
not binding.

### What is the role and meaning of the compliance certification?

The GoBD clearly states that due to the nature of a state of the art
accounting software, their configuration possibilities, changing nature,
and various forms of use, **no legally binding certification can be
given**, nor can the software be made liable towards a public authority.
Third-party certificates can indeed have **an informative value** for
customers to make software buying decisions but are by no means legally
binding or of any other legal value (A. 12, § 181).

A GoBD certificate states nothing more than that if you use the software
according to its guidelines, the software will not refrain you from
respecting the GoBD. These certifications are very expensive in terms of
time and cost, and their value is very relative. Thus we focus our
efforts on ensuring GoBD compliance rather than pay for a marketing tool
which does not, however, offer our customer any legal certainty.

<div class="important">

<div class="title">

Important

</div>

The BMF actually states the following in the [Official GoBD
text](https://www.bundesfinanzministerium.de/Content/DE/Downloads/BMF_Schreiben/Weitere_Steuerthemen/Abgabenordnung/2019-11-28-GoBD.pdf):

  - 180\. Positive attestations on the correctness of the bookkeeping -
    and thus on the correctness of IT-based bookkeeping systems - are
    not issued either in the context of a tax field audit or in the
    context of binding information.
  - 181\. "Certificates" or "attestations" from third parties can serve
    as a decision criterion for the company when selecting a software
    product, but develop from the in margin no. 179 is not binding on
    the tax authorities.

<div class="note">

<div class="title">

Note

</div>

The previous content was [automatically translated from German with
Google
Translate](https://translate.google.com/?sl=de&tl=en&text=180.%0APositivtestate%20zur%20Ordnungsm%C3%A4%C3%9Figkeit%20der%20Buchf%C3%BChrung%20-%20und%20damit%20zur%20Ordnungsm%C3%A4%C3%9Figkeit%20DV-gest%C3%BCtzter%20Buchf%C3%BChrungssysteme%20-%20werden%20weder%20im%20Rahmen%20einer%20steuerlichen%20Au%C3%9Fenpr%C3%BCfung%20noch%20im%20Rahmen%20einer%20verbindlichen%20Auskunft%20erteilt.%0A%0A181.%0A%E2%80%9EZertifikate%E2%80%9C%20oder%20%E2%80%9ETestate%E2%80%9C%20Dritter%20k%C3%B6nnen%20bei%20der%20Auswahl%20eines%20Softwareproduktes%20dem%20Unternehmen%20als%20Entscheidungskriterium%20dienen%2C%20entfalten%20jedoch%20aus%20den%20in%20Rz.%20179%20genannten%20Gr%C3%BCnden%20gegen%C3%BCber%20der%20Finanzbeh%C3%B6rde%20keine%20Bindungswirkung.%20&op=translate).

</div>

</div>

### What happens if you are not compliant?

In the event of an infringement, you can expect a fine but also a court
order demanding the implementation of specific measures.


---
## File: ./content/applications/finance/sign.md

# Sign

**Odoo Sign** allows you to send, sign and approve documents online.

You can upload any PDF file and add drag-and-dropping fields on it.
These fields are automatically filled out with the user's detail if they
are logged in.

<div class="seealso">

\- [Odoo Sign: product page](https://www.odoo.com/app/sign) - [Odoo
Tutorials: Sign](https://www.odoo.com/slides/sign-61)

</div>

## Validity of electronic signatures

The legal validity of electronic signatures generated by Odoo depends on
the legislation of your country. Companies doing business abroad should
consider electronic signature laws of other countries as well.

### In the European Union

The [eIDAS regulation](http://data.europa.eu/eli/reg/2014/910/oj)
establishes the framework for electronic signatures in all [27 member
states of the European
Union](https://europa.eu/european-union/about-eu/countries_en).

It distinguishes three types of electronic signatures:

1.  Electronic signatures
2.  Advanced electronic signatures
3.  Qualified electronic signatures

Odoo generates the first type, regular electronic signatures, and these
signatures can produce legal effects in the EU, as the regulation states
that “an electronic signature shall not be denied legal effect and
admissibility as evidence in legal proceedings solely on the grounds
that it is in an electronic form or that it does not meet the
requirements for qualified electronic signatures.”

Note that electronic signatures may not be automatically recognized as
valid. You may need to bring supporting evidence of a signature’s
validity.

### In the United States of America

The [ESIGN Act (Electronic Signatures in Global and National Commerce
Act)](https://www.fdic.gov/regulations/compliance/manual/10/X-3.1.pdf),
at the interstate and international levels, and the [UETA (Uniform
Electronic Transactions
Act)](https://www.uniformlaws.org/committees/community-home/librarydocuments?communitykey=2c04b76c-2b7d-4399-977e-d5876ba7e034&tab=librarydocuments),
at the state level, provide the legal framework for electronic
signatures. Note that
[Illinois](https://www.ilga.gov/legislation/ilcs/ilcs5.asp?ActID=89&)
and [New
York](https://its.ny.gov/electronic-signatures-and-records-act-esra)
have not adopted the UETA, but similar acts instead.

Overall, to be recognized as valid, electronic signatures have to meet
five criteria:

1.  A signer must show a clear intent to sign. For example, using a
    mouse to draw a signature can show intent. The signer must also have
    the option to opt-out of electronically signing a document.
2.  A signer must first express or imply their consent to conduct
    business electronically.
3.  The signature must be clearly attributed. In Odoo, metadata, such as
    the signer’s IP address, is added to the signature, which can be
    used as supporting evidence.
4.  The signature must be associated with the document being signed, for
    example, by keeping a record detailing how the signature was
    captured.
5.  Electronically signed documents need to be retained and available
    for later reference by all parties involved, for example, by
    providing the signer either a fully-executed copy or the option to
    download a copy.

<div class="note">

<div class="title">

Note

</div>

The information provided here does not constitute legal advice; it is
provided for general informational purposes only. As laws governing
electronic signatures rapidly evolve, we cannot guarantee whether all
information is up to date or not. We advise contacting a local attorney
for legal advice regarding electronic signature compliance and validity.

</div>

## Field Types

By configuring your own *Field Types*, also known as *Signature Item
Types*, you can make the signing process even faster for your customers,
partners, and employees.

To create and customize fields, activate the `developer mode
<developer-mode>`. Then head to `Documents --> Configuration --> Field
Types` and click on *Create*.

After giving your new field a name, select one of the six *Types*
available:

  - **Signature**: users are prompted to enter their signature either by
    drawing it, automatically generating one based on their name, or
    uploading a local file (usually an image). Each subsequent
    *Signature* field then reuses the data entered in the first field.
  - **Initial**: users are prompted to enter their initials, in a
    similar way to the *Signature* field.
  - **Text**: users enter text on a single line.
  - **Multiline Text**: users enter text on multiple lines.
  - **Checkbox**: users can tick a box (e.g.,to mark their approval or
    consent).
  - **Selection**: users choose a single option from a variety of
    options.

Next, you have the option to auto-complete fields for users based on
their Odoo profile information by using *Automatic Partner Field*. To
this end, the *Name*, *Email*, *Phone*, and *Company* fields are
preconfigured in your database.

<div class="note">

<div class="title">

Note

</div>

Users can freely edit auto-completed fields.

</div>

![Company field example in Odoo Sign](sign/field-example.png)

You can then change the size of the field by editing the *Default Width*
and *Default Height*. Both sizes are defined as a percentage of the
full-page expressed as a decimal, with 1 equalling the full-page's width
or height. By default, the width of new fields you create is set to 15%
(0.150) of a full-page's width, while their height is set to 1.5%
(0.015) of a full-page's height.

Next, write a *Tip*. Tips are displayed inside arrows on the left-hand
side of the user's screen during the signing process. You can also use a
*Placeholder* text to be displayed inside the field before it is
completed.

![Tip and placeholder example in Odoo Sign](sign/tip-placeholder.png)


---
## File: ./content/applications/finance/accounting.md

  - nosearch

  - show-content

  - hide-page-toc

  - show-toc

# Accounting and Invoicing

**Odoo Invoicing** is a standalone invoicing app to create invoices,
send them to your customers, and manage payments.

**Odoo Accounting** is a full featured accounting app. Accountant
productivity is at the core of its development with features such as
AI-powered invoice recognition, synchronization with your bank accounts,
smart matching suggestions, etc.

<div class="seealso">

\- [Odoo Tutorials:
Accounting](https://www.odoo.com/slides/accounting-19) - `Accounting
Cheat Sheet <accounting/getting_started/cheat_sheet>`

</div>

<div class="toctree" data-titlesonly="">

accounting/getting\_started accounting/receivables accounting/payables
accounting/bank accounting/taxation accounting/reporting
accounting/others

</div>


---
## File: ./content/applications/finance/expenses.md

  - show-content

# Expenses

Odoo **Expenses** streamlines the management of expenses. After an
employee submits their expenses in Odoo, the expenses are reviewed by
management and accounting teams. Once approved, payments can then be
processed and disbursed back to the employee for reimbursement(s).

<div class="seealso">

[Odoo Expenses: product page](https://www.odoo.com/app/expenses)

</div>

## Set expense types

The first step to track expenses is to configure the different *expense
types* for the company (managed as *products* in Odoo). Each "product"
can be as specific or generalized as needed. Go to `Expenses app -->
Configuration --> Expense Products` to view the current expensable
products in a default kanban view.

![Set expense costs on products.](expenses/products.png)

To create a new expense product, click `Create`. A product form will
appear. Only two fields are required, the `Product Name` and the `Unit
of Measure`. Enter the `Product Name` in the field, and select the `Unit
of Measure` from the drop-down menu (most products will be set to
`Units`).

<div class="tip">

<div class="title">

Tip

</div>

The *Sales* app is where specification on the units of measure are
created and edited (e.g. units, miles, nights, etc.). Go to `Sales app
--> Configuration --> Settings` and ensure <span class="title-ref">Units
of Measure</span> is checked off in the <span class="title-ref">Product
Catalog</span> section. Click on the `Units of Measure` internal link to
view, create, and edit the units of measure. Refer to `this document
</applications/inventory_and_mrp/inventory/management/products/uom>` to
learn more about units of measure and how to configure them.

</div>

![Set expense costs on products.](expenses/new-expense-product.png)

The `Cost` field on the product form is populated with a value of
<span class="title-ref">0.00</span> by default. When a specific expense
should always be reimbursed for a particular price, enter that amount in
the `Cost` field. Otherwise, leave the `Cost` set to
<span class="title-ref">0.00</span>, and employees will report the
actual cost when submitting an expense report.

<div class="example">

Here are some examples for when to set a specific `Cost` on a product
vs. leaving the `Cost` at \`0.00\`:

  - **Meals**: Set the `Cost` to <span class="title-ref">0.00</span>.
    When an employee logs an expense for a meal, they enter the actual
    amount of the bill and will be reimbursed for that amount. An
    expense for a meal costing $95.23 would equal a reimbursement for
    $95.23.
  - **Mileage**: Set the `Cost` to <span class="title-ref">0.30</span>.
    When an employee logs an expense for "mileage", they enter the
    number of miles driven, and are reimbursed 0.30 per mile they
    entered. An expense for 100 miles would equal a reimbursement for
    $30.00.
  - **Monthly Parking**: Set the `Cost` to
    <span class="title-ref">75.00</span>. When an employee logs an
    expense for "monthly parking", the reimbursement would be for
    $75.00.
  - **Expenses**: Set the `Cost` to <span class="title-ref">0.00</span>.
    When an employee logs an expense that is not a meal, mileage, or
    monthly parking, they use the generic `Expenses` product. An expense
    for a laptop costing $350.00 would be logged as an `Expenses`
    product, and the reimbursement would be for $350.00.

</div>

Select an `Expense Account` if using the Odoo *Accounting* app. It is
recommended to check with the accounting department to determine the
correct account to reference in this field as it will affect reports.

Set a tax on each product in the `Vendor Taxes` and `Customer Taxes`
fields if applicable. It is considered good practice to use a tax that
is configured with `Tax Included
in Price <taxes/included-in-price>`. Taxes will be automatically
configured if this is set.

## Record expenses

### Manually create a new expense

To record a new expense, begin in the main `Expenses` app dashboard,
which presents the default `My Expenses to Report` view. This view can
also be accessed from `Expenses app --> My Expenses --> My Expenses to
Report`.

First, click `Create`, and then fill out the various fields on the form.

  - `Description`: Enter a short description for the expense in the
    `Description` field. This should be short and informative, such as
    <span class="title-ref">lunch with client</span> or
    <span class="title-ref">hotel for conference</span>.

  - `Product`: Select the product from the drop-down menu that most
    closely corresponds to the expense. For example, an airplane ticket
    would be appropriate for an expense `Product` named `Air Travel`.

  - `Unit Price`: Enter the total amount paid for the expense in one of
    two ways:
    
    1.  If the expense is for one single item/expense, enter the cost in
        the `Unit Price` field, and leave the `Quantity`
        <span class="title-ref">1.00</span>.
    
    2.  If the expense is for multiples of the same item/expense, enter
        the price *per unit* in the `Unit Price` field, and enter the
        *quantity of units* in the `Quantity` field.
        
        <div class="example">
        
        In the case of a hotel stay, for example, the `Unit Price` would
        be set as the cost *per night*, and set the `Quantity` to the
        *number of nights* stayed.
        
        </div>

  - `Taxes`: If taxes were paid on the expense, select the tax
    percentage using the drop-down menu. Tax options are pre-configured
    based on the localization setting selected when the database was
    created. Adding any new taxes should only be done when necessary.
    
    <div class="note">
    
    <div class="title">
    
    Note
    
    </div>
    
    When a tax is selected, the `Total` value will update in real time
    to show the added taxes.
    
    </div>

  - `Paid By`: Click the radio button to indicate who paid for the
    expense and should be reimbursed. If the employee paid for the
    expense (and should be reimbursed) select `Employee (to reimburse)`.
    If the company paid directly instead (e.g. if the company credit
    card was used to pay for the expense) select `Company`.

  - `Expense Date`: Using the calendar module, enter the date the
    expense was incurred. Use the `< (left)` and `> (right)` arrows to
    navigate to the correct month, then click on the specific day to
    enter the selection.

  - `Bill Reference`: If there is any reference text that should be
    included for the expense, enter it in this field.

  - `Account`: Select the expense account that this expense should be
    logged on from the drop-down menu.

  - `Employee`: Using the drop-down menu, select the employee this
    expense is for.

  - `Customer to Reinvoice`: If the expense is something that should be
    paid for by a customer, select the customer that will be invoiced
    for this expense from the drop-down menu. For example, if a customer
    wishes to have an on-site meeting, and agrees to pay for the
    expenses associated with it (such as travel, hotel, meals, etc.),
    then all expenses tied to that meeting would indicate that customer
    as the `Customer to Reinvoice`.

  - `Analytic Account`: Select the account the expense should be written
    against from the drop-down menu.

  - `Company`: If multiple companies are set-up, select the company this
    expense should be filed for from the drop-down menu. If there is
    only one company, this field will be automatically populated.

  - `Notes...`: If any notes are needed in order to clarify the expense,
    enter them in the notes field.

Once all the fields have been filled out, click `Save`.

![A filled in expense form for a client
lunch.](expenses/expense-filled-in.png)

#### Attach a receipt

After the expense is saved, the next step is to attach a receipt. A new
`Attach Receipt` button appears after the entry is saved, beneath the
former `Save` button (which turns into an `Edit` button).

![Attach a receipt after saving the record.](expenses/save-receipt.png)

Click the new `Attach Receipt` button, and a file explorer appears.
Navigate to the receipt to be attached, and click `Open`. A new
`Receipts` smart button appears at the top, and the new receipt is
recorded in the chatter. More than one receipt can be attached to an
individual expense, as needed. The number of receipts attached to the
expense will be noted on the smart button.

![Attach a receipt after saving the
record.](expenses/receipt-smartbutton.png)

### Automatically create new expenses from an email

Instead of individually creating each expense in the *Expenses* app,
expenses can be automatically created by sending an email to an email
alias.

To do so, first, an email alias needs to be configured. Go to `Expenses
app -->
Configuration --> Settings`. Ensure `Incoming Emails` is checked off.

![Create the domain alias by clicking the
link.](expenses/email-alias.png)

<div class="note">

<div class="title">

Note

</div>

If the domain alias needs to be set up, `Setup your domain alias` will
appear beneath the incoming emails check box instead of the email
address field. Refer to this documentation for setup instructions and
more information: `/administration/maintain/domain_names`. Once the
domain alias is configured, the email address field will be visible
beneath the incoming emails section.

</div>

Next, enter the email address to be used in the email field, then click
`Save`. Now that the email address has been entered, emails can be sent
to that alias to create new expenses without having to be in the Odoo
database.

To submit an expense via email, create a new email and enter the
product's *internal reference* code (if available) and the amount of the
expense in the email subject. Next, attach the receipt to the email.
Odoo creates the expense by taking the information in the email subject
and combining it with the receipt.

To check an expense product's internal reference, go to `Expenses app
-->
Configuration --> Expense Products`. If an internal reference is listed
on the product, it is visible in this view as `(Ref###)`.

![Internal reference numbers are listed in the main Expense Products
view.](expenses/internal-ref-numbers.png)

To add an internal reference on an expense product, click on the
product, then click `Edit`. In edit mode, enter the `Internal Reference`
in the field. Beneath the `Internal Reference` field, this sentence
appears: `Use this reference as a
subject prefix when submitting by email.`.

![Internal reference numbers are listed in the main Expense Products
view.](expenses/meals-internal-reference.png)

<div class="note">

<div class="title">

Note

</div>

For security purposes, only authenticated employee emails are accepted
by Odoo when creating an expense from an email. To confirm an
authenticated employee email address, go to the employee card in the
`Employees` app, and refer to the `Work Email` in the main field.

![Create the domain alias by clicking the
link.](expenses/authenticated-email-address.png)

</div>

<div class="example">

If submitting an expense via email for a $25.00 meal during a work trip,
the email subject would be <span class="title-ref">Ref005 Meal
$25.00</span>.

Explanation:

  - The `Internal Reference` for the expense product
    <span class="title-ref">Meals</span> is
    <span class="title-ref">Ref005</span>
  - The `Cost` for the expense is <span class="title-ref">$25.00</span>

</div>

## Create an expense report

When expenses are ready to submit (such as at the end of a business
trip, or once a month), an *expense report* needs to be created. Go to
the main `Expenses` app dashboard, which displays a default `My
Expenses` view, or go to `Expenses app --> My
Expenses --> My Expenses to Report`.

First, each individual expense for the report must be selected by
clicking the check box next to each entry, or quickly select all the
expenses in the list by clicking the check box next to `Expense Date`.

![Select the expenses to submit, then create the
report.](expenses/create-report.png)

Once the expenses have been selected, click the `Create Report` button.
The new report appears with all the expenses listed, and the number of
documents is visible in the `Documents` smart button.

It is recommended to add a short summary for each report to help keep
expenses organized. Click the `Edit` button, and the `Expense Report
Summary` field appears. Enter a short description for the expense report
(such as <span class="title-ref">Client Trip NYC</span>, or
<span class="title-ref">Repairs for Company Car</span>). Next, select a
`Manager` from the drop-down menu to assign a manager to review the
report.

![Enter a short description and select a manager for the
report.](expenses/expense-report-summary.png)

If some expenses are not on the report that should be, they can still be
added. Click `Add
a line` at the bottom of the `Expense` tab. Click the check box next to
each expense to add, then click `Select`. The items now appear on the
report that was just created.

![Add more expenses to the report before
submitting.](expenses/add-an-expense-line.png)

<div class="note">

<div class="title">

Note

</div>

`Add a line` only appears when the document is in edit mode. It does not
appear otherwise.

</div>

When all edits have been completed, click `Save`.

### Submit an expense report

When an expense report is completed, the next step is to submit the
report to a manager for approval. Reports must be individually
submitted, and cannot be submitted in batches. Open the specific report
from the list of expense reports (if the report is not already open). To
view all expense reports, go to `Expenses app --> My Expenses --> My
Reports`.

If the list is large, grouping the results by status may be helpful
since only reports that are in a `Draft` mode need to be submitted,
reports with an `Approved` or `Submitted` status do not.

![Submit the report to the manager.](expenses/expense-status.png)

<div class="note">

<div class="title">

Note

</div>

The status of each report is shown in the `Status` column on the far
right. If the `Status` column is not visible, click the `⋮ (additional
options)` icon at the end of the row, and check the box next to
`Status`.

</div>

Click on a report to open it, then click `Submit To Manager`. After
submitting a report, the next step is to wait for the manager to approve
it.

<div class="important">

<div class="title">

Important

</div>

The `expenses/approve`, `expenses/post`, and `expenses/reimburse`
sections are **only** for users with the *necessary rights*.

</div>

## Approve expenses

In Odoo, not just anyone can approve expense reports— only users with
the necessary rights (or permissions) can. This means that a user must
have at least *Team Approver* rights for the *Expenses* app. Employees
with the necessary rights can review expense reports, and approve or
reject them, as well as provide feedback thanks to the integrated
communication tool.

To see who has rights to approve, go to the main `Settings` app and
click on `Manage Users`.

<div class="note">

<div class="title">

Note

</div>

If the *Settings* app is not available, then certain rights are not set
on the account. In the `Access Rights` tab of a user's card in the
`Settings` app, the `Administration` section is set to one of three
options:

  - `None (blank)`: The user cannot access the *Settings* app at all.
  - `Access Rights`: The user can only view the `User's & Companies`
    section of the *Settings* app.
  - `Settings`: The user has access to the entire *Settings* app with no
    restrictions.

Please refer to `this document
</applications/general/users/manage_users>` to learn more about managing
users and their access rights.

</div>

Click on an individual to view their card, which displays the `Access
Rights` tab in the default view. Scroll down to the `Human Resources`
section. Under `Expenses`, there are four options:

  - `None (blank)`: A blank field means the user has no rights to view
    or approve expense reports, and can only view their own.
  - `Team Approver`: The user can only view and approve expense reports
    for their own specific team.
  - `All Approver`: The user can view and approve any expense report.
  - `Administrator`: The user can view and approve any expense report as
    well as access the reporting and configuration menus in the
    *Expenses* app.

Users who are able to approve expense reports (typically managers) can
easily view all expense reports to validate. Go to `Expenses app -->
Expense Reports --> Reports to
Approve`. This view lists all the expense reports that have been
submitted but not approved, as noted by the `Submitted` tag in the
status column.

![Reports to validate are found on the Reports to Approve
page.](expenses/reports-to-approve.png)

Reports can be approved in two ways (individually or several at once)
and refused only one way. To approve multiple expense reports at once,
remain in the list view. First, select the reports to approve by
clicking the check box next to each report, or click the box next to
`Employee` to select all reports in the list. Next, click on the `⚙️
Action (gear)` icon, then click `Approve Report`.

![Approve multiple reports by clicking the checkboxes next to each
report.](expenses/approve-report.png)

To approve an individual report, click on a report to go to a detailed
view of that report. In this view, several options are presented:
`Approve`, `Refuse`, or `Reset to
draft`. Click `Approve` to approve the report.

If `Refuse` is clicked, a pop-up window appears. Enter a brief
explanation for the refusal in the `Reason to refuse Expense` field,
then click `Refuse`.

![Send messages in the chatter.](expenses/refuse-expense.png)

Team managers can easily view all the expense reports for their team
members. While in the `Reports to Approve` view, click on `Filters`,
then click `My Team`. This presents all the reports for the manager's
team.

![Select the My Team filter.](expenses/my-team-filter.png)

<div class="note">

<div class="title">

Note

</div>

If more information is needed, such as a receipt is missing,
communication is easy from the chatter. In an individual report, simply
type in a message, tagging the proper person (if needed), and post it to
the chatter by clicking `Send`. The message is posted in the chatter,
and the person tagged will be notified via email of the message, as well
as anyone following.

![Send messages in the chatter.](expenses/chatter.png)

</div>

## Post expenses in accounting

Once an expense report is approved, the next step is to post the report
to the accounting journal. To view all expense reports to post, go to
`Expenses --> Expense Reports --> Reports
To Post`.

![View reports to post by clicking on expense reports, then reports to
post.](expenses/post-reports.png)

Just like approvals, expense reports can be posted in two ways
(individually or several at once). To post multiple expense reports at
once, remain in the list view. First, select the reports to post by
clicking the check box next to each report, or click the box next to
`Employee` to select all reports in the list. Next, click on the `⚙️
Action (gear)` icon, then click `Post Entries`.

![Post multiple reports from the Post Entries
view.](expenses/post-entries.png)

To post an individual report, click on a report to go to the detailed
view of that report. In this view, several options are presented: `Post
Journal Entries`, `Report In Next
Payslip`, or `Refuse`. Click `Post Journal Entries` to post the report.

If `Refuse` is clicked, a pop-up window appears. Enter a brief
explanation for the refusal in the `Reason to refuse Expense` field,
then click `Refuse`. Refused reports can be viewed by going to `Expenses
app --> Expense Reports --> All Reports`. This list shows all reports,
including the refused ones.

<div class="note">

<div class="title">

Note

</div>

To post expense reports to an accounting journal, the user must have
following access rights:

  - Accounting: Accountant or Adviser
  - Expenses: Manager

</div>

## Reimburse employees

After an expense report is posted to an accounting journal, the next
step is to reimburse the employee. To view all expense reports to pay,
go to `Expenses --> Expense Reports -->
Reports To Pay`.

![View reports to pay by clicking on expense reports, then reports to
pay.](expenses/reports-to-pay.png)

Just like approvals and posting, expense reports can be paid in two ways
(individually or several at once). To pay multiple expense reports at
once, remain in the list view. First, select the reports to pay by
clicking the check box next to each report, or click the box next to
`Employee` to select all reports in the list. Next, click on the `⚙️
Action (gear)` icon, then click `Register Payment`.

![Post multiple reports by clicking the checkboxes, clicking the gear,
then post the entries.](expenses/register-payment.png)

To pay an individual report, click on a report to go to a detailed view
of that report. Click `Register Payment` to pay the employee.

## Re-invoice expenses to customers

If expenses are tracked on customer projects, expenses can be
automatically charged back to the customer. This is done by creating an
expense report, then creating a sales order with the expensed items on
it. Then, managers approve the expense report, and the accounting
department posts the journal entries. Finally, the customer is invoiced.

### Setup

First, specify the invoicing policy for each expense product. Go to
`Expenses app -->
Configuration --> Expense Products`. Click on the expense product to
edit, then click `Edit`. Under the `Invoicing` section, select the
`Invoicing Policy` and `Re-Invoicing Policy` by clicking the radio
button next to the desired selection.

`Invoicing Policy`:

  - `Ordered quantities`: Expense product will only invoice expenses
    based on the ordered quantity.
  - `Delivered quantities`: Expense product will only invoice expenses
    based on the delivered quantity.

`Re-Invoicing Policy`:

  - `No`: Expense product will not be re-invoiced.
  - `At cost`: Expense product will invoice expenses at their real cost.
  - `At sales price`: Expense product will invoice the price set on the
    sale order.

### Create an expense

First, when `creating a new expense <expenses/new>`, the correct
information needs to be entered in order to re-invoice a customer.
Select the `Customer to Reinvoice` from the drop-down menu. Next, select
the `Analytic Account` the expense will be posted to.

![Ensure the customer to be invoiced is called out on the
expense.](expenses/reinvoice-expense.png)

### Create a quote and sales order

In the `Sales` app, create a quote for the customer being invoiced,
listing the expense products. First, click `Create` to create a new
quotation. Next, select the `Customer` being invoiced for the expenses
from the drop-down menu.

In the `Order Lines` tab, click `Add a product`. In the `Product` field,
select the first item being invoiced from the drop-down menu, or type in
the product name. Then, update the `Quantity`, the `Delivered` quantity,
and the `Unit
Price` if needed. Repeat this for all products being invoiced. When all
the products have been added to the quote, click `Confirm` and the
quotation becomes a sales order.

![Create and confirm the sales order with the expenses listed as
products.](expenses/expenses-salesorder.png)

Once the quote turns into a sales order, a `Delivered` column appears.
The delivered quantity must be updated for each item. Click on the
<span class="title-ref">0.000</span> field for each product, and enter
the delivered quantity. When all delivered quantities have been entered,
click `Save`.

### Validate and post expenses

Only employees with permissions (typically managers or supervisors) can
`approve expenses
<expenses/approve>`. Before approving an expense report, ensure the
`Analytic Account` is set on every expense line of a report. If an
`Analytic Account` is missing, click `Edit` and select the correct
account from the drop-down menu, then click `Approve` or `Refuse`.

The accounting department is typically responsible for `posting journal
entries
<expenses/post>`. Once an expense report is approved, it can then be
posted.

### Invoice expenses

Once the quote has turned into a sales order, and the expense report has
been approved, it is time to invoice the customer. Go to `Sales app -->
To Invoice --> Orders to Invoice` to view the sales orders ready to be
invoiced.

Next, find the sales order related to the expense report, click into it,
and then click `Create Invoice` and a `Create invoices` pop-up window
appears. Select if the invoice is a `Regular invoice`, `Down payment
(percentage)`, or `Down
payment (fixed amount)` by clicking the radio button next to the
selection. For either down payment options, enter the amount (fixed or
percentage) in the `Down Payment Amount` field. Finally, click either
`create and view invoice` or `create invoice`.


---
## File: ./content/applications/finance/fiscal_localizations.md

  - show-content

# Fiscal localizations

## Fiscal localization packages

**Fiscal Localization Packages** are country-specific modules that
install pre-configured taxes, fiscal positions, chart of accounts, and
legal statements on your database. Some additional features, such as the
configuration of specific certificates, are also added to your
Accounting app, following your fiscal administration requirements.

<div class="note">

<div class="title">

Note

</div>

Odoo continuously adds new localizations and improves the existing
packages.

</div>

### Configuration

Odoo automatically installs the appropriate package for your company,
according to the country selected at the creation of the database.

<div class="important">

<div class="title">

Important

</div>

As long as you haven't posted any entry, you can still add and select
another package.

</div>

To install a new package, go to `Accounting --> Configuration --> Fiscal
Localization`, click on **Install More Packages**, and install your
country's module.

![Install the appropriate module as fiscal localization package in Odoo
Accounting.](fiscal_localizations/packages_modules.png)

Once done, select your country's package, and click on *Save*.

![Select your country's fiscal localization package in Odoo
Accounting.](fiscal_localizations/packages_selection.png)

### Use

These packages require you to fine-tune your chart of accounts according
to your needs, activate the taxes you use, and configure your
country-specific statements and certifications.

<div class="seealso">

\- `accounting/getting_started/initial_configuration/chart_of_accounts`
- `accounting/taxation/taxes/taxes`

</div>

## List of supported countries

Odoo Accounting can be used in many countries out of the box by
installing the appropriate module. Here is a list of all `fiscal
localization package <fiscal_localizations/packages>` that are available
on Odoo.

  - Algeria - Accounting
  - `Argentina - Accounting <fiscal_localizations/argentina>`
  - `Australian - Accounting <fiscal_localizations/australia>`
  - Austria - Accounting
  - `Belgium - Accounting <fiscal_localizations/belgium>`
  - Bolivia - Accounting
  - Brazilian - Accounting
  - Canada - Accounting
  - `Chile - Accounting <fiscal_localizations/chile>`
  - China - Accounting
  - `Colombia - Accounting <fiscal_localizations/colombia>`
  - Costa Rica - Accounting
  - Croatia - Accounting (RRIF 2012)
  - Denmark - Accounting
  - Dominican Republic - Accounting
  - Ecuador - Accounting
  - Ethiopia - Accounting
  - Finnish Localization
  - `France - Accounting <fiscal_localizations/france>`
  - Generic - Accounting
  - `Germany <fiscal_localizations/germany>`
      - Germany SKR03 - Accounting
      - Germany SKR04 - Accounting
  - Greece - Accounting
  - Guatemala - Accounting
  - Honduras - Accounting
  - Hong Kong - Accounting
  - Hungarian - Accounting
  - Indian - Accounting
  - `Indonesian - Accounting <fiscal_localizations/indonesia>`
  - Ireland - Accounting
  - Israel - Accounting
  - `Italy - Accounting <fiscal_localizations/italy>`
  - Japan - Accounting
  - Lithuania - Accounting
  - `Luxembourg - Accounting <fiscal_localizations/luxembourg>`
  - Maroc - Accounting
  - `Mexico - Accounting <fiscal_localizations/mexico>`
  - Mongolia - Accounting
  - `Netherlands - Accounting <fiscal_localizations/netherlands>`
  - New Zealand - Accounting
  - Norway - Accounting
  - OHADA - Accounting
  - Panama - Accounting
  - `Peru - Accounting <fiscal_localizations/peru>`
  - Poland - Accounting
  - Portugal - Accounting
  - Romania - Accounting
  - Saudi Arabia - Accounting
  - Singapore - Accounting
  - Slovak - Accounting
  - Slovenian - Accounting
  - South Africa - Accounting
  - `Spain - Accounting (PGCE 2008) <fiscal_localizations/spain>`
  - Swedish - Accounting
  - `Switzerland - Accounting <fiscal_localizations/switzerland>`
  - Thailand - Accounting
  - Turkey - Accounting
  - U.A.E. - Accounting
  - `UK - Accounting <fiscal_localizations/united_kingdom>`
  - Ukraine - Accounting
  - United States - Accounting
  - Uruguay - Accounting
  - Venezuela - Accounting
  - Vietnam - Accounting

<div class="toctree" data-titlesonly="">

fiscal\_localizations/argentina fiscal\_localizations/australia
fiscal\_localizations/belgium fiscal\_localizations/chile
fiscal\_localizations/colombia fiscal\_localizations/france
fiscal\_localizations/germany fiscal\_localizations/indonesia
fiscal\_localizations/italy fiscal\_localizations/luxembourg
fiscal\_localizations/mexico fiscal\_localizations/netherlands
fiscal\_localizations/peru fiscal\_localizations/spain
fiscal\_localizations/switzerland fiscal\_localizations/united\_kingdom

</div>


---
## File: ./content/applications/finance/documents.md

# Documents

**Odoo Documents** allows you to store, view and manage files within
Odoo.

You can upload any type of file (max 64MB per file on Odoo Online), and
organize them in various workspaces.

<div class="seealso">

\- [Odoo Documents: product page](https://www.odoo.com/app/documents)

</div>

## Workflow actions

Workflow actions are automated actions you can create and customize at
the level of each workspace. They appear next to a file whenever it
meets the criteria you set. That way you can, for example, add tags to a
file or move it to another workspace with a single click. Workflow
actions help you streamline the management of your documents and your
overall business operations.

### Create workflow actions

To create workflow actions, go to `Documents --> Configuration -->
Workspaces` and select the workspace where the action should apply.
Click on the *Actions* smart button, and then on *Create*.

![Workflow actions smart button in Odoo
Documents](documents/access-workflow-actions.png)

<div class="note">

<div class="title">

Note

</div>

An action applies to all *Child Workspaces* under the *Parent Workspace*
you selected.

</div>

<div class="tip">

<div class="title">

Tip

</div>

If you use the `developer mode <developer-mode>`, you can directly
access all your actions by going to `Documents --> Configuration -->
Actions`.

</div>

### Set the conditions

After naming your workflow action, you can set the conditions that
trigger the appearance of the action button on the right-side panel when
selecting a file.

There are three basic types of conditions you can set:

1.  **Tags**: you can both use the *Contains* and *Does not contain*
    conditions, meaning the files *must have* or *mustn't have* the tags
    set here.
2.  **Contact**: the files must be associated with the contact set here.
3.  **Owner**: the files must be associated with the owner set here.

![Example of a workflow action's basic condition in Odoo
Documents](documents/basic-condition-example.png)

<div class="tip">

<div class="title">

Tip

</div>

If you don't set any conditions, the action button appears for all files
located inside the selected workspace.

</div>

#### Advanced condition type: domain

<div class="important">

<div class="title">

Important

</div>

It is recommended to have some knowledge of Odoo development to properly
configure *Domain* filters.

</div>

To access the *Domain* condition, the `developer mode <developer-mode>`
needs to be activated. Once that's done, select the *Domain* condition
type, and click on *Add Filter*.

![Activating the domain condition type in Odoo
Documents](documents/activate-domain-condition.png)

To create a rule, you typically select a field, an operator, and a
value. For example, if you want to add a workflow action to all the PDF
files inside a workspace, set the field to *Mime Type*, the operator to
*contains*, and the value to *pdf*.

![Example of a workflow action's domain condition in Odoo
Documents](documents/domain-condition-example.png)

Click on *Add node* (plus-circle icon) and *Add branch* (ellipsis icon)
to add conditions and sub-conditions. You can then specify if your rule
should match *ALL* or *ANY* conditions. You can also edit the rule
directly using the *Code editor*.

![Add a node or a branch to a workflow action's condition in Odoo
Documents](documents/use-domain-condition.png)

### Configure the actions

Select the *Actions* tab to set up your action. You can simultaneously:

  - **Set Contact**: add a contact to the file, or replace an existing
    contact with a new one.

  - **Set Owner**: add an owner to the file, or replace an existing
    owner with a new one.

  - **Move to Workspace**: move the file to any workspace.

  - **Create**: create one of the following items attached to the file
    in your database:
    
    >   - **Product template**: create a product you can edit directly.
    >   - **Task**: create a Project task you can edit directly.
    >   - **Signature request**: create a new Sign template to send out.
    >   - **Sign directly**: create a Sign template to sign directly.
    >   - **Vendor bill**: create a vendor bill using OCR and AI to
    >     scrape information from the file content.
    >   - **Customer invoice**: create a customer invoice using OCR and
    >     AI to scrape information from the file.
    >   - **Vendor credit note**: create a vendor credit note using OCR
    >     and AI to scrape information from the file.
    >   - **Credit note**: create a customer credit note using OCR and
    >     AI to scrape information from the file.
    >   - **Applicant**: create a new HR application you can edit
    >     directly.

  - **Set Tags**: add, remove, and replace any number of tags.

  - **Activities - Mark all as Done**: mark all activities linked to the
    file as done.

  - **Activities - Schedule Activity**: create a new activity linked to
    the file as configured in the action. You can choose to set the
    activity on the document owner.

![Example of a workflow action Odoo
Documents](documents/workflow-action-example.png)


---
## File: ./content/applications/hr.md

  - nosearch

# Human resources

<div class="toctree">

hr/attendances hr/employees hr/payroll hr/recruitment

</div>


---
## File: ./content/applications/websites.md

  - nosearch

# Websites

<div class="toctree">

websites/website websites/ecommerce websites/livechat

</div>


---
## File: ./content/applications/inventory_and_mrp/manufacturing.md

  - nosearch

  - show-content

  - hide-page-toc

  - show-toc

# Manufacturing

**Odoo Manufacturing** helps manufacturers schedule, plan and process
manufacturing orders. With the work center control panel, put tablets on
the shop floor to control work orders in real-time and allow workers to
trigger maintenance operations, feedback loops, quality issues, etc.

<div class="seealso">

\- [Odoo Tutorials: MRP](https://www.odoo.com/slides/mrp-29) - [Odoo
Tutorials: Barcode Scanner](https://www.odoo.com/slides/barcode-30) -
`IoT Boxes (MES) </applications/productivity/iot>`

</div>

<div class="toctree" data-titlesonly="">

manufacturing/maintenance manufacturing/management
manufacturing/quality\_control

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory.md

  - nosearch

  - show-content

  - hide-page-toc

  - show-toc

# Inventory

**Odoo Inventory** is both an inventory application and a warehouse
management system, with an advanced barcode scanner app. Learn how to
manage lead times, automate replenishments, and configure advanced
routes like drop-shipping, cross-docks, etc.

<div class="seealso">

\- [Odoo Tutorials: Inventory](https://www.odoo.com/slides/inventory-24)
- [Odoo Tutorials: Barcode
Scanner](https://www.odoo.com/slides/barcode-30)

</div>

<div class="toctree" data-titlesonly="">

inventory/management inventory/shipping inventory/routes
inventory/barcode

</div>


---
## File: ./content/applications/inventory_and_mrp/manufacturing/management.md

  - nosearch

# Manufacturing management

<div class="toctree" data-titlesonly="">

management/bill\_configuration management/kit\_shipping
management/product\_variants management/sub\_assemblies
management/subcontracting management/routing\_kit\_bom
management/use\_mps management/using\_work\_centers
management/work\_center\_time\_off management/scrap\_manufacturing
management/manufacturing\_backorders

</div>


---
## File: ./content/applications/inventory_and_mrp/manufacturing/management/scrap_manufacturing.md

# Scrap during manufacturing

During the manufacturing process, the need to scrap manufacturing
components or finished products may arise. This can be necessary if a
component or product is damaged, or unusable for any other reason.

By default, scrapping a component or finished product removes it from
physical inventory and places it in a virtual location titled *Virtual
Locations/Scrap*. A virtual location is **not** a physical space, but
rather a designation in Odoo that is used to track items that are no
longer in physical inventory.

<div class="seealso">

For more information about virtual locations, see the documentation
about the different types of `locations
<inventory/management/difference-warehouse-location>`.

</div>

Odoo *Manufacturing* allows for both components and finished products to
be scrapped within a manufacturing order. The specific type of item that
can be scrapped during a manufacturing order depends on the stage of the
manufacturing process.

<div class="tip">

<div class="title">

Tip

</div>

Scrap orders can be viewed by navigating to `Inventory --> Operations
--> Scrap`. Each scrap order shows the date and time the order was
created, along with the product and quantity that was scrapped.

To view the total quantity of each item scrapped, navigate to `Inventory
-->
Configuration --> Locations`, then remove the `Internal` filter from the
`Search...` bar to display all virtual locations. From the list, select
the `Virtual Locations/Scrap` location.

</div>

## Scrap manufacturing components

To scrap components during the manufacturing process, begin by
navigating to `Manufacturing --> Manufacturing Orders`, then select a
manufacturing order or click `Create` to configure a new one. If a new
manufacturing order is created, select a product from the `Product`
drop-down menu, then click `Confirm`.

Once the manufacturing order has been confirmed, a `Scrap` button
appears at the top of the page. Click the button and a `Scrap` pop-up
window appears.

![The scrap button on a manufacturing
order.](scrap_manufacturing/scrap-button.png)

From the `Product` drop-down menu on the `Scrap` pop-up window, select
the component that is being scrapped, then enter the quantity in the
`Quantity` field. Finally, click `Done` to scrap the component.

![The Scrap pop-up window.](scrap_manufacturing/scrap-pop-up.png)

<div class="important">

<div class="title">

Important

</div>

Before clicking `Mark As Done` on a manufacturing order, only the
components of the finished product can be scrapped, **not** the finished
product itself. This is because Odoo recognizes that the finished
product cannot be scrapped before it has been manufactured.

</div>

After scrapping a component, continue the manufacturing process using
the required quantity of the component that was scrapped. The on-hand
stock count for the component that was scrapped updates to reflect both
the scrapped quantity and the quantity consumed during manufacturing.

<div class="example">

If the manufacturing of a table requires four units of a table leg, and
two units of the table leg were scrapped during the manufacturing
process, the total quantity of table legs consumed will be six: four
units used to manufacture the table plus two units scrapped.

</div>

## Scrap components from tablet view

Components can also be scrapped from the manufacturing tablet view. To
do so, select the `Work Orders` tab on a manufacturing order, then click
the `📱 (tablet view)` icon for a work order.

![The tablet view icon for a work
order.](scrap_manufacturing/tablet-view-icon.png)

With tablet view open, click the `☰ (menu)` button at the top left of
the screen, then select the `Scrap` button on the `Menu` pop-up window.
The `Scrap` pop-up window then appears.

![The Scrap button on the Menu pop-up window of the manufacturing tablet
view.](scrap_manufacturing/tablet-scrap-button.png)

Finally, select a component from the `Product` drop-down menu and enter
the quantity being scrapped in the `Quantity` field. Click `Done` to
scrap the component.

## Scrap finished products

Odoo also allows for finished products to be scrapped from a
manufacturing order once the order is completed. After clicking `Mark as
Done`, click the `Scrap` button to make the `Scrap` pop-up window
appear.

Since the components have been consumed to create the finished product,
they will no longer appear in the `Product` drop-down menu. Instead, the
finished product will be available as an option. Select the finished
product and enter the quantity to be scrapped in the `Quantity` field.
Click `Done` to scrap the finished product.

The on-hand stock count for the product that was scrapped will update to
reflect both the scrapped quantity and the quantity produced during
manufacturing.

<div class="example">

If five units of a chair were manufactured, but two units were scrapped
after manufacturing was completed, then the on-hand inventory of the
chair will increase by three: five units manufactured minus two units
scrapped.

</div>


---
## File: ./content/applications/inventory_and_mrp/manufacturing/management/subcontracting.md

# Subcontract your Manufacturing

Outsourcing a portion of some or all your company’s manufacturing needs
is not easy. To make it work right, you have to:

  - Manage the inventory of raw materials at your subcontractor;
  - Ship new materials to your subcontractors based on your forecasted
    demand;
  - Keep track of manufacturing operations done at the subcontractor
    location;
  - Control incoming goods quality;
  - Control subcontractors bills.

Here is an example of subcontracting the manufacturing of “C”, which is
produced out of raw materials “A” and “B”.

![](subcontracting/subcontracting_01.png)

With its subcontracting feature, Odoo helps you handle this flow easily.

## Configuration

To use the subcontracting feature, go to `Manufacturing
--> Configuration --> Settings` and tick the box *Subcontracting*.

![](subcontracting/subcontracting_02.png)

To define if a product must be subcontracted, use a *Bill of Materials
(BoM)* of type *Subcontracting*.

To create a new *BoM*, go to `Manufacturing --> Master
Data --> Bill of Materials` and hit create. Then, list the components
your subcontractor needs to manufacture the product. For costing
purposes, you might want to register all the components, even the ones
that are sourced directly from the subcontractor.

Once you have set the *BoM Type* to *Subcontracting*, specify one or
several subcontractors.

![](subcontracting/subcontracting_03.png)

## Basic Subcontracting Flow

To let your subcontractor know how many products you need, create and
send them purchase orders (PO). To do so, open the *Purchase* app and
create a new one. Be sure to send the PO to a vendor that is defined as
a subcontractor on the *BoM*.

![](subcontracting/subcontracting_04.png)

Once the *PO* is validated (1), a pending receipt is created. When the
products are received, validate the receipt (2), with the actual
quantity received. Then Odoo automatically created several inventory
moves:

  - Consume the components at the subcontractor’s location, based on the
    *BoM* (3);
  - Produce finished goods at the subcontractor’s location (4);
  - Move products from the subcontractor’s location to YourCompany
    through the validated receipt (5).

Of course, Odoo does all the transactions for you, automatically. Simply
control the vendor bill with the usual matching process with the
purchase order.

<div class="note">

<div class="title">

Note

</div>

The *PO* is optional. If you create a receipt manually, with the right
subcontractor, Odoo still performs all the moves. Useful if the
subcontractor does not bill a fixed price per item, but rather the time
and materials used.

</div>

## Inventory Valuation

The cost of the manufactured product “C” is defined as:

**C = A + B + s**

With:

  - **A**: Cost of raw materials coming from YourCompany;

  -   - **B**: Cost of raw materials sourced directly from the  
        subcontractor;

  - **s**: Cost of the subcontracted service.

Sending raw materials to your subcontractors (**A**) does not impact the
inventory valuation, the components still belonging to your company. To
manage this, the *Subcontracting Location* is configured as an *Internal
Location* so that the components are still valued in the inventory.

Then, the vendor price set on the product C form has to be what has to
be paid to the subcontractor for his parts and service time: **B + s**.
The product cost has to be: **A + B + s**, how much the product is
valued in the accounting.

Finally, the subcontractor bill matches the purchase order, with the
proposed price coming from the finished products C.

<div class="note">

<div class="title">

Note

</div>

If managing the replenishment of raw materials **B** at your
subcontractor’s location is not needed, simply include the cost of **B**
in the subcontractor’s price **s** and remove the products *B* from the
*BoM*.

</div>

## Traceability

In case the products received from the subcontractor contain tracked
components, their serial or lot numbers need to be specified during the
receipt.

On the receipt of the subcontracted product, a *Record Components*
button appears when necessary. Click on it to open a dialog and record
the serial/lot numbers of the components. If the finished product is
also tracked, its serial/lot number can be registered here too.

![](subcontracting/subcontracting_05.png)

For audit purposes, it is possible to check the lot numbers recorded on
a receipt by using the icon on the right of the finished products:

![](subcontracting/subcontracting_06.png)

## Automate Replenishment of Subcontractors

To manage the resupply of your subcontractor, activate *Multi-locations*
in `Inventory --> Configuration -->
Configuration`. Then, the inventory at the subcontractor location can be
tracked.

It is possible to resupply subcontractors by sending products from the
company locations, or by sending products from another supplier to the
subcontractors.

### Replenishment from the warehouse

Resupplying subcontractors manually is the simplest approach. To do so,
create delivery orders in which the subcontractor is set as a delivery
address and fill the components to deliver.

To automate the subcontractors’ replenishment propositions, there are
two approaches:

  - Reordering rules;
  - Replenish on order flow.

For the first one, just define a reordering rule on the subcontracting
location, with a minimum and maximum inventory level. When the
reordering rule is triggered, a delivery order is created to ship the
components to the subcontractor.

![](subcontracting/subcontracting_07.png)

The second approach is to use a “pull” flow. Here, the demand in the
finished product (real demand or forecasted one through the Master
Production Schedule) triggers the replenishment of the subcontractor. To
do so, select the route *Resupply Subcontractor on Order* on the wanted
components.

![](subcontracting/subcontracting_08.png)

### Replenishment from another supplier

When purchasing items to another supplier, it is possible to ask him to
deliver the subcontractor directly. To do so, activate the *Drop
Shipping* feature in `Purchase --> Configuration -->
Configuration`.

Now, set the *Dropship* option in the *Deliver To* field of the *Other
Information* tab. Then, provide the address of the subcontractor for the
shipping.

![](subcontracting/subcontracting_09.png)

That way, the supplier can ship items directly and you simply receive
and pay the bill. However, it is still required to validate receipts for
the subcontractor.

![](subcontracting/subcontracting_10.png)

### Quality Control

Controlling the quality of the products manufactured by subcontractors
is possible thanks to the Odoo Quality app. Quality checks can be made
on a manufacturing step but, because the manufacturing process is
handled by an external party, it can be defined on the product
reception.

![](subcontracting/subcontracting_11.png)

To create a quality check at the receipt, open the *Quality* app and
create a new *Control Point* on the reception.

![](subcontracting/subcontracting_12.png)

By doing so, a quality check is automatically created each time a
finished product is received.


---
## File: ./content/applications/inventory_and_mrp/manufacturing/management/product_variants.md

# Managing BoMs for product variants

Odoo allows one bill of materials (BoM) to be used for multiple variants
of the same product. Having a consolidated `BoM (bill of materials)` for
a product with variants saves time by preventing the need to manage
multiple `BoMs (bills of materials)`.

## Activate product variants

To activate the product variants feature, navigate to `Inventory app -->
Configuration --> Settings`, and scroll down to the `Products` section.
Then, click the checkbox to enable the `Variants` option. After that,
click `Save` to apply the setting.

For more information on configuring product variants, refer to the
`product variants
<../../../sales/sales/products_prices/products/variants>` documentation.

![Selecting "Variants" from Inventory app
settings.](product_variants/product-variants-variants-settings.png)

## Create custom product attributes

Once the product variants feature is activated, create and edit product
attributes on the `Attributes` page.

The `Attributes` page is accessible either from `Inventory app -->
Configuration --> Settings` by clicking the `Attributes` button, or by
clicking `Inventory app --> Configuration --> Attributes`.

Once on the `Attributes` page, either click into an existing attribute,
or click `Create` to create a new one. Clicking `Create` reveals a new,
blank form for customizing an attribute. For an existing attribute,
click `Edit` on its form to make changes.

Assign an `Attribute Name`, and choose a category from the `Category`
field's drop-down menu. Then, select the desired options next to the
`Display Type` and `Variants Creation Mode` fields. Once the desired
options are selected, click `Add a line` under the `Attribute Values`
tab to add a new value.

<div class="tip">

<div class="title">

Tip

</div>

Included on the `Value` row is a `Is custom value` checkbox. If
selected, this value will be recognized as a custom value, which allows
customers to type special customization requests upon ordering a custom
variant of a product.

</div>

<div class="example" data-align="center" alt="Product variant attribute configuration screen.">

.. image:: product\_variants/product-variants-attribute.png

</div>

Once all desired `Values` have been added, click `Save` to save the new
attribute.

## Add product variants on the product form

Created attributes can be applied on specific variants for particular
products. To add product variants to a product, navigate to the product
form by going to `Inventory app -->
Products --> Products`. To make changes to the product, click `Edit`.
Then, click the `Variants` tab.

Under the `Attribute` header, click `Add a line` to add a new attribute,
and select one to add from the drop-down menu.

Then, under the `Values` header, click the drop-down menu to choose from
the list of existing values. Click on each desired value to add them,
and repeat this process for any additional attributes that should be
added to the product.

Once finished, click `Save` to save changes.

![Product form variants tab with values and
attributes.](product_variants/product-variants-product-form.png)

<div class="tip">

<div class="title">

Tip

</div>

`BoM (bill of materials)` products with multiple variants that are
manufactured in-house should either have a **0,0 reordering rule** set
up, or have their replenishment routes set to *Replenish on Order
(MTO)*.

</div>

## Apply BoM components to product variants

Next, create a new `BoM (bill of materials)`. Or, edit an existing one,
by going to `Manufacturing app --> Products --> Bills of Materials`.
Then, click `Create` to open a new `Bills of Materials` form to
configure from scratch.

Add a product to the `BoM (bill of materials)` by clicking the drop-down
menu in the `Product` field and selecting the desired product.

Then, add components by clicking `Add a line` under the `Component`
section of the `Components` tab, and choosing the desired components
from the drop-down menu.

Choose the desired values in the `Quantity` and `Product Unit of
Measure` columns. Then, choose the desired values in the `Apply on
Variants` column.

<div class="note">

<div class="title">

Note

</div>

The `Apply on Variants` option to assign components to specific product
variants on the `BoM (bill of materials)` is available once the
`Variants` setting is activated from the `Inventory` application. If the
`Apply on Variants` field is not immediately visible, activate it from
the additional options menu (three-dots icon, to the right of the header
row).

</div>

!["Apply on Variants" option on the additional options
menu.](product_variants/product-variants-apply-on-variants.png)

Each component can be assigned to multiple variants. Components with no
variants specified are used in every variant of the product. The same
principle applies when configuring operations and by-products.

When defining variant `BoMs (bills of material)` by component
assignment, the `Product Variant` field in the main section of the `BoM
(bill of materials)` should be left blank. This field is *only* used
when creating a `BoM (bill of materials)` specifically for one product
variant.

When all desired configurations have been made to the `BoM (bill of
materials)`, click `Save` at the top of the form to save changes.

<div class="tip">

<div class="title">

Tip

</div>

For components that only apply for specific variants, choose which
operations the components should be consumed in. If the `Consumed in
Operation` column is *not* immediately visible, activate it from the
additional options menu (three-dots icon, to the right of the header
row).

</div>

## Sell and manufacture variants of BoM products

To sell and manufacture variants of `BoM (bill of materials)` products
to order, navigate to `Sales app --> Create` to create a new quotation.

### Sell variant of BoM product

Once on the blank `Quotation` form, click the drop-down next to the
`Customer` field to add a customer.

Then, under the `Order Lines` tab, click `Add a product`, and select the
previously-created `BoM (bill of materials)` product with variants from
the drop-down menu. Doing so reveals a `Configure a product` pop-up.

From the pop-up window, click the desired attribute options to configure
the correct variant of the product to manufacture. Then, click the green
`+` or `-` icons next to the <span class="title-ref">1</span> to change
the quantity to sell and manufacture, if desired.

![Configure a product pop-up for choosing variant
attributes.](product_variants/product-variants-variant-popup.png)

Once all the specifications have been chosen, click `Add`. This will
change the pop-up to a second `Configure` pop-up, where available
optional products will appear, if they have been created previously.

Once ready, click `Confirm` to close the pop-up.

Then, click `Save` to save all changes, and click `Confirm` at the top
of the `Quotation` form to create and confirm a new sales order (SO).

### Manufacture variant of BoM product

Once the `SO (sales order)` is confirmed, a `Manufacturing` smart button
appears at the top of the `SO (sales order)` form. Click the
`Manufacturing` smart button to open the `Manufacturing Order` form.

On this form, under the `Components` tab, the appropriate components for
the chosen variant are listed. And, depending on the variant, different
components will be listed. To see any mandatory or optional `Operation`
steps, click the `Work Orders` tab.

To enter the tablet view work order screen, click the `tablet icon` to
the right of the row for the desired operation to be completed.

From the tablet view, click `Mark as Done` as the operation progresses
to complete the operation steps.

Alternatively, click the `Mark as Done` button at the top of the
manufacturing order form to complete the order.

![Manufacturing order for variant of BoM
product.](product_variants/product-variants-manufacturing-order.png)

Then, navigate back to the `SO (sales order)` via the breadcrumbs at the
top of the page.

Now that the product has been manufactured, click the `Delivery` smart
button to deliver the product to the customer. From the `Delivery Order`
form, click `Validate`, then click `Apply` to deliver the product.

To finish the sale, click back to the `SO (sales order)` via the
`breadcrumbs` at the top of the page again. Then, click `Create Invoice`
followed by `Create
Invoice` again to invoice the customer for the order.


---
## File: ./content/applications/inventory_and_mrp/manufacturing/management/use_mps.md

# Use the Master Production Schedule

<div id="manufacturing/management/use_mps">

The Master Production Schedule (MPS) is a valuable tool to plan your
production based on your demand forecast.

</div>

## Configuration

Go to the `Manufacturing app --> Configuration --> Settings` and
activate the Master Production Schedule feature before hitting save.

![image](use_mps/use_mps_01.png)

<div class="tip">

<div class="title">

Tip

</div>

In the manufacturing settings, you can define the time range of your MPS
(month/week/day) and the number of periods you want to display.

</div>

Now, go in `Planning --> Master Production Schedule` and click on add a
product. You can now define your safety stock target (= the stock you
want to have on hand at the end of the period) and the minimum and
maximum quantities to replenish.

![image](use_mps/use_mps_02.png)

<div class="tip">

<div class="title">

Tip

</div>

The products are ordered in the MPS based on their sequence. You can
rearrange that sequence by going on the list of your products and
reorganize them with drag and drop.

</div>

![image](use_mps/use_mps_03.png)

In the MPS view, you can decide which information you would like to show
by clicking on *rows*. Some fields can be added to the view, such as
*Actual demand*, which will show which quantity of products has already
been ordered for the period, or *Available to Promise*, which allows you
to know what can still be sold during the period (what you plan to
replenish - what is already sold during the period). You can also decide
to hide some information if it isn’t necessary.

![image](use_mps/use_mps_04.png)

## Estimate your demand and launch replenishment

The next step is to estimate the demand for the period. This estimation
should be entered in the row *Demand Forecast*. You can easily, at any
time, compare the demand forecast with the actual demand (= confirmed
sales). The demand forecast for a finished product will impact the
indirect demand for its components.

![image](use_mps/use_mps_05.png)

Then, the quantity to replenish for the different periods will be
automatically computed. The replenishments you are supposed to launch
based on your lead times (vendor lead time or manufacturing lead time)
are displayed in green. You can now launch the replenishment by clicking
on the replenish button.

Depending on the configuration of the product (buy vs. manufacture),
requests for quotations or manufacturing orders will be created. You can
easily access those by clicking on the *Actual Replenishment* cell.

![image](use_mps/use_mps_06.png)

![image](use_mps/use_mps_07.png)

In case you manually edit the *To replenish* quantity, a small cross
will appear on the left. In case you want to go back to the
automatically computed value given by Odoo, you can click the cross.

![image](use_mps/use_mps_08.png)

## Cells color signification

The cells, which are part of the *To replenish* line, can take different
colors depending on the situation:

  - **Green**: quantity of products which should be replenished to reach
    the expected safety stock considering the demand forecast and the
    indirect demand forecast.
  - **Grey**: replenishment order has already been generated, and its
    quantity still matches current data.
  - **Red**: replenishment order has already been generated, and its
    quantity was too high considering current data.
  - **Orange**: replenishment order has already been generated, and its
    quantity was too low considering current data.

The *Forecasted stock* line can also contain red cells, which means the
stock will be negative during the period in question.

### What if I have underestimated the demand?

You can still increase the demand forecast. It will impact the quantity
to replenish. The cell will become orange, and you’ll be able to launch
a new replenishment.

### What if I have overestimated the demand?

You can decrease the demand forecast. The cell will become red to inform
you that you’ve ordered more than planned. If you’re still able to do
it, you can cancel some RFQ or MO manually.

### What if I wrongly added a product to the MPS?

You can easily remove a product from the MPS by clicking the small bin
on the right of its name.

![image](use_mps/use_mps_09.png)


---
## File: ./content/applications/inventory_and_mrp/manufacturing/management/kit_shipping.md

# Sell sets of products as kits

A *kit* is a set of components that are delivered without first being
assembled or mixed. *Kits* are described in Odoo using *Bills of
Materials*. There are two basic ways to configure *kits*, depending on
how the stock of the kit product is to be managed. In either case, both
the *Inventory* and *Manufacturing* apps must be installed.

## Manage Stock of Component Products

If you want to assemble kits as they are ordered, managing stock of the
kit components only, you will use a *Kit BoM* without a manufacturing
step.

A product using a *Kit BoM* will appear as a single line item on a
quotation and sales order, but will generate a delivery order with one
line item for each of the components of the kit. In the examples below,
the first image shows a sales order for the kit *Custom Computer Kit*,
while the second image shows the corresponding delivery order.

![image](kit_shipping/kit_shipping_01.png)

![image](kit_shipping/kit_shipping_02.png)

## Configuration

From the *Products menu* in either the *Inventory* or *Manufacturing*
app, create each component product as you would with any other product,
then create the top-level, or kit product. The kit product should have
only the *route Manufacture* set, in the *Inventory tab*. Because you
cannot track the stock of kit products, the *Product Type* should be set
to Consumable. Because a kit product cannot be purchased, then, *Can be
Purchased* should be unchecked.

All other parameters on the kit product may be modified according to
your preference. The component products require no particular
configuration.

![image](kit_shipping/kit_shipping_03.png)

Once the products are configured, create a *bill of materials* for the
kit product. Add each component and its quantity. Select the *BoM Type
Ship this product as a set of components*. All other options may be left
with their default values.

![image](kit_shipping/kit_shipping_04.png)

## Manage Stock of Kit Product and Component Products

If you want to manage stock of the *top-level kit product*, you will use
a standard *BoM* with a manufacturing step instead of a *Kit BoM*. When
using a standard BoM to assemble kits, a *manufacturing order* will be
created. The *manufacturing order* must be registered as completed
before the kit product will appear in your stock.

## Configuration

On the kit product, select the *route Manufacture*. You may also select
*Make to Order*, which will create a *manufacturing order* whenever a
sales order is confirmed. Select the product type *Storable Product* to
enable stock management.

![image](kit_shipping/kit_shipping_05.png)

When you create the *bill of materials*, select the BoM Type
*Manufacture this product*. The assembly of the kit will be described by
a *manufacturing order* rather than a packing operation.

![image](kit_shipping/kit_shipping_06.png)


---
## File: ./content/applications/inventory_and_mrp/manufacturing/management/using_work_centers.md

# Manage work orders using work centers

Odoo Manufacturing allows for work orders to be carried out at specific
work centers. When a manufacturing order is created for a product, any
work orders listed in the `Operations` tab of the product bill of
materials (BoM) will be automatically created as well and assigned to
the specified work center. Work orders can be managed in the
`Manufacturing` module by selecting `Operations --> Work Orders`.

In order to use work centers, the `Work Orders` feature must first be
enabled. To do so, go to the `Manufacturing` module, select
`Configuration --> Settings`, and activate the checkbox next to `Work
Orders`. Work centers can then be created and managed by selecting
`Configuration --> Work Centers`.

## Create a work center

Within the `Manufacturing` module, select `Configuration --> Work
Centers
--> Create`. The work center form can then be filled out as follows:

  - `Work Center Name`: give the work center a concise name that
    describes the type of operations it will be used for
  - `Alternative Workcenters`: specify an alternative work center for
    operations to be carried out at if the main work center is not
    available
  - `Code`: assign the work center a reference code
  - `Working Hours`: define the number of hours that the work center can
    be in use each week
  - `Company`: select the company that the work center belongs to

![An example of a fully configured work center
form.](using_work_centers/work-center-form.png)

### Set standards for work center productivity

The `General Information` tab on the work center form allows for
productivity goals to be assigned to a work center:

  - `Time Efficiency`: used to calculate the expected duration of a work
    order at the work center; for example, if a work order normally
    takes one hour and the efficiency is set to 200%, the work order
    will take 30 minutes
  - `Capacity`: the number of operations that can be performed at the
    work center simultaneously
  - `OEE Target`: the target for efficiency at the work center
  - `Time before prod.`: setup time required before work can commence
  - `Time after prod.`: breakdown or cleanup time required after work is
    finished
  - `Cost per hour`: the cost of operating the work center for one hour
  - `Analytic Account`: the account where the cost of the work center
    should be recorded

![The general information tab of the work center
form.](using_work_centers/work-center-general-information.png)

### Assign equipment to a work center

Using the `Equipment` tab, it is possible for specific pieces of
equipment to be assigned to a work center. The following information
will be displayed for each piece of equipment added:

  - `Equipment Name`: the name of the piece of equipment
  - `Technician`: the technician responsible for servicing the equipment
  - `Equipment Category`: the category the equipment belongs to
  - `MTBF`: mean time between failures; the average time that the piece
    of equipment will operate before failing
  - `MTTR`: mean time to recovery; the average time it takes for the
    equipment to become fully operational again
  - `Est. Next Failure`: an estimate of when the next equipment failure
    will occur

![The equipment tab of the work center
form.](using_work_centers/work-center-equipment.png)

<div class="note">

<div class="title">

Note

</div>

`MTBF`, `MTTR`, and `Est. Next Failure` are all calculated automatically
based on past failure data, if any exists.

</div>

### Integrate IoT devices

The `IoT Triggers` tab enables the integration of `IoT (Internet of
Things)` devices with a work center:

  - `Device`: specifies the IoT device to be triggered
  - `Key`: the security key for the device
  - `Action`: the IoT device action triggered

![The IoT Triggers tab of the work center
form.](using_work_centers/work-center-iot.png)

## Use case: configure an alternative work center

When a work center is at capacity, it cannot accept any new work orders.
Instead of waiting for the work center to become available, it is
possible to specify an alternative work center where surplus work orders
should be carried out.

Begin by creating a new work center. Configure the `Equipment` tab so
that it has all of the same equipment as the main work center. This will
ensure that the same tasks can be carried out at both work centers.
Navigate to the main work center and include the new work center in the
`Alternative Workcenters` selection field.

Now, create a new manufacturing order that uses the main work center for
one of its operations. The main work center will automatically be
selected for the operation in the `Work Orders` tab. After confirming
the manufacturing order, click the `Plan` button that appears at the top
left of the form.

![Click the plan button to automatically select an available work
center.](using_work_centers/manufacturing-order-plan-button.png)

If the main work center is at capacity, the work center selected for the
operation will be automatically changed to the alternative work center.

![The alternative work center is automatically
selected.](using_work_centers/automatic-work-center-selection.png)

## Monitor work center performance

Performance for an individual work center can be viewed by selecting
`Configuration --> Work Centers`, and clicking on a work center. A
variety of metrics showing work center performance can be viewed at the
top right of the form:

  - `OEE`: overall effective efficiency, the percentage of time that the
    work center has been fully productive
  - `Lost`: the amount of time lost due to work stoppages
  - `Load`: the amount of time it will take to complete the current
    workload
  - `Performance`: the real duration of work time, shown as a percentage
    of the expected duration


---
## File: ./content/applications/inventory_and_mrp/manufacturing/management/bill_configuration.md

# Create a bill of materials (BoM)

A *bill of materials* (or *BoM*) is a document that defines the quantity
of each component required to manufacture (or deliver) a finished
product. It can also include various operations types, steps, and
instructions for the individual guidelines needed to complete a
production process.

In Odoo *Manufacturing*, multiple `BoMs (Bills of Materials)` can be
linked to a product, so even product variants can have their own
specific `BoMs (Bills of Materials)`.

Correctly setting up a `BoM (Bill of Materials)` helps optimize the
manufacturing process, and saves time.

## Set up a BoM

`BoMs (Bills of Materials)` can be set up with or without operations
steps or instructions, and can include as many or as few components as
needed. The simplest setup is one without operations or instructions. In
that case, the production is solely managed with *manufacturing orders*
(MOs).

To create a `BoM (Bill of Materials)`, navigate to `Manufacturing app
-->
Products --> Bills of Materials`, and click `Create`. Then, in the
`Product` field, choose the product that will be associated with the
`BoM (Bill of Materials)`.

![Bill of materials creation
screen.](bill_configuration/bill-configuration-bom-creation.png)

There are three `BoM Types` that can be chosen for any bill of
materials:

1.  `Manufacture this product` indicates that this product is
    manufactured in-house, from start to finish using the components
    listed on the `BoM (Bill of Materials)`.
2.  `Kits` are sets of unassembled components that may be sold as
    products, and are useful for managing more complex `BoMs (Bills of
    Materials)`.
3.  `Subcontracting` outsources the production of some (or all)
    components or products to outside manufacturers. This feature needs
    to be enabled in `Manufacturing app -->
    Configuration --> Settings`, under the `Operations` section.

<div class="note">

<div class="title">

Note

</div>

A `BoM (Bill of Materials)` can also be created directly from the `BoM
(Bill of
Materials)` smart button on the product template, in which case the
`Product` field is pre-filled.

</div>

The most common `BoM Type` is `Manufacture this product`. Once the `BoM
Type` is chosen, click `Add a Line` to add all the `Components` that go
into the production of the final product, as well as the `Quantity` of
each component. Finally, click `Save` to finish creating the `BoM (Bill
of Materials)`.

<div class="tip">

<div class="title">

Tip

</div>

New components can be added, even during production, directly from the
`BoM (Bill of
Materials)`. After selecting `Add a line`, create the new component and
select `Create` or `Create and Edit`. Components can also be created by
going to `Manufacturing app --> Products --> Products`, and clicking
`Create`.

</div>

### Specify a BoM for a product variant

<div class="important">

<div class="title">

Important

</div>

To assign *product variants* to `BoMs (Bills of Materials)`, the feature
must be enabled in `Inventory --> Configuration --> Settings`, under the
`Products` section by selecting `Variants` and clicking `Save`.

</div>

`BoMs (Bills of Materials)` can also be assigned to specific *product
variants*, with two setup options available to choose from.

![Bill of materials product variants and apply on variants
options.](bill_configuration/bill-configuration-product-variants.png)

The first method is to create one `BoM (Bill of Materials)` per product
variant, by specifying the `Product Variant` every time a new `BoM (Bill
of Materials)` is created.

The second method is to create **one** master `BoM (Bill of Materials)`
that contains all components, and specify which variant each component
applies to in the `Apply on Variants` column.

<div class="seealso">

[Managing with Product
Variants](https://www.odoo.com/slides/slide/manufacturing-with-product-variants-2805)

</div>

<div class="note">

<div class="title">

Note

</div>

The `Apply on Variants` column is hidden by default and can be accessed
by clicking on the `Additional Options` menu icon at the right of the
`Components` tab.

</div>

## Set up operations steps

Some `BoMs (Bills of Materials)` require multiple operations and steps
during the manufacturing process. To create `Operations` on a `BoM (Bill
of Materials)`, first enable the `Work Orders` feature in `Manufacturing
app --> Configuration
--> Settings --> Operations`.

![An example of a Bill of Materials operation and the steps creation
tab.](bill_configuration/bill-configuration-create-operation.png)

When creating a new `BoM (Bill of Materials)`, click the `Operations`
tab and click `Add a line` to add a new operation.

In the `Create Operations` box, give the operation a name, and specify
the `Work
Center` and the `Default Duration` settings. Under the `Work Sheet` tab,
the type of `Work Sheet` can also be chosen, if assembly instructions
need to be attached.

The `Work Sheet` types that can be added are: `Text` (with a
`Description`); `PDF` files; and `Google Slide` presentations. When all
the information has been filled out, select `Save & Close`.

![Bill of materials create operations popup on operations
tab.](bill_configuration/bill-configuration-operations-popup.png)

## Add by-products to a BoM

A *by-product* is a residual product that is created during production
of a `BoM (bill of
materials)`. Unlike the finished product, there can be more than one
by-product on a `BoM
(Bill of Materials)`.

To add by-products to a `BoM (Bill of Materials)`, first enable the
`By-Products` feature in `Manufacturing app --> Configuration -->
Settings --> Operations`.

Once the feature is enabled, by-products can be added to a `BoM (Bill of
Materials)` from the `By-products` tab by clicking `Add a line`. The
by-product can be named, its `Quantity` specified, and a `Unit of
Measure` chosen.

If the `BoM (Bill of Materials)` has `Operations` steps, specify exactly
which operation the by-product is produced from in the `Produced in
Operation` field. Finally, click `Save` to save changes.

<div class="seealso">

\-
`/applications/inventory_and_mrp/manufacturing/management/kit_shipping`
-
`/applications/inventory_and_mrp/manufacturing/management/product_variants`
-
`/applications/inventory_and_mrp/manufacturing/management/routing_kit_bom`

</div>


---
## File: ./content/applications/inventory_and_mrp/manufacturing/management/manufacturing_backorders.md

# Manufacturing backorders

In some cases, the full quantity of a manufacturing order cannot be
produced immediately. When this happens, Odoo *Manufacturing* allows for
the manufacturing of partial quantities of the order and creates a
*backorder* for the remaining amount.

In the *Manufacturing* app, creating a backorder splits the original
manufacturing order into two orders. The reference tag for each order is
the tag used for the original order, followed by a hyphen and then an
additional number to indicate that it's a backorder.

<div class="example">

A company creates a manufacturing order with the reference tag
*WH/MO/00175*, for 10 units of *Product X*. After starting work on the
manufacturing order, the employee working the production line realizes
there are only enough components in stock to produce five units of the
product.

Instead of waiting for additional stock of the components, they
manufacture five units and create a backorder for the remaining five.
This splits the manufacturing order into two separate orders:
*WH/MO/00175-001* and *WH/MO/00175-002*.

Order *001* contains the five units that have been manufactured, and is
immediately marked as `Done`. Order *002* contains the five units that
still need to be manufactured and is marked as `In Progress`. Once the
remaining components are available, the employee returns to order *002*
and manufactures the remaining units before closing the order.

</div>

## Create a manufacturing backorder

To create a backorder for part of a manufacturing order, begin by
navigating to `Manufacturing --> Operations --> Manufacturing Orders`.
Select a manufacturing order with a quantity of two or more or create
one by clicking `Create`.

If a new manufacturing order is created, select a product from the
`Product` drop-down menu and enter a quantity of two or more in the
`Quantity` field, then click `Confirm` to confirm the order.

After manufacturing the quantity that is being produced immediately,
enter that number in the `Quantity` field at the top of the
manufacturing order.

![The quantity field on a manufacturing
order.](manufacturing_backorders/quantity-field.png)

Next, click `Validate`, and a `You produced less than initial demand`
pop-up window appears, from which a backorder can be created. Click
`Create Backorder` to split the manufacturing order into two separate
orders, with the reference tags *WH/MO/XXXXX-001* and *WH/MO/XXXXX-002*.

![The Create Backorder button on the "You produced less than initial
demand" pop-up
window.](manufacturing_backorders/create-backorder-button.png)

Order *001* contains the items that have been manufactured, and is
closed immediately. Order *002* is the backorder that contains the items
that have yet to be manufactured, and remains open, to be completed at a
later date.

Once the remaining units can be manufactured, navigate to `Manufacturing
-->
Operations --> Manufacturing Orders`, and then select the backorder
manufacturing order. If all of the remaining units are manufactured
immediately, simply click `Validate` to close the order.

If only some of the remaining units are manufactured immediately, create
another backorder for the remainder by following the steps detailed in
this section.

## Create a backorder from tablet view

Backorders for manufacturing orders can also be created from the work
order tablet view.

<div class="note">

<div class="title">

Note

</div>

In order to use tablet view, the *Work Orders* setting must be enabled.
To enable it, navigate to `Manufacturing --> Configuration -->
Settings`. On the `Settings` page, enable the checkbox next to `Work
Orders`, then click `Save` to save the change. This makes the `Work
Orders` tab appear on manufacturing orders, from which the tablet view
can be opened.

![The Work Orders setting on the Manufacturing settings
page.](manufacturing_backorders/work-orders-setting.png)

</div>

To create a backorder from the tablet view, begin by navigating to
`Manufacturing -->
Operations --> Manufacturing Orders`. Select a manufacturing order with
a quantity of two or more or create one by clicking `Create`.

If a new manufacturing order is created, select a product from the
`Product` drop-down menu and enter a quantity of two or more in the
`Quantity` field, then click `Confirm` to confirm the order.

After confirming the manufacturing order, select the `Work Orders` tab
and click the `📱 (tablet view)` button located on the line of the first
work order to enter the tablet view.

![The tablet view button for a work order on a manufacturing
order.](manufacturing_backorders/tablet-view-button.png)

Once in tablet view, enter the quantity being manufactured immediately
in the `Units` field at the top left of the tablet view.

![The Units field in the tablet
view.](manufacturing_backorders/units-field.png)

The steps for the rest of the workflow depend on whether the
manufacturing order being processed requires the completion of a single
work order or multiple work orders.

### Single work order

If the manufacturing order only requires the completion of a single work
order, complete the work order, then click `Mark As Done And Close MO`.
The manufacturing order is closed and a backorder for the units that
still need to be manufactured is created automatically.

![The Mark As Done And Close MO button in the tablet view of a work
order.](manufacturing_backorders/madacmo-button.png)

Once the remaining units are ready to be manufactured, navigate to
`Manufacturing -->
Operations --> Manufacturing Orders`, then select the backorder
manufacturing order, which is titled using the reference tag of the
original backorder with *002* added to the end.

On the backorder manufacturing order, select the `Work Orders` tab and
click the `📱 (tablet view)` button located on the line of the work order
to open the tablet view. If all of the units in the backorder will be
completed immediately, simply click `Mark As
Done And Close MO` after completing the work order.

If only some of the remaining units will be manufactured immediately,
enter the number in the `Units` field at the top left of the tablet
view, then click `Mark As Done And
Close MO` to create another backorder for the remaining units. The new
backorder can be processed using the steps detailed in this section.

### Multiple work orders

If the manufacturing order requires the completion of multiple work
orders, complete the first work order, and then click `Record
Production`. This splits the manufacturing order into two separate
orders, titled *WH/MO/XXXXX-001* and *WH/MO/XXXXX-002*, with *XXXXX*
being the number of the original order.

![The Record Production button on a work
order.](manufacturing_backorders/record-production-button.png)

The tablet view defaults to showing the first work order for the *002*
manufacturing order. Since this manufacturing order will not be
completed immediately, back out of tablet view by clicking the `⬅️
(back)` button twice. Doing so will take you to the *001* order.

To finish the *001* order, select the `Work Orders` tab and click the
`tablet
view` button located on the line of the next work order. Finally,
complete the remaining work orders, then click `Mark As Done And Close
MO` to close the manufacturing order.

Once the remaining units are ready to be manufactured, navigate to
`Manufacturing -->
Operations --> Manufacturing Orders`, then select the *002* order.
Select the `Work
Orders` tab and click the `tablet view` button located on the line of
the first work order.

If all of the units in the backorder will be completed immediately,
simply click `Mark As
Done And Close MO` after completing all of the work orders.

If only some of the remaining units will be manufactured immediately,
enter the number in the `Units` field at the top left of the tablet
view, then click `Record Production` to create an additional backorder
for the remaining units, with *003* at the end of its reference tag.

The *002* backorder and *003* backorder can be completed by following
the steps detailed in this section.

<div class="tip">

<div class="title">

Tip

</div>

It is also possible to create a backorder in the middle of a
manufacturing order, when some but not all of the work orders have
already been completed. Doing so marks the completed work order(s) as
`Finished` on the backorder.

<div class="example">

A manufacturing order for four chairs requires the completion of two
work orders: *Paint* and *Assemble*. While the paint step can be
completed immediately for all four chairs, there are only enough screws
to assemble two of them.

As a result, the employee responsible for producing the chairs begins by
painting all four, and marking the *Paint* work order as `Finished` for
all of them. Then, they move on to the *Assemble* work order. They
assemble two of the four chairs, enter that number in the `Units` field
of the tablet view, and click `Record Production`.

A backorder manufacturing order is created for the remaining two chairs.
On the backorder, the *Paint* work order is already marked as
`Finished`, and only the *Assemble* work order is left to be completed.

Once more screws are available, the manufacturing employee assembles the
remaining chairs and clicks `Mark As Done And Close MO` to complete the
*Assemble* work order and close the backorder manufacturing order.

</div>

</div>


---
## File: ./content/applications/inventory_and_mrp/manufacturing/management/work_center_time_off.md

# Make work centers unavailable using Time Off

In Odoo, *work centers* are used to carry out manufacturing operations
at specific locations. However, if a work center cannot be used for some
reason, work orders begin to pile up at the work center until it is
operational again.

As a result, it is necessary to make the work center unavailable in Odoo
so that the platform routes new work orders to alternative work centers
that are operational. Using Odoo *Time Off*, it is possible to designate
a work center as being unavailable for a set period of time. Doing so
ensures that manufacturing operations can continue until the impacted
work center is available again.

## Configuration

Before a work center can be designated as unavailable, the Odoo platform
must be properly configured. First, it is necessary to enable `developer
mode <developer-mode>`. This allows the `Time Off` smart button to
appear on each work center's `Working Hours` pop-up window.

Enable developer mode by going to `Settings`, scrolling to the bottom of
the page, and clicking `Activate the developer mode` under the
`Developer Tools` heading.

![The "Activate the developer mode"
button.](work_center_time_off/developer-mode-button.png)

Next, install the *Time Off* app. This is the app used for assigning
time off to all resources within Odoo, including employees and work
centers. Navigate to `Apps`, then type <span class="title-ref">Time
Off</span> in the `Search...` bar. The card for the `Time Off` module
should be the only one that appears on the page. Click the green
`Install` button on the card to install the app.

![The Time Off module installation
card.](work_center_time_off/time-off-install-card.png)

The last step is to properly configure work centers. For this workflow,
it is necessary to have at least two work centers: one that is made
unavailable and a second that receives the work orders that the other
cannot accept. If no second work center is configured, Odoo cannot route
work orders away from the unavailable work center and they will pile up
in its queue.

To create a work center, navigate to `Manufacturing --> Configuration
--> Work
Centers --> Create`.

Make sure that both work centers have the same equipment listed under
the `Equipment` tab. This ensures that operations carried out at one
work center can also be performed at the other.

![The equipment tab on a work center
form.](work_center_time_off/work-center-equipment-tab.png)

For the work center that will be made unavailable, select the second
work center on the `Alternative Workcenters` drop-down menu. Now, Odoo
knows to send work orders to the second work center when the first is
unavailable for any reason.

![A work center form configured with an alternative work
center.](work_center_time_off/alternative-work-center-selection.png)

## Add time off for a work center

With configuration completed, time off can now be assigned to the work
center that will be made unavailable. Begin by navigating to
`Manufacturing --> Configuration --> Work
Centers` and selecting the affected work center. Click `Edit`, and then
the `↗
(external link)` button next to the `Working Hours` drop-down menu.

![The Working Hours "External link" button on the work center
form.](work_center_time_off/working-hours-button.png)

A pop-up appears, titled `Open: Working Hours`. The standard working
hours for the work center are listed here, along with various other
details about it. Since developer mode was enabled, there is a `Time
Off` button in the top right of the pop-up. Click it to be taken to the
`Resource Time Off` page.

![The Time Off button on the Working Hours
pop-up.](work_center_time_off/time-off-button.png)

On this page, click `Create` to configure a new time-off entry. On the
time-off form, note the `Reason` for the work center closure (broken,
maintenance, etc.), select the affected work center as the `Resource`,
and choose a `Start Date` and `End
Date` to specify the period during which the work center will be
unavailable. Click `Save` and the time off for the work center is logged
in Odoo.

![The "Resource Time Off" form.](work_center_time_off/time-off-form.png)

## Route orders to an alternative work center

Once a work center is within its specified time-off period, work orders
sent to it can be automatically routed to an alternative work center
using the `Plan` button.

Begin by creating a new manufacturing order by selecting `Operations -->
Manufacturing Orders --> Create`. On the manufacturing order form,
specify a `Product` that uses the unavailable work center for one of its
operations. Click `Confirm` to confirm the work order.

On the confirmed work order, select the `Work Orders` tab. By default,
the unavailable work center is specified in the `Work Center` column.
There is also a green `Plan` button on the top left of the page.

![The Plan button on a manufacturing
order.](work_center_time_off/mo-plan-button.png)

Click `Plan` and the work center listed under the `Work Orders` tab is
automatically changed to the alternative work center.

![The selected work center updates automatically after clicking the Plan
button.](work_center_time_off/work-center-planning.png)

Once the time-off period for the unavailable work center ends, Odoo
recognizes that the work center is available again. At this point,
clicking the `Plan` button does not route work orders to an alternative
work center unless the first one is at capacity.


---
## File: ./content/applications/inventory_and_mrp/manufacturing/management/routing_kit_bom.md

# Set routings on kit Bills of materials

It often happens that you want to use kit BoM’s within manufactured
product BoM’s in order to lighten the list of components for this
manufactured product. When doing so, you would like to have the
possibility to specify, for each kit component, in which operation they
are consumed.

We will see the three use cases that you can face in these kinds of
configurations.

## Finished Product & Kit Component have the same Routing

### Create BoM for the Finished Product

Create a manufactured BoM for the finished product which includes a kit
component. Set a routing on your BoM, for example, *Assemble Furniture*.

![image](routing_kit_bom/routing_kit_bom_01.png)

### Create a Kit BoM for the Kit Component

Update the kit component to define its BoM. Make sure that the routing
which is set on this BoM is the same one than on the Finished Product.

![image](routing_kit_bom/routing_kit_bom_02.png)

You can define the operations in which the kit components are used
directly in the BoM of the kit.

### Manufacturing Order

In the list of components, the kit is split. Two work orders are created
as we have two operations defined in the *Assemble Furniture* routing.
The components of the kits are well consumed in the operations defined
in the kit BoM.

![image](routing_kit_bom/routing_kit_bom_03.png)

![image](routing_kit_bom/routing_kit_bom_04.png)

![image](routing_kit_bom/routing_kit_bom_05.png)

## Finished Product & Kit Component haven’t the same Routing

### Kit Consumption set on Finished Product BoM

#### Create BoM for the Finished Product

Create a manufactured BoM for the finished product which includes a kit
component. Set a routing on your BoM, for example, *Assemble Furniture*.

![image](routing_kit_bom/routing_kit_bom_01.png)

#### Create a Kit BoM for the Kit Component

Update the kit component to define its BoM. In this use case, the
routing which is set on this Kit BoM is different than the one of the
Finished Product. Specify the operations at which the kit components are
consumed in this BoM.

![image](routing_kit_bom/routing_kit_bom_06.png)

#### Manufacturing Order

When the manufacturing order is created for the Manufactured product,
the kit is split among its components. When the manufacturing order is
planned, three work orders are created in our case, one coming from the
routing of the manufactured products, the two other ones coming from the
routing of the kit BoM.

![image](routing_kit_bom/routing_kit_bom_07.png)

The components are all consumed during their respective operations.

![image](routing_kit_bom/routing_kit_bom_08.png)

![image](routing_kit_bom/routing_kit_bom_09.png)

### Kit Consumption set on Kit BoM

#### Create BoM for the Finished Product

Create a manufactured BoM for the finished product which includes a kit
component. Set a routing on your BoM, for example, *Assemble Furniture*.
Precise the consumption of the components on this BoM.

![image](routing_kit_bom/routing_kit_bom_10.png)

#### Create a Kit BoM for the Kit Component

Update the kit component to define its BoM. In this use case, the
routing which is set on this Kit BoM is different than the one of the
Finished Product.

![image](routing_kit_bom/routing_kit_bom_11.png)

#### Manufacturing Order

When the manufacturing order is created for the Manufactured product,
the kit is split among its components. When the manufacturing order is
planned, three work orders are created in our case, one coming from the
routing of the manufactured products, the two other ones coming from the
routing of the kit BoM.

![image](routing_kit_bom/routing_kit_bom_08.png)

All the components of the kits are consumed during the first operation.
The last component is consumed during the second operation.

![image](routing_kit_bom/routing_kit_bom_12.png)

![image](routing_kit_bom/routing_kit_bom_13.png)


---
## File: ./content/applications/inventory_and_mrp/manufacturing/management/sub_assemblies.md

# Manage semi-finished products

In Odoo, you can use subassembly products to simplify a complex *Bill of
Materials* or to represent your manufacturing flow more accurately. A
*subassembly product* is a manufactured product that is used as a
component to make another one.

A *BoM* that employs *subassemblies* is referred to as a multi-level
BoM. Those are accomplished by creating a *top-level BoM* and
*subassembly ones*. This process requires a route that will ensure that
every time a manufacturing order for the top-level product is created,
another one will be for subassemblies.

## Configure the Subassembly Product

To configure a *multi-level BoM*, you will need a top-level product but
also its subassemblies. The first step is to create a product form for
each of the subassemblies. Select the routes *Manufacture* and
*Replenish on Order*. Now, hit save.

![image](sub_assemblies/semi-finished_products_01.png)

In the *Bill of Materials* menu, under *Master Data*, create a new *Bill
of Materials*. Choose the product you just created and add its
components.

![image](sub_assemblies/semi-finished_products_02.png)

## Configure the Main BoM

Now, you can configure the top-level product and its *BoM*. Include any
subassemblies in the list of components.

![image](sub_assemblies/semi-finished_products_03.png)

Now, each time you will plan a manufacturing order for the top-level
product, a manufacturing order will be created for the subassembly one.
Then, you will have to manufacture the subassembly in order to make it
available before manufacturing the finished product.

![image](sub_assemblies/semi-finished_products_04.png)


---
## File: ./content/applications/inventory_and_mrp/manufacturing/quality_control/quality_alerts.md

# Create quality alerts

Configuring quality control points is a great way to ensure that quality
checks are performed at routine stages during specific operations.
However, quality issues can often appear outside of these scheduled
checks. Using Odoo *Quality*, users can create quality alerts for issues
that are not detected by automated processes.

<div class="seealso">

`Add quality control points <quality_control_points>`

</div>

## Find and fill out the quality alerts form

In some situations, it is necessary to manually create quality alerts
within the *Quality* module.

<div class="example">

A helpdesk user who is notified of a product defect by a customer ticket
can create an alert that brings the issue to the attention of the
relevant quality team.

</div>

To create a new quality alert, start from the `Quality` module and
select `Quality Control --> Quality Alerts --> Create`. The quality
alert form can then be filled out as follows:

  - `Title`: choose a concise, yet descriptive title for the quality
    alert
  - `Product`: the product about which the quality alert is being
    created
  - `Product Variant`: the specific variant of the product that has the
    quality issue, if applicable
  - `Lot`: the lot number assigned to the product
  - `Work Center`: the work center where the quality issue originated
  - `Picking`: the picking operation during which the quality issue
    originated
  - `Team`: the quality team that will be notified by the quality alert
  - `Responsible`: the individual responsible for managing the quality
    alert
  - `Tags`: classify the quality alert based on user-created tags
  - `Root Cause`: the cause of the quality issue, if known
  - `Priority`: assign a priority between one and three stars to ensure
    more urgent issues are prioritized

The tabs at the bottom of the form can be used to provide additional
information to quality teams:

  - `Description`: provide additional details about the quality issue
  - `Corrective Actions`: the method for fixing affected products
  - `Preventive Actions`: procedures for preventing the issue from
    occurring in the future
  - `Miscellaneous`: the product vendor (if applicable), the company
    that produces the product, and the date assigned

![An example of a completed quality alert
form.](quality_alerts/quality-alert-form.png)

## Add quality alerts during the manufacturing process

Odoo enables manufacturing employees to create quality alerts within a
work order without accessing the *Quality* module. From the work order
tablet view, click the `  ☰  ` hamburger menu icon in the top left
corner and select `Quality Alert`.

![Access the work order
menu.](quality_alerts/work-order-tablet-view-menu-button.png)

The quality alert form can then be filled out as detailed in the
previous section. After saving the form, a new alert will appear on the
`Quality Alerts` dashboard that can be found through the `Quality -->
Quality Control` menu.

## Manage existing quality alerts

By default, quality alerts are organized in a kanban board view. The
stages of the kanban board are fully configurable and alerts can be
moved from one stage to the next by dragging and dropping or from within
each alert. Additional options are available for viewing alerts,
including graph, calendar, and pivot table views.

<div class="tip">

<div class="title">

Tip

</div>

Filter alerts based on diverse criteria like date assigned or date
closed. Alerts can also be grouped by quality team, root cause, or other
parameters found under the `Filters` button menu.

</div>


---
## File: ./content/applications/inventory_and_mrp/manufacturing/quality_control/quality_control_points.md

# Add quality controls

Use **Odoo Quality** to control the quality of products before they are
registered into stock, during picking operations, and when leaving the
warehouse for a delivery order. By creating *quality control points*,
manufacturers can set up quality checks that automatically trigger at
specific points during production.

## Configure quality control points

To create a new quality control point, go to `Quality Control -->
Control Points -->
Create`. Then, fill in the following form fields, accordingly:

  - `Title`: give the quality control point a simple, but informative
    title so production floor and quality check teams can understand it
    easily
  - `Products`: indicate which product(s) should pass through the
    specific quality control point
  - `Operations`: determine which operations team(s) should perform the
    quality control check (e.g.,
    <span class="title-ref">Manufacturing</span>,
    <span class="title-ref">Receipts</span>,
    <span class="title-ref">Delivery Orders</span>, etc.)
  - `Work Order Operation`: for manufacturing operations, use the
    drop-down menu to indicate which type of work order the quality
    control point applies to: `Manual
    Assembly`, `Packing`, `Assembly`, `Testing` or `Long time
    assembly`
  - `Company`: add the company that will implement the quality control
    point. Usually this will be the company that owns the Odoo database.
    However, a multi-company or vendor profile can be selected, as well,
    for cases where there are multiple manufacturing or engineering
    locations
  - `Control Type`: using the drop-down menu, choose from `All
    Operations`, `Randomly` or `Periodically` to determine how often the
    control point should executed
  - `Type`: using the drop-down menu, choose the control point type:
    `Instructions`, `Take a Picture`, `Pass - Fail`, or `Measure`
  - `Team`: decide which quality team should receive the results of the
    quality control point check
  - `Responsible`: add a point person to manage the status and evolution
    of the quality control point over time

The tabs at the bottom of the form can be used to provide additional
information to quality teams:

  - `Instructions`: describe the quality check to be performed
  - `Message If Failure`: detail what should be done if the check fails
  - `Notes`: use to include any additional information

![An example of a completed quality control point form for a Pass-Fail
test.](quality_control_points/quality-control-point-form.png)

Once a control point has been configured, a quality check will be
automatically created and assigned when the specified operation or work
order has been reached. Quality checks can be managed by selecting
`Quality Control --> Quality Checks`.

<div class="tip">

<div class="title">

Tip

</div>

To see all of the quality checks created by a control point, go to
`Quality
Control --> Control Points`, select a control point, and click `Quality
Checks` in the top right corner.

</div>

## Use case: configure a measure quality check

To ensure that a product meets specific measurement requirements, select
`Measure` from the `Type` drop-down menu. Selecting the `Measure`
quality check type reveals three new fields: `Device`, `Norm`, and
`Tolerance`. These fields can be configured so that only products within
a certain tolerance will pass the check:

  - `Device`: select the measuring device that should be used to take
    the measurement (e.g., measuring tape).
  - `Norm`: specify the desired measurement that the product should
    conform to and the unit of measurement that should be used
  - `Tolerance`: select the range that a measurement can be within while
    still passing the check (e.g., `from` 59.5 mm `to` 60.5 mm)

![An example of a quality control point form configured for a measure
quality check.](quality_control_points/measure_quality_check.png)

When the quality control points form is complete, click `Save`. Now,
this measurement-based test will trigger for products that were
specified on the form.

When production of the specified product reaches the operation that
requires a measure quality check, the manufacturing employee responsible
will be prompted to record and validate the measured value in the tablet
view. For products that measure within the values indicated in the
`Tolerance` fields, the test will pass. However, for products that
measure outside of those values, the test will fail. In that case, the
worker who performed the check would create a quality alert from the
tablet view. That quality alert can then be addressed by the quality
management team.


---
## File: ./content/applications/inventory_and_mrp/manufacturing/quality_control.md

  - nosearch

# Quality control

<div class="toctree" data-titlesonly="">

quality\_control/quality\_control\_points
quality\_control/quality\_alerts

</div>


---
## File: ./content/applications/inventory_and_mrp/manufacturing/maintenance/add_new_equipment.md

# Add new equipment

In Odoo, **equipment** refers to any item that is used in everyday
operations, including the manufacturing of products. This can mean a
piece of machinery on a production line, a tool that is used in
different locations, or a computer in an office space. Equipment
registered in Odoo can be owned by the company that uses the Odoo
database, or by a third party, such as a vendor in the case of equipment
rentals.

Using Odoo **Maintenance**, it is possible to track individual pieces of
equipment, along with information about their maintenance requirements.
To add a new piece of equipment, navigate to the `Maintenance` module,
select `Equipments --> Machines & Tools --> Create`, and configure the
equipment as follows:

  - `Equipment Name`: the product name of the piece of equipment
  - `Equipment Category`: the category that the equipment belongs to;
    for example, computers, machinery, tools, etc.; new categories can
    be created by navigating to `Configuration --> Equipment Categories`
    and clicking `Create`
  - `Company`: the company that owns the equipment; again, this can be
    the company that uses the Odoo database, or a third-party company
  - `Used By`: specify if the equipment is used by a specific employee,
    department, or both; select `Other` to specify both an employee and
    a department
  - `Maintenance Team`: the team responsible for servicing the
    equipment; new teams can be created by navigating to `Configuration
    --> Maintenance Teams` and selecting `Create`; the members of each
    team can also be assigned from this page
  - `Technician`: the person responsible for servicing the equipment;
    this can be used to assign a specific individual in the event that
    no maintenance team is assigned or when a specific member of the
    assigned team should always be responsible for the equipment; any
    person added to Odoo as a user can be assigned as a technician
  - `Used in location`: the location where the equipment is used; this
    is a simple text field that can be used to specify locations that
    are not work centers, like an office, for example
  - `Work Center`: if the equipment is used at a work center, specify it
    here; equipment can also be assigned to a work center by navigating
    to `Maintenance --> Equipments -->
    Work Centers`, selecting a work center or creating a new one using
    the `Create` button, and clicking the `Equipment` tab on the work
    center form

![An example of a fully configured new equipment
form.](add_new_equipment/new-equipment-form.png)

## Include additional product information

The `Product Information` tab at the bottom of the form can be used to
provide further details about the piece of equipment:

  - `Vendor`: the vendor that the equipment was purchased from
  - `Vendor Reference`: the reference code assigned to the vendor
  - `Model`: the specific model of the piece of equipment
  - `Serial Number`: the unique serial number of the equipment
  - `Effective Date`: the date that the equipment became available for
    use; this is used to calculate the `MTBF (Mean Time Between
    Failures)`
  - `Cost`: the amount the equipment was purchased for
  - `Warranty Expiration Date`: the date on which the equipment's
    warranty will expire

![The product information tab for the new piece of
equipment.](add_new_equipment/new-equipment-product-information.png)

## Add maintenance details

The `Maintenance` tab includes information that can be useful to
maintenance teams:

  - `Preventive Maintenance Frequency`: specifies how often maintenance
    should be performed to prevent equipment failure
  - `Maintenance Duration`: the amount of time required to fix the
    equipment when it fails
  - `Expected Mean Time Between Failure`: the average amount of time
    that the equipment is expected to operate before failing

![The maintenance tab for the new piece of
equipment.](add_new_equipment/new-equipment-maintenance.png)

<div class="note">

<div class="title">

Note

</div>

The `Maintenance` tab also includes sections for `Mean Time Between
Failure`, `Estimated Next Failure`, `Latest Failure`, and `Mean Time To
Repair`. These values are calculated automatically based on maintenance
requests if any exist.

</div>

<div class="tip">

<div class="title">

Tip

</div>

To see the maintenance requests for a piece of equipment, go to the page
for the equipment and select `Maintenance` in the top right corner of
the form.

</div>


---
## File: ./content/applications/inventory_and_mrp/manufacturing/maintenance.md

  - nosearch

# Maintenance

<div class="toctree" data-titlesonly="">

maintenance/add\_new\_equipment

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/barcode.md

  - nosearch

# Barcodes

<div class="toctree" data-titlesonly="" data-glob="">

barcode/setup barcode/operations

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/shipping.md

  - nosearch

# Shipping

<div class="toctree" data-titlesonly="" data-glob="">

shipping/setup shipping/operation

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/management.md

  - nosearch

# Warehouse Management

<div class="toctree" data-titlesonly="" data-glob="">

management/products management/warehouses
management/shipments\_deliveries management/misc management/planning
management/lots\_serial\_numbers management/reporting

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/routes.md

  - nosearch

# Advanced Routes

<div class="toctree" data-titlesonly="" data-glob="">

routes/concepts routes/strategies

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/management/misc/owned_stock.md

# Consignment: buy and sell stock without owning it

Most of the time, products stored in a company's warehouse are either
purchased from suppliers, or are manufactured in-house. However,
suppliers will sometimes let companies store and sell products in the
company's warehouse, without having to buy those items up-front. This is
called *consignment*.

Consignment is a useful method for suppliers to launch new products, and
easily deliver to their customers. It's also a great way for the company
storing the products (the consignee) to earn something back for their
efforts. Consignees can even charge a fee for the convenience of storing
products they don't actually own.

## Enable the consignment setting

To receive, store, and sell consignment stock, the feature needs to be
enabled in the settings. To do this, go to `Inventory --> Configuration
--> Settings`, and under the `Traceability` section, check the box next
to `Consignment`, and then click `Save` to finish.

![Enabled Consignment setting in Inventory
configuration.](owned_stock/owned-stock-enable-consignment.png)

## Receive (and store) consignment stock

With the feature enabled in Odoo, consignment stock can now be received
into a warehouse. From the main `Inventory` dashboard, click into the
`Receipts` section. Then, click `Create`.

<div class="note">

<div class="title">

Note

</div>

Consignment stock is not actually purchased from the vendor; it is
simply received and stored. Because of this, there are no quotations or
purchase orders involved in receiving consignment stock. So, *every*
receipt of consignment stock will start by creating manual receipts.

</div>

Choose a vendor to enter in the `Receive From` field, and then choose
the same vendor to enter in the `Assign Owner` field.

<div class="important">

<div class="title">

Important

</div>

Since the products received from the vendor will be owned by the same
vendor, the `Receive From` and `Assign Owner` fields must match.

</div>

Once the vendor-related fields are set, enter products into the
`Product` lines, and set the quantities to be received into the
warehouse under the `Done` column. If the `Units of Measure` feature is
enabled, the `UoM (Units of Measure)` can be changed, as well. Once all
the consignment stock has been received, `Validate` the receipt.

![Matching vendor fields in consignment Receipt
creation.](owned_stock/owned-stock-receipt-fields.png)

## Sell and deliver consignment stock

Once consignment stock has been received into the warehouse, it can be
sold the same as any other in-stock product that has the `Can Be Sold`
option enabled on the product form.

To create a sales order, navigate to the `Sales` app, and from the
`Quotations` overview, click `Create`. Next, choose a customer to enter
into the `Customer` field.

<div class="note">

<div class="title">

Note

</div>

The `Customer` *must* be different from the `Vendor` that supplied the
consignment stock received (and stored) in the warehouse.

</div>

Add the consignment product under the `Product` column in the order
lines, set the `Quantity`, and fill out any other pertinent product
details on the form. Once the quotation is complete, click `Confirm`.

![Sales order of consignment
stock.](owned_stock/owned-stock-sales-order.png)

Once the `RFQ (Request for Quotation)` has been confirmed, it will
become a sales order. From here, the products can be delivered by
clicking on the `Delivery` smart button, and selecting `Validate` to
validate the delivery.

## Traceability and reporting of consignment stock

Although consignment stock is owned by the vendor who supplied it, and
not by the company storing it in their warehouse, consignment products
will *still* appear in certain inventory reports.

To find inventory reports, go to `Inventory --> Reporting`, and choose a
report to view.

<div class="note">

<div class="title">

Note

</div>

Since the consignee does not actually own consigment stock, these
products are *not* reflected in the `Stock Valuation` report, and have
no impact on the consignee's inventory valuation.

</div>

### Product moves report

To view all information about on-hand stock moves, navigate to the the
`Product Moves` dashboard by going to `Inventory --> Reporting -->
Product Moves`. For consignment products, the information in this report
is the same as any other product: the history of its product moves can
be reviewed; the `Quantity Done` and `Reference` document are available;
and its `Locations` are available, as well. The consignment stock will
originate from `Partner Location/Vendors`.

<div class="tip">

<div class="title">

Tip

</div>

To view a consignment product's moves by ownership, select the `Group
By` filter, choose the `Add Custom Group` parameter, and then select
`From Owner`, and `Apply` to finish.

</div>

![Consignment stock moves
history.](owned_stock/owned-stock-moves-history.png)

<div class="tip">

<div class="title">

Tip

</div>

To see forecasted units of consignment stock, go to `Inventory -->
Reporting -->
Forecasted Inventory`.

</div>

### Stock on hand report

View the `Stock On Hand` dashboard by navigating to `Inventory -->
Reporting --> Inventory Report`. From this report, the `Locations` of
all stock on-hand are displayed, in addition to the quantities per
location. For consigment products, the `Owner` column will be populated
with the owner of those products, or the original vendor who supplied
the products in the first place.


---
## File: ./content/applications/inventory_and_mrp/inventory/management/misc/batch_transfers.md

# Process Batch Transfers

Batch picking allows a single picker to handle a batch of orders,
reducing the number of times he must visit the same location. In Odoo,
it means you can regroup several transfers into the same batch transfer,
then process it, either via the barcode application or in the form view.

## Create a Batch Transfer

To activate the batch picking option, go to `Inventory
--> Configuration --> Configuration` and enable *Batch Pickings*.

![View of the inventory settings. Process to enable the batch pickings
option in the Odoo Inventory
app](batch_transfers/batch_transfers_01.png)

Then, go to `Inventory --> Operations --> Batch
Transfers` and hit the create button.

![View of the new menu, Batch Transfers, under
operations](batch_transfers/batch_transfers_02.png)

Now, determine the batch transfer responsible and the type of transfers
you want to include in the batch. To add the types of transfers, click
on *Add a line*.

![View of a Batch Transfers
form](batch_transfers/batch_transfers_03.png)

In the example below, a filter was applied to only see the transfers
that are in the *Pick* step. After that, the different transfers that
needed to be included in the batch transfer were selected.

![View of the list of transfers to choose for a single batch transfer
and how to add them&#10;to the batch
transfer](batch_transfers/batch_transfers_04.png)

To see the products to pick for the different transfers, click on
*Select*. If *Multi-locations* has been activated, the document also
shows the locations they have been reserved from.

![View of a batch transfer list. Products to pick with their source and
target locations](batch_transfers/batch_transfers_05.png)

## Create a Batch Transfer from the Transfers List View

From the *Transfers List View*, select transfers that should be included
in the Batch. Then, select *Add to batch* from the *Action* list.

![View of the process to add transfers to a batch transfer from the
transfers list view](batch_transfers/batch_transfers_06.png)

Next, determine if you want to add the transfers to an existing draft
batch transfer or create a new one.

![Option to add a responsible to a batch transfer so it can be
confirmed](batch_transfers/batch_transfers_07.png)

## Process a Batch Transfer

While gathering the products, you can edit the batch transfer and update
the *Quantity done* for each product. Once everything has been picked,
select *Validate* so the different transfers contained in the batch are
validated too.

![View of an in progress batch
transfer](batch_transfers/batch_transfers_08.png)

In case all the products cannot be picked, you can create backorders for
each individual transfer which couldn’t be completely processed.

![How to handle batch transfers with unavailable products. Creation of a
backorder inside&#10;of a batch
transfer](batch_transfers/batch_transfers_09.png)

![View of how backorders are handled in Odoo's batch
transfers](batch_transfers/batch_transfers_10.png)

## Process a Batch Transfer from the Barcode app

Enter the *Barcode* application, select the *Batch Transfers* menu.

![View of the Odoo Barcode app
dashboard](batch_transfers/batch_transfers_11.png)

Then, you can enter the batch transfer on which you want to work. Batch
transfers can easily be grouped per responsible if necessary.

![View of the batch transfers dashboard inside of the Barcode
app](batch_transfers/batch_transfers_12.png)

In the batch transfer, products are classified per location. The source
document is visible on each line and a color-code helps differentiate
them.

![View of an in progress batch transfer with the Odoo Barcode
application](batch_transfers/batch_transfers_13.png)

To see the products to pick from another location, click on the *Next*
button.

![View of a ready and completed batch transfer inside of the Odoo
Barcode application](batch_transfers/batch_transfers_14.png)

Once all the products have been picked, click on *Validate* (on the last
page) to mark the batch transfer as done.


---
## File: ./content/applications/inventory_and_mrp/inventory/management/reporting/integrating_landed_costs.md

# Landed costs: add additional costs to products

<div id="inventory/reporting/landed_costs">

When companies perform profit analyses, the data being examined must be
as accurate as possible. To ensure that, **all** costs and expenses need
to be accounted for, including the sum of expenses associated with
shipping a product, which is also known as *landed costs*.

</div>

In Odoo, the landed costs feature allows the user to add and include
additional costs on goods purchased. This includes the cost of freight,
shipping, insurance, taxes, and more.

## Enable landed costs

To use landed costs, go to the `Inventory app --> Configuration -->
Settings`, scroll down to the `Valuation` header, and click the checkbox
beside `Landed Costs` to enable the feature.

In this same section, a default accounting journal can also be set, in
which entries involving landed costs will be recorded.

To configure a default accounting journal, click the blank field next to
`Default Journal` to reveal a drop-down menu, in which an existing
journal can be selected. A new journal can be created from this
drop-down, as well, by typing the desired name of a new journal in the
blank field, and selecting either the `Create` or `Create and edit...`
option.

Clicking `Create` instantly creates the journal, which can be customized
later. Clicking `Create and edit...` reveals a pop-up window on the
`Settings` page, wherein the newly-created journal's details can be
configured right away. When the configurations are complete, click
`Save` on the pop-up window to complete the journal creation process,
and return to the `Settings` page.

After the setting has been enabled, and if a journal has been created or
applied, click the `Save` button to save all changes.

![Enabled Landed Costs feature in Inventory
settings.](integrating_landed_costs/integrating-landed-costs-settings.png)

<div class="important">

<div class="title">

Important

</div>

Landed costs can **only** be applied to products using a `FIFO (First In
First Out)` or `AVCO (Average Cost)` costing method, **and** automated
inventory valuation.

</div>

## Create a landed cost product

Landed costs can be manually entered each time a vendor bill is created.
However, some products may always have the same types of charges applied
to them, and thus, the vendor bills may always list the same landed
costs. In this case, it's beneficial to create a specific landed cost
product.

To create a landed cost product, first navigate to `Inventory app -->
Products -->
Products`, and click the `Create` button, which reveals a blank product
template page.

On the blank product template form, fill out the necessary product
information, and change the `Product Type` to `Service`.

Then, click the `Purchase` tab, and under the `Landed Costs` section,
select the checkbox beside `Is a Landed Cost`. Once selected, a new
field appears, in which a `Default Split Method` can be selected.

Clicking the blank field beside `Default Split Method` reveals a
drop-down menu. From this drop-down menu, select `Equal`, then click
`Save`.

<div class="note">

<div class="title">

Note

</div>

When the `Default Split Method` is set to `Equal`, the landed cost will
be split equally between all items included on the purchase order. If a
`PO (purchase order)` has just one item, the full amount will be applied
to this item.

</div>

![Landed costs and split method enabled on product
form.](integrating_landed_costs/integrating-landed-costs-split-method.png)

<div class="tip">

<div class="title">

Tip

</div>

Depending on the landed cost of each shipment, the price of a landed
cost product can change with each order. Therefore, a price (or cost)
should **not** be set on landed cost products.

</div>

## Create a request for quotation

Before adding a specific landed cost on a product, a new `RFQ (request
for quotation)` for that product must be created. To do that, navigate
to the `Purchase` app, and click `Create`. Doing so reveals a blank `RFQ
(request for quotation)` template form.

On the blank `RFQ (request for quotation)` template form, add a
`Vendor`, then add the desired product to the product lines (under the
`Product` tab), by clicking `Add a line`, and selecting the desired
product.

Then, fill out the remaining information on the new `RFQ (request for
quotation)`. Lastly, click `Confirm Order` to confirm the order. Once
the quotation has been confirmed, it turns into a `PO (purchase order)`.

Next, click `Receive Products` to receive the ordered products, then
click `Validate`, which reveals a pop-up. In the pop-up, select `Apply`
to set the `Done` quantities. Then, navigate back to the initial `PO
(purchase order)` (via the breadcrumbs).

## Create a vendor bill

Once goods have been received from the purchase order, a vendor bill can
be created directly from the `PO (purchase order)`. To do so, click
`Create Bill`. Doing so reveals a vendor bill draft page.

On this vendor bill draft page, the information from the `PO (purchase
order)` is automatically populated. To add a landed cost to the bill,
first click `Edit`.

Next, click `Add a line` in the `Invoice Lines` tab to add the
newly-created landed cost product to the vendor bill. And, since this
product was specifically created as a landed cost, the checkbox under
the `Landed Costs` column is selected by default.

![Landed cost added on product lines on vendor
bill.](integrating_landed_costs/integrating-landed-costs-vendor-bill.png)

<div class="important">

<div class="title">

Important

</div>

Since no `Price` was set on the product template form for the landed
cost product, it **must** be set manually on the vendor bill, in the
`Price` column.

</div>

## Create landed costs

Once all the necessary information on the bill has been filled out,
click `Create Landed
Costs` at the top of the bill.

Doing so reveals a separate page, wherein the necessary landed cost
information is entered. From this page, next to the greyed-out
`Transfers` field, the warehouse receipt that this landed cost is
associated with must be specified. To adjust the `Transfers` field,
click `Edit` to make that field accessible.

Additionally, an expenses `Account` (located in the `Additional Costs`
tab) must be selected, as well.

To see how the landed costs affect the items on the `PO (purchase
order)`, click the `Valuation Adjustments` tab. From this tab, the
`Original Value` of the purchase order and the `New Value` of the order
can be seen and compared, as well as the `Additional Landed Cost` that
was added to change the original `PO (purchase order
)`.

![Valuation adjustments tab for landed costs on vendor
bill.](integrating_landed_costs/integrating-landed-costs-valuation-adjustments.png)

Once ready, click `Validate` at the top of the page, then click `Save`
to save all changes. Finally, click back to the vendor bill form (via
the breadcrumbs).

To complete the vendor bill, click `Confirm` to confirm the bill. Then,
click the `Register Payment` button at the top of the vendor bill form.
Doing so reveals a pop-up. From this pop-up, click `Create Payment`.
Once clicked, this reveals a green *In Payment* banner at the top of the
vendor bill form.

<div class="tip">

<div class="title">

Tip

</div>

Landed costs don't always need to be created from the vendor bill. They
can also be created by going to `Inventory app --> Operations --> Landed
Costs`, and clicking `Create`.

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/management/reporting/inventory_valuation_config.md

# Inventory valuation configuration

<div id="inventory/inventory_valuation_config">

All of a company's stock on-hand contributes to the valuation of its
inventory. That value should be reflected in the company's accounting
records to accurately show the value of the company and all of its
assets.

</div>

By default, Odoo uses a periodic inventory valuation (also known as
manual inventory valuation). This method implies that the accounting
team posts journal entries based on the physical inventory of the
company, and that warehouse employees take the time to count the stock.
In Odoo, this method is reflected inside each product category, where
the `Costing Method` field will be set to
<span class="title-ref">Standard Price</span> by default, and the
`Inventory Valuation` field will be set to
<span class="title-ref">Manual</span>.

![The Inventory Valuation fields are located on the Product Categories
form.](inventory_valuation_config/inventory-valuation-fields.png)

Alternatively, automated inventory valuation is an integrated valuation
method that updates the inventory value in real-time by creating journal
entries whenever there are stock moves initiated between locations in a
company's inventory.

<div class="note">

<div class="title">

Note

</div>

Automated inventory valuation is a method recommended for expert
accountants, given the extra steps involved in journal entry
configuration. Even after the initial setup, the method will need to be
periodically checked to ensure accuracy, and adjustments may be needed
on an ongoing basis depending on the needs and priorities of the
business.

</div>

## Types of accounting

Accounting entries will depend on the accounting mode: *Continental* or
*Anglo-Saxon*.

<div class="tip">

<div class="title">

Tip

</div>

Verify the accounting mode by activating the `developer-mode` and
navigating to `Accounting --> Configuration --> Settings`.

</div>

In *Anglo-Saxon* accounting, the costs of goods sold (COGS) are reported
when products are sold or delivered. This means that the cost of a good
is only recorded as an expense when a customer is invoiced for a
product. *Interim Stock Accounts* are used for the input and output
accounts, and are both *Asset Accounts* in the balance sheet.

In *Continental* accounting, the cost of a good is reported as soon as a
product is received into stock. Additionally, a single *Expense* account
is used for both input and output accounts in the balance sheet.

## Costing methods

Below are the three costing methods that can be used in Odoo for
inventory valuation.

  - **Standard Price**: is the default costing method in Odoo. The cost
    of the product is manually defined on the product form, and this
    cost is used to compute the valuation. Even if the purchase price on
    a purchase order differs, the valuation will still use the cost
    defined on the product form.
  - **Average Cost (AVCO)**: calculates the valuation of a product based
    on the average cost of that product, divided by the total number of
    available stock on-hand. With this costing method, inventory
    valuation is *dynamic*, and constantly adjusts based on the purchase
    price of products.
  - **First In First Out (FIFO)**: tracks the costs of incoming and
    outgoing items in real-time and uses the real price of the products
    to change the valuation. The oldest purchase price is used as the
    cost for the next good sold until an entire lot of that product is
    sold. When the next inventory lot moves up in the queue, an updated
    product cost is used based on the valuation of that specific lot.
    This method is arguably the most accurate inventory valuation method
    for a variety of reasons, however, it's highly sensitive to input
    data and human error.

<div class="warning">

<div class="title">

Warning

</div>

Changing the costing method greatly impacts inventory valuation. It's
highly recommended to consult an accountant first before making any
adjustments here.

</div>

## Configure automated inventory valuation in Odoo

Make changes to inventory valuation options by navigating to `Inventory
-->
Configuration --> Product Categories`, and choose the
category/categories where the automated valuation method should apply.

<div class="note">

<div class="title">

Note

</div>

It is possible to use different valuation settings for different product
categories.

</div>

Under the `Inventory Valuation` heading are two labels: `Costing Method`
and `Inventory Valuation`. Pick the desired `Costing Method` using the
drop-down menu (e.g. `Standard`, `Average Cost (AVCO)`, or `First In
First Out
(FIFO)`) and switch the `Inventory Valuation` to `Automated`.

<div class="seealso">

`Using the inventory valuation<inventory/reporting/using_inventory_val>`

</div>

<div class="note">

<div class="title">

Note

</div>

When choosing `Average Cost (AVCO)` as the `Costing Method`, changing
the numerical value in the `Cost` field for products in the respective
product category creates a new record in the *Inventory Valuation*
report to adjust the value of the product. The `Cost` amount will then
automatically update based on the average purchase price both of
inventory on hand and the costs accumulated from validated purchase
orders.

</div>

When the `Costing Method` is changed, products already in stock that
were using the `Standard` costing method **do not** change value;
rather, the existing units keep their value, and any product moves from
then on affect the average cost, and the cost of the product will
change. If the value in the `Cost` field on a product form is changed
manually, Odoo will generate a corresponding record in the *Inventory
Valuation* report.

On the same screen, the `Account Stock Properties` fields will appear,
as they are now required fields given the change to automated inventory
valuation. These accounts are defined as follows:

  - `Stock Valuation Account`: when automated inventory valuation is
    enabled on a product, this account will hold the current value of
    the products.
  - `Stock Input Account`: counterpart journal items for all incoming
    stock moves will be posted in this account, unless there is a
    specific valuation account set on the source location. This is the
    default value for all products in a given category, and can also be
    set directly on each product.
  - `Stock Output Account`: counterpart journal items for all outgoing
    stock moves will be posted in this account, unless there is a
    specific valuation account set on the destination location. This is
    the default value for all products in a given category, and can also
    be set directly on each product.

## Access reporting data generated by inventory valuation

To start, go to `Accounting --> Reporting --> Balance Sheet`. At the top
of the dashboard, change the `As of` field value to `Today`, and adjust
the filtering `Options` to `Unfold All` in order to see all of the
latest data displayed, all at once.

Under the parent `Current Assets` line item, look for the nested `Stock
Valuation Account` line item, where the total valuation of all of the
inventory on hand is displayed.

Access more specific information with the `Stock Valuation Account`
drop-down menu, by selecting either the `General Ledger` to see an
itemized view of all of the journal entries, or by selecting `Journal
Items` to review all of the individualized journal entries that were
submitted to the account. As well, annotations to the `Balance Sheet`
can be added by choosing `Annotate`, filling in the text box, and
clicking `Save`.

![See the full inventory valuation breakdown in Odoo Accounting
app.](inventory_valuation_config/stock-valuation-breakdown-in-accounting.png)


---
## File: ./content/applications/inventory_and_mrp/inventory/management/reporting/using_inventory_valuation.md

# Using inventory valuation

<div id="inventory/reporting/using_inventory_val">

*Inventory valuation* is a quintessential accounting procedure that
calculates the value of on-hand stock. Once determined, the inventory
valuation amount is then incorporated into a company's overall value.

</div>

In Odoo, this process can be conducted manually— by warehouse employees
physically counting the products— or automatically through the database.

<div class="seealso">

`Inventory valuation
configuration<inventory/inventory_valuation_config>`

</div>

## Understand the basics of inventory valuation

In order to understand how moving products in and out of stock affects
the company's overall value, consider the following product and stock
moves scenario below.

### Receive a product

For example, consider an physical product, a simple *table*, which is
categorized as <span class="title-ref">Office Furniture</span> in the
product form's `Product Category` field.

Navigate to the the product category itself by going to `Inventory app
-->
Configuration --> Product Categories`, and on the form, set the `Costing
Method` as <span class="title-ref">First In First Out (FIFO)</span> and
the `Inventory Valuation` field as
<span class="title-ref">Automated</span>.

<div class="tip">

<div class="title">

Tip

</div>

Alternatively access the `Product Categories` dashboard by clicking on
the `internal link` arrow on the individual product's form, by hovering
over the `Product Category` field.

</div>

Next, assume 10 tables are purchased at a price of $10.00, each. The `PO
(Purchase Order)` for those tables will show the subtotal of the
purchase as $100, plus any additional costs or taxes.

![Purchase order with 10 tables products valued at $10
each.](using_inventory_valuation/purchase-order.png)

After selecting `Validate` on the `PO (Purchase Order)`, use the
`Valuation` smart button to view how the value of inventory was
impacted.

![Valuation smart button on a
receipt.](using_inventory_valuation/valuation-smart-button.png)

<div class="important">

<div class="title">

Important

</div>

`Developer mode <developer-mode>` must be turned on to see the
*Valuation* smart button.

</div>

<div class="tip">

<div class="title">

Tip

</div>

The `consignment
</applications/inventory_and_mrp/inventory/management/misc/owned_stock>`
feature allows ownership to items in stock. Thus, products owned by
other companies are not accounted for in the host company's inventory
valuation.

</div>

The `Stock Valuation` dashboard then displays valuation of all products
in the shipment, along with their quantities and valuation. In the
example of 10 tables being purchased, the `Total Value` column of the
dashboard would display a calculated valuation of $100.

![Stock valuation page depicting the products within a
shipment.](using_inventory_valuation/stock-valuation-product.png)

In Odoo, automatic inventory valuation records are also recorded in the
*Accounting* app. To access these accounting entries, navigate to
`Accounting --> Journal Entries`, and look for inventory valuation
entries with the <span class="title-ref">STJ</span> prefix in the
`Journal` and `Number` columns, respectively.

![Accounting entry for the inventory valuation of 10
tables.](using_inventory_valuation/inventory-valuation-entry.png)

### Deliver a product

In the same logic, when a table is shipped to a customer and leaves the
warehouse, the stock valuation decreases. The `Valuation` smart button
on the `DO (Delivery Order)`, likewise, displays the stock valuation
record as it does on a `PO (Purchase Order)`

![Decreased stock valuation after a product is
shipped.](using_inventory_valuation/decreased-stock-valuation.png)

### The inventory valuation report

To view the current value of all products in the warehouse, go to
`Inventory app -->
Reporting --> Inventory Valuation`. The records in the table are
organized by product, and selecting a product's drop-down menu displays
detailed records with the `Date`, `Quantity`, and `Total Value` of the
inventory.

![Inventory valuation report showing multiple
products.](using_inventory_valuation/inventory-valuation-products.png)

<div class="note">

<div class="title">

Note

</div>

The `Inventory At Date` button, located in the top-left corner of the
`Stock
Valuation` dashboard, shows the inventory valuation of products
available during a prior specified date.

</div>

#### Update product unit price

For any company: lead times, supply chain failures, and other risk
factors can contribute to invisible costs. Although Odoo attempts to
accurately represent the stock value, *manual valuation* serves as an
additional tool to update the unit price of products.

<div class="important">

<div class="title">

Important

</div>

Manual valuation is intended for products that can be purchased and
received for a cost greater than 0, or have product categories set with
`Costing Method` set as either <span class="title-ref">Average Cost
(AVCO)</span> or <span class="title-ref">First In First Out
(FIFO)</span>.

</div>

![Add manual valuation of stock value to a
product.](using_inventory_valuation/add-manual-valuation.png)

Create manual valuation entries on the `Stock Valuation` dashboard by
first navigating to `Inventory app --> Reporting --> Inventory
Valuation`, and then click the little gray drop-down icon to the left of
a product's name, to then reveal stock valuation line items below as
well as a teal `+ (plus)` button on the right.

Click the teal `+ (plus)` button to open up the `Product Revaluation`
form, where updates to the calculation of inventory valuation can be
made, by increasing or decreasing the unit price of each product.

![Product revaluation form adding a value of $1.00 with the reason being
inflation.](using_inventory_valuation/product-revaluation.png)


---
## File: ./content/applications/inventory_and_mrp/inventory/management/lots_serial_numbers/lots.md

# Use lots to manage groups of products

*Lots* are one of the two ways to identify and track products in Odoo. A
lot usually indicates a specific batch of an item that was received, is
currently stored, or was shipped from a warehouse, but can also pertain
to a batch of products manufactured in-house, as well.

Manufacturers assign lot numbers to groups of products that have common
properties; this can lead to multiple goods sharing the same lot number.
This helps to identify a number of products in a single group, and
allows for end-to-end traceability of these products through each step
in their lifecycles.

Lots are useful for products that are manufactured or received in large
quantities (such as clothes or food), and can be used to trace a product
back to a group. This is especially useful when managing product recalls
or expiration dates.

<div class="seealso">

`/applications/inventory_and_mrp/inventory/management/lots_serial_numbers/serial_numbers`

</div>

## Enable lots & serial numbers

To track products using lots, the *Lots & Serial Numbers* feature must
be enabled. Go to the `Inventory app --> Configuration --> Settings`,
scroll down to the `Traceability` section, and click the box next to
`Lots & Serial Numbers`. Then, click the `Save` button to save changes.

![Enabled lots and serial numbers feature in inventory
settings.](lots/lots-enabled-lots-setting.png)

## Track products by lots

Once the `Lots & Serial Numbers` setting has been activated, individual
products can now be configured to be tracked using lots. To do this, go
to the `Inventory app -->
Products --> Products`, and choose a product.

Once on the product form, click `Edit` to make changes to the form.
Then, click the `Inventory` tab. In the `Traceability` section, click
`By Lots`. Then, click `Save` to save changes. Existing or new lot
numbers can now be assigned to newly-received or manufactured batches of
this product.

<div class="important">

<div class="title">

Important

</div>

If a product has stock on-hand prior to activating tracking by lots or
serial numbers, an inventory adjustment might need to be performed to
assign lot numbers to the existing stock.

</div>

![Enabled tracking by lots feature on product
form.](lots/lots-tracking-product-form.png)

### Create new lots for products already in stock

New lots can be created for products already in stock with no assigned
lot number. To do this, go to the `Inventory app --> Products -->
Lots/Serial Numbers`, and click `Create`. Doing so reveals a separate
page where a new `Lot/Serial Number` is generated automatically.

<div class="tip">

<div class="title">

Tip

</div>

While Odoo automatically generates a new `Lot/Serial Number` to follow
the most recent number, it can be edited and changed to any desired
number, by clicking the line under the `Lot/Serial Number` field, and
changing the generated number.

</div>

Once the new `Lot/Serial Number` is generated, click the blank field
next to `Product` to reveal a drop-down menu. From this menu, select the
product to which this new number will be assigned.

This form also provides the option to adjust the `Quantity`, assign a
unique `Internal Reference` number (for traceability purposes), and
assign this specific lot or serial number configuration to a specific
website in the `Website` field (if working in a multi-website
environment).

A detailed description of this specific lot or serial number can also be
added in the `Description` tab below.

When all desired configurations are complete, click the `Save` button to
save all changes.

![New lot number creation form with assigned
product.](lots/lots-new-lot-number.png)

After a new lot number has been created, saved, and assigned to the
desired product, navigate back to the product form in the `Inventory`
app, by going to `Products -->
Products`, and selecting the product to which this newly-created lot
number was just assigned.

On that product's detail form, click the `Lot/Serial Numbers` smart
button to view the new lot number. When additional quantity of this
product is received or manufactured, this new lot number can be selected
and assigned to it.

## Manage lots for shipping and receiving

Lot numbers can be assigned for both **incoming** and **outgoing**
goods. For incoming goods, lot numbers are assigned directly on the
purchase order form. For outgoing goods, lot numbers are assigned
directly on the sales order form.

### Manage lots on receipts

Assigning lot numbers to **incoming** goods can be done directly from
the purchase order (PO).

To create a `PO (purchase order)`, go to `Purchase app --> Create`.
Doing so reveals a new, blank request for quotation (RFQ) form.

On this `RFQ (request for quotation)`, fill out the necessary
information by adding a `Vendor`, and adding the desired products to the
`Product` lines, by clicking `Add a product` (under the `Products` tab).

Choose the desired quantity of the product to order by changing the
number in the `Quantity` column.

Once the `RFQ (request for quotation)` has been filled out, click
`Confirm Order`. When the `RFQ (request for quotation)` is confirmed, it
becomes a `Purchase Order`, and a `Receipt` smart button appears. Click
the `Receipt` smart button to be taken to the warehouse receipt form.

<div class="note">

<div class="title">

Note

</div>

Clicking `Validate` before assigning a lot number to the ordered product
quantities will result in a `User Error` pop-up. The pop-up requires
entry of a lot or serial number for the ordered products. The `RFQ
(request for quotation)` **cannot** be validated without a lot number
being assigned.

</div>

![Add lot/serial number user error
popup.](lots/lots-user-error-popup.png)

From here, click the `Additional Options` menu, represented by a
`hamburger
(four horizontal lines)` icon, located to the right of the `Unit of
Measure` column in the `Operations` tab). Clicking that icon reveals a
`Detailed Operations` pop-up.

In this pop-up, configure a number of different fields, including the
assignation of a lot number, under the `Lot/Serial Number Name` column,
located at the bottom of the pop-up.

There are two ways to assign lot numbers: **manually** and
**copy/paste**.

  - **Manually assign lot numbers**: Click `Add a line` and choose the
    location the products will be stored in under the `To` column. Then,
    type a new `Lot Number Name` and set the `Done` quantity.
    
    > ![Assign lot number detailed operations
    > popup.](lots/lots-assign-lot-number-popup.png)
    > 
    > <div class="note">
    > 
    > <div class="title">
    > 
    > Note
    > 
    > </div>
    > 
    > If quantities should be processed in multiple locations and lots,
    > click `Add a line` and type a new `Lot Number Name` for additional
    > quantities. Repeat until the `Quantity Done` matches the `Demand`.
    > 
    > </div>

  - **Copy/paste lot numbers from a spreadsheet**: Populate a
    spreadsheet with all of the lot numbers received from the supplier
    (or manually chosen to assign upon receipt). Then, copy and paste
    them in the `Lot/Serial Number Name` column. Odoo will automatically
    create the necessary number of lines based on the amount of numbers
    pasted in the column. From here, the `To` locations and `Done`
    quantities can be manually entered in each of the lot number lines.
    
    > ![List of lot numbers copied on excel
    > spreadsheet.](lots/lots-excel-spreadsheet.png)

Once all product quantities have been assigned a lot number, click
`Confirm` to close the pop-up. Then, click `Validate`.

A `Traceability` smart button appears upon validating the receipt. Click
the `Traceability` smart button to see the updated `Traceability
Report`, which includes: a `Reference` document, the `Product` being
traced, the `Lot/Serial #` assigned, and more.

### Manage lots on delivery orders

Assigning lot numbers to **outgoing** goods can be done directly from
the sales order (SO).

To create an `SO (sales order)`, go to the `Sales app --> Create`. Doing
so reveals a new, blank quotation form.

On this blank quotation form, fill out the necessary information by
adding a `Customer`, and adding products to the `Product` lines (in the
`Order Lines` tab) by clicking `Add a product`.

Then, choose the desired quantity to sell by changing the number in the
`Quantity` column.

Once the quotation has been filled out, click the `Confirm` button to
confirm the quotation. When the quotation is confirmed, it becomes an
`SO (sales order)`, and a `Delivery` smart button appears.

Click the `Delivery` smart button to view the warehouse receipt form for
that specific `SO (sales order)`.

From here, click the `Additional Options` menu, represented by a
<span class="title-ref">hamburger</span> icon (four horizontal lines,
located to the right of the `Unit of Measure` column in the `Operations`
tab). Clicking that icon reveals a `Detailed Operations` pop-up.

In the pop-up, a `Lot/Serial Number` will be chosen by default, with the
full `Reserved` quantity taken from that specific lot (if there is
enough stock in that particular lot).

If there is insufficient stock in that lot, or if partial quantities of
the `Demand` should be taken from multiple lots, change the quantity in
the `Done` column to only include that specific part of the total
quantity.

<div class="note">

<div class="title">

Note

</div>

The lot automatically chosen for delivery orders varies, depending on
the selected removal strategy (`FIFO (First In, First Out)`, `LIFO (Last
In, First Out)`, or `FEFO
(First Expiry, First Out)`). It will also depend on the quantity
ordered, and if there is enough quantity in one lot to fulfill the
order.

</div>

<div class="seealso">

`/applications/inventory_and_mrp/inventory/routes/strategies/removal`

</div>

Then, click `Add a line`, select an additional (different) `Lot/Serial
Number`, apply the rest of the `Done` quantities, and click `Confirm` to
close the pop-up. Lastly, click the `Validate` button to deliver the
products.

![Detailed operations popup for source lot number on sales
order.](lots/lots-detailed-operations-popup.png)

Upon validating the delivery order, a `Traceability` smart button
appears. Click the `Traceability` smart button to see the updated
`Traceability Report`, which includes a `Reference` document, the
`Product` being traced, the `Date`, and the `Lot/Serial #` assigned.

The `Traceability Report` can also include a `Reference` receipt from
the previous purchase order, if the product quantities shared the same
lot number.

## Manage lots for different operations types

In Odoo, the creation of new lots is only allowed upon **receiving**
products from a purchase order, by default. **Existing** lot numbers
cannot be used.

For sales orders, the opposite is true: new lot numbers cannot be
created on the delivery order, only existing lot numbers can be used.

To change the ability to use new (or existing) lot numbers on any
operation type, go to the `Inventory app --> Configuration -->
Operations Types`, and select the desired `Operation Type`.

For `Receipts`, found on the `Operations Types` page, the `Use
Existing Lots/Serial Numbers` option can be enabled, by clicking `Edit`,
and then clicking the checkbox beside the `Use Existing Lots/Serial
Numbers` option (in the `Traceability` section). Lastly, click the
`Save` button to save the changes.

For `Delivery Orders`, the `Create New Lots/Serial Numbers` option can
be enabled, by clicking `Edit`, and clicking the checkbox beside the
`Create New
Lots/Serial Numbers` option. Be sure to click the `Save` button to save
all changes.

![Enabled traceability setting on operations type
form.](lots/lots-operations-type-form.png)

<div class="tip">

<div class="title">

Tip

</div>

For inter-warehouse transfers involving products tracked by lots, it can
be useful to enable the `Use Existing Lots/Serial Numbers` option for
warehouse receipts.

</div>

## Lots traceability

Manufacturers and companies can refer to traceability reports to see the
entire lifecycle of a product: where (and when) it came from, where it
was stored, and who (and when) it went to.

To see the full traceability of a product, or group by lots, go to the
`Inventory app
--> Products --> Lots/Serial Numbers`. Doing so reveals the `Lots/Serial
Numbers` dashboard.

From here, products with lot numbers assigned to them will be listed by
default, and can be expanded to show the lot numbers those products have
assigned to them.

To group by lots (or serial numbers), begin by removing any filters in
the search bar. Then, click the `Group By` drop-down, select `Add Custom
Group`, and select `Lot/Serial Number` from the drop-down menu. Then,
click `Apply`.

Doing so displays all existing lots and serial numbers, and can be
expanded to show all quantities of products with that assigned number.

![Lots and serial numbers traceability
report.](lots/lots-traceability-report.png)

<div class="seealso">

`/applications/inventory_and_mrp/inventory/management/lots_serial_numbers/differences`

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/management/lots_serial_numbers/serial_numbers.md

# Use serial numbers to track products

*Serial numbers* are one of the two ways to identify and track products
in Odoo. A serial number is a unique identifier assigned incrementally
(or sequentially) to an item or product, used to distinguish it from
other items and products.

Serial numbers can consist of many different types of characters: they
can be strictly numerical, they can contain letters and other
typographical symbols, or they can be a mix of all of the above.

The goal of assigning serial numbers to individual products is to make
sure that every item's history is identifiable when it travels through
the supply chain. This can be especially useful for manufacturers that
provide after-sales services to products that they sell and deliver.

<div class="seealso">

`/applications/inventory_and_mrp/inventory/management/lots_serial_numbers/lots`

</div>

## Enable lots & serial numbers

To track products using serial numbers, the `Lots & Serial Numbers`
feature must be enabled. To enable this, go to `Inventory app -->
Configuration --> Settings`, scroll down to the `Traceability` section,
and click the box next to `Lots & Serial
Numbers`. Remember to click the `Save` button to save changes.

![Enabled lots and serial numbers
setting.](serial_numbers/serial-numbers-enabled-setting.png)

## Configure serial number tracking on products

Once the `Lots & Serial Numbers` setting has been activated, individual
products can now be tracked using serial numbers. To configure this, go
to `Inventory app --> Products
--> Products`, and choose a desired product to track.

Once on the product form, click `Edit`, and click the `Inventory` tab.

Once on the product form, click `Edit`, navigate to the `Inventory` tab,
and scroll to the `Traceability` section. Then, select the `By Unique
Serial Number` option, and click `Save` to save the changes. Existing or
new serial numbers can now be selected and assigned to newly-received or
manufactured batches of this product.

![Enabled serial number tracking on product
form.](serial_numbers/serial-numbers-product-tracking.png)

<div class="warning">

<div class="title">

Warning

</div>

If a product doesn't have a serial number assigned to it, a user error
pop-up window will appear. The error message states that the product(s)
in stock have no lot/serial number. However, a lot/serial number can be
assigned to the product by making an inventory adjustment.

</div>

### Create new serial numbers for products already in stock

New serial numbers can be created for products already in stock with no
assigned serial number. To do this, go to `Inventory --> Products -->
Lots/Serial Numbers`, and click `Create`. Doing so reveals a blank
lots/serial numbers form. On this form, a new `Lot/Serial Number` is
generated automatically.

<div class="tip">

<div class="title">

Tip

</div>

While Odoo automatically generates a new lot/serial number to follow the
most recent number, it can be edited and changed to any desired number,
by clicking the line under the `Lot/Serial Number` field, and changing
the generated number.

</div>

Once the `Lot/Serial Number` is generated, click the blank field next to
`Product` to reveal a drop-down menu. From this menu, select the product
to which this new number will be assigned.

This form also provides the option to adjust the `Quantity`, to assign a
unique `Internal Reference` number (for traceability purposes), and to
assign this specific lot/serial number configuration to a specific
website in the `Website` field (if working in a multi-website
environment).

A detailed description of this specific lot/serial number can also be
added in the `Description` tab below.

When all desired configurations are complete, click the `Save` button to
save all changes.

![New serial number created for existing product
stock.](serial_numbers/serial-numbers-new-serial-number.png)

After a new serial number has been created, assigned to the desired
product, and saved, navigate back to the product form, by going to
`Products --> Products`, and selecting the product that this
newly-created serial number was just assigned to.

On that product's detail form, click the `Lot/Serial Numbers` smart
button to view the new serial number.

## Manage serial numbers for shipping and receiving

Serial numbers can be assigned for both **incoming** and **outgoing**
goods. For incoming goods, serial numbers are assigned directly on the
purchase order form. For outgoing goods, serial numbers are assigned
directly on the sales order form.

### Manage serial numbers on receipts

Assigning serial numbers to **incoming** goods can be done directly from
the purchase order (PO).

To create a `PO (purchase order)`, go to the `Purchase app --> Create`.
Doing so reveals a new, blank request for quotation (RFQ) form.

On this `RFQ (request for quotation)` form, fill out the necessary
information, by adding a `Vendor`, and by adding the desired products to
the `Product` lines, by clicking `Add a product`, under the `Products`
tab.

Choose the desired quantity of the product to order, by changing the
number in the `Quantity` column.

When the necessary configurations are complete, click `Confirm Order`.
This will convert the `RFQ (request for quotation)` to a purchase order.

Then, click the `Receipt` smart button to be taken to the warehouse
receipt form page for that specific `PO (purchase order)`.

<div class="warning">

<div class="title">

Warning

</div>

Clicking `Validate` before assigning a serial number to the ordered
product quantities will cause a `User Error` pop-up to appear. The
pop-up requires entry of a lot or serial number for the ordered
products. The `RFQ (request for quotation)` **cannot** be validated
without a serial number being assigned.

</div>

![User error popup prompting serial number
entry.](serial_numbers/serial-numbers-user-error-popup.png)

From here, click the `Additional Options` menu, represented by a
<span class="title-ref">hamburger</span> icon (four horizontal lines,
located to the right of the `Unit of Measure` column in the `Operations`
tab). Clicking that icon reveals a `Detailed Operations` pop-up.

In this pop-up, configure a number of different fields, including the
assignation of a serial number (or serial numbers) under the `Lot/Serial
Number Name` column, located at the bottom of the pop-up.

There are three ways to do this: manually assigning serial numbers,
automatically assigning serial numbers, and copy/pasting serial numbers
from a spreadsheet.

#### Assign serial numbers manually

To assign serial numbers manually, click `Add a line` from the `Detailed
Operations` pop-up, and first choose the location where the product will
be stored under the `To` column.

Then, type a new `Serial Number Name`, and set the `Done` quantity in
the appropriate columns.

Repeat this process for the quantity of products shown in the `Demand`
field, and until the `Quantity Done` field displays the correct
(matching) number of products processed.

#### Assign serial numbers automatically

If a large quantity of products need individual serial numbers assigned
to them, Odoo can automatically generate and assign serial numbers to
each of the individual products.

To accomplish this, start with the `First SN` field in the `Detailed
Operations` pop-up window, and type the first serial number in the
desired order to be assigned.

Then, in the `Number of SN` field, type the total number of items that
need newly-generated unique serial numbers assigned to them.

Finally, click `Assign Serial Numbers`, and a list will populate with
new serial numbers matching the ordered quantity of products.

![Automatic serial number assignment in detailed operations
popup.](serial_numbers/serial-numbers-auto-assign-sn.png)

#### Copy/paste serial numbers from a spreadsheet

To copy and paste serial numbers from an existing spreadsheet, first
populate a spreadsheet with all of the serial numbers received from the
supplier (or manually chosen upon receipt). Then, copy and paste them in
the `Lot/Serial Number Name` column. Odoo will automatically create the
necessary number of lines based on the amount of numbers pasted in the
column.

From here, the `To` locations and `Done` quantities can be manually
entered in each of the serial number lines.

![List of serial numbers copied in Excel
spreadsheet.](serial_numbers/serial-numbers-excel-spreadsheet.png)

<div class="tip">

<div class="title">

Tip

</div>

For purchase orders that include large quantities of products to
receive, the best method of serial number assignment is to automatically
assign serial numbers using the `Assign
Serial Numbers` button located on the `PO (purchase order)`. This
prevents any serial numbers from being reused or duplicated, and
improves traceability reporting.

</div>

Once all product quantities have been assigned a serial number, click
the `Confirm` button to close the pop-up. Then, click `Validate`.

A `Traceability` smart button appears upon validating the receipt. Click
the `Traceability` smart button to see the updated `Traceability
Report`, which includes: a `Reference` document, the `Product` being
traced, the `Lot/Serial #`, and more.

Once all product quantities have been assigned a serial number, click
`Confirm` to close the popup, and click `Validate`. A `Traceability`
smart button will appear upon validating the receipt. Click the
`Traceability` smart button to see the updated `Traceability Report`,
which includes: a `Reference` document, the `Product` being traced, the
`Lot/Serial #`, and more.

### Manage serial numbers on delivery orders

Assigning serial numbers to **outgoing** goods can be done directly from
the sales order (SO).

To create an `SO (sales order)`, navigate to the `Sales` app, and click
the `Create` button. Doing so reveals a new, blank quotation form. On
this blank quotation form, fill out the necessary information, by adding
a `Customer`, and adding products to the `Product` lines (in the `Order
Lines` tab), by clicking `Add a
product`.

Then, choose the desired quantity to sell by changing the number in the
`Quantity` column.

Once the quotation has been filled out, click the `Confirm` button to
confirm the quotation. When the quotation is confirmed, the quotation
becomes an `SO (sales order)`, and a `Delivery` smart button appears.

Click the `Delivery` smart button to view the warehouse receipt form for
that specific `SO (sales order)`.

From here, click the `Additional Options` menu, represented by a
<span class="title-ref">hamburger</span> icon (four horizontal lines,
located to the right of the `Unit of Measure` column in the `Operations`
tab). Clicking that icon reveals a `Detailed Operations` pop-up.

In the pop-up, a `Lot/Serial Number` will be chosen by default, with
each product of the total `Reserved` quantity listed with their unique
serial numbers (most likely listed in sequential order).

To manually change a product's serial number, click the drop-down menu
under `Lot/Serial
Number`, and choose (or type) the desired serial number. Then, mark the
`Done` quantities, and click `Confirm` to close the pop-up.

Finally, click the `Validate` button to deliver the products.

![Serial numbers listed in detailed operations
popup.](serial_numbers/serial-numbers-detailed-operations-popup.png)

Upon validating the delivery order, a `Traceability` smart button
appears. Click the `Traceability` smart button to see the updated
`Traceability Report`, which includes: a `Reference` document, the
`Product` being traced, the `Date`, and the `Lot/Serial #` assigned.

The `Traceability Report` can also include a `Reference` receipt from
the previous purchase order (PO), if any of the product quantities
shared a serial number assigned during receipt of that specific `PO
(purchase order)`.

## Manage serial numbers for different operations types

By default in Odoo, the creation of new serial numbers is only allowed
upon **receiving** products from a purchase order. **Existing** serial
numbers cannot be used. For sales orders, the opposite is true: new
serial numbers cannot be created on the delivery order, only existing
serial numbers can be used.

To change the ability to use new (or existing) serial numbers on any
operation type, go to `Inventory app --> Configuration --> Operations
Types`, and select the desired `Operation Type`.

For the `Receipts` operation type, found on the `Operations Types` page,
the `Use Existing Lots/Serial Numbers` option can be enabled, by
selecting `Receipts` from the `Operations Types` page, clicking `Edit`,
and then clicking the checkbox beside the `Use Existing Lots/Serial
Numbers` option (in the `Traceability` section). Lastly, click the
`Save` button to save the changes.

For the `Delivery Orders` operation type, located on the `Operations
Types` page, the `Create New Lots/Serial Numbers` option can be enabled,
by selecting `Delivery Orders` from the `Operations Types` page,
clicking `Edit`, and clicking the checkbox beside the `Create New
Lots/Serial Numbers` option (in the `Traceability` section). Be sure to
click `Save` to save changes.

![Enabled traceability setting in operations type
form.](serial_numbers/serial-numbers-operations-types.png)

## Serial number traceability

Manufacturers and companies can refer to the traceability reports to see
the entire lifecycle of a product: where it came from (and when), where
it was stored, and who it went to.

To see the full traceability of a product, or group by serial numbers,
go to `Inventory app --> Products --> Lots/Serial Numbers`. Doing so
reveals the `Lots/Serial Numbers` dashboard.

From here, products with serial numbers assigned to them will be listed
by default, and can be expanded to show what serial numbers have been
specifically assigned to them.

To group by serial numbers (or lots), first remove any default filters
from the search bar in the upper-right corner. Then, click `Group By`,
and select `Add Custom Group`, which reveals a mini drop-down menu. From
this mini drop-down menu, select `Lot/Serial Number`, and click `Apply`.

Doing so reveals all existing serial numbers and lots, and can be
expanded to show all quantities of products with that assigned number.
For unique serial numbers that are not reused, there should be just one
product per serial number.

![Serial numbers reporting page with drop-down
lists.](serial_numbers/serial-numbers-reporting-page.png)

<div class="tip">

<div class="title">

Tip

</div>

For additional information regarding an individual serial number (or lot
number), click the line item for the serial number to reveal that
specific serial number's `Serial Number` form. From this form, click the
`Location` and `Traceability` smart buttons to see all stock on-hand
using that serial number, and any operations made using that serial
number.

</div>

<div class="seealso">

`/applications/inventory_and_mrp/inventory/management/lots_serial_numbers/differences`

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/management/lots_serial_numbers/expiration_dates.md

# Expiration dates

In Odoo, *expiration dates* can be used to manage and track the
lifecycles of perishable products, from purchase to sale. Using
expiration dates reduces product loss due to unexpected expiry, and
helps to avoid sending expired products to customers.

In Odoo, only products that are tracked using *lots* and *serial
numbers* can be assigned expiration information. Once a lot or serial
number has been assigned, an expiration date can be set. This is
especially helpful for companies (such as food manufacturers) that
consistently, or exclusively, buy and sell perishable products.

<div class="seealso">

\-
`/applications/inventory_and_mrp/inventory/management/lots_serial_numbers/lots`
-
`/applications/inventory_and_mrp/inventory/management/lots_serial_numbers/serial_numbers`

</div>

## Enable expiration dates

To enable the use of *expiration dates*, go to `Inventory app -->
Configuration -->
Settings`, and scroll down to the `Traceability` section. Then, click
the checkbox to enable the `Lots & Serial Numbers` feature.

Once that feature is activated, a new option will appear to enable
`Expiration Dates`. Click that checkbox to enable the feature, and be
sure to `Save` changes.

![Enabled lots and serial numbers and expiration dates
settings.](expiration_dates/expiration-dates-enabled-settings.png)

<div class="tip">

<div class="title">

Tip

</div>

Once the `Lots & Serial Numbers` feature is activated, additional
features appear to `Display Lots & Serial Numbers on Delivery Slips`; to
`Display Lots & Serial
Numbers on Invoices`; and to `Display Expiration Dates on Delivery
Slips`. Activating these features helps with end-to-end traceability,
making it easier to manage product recalls, identify "bad" batches of
products, and more.

</div>

## Configure expiration dates on products

Once the `Lots & Serial Numbers` and `Expiration Dates` features have
been enabled in the settings of the *Inventory* app, expiration
information can be configured on individual products.

To do so, go to `Inventory app --> Products --> Products`, and select a
product to edit. Selecting a product reveals the product form for that
particular item. Once on the product form, click `Edit` in the
upper-left corner to make changes.

<div class="important">

<div class="title">

Important

</div>

To be tracked using lots or serial numbers, or to configure expiration
information, products *must* have their `Product Type` set as `Storable
Product` under the `General Information` tab.

</div>

Then, click the `Inventory` tab, and scroll down to the `Traceability`
section. From here, make sure that either `By Unique Serial Number` or
`By Lots` is checked.

Once it is, a new `Expiration Date` checkbox appears that must also be
clicked. When both are enabled, a new `Dates` field appears to the
right.

<div class="note">

<div class="title">

Note

</div>

If a product has stock on-hand prior to activating tracking by lots or
serial numbers, an inventory adjustment might need to be performed in
order to assign lot numbers to the existing stock.

</div>

<div class="tip">

<div class="title">

Tip

</div>

For processing large quantities of products on receipts or deliveries,
it is recommended to track using lots, so multiple products can be
traced back to the same lot, if any issues arise.

</div>

![Expiration dates configuration on the product
form.](expiration_dates/expiration-dates-product-configuration.png)

Under the `Dates` field, there are four categories of expiration
information to configure for the product:

  - `Expiration Time`: the number of days after receiving products
    (either from a vendor or in stock after production) in which goods
    may become dangerous and should not be used or consumed.
  - `Best Before Time`: the number of days before the expiration date in
    which the goods start deteriorating, **without** necessarily being
    dangerous yet.
  - `Removal Time`: the number of days before the expiration date in
    which the goods should be removed from stock.
  - `Alert Time`: the number of days before the expiration date in which
    an alert should be raised on goods in a particular lot or containing
    a particular serial number.

<div class="note">

<div class="title">

Note

</div>

The values entered into these fields automatically compute the
expiration date for goods entered into stock, whether purchased from a
vendor or manufactured in-house.

</div>

Once all the expiration information has been configured, click `Save` to
save all changes.

<div class="tip">

<div class="title">

Tip

</div>

If the `Dates` field is not populated with any values for expiration
information, dates (and lots) can be manually assigned upon receipts and
deliveries in and out of the warehouse. Even when assigned, they can
still be overwritten and changed manually if needed, as well.

</div>

## Set expiration dates on receipts with lots & serial numbers

Generating expiration dates for **incoming** goods can be done directly
from the purchase order. To create a purchase order, go to the
`Purchase` app and click `Create` to create a new request for quotation
(RFQ).

Then, fill out the information by adding a `Vendor`, and add products to
the `Product` lines by clicking `Add a product`.

Choose the desired quantity to order by changing the number in the
`Quantity` column, and click `Confirm Order`. This converts the `RFQ
(request for quotation)` into a purchase order.

Click the `Receipt` smart button at the top of the purchase order to be
taken to the warehouse receipt form.

<div class="note">

<div class="title">

Note

</div>

Clicking `Validate` before assigning a serial number to the ordered
product quantities causes a `User Error` popup to appear. The popup
requires entry of a lot or serial number for the ordered products. The
`RFQ (request for quotation)` cannot be validated without an assigned
lot or serial number.

![User error popup when validating an order with no lot
number.](expiration_dates/expiration-dates-user-error-popup.png)

</div>

From here, click the `Additional Options` menu (hamburger) icon located
on the far-right of the product line. When clicked, a `Detailed
Operations` pop-up will appear.

In this pop-up, click `Add a line`, and assign a lot or serial number
under the `Lot/Serial Number Name` field.

An expiration date automatically populates, based on the configuration
on the product form (if previously configured).

<div class="tip">

<div class="title">

Tip

</div>

If the `Dates` field on the product form has not been configured, this
date can be manually entered.

</div>

After the expiration date has been established, mark the `Done`
quantities, and click `Confirm` to close the pop-up. Finally, click
`Validate`.

![Detailed operations popup showing expiration dates for ordered
products.](expiration_dates/expiration-dates-detailed-operations-popup.png)

A `Traceability` smart button will appear upon validating the receipt.
Click the `Traceability` smart button to see the updated `Traceability
Report`, which includes: a `Reference` document; the `Product` being
traced; the `Lot/Serial #`; and more.

## Set expiration dates on manufactured products

Expiration dates can also be generated for products manufactured
in-house. To assign expiration dates to manufactured products, a
manufacturing order (MO) needs to be completed.

To create a `MO (manufacturing order)`, go to `Manufacturing app -->
Operations
--> Manufacturing Orders`, and click `Create`. Choose a product to
manufacture from the `Product` field drop-down menu, then select the
`Quantity` to produce.

![Manufacturing order for product with expiration
date.](expiration_dates/expiration-dates-manufacturing-order.png)

<div class="note">

<div class="title">

Note

</div>

To manufacture a product, there must be materials to consume in the
lines in the `Product` column. This can be achieved either by creating a
`Bill of
Material` for the `Product`, or manually adding materials to consume by
clicking `Add a line`.

</div>

Once ready, click `Confirm`.

Next to `Lot/Serial Number`, either select an existing lot number from
the drop-down menu, or click the green `+` sign to automatically assign
a new lot number.

Then, select a number of units for the `Quantity` field, and click `Mark
as
Done`.

Click on the `External Link` icon in the assigned `Lot/Serial Number`
field. A pop-up appears, revealing a detail form for that specific
number.

On that pop-up, under the `Dates` tab, all expiration information that
was previously configured for the product is displayed. That same
information is also available on the detail form for that specific
product, or by going to `Inventory app --> Products --> Lots/Serial
Numbers`.

![Dates tab with expiration information for specific lot
number.](expiration_dates/expiration-dates-dates-tab-lot-number.png)

## Sell products with expiration dates

Selling perishable products with expiration dates is done the same as
any other type of product. The first step in selling perishable products
is to create a sales order.

To do that, go to `Sales app --> Create` to create a new quotation, and
fill out the information on the sales order form.

Add a `Customer`, click `Add a product` to add the desired products to
the `Product` lines, and set a `Quantity` for the products.

Then, click the `Other Info` tab. Under the `Delivery` section, change
the `Delivery Date` to a date after the expected date, and click the
`green
checkmark` icon to confirm the date. Finally, click `Confirm` to confirm
the sales order.

Next, click the `Delivery` smart button at the top of the sales order to
see the warehouse receipt form.

On the warehouse receipt form, click `Validate`, and then `Apply` in the
accompanying pop-up window, to automatically process all `Done`
quantities, and deliver the products to the customer.

If the products are delivered before the `Alert Date` set on the product
form, then no alerts will be created.

<div class="important">

<div class="title">

Important

</div>

To sell perishable products with expiration dates, the `Removal
Strategy` for the `Location` the products are stored in must be set to
`FEFO (First Expiry, First
Out)`. If there is not enough stock of perishable products in one lot,
Odoo will automatically take the remaining quantity required from a
second lot with the next-soonest expiration date. Removal strategies can
also be set on `Product Categories`.

</div>

<div class="seealso">

`/applications/inventory_and_mrp/inventory/routes/strategies/removal`

</div>

## View expiration dates for lots & serial numbers

To view (and/or group) all products with expiration dates by lot number,
go to `Inventory app --> Products --> Lots/Serial Numbers`.

Once there, remove any default search filters from the `Search...` bar.
Then, click `Group By`, choose `Add Custom Group`, and select the
`Expiration
Date` parameter from the drop-down menu. Finally, click `Apply` to apply
the filter.

Doing so breaks down all perishable products, their expiration dates,
and the assigned lot number.

![Group by expiration dates on lots and serial numbers
page.](expiration_dates/expiration-dates-group-by-dates.png)

### Expiration alerts

To see expiration alerts, go to `Inventory app --> Products -->
Lots/Serial Numbers`.

Then, click into a `Lot/Serial Number` with perishable products. Doing
so reveals the serial number detail form. On the serial number detail
form, click the `Dates` tab to see all expiration information related to
the products.

To edit the form, click `Edit` in the upper-left corner of the form,
then change the `Expiration Date` to today's date (or earlier), and
click `Save` to save changes.

After saving, the lot number form displays a red `Expiration Alert` at
the top of the form to indicate that the products in this lot are either
expired or expiring soon. From here, click back to the `Lots/Serial
Numbers` page (via the breadcrumbs).

To see the new expiration alert, or any expiration alerts for products
that are expired (or will expire soon), remove all of the search filters
from the `Search...` bar on the `Lots/Serial Numbers` dashboard.

Then, click `Filters`, and choose `Expiration Alerts`.

![Expiration alert for product past the expiration
date.](expiration_dates/expiration-dates-expiration-alert.png)


---
## File: ./content/applications/inventory_and_mrp/inventory/management/lots_serial_numbers/differences.md

# What's the difference between lots and serial numbers?

## Introduction

In Odoo, lots and serial numbers have similarities in their functional
system but are different in their behavior. They are both managed within
the **Inventory**, **Purchases** and **Sales** app.

**Lots** correspond to a certain number of products you received and
store altogether in one single pack.

**Serial numbers** are identification numbers given to one product in
particular, to allow to track the history of the item from reception to
delivery and after-sales.

### When to use

**Lots** are interesting for products you receive in great quantity and
for which a lot number can help in reportings, quality controls, or any
other info. Lots will help identify a number of pieces having for
instance a production fault. It can be useful for a batch production of
clothes or food.

**Serial numbers** are interesting for items that could require
after-sales service, such as smartphones, laptops, fridges, and any
electronic devices. You could use the manufacturer's serial number or
your own, depending on the way you manage these products

### When not to use

Storing consumable products such as kitchen roll, toilet paper, pens and
paper blocks in lots would make no sense at all, as there are very few
chances that you can return them for production fault.

On the other hand, giving a serial number to every product is a
time-consuming task that will have a purpose only in the case of items
that have a warranty and/or after-sales services. Putting a serial
number on bread, for instance, makes no sense at all.

<div class="seealso">

\* `serial_numbers` \* `lots`

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/management/planning.md

  - nosearch

# Planning

<div class="toctree" data-titlesonly="" data-glob="">

planning/scheduled\_dates

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/management/warehouses/warehouse_replenishment_transfer.md

# Transfer products between warehouses using replenishment

For companies that use multiple warehouses, it is often necessary to
transfer items between them. This is referred to as an *inter-warehouse
transfer*. Odoo *Inventory* handles the administrative process of
inter-warehouse transfers to ensure that inventory counts remain
accurate during and after the transfer. This document will detail the
method for conducting an inter-warehouse transfer using replenishment.

## Configure warehouses for inter-warehouse replenishment

First, ensure the `Multi-Step Routes` setting is enabled by navigating
to `Inventory --> Configuration --> Settings`, and then check the box
under the `Warehouse` tab. This will provide additional configuration
options when creating a second warehouse that are needed for
inter-warehouse replenishment.

By default, Odoo comes with a main warehouse already configured. If an
additional warehouse has not already been created, do so now from the
`Inventory` module by selecting `Configuration --> Warehouses -->
Create`. Otherwise, select the warehouse that products will be
transferred to from the `Warehouses` page and then click `Edit` to
change its settings. Configure the warehouse as follows:

  - `Warehouse`: choose a name that is not already being used for
    another warehouse (e.g. <span class="title-ref">Alternative
    Warehouse</span>)
  - `Short Name`: choose a short name by which the warehouse will be
    identified (e.g. <span class="title-ref">ALT\_WH</span>)

Click `Save` and the new warehouse will be created. In addition, a new
`Resupply
From` field will appear on the warehouse's form. Click `Edit` and then
check the box next to the warehouse that will be used to resupply the
warehouse that is currently being configured.

![A warehouse settings form configured to allow resupplying between
warehouses.](warehouse_replenishment_transfer/new-warehouse-configuration.png)

<div class="note">

<div class="title">

Note

</div>

For the purposes of this demonstration, the warehouse that products are
transferred from (outgoing) will be titled "San Francisco", and the
warehouse that products are transferred to (incoming) will be titled
"San Francisco 2".

</div>

## Configure products for inter-warehouse replenishment

Products must also be configured properly in order for them to be
transferred between warehouses. Navigate to `Inventory --> Products -->
Products` and select an existing product or `Create` a new one, if
necessary.

Then, on the product form, go to the `Inventory` tab and enable the
checkbox for `X: Supply Product from Y`, with *X* being the warehouse
receiving the transferred products and *Y* being the warehouse that
products are transferred from.

![Enable the checkbox to resupply one warehouse from
another.](warehouse_replenishment_transfer/product-transfer-configuration.png)

## Replenish one warehouse from another

Starting in the `Inventory` module, select `Products --> Products` and
then choose the product that will be replenished. Click the `Replenish`
button on the top left of the product page and fill out the pop-up form
as follows:

  - `Quantity`: the number of units that will be sent to the warehouse
    being replenished
  - `Scheduled Date`: the date that the replenishment is scheduled to
    take place
  - `Warehouse`: the warehouse that will be replenished
  - `Preferred Routes`: select <span class="title-ref">X: Supply Product
    from Y</span>, with *X* being the warehouse to be replenished and
    *Y* being the warehouse that the product will be transferred from

![The form for replenishing a
product.](warehouse_replenishment_transfer/product-replenishment-form.png)

Click `Confirm` and a delivery order will be created for the outgoing
warehouse along with a receipt for the warehouse that will receive the
product. Depending on the configuration settings for the outgoing and
incoming warehouses, processing delivery orders and receipts will
require between one and three steps. This document will detail how to
process one-step deliveries and receipts.

### Process the delivery order

The first stage of a replenishment order is processing the delivery from
the warehouse that the product is being transferred from. On the
`Inventory` dashboard, select the `X to Process` button on the `Delivery
Orders` card for the outgoing warehouse, then the delivery order created
for the replenishment. On the delivery order page, click the `Check
Availability` button in the top left to reserve the quantity of the
product to be transferred. Once the delivery has been dispatched, click
the `Validate` button to register the quantities shipped.

![The delivery orders card for the outgoing
warehouse.](warehouse_replenishment_transfer/delivery-orders-card.png)

### Process the receipt

Once the goods arrive at the incoming warehouse, the receipt created for
that warehouse must be processed as well. Return to the `Inventory`
dashboard and select the `X to
Process` button on the `Receipts` card for the incoming warehouse, then
the receipt created for the replenishment. On the receipt page, click
the `Validate` button in the top left of the page to register the
quantities received.

![The delivery orders card for the outgoing
warehouse.](warehouse_replenishment_transfer/receipts-card.png)

After processing the receipt, the products transferred will now appear
in the inventory of the incoming warehouse. The stock numbers for both
warehouses can be viewed by returning to the product page and selecting
the `X Units On Hand` button at the top of the screen.

## Automate inter-warehouse replenishment

Using reordering rules, it is possible to automate the process of
replenishing one warehouse from another.

To get started, navigate to `Inventory --> Products --> Products`, and
then choose the product that will be replenished. From the product page,
select the `Reordering
Rules` smart button at the top of the form, and then on the next page,
click `Create` to configure the form as follows:

  - `Location`: the location that the reordering rule will replenish
    when triggered, in this case, the incoming warehouse
  - `Min Quantity`: when the quantity on hand at the incoming warehouse
    falls below this number, the reordering rule will be triggered
  - `Max Quantity`: when the reordering rule is triggered, the product
    will be replenished at the incoming warehouse up to this quantity
  - `Multiple Quantity`: specify if the product should be replenished in
    batches of a certain quantity; for example, a product could be
    replenished in batches of 20
  - `UoM`: the unit of measure used for reordering the product; this
    value can simply be <span class="title-ref">Units</span>, or a
    specific unit of measurement for weight, length, etc.

![A fully configured reordering
rule.](warehouse_replenishment_transfer/reordering-rule-configuration.png)

Finish by clicking `Save` and the reordering rule will be created. Now,
when the scheduler runs automatically each day, a transfer will be
created for each reordering rule that has been triggered.

<div class="tip">

<div class="title">

Tip

</div>

To manually trigger reordering rules, start from the `Inventory` module
and select `Operation --> Run Scheduler`, then click the green `Run
Scheduler` button in the pop-up that appears.

</div>

After the scheduler runs, a delivery order and receipt will be created
for the outgoing and incoming warehouses, respectively. Both the
delivery order and receipt should be processed using the same method as
detailed above.


---
## File: ./content/applications/inventory_and_mrp/inventory/management/warehouses/create_a_second_warehouse.md

# Create a second warehouse

A *warehouse* is a physical building or space where items are stored. In
Odoo, it is possible to set up multiple warehouses and transfer stored
items between them.

By default, the Odoo platform has one warehouse that is already
configured, with the address set as the company's address. To create a
second warehouse, select `Configuration -->
Warehouses`, then click `Create` and configure the form as follows:

  - `Warehouse`: the full name of the warehouse
  - `Short Name`: the abbreviated code by which the warehouse is
    referred to; the short name for the default warehouse in Odoo is
    **WH**
  - `Company`: the company that owns the warehouse; this can be set as
    the company that owns the Odoo database or the company of a customer
    or vendor
  - `Address`: the address where the warehouse is located

<div class="important">

<div class="title">

Important

</div>

The options below will only appear if the `Multi-Step Routes` checkbox
is enabled in `Configuration --> Settings` under the `Warehouse`
heading. For more information about routes and how they work in Odoo,
see `Using Routes and Pull/Push Rules
<use-routes>`.

</div>

  - `Incoming/Outgoing Shipments`: select the routes that incoming and
    outgoing shipments should follow
  - `Resupply Subcontractors`: allow subcontractors to be resupplied
    from this warehouse
  - `Manufacture to Resupply`: allow for items to be manufactured in
    this warehouse
  - `Manufacture`: select the route that should be followed when
    manufacturing goods inside the warehouse
  - `Buy to Resupply`: check the box to allow for purchased products to
    be delivered to the warehouse
  - `Resupply From`: select warehouses that can be used to resupply the
    warehouse being created

![A filled out form for creating a new
warehouse.](create_a_second_warehouse/new-warehouse-configuration.png)

<div class="important">

<div class="title">

Important

</div>

Creating a second warehouse will automatically enable the *Storage
Locations* setting, which allows location tracking of products within a
warehouse. To toggle this setting, navigate to `Configuration -->
Settings` and click the checkbox under the `Warehouse` heading.

</div>

After filling out the form, click `Save` and the new warehouse will be
created.

## Add inventory to a new warehouse

If a new warehouse is created that has existing inventory in it, the
inventory counts should be added to Odoo so that the stock listed in the
Odoo database reflects what is in the physical warehouse. To add
inventory to a new warehouse, navigate to `Inventory -->
Operations --> Inventory Adjustments`, and then click `Create`. The
inventory adjustment form can then be filled out as follows:

  - `Inventory Reference`: the name or code that the inventory
    adjustment can be referred to by
  - `Locations`: the location(s) where the inventory is stored; include
    the new warehouse and any locations within it that inventory will be
    added to
  - `Products`: include all products that will be added to inventory or
    leave blank to select any product during the next step
  - `Include Exhausted Products`: include products with a quantity of
    zero; does not affect inventory adjustments for new warehouses since
    they have no existing inventory
  - `Accounting Date`: the date used by accounting teams for bookkeeping
    related to the inventory
  - `Company`: the company that owns the inventory; can be set as the
    user's company or as a customer or vendor
  - `Counted Quantities`: choose whether the counted quantities for
    products being added should default to stock on hand or zero; does
    not affect inventory adjustments for new warehouses since they have
    no existing inventory

![A filled out form for an inventory
adjustment.](create_a_second_warehouse/inventory-adjustment-configuration.png)

Once the form is properly configured, click on `Start Inventory` to be
taken to the next page where products can be added to the inventory
adjustment. Add a new product by clicking on `Create` and then fill out
the product line as follows:

  - `Product`: the product being added to inventory
  - `Location`: the location where the product is currently stored in
    the new warehouse; this can be set as the overall warehouse or a
    location within the warehouse
  - `Lot/Serial Number`: the lot that the product belongs to or the
    serial number used to identify it
  - `On Hand`: the total quantity of the product stored in the location
    for which inventory is being adjusted; this should be zero for a new
    location or warehouse
  - `Counted`: the amount of the product that is being added to
    inventory
  - `Difference`: the difference between the *On Hand* and *Counted*
    values; this will automatically update to reflect the value entered
    in the `Counted` column
  - `UoM`: the unit of measure used for counting the product

![Include a line for each product being added to
inventory.](create_a_second_warehouse/product-line-configuration.png)

After adding all the products already stored in the new warehouse, click
`Validate
Inventory` to complete the inventory adjustment. The values in the `On
Hand` column will update to reflect those in the `Counted` column and
the products added will appear in the inventory of the new warehouse.


---
## File: ./content/applications/inventory_and_mrp/inventory/management/warehouses/difference_warehouse_location.md

# What is the difference between warehouses and locations?

<div id="inventory/management/difference-warehouse-location">

In Odoo, a **Warehouse** is the actual building/place in which your
items are stocked. You can setup multiple warehouses and create moves
between warehouses.

</div>

<div id="inventory/warehouses/location-definition">

A **Location**, is a specific space within your warehouse. It can be
considered as a sublocation of your warehouse, as a shelf, a floor, an
aisle, etc. Therefore, a location is part of one warehouse only and it
is not possible to link one location to multiple warehouses. You can
configure as many locations as you need under one warehouse.

</div>

There are 3 types of locations:

  - The **Physical Locations** are internal locations that are part of
    the warehouses for which you are the owner. They can be the loading
    and unloading area of your warehouse, a shelf or a department, etc.
  - The **Partner Locations** are spaces within a customer and/or
    vendor's warehouse. They work the same way as Physical Locations
    with the only difference being that you are not the owner of the
    warehouse.
  - The **Virtual Locations** are places that do not exist, but in which
    products can be placed when they are not physically in an inventory
    yet (or anymore). They come in handy when you want to place lost
    products out of your stock (in the **Inventory loss**), or when you
    want to take into account products that are on their way to your
    warehouse (**Procurements**).

In Odoo, locations are structured hierarchically. You can structure your
locations as a tree, dependent on a parent-child relationship. This
gives you more detailed levels of analysis of your stock operations and
the organization of your warehouses.


---
## File: ./content/applications/inventory_and_mrp/inventory/management/warehouses/use_locations.md

# Locations

A *location* is a specific space within a warehouse. This can be a
shelf, room, aisle, etc. There are three types of locations in Odoo:

  - *Physical locations* are spaces within a warehouse owned by the
    user's company. These can be a an area where items are stored like
    an aisle or shelf, or an area where operations take place, like
    loading and unloading bays.
  - *Partner locations* are the same as physical locations except that
    they exist within the warehouse of a customer or vendor.
  - *Virtual locations* are locations that do not exist physically, but
    where items that are not in inventory can be placed. These can be
    items that have not yet entered inventory, like products that are on
    the way to a warehouse, or items that are no longer in inventory due
    to loss or other factors.

<div class="important">

<div class="title">

Important

</div>

In order to use locations, the `Storage Locations` setting must be
enabled. To do so, navigate to `Inventory --> Configuration -->
Settings`, scroll down to the `Warehouse` heading, and enable the
`Storage Locations` checkbox.

</div>

## Create a new location inside a warehouse

Starting from the `Inventory` app, select `Configuration --> Locations
--> Create`. The new location form can then be configured as follows:

  - `Location Name`: the name that will be used to reference the
    location
  - `Parent Location`: the location or warehouse that the new location
    exists within
  - `Location Type`: choose the category that the location belongs to
  - `Company`: the company that owns the warehouse that the location is
    inside of
  - `Is a Scrap Location?`: check this box to allow for scrapped/damaged
    goods to be stored in this location
  - `Is a Return Location?`: check this box to allow products to be
    returned to this location
  - `Barcode`: the barcode number assigned to the location
  - `Removal Strategy`: the `strategy
    <inventory/routes/strategies/removal>` for how items should be taken
    from inventory

![The form for creating a new
location.](use_locations/new-location-form.png)

## Create location hierarchies

The *Parent Location* setting on the new location form allows for a
location to exist within a warehouse or another location. Every location
can serve as a parent location, and every parent location can have
multiple locations within it, allowing for the creation of a virtually
infinite hierarchical structure.

<div class="example">

Location hierarchy could be organized so that a shelf is located within
an aisle, which is located within a room, which is located within the
overall warehouse.

</div>

To create the location hierarchy in the example above, set the warehouse
as the parent of the room, the room as the parent of the aisle, and the
aisle as the parent of the shelf. This can be adapted to a hierarchy of
any magnitude.


---
## File: ./content/applications/inventory_and_mrp/inventory/management/products/usage.md

# Units of measure, packages, and packagings

In Odoo, there are a variety of ways to specify the amount of products
being bought, stocked, and sold. *Units of measure*, *packages*, and
*packagings* are all available to streamline inventory flows, allowing
for a variety of configurations for products as they enter and leave the
warehouse.

## Units of measure

A *unit of measure (UoM)* refers to any of the different standards used
to measure and handle a quanitifiable amount of products, such a units,
weight, time, or size. Different `UoMs (Units
of Measure)` for weight, for example, can be kilos, pounds, ounces,
grams, and so on.

In Odoo, stock management and purchasing from suppliers are streamlined
by specifying different `UoMs (Units of Measure)` for both buying and
selling products.

![Specify unit of measure for selling a product vs
purchasing.](usage/uom-on-product-form.png)

Once a product has a default `Unit of Measure` and `Purchase Unit of
Measure` set on the product form, Odoo automatically converts the
different units in the product's purchase/sales orders and the
corresponding delivery orders/receipts.

The only condition is that all of the units have to be in the *same
category* (unit, weight, volume, length, etc.).

<div class="example">

On the product form for <span class="title-ref">Rope</span>, the
following fields are set as:

  - `Unit of Measure` in <span class="title-ref">ft</span> (feet), and
  - `Purchase Unit of Measure` in <span class="title-ref">cm</span>
    (centimeters).

Because the vendor sells rope in <span class="title-ref">cm</span>, the
purchase `UoM` is used to represent the quantity on the `PO (Purchase
Order)`, which is also in centimeters.

![Display purchase order for the product, rope, in
centimeters.](usage/purchase-rope-in-cm.png)

</div>

After confirming the `PO (Purchase Order)`, the quantity of product
(found under the now visible `Demand` column) is converted from the
purchase `UoM (Unit of Measure)` to the `Unit of Measure`. Then, when
the product is received by clicking the `Validate` button, the quantity
in `Done` is automatically adjusted to match the `Demand` column.

<div class="example">

On the *receipt* for <span class="title-ref">Rope</span>, the quantities
are automatically converted from <span class="title-ref">500 cm</span>
that was requested on the purchase order, to
<span class="title-ref">16.40 ft</span> to match the internal/stock
`Unit of
Measure` value.

![Rope quantity is converted from cm to ft during warehouse
reception.](usage/receive-rope-in-ft.png)

</div>

<div class="seealso">

`Use Different Units of Measure
<inventory/management/products/units_of_measure>`

</div>

## Packages

Packages are a physical container that holds one or several products
from a picking, typically used for outgoing deliveries or internal
transfers. Packages can be a reusable or disposable (shipping) box, and
are **not** specific to a product.

Reusable boxes temporarily hold products during a picking to be brought
to either a packing or shipping area. Disposable boxes are the actual
shipping containers (e.g. cardboard boxes, envelopes, shipping bags,
etc). These are used to ship the products out to customers.

Multiple items in a sales order (SO) can be separated into different
packages to accommodate the products. For example, an `SO (Sales Order)`
that has 20 boxes of pencils and 4 boxes of erasers can be separated
into two separate packages, each containing 10 boxes of pencils and 2
boxes of erasers.

<div class="note">

<div class="title">

Note

</div>

Products do *not* have to be divided equally. Products can be divided
into as many packages that are needed to accommodate the `SO (Sales
Order)`.

</div>

In Odoo, the quantity of products in each package needs to be recorded,
so there is a full history for each product, including which package
each item is shipped out in.

To use this method, ensure the `Packages` option is enabled, by
navigating to `Inventory app --> Configuration --> Settings -->
Operations`. Click the `Packages` check box, and then `Save` to activate
the feature.

On a delivery order, assign which package to use by clicking on the `≣
(Detailed
Operations)` icon to the right of each product in the `Operations` tab.

![Find detailed operations icon to the right on the product
line.](usage/detailed-operations-icon.png)

Clicking the `≣ (Detailed Operations)` icon of a product reveals a
pop-up window. In this window, the `Product` name, `Demand`, and
`Quantity Done` are clearly displayed above the customizable product
line.

Here, the warehouse location the product is coming from can be modified,
in addition to the `Source Package` and `Destination Package`, which
represents what package(s) the product(s) will be packaged into.

Click `Add a line` to include each additional package used. Enter the
desired amount in the `Done` field to specify the amount of products
that will go into the `Destination Package`.

### Multiple packages in a single delivery

Although a `DO (Delivery Order)` is typically associated with a single
package, orders can be split by clicking the `≣ (Detailed Operations)`
icon next to the products on an `SO
(Sales Order)` line. This opens the `Detailed Operations` window with an
editable table to specify which products are intended for which package.

<div class="example">

To package 10 boxes of pencils with 2 boxes of erasers from the same `SO
(Sales Order)`, begin by navigating to the `DO (Delivery Order)`. Then,
select the `≣ (four
horizontal lines)` icon to the right of the product,
<span class="title-ref">Box of Pencils</span>. Clicking the icon opens
the `Detailed Operations` window that is used to detail how products,
like the 20 <span class="title-ref">Box of Pencils</span>, are packaged.

Type in <span class="title-ref">10</span> under the `Done` field to
package 10 products into the `Destination Package`. To specify the
destination package, type the name of an existing package (such as
<span class="title-ref">PACK0000006</span>) under the field,
`Destination Package`. If the package does not exist, Odoo displays the
`Create` button to create a new package. Click `Add a line` to assign
the remaining products in another package,
<span class="title-ref">PACK0000007</span>.

![Detailed operations pop-up where the amount of product going in a pack
can be specified.](usage/add-destination-package.png)

Select `Detailed Operations` on the product line for
<span class="title-ref">Box of Erasers</span> and similarly set 2 `Done`
products to <span class="title-ref">PACK0000006</span> and
<span class="title-ref">PACK0000007</span> each.

![Put in pack button to match the done amount matches the
demand.](usage/put-in-pack-button.png)

</div>

Once all the products for each line have been entered, click `Confirm`
to return to the `DO (Delivery Order)`.

The `Done` quantity on the `DO (Delivery Order)` updates as products are
selected for each package. When the `Done` amount matches the `Demand`
amount, click the `Validate` button to complete the delivery order.

<div class="tip">

<div class="title">

Tip

</div>

The `Put In Pack` button is intended to quickly package all products in
the `DO
(Delivery Order)` into one new package. The option to rename the
package, or modify its contents, is available in the `Detailed
Operations` pop-up.

</div>

Clicking on the `Packages` smart button in the upper-right corner of the
delivery order reveals a separate page, showing all the packages used in
that `DO (Delivery Order)`.

## Packagings

*Packaging* is product specific, and refers to a disposable container
that holds several units of a specific product. Unlike packages,
packagings cannot be reusable, and each specific packaging must be
defined on the individual product form.

For example, different packages for cans of soda can be configured as a
6-pack, a 12-pack, or a case of 36. Each flavor of soda would need a
<span class="title-ref">6</span>, <span class="title-ref">12</span>, and
<span class="title-ref">36</span> can packaging configured on the
individual product since packagings are product specific, not generic.

### Set up packagings

To use packagings, ensure the `Product Packagings` feature is enabled.
To do that, navigate to `Inventory app --> Configuration --> Settings`.
Then, under the `Products` heading, check the box next to `Product
Packagings`, and click `Save`.

In Odoo, product packagings are used on sales/purchase orders and
inventory transfers.

Next, to create packagings, navigate to `Inventory app --> Products -->
Products` and click on the desired product, then click `Edit` on the
product page.

Under the `Inventory` tab, scroll down to the `Packaging` section, and
click `Add a line`. Then, a pop-up window appears, in which the
following information for each packaging should be entered:

  - `Packaging`: name of packaging that appears on sales/purchase orders
    as a packaging option for the product
  - `Contained quantity`: amount of product in the packaging
  - `Barcode`: identifier used with the `Barcode app
    <barcode/operations/intro>` to trace the packaging of a product
    during stock moves or pickings. Leave blank if not in use
  - `Company`: indicates the packaging is only available at the selected
    company. Leave blank to make the packaging available across all
    companies.

<div class="example">

Create a packaging type for 6 cans of the product,
<span class="title-ref">Grape Soda</span>, by naming the `Packaging` to
<span class="title-ref">6-pack</span> and setting the `Contained
quantity` to <span class="title-ref">6</span> in the pop-up window that
appears after clicking on `Add a line`.

![Create 6-pack case for product.](usage/create-product-packages.png)

</div>

When all the necessary information has been entered, either click `Save
& Close` to save the packaging and return to the product detail form, or
`Save & New` to save the packaging and create another one in a fresh
pop-up window.

<div class="example">

View all product packagings in the `Inventory` tab of the product form.

![Show packaging and contained quantities, specified on the product page
form in the&#10;Inventory tab.](usage/display-product-packaging.png)

</div>

### View all packagings

To view all packagings that have been created, go to `Inventory app -->
Configuration
--> Product Packagings`. Doing so reveals the `Product Packagings` page
with a complete list of all packagings that have been created for all
products. Create new packagings by clicking `Create`.

<div class="example">

Two soda products, <span class="title-ref">Grape Soda</span> and
<span class="title-ref">Diet Coke</span>, have three types of packaging
configured. On the `Product Packagings` page, each product can sold as a
<span class="title-ref">6-Pack</span> that contains 6 products,
<span class="title-ref">12-Pack</span> of 12 products, or a
<span class="title-ref">Case</span> of 32 products.

![List of different packagings for products.](usage/packagings.png)

</div>

### Apply packagings

When creating a sales order in the `Sales` app, specify the packagings
that should be used for the product(s). The chosen packaging is
displayed on the `SO (Sales Order)` under the `Package` field.

<div class="example">

18 cans of the product, <span class="title-ref">Grape Soda</span>, is
packed using three 6-pack packagings.

![Assign packagings on the Sales Order
Line.](usage/packagings-sales-order.png)

</div>

<div class="tip">

<div class="title">

Tip

</div>

Packaging can be used in conjunction with Odoo `Barcode
<inventory/barcode/software>`. When receiving products from suppliers,
scanning the packaging barcode automatically adds the number of units in
the packaging to the internal count of the product.

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/management/products/scrap_inventory.md

# Scrap inventory

In some cases, a product in inventory may be damaged or found to be
defective. If it is not possible to repair or return the product, Odoo
*Inventory* allows users to scrap it, ensuring that usable inventory
counts remain accurate.

<div class="tip">

<div class="title">

Tip

</div>

Scrap orders can be viewed by navigating to `Inventory --> Operations
--> Scrap`. Each scrap order shows the date and time the order was
created, along with the product and quantity that was scrapped.

To view the total quantity of each item scrapped, navigate to `Inventory
-->
Configuration --> Locations`. Remove the `Internal` filter from the
`Search...` bar to display virtual locations. Finally, select the
`Virtual
Locations/Scrap` location.

</div>

By default, scrapping a product removes it from physical inventory, and
places it in a virtual location titled *Virtual Locations/Scrap*. A
virtual location is **not** a physical space, but rather a designation
in Odoo that is used to track items that are no longer in physical
inventory.

<div class="admonition">

Learn more

For more information about virtual locations, see the documentation
about the different types of `locations
<inventory/management/difference-warehouse-location>`.

</div>

## Scrap from stock

To scrap a product located in inventory, begin by navigating to
`Inventory -->
Operations --> Scrap`. On the `Scrap Orders` page, click `Create` to
configure a new scrap order.

On the scrap order, select the product being scrapped from the `Product`
drop-down menu, then enter the quantity in the `Quantity` field. The
`Source Location` defaults to the location where the product is stored,
and the `Scrap Location` defaults to `Virtual Locations/Scrap`, but
either of these can be changed by selecting a different location from
their respective drop-down menus.

![A new scrap order.](scrap_inventory/scrap-order.png)

Finally, click `Validate` to scrap the product. The on-hand inventory
count for the scrapped product updates to subtract the scrapped
quantity.

## Scrap from a receipt, transfer, or delivery

It is also possible to scrap products during the receipt, transfer, and
delivery operations. This can be necessary if any products are found to
be defective when receiving them into inventory, transferring them from
one location to another, or preparing them for delivery.

To scrap a product during the receipt, transfer, or delivery operations,
begin by navigating to the `Inventory` app. On the `Overview` page,
select the `# TO
PROCESS` button on the `Receipts`, `Internal Transfers`, or `Delivery
Orders` card, depending on the type of operation the product is being
scrapped from.

<div class="note">

<div class="title">

Note

</div>

For the `Internal Transfers` card to appear on the `Overview` page of
the `Inventory` app, the `Storage Locations` setting must be enabled. To
do so, navigate to `Configuration --> Settings`, then enable the
checkbox next to `Storage Locations` under the `Warehouse` heading.

</div>

Alternatively, a list of all delivery orders, receipts, and transfers
can be viewed by navigating to `Inventory --> Operations --> Transfers`.

Next, open a delivery order, receipt, or transfer from the corresponding
page by clicking on it. A `Scrap` button appears at the top of the page.
Click it to open the `Scrap` pop-up window.

![The scrap pop-up in the Inventory
app.](scrap_inventory/scrap-pop-up.png)

<div class="important">

<div class="title">

Important

</div>

The `Scrap` button will only appear on a receipt that has been
validated. This is because Odoo only allows products to be scrapped once
they have been entered into inventory.

</div>

On the `Scrap` pop-up window, select the product being scrapped from the
`Product` drop-down menu. Then, enter the quantity in the `Quantity`
field.

The `Source Location` defaults to the location where the product is
stored, and the `Scrap Location` defaults to `Virtual Locations/Scrap`,
but either of these can be changed by selecting a different location
from their respective drop-down menus.

Finally, click `Done` to scrap the product. After doing so, the `Scrap`
pop-up window disappears and a `Scraps` smart button appears in the top
right of the page. Click it to view all of the scrap orders created from
that operation.

![The Scraps smart button.](scrap_inventory/scraps-smart-button.png)


---
## File: ./content/applications/inventory_and_mrp/inventory/management/products/strategies.md

# Selecting a replenishment strategy

In Odoo, there are two strategies for automatically replenishing
inventory: *reordering rules* and the *make to order (MTO)* route.
Although these strategies differ slightly, they both have similar
consequences: triggering the automatic creation of a `PO (Purchase
Order)` or `MO (Manufacturing Order)`. The choice of which strategy to
use depends on the business's manufacturing and delivery processes.

## Terminology

### Replenishment report and reordering rules

The replenishment report is a list of all products that have a negative
forecast quantity.

*Reordering rules* are used to ensure there's always a minimum amount of
a product in-stock, in order to manufacture products and/or fulfill
sales orders. When the stock level of a product reaches its minimum,
Odoo automatically generates a purchase order with the quantity needed
to reach the maximum stock level.

Reordering rules can be created and managed in the replenishment report,
or from the product form.

### Make to order

*Make to order (MTO)* is a procurement route that creates a draft
purchase order (or manufacturing order) each time a sales order is
confirmed, **regardless of the current stock level**.

Unlike products replenished using reordering rules, Odoo automatically
links the sales order to the `PO (Purchase Order)` or `MO (Manufacturing
Order)` generated by the `MTO (Make to Oder)` route.

Another difference between reordering rules and `MTO (Make to Oder)` is,
with `MTO (Make to Oder)`, Odoo generates a draft `PO (Purchase Order)`
or `MO (Manufacturing Order)` immediately after the `SO (Sales Order)`
is confirmed. With reordering rules, Odoo generates a draft `PO
(Purchase Order)` or `MO (Manufacturing Order)` when the product's
forecasted stock falls below the set minimum quantity.

In addition, Odoo automatically adds quantities to the `PO (Purchase
Order)` or `MO (Manufacturing Order)` as the forecast changes, so long
as the `PO (Purchase Order)` or `MO (Manufacturing Order)` is not
confirmed.

The `MTO (Make to Oder)` route is the best replenishment strategy for
products that are customized, and/or for products that have no stock
kept on-hand.

## Configuration

### Replenishment report and reordering rules

To access the replenishment report, go to `Inventory app --> Operations
-->
Replenishment.`

By default, the replenishment report dashboard shows every product that
needs to be manually reordered. If there is no specific rule for a
product, Odoo assumes the `Min Quantity` and `Max Quantity` stock are
both <span class="title-ref">0.00</span>

<div class="note">

<div class="title">

Note

</div>

For products that don't have a set reordering rule, Odoo calculates the
forecast based on confirmed sales orders, deliveries, and receipts. For
products that have a set reordering rule, Odoo calculates the forecast
normally, but also takes into account the purchase/manufacturing lead
time and security lead time.

</div>

<div class="important">

<div class="title">

Important

</div>

Before creating a new reordering rule, make sure the product has a
*vendor* or a *bill of materials* configured on the product form. To
check this, go to `Inventory app
--> Products --> Products`, and select the product to open its product
form. The vendor, if configured, is listed in the `Purchase` tab, and
the bill on materials, if configured, is found in the `Bill of
Materials` smart button at the top of the form.

The `Product Type`, located in the `General Information` tab on the
product form, **must** be set to `Storable Product`. By definition, a
consumable product does not have its inventory levels tracked, so Odoo
cannot account for a consumable product in the replenishment report.

</div>

![Replenishment report listing all items needing to be purchased to meet
current needs.](strategies/replenishment-report-dashboard.png)

To create a new reordering rule from the replenishment report, go to
`Inventory app
--> Operations --> Replenishment`, click `Create`, and select the
desired product from the drop-down menu in the `Product` column. If
necessary, a `Min Quantity` and a `Max Quantity` can be configured in
the corresponding columns on the `Replenishment` report page, as well.

To create a new reordering rule from the product form, go to `Inventory
app -->
Products --> Products`, and select a product to open its product form.
Click the `Reordering Rules` smart button, click `Create`, and fill out
the fields.

#### Replenishment report fields

The following fields are on the `Replenishment` report. If any of these
fields are not visible, click the `⋮ (additional options)` icon on the
far right side of the report, then click the checkbox next to a field to
make it visible.

  - `Product`: the product that requires a replenishment.
  - `Location`: the specific location where the product is stored.
  - `Warehouse`: the warehouse where the product is stored.
  - `On Hand`: the amount of product currently available.
  - `Forecast`: the amount of product available after all current orders
    (sales, manufacturing, purchase, etc.) are taken into account.
  - `Preferred Route`: how the product is procured, either `Buy`,
    `Manufactured`, `Dropship`, etc.
  - `Vendor`: the company from which the product is acquired.
  - `Bill of Materials`: the bill of materials for the product (if one
    is configured).
  - `Trigger`: how the replenishment is created, either `Auto`
    (automatically, once the `On Hand` quantity goes below the `Min
    Quantity`) or `Manual` (only when the replenishment is requested).
  - `Procurement Group`: the reference number for how the product is
    being acquired, such as a sales order, purchase order, or
    manufacturing order.
  - `Min Quantity`: the minimum amount of product that should be
    available. When inventory levels goes below this number, the
    replenishment is triggered.
  - `Max Quantity`: the amount of product that should be available after
    replenishing the product.
  - `Multiple Quantity`: if the product should be ordered in specific
    quantities, enter the number that should be ordered. For example, if
    the `Multiple Quantity` is set to <span class="title-ref">5</span>,
    and only 3 are needed, 5 products are replenished.
  - `To Order`: the amount of product that is currently needed, and will
    be ordered, if the `Order Once` or `Automate Orders` button is
    clicked.
  - `UoM`: the unit of measure used to acquire the product.
  - `Company`: the company for which the product is acquired.

By default, the quantity in the `To Order` field is the quantity
required to reach the set `Max Quantity`. However, the `To Order`
quantity can be adjusted by clicking on the field and, changing the
value, and clicking `Save`. To replenish a product manually, click
`Order Once`.

To automate a replenishment from the `Replenishment` page, click
`Automate
Orders` on the right-side of the line, represented by a `🔄 (circular
arrow)` icon.

When this button is clicked, Odoo will automatically generate a draft
`PO (Purchase Order)`/`MO (Manufacturing Order)` every time the
forecasted stock level falls below the set `Min Quantity` of the
reordering rule.

On the `Replenishment` page, a reordering rule or manual replenishment
can be temporarily deactivated for a given period, by clicking the `🔕
(snooze)` icon on the far-right of the line.

![Snooze options to turn off notifications for reordering for a period
of time.](strategies/reordering-rule-snooze-settings.png)

A `PO (Purchase Order)` or `MO (Manufacturing Order)` created by a
manual replenishment has a `Replenishment Report` as the source
document. A `PO (Purchase Order)` or `MO (Manufacturing Order)` created
by an automated reordering rule has the `SO (Sales Order)` reference
number(s) that triggered the rule as the source document.

![Quote request list shows which quotes are directly from the
replenishment report.](strategies/rfq-source-document.png)

## Make to order (MTO) route

Since the `MTO (Make to Oder)` route is recommended for customized
products, the route is hidden by default.

  - To activate the `MTO (Make to Oder)` route in Odoo:
    
    1.  Go to `Inventory app --> Configuration --> Settings`.
    2.  Activate the `Multi-Step Routes` setting, located under the
        `Warehouse` section, and click `Save`.
    3.  Then, go to `Inventory app --> Configuration --> Routes`.
    4.  Click on `Filters --> Archived` to show archived routes.
    5.  Select the checkbox next to `Replenish on Order (MTO)`, and
        click on `Action --> Unarchive`.

<div class="note">

<div class="title">

Note

</div>

Activating the `Multi-Step Routes` setting also activates `Storage
Locations`. If these features aren't applicable to the warehouse,
disable these settings after unarchiving the `MTO (Make to Oder)` route.

</div>

To set a product's procurement route to `MTO (Make to Oder)`, go to
`Inventory app --> Products -->
Products`, click on the desired product to open its product form, and
click `Edit`.

Then, click the `Inventory` tab, and in the `Routes` section of options,
select `Replenish on Order (MTO)`.

For products purchased directly from a vendor, make sure the `Buy` route
is selected, in addition to the `Replenish on Order (MTO)` route. Also,
make sure a vendor is configured in the `Purchase` tab of the product
form.

For products manufactured in-house, make sure the `Manufacture` route is
selected, in addition to the `Replenish on Order (MTO)` route. Also,
make sure a bill of materials is configured for the product, which is
accessible via the `Bill of Materials` smart button on the product form.

Finally, when all configurations are complete, click `Save`.

<div class="note">

<div class="title">

Note

</div>

The `MTO (Make to Oder)` route cannot be selected alone. `MTO (Make to
Oder)` **only** works if the `Manufacture` or `Buy` route is also
selected.

</div>

![Replenish on Order selected on the product
form.](strategies/acoustic-block-screen-replenish.png)


---
## File: ./content/applications/inventory_and_mrp/inventory/management/products/uom.md

# Use Different Units of Measure

<div id="inventory/management/products/units_of_measure">

In some cases, handling products in different units of measure is
necessary. For example, if you buy products in a country where the
metric system is of application and sell in a country where the imperial
system is used, you will need to convert the units. Another common use
case is buying products in bigger packs to your supplier and selling
them in units to your customers.

</div>

You can set up Odoo to work with different units of measure for one
product.

## Configuration

In the *Inventory* application, go to `Configuration --> Settings`. In
the *Products* section, activate *Units of Measure*, then *Save*.

![image](uom/uom_01.png)

## Create New Units of Measure

In the *Inventory* application go to `Configuration --> UoM`. There, hit
*Create*. As an example, we will create a Box of 6 units that we will
use for the Egg product.

![image](uom/uom_02.png)

The category is important for unit conversion, you will be able to
convert products from one unit to another only if those units belong to
the same category. The box of 6 is 6 times bigger than the reference
unit of measure for the category which is “Units” here.

![image](uom/uom_03.png)

## Specify Units of Measure on your Products

In the `Inventory application --> Master Data --> Products`, open the
product which you would like to change the purchase/sale unit of
measure, and click on *Edit*.

In the *General Information* tab, you can select the *Unit of Measure*
in which the product will be sold, which is also the unit in which
internal transfers will take place. You can also select the *Purchase
Unit of Measure*, which is the unit in which you purchase the product.

![image](uom/uom_04.png)

## Transfer from One Unit to Another

### Buy in the Purchase UoM

In the *Purchase* application, *Create* a new request for quotation in
which you include the product with the different *Units of Measure* and
*Confirm* it.

![image](uom/uom_05.png)

On the automatically generated purchase orders, the UoM used is the Box
of 6, meaning the Purchase UoM. You have of course the possibility to
manually modify the UoM if necessary. When you enter the *Receipt* which
is linked to the purchase order, you can observe that the 10 boxes of 6
units have been converted in 60 units. Indeed, the stock is managed in
units.

![image](uom/uom_06.png)

### Replenishment

When doing a replenishment via the *Replenish* button on the product
form, you have the possibility to use a different unit of measure.

![image](uom/uom_07.png)

![image](uom/uom_08.png)

### Sell in bigger UoM

You can choose the unit of measure on the sale order document and decide
to sell the eggs by the dozen. When doing so, the price is automatically
computed from Units UoM to adapt to the selected *UoM*.

![image](uom/uom_09.png)

In the delivery order, the *UoM* used in the sale order is converted to
the *UoM* used for stock management, in our use case, the Units.

![image](uom/uom_10.png)


---
## File: ./content/applications/inventory_and_mrp/inventory/management/products/mto.md

# Replenish on order (MTO)

*Replenish on order*, also known as *MTO* (make to order), is a
replenishment strategy that creates a draft order for a product every
time a sales order is created for it. For products that are purchased
from a vendor, a request for quotation (RFQ) is created, while a sales
order for a product manufactured in-house triggers the creation of a
manufacturing order. The creation of a `RFQ (request for quotation)` or
manufacturing order occurs every time a sales order is created,
regardless of the current stock level of the product being ordered.

## Unarchive the Replenish on Order (MTO) route

By default, Odoo sets the `MTO (make to order)` route as *archived*.
This is because `MTO (make to order)` is a somewhat niche workflow that
is only used by certain companies. However, it is easy to unarchive the
route in just a few simple steps.

To do so, begin by navigating to `Inventory --> Configuration -->
Routes`. On the `Routes` page, click the `Filters` button and select the
`Archived` option. This shows all routes that are currently archived.

![The archived filter on the Routes page.](mto/archived-filter.png)

Enable the checkbox next to `Replenish on Order (MTO)`, then click the
`Action` button to reveal a drop-down menu. From the drop-down menu,
select `Unarchive`.

![The unarchive action on the Routes page.](mto/unarchive-button.png)

Finally, remove the `Archived` filter from the `Search...` bar. The
`Routes` page will now show all available routes, including `Replenish
on Order
(MTO)`, which is now selectable on the inventory tab of each product
page.

![The MTO route appears on the Routes page after unarchiving
it.](mto/unarchived-mto.png)

## Configure a product to use the MTO route

With the `MTO (make to order)` route unarchived, products can now be
properly configured to use replenish on order. To do so, begin by going
to `Inventory --> Products --> Products`, then select an existing
product, or click `Create` to configure a new one.

On the product page, select the `Inventory` tab and enable the
`Replenish on
Order (MTO)` route in the `Routes` section, along with one other route.

<div class="important">

<div class="title">

Important

</div>

The `Replenish on Order (MTO)` route **does not** work unless another
route is selected as well. This is because Odoo needs to know how to
replenish the product when an order is placed for it (buy it,
manufacture it, etc.).

</div>

![Select the MTO route and a second route on the Inventory
tab.](mto/select-routes.png)

If the product is purchased from a vendor to fulfill sales orders,
enable the `Can be
Purchased` checkbox under the product name. Doing so makes the
`Purchase` tab appear alongside the other settings tabs below.

Select the `Purchase` tab and specify a `Vendor` and the `Price` they
sell the product for.

![Enable "Can be Purchased" and specify a
vendor.](mto/specify-vendor.png)

If the product is manufactured, make sure that it has a bill of
materials (BOM) configured for it. To do so, click the `Bill of
Materials` smart button at the top of the screen, then click `Create` on
the `Bill of Materials` page to configure a new `BOM (bill of
materials)` for the product.

On the blank `BOM (bill of materials)` form, add the components used to
manufacture the product on the `Components` tab, along with the
operations required for the manufacturing workflow on the `Operations`
tab.

Finally, click `Save` to save the `BOM (bill of materials)`.

## Fulfill a sales order using the MTO route

After configuring a product to use the `MTO (make to order)` route, a
replenishment order is created for it every time a sales order including
the product is confirmed. The type of order created depends on the
second route selected in addition to `MTO (make to order)`.

For example, if *Buy* was the second route selected, then a purchase
order is created upon confirmation of a sales order.

<div class="important">

<div class="title">

Important

</div>

When the `MTO (make to order)` route is enabled for a product, a
replenishment order is always created upon confirmation of a sales
order. This is the case even if there is enough stock of the product
on-hand to fulfill the sales order, without buying or manufacturing
additional units of it.

</div>

While the `MTO (make to order)` route can be used in unison with a
variety of other routes, the *Buy* route is used as the example for this
workflow. Begin by navigating to the `Sales` app, then click `Create`,
which opens a blank quotation form.

On the blank quotation form, add a `Customer`, then click `Add a
product` under the `Order Lines` tab, and enter a product that has been
configured to use the *MTO* and *Buy* routes. Click `Confirm` and the
quotation is turned into a sales order.

A `Purchase` smart button now appears in the top-right corner of the
sales order. Clicking it opens the `RFQ (request for quotation)`
associated with the sales order.

Click `Confirm Order` to confirm the `RFQ (request for quotation)`, and
turn it into a purchase order. A green `Receive Products` button now
appears at the top of the purchase order. Once the products are
received, click `Receive Products` to register them into inventory.

Return to the sales order by clicking the `SO` breadcrumb, or by
navigating to `Sales --> Orders --> Orders`, and selecting the sales
order.

Finally, click the `Delivery` smart button in the top-right of the order
to be taken to the delivery order. Once the products have been shipped
to the customer, click `Validate` to confirm the delivery.


---
## File: ./content/applications/inventory_and_mrp/inventory/management/products/reordering_rules.md

# Reordering rules

<div id="inventory/management/reordering_rules">

Reordering rules are used to keep forecasted stock levels above a
certain threshold without exceeding a specified upper limit. This is
accomplished by specifying a minimum quantity that stock should not fall
below and a maximum quantity that stock should not exceed.

</div>

Reordering rules can be configured for each product based on the route
used to replenish it. If a product uses the *Buy* route, then a Request
for Quotation (RFQ) is created when the reordering rule is triggered. If
a product uses the *Manufacture* route, then a Manufacturing Order (MO)
is created instead. This is the case regardless of the selected
replenishment route.

## Configure products for reordering rules

In order to use reordering rules for a product, it must first be
correctly configured. Begin by navigating to `Inventory --> Products -->
Products`, then select an existing product, or create a new one by
clicking `Create`.

First, on the `General Information` tab, make sure that the `Product
Type` is set to `Storable Product`. This is necessary because Odoo only
tracks stock quantities for storable products, and this number is used
to trigger reordering rules.

![Set the Product Type as Storable.](reordering_rules/product-type.png)

Next, click on the `Inventory` tab and select one or more routes from
the `Routes` section. Doing so tells Odoo which route to use to
replenish the product.

![Select one or more routes on the Inventory
tab.](reordering_rules/select-routes.png)

If the product is reordered using the `Buy` route, confirm that the `Can
be
Purchased` checkbox is enabled under the product name. This makes the
`Purchase` tab appear. Click on the `Purchase` tab, and specify at least
one vendor, and the price that they sell the product for, so that Odoo
knows which company the product should be purchased from.

![Specify a vendor and price on the Purchase
tab.](reordering_rules/specify-vendor.png)

If the product is replenished using the `Manufacture` route, it needs to
have at least one Bill of Materials (BoM) associated with it. This is
necessary because Odoo only creates manufacturing orders for products
with a `BoM (Bill of Materials)`.

If a `BoM (Bill of Materials)` does not already exist for the product,
select the `Bill of Materials` smart button at the top of the product
form, then click `Create` to configure a new `BoM (Bill of Materials)`.

![The Bill of Materials smart button on a product
form.](reordering_rules/bom-smart-button.png)

## Create new reordering rules

To create a new reordering rule, navigate to `Inventory -->
Configuration -->
Reordering Rules`, then click `Create`, and fill out the new line as
follows:

  - `Product`: The product that is replenished by the rule.
  - `Location`: The location where the product is stored.
  - `Min Quantity`: The minimum quantity that can be forecasted without
    the rule being triggered. When forecasted stock falls below this
    number, a replenishment order for the product is created.
  - `Max Quantity`: The maximum quantity that stock is replenished up
    to.
  - `Multiple Quantity`: Specify if the product should be replenished in
    batches of a certain quantity (e.g., a product could be replenished
    in batches of 20).
  - `UoM`: The unit of measure used for reordering the product. This
    value can simply be <span class="title-ref">Units</span> or a
    specific unit of measurement for weight, length, etc.

![The form for creating a new reordering
rule.](reordering_rules/reordering-rule-form.png)

<div class="tip">

<div class="title">

Tip

</div>

Reordering rules can also be created from each product form. To do so,
navigate to `Inventory --> Products --> Products`, then select a
product. Click on `Reordering Rules --> Create`, then fill out the new
line as detailed above.

</div>

Once a reordering rule has been created for a product, if its forecasted
quantity is below the rule's minimum quantity when the scheduler runs, a
replenishment order for the product is automatically generated. By
default, the scheduler runs once each day.

<div class="tip">

<div class="title">

Tip

</div>

To manually trigger a reordering rule before the scheduler runs, select
`Inventory
--> Operations --> Run Scheduler`. Then, select the green `Run
Scheduler` button on the pop-up that appears. Be aware that this also
triggers any other scheduled actions.

</div>

If the `Buy` route is selected, then an `RFQ (Request for Quotation)` is
generated. To view and manage `RFQs (Requests for Quotation)`, navigate
to `Purchase -->
Orders --> Requests for Quotation`.

If the `Manufacture` route is selected, then an `MO (Manufacturing
Order)` is generated. To view and manage `MOs (Manufacturing Orders)`,
navigate to `Manufacturing --> Operations --> Manufacturing Orders`.

## Set a preferred route for reordering

Odoo allows for multiple routes to be selected under the `Inventory` tab
on each product form. For instance, it is possible to select both `Buy`
and `Manufacture`, thus enabling the functionality of both routes.

Odoo also enables users to set a preferred route for a product's
reordering rule. This is the route that the rule defaults to if multiple
are selected. To select a preferred route, begin by navigating to
`Inventory --> Configuration --> Reordering Rules`.

By default, the `Preferred Route` column is hidden on the `Reordering
Rules` page. Enable it by selecting the `⋮ (three-dot)` option button on
the right side of the page and checking the `Preferred Route` checkbox.
Doing so reveals the `Preferred Route` column.

Click inside of the column on the row of a reordering rule and a
drop-down menu shows all available routes for that rule. Select one to
set it as the preferred route.

![Select a preferred route from the
drop-down.](reordering_rules/select-preferred-route.png)

<div class="important">

<div class="title">

Important

</div>

If multiple routes are enabled for a product but no preferred route is
set for its reordering rule, the product is reordered using the selected
route that is listed first on the `Inventory` tab of the product form.

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/management/warehouses.md

  - nosearch

# Warehouses

<div class="toctree" data-titlesonly="" data-glob="">

warehouses/difference\_warehouse\_location
warehouses/warehouse\_replenishment\_transfer
warehouses/create\_a\_second\_warehouse warehouses/use\_locations

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/management/reporting.md

  - nosearch

# Valuation Methods

<div class="toctree" data-titlesonly="" data-glob="">

reporting/inventory\_valuation\_config
reporting/using\_inventory\_valuation
reporting/integrating\_landed\_costs

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/management/planning/scheduled_dates.md

# Scheduled delivery dates

Accurately forecasting delivery dates is vital for fulfilling customer
expectations. In Odoo, the *Inventory* app allows for comprehensive lead
time configuration, allowing coordination and planning of manufacturing
orders, deliveries, and receptions.

## Lead time types

Different lead times for different operations can impact various stages
of the order fulfillment process. Here's a summary of the types of lead
times in Odoo:

![Show graphic of all lead times working
together.](scheduled_dates/all-lead-times.png)

  - `Customer lead time <inventory/management/customer-lt>`: The default
    time frame for fulfilling customer orders. The customer lead time is
    the number of days from the date the sales order (SO) is confirmed
    to the date the products are shipped from the warehouse. This is
    also known as *delivery lead time*.
  - `Sales security lead time <inventory/management/sales-security-lt>`:
    moves the *scheduled delivery date* forward by a specified number of
    days. This serves as a buffer to allow the team ample time to
    prepare the outgoing shipment earlier, considering the possibility
    of delays in the fulfillment process.
  - `Purchase lead time <inventory/management/purchase-lt>`: the number
    of days from the confirmation of a purchase order (PO) to the
    receipt of products. It provides insight on the time it takes for
    products to arrive at the warehouse, facilitating effective
    scheduling and planning of supplier deliveries.
  - `Purchase security lead time
    <inventory/management/purchase-security-lt>`: advances the order
    deadline on a `PO (Purchase Order)` by a specified number of days.
    This proactive approach of placing orders earlier mitigates the risk
    of vendor or shipping delays. Thus, for products that are set to
    replenish to order, the need appears on the *Replenishment report*
    earlier, according to the specified number of days.
  - `Manufacturing lead time <inventory/management/manuf-lt>`: the
    number of days needed to complete a manufacturing order (MO) from
    the date of confirmation. This lead time includes weekends
    (non-working hours in Odoo), and is used to forecast an approximate
    production date for a finished good.
  - `Manufacturing security lead time
    <inventory/management/manuf-security-lt>`: moves the scheduled date
    of the `MO (Manufacturing Order)` forward by a specified number of
    days. When used in conjunction with `replenish to order
    <inventory/management/products/strategies>`, the security lead time
    makes the need appear earlier on the replenishment report.

## Sales lead times

Customer lead times and sales security lead times can be configured to
automatically compute an *expected delivery date* on a `SO (Sales
Order)`. The expected delivery date ensures a realistic *delivery dates*
setting for shipments from the warehouse.

Odoo issues a warning message if the set delivery date is earlier than
the expected date, as it may not be feasible to fulfill the order by
that time, which would impact other warehouse operations.

<div class="example">

A `SO (Sales Order)` containing a
<span class="title-ref">Coconut-scented candle</span> is confirmed on
July 11th. The product has a customer lead time of 14 days, and the
business uses a sales security lead time of 1 day. Based on the lead
time inputs, Odoo suggests a delivery date in 15 days, on July 26th.

![Set \*Delivery Date\* in a sales order. Enables delivery lead times
feature.](scheduled_dates/scheduled-date.png)

</div>

The following sections demonstrate how to automatically compute expected
delivery dates.

### Customer lead time

Set the customer lead time on each product form, by navigating to the
products page. To do so, go to `Sales app --> Products --> Products`.
From there, select the desired product, and switch to the `Inventory`
tab. Then, under the `Customer Lead Time` field, fill in the number of
calendar days required to fulfill the delivery order from start to
finish.

<div class="example">

Set a 14-day customer lead time for the
<span class="title-ref">Coconut-scented candle</span> by navigating to
its product form. Then, in the `Inventory` tab, type
<span class="title-ref">14.00</span> days into the `Customer Lead
Time` field.

![Set \*Customer Lead Time\* on the product
form.](scheduled_dates/customer.png)

</div>

### Sales security lead time

*Sales security lead time* is set globally for the business in
`Inventory app -->
Configuration --> Settings`.

On the configuration page, under the `Advanced Scheduling` heading,
locate the box for `Security Lead Time for Sales`, and click the
checkbox to enable the feature.

Next, enter the desired number of calendar days. This security lead time
is a buffer notifying the team to prepare for outgoing shipments earlier
than the scheduled date.

<div class="example">

Setting the `Security Lead Time for Sales` to
<span class="title-ref">1.00</span> day, pushes the `Scheduled Date` of
a delivery order (DO) forward by one day. In that case, if a product is
initially scheduled for delivery on April 6th, but with a one-day
security lead time, the new scheduled date for the delivery order would
be April 5th.

![View of the security lead time for sales configuration from the sales
settings.](scheduled_dates/sales-security.png)

</div>

### Deliver several products

For orders that include multiple products with different lead times, the
lead times can be configured directly from the quotation itself. On a
quotation, click the `Other Info` tab, and set the `Shipping Policy` to:

1.  `As soon as possible` to deliver products as soon as they are ready.
    The `Scheduled Date` of the `DO (Delivery Order)` is determined by
    adding today's date to the shortest lead time among the products in
    the order.
2.  `When all products are ready` to wait to fulfill the entire order at
    once. The `Scheduled Date` of the `DO (Delivery Order)` is
    determined by adding today's date to the longest lead time among the
    products in the order.

![Show \*Shipping Policy\* field in the \*Other Info\* tab of a
quotation.](scheduled_dates/shipping-policy.png)

<div class="example">

In a quotation containing 2 products, <span class="title-ref">Yoga
mat</span> and <span class="title-ref">Resistance band,</span> the
products have a lead time of 8 days and 5 days, respectively. Today's
date is April 2nd.

When the `Shipping Policy` is set to `As soon as possible`, the
scheduled delivery date is 5 days from today: April 7th. On the other
hand, selecting `When all
products are ready` configures the scheduled date to be 8 days from
today: April 10th.

</div>

## Purchase lead times

Automatically determining the dates on which to place orders from
suppliers can help simplify the procurement process.

Odoo calculates the supplier shipment *receipt date*, and `PO (Purchase
Order)` deadline, based on the required date the product is needed in
the warehouse. By working backwards from the receipt date, vendor lead
times and purchase security lead times are taken into account, in order
to determine the `PO (Purchase Order)` deadline.

This deadline is the date by which the order should be confirmed, in
order to ensure timely arrival by the expected receipt date.

![Visualization of PO deadline and receipt date used with vendor lead
times.](scheduled_dates/vendor-lead-times.png)

<div class="seealso">

`PO scheduling with reordering rules
<inventory/management/reordering_rules>`

</div>

### Vendor lead time

To set a vendor lead time for orders arriving in the warehouse from a
vendor location, begin by navigating to a product form through `Purchase
app --> Products --> Products`.

Next, select the desired product, and switch to the `Purchase` tab. In
the editable vendor pricelist, click the `Add a line` button to add
vendor details, such as the `Vendor` name, `Price` offered for the
product, and lastly, the `Delivery Lead Time`.

<div class="note">

<div class="title">

Note

</div>

Multiple vendors and lead times can be added to the vendor pricelist.
The default vendor and lead time selected will be the entry at the top
of the list.

</div>

<div class="example">

On the vendor pricelist of the product form, the `Delivery Lead Time`
for the selected vendor is set to <span class="title-ref">10
days.</span>

![Add delivery lead times to vendor pricelist on a
product.](scheduled_dates/set-vendor.png)

</div>

By setting the vendor lead time, the expected arrival date of the item
is automatically determined as the date of the `PO (Purchase Order)`
confirmation, plus the vendor lead time. This ensures that warehouse
employees are notified, if the products do **not** arrive within the
expected timeframe.

<div class="example">

On a `PO (Purchase Order)` confirmed on July 11th, for a product
configured with a 10-day vendor lead time, Odoo automatically sets the
`Receipt Date` to July 21st. The receipt date also appears as the
`Scheduled Date` on the warehouse receipt form, accessible from the
`Receipt` smart button, located on the `PO (Purchase Order)`.

![Show expected \*Receipt Date\* of the product from the
vendor.](scheduled_dates/receipt-date.png)

![Show expected \*Scheduled Date\* of arrival of the product from the
vendor.](scheduled_dates/scheduled-date-receipt.png)

</div>

### Purchase security lead time

*Purchase security lead time* is set globally for the business in
`Inventory app -->
Configuration --> Settings`.

On the configuration page, under the `Advanced Scheduling` heading,
locate the box for `Security Lead Time for Purchase`, and click the
checkbox to enable the feature.

Next, enter the desired number of calendar days. By configuring the
security lead time, a buffer is set to account for potential delays in
supplier deliveries.

<div class="example">

Setting the `Security Lead Time for Purchase` to
<span class="title-ref">2.00</span> days, pushes the `Scheduled Date` of
receipt back by one day. In that case, if a product is initially
scheduled to arrive on April 6th, with a two-day security lead time, the
new scheduled date for the receipt would be April 8th.

![Set security lead time for purchase from the Inventory \>
Configuration \> Settings.](scheduled_dates/vendor-security.png)

</div>

## Manufacturing lead times

Lead times can help simplify the procurement process for consumable
materials and components used in manufactured products with bills of
materials.

The `MO (Manufacturing Order)` deadline, which is the deadline to begin
the manufacturing process to complete the product by the scheduled
delivery date, can be determined by configuring the manufacturing lead
times and manufacturing security lead times.

![Visualization of the determination of planned MO date manufacturing
lead times.](scheduled_dates/manuf-lead-times.png)

### Manufacturing lead time

Configure the manufacturing lead time directly on the product form, by
navigating to `Manufacturing app --> Products --> Products`, and select
the desired product.

In the `Inventory` tab of the product, specify the calendar days needed
to the manufacture the product in the `Manufacturing Lead Time` field.

<div class="example">

Specify a 14-day `Manufacturing Lead Time` for a product directly in the
`Inventory` tab of the product.

![View of the manufacturing lead time configuration from the product
form.](scheduled_dates/set-manufacturing.png)

</div>

Establish a `MO (Manufacturing Order)` deadline, based on the *expected
delivery date*, indicated in the `Scheduled Date` field of the `DO
(Delivery Order)`.

The `MO (Manufacturing Order)` deadline, which is the `Scheduled Date`
field on the `MO (Manufacturing Order)`, is calculated as the *expected
delivery date* subtracted by the manufacturing lead time.

This ensures the manufacturing process begins on time, in order to meet
the delivery date.

However, it's important to note that lead times are based on calendar
days. Lead times do **not** consider weekends, holidays, or *work center
capacity* (`the number of operations that can be
performed at the work center simultaneously`).

<div class="seealso">

\- `Manufacturing planning <manufacturing/management/use_mps>` -
`Configure automatic MO scheduling with reordering rules
<inventory/management/reordering_rules>`

</div>

<div class="example">

A product's scheduled shipment date on the `DO (Delivery Order)` is
August 15th. The product requires 14 days to manufacture. So, the latest
date to start the `MO
(Manufacturing Order)` to meet the commitment date is August 1st.

</div>

### Manufacturing security lead time

*Manufacturing security lead time* is set globally for the business in
`Manufacturing
app --> Configuration --> Settings`. Under the `Planning` heading,
locate the box for `Security Lead Time`, and click the checkbox to
enable the feature.

Next, enter the desired number of calendar days. By configuring the
security lead time, a buffer is set to account for potential delays in
the manufacturing process.

![View of the security lead time for manufacturing from the
manufacturing app settings.](scheduled_dates/manuf-security.png)

<div class="example">

A product has a scheduled shipment date on the `DO (Delivery Order)` set
for August 15th. The manufacturing lead time is 7 days, and
manufacturing security lead time is 3 days. So, the `Scheduled Date` on
the `MO (Manufacturing Order)` reflects the latest date to begin the
manufacturing order. In this example, the planned date on the `MO
(Manufacturing
Order)` is August 5th.

</div>

## Global example

See the following example to understand how all the lead times work
together to ensure timely order fulfillment:

  - **Sales security lead time**: 1 day
  - **Manufacturing security lead time**: 2 days
  - **Manufacturing lead time**: 3 days
  - **Purchase security lead time**: 1 day
  - **Vendor lead time**: 4 days

The customer places an order for a manufactured product on September
1st, and the scheduled delivery date from the warehouse is on September
20th. Odoo uses lead times and automated reordering rules to schedule
the necessary operations, based on the outgoing shipment delivery date,
September 20th:

![Show timeline of how lead times work together to schedule warehouse
operations.](scheduled_dates/global-example.png)

  - **September 1st**: Sales order created, confirmed by salesperson.
  - **September 9th**: Deadline to order components to ensure they
    arrive in time when manufacturing begins (4-day supplier lead time).
  - **September 13th**: Scheduled date of receipt for components.
    Initially, it was set to 9/14, but the 1-day purchase security lead
    time pushed the date earlier by 1 day.
  - **September 14th**: Deadline to begin manufacturing. Calculated by
    subtracting the manufacturing lead time of 3 days, and the
    manufacturing security lead time of 2 days, from the expected
    delivery date of September 19th.
  - **September 19th**: `Scheduled Date` on the delivery order form
    indicates the updated expected delivery date, which was originally
    set as September 20th. But the sales security lead time pushed the
    date forward by a day.

Odoo's replenishment planning maps a business' order fulfillment
process, setting pre-determined deadlines and raw material order dates,
including buffer days for potential delays. This ensures products are
delivered on time.


---
## File: ./content/applications/inventory_and_mrp/inventory/management/shipments_deliveries.md

  - show-content

  - show-toc

# Incoming shipments and delivery orders

There are several ways to handle how a warehouse receives products
(receipts) and ships products (deliveries). Depending on several
factors, such as the type of products stocked and sold, warehouse size,
and the amount of daily confirmed receipts and delivery orders, the way
products are handled when coming in and out of the warehouse can vary a
lot. Different settings can be configured for receipts and deliveries;
they do not have to be configured to have the same number of steps.

<div class="seealso">

\- [Using Routes (eLearning
Tutorial)](https://www.odoo.com/slides/slide/using-routes-1018) - [Push
& Pull Rules (eLearning
Tutorial)](https://www.odoo.com/slides/slide/push-pull-rules-1024)

</div>

## Choosing the right inventory flow to handle receipts and deliveries

By default, Odoo handles shipping and receiving in three different ways:
in one, two, or three steps. The simplest configuration is one step,
which is the default. Each additional step required for a warehouse for
either the receiving or shipping process will add an additional layer of
operations to perform before a product is either received or shipped.
These configurations depend entirely on the requirements for the
products stored, such as performing quality checks on received products,
or using special packaging on shipped products.

### One-step flow

The receiving and shipping rules for a one-step configuration are as
follows:

  - **Receipt**: Receive products directly into stock. No intermediate
    steps between receipt and stock occur, such as a transfer to a
    quality control location.
  - **Shipping**: Ship products directly from stock. No intermediate
    steps between stock and shipping occur, such as a transfer to a
    packing location.
  - Can only be used if not using `FIFO (First In, First Out)`, `LIFO
    (Last In, First
    Out)`, or `FEFO (First Expired, First Out)` removal strategies.
  - Receipts and/or deliveries are handled quickly.
  - Recommended for small warehouses with low stock levels, and for
    non-perishable items.
  - Items are received or shipped directly into/from stock.

<div class="seealso">

`Process receipts and deliveries in one step
<inventory/receipts_delivery_one_step>`

</div>

### Two-step flow

The receiving and shipping rules for a two-step configuration are as
follows:

  - **Input + stock**: Bring products to an input location *before*
    moving into stock. Products can be organized by different internal
    storage locations, such as various shelves, freezers, and locked
    areas, before being stocked in the warehouse.
  - **Pick + ship**: Bring products to an output location before
    shipping. Packages can be organized by different carriers or
    shipping docks before being shipped.
  - Minimum requirement to use lot numbers or serial numbers to track
    products with a `FIFO (First In, First Out)`, `LIFO (Last In, First
    Out)` or `FEFO (First Expired, First Out)` removal strategy.
  - Recommended for larger warehouses with high stock levels, or when
    stocking large items (such as mattresses, large furniture, heavy
    machinery, etc.).
  - Products received will not be available for manufacturing, shipping,
    etc., until they are transferred into stock.

<div class="seealso">

`Process receipts and deliveries in two steps
<inventory/receipts_delivery_two_steps>`

</div>

### Three-step flow

The receiving and shipping rules for a three-step configuration are as
follows:

  - **Input + quality + stock**: Receive products at the input location,
    transfer them to a quality control area, and move the ones that pass
    inspection into stock.
  - **Pick + pack + ship**: Pick products according to their removal
    strategy, pack them in a dedicated packing area, and bring them to
    an output location for shipping.
  - Can be used when tracking products by lot or serial numbers when
    using a `FIFO (First In,
    First Out)`, `LIFO (Last In, First Out)`, or `FEFO (First Expired,
    First Out)` removal strategy.
  - Recommended for very large warehouses with very high stock levels.
  - Required for any warehouse needing to perform quality control
    inspections before receiving items into stock.
  - Products received will not be available for manufacturing, shipping,
    etc., until they are transferred into stock.

<div class="seealso">

\- `Process receipts in three steps <inventory/receipts_three_steps>` -
`Process deliveries in three steps <inventory/delivery_three_steps>`

</div>

## Inventory flow table of contents

<div id="inventory_flow_toc" class="toctree" data-titlesonly="" data-glob="">

shipments\_deliveries/receipts\_delivery\_one\_step
shipments\_deliveries/receipts\_delivery\_two\_steps
shipments\_deliveries/receipts\_three\_steps
shipments\_deliveries/delivery\_three\_steps

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/management/lots_serial_numbers.md

  - nosearch

# Lots and Serial Numbers

<div class="toctree" data-titlesonly="" data-glob="">

lots\_serial\_numbers/differences lots\_serial\_numbers/serial\_numbers
lots\_serial\_numbers/lots lots\_serial\_numbers/expiration\_dates

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/management/misc.md

  - nosearch

# Miscellaneous Operations

<div class="toctree" data-titlesonly="" data-glob="">

misc/owned\_stock misc/batch\_transfers

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/management/products.md

  - nosearch

# Products

<div class="toctree" data-titlesonly="" data-glob="">

products/mto products/uom products/usage products/strategies
products/reordering\_rules products/scrap\_inventory

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/management/shipments_deliveries/receipts_delivery_two_steps.md

# Process receipts and deliveries in two steps

<div id="inventory/receipts_delivery_two_steps">

Depending on a company's business processes, multiple steps may be
needed before receiving or shipping products. In the two-step receipt
process, products are received in an input area, then transferred to
stock. Two-step receipts work best when various storage locations are
being used, such as locked or secured areas, freezers and refrigerators,
or various shelves.

</div>

Products can be sorted according to where they are going to be stored,
and employees can stock all the products going to a specific location.
The products are not available for further processing until they are
transferred into stock.

In the two-step delivery process, products that are part of a delivery
order are picked from the warehouse according to their removal strategy,
and brought to an output location before being shipped.

One situation where this would be useful is when using either a `FIFO
(First In, First Out)`, `LIFO (Last In, First Out)`, or `FEFO (First
Expired, First Out)` removal strategy, where the products that are being
picked need to be selected based on their receipt date or expiration
date.

Odoo is configured by default to `receive and deliver goods in one step
<inventory/receipts_delivery_one_step>`, so the settings need to be
changed in order to utilize two-step receipts and deliveries. Incoming
and outgoing shipments do not need to be set to have the same steps. For
example, products can be received in two steps, but shipped in one step.
In the following example, two steps will be used for both receipts and
deliveries.

## Configure multi-step routes

First, make sure the `Multi-Step Routes` option is enabled in `Inventory
--> Configuration --> Settings`, under the `Warehouse` heading. After
enabling the setting, `Save` the changes.

<div class="note">

<div class="title">

Note

</div>

Activating the `Multi-Step Routes` setting will also activate the
`Storage
Locations` feature.

</div>

![Activate multi-step routes and storage locations in inventory
settings.](receipts_delivery_two_steps/multi-step-routes.png)

Next, the warehouse needs to be configured for two-step receipts and
deliveries. Go to `Inventory --> Configuration --> Warehouses`, and
click `Edit` to change the warehouse settings.

Then, select `Receive goods in input and then stock (2 steps)` for
`Incoming
Shipments`, and `Send goods in output and then deliver (2 steps)` for
`Outgoing
Shipments`. `Save` the changes to finish.

![Set incoming and outgoing shipment options to receive and deliver in
two steps.](receipts_delivery_two_steps/two-step-warehouse-config.png)

<div class="tip">

<div class="title">

Tip

</div>

Activating two-step receipts and deliveries will create new *input* and
*output* locations, which by default, are labeled `WH/Input` and
`WH/Output`, respectively, on the `Locations` dashboard. To rename these
locations, go to `Configuration
--> Locations`, select the `Location` to change, and then click `Edit`.
On the location form, update the `Location Name`, make any other changes
(if necessary) and `Save` the changes.

</div>

## Process a receipt in two steps (input + stock)

### Create a purchase order

On the main `Purchase` application dashboard, start by making a new
quote by clicking `Create`. Then, select (or create) a `Vendor` from the
drop-down field, add a storable `Product` to the order lines, and click
`Confirm Order` to finalize the quote as a new purchase order.

<div class="important">

<div class="title">

Important

</div>

For businesses with multiple warehouses that have different step
configurations, the `Deliver To` field on the `PO (Purchase Order)` form
may need to be specified as the correct *input location* connected to
the two-step warehouse, which can be done by selecting the warehouse
from the drop-down selection that includes the
<span class="title-ref">Receipts</span> label at the end of the name.

</div>

After confirming the `PO (Purchase Order)`, a `Receipt` smart button
will appear in the top-right corner of the `PO (Purchase Order)` form —
click it to reveal the associated receipt.

![After confirming a purchase order, a Receipt smart button will
appear.](receipts_delivery_two_steps/two-step-po-receipt.png)

<div class="tip">

<div class="title">

Tip

</div>

Purchase order receipts can also be found in the `Inventory`
application. In the `Overview` dashboard, click the `# to Process` smart
button in the `Receipts` kanban card.

![One receipt ready to process in the Inventory Overview kanban
view.](receipts_delivery_two_steps/two-step-receipts-kanban.png)

</div>

### Process the receipt

The receipt and internal transfer will be created once the purchase
order is confirmed. The status of the receipt will be `Ready`, since the
receipt must be processed first. The status of the internal transfer
will be `Waiting Another Operation`, since the transfer cannot happen
until the receipt is completed. The status of the internal transfer will
only change to `Ready` once the receipt has been marked as `Done`.

Click on the `Receipt` associated with the purchase order, then click
`Validate` to complete the receipt and move the product to the `Input
Location`.

![Validate the receipt by clicking Validate, then the product will be
transferred to the&#10;WH/Input
location.](receipts_delivery_two_steps/validate-two-step-receipt.png)

### Process the internal transfer

Once the product is in the `Input Location`, the internal transfer is
ready to move the product into stock. Navigate to the `Inventory` app,
and on the `Inventory
Overview` dashboard, click the `# To Process` smart button in the
`Internal
Transfers` kanban card.

![One Internal Transfer ready to process in the Inventory Overview
kanban view.](receipts_delivery_two_steps/transfer-two-step-kanban.png)

Click on the `Transfer` associated with the purchase order, then click
`Validate` to complete the receipt and move the product to stock. Once
the transfer is validated, the product enters the stock and is available
for customer deliveries or manufacturing orders.

![Validate the internal transfer to move the item to
stock.](receipts_delivery_two_steps/two-step-validate-transfer.png)

## Process a delivery order in two steps (pick + ship)

### Create a sales order

In the `Sales` application, create a new quote by clicking `Create`.
Select or create a `Customer`, add a storable `Product` to the order
lines, and then click `Confirm`.

After confirming the `SO (Sales Order)`, a `Delivery` smart button will
appear in the top-right corner of the `SO (Sales Order)` form. Click it
to reveal the associated delivery forms.

![After confirming the sales order, the Delivery smart button appears
showing two items&#10;associated with
it.](receipts_delivery_two_steps/two-step-sales-quote.png)

<div class="tip">

<div class="title">

Tip

</div>

Sales order receipts can also be found in the `Inventory` application.
In the `Overview` dashboard, click the `# To Process` smart button in
the `Pick` kanban card.

![The pick order can be seen in the Inventory kanban
view.](receipts_delivery_two_steps/two-step-pick-kanban.png)

</div>

### Process the picking

The picking and delivery order will be created once the sales order is
confirmed. When the `Delivery` smart button appears, click it to reveal
the `Transfers` dashboard, which lists both the picking and the delivery
orders.

The status of the picking will be `Ready`, since the product must be
picked from stock before it can be shipped. The status of the delivery
order will be `Waiting Another
Operation`, since the delivery cannot happen until the picking is
completed. The status of the delivery order will only change to `Ready`
once the picking has been marked as `Done`.

![Ready status for the pick operation while the delivery operation is
Waiting
Another&#10;Operation.](receipts_delivery_two_steps/two-step-status.png)

Click on the picking delivery order to begin processing it. If the
product is in stock, Odoo will automatically reserve the product. Click
`Validate` to mark the picking as `Done`, then the delivery order will
be ready for processing. Since the documents are linked, the products
which have been previously picked are automatically reserved on the
delivery order.

![Validate the picking by clicking
Validate.](receipts_delivery_two_steps/validate-two-step-pick.png)

### Process the delivery

The delivery order will be ready to be processed once the picking is
completed, and can be found in the `Inventory` application, on the
`Inventory Overview` dashboard. Click the `# To Process` smart button in
the `Delivery Orders` kanban card to begin.

<div class="tip">

<div class="title">

Tip

</div>

The delivery order associated with the `SO (Sales Order)` can also be
quickly accessed by clicking on the `Delivery` smart button again, and
choosing the delivery order on the `Transfers` page (which should now be
marked as `Ready`).

</div>

![The delivery order can be seen in the Inventory Kanban
view.](receipts_delivery_two_steps/deliver-two-step-kanban.png)

Click on the delivery order associated with the `SO (Sales Order)`, then
click on `Validate` to complete the move.

![Click Validate on the delivery order to transfer the product from the
output location to&#10;the customer
location.](receipts_delivery_two_steps/validate-two-step-delivery.png)

Once the delivery order is validated, the product leaves the `WH/Output`
location on the `Transfers` dashboard and moves to the
`Partners/Customers` location. Then, the status of the document will
change to `Done`.


---
## File: ./content/applications/inventory_and_mrp/inventory/management/shipments_deliveries/receipts_three_steps.md

# Process receipts in three steps

<div id="inventory/receipts_three_steps">

Some companies require a quality control process before receiving goods
from suppliers. To accomplish this, Odoo has a three-step process for
receiving goods.

</div>

In the three-step receipt process, products are received in an input
area, then transferred to a quality area for inspection. Products that
pass the quality inspection are then transferred into stock. The
products are not available for further processing until they are
transferred out of the quality area and into stock.

## Configuration

Odoo is configured by default to `receive and deliver goods in one step
<inventory/receipts_delivery_one_step>`, so the settings need to be
changed in order to utilize three-step receipts. First, make sure the
*Multi-Step Routes* option is enabled in `Inventory --> Configuration
--> Settings --> Warehouse`. Note that activating `Multi-Step Routes`
will also activate *Storage Locations*.

![Activate multi-step routes and storage locations in Inventory
settings.](receipts_three_steps/multi-step-routes.png)

Next, the warehouse needs to be configured for three-step receipts. Go
to `Inventory
--> Configuration --> Warehouses`, and click `Edit` to edit the
warehouse. Then, select `Receive goods in input, then quality and then
stock (3 steps)` for `Incoming
Shipments`. Then, `Save` the changes.

![Set incoming shipment option to receive in three
steps.](receipts_three_steps/three-step-receipt-settings.png)

Activating three-step receipts and deliveries will create two new
internal locations: *Input* (WH/Input), and *Quality Control*
(WH/Quality Control). To rename these locations, go to `Configuration
--> Locations`, select the `Location` to change, click `Edit`, update
the name, and finally, click `Save`.

## Process a receipt in three steps (input + quality + stock)

### Create a purchase order

In the `Purchase` application, create a new quote by clicking `Create`.
Select a `Vendor`, add a storable `Product`, and click `Confirm
Order`.

A `Receipt` smart button will appear in the top right, and the receipt
will be associated with the purchase order. Clicking on the `Receipt`
smart button will show the receipt order.

![After confirming a purchase order, a Receipt smart button will
appear.](receipts_three_steps/three-step-purchase-receipt.png)

### Process a receipt

One receipt and two internal transfers (one transfer to quality, and a
subsequent transfer to stock) will be created once the purchase order is
confirmed. To view these transfers, go to `Inventory --> Operations -->
Transfers`.

![The status of the three receipt transfers will show which operation is
ready and which ones&#10;are waiting another
operation.](receipts_three_steps/three-step-transfers.png)

The status of the receipt transferring the product to the input location
will be `Ready`, since the receipt must be processed before any other
operation can occur. The status of the two internal transfers will be
`Waiting Another Operation`, since the transfers cannot be processed
until the linked step before each transfer is completed.

The status of the first internal transfer to *quality* will only change
to `Ready` when the receipt has been marked `Done`. The status for the
second internal transfer to *stock* will be marked `Ready` only after
the transfer to quality has been marked `Done`.

The receipt can also be found in the `Inventory` application. In the
`Overview` dashboard, click the `1 To Process` smart button in the
`Receipts` kanban card.

![One Receipt ready to process in the Inventory Overview kanban
view.](receipts_three_steps/three-step-receive-kanban.png)

Click on the receipt associated with the purchase order, then click
`Validate` to complete the receipt and move the product to the `Input
Location`.

![Validate the receipt by clicking Validate, and the product will be
transferred to the&#10;WH/Quality
location.](receipts_three_steps/validate-three-step-receipt.png)

### Process a transfer to Quality Control

Once the product is in the `Input Location`, the internal transfer is
ready to move the product to `Quality Control`. In the `Inventory`
`Overview` dashboard, click the `1 To Process` smart button in the
`Internal Transfers` kanban card.

![One Internal Transfer ready to process in the Inventory Overview
kanban view.](receipts_three_steps/three-step-quality-transfer.png)

Click on the `Transfer` associated with the purchase order, then click
`Validate` to complete the transfer and move the product to the `Quality
Control` location. Once the transfer is validated, the product is ready
for the quality inspection, but is not available for manufacturing or
delivery orders.

![Validate the internal transfer to move the item to the Quality Control
location.](receipts_three_steps/validate-three-step-quality-move.png)

## Process a transfer to stock

Once the product is in the `Quality Control` location, the final
internal transfer is ready to move the product to `Stock`. In the
`Inventory` overview dashboard, click the `1 To Process` smart button in
the `Internal Transfers` Kanban card.

Click on the final `Transfer` associated with the purchase order, then
click `Validate` to complete the transfer and move the product to stock.
Once the transfer is validated, the product enters the stock and is
available for customer deliveries or manufacturing orders.


---
## File: ./content/applications/inventory_and_mrp/inventory/management/shipments_deliveries/delivery_three_steps.md

# Process deliveries in three steps

<div id="inventory/delivery_three_steps">

Some companies process large amounts of deliveries every day, many of
which include multiple products or require special packaging. To make
this efficient, a packing step is needed before shipping out products.
For this, Odoo has a three step process for delivering goods.

</div>

In the default three-step delivery process, products that are part of a
delivery order are picked in the warehouse according to their removal
strategy, and brought to a packing zone. After the items have been
packed into the different shipments in the packing zone, they are
brought to an output location before being shipped. These steps can be
modified if they do not fit the needs of the business.

## Configuration

Odoo is configured by default to `receive and deliver goods in one step
<inventory/receipts_delivery_one_step>`, so the settings need to be
changed in order to utilize three step deliveries. First, make sure the
*Multi-Step Routes* option is enabled in `Inventory --> Configuration
--> Settings --> Warehouse`. Note that activating `Multi-Step Routes`
will also activate *Storage Locations*.

![Activate multi-step routes and storage locations in inventory
settings.](delivery_three_steps/multi-step-routes.png)

Next, the warehouse needs to be configured for three step deliveries. To
do this, go to `Inventory --> Configuration --> Warehouses`, and click
`Edit` to edit the `Warehouse`. Then, select `Pack goods, send goods in
output and then deliver
(3 steps)` for `Outgoing Shipments`. Then `Save` the changes.

![Set outgoing shipment option to deliver in three
steps.](delivery_three_steps/three-step-warehouse-config.png)

Activating three-step receipts and deliveries will create two new
internal locations: a *Packing Zone* (WH/Packing Zone), and *Output*
(WH/Output). To rename these locations, go to `Configuration -->
Locations`, select the `Location` to change, click `Edit`, update the
name, and finally, click `Save`.

## Process a delivery order in three steps (pick + pack + ship)

### Create a sales order

In the `Sales` application, create a new quote by clicking `Create`.
Select a `Customer`, add a storable `Product`, and click `Confirm`.

A `Delivery` smart button will appear in the top right. Clicking on it
will show the picking order, packing order, and the delivery order,
which are all associated with the sales order.

![After confirming the sales order, the Delivery smart button appears
showing three items&#10;associated with
it.](delivery_three_steps/three-step-delivery-so.png)

### Process a picking

The picking, packing, and delivery orders will be created once the sales
order is confirmed. To view these transfers, go to `Inventory -->
Operations --> Transfers`.

![Ready status for the pick operation while the packing and delivery
operations are waiting&#10;another
operation.](delivery_three_steps/three-step-delivery-transfers.png)

The status of the picking will be `Ready`, since the product must be
picked from stock before it can be packed. The status of the packing
order and delivery order will both be `Waiting Another Operation`, since
the packing and delivery cannot happen until the picking is completed.
The status of the delivery order will only change to `Ready` when the
packing has been marked `Done`.

The receipt can also be found in the *Inventory* application. In the
`Overview` dashboard, click the `1 To Process` smart button in the
`Pick` kanban card.

![The pick order can be seen in the Inventory Kanban
view.](delivery_three_steps/three-step-kanban-pick.png)

Click on the picking to process. If the product is in stock, Odoo will
automatically reserve the product. Click `Validate` to mark the picking
as done, and complete the transfer to the `Packing Zone`. Then the
packing order will be ready. Since the documents are linked, the
products which have been previously picked are automatically reserved on
the packing order.

![Validate the picking by clicking
Validate.](delivery_three_steps/validate-three-step-pick.png)

### Process a packing

The packing order will be ready to be processed once the picking is
completed, and can be found in the `Inventory` application `Overview`
dashboard. Click the `1 To
Process` smart button in the `Pack` kanban card.

![The packing order can be seen in the Inventory kanban
view.](delivery_three_steps/three-step-kanban-pack.png)

Click on the packing order associated with the sales order, then click
on `Validate` to complete the packing.

![Click Validate on the packing order to transfer the product from the
packing zone to the&#10;output
location.](delivery_three_steps/validate-three-step-pack.png)

Once the packing order is validated, the product leaves the `WH/Packing
Zone` location and moves to the `WH/Output` location. Then, the status
of the document will change to `Done`.

### Process a delivery

The delivery order will be ready to be processed once the packing is
completed, and can be found in the `Inventory` application `Overview`
dashboard. Click the `1 To
Process` smart button in the `Delivery Orders` kanban card.

![The delivery order can be seen in the Delivery Orders Kanban
view.](delivery_three_steps/three-step-kanban-delivery.png)

Click on the delivery order associated with the sales order, then click
on `Validate` to complete the move.

![Click Validate on the delivery order to transfer the product from the
output location to&#10;the customer
location.](delivery_three_steps/three-step-delivery-out.png)

Once the delivery order is validated, the product leaves the `WH/Output`
location and moves to the `Partners/Customers` location. Then, the
status of the document will change to `Done`.


---
## File: ./content/applications/inventory_and_mrp/inventory/management/shipments_deliveries/receipts_delivery_one_step.md

# Process receipts and deliveries in one step

<div id="inventory/receipts_delivery_one_step">

By default, incoming shipments are configured to be received directly
into stock, and outgoing shipments are configured to be delivered
directly from stock to the customer; the default setting for warehouses
in Odoo is one step receipts and deliveries.

</div>

<div class="note">

<div class="title">

Note

</div>

Incoming and outgoing shipments do not need to be configured with the
same steps. For example, products can be received in one step, but
shipped in three steps.

</div>

In the following example, one step will be used for both receipts and
deliveries.

## Configure the warehouse

If another receiving or shipping configuration is set on the warehouse,
they can easily be set back to the one step setting.

Begin by navigating to `Inventory --> Configuration -->
Warehouses`, click on the desired warehouse, and click `Edit`. Next, on
the `Warehouse Configuration` tab, under the `Shipments` section, select
`Receive goods directly (1 step)` for `Incoming Shipments` and/or
`Deliver goods directly (1 step)` for `Outgoing Shipments`, and `Save`
the changes to finish.

![Set incoming and outgoing shipment options to receive and deliver in
one step.](receipts_delivery_one_step/one-step-warehouse-config.png)

## Receive goods directly (1 step)

### Create a purchase order

On the main `Purchase` application dashboard, start by making a new
quote by clicking `Create`. Then, select (or create) a `Vendor` from the
drop-down field, add a storable `Product` to the order lines, and click
`Confirm Order` to finalize the quote as a new purchase order.

A `Receipt` smart button will appear in the top-right corner of the `PO
(purchase
order)` form — click it to reveal the associated receipt for the
purchase order.

![Receipt smart button appears on the confirmed purchase
order.](receipts_delivery_one_step/one-step-po-receipt.png)

<div class="tip">

<div class="title">

Tip

</div>

Purchase order receipts can also be found in the `Inventory`
application. In the `Overview` dashboard, click the `# to Process` smart
button in the `Receipts` kanban card.

![Receipt kanban card's 1 to Process smart
button.](receipts_delivery_one_step/one-step-to-process-btn.png)

</div>

### Process the receipt

When viewing the receipt (associated with the purchase order above),
click `Validate` to then complete the receipt.

![Validate the purchase order via the Validate smart
button.](receipts_delivery_one_step/one-step-po-validate.png)

<div class="note">

<div class="title">

Note

</div>

If `Storage Locations` are activated, clicking the `≣ (bullet list)`
details icon next to the `🗑️ (trash)` delete icon enables the `Detailed
Operations` screen to pop-up. This allows the location(s) to be
specified for the received product(s).

![Select the Storage Location for the products being received in the
Detailed
Operations&#10;pop-up.](receipts_delivery_one_step/receive-storage-location.png)

</div>

Once the receipt is validated, the product leaves the `Supplier
Location` and enters the `WH/Stock Location`. Once it arrives here, it
will be available for manufacturing, sales, etc. Then, the status of the
document will change to `Done`, thus completing the reception process in
one step.

## Deliver goods directly (1 step)

### Create a sales order

Start my navigating to the main `Sales` app dashboard, and make a new
quote by clicking `Create`. Then select (or create) a `Customer` from
the drop-down field, add a storable `Product` that is in stock to the
order lines, and click `Confirm` to finalize the quotation as a sales
order.

A `Receipt` smart button will appear in the top-right corner of the `PO
(purchase
order)` form — click it to reveal the associated receipt for the
purchase order.

A `Delivery` smart button will appear in the top-right corner of the `SO
(Sales
Order)` form — click it to reveal the associated delivery order for the
sales order.

![The Delivery smart button appears after the sales order is
confirmed.](receipts_delivery_one_step/one-step-sales-order.png)

<div class="tip">

<div class="title">

Tip

</div>

Delivery orders can also be found in the `Inventory` application. In the
`Overview` dashboard, click the `# to Process` smart button in the
`Delivery Orders` kanban card.

![Delivery Orders kanban card's 1 to Process smart
button.](receipts_delivery_one_step/one-step-delivery-to-process.png)

</div>

### Process the delivery

When viewing the delivery order (associated with the sales order above),
click `Validate` to then complete the delivery.

![Validate the delivery
order.](receipts_delivery_one_step/validate-one-step-sales-order.png)

Once the picking order is validated, the product leaves the `WH/Stock
location` and moves to the `Partners/Customers location`. Then, the
status of the document will change to `Done`, thus completing delivery
in one step.


---
## File: ./content/applications/inventory_and_mrp/inventory/shipping/operation/invoicing.md

# How to invoice the shipping cost to the customer?

## Overview

There are two ways to invoice the shipping costs:

1.  Agree with the customer over a cost and seal it down in the sale
    order
2.  Invoice the real cost of the shipping.

## Configuration

To configure the price of your delivery methods, go to the **Inventory**
app, click on `Configuration --> Delivery --> Delivery Methods`.

You can manually set a price for the shipping: It can be fixed or based
on rules.

Or you can use the transportation company computation system. Read the
document `../setup/third_party_shipper`

## How to invoice the shipping costs to the customer?

### Invoice the price set on the sale order

On your sale order, choose the carrier that will be used. Click on
**Delivery Method** to choose the right one.

![image](invoicing/invoicing06.png)

The price is computed when you **save** the sale order or when you click
on **Set price**.

To invoice the price of the delivery charge on the sale order, click on
**Set price**, it will add a line with the name of the delivery method
as a product. It may vary from the real price.

When you create the invoice, it will take the price set on the sale
order.

![image](invoicing/invoicing01.png)

### Invoice the real shipping costs

On your sale order, choose the carrier that will be used. Click on
**Delivery Method** to choose the right one.

![image](invoicing/invoicing05.png)

The price is computed when you **save** the sale order. Confirm the sale
order and proceed to deliver the product.

The real shipping cost is computed when the delivery order is validated,
you can see the real cost in the chatter of the delivery order.

![image](invoicing/invoicing02.png)

Go back to the sale order, the real cost is now added to the sale order.

![image](invoicing/invoicing03.png)

When you create the invoice, it will take the price computed by the
carrier.

![image](invoicing/invoicing04.png)

<div class="note">

<div class="title">

Note

</div>

If you split the delivery and make several ones, each delivery order
will add a line to the sale order.

</div>

<div class="seealso">

\* `../setup/third_party_shipper` \* `labels`

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/shipping/operation/multipack.md

# Multi-package shipments

In some cases, a delivery order with multiple items may need to be
shipped in more than one package. This may be necessary if the items are
too large to ship in a single package, or if certain items cannot be
packaged together. Shipping a single delivery order in multiple packages
provides flexibility for how each item is packaged, without the need to
create multiple delivery orders.

## Configuration

In order to split a delivery order across multiple packages, the
*Packages* setting must be enabled. To do so, navigate to `Inventory -->
Configuration --> Settings`, then enable the checkbox next to
`Packages`. Click `Save` to confirm the change.

![The Packages setting on the Inventory app settings
page.](multipack/packages-setting.png)

## Ship items in multiple packages

To split items in the same delivery order across multiple packages,
begin by navigating to `Inventory --> Delivery Orders`, then select a
delivery order that has multiple items, a multiple quantity of the same
item, or both.

On the `Operations` tab, select the `⁞≣ (menu)` icon in the line of the
product that will be shipped in the first package.

![The menu icon for a product in a delivery
order.](multipack/product-menu-icon.png)

This makes a `Detailed Operations` pop-up window appear. In the table at
the bottom of the pop-up window, the `Reserved` column shows the total
quantity of the product included in the delivery order.

If the full quantity will be shipped in the first package, enter the
number from the `Done` column in the `Reserved` column. If less than the
full quantity will be shipped in the first package, enter a smaller
number than the one that appears in the `Reserved` column. Click
`Confirm` to confirm the `Done` quantities and close the pop-up.

![The Detailed Operations pop-up for a product in a delivery
order.](multipack/detailed-operations.png)

Repeat the same steps for every item quantity that is included in the
first package. Then, click `Put In Pack` to create a package with all of
the selected items.

![The Put In Pack button on a delivery
order.](multipack/put-in-pack.png)

For the next package, follow the same steps as detailed above, marking
the quantity of each item to be included in the package as `Done` before
clicking `Put In Pack` on the delivery order. Continue doing so until
the full quantity of all items are added to a package.

Finally, after all of the packages have been shipped, click `Validate`
to confirm that the delivery order has been completed.

<div class="tip">

<div class="title">

Tip

</div>

After one or more packages are created, a `Packages` smart button
appears in the top-right corner of the delivery order. Click the
`Packages` smart button to go to the `Packages` page for the delivery
order, where each package can be selected to view all of the items
included in it.

![The Packages smart button on a delivery
order.](multipack/packages-smart-button.png)

</div>

## Create a backorder for items to be shipped later

If some items will be shipped at a later date than others, there is no
need to put them in a package until they are ready to be shipped.
Instead, create a backorder for the items being shipped later.

Begin by shipping the items that will be shipped immediately. If they
will be shipped in multiple packages, follow the `steps above
<inventory/shipping/multiple-packages>` to package them as required. If
they will be shipped in a single package, simply mark in the `Done`
column the quantity of each item being shipped, but **do not** click the
`Put In Pack` button.

After all quantities being shipped immediately are marked as `Done`,
click the `Validate` button, and a `Create Backorder?` pop-up window
appears. Then, click the `Create Backorder` button. Doing so confirms
the items being shipped immediately and creates a new delivery order for
the items that will be shipped later.

![The Create Backorder? pop-up window.](multipack/backorder-pop-up.png)

The backorder delivery order will be listed in the chatter of the
original delivery order in a message that reads `The backorder
WH/OUT/XXXXX has been created.`. Click on `WH/OUT/XXXXX` in the message
to view the backorder delivery order.

![The backorder delivery order listed in the chatter of the original
delivery order.](multipack/backorder-chatter.png)

The backorder delivery order can also be accessed by navigating to
`Inventory`, clicking the `# Back Orders` button on the `Delivery
Orders` card, and selecting the delivery order.

![The Back Orders button on the Delivery Orders
card.](multipack/back-orders-button.png)

Once the remaining items are ready to be shipped, navigate to the
backorder delivery order. The items can be shipped in a single package
by clicking `Validate` and selecting `Apply` on the `Immediate
Transfer?` pop-up window that appears, or shipped in multiple packages
by following the steps detailed in the section above.

It is also possible to ship out some of the items while creating another
backorder for the rest. To do so, simply follow the same steps used to
create the first backorder.


---
## File: ./content/applications/inventory_and_mrp/inventory/shipping/operation/cancel.md

# How to cancel a shipping request to a shipper?

## Overview

Odoo can handle various delivery methods, including third party
shippers. Odoo will be linked with the transportation company tracking
system.

It will allow you to manage the transport company, the real prices and
the destination.

You can easily cancel the request made to the carrier system.

## How to cancel a shipping request?

  - If the delivery order is not **Validated**, then the request hasn't
    been made. You can choose to cancel the delivery or to change the
    carrier.
  - If you have clicked on **Validate**, the request has been made and
    you should have received the tracking number and the label. You can
    still cancel the request. Simply click on the **Cancel** button next
    to the **Carrier Tracking Ref**:

![image](cancel/cancel01.png)

You will now see that the shipment has been cancelled.

![image](cancel/cancel02.png)

You can now change the carrier if you wish.

## How to send a shipping request after cancelling one?

After cancelling the shipping request, you can change the carrier you
want to use. Confirm it by clicking on the **Send to shipper** button.
You will get a new tracking number and a new label.

![image](cancel/cancel03.png)

<div class="seealso">

\* `invoicing` \* `multipack`

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/shipping/operation/labels.md

# How to print shipping labels?

## Overview

Odoo can handle various delivery methods, including third party shippers
linked with the transportation company tracking system. It allows you to
manage the transport company, the real prices and the destination. And
finally, you will be able to print the shipping labels directly from
Odoo.

## Configuration

### Install the shipper company connector module

In the **Inventory** module, click on `Configuration --> Settings`.
Under **Shipping Connectors**, flag the transportation companies you
want to integrate :

![image](labels/labels03.png)

Then click on **Apply**.

### Configure the delivery method

To configure your delivery methods, go to the **Inventory** module,
click on `Configuration --> Delivery Methods`.

The delivery methods for the chosen shippers have been automatically
created.

![image](labels/labels01.png)

In the **Pricing** tab, the name of the provider means that the delivery
will be handled and computed by the shipper system.

The configuration of the shipper is split into two columns :

  - The first one is linked to **your account** (develop key,
    password,...). For more information, please refer to the provider
    website.
  - The second column varies according to the **provider**. You can
    choose the packaging type, the service type, the weight unit...
  - Uncheck **Test Mode** when you are done with the testings.

### Company configuration

In order to compute the right price, the provider needs your company
information. Be sure your address and phone number are correctly
encoded.

![image](labels/labels02.png)

To check your information, go to the **Settings** application and click
on **General Settings**. Click on the first link **Configure your
company data**.

### Product configuration

The shipper companies need the weight of your product, otherwise the
price computation cannot be done.

Go the **Sales** module, click on `Sales --> Products`. Open the
products you want to ship and set a weight on it.

![image](labels/labels06.png)

<div class="tip">

<div class="title">

Tip

</div>

The weight on the product form is expressed in kilograms. Don't forget
to do the conversion if you are used to the imperial measurement system.

</div>

## How to print shipping labels?

The delivery order created from the sale order will take the shipping
information from it, but you can change the carrier if you want to.

If you create a delivery transfer from the inventory module, you can add
the third party shipper in the additional info tab.

![image](labels/labels05.png)

Click on **Validate** to receive the tracking number and **the
label(s)**.

The label to stick on your package is available in the history
underneath :

![image](labels/labels04.png)

Click on it to open the document and print it :

![image](labels/labels07.png)

<div class="note">

<div class="title">

Note

</div>

If you are doing multi-packages shippings, most of the time, there will
be one label per package. Each label will appear in the delivery
history.

</div>

<div class="seealso">

\* `invoicing` \* `multipack`

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/shipping/operation/dropshipping.md

# Use dropshipping to ship directly from suppliers to customers

Dropshipping is an order fulfillment strategy that allows sellers to
have items shipped directly from suppliers to customers. Normally, a
seller purchases a product from a supplier, stores it in their
inventory, and ships it to the end customer once an order is placed.
With dropshipping, the supplier is responsible for storing and shipping
the item. This benefits the seller by reducing inventory costs,
including the price of operating warehouses.

## Configure products to be dropshipped

To use dropshipping as a fulfillment strategy, navigate to the
`Purchase` app and select `Configuration --> Settings`. Under the
`Logistics` heading, click the `Dropshipping` checkbox, and `Save` to
finish.

Next, go to the `Sales` app, click `Products --> Products` and choose an
existing product or select `Create` to configure a new one. On the
`Product` page, make sure that the `Can be Sold` and `Can be Purchased`
checkboxes are enabled.

![Enable the "Can be Sold" and "Can be Purchased" checkboxes on the
product form.](dropshipping/sold-purchased-checkboxes.png)

Click on the `Purchase` tab and specify a vendor and the price that they
sell the product for. Multiple vendors can be added, but the vendor at
the top of the list will be the one automatically selected for purchase
orders.

![The product form with a vendor
specified.](dropshipping/product-vendor-config.png)

Finally, select the `Inventory` tab and enable the `Dropship` checkbox
in the `Routes` section.

![Enable the Dropship option in the product inventory
tab.](dropshipping/enable-dropship-route.png)

## Fulfill orders using dropshipping

When a customer completes an online purchase for a dropshipped product,
a sales order will be automatically created with an associated request
for quotation (`RFQ (Request for Quotation)`) for the supplier. Sales
orders can be viewed in the `Sales` app by selecting `Orders -->
Orders`. Click the `Purchase` smart button at the top right of a sales
order to view the associated `RFQ (Request for Quotation)`.

<div class="tip">

<div class="title">

Tip

</div>

Dropship sales orders can also be created manually through the `Sales`
app by selecting `Orders --> Orders --> Create` and adding a product
configured for dropshipping.

</div>

![A dropship sales order with the Purchase smart button in the top right
corner.](dropshipping/dropship-sales-order.png)

Once the `RFQ (Request for Quotation)` is confirmed, it becomes a
purchase order and a dropship receipt is created and linked to it. The
receipt can be viewed by clicking the `Receipt` smart button in the top
right corner of the purchase order form.

![A dropship purchase order with the Receipt smart button in the top
right corner.](dropshipping/dropship-purchase-order.png)

The dropship receipt will list the supplier in the `Receive From`
section and the customer in the `Destination Location` section. Upon
delivery of the product to the customer, click on the `Validate` button
at the top left of the dropship receipt to confirm the delivered
quantity.

![Validate the dropship receipt after
delivery.](dropshipping/validate-dropship-receipt.png)

To view all dropship orders, simply navigate to the `Inventory`
`Overview` dashboard and click the teal `# TO PROCESS` button on the
`Dropship` card.

![Click the green button on the Dropship card to view all dropship
orders.](dropshipping/view-all-dropship-orders.png)


---
## File: ./content/applications/inventory_and_mrp/inventory/shipping/operation/label_type.md

# Change shipping label size

## Overview

In Odoo, there are a variety of different types of shipping labels that
can be selected for delivery orders. Depending on the types of shipping
packages used, different label sizes may be more appropriate, and can be
configured to fit the package.

## Configuration

In the `Inventory` module, go to `Configuration --> Delivery -->
Shipping Methods.` Choose a delivery method and click `Edit`. For the
following example, *FedEx International* will be used.

![Different shipping methods.](label_type/shipping-options.png)

In the `Configuration` tab, under `Label Type`, choose one of the label
types available. The availability will vary depending on the carrier.
`Save` the changes.

![Select a label type.](label_type/label-type-dropdown.png)

When a sales order with the corresponding shipping company is confirmed
and a delivery order is validated, the shipping label will be
automatically created as a PDF and appear in the `Chatter`.

## Create a sales order

In the `Sales` application, click `Create` and select an international
customer. Click `Add A Product` and select an item. Click `Add
Shipping`, select a shipping method, then click `Get Rate`, and finally,
click `Add`.

![Add a shipping method and rate to a sales
order.](label_type/shipping-rate.png)

Once the quotation is confirmed by clicking `Confirm`, a `Delivery`
smart button will appear.

![Delivery order smart button.](label_type/shipping-italy-so.png)

Once the delivery order is validated by clicking `Validate` in the
delivery order, the shipping documents appear in the `Chatter`.

![Shipping PDF documents.](label_type/shipping-pdfs.png)

## Example labels

The default `Label Type` is `Paper Letter`. An example of a FedEx letter
sized label is:

![Full page letter size FedEx shipping
label.](label_type/full-page-fedex.png)

For comparison, an example of a FedEx bottom-half label is:

![Half page letter size FedEx shipping
label.](label_type/half-page-fedex.png)


---
## File: ./content/applications/inventory_and_mrp/inventory/shipping/setup.md

  - nosearch

# Shipping Setup

<div class="toctree" data-titlesonly="" data-glob="">

setup/delivery\_method setup/third\_party\_shipper
setup/ups\_credentials setup/dhl\_credentials

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/shipping/setup/ups_credentials.md

# How to get UPS credentials for integration with Odoo?

In order to use the Odoo UPS API, you will need:

  - A UPS.com user ID and password
  - A UPS account number
  - An Access Key

An Access Key is a 16 character alphanumeric code that allows access to
the UPS Developer Kit API Development and Production servers.

## Create a UPS Account

Note that only customers located in the US can open a UPS account
online. If you are located outside the US, you will need to contact UPS
Customer Service in order to to open an account.

You can read additional information about opening a UPS account on the
their website, on the page, [How to Open a UPS Account
Online](https://www.ups.com/content/us/en/resources/sri/openaccountonline.html?srch_pos=2&srch_phr=open+ups+account)

If you don't already have a UPS account, you can create one along with
your online profile by following these steps:

1\. Access the UPS.com web site at [www.ups.com](http://www.ups.com/),
and click the **New User** link at the top of the page.

2\. Click the **Register for MyUPS** button, and follow the prompts to
complete the registration process.

If you already have a UPS account, you can add it to your online profile
as follows:

1.  Log in to the [UPS.com website](http://www.ups.com/)) using your
    UPS.com User ID and Password.
2.  Click the **My UPS** tab.
3.  Click the **Account Summary** link.

4\. Click the **Add an Existing UPS Account** link in the **UPS Account
Details** section of the page.

5\. In the **Add New Account** screen, enter the **UPS Account Number**,
**Account Name**, and **Postal Code** fields. The country defaults to
United States.q

6.  Click the **Next** button to continue.

## Get an Access Key

After you have added your UPS account number to your user profile you
can request an Access Key from UPS using the steps below:

1.  Go to the [UPS Developer Kit web
    page](https://www.ups.com/upsdeveloperkit?loc=en_US)
2.  Log into UPS.com with your user ID and password
3.  Click on the link **Request an access key**.
4.  Verify your contact information
5.  Click the **Request Access Key** button.

The **Access Key** will be provided to you on the web page, and an email
with the Access Key will be sent to the email address of the primary
contact.


---
## File: ./content/applications/inventory_and_mrp/inventory/shipping/setup/dhl_credentials.md

# How to get DHL credentials for integration with Odoo?

In order to use the Odoo DHL API, you will need:

  - A DHL.com SiteID
  - A DHL Password
  - A DHL Account Number

## Getting SiteID and password for countries other than United States (UK and Rest of the world)

You should contact DHL account manager and request integration for XML
Express API. The presales should provide you live credentials.

## Getting SiteID and Password for United States

You need to write to <xmlrequests@dhl.com> along with your full Account
details like account number, region, address, etc. to get API Access.


---
## File: ./content/applications/inventory_and_mrp/inventory/shipping/setup/delivery_method.md

# How to setup a delivery method?

## Overview

Odoo can handle various delivery methods, but it is not activated by
default. Delivery methods can be used for your sale orders, your
deliveries but also on your e-commerce.

Delivery methods allow you to manage the transport company, the price
and the destination. You can even integrate Odoo with external shippers
to compute the real price and the packagings.

## Configuration

### Install the inventory module

Delivery methods are handled by the **Delivery costs** module. Go to
**Apps** and search for the module. You should remove the **Apps**
filter in order to see it :

![image](delivery_method/setup05.png)

<div class="note">

<div class="title">

Note

</div>

If you want to integrate delivery methods in your e-commerce, you'll
have to install the **eCommerce Delivery** module.

</div>

### Configure the delivery method

To configure your delivery methods, go to the **Inventory** module,
click on `Configuration --> Delivery Methods`.

First set a name and a transporter company.

![image](delivery_method/setup03.png)

Then you'll have to set the pricing. It can be fixed or based on rules.

  - If the price is fixed, tick **Fixed price**. You'll just have to
    define the price. If you want the delivery to be free above a
    certain amount, tick the option **Free if Order total is more than**
    and set a price.

![image](delivery_method/setup06.png)

  - If the price varies according to rules, tick **Based on Rules**.
    Click on **add an item to a pricing rule**. Choose a condition based
    on either the weight, the volume, the price or the quantity.

![image](delivery_method/setup04.png)

Finally you can limit the delivery method to a few destinations. The
limit can be applied to some countries, states or even zip codes. This
feature limits the list of countries on your e-commerce.

![image](delivery_method/setup02.png)

<div class="note">

<div class="title">

Note

</div>

You can integrate Odoo with external shippers in order to compute the
real price and packagings, and handle the printing the shipping labels.
See `third_party_shipper`

</div>

## Delivery process

### Sale order

![image](delivery_method/setup07.png)

You can now choose the **Delivery Method** on your sale order. If you
want to invoice the price of the delivery charge on the sale order,
click on **Set price**, it will add a line with the name of the delivery
method as a product.

### Delivery

You can add or change the delivery method on the delivery itself.

![image](delivery_method/setup01.png)

On the delivery, check the **Carrier Information**. The carrier is the
chosen delivery method.

<div class="seealso">

\* `third_party_shipper` \* `../operation/invoicing`

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/shipping/setup/third_party_shipper.md

# How to integrate a third party shipper?

## Overview

Odoo can handle various delivery methods, including third party
shippers. Odoo can be linked with the transportation company tracking
system. It will allow you to manage the transport company, the real
prices and the destination.

## Configuration

### Install the shipper company connector module

In the inventory module, click on `Configuration --> Settings`. Under
**Shipping Connectors**, flag the transportation companies you want to
integrate :

![image](third_party_shipper/third_party_shipper06.png)

Then click on **Apply**.

<div class="note">

<div class="title">

Note

</div>

If you want to integrate delivery methods in your e-commerce, you'll
have to install the **eCommerce Delivery** module.

</div>

### Configure the delivery method

To configure your delivery methods, go to the **Inventory** module,
click on `Configuration --> Delivery Methods`.

The delivery methods for the chosen shippers have been automatically
created. Most of the time, there will be **2** delivery methods for the
same provider: one for **international** shipping and the other for
**domestic** shipping.

You can create other methods with the same provider with other
configuration, for example the **Packaging Type**.

You can change the **Name** of the delivery method. This is the name
that will appear on your ecommerce.

Flag **Shipping enabled** when you are ready to use it.

![image](third_party_shipper/third_party_shipper02.png)

In the pricing tab, the name of the provider chosen under the **Price
computation** means that the pricing will be computed by the shipper
system.

The configuration of the shipper is split into two columns:

  - The first one is linked to **your account** (developer key,
    password,...). For more information, please refer to the provider
    website.
  - The second column varies according to the **provider**. You can
    choose the packaging type, the service type, the weight unit...
  - Uncheck **Test Mode** when you are done with the testings.

Finally you can limit the delivery method to a few destinations. You can
limit it to some countries, states or even zip codes. This feature
limits the list of countries on your e-commerce. It is useful for the
domestic providers. For example, USPS US only delivers from the United
States to the United States.

![image](third_party_shipper/third_party_shipper07.png)

### Company configuration

In order to compute the right price, the provider needs your company
information. Be sure your address and phone number are correctly
encoded.

![image](third_party_shipper/third_party_shipper03.png)

To check your information, go to the **Settings** application and click
on **General Settings**. Click on the first link **Configure your
company data**.

### Product configuration

The shipper companies need the weight of your product, otherwise the
price computation cannot be done.

Go the menu `Sales --> Sales --> Products`. Open the products you want
to ship and set a weight on it.

![image](third_party_shipper/third_party_shipper09.png)

<div class="tip">

<div class="title">

Tip

</div>

The weight on the product form is expressed in kilograms. Don't forget
to make the conversion if you are used to the imperial measurement
system.

</div>

## Sale process

### Sale order

![image](third_party_shipper/third_party_shipper05.png)

You can now choose the carrier on your sale order. Click on **Delivery
method** to choose the right one.

The price is computed when you save the sale order or when you click on
**Set price**.

If you want to invoice the price of the delivery charge on the sale
order, click on **Set price**, it will add a line with the name of the
delivery method as a product. It may vary from the real price.

Otherwise, the real price (computed when the delivery is validated) will
automatically be added to the invoice. For more information, please read
the document `../operation/invoicing`

### Delivery

The delivery created from the sale order will take the shipping
information from it. You can change the carrier if you want to.

If you create a delivery transfer from the inventory module, you can add
the third party shipper in the additional info tab.

![image](third_party_shipper/third_party_shipper01.png)

The weight is computed based on the products weights. The shipping cost
will be computed once the transfer is validated.

Click on **Validate** to receive the tracking number. The **Carrier
Tracking ref** field will automatically be filled. Click on the
**Tracking** button to check your delivery on the provider website.

![image](third_party_shipper/third_party_shipper08.png)

The label to stick on your package is available in the history
underneath :

![image](third_party_shipper/third_party_shipper04.png)

<div class="seealso">

\* `../operation/invoicing` \* `../operation/labels`

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/shipping/operation.md

  - nosearch

# Shipping Operations

<div class="toctree" data-titlesonly="" data-glob="">

operation/invoicing operation/multipack operation/labels
operation/label\_type operation/dropshipping operation/cancel

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/barcode/operations.md

  - nosearch

# Daily Operations

<div class="toctree" data-titlesonly="" data-glob="">

operations/adjustments operations/internal operations/transfers\_scratch
operations/barcode\_nomenclature

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/barcode/setup.md

  - nosearch

# Setup

<div class="toctree" data-titlesonly="" data-glob="">

setup/hardware setup/software

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/barcode/setup/hardware.md

# Set up your barcode scanner

Getting started with barcode scanning in Odoo is fairly easy. Yet, a
good user experience relies on an appropriate hardware setup. This guide
will help you through the task of choosing and configuring the barcode
scanner.

## Find the barcode scanner that suits your needs

The 3 recommended type of barcode scanners to work with the Odoo
**Inventory** and **Barcode Scanning** apps are the **USB scanner**,
**the bluetooth scanner** and the **mobile computer scanner**.

![image](hardware/hardware02.png)

  - If you scan products at a computer location, the **USB scanner** is
    the way to go. Simply plug it in the computer to start scanning.
    Just make sure when you buy it that the scanner is compatible with
    your keyboard layout or can be configured to be so.
  - The **bluetooth scanner** can be paired with a smartphone or a
    tablet and is a good choice if you want to be mobile but don't need
    a big investment. An approach is to log in Odoo on you smartphone,
    pair the bluetooth scanner with the smartphone and work in the
    warehouse with the possibility to check your smartphone from time to
    time and use the software 'manually'.
  - For heavy use, the **mobile computer scanner** is the handiest
    solution. It consists of a small computer with a built-in barcode
    scanner. This one can turn out to be a very productive solution,
    however you need to make sure that is is capable of running Odoo
    smoothly. The most recent models using Android + Google Chrome or
    Windows + Internet Explorer Mobile should do the job. However, due
    to the variety of models and configurations on the market, it is
    essential to test it first.

## Configure your barcode scanner

### Keyboard layout

![image](hardware/hardware01.png)

An USB barcode scanner needs to be configured to use the same keyboard
layout as your operating system. Otherwise, your scanner won't translate
characters correctly (replacing a 'A' with a 'Q' for example). Most
scanners are configured by scanning the appropriate barcode in the user
manual.

### Automatic carriage return

By default, Odoo has a 50 milliseconds delay between each successive
scan (it helps avoid accidental double scanning). If you want to
suppress this delay, you can configure your scanner to insert a carriage
return at the end of each barcode. This is usually the default
configuration and can be explicitly configured by scanning a specific
barcode in the user manual ('CR suffix ON', 'Apply Enter for suffix',
etc.).


---
## File: ./content/applications/inventory_and_mrp/inventory/barcode/setup/software.md

# Activate the Barcodes in Odoo

<div id="inventory/barcode/software">

The barcode scanning features can save you a lot of time usually lost
switching between the keyboard, the mouse and the scanner. Properly
attributing barcodes to products, pickings locations, etc. allows you to
work more efficiently by controlling the software almost exclusively
with the barcode scanner.

</div>

## Configuration

To use this feature, you first need to activate the *Barcode*
functionality via `Inventory --> Settings --> Barcode Scanner`. Once you
have ticked the feature, you can hit save.

![image](software/software_01.png)

## Set Product Barcodes

You can easily assign barcodes to your different products via the
*Inventory* app. To do so, go to `Settings --> Configure Products
Barcodes`.

![image](software/software_02.png)

Then, you have the possibility to assign barcodes to your products
directly at creation on the product form.

![image](software/software_03.png)

![image](software/software_04.png)

<div class="note">

<div class="title">

Note

</div>

Be careful to add barcodes directly on the product variants and not on
the template product. Otherwise, you won’t be able to differentiate
them.

</div>

## Set Locations Barcodes

If you manage multiple locations, you will find useful to attribute a
barcode to each location and stick it on the location. You can configure
the locations barcodes in `Inventory --> Configuration --> Locations`.

![image](software/software_05.png)

![image](software/software_06.png)

<div class="note">

<div class="title">

Note

</div>

You can easily print the barcode you allocate to the locations via the
*Print* menu.

</div>

## Barcode Formats

Most retail products use EAN-13 barcodes. They cannot be made up without
proper authorization. You must pay the International Article Numbering
Association a fee in exchange for an EAN code sequence.

Still, as Odoo supports any string as a barcode, you can always define
your own barcode format for internal use.


---
## File: ./content/applications/inventory_and_mrp/inventory/barcode/operations/transfers_scratch.md

# Create a Transfer from Scratch

To create a transfer from the *Barcode* application, you first need to
print the operation type barcodes. To do so, you can download the *Stock
barcode sheet* from the home page of the app.

![image](transfers_scratch/transfers_scratch_01.png)

Once done, you can scan the one for which you want to create a new
document. Then, an empty document will be created and you will be able
to scan your products to populate it.

![image](transfers_scratch/transfers_scratch_02.png)


---
## File: ./content/applications/inventory_and_mrp/inventory/barcode/operations/internal.md

# Process to Transfers

## Simple Transfers

To process a transfer from the *Barcode* app, the first step is to go to
*Operations*.

![image](internal/internal_01.png)

Then, you have the choice to either enter an existing transfer, by going
to the corresponding operation type and manually selecting the one you
want to enter, or by scanning the barcode of the transfer.

![image](internal/internal_02.png)

![image](internal/internal_03.png)

From there, you will be able to scan the products that are part of the
existing transfer and/or add new products to this transfer. Once all the
products have been scanned, you can validate the transfer to proceed
with the stock moves.

![image](internal/internal_04.png)

<div class="note">

<div class="title">

Note

</div>

If you have different storage locations in your warehouse, you can add
additional steps for the different operation types.

</div>

## Receipts

When receiving a product in stock, you need to scan its barcode in order
to identify it in the system. Once done, you can either make it enter
the main location of the transfer, for example WH/Stock, or scan a
location barcode to make it enter a sub-location of the main location.

![image](internal/internal_05.png)

<div class="note">

<div class="title">

Note

</div>

If you want the product to enter WH/Stock in our example, you can simply
scan the next product.

</div>

## Delivery Orders

When delivering a product, you have to scan the source location if it is
different than the one initially set on the transfer. Then, you can
start scanning the products that are delivered from this specific
location.

![image](internal/internal_06.png)

Once the different products have been scanned, you have the possibility
to scan another location, such as WH/Stock, and another page will be
added to your delivery order. You can move from one to the other thanks
to the *Previous* and *Next* buttons.

![image](internal/internal_07.png)

Now, you can validate your transfer. To do so, click on *Next* until you
reach the last page of the transfer. There, you will be able to validate
it.

![image](internal/internal_08.png)

## Internal Transfers

When realizing an internal transfer with multi-location, you first have
to scan the source location of the product. Then, you can scan the
product in itself, before having to scan the barcode of the destination
location.

If the source and destination of the internal transfers are already
correct, you don’t need to scan them.

### Transfers with Tracked Products

If you work with products tracked by lot/serial numbers, you have two
ways of working:

  - If you work with serial/lot numbers taking all products into
    consideration, you can scan the barcode of the lot/serial number and
    Odoo will increase the quantity of the product, setting its
    lot/serial number.

![image](internal/internal_09.png)

  - If you have the same lot/serial number for different products, you
    can work by scanning the product barcode first, and then the barcode
    of the lot/serial number.

![image](internal/internal_10.png)


---
## File: ./content/applications/inventory_and_mrp/inventory/barcode/operations/adjustments.md

# Process to an Inventory Adjustment with Barcodes

To process an inventory adjustment by using barcodes, you first need to
open the *Barcode* app. Then, from the application, click on *Inventory
Adjustments*.

![image](adjustments/adjustments_01.png)

<div class="note">

<div class="title">

Note

</div>

If you want to fully work with barcodes, you can download the sheet
*Commands for Inventory*.

</div>

Once you have clicked on *Inventory Adjustments*, Odoo will
automatically create one. Note that, if you work with multi-location,
you first need to specify in which location the inventory adjustment
takes place.

![image](adjustments/adjustments_02.png)

If you don’t work with multi-location, you will be able to scan the
different products you want to include in the inventory adjustment.

![image](adjustments/adjustments_03.png)

<div class="note">

<div class="title">

Note

</div>

If you have 5 identical articles, scan it 5 times or use the keyboard to
set the quantity.

</div>

Besides using the barcode scanner, you can also manually add a product
if necessary. To do so, click on *Add Product* and fill the information
in manually.

![image](adjustments/adjustments_04.png)

![image](adjustments/adjustments_05.png)

When you have scanned all the items of the location, validate the
inventory manually or scan the *Validate* barcode.

![image](adjustments/adjustments_06.png)


---
## File: ./content/applications/inventory_and_mrp/inventory/barcode/operations/barcode_nomenclature.md

# Overview

There are different situations in which barcode nomenclatures can be
useful. A well-known use case is the one of a point of sale which sells
products in bulk, in which the customers will scale their products
themselves and get the printed barcode to stick on the product. This
barcode will contain the weight of the product and help compute the
price accordingly.

## Create a Barcode Nomenclature

Odoo supports Barcode Nomenclatures, which determine the mapping and
interpretation of the encoded information. You can configure your
barcode nomenclature being in `developer mode <developer-mode>`. To do
so, go to `Inventory --> Configuration --> Barcode Nomenclature`.

You can create a barcode nomenclature from there, and then add a line to
create your first rule.

![image](barcode_nomenclature/barcode_nomenclature_01.png)

The first step is to specify the **rule name**, for example Weight
Barcode with 3 Decimals. You then have to specify the type for barcode
nomenclature, in our case it will be Weighted Product.

![image](barcode_nomenclature/barcode_nomenclature_02.png)

The Barcode Pattern is a regular expression that defines the structure
of the barcode. In this example 21 defines the products on which the
rule will be applied, those are the numbers by which the product barcode
should start. The 5 “dots” are the following numbers of the product
barcode and are there simply to identify the product in question. The
“N” define a number and the “D” define the decimals.

The encoding allows to specify the barcode encoding on which the rule
should be applied.

<div class="note">

<div class="title">

Note

</div>

You can define different rules and order their priority thanks to the
sequence. The first rule which matches the scanned barcode will be
applied.

</div>

### Configure your Product

1.  The barcode of the product should start by “21”;
2.  The 5 “dots” are the other numbers of your product barcode, allowing
    to identify the product;
3.  The barcode should contain 0’s where you did defined D’s or N’s. In
    our case we need to set 5 zeros because we configured
    “21…..{NNDDD}”;
4.  In EAN-13, the last number is a check number, use an EAN13 generator
    to know which digit it should be in your case.

![image](barcode_nomenclature/barcode_nomenclature_03.png)

In case you weight 1,5 Kg of pasta, the balance will print you the
following barcode 2112345015002. If you scan this barcode in your POS or
when receiving products in your barcode application, Odoo will
automatically create a new line for the Pasta product for a quantity of
1.5 Kg. For the point of sale, a price depending on the quantity will
also be computed.

![image](barcode_nomenclature/barcode_nomenclature_04.png)

### Rule Types

  - **Priced Product**: allows you to identify the product and specify
    its price, used in POS.
  - **Discounted Product**: allows you to create one barcode per applied
    discount. You can then scan your product in the POS and then scan
    the discount barcode, discount will be applied on the normal price
    of the product.
  - **Weighted Product**: allows you to identify the product and specify
    its weight, used in both POS (in which the price is computed based
    on the weight) and in inventory.
  - **Client**: allows you to identify the customer, for example used
    with loyalty program.
  - **Cashier**: allows you to identify the cashier when entering the
    POS.
  - **Location**: allows you to identify the location on a transfer when
    multi-location is activated.
  - **Package**: allows you to identify packages on a transfer when
    packages are activated.
  - **Credit Card**: doesn’t need manual modification, exists for data
    from the Mercury module.
  - **Unit Product**: allows you to identify a product for both POS and
    transfers.

<div class="note">

<div class="title">

Note

</div>

When the barcode pattern contains .\*, it means that it can contain any
number of characters, those characters being any number.

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/routes/concepts.md

  - nosearch

# Concepts

<div class="toctree" data-titlesonly="" data-glob="">

concepts/use-routes concepts/cross\_dock concepts/stock\_warehouses

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/routes/strategies/putaway.md

# Putaway rules

Putaway is the process of routing products to appropriate storage
locations upon shipment arrival. Odoo can accomplish this seamlessly
using *putaway rules*, which dictate how products move through specified
warehouse locations.

Upon shipment arrival, operations are generated based on putaway rules
to efficiently move products to specified locations and ensure easy
retrieval. Putaway rules can also prevent volatile substances from being
stored in close proximity by directing them to different locations
determined by the warehouse manager.

<div class="seealso">

\- `How push rules work <inventory/routes/concepts/use-routes/push>` -
`Warehouse locations <inventory/warehouses/location-definition>`

</div>

## Enable putaway rules

Begin by navigating to `Inventory app --> Configuration --> Settings`,
then activate the `Multi-Step Routes` checkbox under the `Warehouse`
heading. By doing so, the `Storage Locations` setting is automatically
enabled as well. Finally, click `Save`.

![In configs, for the Inventory app, check multi-step routes box to
enable Putaway rules.](putaway/multi-step-routes.png)

## Put away products

Putaway rules are commonly used to move products to specific locations
for easy retrieval. Thus, products are grouped in the same *product
category* when a single putaway rule captures the group's storage needs.

To manage where specific products are routed for storage, navigate to
`Inventory app
--> Configuration --> Putaway Rules`. Use the `Create` button to
configure a new putaway rule on a `Product` or `Product Category` that
the rule affects.

In the same line, the `When product arrives in` location is where the
putaway rule is triggered to create an operation to move the product to
the `Store to` location. The `Store to` location must be a sublocation
of the first (e.g. <span class="title-ref">WH/Stock/Fruits</span> is a
specific, named location inside <span class="title-ref">WH/Stock</span>
to make the products stored here easier to find).

<div class="example">

Ensure all apples are stored in the fruits section by filling the field
`Store to` with the location
<span class="title-ref">WH/Stock/Fruits</span> when the `Product`,
<span class="title-ref">Apple</span> arrives in
<span class="title-ref">WH/Stock</span>. Repeat this for all products
and hit `Save`.

![Create putaway rules for apples and
carrots.](putaway/create-putaway-rules.png)

</div>

<div class="note">

<div class="title">

Note

</div>

It is also possible to create and manage putaway rules for a single
product by going to the product page and clicking the `Putaway Rules`
smart button at the top of the page. If the button is not visible at
first glance, select the `More` button at the top right to view
additional smart buttons.

</div>

<div id="inventory/routes/strategies/putaway/internal-stock-moves">

<div class="tip">

<div class="title">

Tip

</div>

Check whether putaway rules work as intended using the summary of
internal product movements. In the `Inventory` app, select `Reporting
--> Product Moves` and enable the `Internal` search filter on the
`Filters` drop-down menu under the search bar at the top of the page. In
this view, confirm that products are moved to the `Store to` location
detailed in the putaway rule. More details in `this section
<inventory/routes/strategies/putaway/wrong-location>`.

</div>

</div>

### Use putaway rules

Once a putaway rule is configured, the product it specifies is
automatically routed to the `Store to` location upon arriving in the
`When product arrives in` location.

For example, on a putaway rule with the `When product arrives in`
location set to <span class="title-ref">WH/Stock</span>, internal stock
moves are automatically created when products first enter the warehouse.
To trigger this putaway rule, begin by creating a `purchase order
<inventory/purchase/manage_deals/manage>` (PO) to bring products into
the warehouse.

To create a `Request for Quotation` (RFQ), go to the `Purchase` app, and
click `Create`. Then, add products to the `RFQ (Request for Quotation)`
by clicking `Add a line`, and selecting the desired product(s) from the
drop-down menu in the `Product` column.

Once ready, click `Confirm`. Doing so turns the `RFQ (Request for
Quotation)` into a `PO (Purchase Order)`. Next, click `Send by Email` to
send the `PO (Purchase
Order)` to the vendor, if needed.

![View purchase order for apples and
carrots.](putaway/purchase-apples-and-carrots.png)

Begin receiving the incoming shipment by selecting the `Receipt` smart
button on the `PO (Purchase Order)`. Click `Receive products` and then
`Validate` to move products into the warehouse. Since the putaway rule
is set to trigger when products arrive in stock, internal transfers are
automatically created when products arrive in the `Destination
Location`, <span class="title-ref">WH/Stock</span>. This ensures
products entering the warehouse are stored in specific locations
suitable for their storage needs.

![In the WH reception operation, receive package of apples and
carrots.](putaway/receive-incoming-stock.png)

## Verify stock moves

Confirm whether the putaway rule worked as intended and that the
products have been moved to the correct location using the `Stock On
Hand` dashboard. View all products in stock in `Inventory app -->
Reporting --> Inventory Report`. By default, the products are grouped by
location.

Select a product's collapsable drop-down menu, which displays the
current location(s) of the product. Then, select a `Location` drop-down
menu to view a list of all stock movements in and out of each location.
Each of these lines are records of a stock move, called a *stock move
line*.

![Verify stock moves triggered by putaway rule in the Inventory
Report.](putaway/destination-locations.png)

### Trace products in wrong locations

To trace products and associated documents for warehouse operations, use
the `Product
Moves` report in `Inventory app --> Reporting --> Product Moves`. View a
product's warehouse operation history by selecting a product's drop-down
menu. Each stock move line contains details about any movement of stock,
such as manufacturing orders, inventory adjustments, or internal
transfers. Click on a stock move line to view all the information in a
comprehensive report.

The stock move line is useful because the `Reference` displays the
warehouse operation associated to the `Product`. Use the `From` and `To`
location and associated `Source` documents to trace the product path and
identify the type of operation.

<div class="tip">

<div class="title">

Tip

</div>

It is also possible to view the stock moves of a product directly from
the product page. Open the desired product page by navigating to
`Inventory --> Products --> Products` and select the product. From
there, click on the `Product Moves` smart button, then click the
product's collapsable drop-down menu from the list. This displays the
stock moves history of the product.

</div>

<div id="inventory/strategies/putaway/stock-moves">

<div class="example">

A putaway rule was purposely set up incorrectly on
<span class="title-ref">Apple</span>, so the product was moved from
<span class="title-ref">WH/Stock</span> to
<span class="title-ref">WH/Stock/Shelf 1</span> instead of the expected
location, <span class="title-ref">WH/Stock/Fruits</span>. To trace the
path the apple moved and identify the cause of the wrong stock move,
open the `Product Moves` report in `Inventory app --> Reporting -->
Product
Moves`. The apple's drop-down menu, when opened, displays a list of
stock moves of the apple. line to open a report that is useful to trace
the path the product moved and identify the cause of the wrong stock
move.

The `To` field displays where the product currently is,
<span class="title-ref">WH/Stock/Shelf 1</span>, which is the wrong
location. The `From` location is the vendor's location, which is
expected since the `Source` of the stock move is a `PO (Purchase
Order)`.

The `Reference` operation, <span class="title-ref">WH/IN/00015</span>,
which is a warehouse reception of products from the vendor, would
further explain why the apples were moved to the wrong location.

![Open stock move report](putaway/stock-move-report.png)

</div>

</div>

To follow an operation identified from the `Product Moves` report,
navigate to `Inventory --> Operations --> Transfers`. This is the page
that displays all warehouse transfers— internal or external. Search for
and click on the corresponding `Reference` operation to view the
document explaining why the product was moved to the wrong location.

<div class="tip">

<div class="title">

Tip

</div>

When there are too many records, use either the `Filters` or `Group by`
features to sort and `find desired records
<inventory/routes/strategies/putaway/use-advanced-filters>`. It is
useful to search exclusively for the receipt operation type because
putaway rules store products *into* a specific stock location.

</div>

<div class="example">

Continuing to diagnose why the product,
<span class="title-ref">Apple</span>, was placed in
<span class="title-ref">WH/Stock/Shelf 1</span>, navigate to the list of
all transfers in `Inventory --> Operations --> Transfers`. Click on the
list item where the `Reference` field matches the
<span class="title-ref">WH/IN/00015</span> operation identified in the
`previous example <inventory/strategies/putaway/stock-moves>` to open
the receipt.

![In the Transfers page in the Inventory app, select the desired
transfer to view the&#10;record.](putaway/transfers.png)

This receipt describes which products were received from the supplier,
with the affiliated `PO (Purchase Order)` linked in the `Source
Document` field. On the warehouse reception document, the field
`Destination Location` shows where the product is received upon entering
the warehouse.

Clicking on the `≣ (Detailed Operations)` icon to the right of the
product line opens a window that shows the product was moved to the
wrong location. Based on this information it can be gathered that the
putaway rule was triggered but the location was set incorrectly. Rectify
this in `Inventory --> Configuration --> Putaway Rules`.

![Click Detailed Operations button on the right of warehouse transfers
page to the right&#10;of the WH reception
document.](putaway/detailed-operations.png)

![Show putaway rule in detailed operations
popup.](putaway/automated.png)

</div>

### Advanced filter search

Keep track of and trace products on the `Product Moves` report by
navigating to `Inventory app --> Reporting --> Product Moves` and use
the `Filters` and `Group by` features to stay updated on warehouse
operations.

Transfers based on putaway rules can be found by toggling on the
`Internal` filter as mentioned in this `tip
<inventory/routes/strategies/putaway/internal-stock-moves>` previously.
Other useful filters and groupbys intended for reporting on the
company's internal operations include:

1.  Filter by `Incoming` and `To Do` to display shipments from vendors
    yet to be processed.
    
    ![Filter warehouse transfer records by Incoming shipments and
    processes ToDo.](putaway/product-moves-to-do.png)

2.  Use custom filters to search for a specific product by its name,
    `lot/serial number
    <inventory/management/lots-serial-numbers>` or barcode. Create a
    custom filter by clicking on `Filters`. Click `Add Custom Filter`,
    fill in the identifying information, and click `Apply`. Now that the
    custom filter is active, click on the `Filters` button again to
    create any additional filters.

3.  Group by `Date`: View all product moves on a specific date.

4.  Group by `From`: Create a custom filter that displays all locations
    that currently store at least 1 product. This is useful to view all
    the locations and sublocations to optimize storage space.

5.  `Favorite` the current search with filters applied. This feature is
    useful to apply the filters promptly, especially if this search is
    often used.
    
    ![Use the star button under the search bar to save current search as
    a favorite view.](putaway/save-favorites.png)


---
## File: ./content/applications/inventory_and_mrp/inventory/routes/strategies/removal.md

# Removal strategies (FIFO, LIFO, FEFO)

<div id="inventory/routes/strategies/removal">

For companies with warehouses, **removal strategies** determine which
products are taken from the warehouse, and when. Removal strategies are
typically defined for specific picking operations. This helps companies
to select the best products, optimize the distance workers need to
travel when picking items for orders, and account for quality control,
such as moving products with expiration dates.

</div>

Usually, *Removal Strategies* are defined in picking operations to
select the best products to optimize the distance for the worker, for
quality control purposes, or to first move the products with the closest
expiration date.

When a product needs to be moved, Odoo finds available products that can
be assigned to the transfer. The way Odoo assigns these products depends
on the `Removal Strategy` defined in either the `Product Category` or
the `Location` dashboards.

To change the `Removal Strategy`, go to `Inventory app --> Configuration
--> Locations` or `Product Categories`. Click on a `Location` or
`Product Category`, and then click `Edit`. Change the product category
`Force Removal Strategy` or the location `Removal Strategy` by clicking
on the drop-down menu and selecting the desired removal strategy. After
selecting the new removal strategy, click `Save`.

![Change the Force Removal Strategy for either the Product Categories or
Locations.](removal/product-category-location.png)

## What happens inside the warehouse?

Most warehouses share the same important areas: receiving docks and
sorting areas, storage locations, picking and packing areas, and
shipping/loading docks. While all products entering or leaving the
warehouse might go through each of these locations at some point,
removal strategies can have an effect on which products are taken, from
where, and when.

In this example below, vendor trucks unload pallets of goods at the
receiving docks. Then, operators scan the products in the receiving
area, with the reception date and expiration date. After that, products
are stored in their respective storage locations.

<div class="note">

<div class="title">

Note

</div>

Not all products have expiration dates, but in this example, expiration
dates apply.

</div>

![Products entering stock via the receiving
area.](removal/entering-stocks.png)

In Odoo, receive products by navigating to the `Inventory` application,
and in the kanban view, click on either the `Receipts` heading or `# TO
PROCESS` button. On the `Receipts` dashboard, find and click on the
individual receipt which will open the warehouse intake form. Click
`Edit`, and then enter the received quantity in the `Done` column. To
finish, `Validate` to receive the products and register them in the Odoo
database.

<div class="tip">

<div class="title">

Tip

</div>

Receiving products can also be done within the Odoo *Barcode*
application. If using the *Barcode* app, scan the product(s), update the
quantity, and finally, click `Validate`. After products are received in
Odoo, the products can then be moved to their respective storage
locations.

</div>

Continuing with the same example, below, imagine several sales orders
are made for the products received earlier, that use expiration dates.
In this example, the products weren't received on the same day, and they
don't have the same expiration date. In this situation, logically,
sending products with the closest expiration date is preferred, instead
of products received first or last. Using the chosen removal strategy
configured for those products (in this example, `FEFO <routes/FEFO>`),
Odoo generates a transfer for the products with the soonest expiration
date to the picking area, then the packing area, and finally, to the
shipping docks for delivery to the customer.

![Products being packed at the packing area for delivery, taking the
expiration dates into&#10;account.](removal/packing-products.png)

<div class="note">

<div class="title">

Note

</div>

To pick for delivery, the product's lot/serial number can be found on
the transfer form. To learn more about picking and shipping, refer to
either
`../../management/shipments_deliveries/receipts_delivery_two_steps` or
`../../management/shipments_deliveries/delivery_three_steps`.

</div>

## How each removal strategy works

Removal strategies determine which products are taken from the warehouse
when orders are confirmed.

### First In, First Out (FIFO)

When using a `First In, First Out (FIFO)` strategy, demand for a product
triggers a removal rule, which requests a transfer for the lot/serial
number that entered the stock first (and therefore, has been in stock
for the longest time).

For example, imagine there are three lots of nails in the warehouse, and
have the corresponding lot numbers:
<span class="title-ref">00001</span>,
<span class="title-ref">00002</span>,
<span class="title-ref">00003</span>. Each lot has five boxes of nails
in it.

Lot <span class="title-ref">00001</span> entered the stock on May 23,
lot <span class="title-ref">00002</span> on May 25, and lot
<span class="title-ref">00003</span> on June 1. A customer orders six
boxes on June 11.

Using the `FIFO (First In, First Out)` removal strategy, a transfer
request will pick the five boxes from lot
<span class="title-ref">00001</span> first, and then from the boxes in
lot <span class="title-ref">00002</span>, since lot
<span class="title-ref">00001</span> entered the stock first. The box
from lot <span class="title-ref">00002</span> is taken next because it
has the oldest receipt date after lot
<span class="title-ref">00001</span>.

![The detailed operations for the transfer shows the nail lots to be
removed.](removal/fifo-nails-picking.png)

### Last In, First Out (LIFO)

Similar to the `FIFO (First In, First Out)` method, the `Last In, First
Out (LIFO)` removal strategy moves products based on the date they
entered a warehouse's stock. Instead of removing the oldest stock
on-hand, however, it targets the **newest** stock on-hand for removal.

Every time an order for products with the `LIFO (Last In, First Out)`
method is placed, a transfer is created for the lot/serial number that
has most recently entered the stock (the **last** lot/serial number that
entered the warehouse's inventory).

<div class="warning">

<div class="title">

Warning

</div>

In many countries, the `LIFO (Last In, First Out)` removal strategy in
banned, since it can potentially result in old, expired, or obsolete
products being delivered to customers.

</div>

For example, imagine there are three lots of boxes of screws in the
warehouse, and have the corresponding lot numbers:
<span class="title-ref">10001</span>,
<span class="title-ref">10002</span>, and
<span class="title-ref">10003</span>, each with 10 boxes of screws per
lot.

Lot <span class="title-ref">10001</span> entered the stock on June 1,
lot <span class="title-ref">10002</span> on June 3, and lot
<span class="title-ref">10003</span> on June 6. A customer orders seven
boxes on June 8.

Using the `LIFO (Last In, First Out)` removal strategy, a transfer is
requested for seven boxes of screws from lot
<span class="title-ref">10003</span> because that lot is the last one to
have entered the stock.

![The detailed operations shows which lots are being selected for the
picking.](removal/lifo-nails.png)

### First Expired, First Out (FEFO)

While the `FIFO (First In, First Out)` and `LIFO (Last In, First Out)`
methods target products for removal based on date of entry into the
warehouse, the `First Expired, First
Out (FEFO)` method targets products for removal based on their assigned
expiration dates.

Using the `FEFO (First Expired, First Out)` removal strategy, every
sales order that includes products with this removal strategy assigned
ensures that transfers are requested for products with the expiration
date soonest to the order date.

As an example, imagine there are three lots of six-egg boxes. Those
three lots have the following lot numbers:
<span class="title-ref">20001</span>,
<span class="title-ref">20002</span>, and
<span class="title-ref">20003</span>, each with five boxes in it.

Lot <span class="title-ref">20001</span> entered the stock on July 1 and
expires on July 15, lot <span class="title-ref">20002</span> entered on
July 2 and expires on July 14, and lot
<span class="title-ref">20003</span> entered on July 3 and expires on
July 21. A customer orders six boxes on July 5.

Using the `FEFO (First Expired, First Out)` method, a transfer is
requested for the five boxes from lot
<span class="title-ref">20002</span> and one from lot
<span class="title-ref">20001</span>. All the boxes in lot
<span class="title-ref">20002</span> are transferred because they have
the earliest expiration date. The transfer also requests one box from
lot <span class="title-ref">20001</span> because it has the next closest
expiration date after lot <span class="title-ref">20002</span>.

![The detailed operations for the transfer shows the lots to be
removed.](removal/egg-lots-removal.png)

## Using removal strategies

To differentiate some units of products from others, the units need to
be tracked, either by `Lot` or by `Serial Number`. To do so, go to
`Inventory -->
Configuration --> Settings`. Then, activate the `Storage Locations`,
`Multi-Step
Routes`, and `Lots & Serial Numbers` settings. Click `Save` to save
changes.

![:alt: Traceability settings.](removal/traceability.png)

![:alt: Warehouse settings.](removal/warehouse-settings.png)

<div class="note">

<div class="title">

Note

</div>

To use the `FEFO (First Expired, First Out)` removal strategy, the
`Expiration
Dates` setting needs to be activated as well. To enable this, go to
`Inventory app
--> Configuration --> Settings`, scroll down to the `Traceability`
section, and click the checkbox next to `Expiration Dates`. Remember to
click `Save` to save all changes.

</div>

Now, specific removal strategies can be defined on product categories.
To do this, go to `Inventory app --> Configuration --> Product
Categories`, and choose a product category to define the removal
strategy on. In the `Force Removal Strategy` field, choose a removal
strategy.

![:alt: Removal strategy on a product
category.](removal/product-category-removal.png)

To view all products with lots/serial numbers assigned to them, navigate
to `Inventory app --> Products --> Lots/Serial Numbers`. This reveals a
page with drop-down menus of all products assigned lots or serial
numbers, filtered by *product* by default. To change the category these
products are filtered by, click `Product` (in the search bar, in the top
right of the page) to remove the default filter, and select a new filter
if desired.

![Click on Products, then Lots/Serial Numbers to display all the
products with lots or serial&#10;numbers.](removal/lot-serial.png)

To view the serial numbers being selected for a sales order, go to the
`Sales app` and select the sales order in question. In the sales order,
click the `Delivery` smart button in the top right. In the `Operations`
tab, click the `⦙≣ (Detailed Operations)` icon in the far right for the
product in question. The `Detailed Operations` window appears, and
displays the lot or serial numbers selected for that specific product
for the delivery order.

### FIFO (First In, First Out)

The `FIFO (First In, First Out)` removal strategy implies that products
which enter a warehouse's stock first are removed first. Companies
should use this method if they are selling products with short demand
cycles, such as clothes, to ensure they are not stuck with outdated
styles in stock.

In this example, there are three lots of white shirts. The shirts are
from the *All/Clothes* category, where *FIFO* is set as the removal
strategy. In the `Inventory Valuation
Report`, the three different receipts are listed with the amounts.

![View of the lots of white shirts in the inventory valuation
report.](removal/inventory-valuation.png)

Lot <span class="title-ref">000001</span> contains five shirts, lot
<span class="title-ref">000002</span> contains three shirts, and lot
<span class="title-ref">000003</span> contains two shirts.

To see the removal strategy in action, go to the `Sales app` and click
`Create` to create a sales order. Next, select a `Customer` from the
drop-down menu. Then click `Add a product` in the `Order Lines` tab.
Select a product (for this example, the `White Shirt`) from the
drop-down menu, or type in the name of the product in the field. Enter a
quantity (for this example, <span class="title-ref">6.00</span>) in the
`Quantity` field, then click `Save`, then click `Confirm`.

Once the sales order is confirmed, the delivery order will be created
and linked to the picking, and the oldest lot numbers will be reserved
thanks to the `FIFO (First In, First Out)` strategy. All five shirts
from lot <span class="title-ref">000001</span> and one shirt from lot
<span class="title-ref">000002</span> will be selected to be sent to the
customer.

![Two lots being reserved for a sales order with the FIFO
strategy.](removal/reserved-lots-fifo-strategy.png)

### LIFO (Last In, First Out)

The `LIFO (Last In, First Out)` removal strategy works in the
**opposite** manner from the `FIFO (First In, First Out)` strategy. With
this method, the products that are received **last** are moved out
first. This method is mostly used for products without a shelf life, and
no time-sensitive factors, such as expiration dates.

In this example, there are three lots of cinder blocks. The blocks are
from the *All/Building Materials* category, where *FIFO* is set as the
removal strategy. In the `Inventory
Valuation Report`, the three different receipts are listed with the
amounts.

![View of the lots of cinder blocks in the inventory valuation
report.](removal/inventory-valuation-bricks.png)

Lot <span class="title-ref">000020</span> contains three cinder blocks,
lot <span class="title-ref">000030</span> contains five cinder blocks,
and lot <span class="title-ref">0000400</span> contains four cinder
blocks.

To see how the `LIFO (Last In, First Out)` strategy works, first
navigate to `Inventory app --> Configuration --> Product Categories`,
and select a product category (for this example, the `All/Building
Materials` category) to edit. This reveals a product category form.

Once on the product category form, under the `Logistics` section, change
the `Force Removal Strategy` to `Last In First Out (LIFO)`.

![Last in first out (LIFO) strategy set up as forced removal
strategy.](removal/last-in-first-out.png)

To see the removal strategy in action, go to the `Sales app` and click
`Create` to create a sales order. Next, select a `Customer` from the
drop-down menu. Then click `Add a product` in the `Order Lines` tab.
Select a product (for this example, the `Cinder Block`) from the
drop-down menu, or type in the name of the product in the field. Enter a
quantity (for this example, <span class="title-ref">5.00</span>) in the
`Quantity` field, then click `Save`, then click `Confirm`.

Once the sales order is confirmed, the delivery order will be created
and linked to the picking, and the newest lot numbers will be reserved
thanks to the `LIFO (Last In, First Out)` strategy. All four cinder
blocks from lot <span class="title-ref">0000400</span> and one cinder
block from lot <span class="title-ref">000030</span> will be selected to
be sent to the customer.

![Two lots being reserved for sale with the LIFO
strategy.](removal/reserved-lots-lifo-strategy.png)

### FEFO (First Expired, First Out)

The `FEFO (First Expired, First Out)` removal strategy differs from the
`FIFO (First In,
First Out)` and `LIFO (Last In, First Out)` strategies, because it
targets products for removal based on **expiration dates** instead of
their warehouse receipt dates. With this method, the products that are
going to expire first are moved out first. This method is used for
perishable products, such as medicine, food, and beauty products.

Lots are picked based on their **removal date** from earliest to latest.
Removal dates indicate how many days *before* the expiration date the
product needs to be removed from stock. The removal date is set on the
product form. Lots without a removal date defined are picked after lots
with removal dates.

<div class="warning">

<div class="title">

Warning

</div>

If products are not removed from stock when they should be, lots that
are past the expiration date may still be picked for delivery orders\!

</div>

<div class="note">

<div class="title">

Note

</div>

For more information about expiration dates, reference the `Expiration
dates
</applications/inventory_and_mrp/inventory/management/lots_serial_numbers/expiration_dates>`
document.

</div>

First, go to `Inventory app --> Configuration --> Settings` and ensure
`Expiration Dates` is enabled. Once the `Expiration Dates` setting is
enabled, it's possible to define different expiration dates for
individual serialized products, as well as for lot numbers containing
many products.

In this example, there are three lots of hand cream. The creams are from
the *All/Health & Beauty* category, where *FEFO* is set as the removal
strategy. In the `Inventory Valuation
Report`, the three different receipts are listed with the amounts.

Lot <span class="title-ref">0000001</span> contains twenty tubes of hand
cream, expiring on Sept 30, lot <span class="title-ref">0000002</span>
contains ten tubes of hand cream, expiring on November 30, and lot
<span class="title-ref">0000003</span> contains ten tubes of hand cream,
expiring on October 31.

![View the hand cream lot numbers and expiration dates in the inventory
report.](removal/hand-cream-lots.png)

Expiration dates can be entered when validating the received products,
or set on products by going to `Inventory app --> Products -->
Lots/Serial Numbers`. Click `Create`, enter the serial number, and
select the product from the drop-down menu. Next, select the expiration
date in the `Dates` tab. Finally, click `Save`.

![View of the removal date for 0000001.](removal/removal-date.png)

To see how the `FEFO (First Expired, First Out)` strategy works, first
navigate to `Inventory app --> Configuration --> Product Categories`,
and select a product category (in this example, the `All/Health &
Beauty` category) to edit. This reveals a product category form.

Once on the product category form, under the `Logistics` section, change
the `Force Removal Strategy` to `FEFO (First Expired, First Out)`.

![FEFO forced removal strategy set on the product
category.](removal/fefo.png)

Next, go to the `Sales app` and click `Create` to create a sales order.
Next, select a `Customer` from the drop-down menu. Then click `Add a
product` in the `Order Lines` tab. Select a product (for this example,
the `Hand Cream`) from the drop-down menu, or type in the name of the
product in the field. Enter a quantity (in this example,
<span class="title-ref">25.00</span>) in the `Quantity` field, then
click `Save`, then click `Confirm`.

Once the sales order is confirmed, the delivery order will be created
and linked to the picking, and the lot numbers expiring first will be
reserved thanks to the `FEFO (First Expired, First
Out)` strategy. All twenty tubes of hand cream from lot
<span class="title-ref">0000001</span> and five from lot
<span class="title-ref">0000003</span> will be selected to be sent to
the customer, detailed in the `Detailed Operations` tab in the `Sales
Order`.

![Hand cream lot numbers selected for the sales
order.](removal/pick-hand-cream.png)


---
## File: ./content/applications/inventory_and_mrp/inventory/routes/strategies.md

  - nosearch

# Putaway & Removal Strategies

<div class="toctree" data-titlesonly="" data-glob="">

strategies/putaway strategies/removal

</div>


---
## File: ./content/applications/inventory_and_mrp/inventory/routes/concepts/cross_dock.md

# Organize a cross-dock in a warehouse

Cross-docking is the process of sending products that are received
directly to the customers, without making them enter the stock. The
trucks are simply unloaded in a *Cross-Dock* area in order to reorganize
products and load another truck.

![image](cross_dock/cross1.png)

<div class="note">

<div class="title">

Note

</div>

For more information on how to organize your warehouse, read our blog:
[What is cross-docking and is it for
me?](https://www.odoo.com/blog/business-hacks-1/post/what-is-cross-docking-and-is-it-for-me-270)

</div>

## Configuration

In the *Inventory* app, open `Configuration --> Settings` and activate
the *Multi-Step Routes*.

![image](cross_dock/cross2.png)

<div class="note">

<div class="title">

Note

</div>

Doing so will also enable the *Storage Locations* feature.

</div>

Now, both *Incoming* and *Outgoing* shipments should be configured to
work with 2 steps. To adapt the configuration, go to `Inventory -->
Configuration --> Warehouses` and edit your warehouse.

![image](cross_dock/cross3.png)

This modification will lead to the creation of a *Cross-Docking* route
that can be found in `Inventory --> Configuration --> Routes`.

![image](cross_dock/cross4.png)

## Configure products with Cross-Dock Route

Create the product that uses the *Cross-Dock Route* and then, in the
inventory tab, select the routes *Buy* and *Cross-Dock*. Now, in the
purchase tab, specify the vendor to who you buy the product and set a
price for it.

![image](cross_dock/cross5.png)

![image](cross_dock/cross6.png)

Once done, create a sale order for the product and confirm it. Odoo will
automatically create two transfers which will be linked to the sale
order. The first one is the transfer from the *Input Location* to the
*Output Location*, corresponding to the move of the product in the
*Cross-Dock* area. The second one is the delivery order from the *Output
Location* to your *Customer Location. Both are in state*Waiting Another
Operation\* because we still need to order the product to our supplier.

![image](cross_dock/cross7.png)

![image](cross_dock/cross8.png)

Now, go to the *Purchase* app. There, you will find the purchase order
that has been automatically triggered by the system. Validate it and
receive the products in the *Input Location*.

![image](cross_dock/cross9.png)

![image](cross_dock/cross10.png)

When the products have been received from the supplier, you can go back
to your initial sale order and validate the internal transfer from
*Input* to *Output*.

![image](cross_dock/cross11.png)

![image](cross_dock/cross12.png)

The delivery order is now ready to be processed and can be validated
too.

![image](cross_dock/cross13.png)

![image](cross_dock/cross14.png)


---
## File: ./content/applications/inventory_and_mrp/inventory/routes/concepts/use-routes.md

# Using Routes and Pull/Push Rules

In inventory management, the supply chain strategy determines when
products should be fabricated, delivered to distribution centers, and
made available in the retail channel.

This kind of strategic process can be configured using *Routes*,
featuring *Pull and Push Rules*. Once everything is properly configured,
the inventory app can automatically generate transfers following the
instructions given by the rules. Yes, Odoo simplifies your life.

## Inside the warehouse

Let’s imagine a generic warehouse plan, where you can find receiving
docks, a quality control area, storage locations, picking and packing
areas, and shipping docks. All products go through all these locations,
which also trigger all the route's rules.

![view of a generic warehouse with stock and quality control
area](use-routes/stock-example.png)

In this example, vendor trucks unload pallets of ordered goods at
receiving docks. Operators then scan the products in the receiving area.
Some of these products are sent to a quality control area (those devoted
to being used during the manufacturing process, for example), while
others are directly stored in their respective locations.

![view of a generic push to rule when receiving
products](use-routes/push-to-rule-example.png)

Here is an example of a fulfillment route. In the morning, items are
picked for all the orders that need to be prepared during the day. These
items are picked from storage locations and moved to the picking area,
close to where the orders are packed. Then, the orders are packed in
their respective boxes and conveyors bring them close to the shipping
docks, ready to be delivered to customers.

![view of a generic pull from rule when preparing
deliveries](use-routes/pull-from-rule-example.png)

## How does it work?

### Pull Rules

With *Pull Rules*, a demand for some products triggers procurements,
while *Push Rules* are triggered by products arriving in a specific
location.

We can say that *Pull Rules* are used to fulfill a customer order, a
sale order. So, Odoo generates a need at the *Customer Location* for
each product in the order. Because *Pull Rules* are triggered by a need,
Odoo looks for a *Pull Rule* defined on the *Customer Location*. In our
case, a delivery order pull rule that transfers products from the
*Shipping Area* to the *Customer Location* is found, and a transfer
between the two locations is created.

Then, Odoo finds another pull rule that tries to fulfill the need for
the *Shipping Area*: the *Packing Rule* that transfers products from the
*Packing Area* to the *Shipping Area*. And, finally, other rules are
triggered until a transfer between the *Stock* and the *Picking Area* is
created.

<div class="note">

<div class="title">

Note

</div>

All these transfers are pre-generated by Odoo, starting from the end and
going backwards. While working, the operator process these transfers in
the opposite order: first the picking, then the packing, then the
delivery order.

</div>

### Push Rules

On the other hand, *Push Rules* are much easier to understand. Instead
of pre-generating documents based on needs, they are live-triggered when
products arrive in a specific location. *Push Rules* basically say:
"when a product arrives at a specific location, move it to another
location."

A simple example would be: when a product arrives in the *Receipt Area*,
move them to the *Storage Location*. As different rules can be applied
to different products, you can assign different storage locations for
different products.

Another rule could be: when products arrive at a location, move them to
the *Quality Control Area*. Then, once the quality check is done, move
them to their *Storage Location*.

<div class="note">

<div class="title">

Note

</div>

*Push Rules* can be triggered only if no *Pull Rule* pre-generated the
upstream transfers.

</div>

<div class="important">

<div class="title">

Important

</div>

Sets of rules like those are called routes. The grouping on the rule
defines how products are grouped in the same transfer or not. For
example, during the picking operation, all orders are grouped in one
transfer, whereas the packing operation respects the grouping per
customer order.

</div>

## Use Routes and Rules

Since *Routes* are a collection of *Push and Pull Rules*, Odoo helps you
manage advanced routes configuration such as:

  - Manage product manufacturing chains;
  - Manage default locations per product;
  - Define routes within your warehouse according to business needs,
    such as quality control, after-sales services, or supplier returns;
  - Help rental management by generating automated return moves for
    rented products.

To configure a route such as one of those above, open the **Inventory
Application** and go to `Configuration --> Settings`. Then, enable the
*Multi-Step Routes* feature.

![activation of the multi-steps feature in Odoo
Inventory](use-routes/multi-steps-routes-feature.png)

<div class="note">

<div class="title">

Note

</div>

The *Storage Locations* feature is automatically activated with the
*Multi-Step Routes*.

</div>

Once this first step is completed, you have the choice between
pre-configured routes or custom ones. Both are explained below.

### Pre-configured Routes

Odoo’s pre-configured routes are available in the warehouses’ menu. To
find it, go to `Inventory --> Configuration -->
Warehouses`. There, open your warehouse and edit it to see the
pre-configured routes for incoming and outgoing shipments.

![preconfigured warehouse in Odoo
Inventory](use-routes/example-preconfigured-warehouse.png)

Some more advanced routes, such as pick-pack-ship, are already
configured to make your life easier. Those are based on your choice for
shipments. Once you made your choice, head to `Inventory -->
Configuration --> Routes` to see the routes Odoo generated for you.

![view of all the preconfigured routes Odoo
offers](use-routes/preconfigured-routes.png)

Opening one of those routes allows you to see on what you can apply the
route. Here, all the selected product categories in the *YourCompany*
warehouse are set up to follow the 3-steps route.

![view of a route example applicable on category and
warehouse](use-routes/routes-example.png)

Easier for many businesses, this process might not fit yours. Thus, you
can configure custom routes in which you can define your own rules, but
also the source and destination location of each action. As an example,
here are the rules for the pre-configured route.

![rules example with push & pull actions in Odoo
Inventory](use-routes/rules-example.png)

### Custom Routes

To create a custom route, go to `Inventory -->
Configuration --> Routes`, click on create, and choose the places where
this route can be selected. Of course, combinations are available.

![view of a pick - pack - ship route as an
example](use-routes/advanced-custom-route.png)

Each place has a different behavior, so it is important to tick only the
useful ones and adapt each route accordingly.

When applying the route on a product category (`Inventory -->
Configuration --> Product Categories`), all the rules configured in the
route are applied to **every** product of the category. For example,
this can be useful if you use the dropshipping process for all the
products from the same category.

![view of a route applied to the "all" product
category](use-routes/routes-logistic-tab.png)

The same behavior applies to the warehouses. If you tick *Warehouses*,
all the transfers occurring inside the chosen warehouse, and meeting the
conditions of the linked rules, then follow that route.

![view of the route menu when selecting applicable on
warehouse](use-routes/applicable-on-warehouse.png)

For the *Sales Order Lines*, it is more or less the opposite. You have
to choose the route yourself when creating a quotation. This is pretty
useful if some products go through different routes.

![view of the route menu when selecting applicable on sales order
lines](use-routes/applicable-on-sales-order-lines.png)

If you work with this kind of route, it is important to keep in mind
that it must be selected on the sales order, such as below.

![view of the menu allowing to add new lines to sales
orders](use-routes/add-routes-to-sales-lines.png)

Then, the route can be chosen on each line of the document.

![view of the routes added to the sales
orders](use-routes/sales-order-lines-routes-application.png)

Finally, there are routes that can be applied to products. Those work
more or less like the product categories: once selected, you have to
manually set on which product it must be applied.

![view of the menu when selecting applicable on
products](use-routes/applicable-on-products.png)

To do so, go to `Inventory --> Master Data -->
Products` and open the one on which you want to apply the route. Then go
to the *Inventory tab* and select the route you’ve created.

![view of a product form, where the route must be
selected](use-routes/on-product-route.png)

If, prima facie, the routes’ configuration can appear quite easy, don’t
forget that we haven’t set up any rule yet. If not harder to set up,
those are vital to have working routings.

#### Rules

The rules are to be defined on the routes. To do so, go to `Inventory
--> Configuration --> Routes`, then to the *Rules* section, and click on
*Add a line* button.

![view of the rules menu, where it is possible to add new
rules](use-routes/add-new-rules.png)

The available rules trigger various actions. If Odoo offers *Push* and
*Pull* rules, others are also available. Here are some explanations for
all of them:

  - **Pull From**: this rule is triggered by a need for the product in a
    specific location. The need can come from a sale order which has
    been validated or from a manufacturing order which requires a
    specific component. When the need appears in the destination
    location, Odoo generates a picking to fulfill this need.
  - **Push To**: this rule is triggered by the arrival of some products
    in the defined source location. In the case you move products to the
    source location, Odoo generates a picking to move those products to
    the destination location.
  - **Pull & Push**: this rule allows generating pickings in the two
    situations explained above. This means that when products are
    required at a specific location, a transfer is created from the
    previous location to fulfill that need. This creates a need in the
    previous location and a rule is triggered to fulfill it. Once the
    second need is fulfilled, the products are pushed to the destination
    location and all the needs are fulfilled.
  - **Buy**: when products are needed at the destination location, a
    request for quotation is created to fulfill the need.
  - **Manufacture**: when products are needed in the source location, a
    manufacturing order is created to fulfill the need.

![overview of a transfer requested between the stock and the packing
zone](use-routes/pull-from-rule-stock-to-packing.png)

You must also define the *Operation Type*. This operation allows
defining which kind of picking is created from the rule. With our above
screenshot, the created picking is, for example, an internal transfer.

On the other hand, the *Supply Method*, allows defining what happens at
the source location:

  - **Take From Stock**: the products are taken from the available stock
    of the source location;
  - **Trigger Another Rule**: the system tries to find a stock rule to
    bring the products to the source location. The available stock is
    ignored.
  - **Take From Stock, if Unavailable, Trigger Another Rule**: the
    products are taken from the available stock of the source location.
    If there is no stock available, the system tries to find a rule to
    bring the products to the source location.

In the *Scheduling* section, you can determine how Odoo behaves when one
of the chain's pickings is rescheduled. In case you decide to
**Propagate Rescheduling**, the next move is also to be rescheduled. If
you prefer having the choice to reschedule the next move, you can decide
to receive an alert in the form of a *next activity*.

## What about a full flow?

Do you remember our Pick - Pack - Ship custom route? Let’s use it to try
a full flow with an advanced custom route.

First, a quick look at our rules and their supply methods: we have three
rules, all **Pull From** rules. The supply methods are the following:

  - **Take From Stock**: When products are needed in WH/Packing Zone,
    *Picks* (internal transfers from WH/Stock to WH/Packing Zone) are
    created from WH/Stock to fulfill the need.
  - **Trigger Another Rule**: When products are needed in WH/Output,
    *Packs* (internal transfers from WH/Packing Zone to WH/Output) are
    created from WH/Packing Zone to fulfill the need.
  - **Trigger Another Rule**: When products are needed in Partner
    Locations/Customers, Delivery Orders are created from WH/Output to
    fulfill the need.

![overview of all the transfers created by the pick - pack - ship
route](use-routes/transfers-overview.png)

This means that, when a customer orders products, a delivery order is
created to fulfill the order.

![view of the operations created by a pull from
transfer](use-routes/operations-on-transfers.png)

<div class="note">

<div class="title">

Note

</div>

If the source document is the same sale order, the status is not the
same. In fact, the status is **Waiting Another Operation** if the
previous transfer in the list is not done yet.

</div>

![view of the transfers various status at the beginning of the
process](use-routes/waiting-status.png)

To prepare the order, conveyors need products packed at the output area,
so an internal transfer is requested from the packing zone.

![view of the detailed operations for a transfer between the packing and
output zones](use-routes/detailed-operations-2.png)

Obviously, the packing zone needs products ready to be packed. So, an
internal transfer is requested to the stock and employees can gather the
required products from the warehouse.

![view of the detailed operations for a transfer between the stock and
packing zones](use-routes/detailed-operations-transfer.png)

As explained in this documentation introduction, the last step in the
process (here the delivery order) is the first to be triggered, which
then triggers other rules until we reach the first step in the process
(here, the internal transfer from to stock to the packing area). Now,
everything is ready to be processed so the customer can get the ordered
items.

In our case, the product is delivered to the customer when all the rules
have been triggered and the transfers done.

![view of the transfers' status when all the process is
done](use-routes/transfers-status.png)


---
## File: ./content/applications/inventory_and_mrp/inventory/routes/concepts/stock_warehouses.md

# Sell stock from multiple warehouses using virtual locations

While keeping stock and selling inventory from one warehouse might work
for smaller companies, bigger companies might need to keep stock in, or
sell from, multiple warehouses in multiple locations.

In Odoo, sometimes products included in a single sales order might take
stock from two (or more) warehouses. In Odoo, pulling products from
multiple warehouses to satisfy sales demands can be done by using
*virtual locations*.

<div class="note">

<div class="title">

Note

</div>

In order to create virtual locations in warehouses and proceed to the
following steps, the `Storage Locations` and `Multi-Step Routes`
features will need to be enabled in the `Settings` app.

To do so, go to `Inventory --> Configuration --> Settings`, scroll down
to the `Warehouse` section, and click the checkboxes next to `Storage
Locations` and `Multi-Step Routes`. Then, `Save` the changes to finish.

</div>

## Create and configure a virtual parent location

Before creating any virtual stock locations, a new warehouse will need
to be created. This new warehouse will act as a *virtual* warehouse, and
will be the *parent* location of other physical warehouses.

<div class="spoiler">

Why a "virtual" warehouse?

Virtual warehouses are great for companies with multiple physical
warehouses. This is because a situation might arise when one warehouse
runs out of stock of a particular product, but another warehouse still
has stock on-hand. In this case, stock from these two (or more)
warehouses could be used to fulfill a single sales order.

The "virtual" warehouse acts as a single aggregator of all the inventory
stored in a company's physical warehouses, and is used (for traceability
purposes) to create a hierarchy of locations in Odoo.

</div>

### Create a new warehouse

To create a new warehouse, go to `Inventory --> Configuration -->
Warehouses`, and click `Create`. From here, the warehouse `Name` and
`Short Name` can be changed, and other warehouse details can be changed
under the `Warehouse Configuration` tab.

Under the `Shipments` heading, set the number of steps used to process
`Incoming
Shipments` and `Outgoing Shipments` by selecting between the `1 step`,
`2 steps`, and `3 steps` radio buttons. The desired option for `Incoming
Shipments` and `Outgoing Shipments` will depend on the warehouse's
procurement process, and might differ for individual products or product
categories.

<div class="seealso">

\- `How to choose the right flow to handle receipts and deliveries?
</applications/inventory_and_mrp/inventory/management/shipments_deliveries>`

</div>

Under the `Resupply` heading, configure the method(s) for how the
warehouse resupplies its inventory:

  - `Resupply Subcontractors`: resupply subcontractors with components
    from this warehouse.
  - `Manufacture to Resupply`: when products are manufactured, they can
    be manufactured in this warehouse.
  - `Manufacture`: to produce right away, move the components to the
    production location directly and start the manufacturing process; to
    pick first and then produce, unload the components from the stock to
    input location first, and then transfer it to the production
    location.
  - `Buy to Resupply`: when products are bought, they can be delivered
    to this warehouse.
  - `Resupply From`: automatically create routes to resupply this
    warehouse from another chosen warehouse

<div class="tip">

<div class="title">

Tip

</div>

*Routes* can be set and configured directly from the `Warehouse` form,
by clicking on the `Routes` smart button. Once the warehouse is
configured, virtual *Locations* can be created.

</div>

![The edit screen for creating a new
warehouse.](stock_warehouses/stock-warehouses-create-warehouse.png)

In order to apply this virtual warehouse as the *parent* location of two
*child* location warehouses, there need to be two warehouses configured
with physical stock locations.

<div class="example">

**Parent Warehouse**  
`Warehouse`: <span class="title-ref">Virtual Warehouse</span>  
`Location`: <span class="title-ref">VWH</span>

**Child Warehouses**  
`Warehouses`: <span class="title-ref">Warehouse A</span> and
<span class="title-ref">Warehouse B</span>  
`Locations`: <span class="title-ref">WHA/Stock</span> and
<span class="title-ref">WHB/Stock</span>

</div>

### Create a virtual parent location

<div class="important">

<div class="title">

Important

</div>

In order to take stock from multiple warehouses to fulfill a sales
order, there need to be at least **two** warehouses acting as *child
locations* of the *virtual parent location* warehouse.

</div>

To create and edit *Locations*, go to `Inventory --> Configuration -->
Locations`. All `Locations` are listed here, including the *Stock*
`Location` of the virtual warehouse that was created. Click into the
*Stock* `Location` for the virtual warehouse that was previously created
(`Warehouse Name/Stock`).

Then, under the `Additional Information` section, change the `Location
Type` from `Internal Location` to `View`. `Save` the changes.

This identifies this `Location` as a *virtual location*, which is used
to create a hierarchical structure for a warehouse and aggregate its
*child locations*.

<div class="note">

<div class="title">

Note

</div>

Products can *not* be stored in a `View` `Location Type`.

</div>

![Warehouse location types in location creation
screen.](stock_warehouses/stock-warehouses-location-types.png)

## Configure physical warehouse locations

Navigate back to the `Locations` overview (via the breadcrumbs), and
remove any filters in the `Search Bar`. Then, click into the first
physical warehouse `Location` that was previously created to be a *child
location*, and click `Edit`.

Under `Parent Location`, select the virtual warehouse from the drop-down
menu, and `Save` changes. Then, navigate back to the `Locations`
overview, and repeat this step for the second physical warehouse stock
location. Be sure to `Save` changes again.

Both locations are now *child locations* of the virtual warehouse
*parent location*. This allows stock to be taken from multiple locations
to fulfill a single sales order, if there is not enough stock in any one
location (provided they are both tied to the same virtual warehouse
*parent location*).

## Example flow: Sell a product from a virtual warehouse

<div class="note">

<div class="title">

Note

</div>

To sell products from multiple warehouses using a virtual *parent*
location in this flow, there must be at least **two** products and at
least **two** warehouses configured - with at least **one** product with
quantity on-hand in each warehouse, respectively.

</div>

To create a new request for quotation, or RFQ, navigate to the `Sales`
app, and click `Create` from the `Quotations` overview. Fill out the
information on the new quotation by adding a `Customer`, and click `Add
a product` to add the two products stored in the two warehouses.

Then, click the `Other Info` tab on the sales order form. Under the
`Delivery` section, change the `Warehouse` field value listed to the
virtual warehouse that was previously created. Once the warehouse has
been changed, click `Confirm` to convert the quotation into a sales
order.

Now that the quotation has been confirmed as a sales order, click the
`Delivery` smart button. From the warehouse delivery form, confirm that
the `Source Location` value matches the `Warehouse` field value from the
sales order. Both should list the virtual warehouse location.

<div class="important">

<div class="title">

Important

</div>

The `Source Location` on the warehouse delivery form and the `Warehouse`
under the `Other Info` tab on the sales order form *must* match in order
for the products included in the sales order to be pulled from different
warehouses.

  - If the virtual warehouse is not the value in the `Source Location`
    field on the warehouse delivery form, then click `Edit`, make the
    change, and click `Save`.
  - If the virtual warehouse is not the value in the `Warehouse` field
    on the sales order, then a new quotation may need to be generated.
  - If whe `Warehouse` field is missing on the sales order form, then
    the virtual warehouse (and its children warehouses) may not have
    been set up correctly, in which case, review the documentation above
    again to make sure all settings/configuration were done properly.

</div>

![Delivery order with matching source and child
locations.](stock_warehouses/stock-warehouses-delivery-order.png)

Finally, on the warehouse delivery form, under the `Detailed Operations`
tab, confirm that the *Locations* values under the `From` column for
each product matches to the *child locations* that are tied to the
virtual *parent location*.

<div class="note">

<div class="title">

Note

</div>

To view which *Locations* the products are coming from on the drop-down
menus, click the `internal link (arrow)` icon to expand the *Location*
information. If needed, it can be changed from here (granted there is
quantity on hand for the product in that location).

</div>

Once everything has been properly set, click `Validate` and then `Apply`
to validate the delivery. Then, navigate back to the sales order form
(via the breadcrumbs), and click `Create Invoice` to invoice for the
sales order.

<div class="tip">

<div class="title">

Tip

</div>

To use a virtual *parent* location as the default warehouse for sales
orders, each salesperson can have the virtual warehouse assigned to them
from the drop-down menu next to `Default Warehouse` on their employee
form.

</div>

![Default warehouse location on employee
form.](stock_warehouses/stock-warehouses-employee-form.png)


---
## File: ./content/applications/inventory_and_mrp/purchase/advanced/analyze.md

# Analyze the performance of your purchases

If your company regularly purchases products, you have several reasons
to track and analyze your performance. The insights gathered can help
you to better forecast and plan your future orders. For example, you can
assess if your business is dependent on particular vendors, and the data
can help you negotiate discounts on prices.

## Generate customized reports

Go to *Reporting* to access the purchase analysis. Simply by accessing
the reporting dashboard, you can get a quick overview of your actual
performance. By default, the reporting dashboard displays a line chart
presenting the untaxed amount of your purchase orders per day, and below
it, key metrics and a pivot table.

![Reporting dashboard in Odoo
Purchase](analyze/analyze-reporting-dashboard.png)

While the data initially presented is useful, there are several tools
and features you can use to get even more insights on your purchases.

### Use filters to select the data you need

Odoo offers several default filters you can use and combine by clicking
on *Filters*. When you select one or several filters, Odoo looks for all
the orders that match at least one of the filters you have chosen and
populates the chart, key metrics, and pivot table with the data. The
pre-configured filters are:

1.  All *Requests for Quotation*
2.  All *Purchase Orders*, except canceled ones
3.  *Confirmation Date Last Year* includes all orders that were
    confirmed the previous year, canceled purchase orders included
4.  *Order Date* includes all orders - request for quotations and
    purchases orders (canceled ones included) - depending on their date
    of creation
5.  *Confirmation Date* includes all confirmed orders, canceled ones
    included, depending on their date of confirmation

<div class="note">

<div class="title">

Note

</div>

When you have to select a period, you can use multiple years, and, with
at least one year selected, multiple quarters and the three most recent
months.

</div>

<div class="tip">

<div class="title">

Tip

</div>

If you use the *Order Date* or *Confirmation Date* filters, the
*Comparison* feature appears next to *Filters*. It enables you to
compare the period you filtered with the previous one.

</div>

![Reporting filters in Odoo Purchase](analyze/analyze-filters.png)

#### Add custom filters

Thanks to the 31 filtering options to choose from, the possibilities of
your customizing your dataset are almost limitless. Go to `Filters -->
Add Custom Filter`, specify the condition the filtering option should
meet (e.g. *is equal to*, *contains*, etc.), and click on *Apply*. If
you want to select orders matching several conditions simultaneously
(*and* operator), repeat the process to add another custom filter. If
you want to use the *or* operator, don't click on *Apply*, and click on
*Add a condition* instead. Once you have added all the desired filtering
options, click on *Apply*.

![Custom reporting filter in Odoo
Purchase](analyze/analyze-custom-filter.png)

<div class="tip">

<div class="title">

Tip

</div>

To avoid having to recreate custom filters every time, save them by
clicking on `Favorites --> Save current search --> Save`. The customized
search filter can then be accessed by clicking on *Favorites* or can
even be set as the default filter when you open the reporting dashboard.

</div>

### Measure exactly what you need

Before selecting what you want to measure, you need to decide whether
you prefer using the graph view or the pivot view. By default, the
dashboard presents both views. However, the measures you select won't be
applied to both views. You can access each view separately by clicking
on the icons at the top right of the dashboard.

![Switch reporting view in Odoo
Purchase](analyze/analyze-switch-view.png)

#### Visualize your data

You can transform the main graph in just a click by selecting one of the
three charts: bar, line or pie. Fourteen different measures are
available, but you can only use one at a time. However, you can group
the measure using one or several of the 19 *Groups*.

![Reporting graph view in Odoo Purchase](analyze/analyze-graph-view.png)

For bar and line charts, the selected measure is your y-axis, and the
first group you select is used to create the x-axis. Adding more group
adds additional lines (line chart) or transforms your bar chart into a
stacked bar chart. For pie charts, the more groups you select, the more
slices are displayed.

#### Explore your data

The pivot table view enables you to explore your data in great detail.
Unlike the graph view, the pivot table enables you to add several
measures at the same time. By clicking on *Measures* or on the **+**
sign in the *Total* column, you can add as many as you want, each
assigned to a new column. By clicking on the **+** sign in the *Total*
row, you can add *Groups*. If you click on a group's **+** sign, you can
add a sub-group, and so on.

![Pivot table view in Odoo Purchase](analyze/analyze-pivot-view.png)

<div class="tip">

<div class="title">

Tip

</div>

You can insert your pivot table's data directly in the Spreadsheet app
or export it as an Excel file.

</div>


---
## File: ./content/applications/inventory_and_mrp/purchase/products/reordering.md

# Configure reordering rules

For certain products, it is necessary to ensure that there is always a
minimum amount available on hand at any given time. By adding a
reordering rule to a product, it is possible to automate the reordering
process so that a purchase order is automatically created whenever the
amount on hand falls below a set threshold.

<div class="important">

<div class="title">

Important

</div>

The *Inventory* module must be installed to use reordering rules.

</div>

## Configure products for reordering

Products must be configured in a specific way before a reordering rule
can be added to them.

Starting from the `Inventory`, `Manufacturing`, `Purchase`, or `Sales`
module, navigate to `Products
--> Products` and then click `Create` to make a new product.
Alternatively, find a product that already exists in the database and
click into it's product form.

Next, on the product form, enable reordering by checking the `Can be
Purchased` option underneathe the `Product Name` field. Finally, set the
`Product Type` to <span class="title-ref">Storable Product</span> under
the `General Information` tab.

![Configure a product for reordering in
Odoo.](reordering/product-configured-for-reordering.png)

## Add a reordering rule to a product

After properly configuring a product, a reordering rule can be added to
it by selecting the now visible `Reordering Rules` tab at the top of
that product's form, and then clicking `Create` on the `Reordering
Rules` dashboard.

![Access reordering rules for a product from the product page in
Odoo.](reordering/reordering-rules-tab.png)

Once created, the reordering rule can be configured to generate purchase
orders automatically by defining the following fields:

  - `Location` specifies where the ordered quantities should be stored
    once they are received and entered into stock.

  - `Min Quantity` sets the lower threshold for the reordering rule
    while `Max
    Quantity` sets the upper threshold. If the stock on hand falls below
    the minimum quantity, a new purchase order will be created to
    replenish it up to the maximum quantity.
    
    > 
    > 
    > <div class="example">
    > 
    > If `Min Quantity` is set to <span class="title-ref">5</span> and
    > `Max Quantity` is set to <span class="title-ref">25</span> and the
    > stock on hand falls to four, a purchase order will be created for
    > 21 units of the product.
    > 
    > </div>

  - `Multiple Quantity` can be configured so that products are only
    ordered in batches of a certain quantity. Depending on the number
    entered, this can result in the creation of a purchase order that
    would put the resulting stock on hand above what is specified in the
    `Max
    Quantity` field.
    
    > 
    > 
    > <div class="example">
    > 
    > If `Max Quantity` is set to <span class="title-ref">100</span> but
    > `Multiple Quantity` is set to order the product in batches of
    > <span class="title-ref">200</span>, a purchase order will be
    > created for 200 units of the product.
    > 
    > </div>

  - `UoM` specifies the unit of measurement by which the quantity will
    be ordered. For discrete products, this should be set to
    <span class="title-ref">Units</span>. However, it can also be set to
    units of measurement like <span class="title-ref">Volume</span> or
    <span class="title-ref">Weight</span> for non-discrete products like
    water or bricks.

![Configure the reordering rule in
Odoo.](reordering/reordering-rule-configuration.png)

## Manually trigger reordering rules using the scheduler

Reordering rules will be automatically triggered by the scheduler, which
runs once a day by default. To trigger reordering rules manually,
navigate to `Inventory --> Operations
--> Run Scheduler`. On the pop-up window, confirm the manual action by
clicking `Run
Scheduler`.

<div class="note">

<div class="title">

Note

</div>

Manually triggering reordering rules will also trigger any other
scheduled actions.

</div>

## Manage reordering rules

To manage the reordering rules for a single product, navigate to that
product page's form and select the `Reordering Rules` tab at the top of
the form.

To manage all reordering rules for every product, go to `Inventory -->
Configuration
--> Reordering Rules`. From this dashboard, typical bulk actions in Odoo
can be performed such as exporting data or archiving rules that are no
longer needed. As well, the `Filters`, `Group By` or triple-dotted menu
on the form are available to search for and/or organize the reordering
rules as desired.


---
## File: ./content/applications/inventory_and_mrp/purchase/products/uom.md

# Purchase in different units of measure than sales

When you purchase a product, it may happen that your vendor uses a
different unit of measure than you do when you sell it. This can cause
confusion between sales and purchase representatives. It is also
time-consuming to convert measures manually every time. With Odoo, you
can configure your product once and let Odoo handle the conversion.

Consider the following examples:

1.  You purchase orange juice from an American vendor, and they use
    **gallons**. However, your customers are European and use
    **liters**.
2.  You buy curtains from a vendor in the form of **rolls** and you sell
    pieces of the rolls to your customers using **square meters**.

## Enable units of measure

Open your Sales app and go to `Configuration --> Settings`. Under
Product Catalog, enable *Units of Measure*.

![Enable the units of measure option in Odoo
Sales](uom/uom-enable-option.png)

## Specify sales and purchase units of measure

### Standard units of measure

A variety of units of measure are available by default in your database.
Each belongs to one of the five pre-configured units of measure
categories: *Length / Distance*, *Unit*, *Volume*, *Weight* and *Working
Time*.

<div class="tip">

<div class="title">

Tip

</div>

You can create your new units of measure and units of measure categories
(see next section).

</div>

To specify different units of measures for sales and purchases, open the
Purchase app and go to `Products --> Products`. Create a product or
select an existing one. Under the product's *General Information* tab,
first select the *Unit of Measure* to be used for sales (as well as for
other apps such as inventory). Then, select the *Purchase Unit of
Measure* to be used for purchases.

Back to the first example, if you purchase orange juice from your vendor
in **gallons** and sell it to your customers in **liters**, first select
*L* (liters) as the *Unit of Measure*, and *gal (US)* (gallons) as the
*Purchase Unit of Measure*, then click on *Save*.

![Configure a product's units of measure in
Odoo](uom/uom-product-configuration.png)

### Create new units of measure and units of measure categories

Sometimes you need to create your own units and categories, either
because the measure is not pre-configured in Odoo or because the units
do not relate with each other (e.g. kilos and centimeters).

If you take the second example where you buy curtains from a vendor in
the form of **rolls** and you sell pieces of the rolls using **square
meters**, you need to create a new *Units of Measure Category* in order
to relate both units of measure.

To do so, go to `Configuration --> Units of Measure Categories`. Click
on *Create* and name the category.

![Create a new units of measure category in Odoo
Purchase](uom/uom-new-category.png)

The next step is to create the two units of measures. To do so, go to
`Configuration
--> Units of Measure`.

First, create the unit of measure used as the reference point for
converting to other units of measure inside the category by clicking on
*Create*. Name the unit and select the units of measure category you
just created. For the *Type*, select *Reference Unit of Measure for this
category type*. Enter the *Rounding Precision* you would like to use.
The quantity computed by Odoo is always a multiple of this value.

In the example, as you cannot purchase less than 1 roll and won't use
fractions of a roll as a unit of measure, you can enter 1.

![Create a new reference unit of measure in Odoo
Purchase](uom/uom-new-reference-unit.png)

<div class="note">

<div class="title">

Note

</div>

If you use a *Rounding Precision* inferior to 0.01, a warning message
might appear stating that it is higher than the *Decimal Accuracy* and
that it might cause inconsistencies. If you wish to use a *Rounding
Precision* lower than 0.01, first activate the `developer mode
<developer-mode>`, then go to `Settings --> Technical --> Database
Structure -->
Decimal Accuracy`, select *Product Unit of Measure* and edit *Digits*
accordingly. For example, if you want to use a rounding precision of
0.00001, set *Digits* to 5.

</div>

Next, create a second unit of measure, name it, and select the same
units of measure category as your reference unit. As *Type*, select
*Smaller* or *Bigger than the reference Unit of Measure*, depending on
your situation.

As the curtain roll equals to 100 square meters, you should select
*Smaller*.

Next, you need to enter the *Ratio* between your reference unit and the
second one. If the second unit is smaller, the *Ratio* should be greater
than 1. If the second unit is larger, the ratio should be smaller than
1.

For your curtain roll, the ratio should be set to 100.

![Create a second unit of measure in Odoo
Purchase](uom/uom-second-unit.png)

You can now configure your product just as you would using Odoo's
standard units of measure.

![Set a product's units of measure using your own units in Odoo
Purchase](uom/uom-product-configuration-new-units.png)


---
## File: ./content/applications/inventory_and_mrp/purchase/manage_deals.md

  - nosearch

# Manage deals

<div class="toctree" data-titlesonly="">

manage\_deals/agreements manage\_deals/control\_bills
manage\_deals/manage

</div>


---
## File: ./content/applications/inventory_and_mrp/purchase/manage_deals/agreements.md

# Purchase agreements: blanket orders and calls for tenders

There are two main types of purchase agreements preconfigured in Odoo:
blanket orders and call for tenders.

1.  Blanket orders are long-term agreements between a company and a
    vendor to deliver products on a recurring basis with predetermined
    pricing. Your company should consider using them when you frequently
    purchase the same products from the same vendor in varying
    quantities and/or at different times. Among their many benefits, you
    can save time as the ordering process is simplified, and money
    thanks to more advantageous bulk pricing.
2.  Calls for tenders use a special procedure to request offers from
    multiple vendors at the same time. While public sector organizations
    are often legally bound to release calls for tenders when they want
    to purchase goods or services, private organizations can also use
    them to get the best deal among several vendors.

## Enable purchase agreements

From the Purchase app, go to `Configuration --> Settings` and activate
*Purchase Agreements*.

![Enable purchase agreements in Odoo
Purchase](agreements/agreements-enable-purchase-agreements.png)

## Configure or create new types of purchase agreements

Before you start using purchase agreements, make sure they are
configured the way you want by going to `Configuration --> Purchase
Agreement Types`. From there, you can edit the way blanket orders and
calls for tenders or *Create* a new type of purchase agreement. You can
configure the:

1.  Agreement Type: the name you want to give to the agreement.
2.  Agreement Selection Type: you can either select multiple offers
    using *Select multiple RFQ (non-exclusive)*, which is the default
    setting for both blanket orders and calls for tenders, or a single
    offer using *Select only one RFQ (exclusive)*, which is sometimes
    needed for calls for tenders where you only want to select a single
    vendor.
3.  Lines: generally, you would always want to select *Use lines of
    agreement*, which are the different product lines you can configure
    when you set up your purchase agreement. However, you can select *Do
    not create RfQ lines automatically* if you don't want your requests
    for quotations to be pre-filled in with that information.
4.  Quantities: if you use lines of agreements, you can also specify
    independently if the products' quantities should be used to pre-fill
    new requests for quotations. The default option for blanket orders
    is *Set quantities manually*, while for calls for tenders are set to
    *Use quantities of agreement*.

![Configure purchase agreements types in Odoo
Purchase](agreements/agreements-configure-types.png)

## Set up a blanket order

Go to `Orders --> Purchase Agreements` and click on *Create*. Select
*Blanket Order* as your *Agreement Type*. Next, select the vendor. The
other fields aren't mandatory.

Next, add the products you want to order and their price. Note that you
can also add a *Quantity* for each product, for example, if you have
agreed with your vendor to order a specific minimum quantity each time
or in total. If you have configured your blanket order to *Set
quantities manually*, this is only used for informational purposes.

![Set up a blanket order in Odoo
Purchase](agreements/agreements-set-blanket-order.png)

You can also write any *Terms and Conditions* at the bottom of the
agreement. Once you are satisfied with your blanket order, click on
*Confirm*. Its status then changes from *Draft* to *Ongoing* and it's
ready to be used.

### Create requests for quotation from the blanket order

You can now create new quotations from the blanket order whenever you
need it by clicking on *New Quotation*. Odoo automatically fills in
requests for quotation with the information initially defined when you
set up the blanket order. Depending on the way you configured the
*Purchase Agreement Type*, product lines can also be pre-filled.

From here, you can quickly view all the requests for quotations made
under that blanket order by clicking on *RFQs/Orders*.

![Create new quotations for an ongoing blanket order in Odoo
Purchase](agreements/agreements-ongoing-blanket-order.png)

<div class="tip">

<div class="title">

Tip

</div>

You can also create a *Request for Quotation* the usual way and then
link it to an existing *Blanket Order*.

</div>

#### Blanket orders and replenishment

Blanket orders can be used for `automated replenishment
<../../purchase/products/reordering>`, as once a blanket order is
confirmed, a new vendor line is added to your product. Make sure the
related vendor is in the first position if you have several vendors
linked to your product.

![Blanket order added to product configuration in Odoo
Purchase](agreements/agreements-blanket-order-replenishment.png)

## Set up a call for tenders

Go to `Orders --> Purchase Agreements` and click on *Create*. Select
*Call for Tenders* as your *Agreement Type*. The other fields aren't
mandatory, but you can add the date you want to be delivered and set an
agreement deadline. You usually don't want to select a vendor for calls
for tenders as you are looking to get quotations from multiple vendors.

Next, add the products you want to order and in what quantity. For calls
for tenders, you typically don't add a price, as the vendors should give
you their best quote.

You can also write any *Terms and Conditions* at the bottom of the
agreement. Once you are ready, click on *Confirm*.

![Set up a call for tenders in Odoo
Purchase](agreements/agreements-set-call-for-tenders.png)

### Requests quotations from the call for tenders

You can now request new quotations from the call for tenders. Click on
*New Quotation* and select one of your vendors you want to invite to the
call for tenders. Product lines should also be pre-filled in, depending
on how you configured the *Purchase Agreement Type*. Click on *Send by
email* to send it to the vendor. Go back to the call for tenders and
repeat this process for each vendor.

![Request a quotation from a call for tenders in Odoo
Purchase](agreements/agreements-request-quotation.png)

Once you have sent a request for quotation to every vendor and receiving
their quotes, click on *Validate* to proceed to the bid selection. Next,
click on the RFQs/Orders smart button to view all your vendors'
quotations.

![Validate a call for tenders and view all quotations in Odoo
Purchase](agreements/agreements-validate-call-for-tenders.png)

Click on each request for quotation to add the price communicated by
your vendors manually. When that's done, select the most advantageous
offer and click on *Confirm Order*. This automatically closes the call
for tenders. You can now proceed with the purchase order as you would
for a regular one.

![Confirm an order in Odoo
Purchase](agreements/agreements-confirm-order.png)


---
## File: ./content/applications/inventory_and_mrp/purchase/manage_deals/manage.md

# Manage vendor bills

<div id="inventory/purchase/manage_deals/manage">

A *vendor bill* is an invoice received for products and/or services that
a company purchases from a vendor. Vendor bills record payables as they
arrive from vendors, and can include amounts owed for the goods and/or
services purchased, sales taxes, freight and delivery charges, and more.

</div>

In Odoo, a vendor bill can be created at different points in the
purchasing process, depending on the *bill control* policy chosen in the
*Purchase* app settings.

## Bill control policies

To view and edit the default bill control policy and make changes to it,
go to `Purchase app --> Configuration --> Settings`, and scroll down to
the `Invoicing` section.

Here, there are two `Bill Control` policy options: `Ordered quantities`
and `Received quantities`. After a policy is selected, click `Save` to
save changes.

![Bill control policies in purchase app
settings.](manage/manage-configuration-settings.png)

The policy selected will be the default for any new product created. The
definition of each policy is as follows:

  - `Ordered quantities`: creates a vendor bill as soon as a purchase
    order is confirmed. The products and quantities in the purchase
    order are used to generate a draft bill.
  - `Received quantities`: a bill is only created **after** part of the
    total order has been received. The products and quantities
    **received** are used to generate a draft bill.

<div class="tip">

<div class="title">

Tip

</div>

If a product needs a different control policy, the default bill control
policy can be overridden by going to the `Purchase` tab in a product's
template, and modifying its `Control Policy` field.

</div>

![Control policy field on product form.](manage/manage-product-form.png)

### 3-way matching

*3-way matching* ensures vendor bills are only paid once some (or all)
of the products included in the purchase order have actually been
received.

To activate it, go to `Purchase app --> Configuration --> Settings`, and
scroll down to the `Invoicing` section. Then, check the box next to
`3-way matching:
purchases, receptions, and bills`, and click `Save` to save changes.

<div class="important">

<div class="title">

Important

</div>

`3-way matching` is **only** intended to work with the `Bill Control`
policy set to `Received quantities`.

![Activated three-way matching feature in purchase
settings.](manage/manage-three-way-matching.png)

</div>

## Create and manage vendor bills on receipts

When products are received into a company's warehouse, receipts are
created. Once the company processes the received quantities, they can
choose to create a vendor bill directly from the warehouse receipt form.
Depending on the bill control policy chosen in the settings, vendor bill
creation is completed at different steps of the procurement process.

### With the bill control policy set to ordered quantities

To create and manage vendor bills on receipts using the *ordered
quantities* bill control policy, first go to `Purchase app -->
Configuration --> Settings`, scroll down to the `Invoicing` section, and
select `Ordered quantities` under `Bill
Control`. Then, click `Save` to save changes.

Next, go to the `Purchase` app, and click `Create` to create a new
request for quotation (RFQ). Doing so reveals a blank `RFQ (request for
quotation)` detail form.

On the blank detail form, add a vendor to the `RFQ (request for
quotation)` in the `Vendor` field, and add products to the `Product`
lines by clicking `Add a line`.

Then, confirm the `RFQ (request for quotation)` by clicking the `Confirm
Order` button above the detail form. Doing so turns the `RFQ (request
for quotation)` into a purchase order.

Then, click the `Create Bill` button to create a vendor bill for the
purchase order.

Clicking the `Create Bill` button reveals the `Draft Bill` page for the
purchase order.

On the `Draft Bill`, click the `Edit` button to modify the bill, and add
a bill date in the `Bill Date` field. If needed, add additional products
to the `Product` lines by clicking `Add a line` in the `Invoice Lines`
tab.

Next, confirm the bill by clicking the `Confirm` button on the `Draft
Bill` page.

<div class="tip">

<div class="title">

Tip

</div>

Since the bill control policy is set to *ordered quantities*, the draft
bill can be confirmed as soon as it is created, before any products have
been received.

</div>

On the new `Vendor Bill`, add a `Bill Reference` number, which can be
used to match the bill with additional documents (such as the `PO
(purchase order)`). Then, click `Confirm --> Register Payment`. Doing so
causes a pop-up to appear, wherein a payment `Journal` can be chosen; a
`Payment Method` selected; and a `Recipient
Bank Account` can be selected from a drop-down menu.

Additionally, the bill `Amount`, `Payment Date`, and `Memo` (`Reference
Number`) can be changed from this pop-up. Once ready, click `Create
Payment` to finish creating the `Vendor Bill`. Doing so causes a green
`In
Payment` banner to display on the `RFQ (request for quotation)` form.

![Vendor bill form for ordered quantities control
policy.](manage/manage-draft-vendor-bill.png)

<div class="note">

<div class="title">

Note

</div>

Each vendor bill provides the option to either `Add Credit Note` or `Add
Debit Note`. A *credit note* is typically issued when a vendor or
supplier of goods get some quantity of products back from the customer
to whom they were sold, while *debit notes* are reserved for goods
returned from the customer/buyer to the vendor or supplier.

</div>

### With the bill control policy set to received quantities

<div class="warning">

<div class="title">

Warning

</div>

If the creation of a vendor bill is attempted without receiving any
quantities of a product (while using the *received quantities* bill
control policy), an error message appears, and settings must be changed
before proceeding.

</div>

To create and manage vendor bills on receipts using the *received
quantities* bill control policy, first go to `Purchase app -->
Configuration --> Settings`, scroll down to the `Invoicing` section, and
select `Received quantities` under `Bill
Control`. Then, click `Save` to save changes.

Next, go to the `Purchase` app, and click `Create` to create a new `RFQ
(request for quotation)`. Doing so reveals a blank `RFQ (request for
quotation)` detail form.

On the blank detail form, add a vendor to the `RFQ (request for
quotation)` in the `Vendor` field, and add products to the `Product`
lines by clicking `Add a line`.

Then, confirm the `RFQ (request for quotation)` by clicking the `Confirm
Order` button above the detail form. Doing so turns the `RFQ (request
for quotation)` into a purchase order.

Finally, click the `Create Bill` button to create a bill for the
purchase order.

<div class="note">

<div class="title">

Note

</div>

Clicking `Create Bill` before any products have been received will cause
a `User Error` pop-up to appear. The `Purchase Order` requires the
receipt of at least partial quantity of the items included on the order
to create a vendor bill.

</div>

![User error pop-up for received quantities control
policy.](manage/manage-user-error-popup.png)

Next, click the `Receipt` smart button to view the warehouse receipt
form.

On the warehouse receipt form, click `Validate --> Apply` to mark the
`Done` quantities. Then, navigate back to the `Purchase Order` (via the
breadcrumbs), and click the `Create Bill` button on the purchase order
form.

Doing so reveals the `Draft Bill` for the purchase order. On the `Draft
Bill`, click the `Edit` button, and add a `Bill Date`. If needed, add
additional products to the `Product` lines by clicking `Add a line`.

Next, click the `Confirm` button to confirm the `Draft Bill`.

<div class="note">

<div class="title">

Note

</div>

Since the bill control policy is set to *received quantities*, the draft
bill can **only** be confirmed when at least some of the quantities are
received.

</div>

On the new `Vendor Bill`, add a `Bill Reference` number, which can be
used to match the bill with additional documents (such as the `PO
(purchase order)`). Then, click `Confirm --> Register Payment`. Doing so
causes a pop-up to appear, wherein a payment `Journal` can be chosen; a
`Payment Method` selected; and a `Recipient
Bank Account` can be selected from a drop-down menu.

Additionally, the bill `Amount`, `Payment Date`, and `Memo` (`Reference
Number`) can be changed from this pop-up. Once ready, click `Create
Payment` to finish creating the vendor bill. Doing so causes a green
**In Payment** banner to display on the `RFQ (request for quotation)`
form.

## Create and manage vendor bills in Accounting

Vendor bills can also be created directly from the *Accounting* app,
**without** having to create a purchase order first. To do this, go to
`Accounting app --> Vendors --> Bills`, and click `Create`. Doing so
reveals a blank vendor bill detail form.

On this blank vendor bill detail form, add a vendor in the `Vendor`
field, and add products to the `Product` lines (under the `Invoice
Lines` tab), by clicking `Add a line`. Then, add a bill date in the
`Bill Date` field, and any other necessary information. Finally, click
`Confirm` to confirm the bill.

From here, click the `Journal Items` tab to view (or change) the
`Account` journals that were populated based on the configuration on the
corresponding `Vendor` and `Product` forms.

Then, click `Add Credit Note` or `Add Debit Note` to add credit or debit
notes to the bill. Or, add a `Bill Reference` number (while in `Edit`
mode).

Then, when ready, click `Register Payment --> Create Payment` to
complete the `Vendor Bill`.

<div class="tip">

<div class="title">

Tip

</div>

To tie the draft bill to an existing purchase order, click the drop-down
menu next to `Auto-Complete`, and select a `PO (purchase order)` from
the menu. The bill will auto-populate with the information from the `PO
(purchase order)`.

![Auto-complete drop-down list on draft vendor
bill.](manage/manage-auto-complete.png)

</div>

## Batch billing

Vendor bills can be processed and managed in batches in the *Accounting*
app.

To do this, go to `Accounting app --> Vendors --> Bills`. Then, click
the `checkbox` at the top left of the page, beside the `Number` column,
under the `Create` button. This selects all existing vendor bills with a
`Posted` or `Draft` `Status`.

From here, click the `Action` gear icon to export, delete, or send &
print the bills; click the `Print` icon to print the invoices or bills;
or click `Register
Payment` to create and process payments for multiple vendor bills at
once.

When `Register Payment` is selected, a pop-up appears. In this pop-up
window, select the appropriate journal in the `Journal` field, choose a
payment date in the `Payment Date` field, and choose a `Payment Method`.
There is also the option to `Group Payments` on this pop-up, as well.

When ready, click the `Create Payment` button, which creates a list of
journal entries on a separate page. This list of journal entries are all
tied to their appropriate vendor bills.

![Batch billing register payment
pop-up.](manage/manage-batch-billing.png)

<div class="note">

<div class="title">

Note

</div>

The `Register Payment` option for vendor bills in batches will only work
for journal entries whose `Status` is set to `Posted`.

</div>

<div class="seealso">

`/applications/inventory_and_mrp/purchase/manage_deals/control_bills`

</div>


---
## File: ./content/applications/inventory_and_mrp/purchase/manage_deals/control_bills.md

# Control and know when vendor bills should be paid

With Odoo, you can define how your vendor bills are controlled. For each
purchase order, you can decide when the related vendor bill should be
paid: either before or after you have received your products. You can
also check at a glance what is the billing status of each purchase
order.

With the 3-way matching feature, Odoo compares the information appearing
on the *Purchase Order*, the *Vendor Bill* and the *Receipt*, and lets
you know if you should pay the bill. This way you can avoid paying
incorrect or fraudulent vendor bills.

## Vendor bills default control policy

As a first step, open your Purchase app and go to `Configuration -->
Settings` to set the default bill control policy for all the products
created onwards.

![Vendor bills default control setting for new products in Odoo
Purchase](control_bills/control-bills-quantities-default-setting.png)

By selecting *On ordered quantities*, you can create a vendor bill as
soon as you confirm an order. The quantities mentioned in the purchase
order are used to generate the draft bill.

If you choose *On received quantities* instead, you can only create one
once you have at least received some of the products you have ordered.
The quantities you have received are used to generate the draft bill. If
you try to create one without having received any product, you get an
error message.

![No invoiceable line error message in Odoo
Purchase](control_bills/control-bills-no-invoiceable-line.png)

### Change a specific product's control policy

If you want to modify a specific product's control policy, go to
`Products -->
Products`, open it, click on *Edit* and go to the *Purchase tab*. There
you can change a product's default bill control policy.

![Vendor bills default control setting for new products in Odoo
Purchase](control_bills/control-bills-quantities-on-product.png)

## View a purchase order's billing status

Once you confirm an order, you can view its *Billing Status* by going to
the *Other Information* tab.

![Purchase order billing status in Odoo
Purchase](control_bills/control-bills-billing-status.png)

Below you can find a list of the different *Billing Status*, and when
they are displayed, depending on the products' bill control policy.

<table>
<colgroup>
<col style="width: 21%" />
<col style="width: 78%" />
</colgroup>
<tbody>
<tr class="odd">
<td><dl>
<dt><strong>Billing status</strong></dt>
<dd><ul>
<li></li>
</ul>
</dd>
</dl></td>
<td><blockquote>
<p><strong>Conditions</strong></p>
</blockquote>
<dl>
<dt>------------------------------------------------+-------------------------+</dt>
<dd><p><em>On received quantities</em> | <em>On ordered quantities</em></p>
</dd>
</dl></td>
</tr>
<tr class="even">
<td><em>Nothing to Bill</em></td>
<td><blockquote>
<p>PO confirmed; no products received | <em>(Not applicable)</em></p>
</blockquote></td>
</tr>
<tr class="odd">
<td><em>Waiting Bills</em></td>
<td><blockquote>
<p>All/some products received; bill not created | PO confirmed</p>
</blockquote></td>
</tr>
<tr class="even">
<td><em>Fully Billed</em></td>
<td>All/some products received; draft bill created | Draft bill created</td>
</tr>
</tbody>
</table>

## Determine when to pay with 3-way matching

First, go to `Configuration --> Settings` and activate *3-way matching*.

![3-way-matching setting in Odoo
Purchase](control_bills/control-bills-3-way-matching-setting.png)

<div class="note">

<div class="title">

Note

</div>

3-way matching is intended to work with the bill control policy set to
*On received quantities*.

</div>

### Should I pay the vendor bill?

With the feature activated, your vendor bills now display the *Should Be
Paid* field under the *Other info* tab.

![Should Be Paid field under a vendor bill in Odoo
Purchase](control_bills/control-bills-should-be-paid.png)

As you can't create a bill until you have received your products - and
if you haven't received all of them, Odoo only includes the products you
have received in the draft bill - the *Should Be Paid* status is set to
*Yes* when you create one.

If you edit a draft bill to increase the billed quantity, change the
price, or add other products, the *Should Be Paid* status is set to
*Exception*. It means Odoo notices the discrepancy, but that you might
have a valid reason to have done so.

Once the payment has been registered and mentions *Paid*, the *Should Be
Paid* status is set to *No*.

![Paid bill in Odoo
Purchase](control_bills/control-bills-paid-status.png)

<div class="tip">

<div class="title">

Tip

</div>

The *Should Be Paid* status is set automatically by Odoo. However, you
can change the status manually when you are viewing a bill in edit mode.

</div>


---
## File: ./content/applications/inventory_and_mrp/purchase/advanced.md

  - nosearch

# Advanced

<div class="toctree" data-titlesonly="">

advanced/analyze

</div>


---
## File: ./content/applications/inventory_and_mrp/purchase/products.md

  - nosearch

# Products

<div class="toctree" data-titlesonly="">

products/reordering products/uom

</div>


---
## File: ./content/applications/inventory_and_mrp/purchase.md

  - nosearch

  - show-content

  - hide-page-toc

  - show-toc

# Purchase

**Odoo Purchase** helps you keep track of purchase agreements,
quotations, and purchase orders. Learn how to keep track of purchase
tender, automate replenishments and follow up on your orders.

<div class="seealso">

\- [Odoo Tutorials: Purchase](https://www.odoo.com/slides/purchase-23)

</div>

<div class="toctree" data-titlesonly="">

purchase/products purchase/manage\_deals purchase/advanced

</div>


---
## File: ./content/applications/sales.md

  - nosearch

# Sales

<div class="toctree">

sales/crm sales/sales sales/point\_of\_sale sales/subscriptions
sales/rental

</div>


---
## File: ./content/applications/services/timesheets.md

  - nosearch

  - show-content

  - hide-page-toc

  - show-toc

# Timesheets

<div class="seealso">

\- [Odoo Tutorials: Project and
Timesheets](https://www.odoo.com/slides/project-and-timesheets-21)

</div>

<div class="toctree" data-titlesonly="">

timesheets/overview

</div>


---
## File: ./content/applications/services/timesheets/overview.md

  - nosearch

# Overview

<div class="toctree" data-titlesonly="">

overview/time\_off

</div>


---
## File: ./content/applications/services/timesheets/overview/time_off.md

# Create Timesheets upon Time Off Validation

Odoo automatically timesheets on project/tasks upon time off requests.
This allows for better overall control over the validation of
timesheets, as it does not leave place for forgetfulness and questions
after hours that have not been timesheeted by the employee.

Activate the `developer mode <developer-mode>`, go to *Timesheets*, and
change the *Project* and *Task* set by default, if you like.

![View of Timesheets setting enabling the feature record time off in
Odoo Timesheets](time_off/record_time_off.png)

Go to `Time Off --> Configuration --> Time Off Types`. Select or create
the needed type, and decide if you would like the requests to be
validated or not.

![View of a time off types form emphasizing the time off requests and
timesheets section in&#10;Odoo Time Off](time_off/time_off_types.png)

Now, once the employee has requested his time off and the request has
been validated (or not, depending on the setting chosen), the time is
automatically allocated on *Timesheets*, under the respective project
and task.  
On the example below, the user requested *Paid Time off* from July 13th
to 15th.

![View of the time off request form in Odoo Time
Off](time_off/time_off_request.png)

Considering that validation is not required, the requested time off is
automatically displayed in *Timesheets*. If validation is necessary, the
time is automatically allocated after the responsible person for
validating does it so.

![Video of timesheets emphasizing the requested time off from the
employee in Odoo Timesheets](time_off/timesheets.png)

Click on the magnifying glass, hovering over the concerned cell, to
access all the aggregated data on that cell (day), and see details
regarding the project/task.

![View of the details of a project/task in Odoo
Timeheets](time_off/timesheet_description.png)


---
## File: ./content/applications/services/project.md

  - nosearch

  - show-content

  - hide-page-toc

  - show-toc

# Project

Odoo Project is a tool to manage your ongoing projects. Schedule tasks,
assign activities to coworkers, and keep track of each project's
profitability.

<div class="seealso">

[Odoo Tutorials: Project and
Timesheets](https://www.odoo.com/slides/project-and-timesheets-21)

</div>

<div class="toctree" data-titlesonly="">

project/tasks

</div>


---
## File: ./content/applications/services/field_service/onsite_interventions.md

# Onsite interventions planning

## From a sales order

Allowing your sales team to open onsite interventions creates a seamless
experience for your customers. They can receive a quotation they first
have to approve before the work even starts.

Go to `Field Service --> Configuration --> Products` and create or edit
a product.

1.  Under the `General Information` tab, select `Service` as `Product
    Type`.
2.  Under the `Sales` tab, select `Timesheets on tasks` as `Service
    Invoicing Policy`.
3.  Select `Create a task in an existing project` as `Service Tracking`.
4.  Select your `Project`.
5.  If you use them, select your `Worksheet Template`, and save.

![Product configuration to create tasks from sales orders in Odoo Field
Service](onsite_interventions/product-configuration.png)

From the `Sales <../../sales/sales>` app, create a quotation with the
product and confirm it. A task is automatically set up under your Field
Service project. It is directly accessible from the sales order.

![Field Service task on a sales order in Odoo
Sales](onsite_interventions/task-on-so.png)

## From helpdesk tickets

The integration with the `Helpdesk <../helpdesk>` app lets your helpdesk
team manage intervention requests directly. Planning field service tasks
from tickets speeds up your processes.

### Configure the helpdesk team

Go to `Helpdesk --> Configuration --> Helpdesk Teams`. Select a team and
enable `Onsite Interventions`.

![Onsite interventions settings in Odoo
Helpdesk](onsite_interventions/helpdesk-settings.png)

The helpdesk tickets of the team now display the `Plan Intervention`
button. Click on it to create a new task under your field service
project.

![Plan intervention from helpdesk tickets in Odoo
Helpdesk](onsite_interventions/plan-intervention-from-ticket.png)


---
## File: ./content/applications/services/project/tasks/email_alias.md

# Create Project's Tasks from an Email Alias

When you already have an email address that customers know from the top
of their heads, changing it is the last thing you want to do. Instead,
link that address to your project and transform those conversations into
structured work. It automatically creates a task in the first stage of a
project.

## Set up an incoming email server

On the *Settings* application, enable *External Email Servers* and
define the incoming email alias you would like to use.  
**For more information**:
`/applications/general/email_communication/email_servers`

### Configure the email alias in your project

Now that you have the incoming email server set up, go to `Project -->
Configuration --> Projects --> Edit`. Under the *Emails* tab, define the
wanted email alias and choose the policy to receive a message.  
In addition, you can now directly set it when creating a new project.

![In the settings of your project, define the emails alias under the tab
email in Odoo Project](email_alias/email_project.png)

<div class="important">

<div class="title">

Important

</div>

All the recipients of the email (To/Cc/Bcc) are automatically added as
followers of the task.

</div>

The email can be seen under the name of your project on the dashboard.

![View of the email alias chosen on the dashboard view in Odoo
Project](email_alias/email_dashboard_project.png)


---
## File: ./content/applications/services/project/tasks.md

  - nosearch

# Tasks

<div class="toctree" data-titlesonly="">

tasks/email\_alias

</div>


---
## File: ./content/applications/services/field_service.md

  - nosearch

  - show-content

  - hide-page-toc

  - show-toc

# Field Service

<div class="seealso">

\- [Odoo Tutorials: Field
Service](https://www.odoo.com/slides/field-service-49)

</div>

<div class="toctree" data-titlesonly="">

field\_service/onsite\_interventions

</div>


---
## File: ./content/applications/services/helpdesk.md

  - nosearch

  - show-content

  - hide-page-toc

  - show-toc

# Helpdesk

<div class="seealso">

\- [Odoo Tutorials: Helpdesk](https://www.odoo.com/slides/helpdesk-51)

</div>

<div class="toctree" data-titlesonly="">

helpdesk/overview helpdesk/timesheet\_and\_invoice helpdesk/advanced

</div>


---
## File: ./content/applications/services/helpdesk/advanced/close_tickets.md

# Allow customers to close their tickets

Allowing customers to close their own tickets gives them autonomy and
minimizes misunderstandings around when an issue is considered solved or
not. This results in operational capacity for support teams, and higher
satisfaction for the customer.

## Enable ticket closing

Start by navigating to `Helpdesk --> Configuration --> Helpdesk Teams`
and choose the appropriate team. Then click `Edit` and enable `Ticket
closing` by checking the field box.

![Ticket closing feature in Odoo
Helpdesk.](close_tickets/close-ticket-settings.png)

To designate which stage the ticket migrates to once it is closed,
navigate to the ticket pipeline by going to `Helpdesk --> Overview` and
clicking `Tickets` on the team's card.

There are two options: create a new Kanban stage or work with an
existing one. For both scenarios, click the `Settings (gear)` icon next
to the stage name, select `Edit Stage`, and enable `Closing Stage`.
After checking the field box, click `Save` to finish.

<div class="note">

<div class="title">

Note

</div>

If a closing stage is not specified, by default, the ticket is moved to
the last stage in the kanban. If more than one stage is set as a closing
stage, the ticket is placed in the first closing stage column.

</div>

With the ticket closing settings now complete, customers can now view
the option to `Close this ticket` when they log into their portal.

![Customer view of ticket closing in Odoo
Helpdesk.](close_tickets/customer-view-close-ticket.png)

## Get reports on tickets closed by customers

To analyze the tickets that have been closed by customers, go to
`Helpdesk -->
Reporting --> Tickets`. Then, click on the `Filters` menu and choose
`Add
Custom filter`. Next, set the custom filter parameters to `Closed by
partner` and `is true`. Finally, click `Apply`.

![Filter for tickets closed by customers on Odoo Helpdesk's reporting
page.](close_tickets/closed-by-search-filter.png)


---
## File: ./content/applications/services/helpdesk/advanced/after_sales.md

# After Sales Features

As your business grows, having the right tool to support your helpdesk
team on recording, tracking and managing issues raised easy and
efficiently, is key. Odoo’s Helpdesk application allows you to generate
credit notes, manage returns, products, repairs, grant coupons, and even
plan onsite interventions from a ticket’s page.

## Set up the after sales services

Go to `Helpdesk --> Configuration --> Helpdesk Teams` and enable the
after sales options: *Refunds, Returns, Coupons, Repairs and Onsite
Interventions*.

![image](after_sales/aftersales1.png)

### Generate credit notes from tickets

You can use a credit note to refund a customer or adjust the amount due.
For that, simply go to your ticket page, click on *Refund* and select
the corresponding *Invoice*. Clicking on *Reverse* generates a credit
note, and you can *Post* it while still being in the *Helpdesk* app.

![image](after_sales/aftersales2.png)

### Allow product returns from tickets

The process of a product return from your customer back to your
warehouse is taken into action when, at the ticket page, you choose the
option *Return*.

![image](after_sales/aftersales3.png)

### Grant coupons from tickets

First, be sure to have your *Coupon Program* planned in the *Sales* or
*Website* application. Then, in *Helpdesk*, open your ticket, click on
*Coupon*, and choose the respective one.

![image](after_sales/aftersales4.png)

### Repairs from tickets

Clicking on *Repair* option, on your ticket page, a new repair order
form is shown. Fill in the information as needed and choose the next
step.

![image](after_sales/aftersales5.png)

### Plan onsite interventions from tickets

At the ticket's page click on *Plan Intervention*, and set up your
onsite intervention exactly the same way as if you were on the *Field
Service* application.

![image](after_sales/aftersales6.png)

<div class="seealso">

\-
[Coupons](https://www.odoo.com/slides/slide/coupon-programs-640?fullscreen=1)

</div>


---
## File: ./content/applications/services/helpdesk/overview.md

  - nosearch

# Overview

<div class="toctree" data-titlesonly="">

overview/getting\_started overview/sla overview/receiving\_tickets
overview/reports overview/forum\_and\_elearning overview/ratings

</div>


---
## File: ./content/applications/services/helpdesk/timesheet_and_invoice.md

  - nosearch

# Timesheet and Invoice

<div class="toctree" data-titlesonly="">

timesheet\_and\_invoice/invoice\_time
timesheet\_and\_invoice/reinvoice\_from\_project

</div>


---
## File: ./content/applications/services/helpdesk/advanced.md

  - nosearch

# Advanced

<div class="toctree" data-titlesonly="">

advanced/after\_sales advanced/close\_tickets

</div>


---
## File: ./content/applications/services/helpdesk/overview/receiving_tickets.md

# Start Receiving Tickets

Offering a variety of channels from where your customers can contact you
grants them flexibility and the right to choose the best one for
themselves. And, in order to make sure inquiries across all channels get
addressed, it is essential to have a solution where all interactions
come in one place.

## Channels options to submit tickets

Go to `Helpdesk --> Configuration --> Helpdesk Teams`, and enable the
following features as you want them to be available to your users.

![View of a helpdesk teams setting page emphasizing the channels options
in Odoo Helpdesk](receiving_tickets/channels_options.png)

### Email Alias

Let your customers submit tickets by sending an email to your support
email address. The subject line of the email becomes the title of the
ticket and the content is shown in the Chatter.  
Select *Configure domain name* to be redirected to *Settings* and, from
there, enable *External Email Servers* to determine or change your
*Alias Domain*.

![View of the settings page of a helpdesk team emphasizing the email
alias feature&#10;in Odoo
Helpdesk](receiving_tickets/channels_emailalias.png)

<div class="note">

<div class="title">

Note

</div>

Using your own email server is required to send and receive emails in
Odoo Community and Enterprise. Online users benefit from a ready-to-use
email server.

</div>

### Website Form

Allow your customers to submit a ticket by filling in a form through
your website.  
Once the feature is activated, get redirected to your website by
clicking on *Go to Website*.

![View of the settings page of a helpdesk team emphasizing the Go to
Website button in&#10;Odoo
Helpdesk](receiving_tickets/go_to_website.png)

From the website page customize the form as you like. Then, publish it
by clicking on *Unpublished*.

![View of the website form to submit a ticket for Odoo
Helpdesk](receiving_tickets/submit_a_ticket_form.png)

### Live Chat

Through live interactions with your website visitors, helpdesk tickets
can be instantly created and redirected to the right person.  
Click on your helpdesk team's name - for the example below: *Customer
Care* - and `set up your channel </applications/websites/livechat>`.

![View of the settings page of a helpdesk team emphasizing the live chat
features and links&#10;in Odoo
Helpdesk](receiving_tickets/live_chat.png)

Now, your operators can create tickets by using the `command
</applications/websites/livechat/responses>` */helpdesk
(subject\_of\_ticket)*.

## Prioritize tickets

Use the stars to prioritize your tickets. The most urgent ones appear at
the top of your list on the Kanban view.

  - 1 star = *Low priority*
  - 2 stars = *High priority*
  - 3 stars = *Urgent*

![View of a team’s kanban view and the prioritized tasks in Odoo
Helpdesk](receiving_tickets/kanban_view_prioritize.png)

<div class="seealso">

\- `sla` - `../advanced/close_tickets` -
`/applications/general/email_communication/email_servers`

</div>


---
## File: ./content/applications/services/helpdesk/overview/sla.md

# Service Level Agreements (SLA)

Service Level Agreements (SLA) are commitments you make with your
customers to outline how a service is delivered. It bolsters trust
between you and your customers as it makes clear what needs to be done,
to what standard, and when.

## Create your policies

First, enable the feature on the settings of the team you would like
policies to be applied, going to `Helpdesk --> Configuration -->
Helpdesk Teams`.  
Create your policies through the team’s settings page or go to `Helpdesk
--> Configuration --> SLA Policies`.

![View of an SLA form in Odoo Helpdesk](sla/new_sla.png)

Choose to which **Team** the policy is relevant and the **Minimum
Priority** a ticket needs to have for the policy to be applied.  
**Target** is the stage a ticket needs to reach within the period
defined to satisfy the SLA. The period is based on the ticket’s creation
date, and a deadline is set on the ticket’s form once it matches an SLA
policy rule. If a ticket has more than one policy applied to it, the
closest deadline of all SLAs is the one considered.  
When a ticket has satisfied an SLA policy, the SLA tag appears in green
and the deadline field is not shown anymore.

![View of a ticket’s form emphasizing a satisfied SLA in Odoo
Helpdesk](sla/ticket_green_tag.png)

## SLA Analysis

Go to `Helpdesk --> Reporting --> SLA Status Analysis`. Apply *Filters*
and *Group by* to identify tickets that should be prioritized and keep
track of upcoming deadlines.

![View of the SLA status analysis page emphasizing the group by option
in Odoo Helpdesk](sla/sla_analysis.png)

<div class="seealso">

\- `../advanced/close_tickets`

</div>


---
## File: ./content/applications/services/helpdesk/overview/reports.md

# Reports for a Better Support

An efficient customer service solution should have a built-in reporting
option. Reports allow you to track trends, identify areas for
improvement, manage employees’ workloads and, most importantly, meet
your customer’s expectations.

## Cases

Some examples of the reports Odoo Helpdesk can generate include:

  - The number of tickets *grouped by* team and ticket type.

In this manner, you are able to evaluate which ticket types have been
the most frequent ones, plus the workload of your teams.  
Apply *Time Ranges* if you would like to make comparisons to a *Previous
Period* or a *Previous Year*.

![View of a helpdesk ticket analysis by team and ticket type in Odoo
Helpdesk](reports/report_team_ticket_type.png)

  - The number of tickets closed per day, per team.

Get an overview of how many requests each team is closing per day in
order to measure their performance. Identify productivity levels to
understand how many requests they are able to handle.

![View of a helpdesk ticket analysis by team and close date in Odoo
Helpdesk](reports/report_close_date_team.png)

<div class="tip">

<div class="title">

Tip

</div>

Filter it by *Assignee* to see Key Performance Indicators (KPI) per
agent.

</div>

  - The number of hours tickets are taking to be solved, grouped by team
    and ticket type.

Check if your expectations are met by *measuring* the *Time to close
(hours)*. Your customers not only expect fast responses but they also
want their issues to be handled quickly.

![View of helpdesk ticket analysis of the hours to close by ticket type
and team in&#10;Odoo Helpdesk](reports/report_time_to_close.png)

## Save filters

Save the filters you use the most and avoid having to reconstruct them
every time they are needed. To do so, set the groups, filters, and
measures needed. Then, go to *Favorites*.

![View of helpdesk ticket analysis emphasizing the option to add a
filter as a favorite one&#10;in Odoo Helpdesk](reports/favorites.png)

<div class="seealso">

\- `receiving_tickets` - `sla`

</div>


---
## File: ./content/applications/services/helpdesk/overview/ratings.md

# Ratings

Allow customers to rate their experience with your helpdesk teams to
strengthen your credibility and gain their trust. Reviews can also
influence a customer’s decision and open space for feedback that can
help you improve the quality of your services.

## Set up

Go to `Helpdesk --> Configuration --> Helpdesk Teams` and enable
*Ratings on tickets*. The feature automatically adds a default email
template on the non-folded *closing stage(s)* of that team.

![Overview of the settings page of a helpdesk team emphasizing the
rating on ticket feature&#10;in Odoo
Helpdesk](ratings/ratings_on_tickets.png)

To edit the email template and the stage(s) set as the closing ones, go
to the Kanban view of your helpdesk team and click on *Settings*, then
on *Edit Stage*.

![Overview of a helpdesk team kanban view emphasizing the menu edit
stage in Odoo Helpdesk](ratings/edit_stage.png)

Now, once a ticket reaches the stage(s) designated as the *Closing
Stage*, an email is sent to the customer.

![View of a standard helpdesk customer review email template for Odoo
Helpdesk](ratings/email_customer_feedback.png)

Ratings can be seen on the chatter of each ticket, under the *See
Customer Satisfaction* link on the main dashboard, and through
*Reporting*.

### Ratings visible on the customer portal

Go to `Helpdesk --> Configuration --> Helpdesk Teams` and enable
*Display Rating on Customer Portal*. Now, by clicking on the helpdesk
team’s name on their ticket, customers can see its ratings.

![View of the helpdesk ticket from a user’s portal emphasizing the link
to the helpdesk team&#10;in Odoo Helpdesk](ratings/customer_portal.png)

<div class="seealso">

\- `../advanced/close_tickets`

</div>


---
## File: ./content/applications/services/helpdesk/overview/forum_and_elearning.md

# Forum and eLearning

## Forum

To go above and beyond email, live chat, web forms, and phone lines,
offer your customers a support forum. This way, customers might become
more attached to your company as they would be investing time to get
into details of your business. You also encourage the exchange of
experiences and knowledge, supporting the feeling of belonging to a
community (your community\!).

### Set up

Go to `Helpdesk --> Configuration --> Helpdesk Team` and enable *Help
Center*.

![Overview of the settings page of a helpdesk team emphasizing the help
center feature in&#10;Odoo
Helpdesk](forum_and_elearning/help_center_feature.png)

Create, or edit a forum by clicking on the external link. Among the
editing options, choose if you would like the *Forum Mode* to be
*Questions*: only one answer is allowed per question or *Discussions*:
multiple answers are allowed per question.

![Overview of a forum’s settings page in Odoo
Helpdesk](forum_and_elearning/help_center_customer_care.png)

From now on, logged in users can start their discussions. To keep track
of posts, go to `Website --> Forum --> Posts`.

![Overview of the Forums page of a website to show the available ones in
Odoo Helpdesk](forum_and_elearning/customer_care_website.png)

Turn tickets into forum posts by simply clicking on *Share on the Forum*
on the ticket's page.

![Overview of the Forums page of a website to show the available ones in
Odoo Helpdesk](forum_and_elearning/share_forum.png)

## eLearning

In addition to a forum, offer online courses. When doing so, you link
your customers and users’ needs and questions to useful content, helping
to boost efficiency as they can also find their answers there.

### Set up

Go to `Helpdesk --> Configuration --> Helpdesk Teams` and enable
*eLearning*.

![Overview of the settings page of a customer care team emphasizing the
feature elearning in&#10;Odoo
Helpdesk](forum_and_elearning/elearning_feature.png)

Once the structure and content of your course are ready, *Publish* it by
clicking on *Unpublished*.

![View of a course being published for Odoo
Helpdesk](forum_and_elearning/course_website.png)

To keep track of your course statistics, go to *eLearning* and *View
Course*.

![View of the elearning applications dashboard for Odoo
Helpdesk](forum_and_elearning/view_course_elearning.png)

<div class="todo">

DETAILS/INFO SHOULD COME FROM ELEARNING DOCS. THEREFORE, LINK DOCS ONCE
AVAILABLE\!

</div>


---
## File: ./content/applications/services/helpdesk/overview/getting_started.md

# Getting Started

Helpdesk teams provide your customers with support to queries or errors
they might encounter while using your product/service. Therefore, a
successful scheme where you can organize multiple teams with their
customized pipeline, visibilities settings, and ticket traceability is
essential.

## Set up teams

To modify or create teams, go to `Helpdesk --> Configuration -->
Helpdesk Teams`.  
Setting up multiple teams allows you to group tickets by your channels
(example: BE/US), or by your support services' types (example: IT,
accounting, admin, etc.).

![View of the helpdesk teams page in Odoo
Helpdesk](getting_started/helpdesk_teams_view.png)

### Team’s productivity and visibility

Teams can have individual *Assignment Methods* to ensure that tickets
get redirected to the right person:

  - *Manually*: tickets are manually assigned, allowing employees to
    manage their own workload and target tickets they are experts at;
  - *Random*: tickets are randomly assigned and everyone gets the same
    amount. This method ensures that all tickets are handled as the
    assignment happens automatically;
  - *Balanced*: tickets are assigned to the person with the least amount
    of tickets so that everyone fairly gets the same amount. Thereby,
    you ensure that all tickets get to be taken care of.

![View of a helpdesk team settings page emphasizing the productivity and
visibility features&#10;in Odoo
Helpdesk](getting_started/productivity_visibility.png)

For the *Random* and *Balanced* assignment methods, you can set the
*Team Members* among whom tickets are assigned. Leave the field empty to
include all employees (with the proper access rights).  
The *Team Visibility* feature allows you to specify who can see and
access the team’s tickets. Therefore, ticket’s with sensible information
are only seen by the right people. Leave the field empty to include all
employees (with the proper access rights).

## Set up stages and share it among teams

To set up stages, go to `Helpdesk --> Configuration --> Stages`. Then,
create and/or edit stages as you need and set specific teams to use
certain stages under *Team*.

![View of a stage’s setting page emphasizing the option to add teams in
Odoo Helpdesk](getting_started/stages_teams.png)

Stages can be shared between one or multiple teams, allowing you to
adapt the pipeline to your individual needs. They also apply a
visibility and access rule, as other teams are not able to see or use
the stage.

![View of a team’s kanban view in Odoo
Helpdesk](getting_started/helpdesk_kanbanview.png)

<div class="seealso">

\- `/applications/general/users`

</div>


---
## File: ./content/applications/services/helpdesk/timesheet_and_invoice/invoice_time.md

# Invoice Time Spent on Tickets (Prepaid Support Services)

Have the option to work with prepaid support services, meaning that a
sales order and a corresponding invoice are issued and, once the service
is done, you can deduct the time spent. Odoo allows it to happen because
the applications are fully integrated, resulting in faster responses to
your customer needs.

## Set up

### Step 1: Set up a helpdesk team

Go to `Helpdesk --> Configuration --> Helpdesk Teams`, create or edit an
existing team, and enable *Timesheet on Ticket* and *Time
Reinvoicing*.  
Select or create a project under *Timesheet on Ticket*. The
selected/created is the one at which employees timesheet on by default.
However, it can be ultimately modified on each ticket.

![View of a helpdesk team settings page emphasizing the timesheet on
ticket and time&#10;reinvoicing features in Odoo
Helpdesk](invoice_time/sell_track_hours.png)

### Step 2: Set up a service

Go to `Sales --> Configuration --> Settings` and enable *Units of
Measure* to optionally be able to choose *hours* (for example) as the
unit of measure of your service.  
Then, go to `Sales --> Products --> Products`, create or edit an
existing one, and set its *Product Type* as *Service*.

![View of a product's form emphasizing the product type and unit of
measure fields in Odoo&#10;Sales](invoice_time/product_type_unit.png)

Now, select the invoicing management you would like to have under the
*Sales* tab. We recommend the following configuration:

![View of a product form and the invoicing options under the tab sales
in Odoo Sales](invoice_time/product_invoicing.png)

This configuration ensures that the customer is invoiced by the number
of hours predicted in the sales order, meaning that less or extra hours
recorded are not taken into account. It also ensures that every time a
sales order is confirmed, a new task is created under the right project,
automating the process.

<div class="tip">

<div class="title">

Tip

</div>

We recommend setting up a specific project, as it was done for this flow
example. The important thing to remember is that the sales order item
needs to be set on the corresponding project or task, in order to
reinvoice the time spent on a ticket.

</div>

## Prevision an invoice and record time

### Step 1: Place an order

Go to `Sales --> Orders --> Orders` and create one for the helpdesk
service product you have previously set up, with the customer who needs
the ticket to be opened. Set the number of hours needed to assist the
customer and *Confirm* the order.

![View of a sales order emphasizing the order lines in Odoo
Sales](invoice_time/sales_order_new.png)

### Step 2: Invoice the customer

In *Sales*, select the respective sales order to *Create Invoice*.

![View of a sales order emphasizing the create invoice button in Odoo
Sales](invoice_time/create_invoice.png)

### Step 3: Link the task to the ticket

Now, in *Helpdesk*, create or edit the respective ticket and link it to
the task created by the confirmation of the sales order.

![View of a helpdesk ticket emphasizing the field task in Odoo
Helpdesk](invoice_time/helpdesk_task.png)

### Step 4: Record the time spent

Still on the respective helpdesk ticket, record the hours performed
under the *Timesheets* tab.

![View of a helpdesk ticket emphasizing the timesheets tab in Odoo
Helpdesk](invoice_time/helpdesk_timesheet.png)

Note that the hours recorded on the ticket form are shown on the
*Delivered* column in the sales order.

![View of a sales order emphasizing the delivered column in Odoo
Sales](invoice_time/quotation_delivered.png)

<div class="tip">

<div class="title">

Tip

</div>

Hours recorded on the ticket are automatically shown in *Timesheets* and
on the dedicated task.

</div>

<div class="seealso">

\- `reinvoice_from_project` -
`/applications/inventory_and_mrp/inventory/management/products/uom`

</div>


---
## File: ./content/applications/services/helpdesk/timesheet_and_invoice/reinvoice_from_project.md

# Invoice Time Spent on Tickets (Postpaid Support Services)

The `Timesheet on Ticket` integration provides more control and
transparency over how clients are charged, and what they're specifically
billed for.

In Odoo, the Helpdesk agent can use the ticket to record timesheets.
Once a ticket is solved, the client can be billed for the time spent on
the ticket. Odoo will pull from the ticket's timesheet to accurately
bill the client.

## Configuration

To turn on the `Timesheet on Ticket` feature, go to `Helpdesk -->
Configuration --> Helpdesk Teams`, select a Helpdesk team, and then,
click `Edit`. Next, enable the options `Timesheet on Ticket` and `Time
Reinvoicing`. Then, click `Save` to apply these changes to the Helpdesk
team settings.

Once the `Timesheet on Ticket` feature is enabled, a `Project` drop-down
option will appear below `Timesheet on Ticket`. The `Project` drop-down
option will automatically be set to a Project that Odoo created for the
Helpdesk team. The tickets' timesheets will be stored in the selected
Project.

## Create a sales order

After a ticket comes into the pipeline, go to `Sales --> Create`. Then,
add the customer from the ticket to the `Customer` field in the new
quotation. In the `Order Lines` tab, create or select a product to
charge the customer for the time spent on their Helpdesk ticket.

If creating a new product from the sales order form, first give the
product a name by typing it in the `Product` column. Then, click `Create
and edit`.

First, in the `General Information` tab, set the `Product Type` to
`Service` and the `Sales Price` to the Helpdesk agent's service rate.
Then, in the `Sales` tab, set the `Service Invoicing Policy` to
`Timesheets on
tasks`. Finally, click `Save` to create the new product and add it to
the quotation.

Once the product is added, click `Confirm` to turn the quotation into a
sales order.

![Create a sales order and add a
product.](reinvoice_from_project/create-sales-order.png)

## Record a timesheet

To record a timesheet, jump back to the Helpdesk ticket by going to the
Helpdesk dashboard and clicking `Tickets` on the team's card (or by
going to the Projects dashboard and clicking `Tickets` on the project
card). Then, click `Edit` and use the `Timesheets` tab to record the
time spent on the ticket.

![Record time spent on a
ticket.](reinvoice_from_project/record-timesheet-ticket.png)

<div class="tip">

<div class="title">

Tip

</div>

The ticket's timesheets can be recorded before or after the sales order
is made, the order doesn't matter.

</div>

## Link the Helpdesk ticket to the SO

Once a timesheet is recorded, the `Sales Order Item` field will appear
on the ticket form. To link the `SO (Sales Order)` to the ticket, start
on the ticket form and click `Edit`. Next, select the `SO (Sales Order)`
that was created earlier from the drop-down menu. Odoo will
automatically filter the sales orders to only show sales orders that are
connected to the ticket's customer. Lastly, click `Save` to connect the
ticket and the `SO (Sales Order)`.

![Link the SO item to the
ticket.](reinvoice_from_project/link-soi-to-ticket.png)

## Modify billing rates

If a timesheet entry is recorded, but the agent does not want to bill
the client for that time, go to the `Timesheets` tab and toggle on the
visibility of the `Sales Order Item` column. When filling out the
information for the timesheet entry, make sure to leave the non-billable
timesheet entry's `Sales Order Item` field blank.

If the agent wants to charge a different rate for a timesheet entry,
first, add a new product to the connected `SO (Sales Order)` priced at
the new rate. Then, select the new product in the timesheet entry's
`Sales Order Item` field.

## Create the invoice

When the Helpdesk ticket is completed and the client is ready to be
billed for time, begin by clicking the `Sales Order` smart button on the
ticket form to navigate to the `SO
(Sales Order)`. The `Delivered` column should match the number of hours
recorded on the ticket's timesheet. After checking and filling out the
relevant information, click `Create Invoice` to bill the client for the
time spent on the ticket. Odoo will automatically generate an invoice to
send to the client and the Helpdesk ticket can officially be closed.

<div class="seealso">

\- `invoice_time` -
`/applications/inventory_and_mrp/inventory/management/products/uom`

</div>


---
## File: ./content/applications/websites/ecommerce/shopper_experience.md

  - nosearch

# Get paid

<div class="toctree" data-titlesonly="">

shopper\_experience/payment\_acquirer shopper\_experience/portal

</div>


---
## File: ./content/applications/websites/ecommerce/taxes.md

  - nosearch

# Collect taxes

<div class="toctree" data-titlesonly="">

../../finance/accounting/taxation/taxes/default\_taxes
../../finance/accounting/taxation/taxes/fiscal\_positions
../../finance/accounting/taxation/taxes/taxes
../../finance/accounting/taxation/taxes/taxcloud

</div>


---
## File: ./content/applications/websites/ecommerce/maximizing_revenue.md

  - nosearch

# Maximize my revenue

<div class="toctree" data-titlesonly="">

maximizing\_revenue/upselling maximizing\_revenue/cross\_selling
maximizing\_revenue/reviews maximizing\_revenue/pricing
maximizing\_revenue/promo\_code

</div>


---
## File: ./content/applications/websites/ecommerce/maximizing_revenue/pricing.md

# Adapt prices to website visitors

This section sheds light on pricing features found in the eCommerce app:

  - force a price by geo-localization,
  - let the customer choose the currency.

As a pre-requisite, check out how to managing product pricing:
`/applications/sales/sales/products_prices/prices/pricing`).

## Geo-IP automatically applies the right price

Assign country groups to your pricelists. That way, visitors who aren't
logged in yet will get their own currency when landing on your website.

Once logged in, they get the pricelist matching their country.

## Currency selector

In the case that you sell in several currencies, you can let your
customers choose their own. Check the *Selectable* box to add the
pricelist to the website drop-down menu, which can be found in
*Pricelists* under the *Products* menu, located in the Website
application.

![image](pricing/website_pricelist_select.png)

<div class="seealso">

  - `/applications/sales/sales/products_prices/prices/pricing`
  - `/applications/sales/sales/products_prices/prices/currencies`
  - `promo_code`

</div>


---
## File: ./content/applications/websites/ecommerce/maximizing_revenue/promo_code.md

# How to create & share promotional codes

Want to boost your sales for Xmas? Share promocodes through your
marketing campaigns and apply any kind of discounts.

## Setup

  - Go to `Sales --> Settings` and choose *Advanced pricing based on
    formula* for *Sale Price*.
  - Go to `Website Admin --> Catalog --> Pricelists` and create a new
    pricelist with the discount rule (see `pricing`). Then enter a code.

![image](promo_code/promocode.png)

  - Make the promocode field available on your *Shopping Cart* page
    (option in *Customize* menu). Add a product to cart to reach it.

![image](promo_code/promocode_publish.png)

Once turned on you see a new section on the right side. On clicking
*Apply* prices get automatically updated in the cart.

![image](promo_code/promocode_web.png)

The promocode used by the customer is stored in the system so you can
analyze the performance of your marketing campaigns.

![image](promo_code/promocode_backend.png)

  - Show sales per pricelists...

<div class="seealso">

  - `pricing`

</div>


---
## File: ./content/applications/websites/ecommerce/maximizing_revenue/cross_selling.md

# How to sell accessories and optional products (cross-selling)

You sell computers. Why not stimulating your customers to buy a
top-notch screen or an extra-warranty? That's the goal of cross-selling
functionalities:

  - Accessory products on checkout page,
  - Optional products on a new *Add to Cart* screen (not installed by
    default).

## Accessory products when checking out

Accessories (e.g. for computers: mouse, keyboard) show up when the
customer reviews the cart before paying.

![image](cross_selling/cross_sell_accessory_web.png)

Select accessories in the *Sales* tab of the product detail page.

![image](cross_selling/cross_sell_accessory.png)

<div class="note">

<div class="title">

Note

</div>

There is an algorithm to figure out the best accessories to display in
case several items are added to cart. If any item is the accessory of
several products added to cart, it is most likely that it will be atop
the list of suggested accessories.

</div>

## Optional products when adding to cart

Optional products are directly related to the item added to cart (e.g.
for computers: warranty, OS software, extra components). Whenever the
main product is added to cart, such a new screen pops up as an extra
step.

![image](cross_selling/cross_sell_optional_web.png)

To publish optional products:

  - Install *eCommerce Optional Products* addon in *Apps* menu. Remove
    the default filter to search on addons as well, otherwise only main
    apps show up.

![image](cross_selling/cross_sell_optional_install.png)

  - Select optional items from the *Sales* tab of the product detail
    form.

![image](cross_selling/cross_sell_optional.png)

<div class="note">

<div class="title">

Note

</div>

The quantity of optional items added to cart is the same than the main
item.

</div>


---
## File: ./content/applications/websites/ecommerce/maximizing_revenue/reviews.md

# How to enable comments & rating

Publishing and monitoring customer experience will help you gain the
trust of new customers and better engage with your community. In 2
clicks, allow your customer to share their feedback\!

![image](reviews/comment_post.png)

## Setup

Activate comments & rating from the *Customize* menu of the product web
page.

![image](reviews/comment_setup.png)

<div class="note">

<div class="title">

Note

</div>

Visitors must log in to share their comments. Make sure they are able to
do so (see Portal documentation).

</div>

## Review the posts in real time

Whenever a post is published, the product manager and all the product
followers get notified in their Inbox (*Discuss* menu).

![image](reviews/comment_new.png)

<div class="note">

<div class="title">

Note

</div>

By default the user who created the product is automatically set as
follower.

</div>

Click the product name to open the detail form and review the comment
(in the product discussion thread).

![image](reviews/comment_inbox.png)

## Moderate & unpublish

You can easily moderate by using the chatter, either in the product
detail form or on the web page.

To unpublish the post, open the product web page and click the
*Published* button to turn it red (*Unpublished*).

![image](reviews/comment_unpublish.png)

..tip:: You can access the web page from the detail form by clicking the
*Published* smart button (and vice versa).

![image](reviews/comment_webpage.png)


---
## File: ./content/applications/websites/ecommerce/maximizing_revenue/upselling.md

# How to sell pricier alternative products (upselling)

In order to maximize your revenue, suggesting pricier alternative
products is strongly advised for basic items. That way, your customer
will spend more time browsing your catalog.

![image](upselling/upsell_web.png)

To do so:

  - Select such *Alternative Products* in the *Sales* tab of the product
    detail form. 3 alternatives are fine\! Don't publish too many
    otherwise your customers will be confused.

![image](upselling/upsell.png)

  - Turn on *Alternative Products* from the *Customize* menu of the
    product web page.

![image](upselling/upsell_publish.png)


---
## File: ./content/applications/websites/ecommerce/managing_products/variants.md

# Manage product variants

Product variants are used to offer variations of the same product to
your customers on the product's page.

Let's say one of your customers selects a T-shirt from your product
catalog.

Then, they choose the size and color they want. The various size and
color combinations are known as product variants.

## Create attributes & variants

In order to create various attributes and variants for your products,
you first need to turn on *Variants* in `Sales --> Configuration -->
Settings`.

Then, select a product from the Products list (`Sales / Website -->
Products -->
Products`). When the product detail form opens, click on *Edit*, and go
to the *Variants* tab.

Here, you can add as many different attributes as you'd like by clicking
on *Add a line*.

These attributes appear as three different types:

  - Radio buttons
  - Color buttons
  - Drop-down menu

Several variants appear as soon as there are two values for one
attribute.

Don't forget to hit *Save* once all variants have been entered.

![ecommerce product variants values](variants/values.png)

## Edit variants

After you hit *Save*, you are able to see all the variants from the
product template detail form via the *Variants* smart button.

![ecommerce product variants smart button](variants/smart-button.png)

Clicking the *Variants* smart button takes you to the Product Variants
page, where you can edit the following data for each specific variant:

  - Picture(s)
  - Internal Reference (SKU \#)
  - Barcode
  - Volume
  - Weight
  - Cost

<div class="note">

<div class="title">

Note

</div>

Both the Barcode and the Internal Reference are variant-specific. You
need to populate them once the variants are generated.

</div>

## Set specific prices per variant

You can set a specific public price per variant by clicking on
*Configure Variants* in the product detail form (top-left corner). That
takes you to the *Product Variant Values* page for that product.

![ecommerce product variants configure
variants](variants/configure-variants.png)

To set a specific public price for a particular variant, simply click on
the variant you want to modify, then click on *Edit*.

The *Value Price Extra* field represents the monetary value that is
added to the original product price whenever the corresponding attribute
value is selected.

![ecommerce value price extra](variants/value-price-extra.png)

This is how the *Value Price Extra* looks on your website:

![ecommerce value price extra on the
frontend](variants/value-price-extra-frontend.png)

<div class="note">

<div class="title">

Note

</div>

Pricelist formulas let you set advanced price computation methods for
product variants. See `../maximizing_revenue/pricing`.

</div>

## Disable/archive variants

You can disable/archive specific variants so they are no longer
available in quotes or on your website (not existing in your stock,
deprecated, etc.). Simply select *Archive* in their detail form. You can
reactivate them the same way.

![ecommerce product variants archive](variants/archive.png)

To retrieve such items, hit *Archived* in the *Filters* category while
searching the variants list.

![ecommerce product variants archive
search](variants/archive-search.png)

<div class="seealso">

\- `../../../sales/sales/products_prices/products/variants`

</div>


---
## File: ./content/applications/websites/ecommerce/managing_products/multi_images.md

# How to display several images per product

By default your product web page displays the main image of your product
only. If you like to show your products under several angles, you can
turn the image into a carrousel.

![image](multi_images/multi_images01.png)

  - Check *Several images per product* in `Website Admin -->
    Configuration --> Settings`.
  - Open a product detail form and upload images from *Images* tab. Hit
    *Create* in Edit mode to get the upload wizard.

![image](multi_images/multi_images02.png)

<div class="note">

<div class="title">

Note

</div>

Such extra image are common to all the product variants (if any).

</div>


---
## File: ./content/applications/websites/ecommerce/shopper_experience/portal.md

# How customers can access their customer account

It has never been so easy for your customers to access their customer
account. Forget endless signup forms, Odoo makes it as easy as ABC. They
are suggested to sign up (name, email, password) when the order is
placed, and not before. Indeed, nothing is more annoying than going
through a signup process before buying something.

## Sign up

The invitation to sign up shows up when the customer wants to visualize
the order from order confirmation email.

![image](portal/portal_odoo_signup.png)

## Customer account

Once logged in the customer will access the account by clicking *My
Account* in the login dropdown menu.

![image](portal/portal_link.png)

THere they find all their history. The main address (billing) can also
be modified.

![image](portal/portal_menu.png)

<div class="note">

<div class="title">

Note

</div>

If the customer is set as a contact of a company in your address book,
they will see all the documents whose the customer belongs to this
company.

</div>


---
## File: ./content/applications/websites/ecommerce/shopper_experience/payment_acquirer.md

# Manage orders paid with Payment Acquirers

The moment a payment is officially authorized by a Payment Acquirer,
Odoo *automatically* confirms the order, which triggers the delivery.
And, if you invoice based on ordered quantities, you are requested to
invoice the order, as well.

Let’s take a closer look at how to manage orders paid with Payment
Acquirers.

## Checking the status of a payment

To check the status of a payment, go to `Website --> Orders --> Orders`.
Then, simply click on the order you wish to check on.

Once you are on the Sales Order page, you will find the payment is
confirmed with an automatic note in the *Chatter*.

![payment is confirmed in the chatter of sales
order](payment_acquirer/chatter-transaction.png)

If the user decides to create an invoice, the payment is directly
reconciled. This note in the *Chatter* includes a link to the Payment
entry, which contains various details about the transaction, along with
a link to the related Journal Entry.

![page with details surrounding the specific
transaction](payment_acquirer/transaction-info.png)

<div class="note">

<div class="title">

Note

</div>

Specific messages are provided to your customers for every payment
status whenever they are redirected to Odoo after the transaction. To
edit these messages, go to the *Messages* tab of the payment method.

</div>

## Automatically generate invoices at order

When the order is confirmed, you can also choose to have an invoice
automatically issued and paid. This fully-automated feature is designed
for businesses that invoice orders right away.

  - To do automatically generate invoices at order:
    
      - Go to `Website --> Configuration --> Settings --> Invoicing`.
      - Then, under the **Invoicing Policy** option, select *Invoice
        what is ordered*.
      - Then activate *Automatic Invoices* and *Save*.

![example of automatic invoice](payment_acquirer/automatic-invoice.png)

## Capture payment after the delivery

If the acquirer handling the payment is configured to capture amounts
manually, the order is confirmed, but the amount is kept on hold. Once
the delivery is processed, you can capture the payment from the related
Sales Order.

<div class="seealso">

\- `../../../finance/payment_acquirers` - `Payment Acquirers: Place a
hold on a card <payment_acquirers/capture_amount>`

</div>


---
## File: ./content/applications/websites/ecommerce/getting_started.md

  - nosearch

# Get started

<div class="toctree" data-titlesonly="">

getting\_started/product\_page getting\_started/catalog

</div>


---
## File: ./content/applications/websites/ecommerce/managing_products.md

  - nosearch

# Manage my products

<div class="toctree" data-titlesonly="">

managing\_products/multi\_images managing\_products/variants
../../sales/sales/products\_prices/products/import

</div>


---
## File: ./content/applications/websites/ecommerce/getting_started/product_page.md

# How to build a product page

On the website click *New Page* in the top-right corner.

Then click *New Product* and follow the blinking tips.

![image](product_page/create_product.png)

Here are the main elements of the Product page:

![image](product_page/product_page_tips.png)

Many elements can be made visible from the *Customize* menu.

![image](product_page/product_customize.png)

See how to configure your products from links here below.

<div class="seealso">

  - `../managing_products/variants`
  - `/applications/sales/sales/products_prices/taxes`
  - `../maximizing_revenue/cross_selling`
  - `../maximizing_revenue/reviews`
  - `../maximizing_revenue/pricing`
  - `../../website/pages/seo`

</div>


---
## File: ./content/applications/websites/ecommerce/getting_started/catalog.md

# How to customize my catalog page

## Product Catalog

All your published items show up in your catalog page (or *Shop* page).

![image](catalog/shop.png)

Most options are available in the *Customize* menu: display attributes,
website categories, etc.

![image](catalog/shop_customize.png)

## Highlight a product

Boost the visibility of your star/promoted products: push them to top,
make them bigger, add a ribbon that you can edit (Sale, New, etc.). Open
the Shop page, switch to Edit mode and click any item to start
customizing the grid.

See how to do it:
<https://www.odoo.com/openerp_website/static/src/video/e-commerce/editing.mp4>

## Quick add to cart

If your customers buy a lot of items at once, make their process shorter
by enabling purchases from the catalog page. To do so, add product
description and add to cart button. Turn on the following options in
*Customize* menu: Product Description, Add to Cart, List View (to
display product description better).

![image](catalog/shop_list.png)


---
## File: ./content/applications/websites/ecommerce.md

  - nosearch

  - show-content

  - hide-page-toc

  - show-toc

# eCommerce

Run a modern open-source online store with Odoo eCommerce. Learn how to
sell online, promote products and increase your average cart sizes.

<div class="important">

<div class="title">

Important

</div>

Odoo offers a `free custom domain name <domain-name/odoo-register>` to
all Odoo Online databases for one year. Visitors can then access your
website with an address such as `www.example.com` rather than the
default `example.odoo.com`.

</div>

<div class="seealso">

\- `Website Documentation <website>` - [Odoo Tutorials:
Website](https://www.odoo.com/slides/website-25) - [Odoo Tutorials:
eCommerce](https://www.odoo.com/slides/ecommerce-26)

</div>

<div class="toctree" data-titlesonly="">

ecommerce/getting\_started ecommerce/managing\_products ecommerce/taxes
ecommerce/shopper\_experience ecommerce/maximizing\_revenue

</div>


---
## File: ./content/applications/websites/website/reporting/google_analytics_dashboard.md

# How to track your website traffic from your Odoo Dashboard

<div class="warning">

<div class="title">

Warning

</div>

It is not possible anymore for new Google Analytics accounts to
integrate their **Google Analytics Dashboard** inside their **Odoo
Dashboard**. Google deprecated **Universal Analytics** which won't be
supported anymore in
[July 2023](https://support.google.com/analytics/answer/11583528). They
are replacing it with **Analytics 4**. New accounts are already using
it.

**Analytics 4** [doesn't
allow](https://issuetracker.google.com/issues/233738709?pli=1) its
dashboard to be integrated in external websites.

You now have to check your Analytics data directly in the Google
Platform as it won't be possible in Odoo anymore.

Accounts created before
[October 2020](https://support.google.com/analytics/answer/11583832)
should still be using **Universal Analytics** and be able to integrate
their dashboard on external website until the official end of support
[around mid
2023](https://developers.googleblog.com/2022/03/gis-jsweb-authz-migration.html).

</div>

You can follow your traffic statistics straight from your Odoo Website
Dashboard thanks to Google Analytics.

  - A preliminary step is creating a Google Analytics account and
    entering the tracking ID in your Website's settings (see
    `google_analytics`).
  - Go to [Google APIs platform](https://console.developers.google.com)
    to generate Analytics API credentials. Log in with your Google
    account.
  - Select Analytics API.

![image](google_analytics_dashboard/google_analytics_api.png)

  - Create a new project and give it a name (e.g. Odoo). This project is
    needed to store your API credentials.

![image](google_analytics_dashboard/google_analytics_create_project.png)

  - Enable the API.

![image](google_analytics_dashboard/google_analytics_enable.png)

  - Create credentials to use in Odoo.

![image](google_analytics_dashboard/google_analytics_create_credentials.png)

  - Select *Web browser (Javascript)* as calling source and *User data*
    as kind of data.

![image](google_analytics_dashboard/google_analytics_get_credentials.png)

  - Then you can create a Client ID. Enter the name of the application
    (e.g. Odoo) and the allowed pages on which you will be redirected.
    The *Authorized JavaScript origin* is your Odoo's instance URL. The
    *Authorized redirect URI* is your Odoo's instance URL followed by
    '/google\_account/authentication'.

![image](google_analytics_dashboard/google_analytics_authorization.png)

  - Go through the Consent Screen step by entering a product name (e.g.
    Google Analytics in Odoo). Feel free to check the customizations
    options but this is not mandatory. The Consent Screen will only show
    up when you enter the Client ID in Odoo for the first time.
  - Finally you are provided with your Client ID. Copy and paste it in
    Odoo.

![image](google_analytics_dashboard/google_analytics_client_id.png)

  - Open your Website Dashboard in Odoo and link your Analytics account
    to past your Client ID.

![image](google_analytics_dashboard/google_analytics_start.png)

  - As a last step, authorize Odoo to access Google API.

![image](google_analytics_dashboard/google_analytics_login.png)


---
## File: ./content/applications/websites/website/reporting/google_analytics.md

# How to track your website's traffic in Google Analytics

<div class="warning">

<div class="title">

Warning

</div>

Google deprecated **Universal Analytics** which won't be supported
anymore in
[July 2023](https://support.google.com/analytics/answer/11583528). They
are replacing it with **Analytics 4**.

New accounts are already using it, but accounts created before
[October 2020](https://support.google.com/analytics/answer/11583832) are
most likely still using **Universal Analytics**.

Odoo 15.0 is already adapted and ready for **Analytics 4**. After July
2023, if you want to use Google Analytics tracking in versions before
15.0, you will need to insert the GA tracker code manually, instead of
entering your GA key in the Odoo settings.

</div>

To follow your website's traffic with Google Analytics:

  - [Create a Google Analytics
    account](https://www.google.com/analytics/) if you don't have any.

  - Go through the creation form and accept the conditions to get the
    tracking ID.
    
    > ![image](google_analytics/google_analytics_account.png)

  - Copy the tracking ID to insert it in Odoo.
    
    > ![image](google_analytics/google_analytics_tracking_id.png)

  - Go to the *Configuration* menu of your Odoo's Website app. In the
    settings, turn on Google Analytics and paste the tracking ID. Then
    save the page.
    
    > ![image](google_analytics/google_analytics_settings.png)

To make your first steps in Google Analytics, refer to [Google
Documentation](https://support.google.com/analytics/answer/1008015?hl=en/).

<div class="seealso">

  - `google_analytics_dashboard`

</div>


---
## File: ./content/applications/websites/website/reporting/link_tracker.md

# Link trackers

Link Trackers allow you to track your marketing campaigns (emails,
banner ads, blog posts, social media posts, affiliate links, etc.). This
way, you are able to identify your best traffic sources and make
informed decisions about the distribution of your marketing budget.

## Configuration

Go to `Website --> Configuration --> Settings` and activate *Link
Trackers*.

![View of Website settings page emphasizing the link trackers field in
Odoo Website](link_tracker/enable_link_tracker.png)

### Set up traceable URLs

Go to `Website --> Go to website --> Promote --> Track this page`. Here,
you are able to get a specific tracked URL based on the campaign,
medium, and source being used.

![View of the link tracker fields for Odoo
Website](link_tracker/link_tracker_fields.png)

  - **URL**: url of the page you want to track (e.g. the home page or a
    product's page).
  - **Campaign**: context of your link (e.g. a special promotion).
  - **Medium**: channel used to share (deliver) your link (e.g. an email
    or a Facebook ad).
  - **Source**: platform where the traffic originates (e.g. Google or
    Twitter).

Now, click on *Get tracked link* to generate a URL that you can post or
send by the source you have decided on.

## Follow-up on tracked links

To look at statistics of your links, go to `Website --> Go to website
--> Promote
--> Track this page`. Besides being able to see the *Most Clicked* and
*Recently Used* links, you can also see complete statistics by clicking
on *Stats*, including the number of clicks, and the country of origin
for those clicks.

![View of the tracked list emphasizing the statistics buttons in Odoo
Website](link_tracker/links_statistics.png)

<div class="tip">

<div class="title">

Tip

</div>

1.  You can also access the link tracker on *odoo.com/r* via your
    browser.
2.  Activate the developer mode (`Settings --> Activate the developer
    mode`) and get access to the *Link Tracker* module and its back-end
    functionalities.
3.  Integrated with `Google Analytics <google_analytics>`, those
    trackers allow you to see the number of clicks and visitors to keep
    you on top of your marketing campaigns.
4.  The integration with the `CRM
    </applications/sales/crm/track_leads/prospect_visits>` application
    allows you to understand where your leads and opportunities are
    coming from.

</div>


---
## File: ./content/applications/websites/website/configuration/on-premise_geo-ip-installation.md

# Geo IP Installation (On-Premises Database)

## Installation

<div class="warning">

<div class="title">

Warning

</div>

Please note that the installation depends on your computer's operating
system and distribution. We will assume that a Linux operating system is
being used.

</div>

1.    - Install [geoip2](https://pypi.org/project/geoip2/) Python
        library
        
        ``` bash
        pip install geoip2
        ```

2.  Download the [GeoLite2 City
    database](https://dev.maxmind.com/geoip/geoip2/geolite2/). You
    should end up with a file called `GeoLite2-City.mmdb`

3.    - Move the file to the folder `/usr/share/GeoIP/`
        
        ``` bash
        mv ~/Downloads/GeoLite2-City.mmdb /usr/share/GeoIP/
        ```

4.  Restart the server

<div class="note">

<div class="title">

Note

</div>

If you can't/don't want to locate the geoip database in
`/usr/share/GeoIP/`, you can use the `--geoip-db` option of the Odoo
command line interface. This option takes the absolute path to the GeoIP
database file and uses it as the GeoIP database. For example:

``` bash
./odoo-bin --geoip-db= ~/Downloads/GeoLite2-City.mmdb
```

<div class="seealso">

\- `CLI documentation </developer/reference/cli>`.

</div>

</div>

<div class="warning">

<div class="title">

Warning

</div>

`GeoIP` Python library can also be used. However this version is
discontinued since January 1. See [GeoLite Legacy databases are now
discontinued](https://support.maxmind.com/geolite-legacy-discontinuation-notice/)

</div>

## How To Test GeoIP Geolocation In Your Odoo Website

1.  Go to your website. Open the web page that you want to test `GeoIP`.
2.  Choose `Customize --> HTML/CSS/JS Editor`.
3.  Add the following piece of XML in the page :

<!-- end list -->

``` xml
<h1 class="text-center" t-esc="request.session.get('geoip')"/>
```

You should end up with a dictionary indicating the location of the IP
address.

![image](on-premise_geo-ip-installation/on-premise_geo-ip-installation01.png)

<div class="note">

<div class="title">

Note

</div>

If the curly braces are empty `{}`, it can be for any of the following
reasons :

  - The browsing IP address is the localhost (`127.0.0.1`) or a local
    area network one (`192.168.*.*`)
  - If a reversed proxy is used, make sure to configure it correctly.
    See `proxy mode
    <odoo-bin --proxy-mode>`
  - `geoip2` is not installed or the GeoIP database file wasn't found
  - The GeoIP database was unable to resolve the given IP address

</div>


---
## File: ./content/applications/websites/website/configuration/multi_website.md

# Multiple websites

![image](multi_website/multi_website04.png)

Odoo’s Multi-Websites opens up broad possibilities of diversification
and customer segmentation for your business. A multiplied audience and
boosted revenue are now just a few clicks away\!

Each website can work in a fully independent way, with its theme,
branding, domain name, header & footer, pages, languages, products, blog
posts, forum, slides, events, live chat channels, etc. Let’s go for a
tour\!

## Setup

To create a new website, go to `Website --> Configuration --> Settings`.
The button, *Create a new website*, lays in the first section.

![image](multi_website/multi_website05.png)

In the upcoming prompt, set a name for your new website and a specific
domain name. Leave empty to publish the new website under the default
domain of your Odoo database. You can later set some country groups to
redirect visitors to it using Geo IP.

![image](multi_website/multi_website01.png)

Then, select a theme. This new website might have an entirely different
purpose or audience than the first one. So feel free to go for a
different theme\!

Once the theme is selected, you can start to build the homepage of your
website. Follow the purple drops; they will help you in the first steps.

![image](multi_website/multi_website08.png)

<div class="note">

<div class="title">

Note

</div>

If you run Odoo Online, don’t forget to redirect any new domain name to
your Odoo database (`CNAME`) and to authorize it Odoo-side. See
`domain-name/existing`.

</div>

## Create the menu

The new website has a default menu with all the installed applications.
To edit it, click `Pages --> Edit Menu`. Moving forward you only edit
the menu of the current website.

## Switch from one website to another

As easy as ABC\! There is a website switcher in the right corner of the
edit bar. Switching to another website will connect to the domain of
this website. If you use another domain for the website, the user is
requested to sign in.

![image](multi_website/multi_website03.png)

<div class="note">

<div class="title">

Note

</div>

When switching, you are redirected to the same domain path on the other
website (e.g., `/shop/myproduct`). If this URL is not used, you will be
redirected to a 404 page but prompted to create a new page from there.

</div>

## Add features

The website apps you install (e.g., Slides, Blogs) are made available on
all your websites. You can, of course, keep them hidden in one website
by removing the menu item.

Each website comes with a high range of specific options in the
settings. First, select the website to configure.

![image](multi_website/multi_website15.png)

Then, take a look at the options flagged with the earth icon. It means
they only impact the very website you are working on.

![image](multi_website/multi_website12.png)

You can, for instance, set specific :

  - languages,
  - domain names,
  - social media links,
  - customer portal mode (B2C vs. B2B),
  - dedicated live chat channels,
  - etc.

The other options are global and apply to all your websites.

## Manage domain names

As said earlier, your websites can either share the same domain name or
use a specific one. If you share it and want to adapt the content per
region, set country groups in the setting of each website. Visitors will
be redirected to the right website using GeoIP.

![image](multi_website/multi_website18.png)

<div class="note">

<div class="title">

Note

</div>

Geo IP is installed by default in Odoo Online. If you run Odoo
on-premise, don’t forget to install *GeoIP* library. See
`on-premise_geo-ip-installation`

</div>

<div class="seealso">

\- `/administration/maintain/domain_names`

</div>

If you setup an extra website and specify the domain name you will have
to do three things to get this feature to work:

1.  Setup an A-record in the DNS configuration of your hosting provider
    so that "www.mywebsite2.ext" is redirected to the IP of your Odoo
    instance.
2.  Create an extra Nginx `server` block in which you set the
    `server_name` that you've set in the `Website domain` field.
3.  Reload and restart your Nginx instance to use the new `server`
    block.

## Customize the visitor experience

The customer experience can be customized very profoundly thanks to the
menu \*Customize\*. All the visual options available there are specific
to each website. Go through the different pages to adapt them to this
new audience. Focus on workflows, and automatic pages (eCommerce
checkout, blogs, events, etc.) as the number of available options is
higher there.

![image](multi_website/multi_website14.png)

### Publish specific content per website

Like static pages, any content created from the front-end (product, blog
post, etc.) is always only published in the current website. You can
change that from the edit form view in the backend and leave the
*Website* field blank. This will publish it in all the websites.

![image](multi_website/multi_website06.png)

Here are all the objects that you can link to *either one or all the
websites*:

1.  Products
2.  Product Categories for eCommerce
3.  Blogs
4.  Slide Channels
5.  Forums
6.  Events
7.  Job Positions

<div class="note">

<div class="title">

Note

</div>

When you create the record from the backend and publish it, typically a
product or an event, it is made available in all websites.

</div>

### Publish a page in all websites

A new static page is created and only made available in the current
website. You can duplicate it to other websites from `Website -->
Configuration --> Pages`. To do so, leave the *Website* field empty.

If you want to duplicate it in just one other website, duplicate the
page and set the new website.

![image](multi_website/multi_website09.png)

When you edit the page again, the change only affects the current
website. A new page is duplicated and tied up to the website. The
original page still being linked to all websites.

<div class="tip">

<div class="title">

Tip

</div>

By grouping pages by URL in the page manager, you quickly find the
original page behind each edited page.

</div>

![image](multi_website/multi_website10.png)

## Multi-companies

Each website can be linked to a specific company of your system, in a
multi-companies environment.

![image](multi_website/multi_website16.png)

With such a configuration, only company-related data appear on the
website (products, jobs, events, etc.).

Website editors can only view and edit the pages of the records they
have access to, typically the ones belonging to their current company
(and to their subsidiaries, or child companies in Odoo language). And so
is it for visitors.

<div class="note">

<div class="title">

Note

</div>

If websites are multi-companies, you don’t change company when switching
websites. To change the company and see the related content, use the
company selector in the menu.

</div>

![image](multi_website/multi_website02.png)

## Configure your eCommerce website

eCommerce is a crucial feature in the multi-websites environment. We
made it so that the entire flow can be customized to fit the very
audience of each website.

### Products only available on one website

We already saw earlier how to publish a specific record in only one
website. You will find the \*Website\* field in the eCommerce tab of the
product edit form. Empty means available in all websites.

![image](multi_website/multi_website13.png)

### Products available on *some* websites

To make a product available on some websites, but not all of them, you
should duplicate the product for each website.

If you need a unique reference to manage in your inventory, you should
install *Manufacturingand create*Kits\* BoMs (bills of materials). Each
kit will link each published “virtual” product to the main reference
managed in your inventory. That way, any item sold from your website
will be converted into the storable item in the delivery order.

### Pricelists

To manage specific prices by websites, you can activate *Multiple Sales
Prices per Product* in Website settings.

Then, go to `Website --> Products --> Pricelists` to create additional
pricelists. You can also choose to have a pricelist available *only* on
a specific website.

<div class="seealso">

`../../ecommerce/maximizing_revenue/pricing`.

</div>

![image](multi_website/multi_website07.png)

Leaving the field empty means that you make it work in all websites if
*Selectable* is selected. Otherwise, it makes it only available for
backend operations of Sales and Point of Sale applications.

### Payment Acquirers and Delivery Methods

By default, published payment acquirers and delivery methods are
deployed in all websites. You could already use specific payment
acquirers per country using Geo IP by defining countries in their
configuration. Now you can also do it per website by filling in the
*Website* field.

### Customer accounts

There is a setting to choose how to manage customer accounts in Website
settings. You can either allow customers to use one account through all
the websites or compel them to create one account for each website. This
last option is convenient if your websites shouldn’t be related to each
other in the visitor mind.

![image](multi_website/multi_website17.png)

## Technical hints for customization

If you want to publish custom objects on the website, here are a few
tips to make it work with multi websites:

  -   - Sitemap: don’t forget the domain in the route to only publish  
        available records in each website’s sitemap.

  -   - Access: you should call the method  
        *can\_access\_from\_current\_website* in the controller to make
        sure the visitor can see a record in the current website.

  -   - Search: when a list of records is displayed, don’t forget to
        specify  
        the domain to only display records available for the current
        website.

![image](multi_website/multi_website11.png)


---
## File: ./content/applications/websites/website/configuration/unsplash.md

# Unsplash (free images)

## Generate an Unsplash access key

<div class="tip">

<div class="title">

Tip

</div>

**As an Odoo Online user**, you are ready to use Unsplash. You won't
need to follow this guide to set up Unsplash information since you will
use our own Odoo Unsplash key in a transparent way.

</div>

### Generate an Unsplash access key for non-Odoo Online users

  - Create an account on [Unsplash.com](https://unsplash.com/join).
  - Go to your [applications
    dashboard](https://unsplash.com/oauth/applications) and click on
    **New Application**.

![image](unsplash/create_app.png)

  - Accept the conditions and click on **Accept terms**.

![image](unsplash/accept_terms.png)

  - You will be prompted to insert an **Application name** and a
    **Description**. Please prefix your application name by "**Odoo:** "
    so that Unsplash can recognize it as an Odoo instance. Once done,
    click on **Create application**.

![image](unsplash/app_infos.png)

  - You should be redirected to your application details page. Scroll
    down a bit to find your **access key**.

![image](unsplash/access_key.png)

<div class="warning">

<div class="title">

Warning

</div>

**As a non-Odoo Online user**, you won't be able to register for a
production Unsplash key and will be limited to your test key that has a
restriction of 50 Unsplash requests per hour.

</div>

## Generate an Unsplash application ID

<div class="tip">

<div class="title">

Tip

</div>

You should first create and set up your Unsplash application.

</div>

  - Go to your [applications
    dashboard](https://unsplash.com/oauth/applications) and click on
    your newly created Unsplash application under **Your applications**.

![image](unsplash/select_app.png)

  - You will be redirected to your application details page. The
    **application ID** will be visible in your browser's URL. The URL
    should be something like
    `https://unsplash.com/oauth/applications/<application_id>`

![image](unsplash/app_id_url.png)

<div class="warning">

<div class="title">

Warning

</div>

**As a non-Odoo Online user**, you won't be able to register for a
production Unsplash key and will be limited to your test key that has a
50 Unsplash requests per hour restriction.

</div>


---
## File: ./content/applications/websites/website/configuration/translate.md

# Translations

In addition to creating great modern websites, Odoo gives you the
possibility to translate it in different languages.

## Process

Once your website is created, you have the opportunity to translate it
in as many different languages as you want.

You can only translate your website manually, follow the next step.

Now go to your website. On the bottom right corner of the page, click on
**Add a language**.

![image](translate/translate_website01.png)

Choose the language in which you want to translate your website and then
click on **Load.**

![image](translate/translate_website02.png)

You will see that Now, next to English there is also French, which means
that the page for the translation has been created. You can also see
that some of the text has been translated automatically.

![image](translate/translate_website03.png)

To translate the content of the website, click on **Translate** (here
**Traduire** since we want to translate the website in French).


---
## File: ./content/applications/websites/website/pages.md

  - nosearch

# Pages

<div class="toctree" data-titlesonly="">

pages/seo

</div>


---
## File: ./content/applications/websites/website/reporting.md

  - nosearch

# Reporting

<div class="toctree" data-titlesonly="">

reporting/link\_tracker reporting/google\_analytics
reporting/google\_analytics\_dashboard

</div>


---
## File: ./content/applications/websites/website/configuration.md

  - nosearch

# Configuration

<div class="toctree" data-titlesonly="">

configuration/translate configuration/multi\_website
configuration/unsplash configuration/on-premise\_geo-ip-installation

</div>


---
## File: ./content/applications/websites/website/pages/seo.md

# Search Engine Optimisation (SEO)

Search Engine Optimization (SEO) is a set of good practices to optimize
your website so that you get a better ranking in search engines like
Google. In short, a good SEO allows you to get more visitors.

Some examples of SEO rules: your web pages should load fast, your page
should have one and only one title `<h1>`, meta tags (alt-tag,
title-tag) should be consistent with the content, your website should
have a `/sitemap.xml` file, etc.

To guarantee Odoo Website and Odoo eCommerce users have a great SEO,
Odoo abstracts all the technical complexities of SEO and handles
everything for you, in the best possible way. This will be explained
here below.

But first, let see how you can easily boost your ranking by finetuning
the content and the meta tags of your website.

## Meta Tags

### Title, Description

Every web page should define the `<title>` and `<description>` meta
data. These information elements are used by search engines to promote
your website. They are automatically generated based on page title &
content, but you can finetune them. Make sure they fit the content of
the page, otherwise you will be downgraded by search engines.

![image](seo/seo01.png)

### Keywords

In order to write quality content and boost your traffic, Odoo provides
a `<keyword>` finder. Those keywords are the searches you want to head
towards your website. For each keyword, you see how it is used in the
content (H1, H2, page title, page description, page content) and what
are the related searches in Google. The more keywords are used the
better.

![image](seo/seo02.png)

<div class="note">

<div class="title">

Note

</div>

If your website is in multiple languages, you can use the Promote tool
for every language of a single page and set specific title, description
and search tags.

</div>

## Content is King

When it comes to SEO, content is usually king. Odoo provides several
modules to help you build your website content:

  - **Odoo Blogs**: write great contents.
  - **Odoo Slides**: publish all your Powerpoint or PDF presentations.
    Their content is automatically indexed on the web page. Example:
    [odoo.com/slides/public-channel-1](https://www.odoo.com/slides/public-channel-1)
  - **Odoo Forum**: let your community create contents for you. Example:
    [odoo.com/forum/1](https://odoo.com/forum/1) (accounts for 30% of
    Odoo.com landing pages)
  - **Odoo Mailing List Archive**: publish mailing list archives on your
    website. Example:
    [odoo.com/groups/community-59](https://www.odoo.com/groups/community-59)
    (1000 pages created per month)

<div class="note">

<div class="title">

Note

</div>

The 404 page is a regular page, that you can edit like any other page in
Odoo. That way, you can build a great 404 page to redirect to the top
content of your website when visitors get lost in invalid URLs.

</div>

## Use Social Networks

Social media is built for mass sharing. If lots of people share your
content on social media, then it's likely more people will link to it,
and links are a huge factor for SEO ranking.

Odoo embeds several tools to share content through social media:

### Social Network

Odoo allows to link all your social network accounts in your website
footer. All you have to do is to refer all your accounts in your company
settings.

![image](seo/seo03.png)

### Social Share

Drop the building block *Share* on any page you want your visitors to
share. By clicking the icon, they are prompted to share the page in
their social media wall.

![image](seo/seo04.png)

Most social media use a picture of the picture to decorate the share
post. Odoo uses the website logo by default but you can choose any other
image of your page in the Promote tool.

![image](seo/seo05.png)

### Facebook Page

Drop the building block *Facebook Page* to display a widget of your
Facebook business page and encourage visitors to follow it. You can
display the timeline, the next events and the messages.

### Twitter Scroller

Display the Twitter feeds with customer satifaction on your website.
This will increase the number of tweets and shares.

## Test Your Website

You can compare how your website rank, in terms of SEO, against Odoo
using WooRank free services: [woorank.com](https://www.woorank.com)

## URLs Handling

This section sheds some light on how Odoo makes URLs SEO-friendly.

### URLs Structure

A typical Odoo URL will look like this:

  - <https://www.mysite.com/fr\_FR/shop/product/my-great-product-31>

With the following components:

  - **https://** = Protocol
  - **www.mysite.com** = your domain name
  - **/fr\_FR** = page language. This part of the URL is removed if the
    visitor browses the main language of the website Thus, the main
    version of this page is:
    <https://www.mysite.com/shop/product/my-great-product-31>
  - **/shop/product** = every module defines its own namespace (/shop is
    for the catalog of the eCommerce module, /shop/product is for a
    product page).
  - **my-great-product** = by default, this is the slugified title of
    the product this page refers to. But you can customize it for SEO
    purposes. A product named "Pain carré" will be slugified to
    "pain-carre". Depending on the namespace, this could be different
    objects (blog post, page title, forum post, forum comment, product
    category, etc.).
  - **-31** = the unique ID of the product

Note that any dynamic component of an URL can be reduced to its ID. As
an example, the following URLs all do a 301 redirect to the above URL:

  - <https://www.mysite.com/fr\_FR/shop/product/31> (short version)
  - <http://mysite.com/fr\_FR/shop/product/31> (even shorter version)
  - <http://mysite.com/fr\_FR/shop/product/other-product-name-31> (old
    product name)

Some URLs have several dynamic parts, like this one (a blog category and
a post):

  - <https://www.odoo.com/blog/company-news-5/post/the-odoo-story-56>

In the above example:

  - *Company News* is the title of the blog
  - *The Odoo Story* is the title of a specific blog post

When an Odoo page has a pager, the page number is set directly in the
URL (does not have a GET argument). This allows every page to be indexed
by search engines. Example:

  - <https://www.odoo.com/blog/page/3>

### Changes in URLs & Titles

When the URL of a page changes (e.g. a more SEO friendly version of your
product name), you don't have to worry about updating all links:

  - Odoo will automatically update all its links to the new URL.
  - If external websites still points to the old URL, a 301 redirect
    will be done to route visitors to the new address of the page.

As an example, this URL:

  - <http://mysite.com/shop/product/old-product-name-31>

Will automatically redirect to:

  - <http://mysite.com/shop/product/new-and-better-product-name-31>

In short, just change the title of a blog post or the name of a product,
and the changes will apply automatically everywhere in your website. The
old link still functions when used by external websites, via a 301
redirect, maintaining the SEO link juice.

### HTTPS

Search engines boost ranking of secure HTTPS/SSL websites. So, by
default all Odoo Online instances are fully based on HTTPS. If the
visitor accesses your website through a non HTTPS url, it gets a 301
redirect to its HTTPS equivalent.

### Links: Nofollow Strategy

The more a page is linked from external and quality websites, the better
it is for your SEO.

Here are Odoo strategies to manage links:

  - Every link you add to your website is "dofollow", which means that
    this link will contribute to the SEO Juice for the linked page.
  - Every link posted by a contributor (forum post, blog comment, etc.)
    that links to your own website is "dofollow" too.
  - But every link posted by a contributor that links to an external
    website is "nofollow". In that way, you do not run the risk of
    people posting links on your website to third-party websites which
    have a bad reputation.
  - Note that, when using the forum, contributors having a lot of Karma
    can be trusted. In such case, their links will not have any
    `rel="nofollow"` attribute.

## Multi-Language Support

### Multi-Language URLs

If you run a website in multiple languages, the same content will be
available in different URLs, depending on the language used:

  - <https://www.mywebsite.com/shop/product/my-product-1> (main
    language, English here)
  - <https://www.mywebsite.com\/fr\_FR/shop/product/mon-produit-1>
    (French version)

In this example, fr\_FR is the language of the page. You can even have
several variations of the same language: pt\_BR (Portuguese from Brazil)
, pt\_PT (Portuguese from Portugal).

### Language Annotation

To let search engines know that the second URL is the French translation
of the first URL, Odoo will add an HTML link element in the header. In
the HTML \<head\> section of the main version, Odoo automatically adds a
link element pointing to the translated versions of that webpage;

  - \<link rel="alternate" hreflang="fr"
    href="[https://www.mywebsite.com\\/fr\\\_FR/shop/product/mon-produit-1"/](https://www.mywebsite.com\\/fr\\_FR/shop/product/mon-produit-1%22/)\>

With this approach:

  - Search engines will redirect to the right language according to the
    visitor language.
  - You do not get penalized by search engines if your page is not
    translated yet. Indeed, it's not a duplicated content, but a
    different version of the same content.

### Language Detection

When a visitor lands for the first time on your website (e.g.
yourwebsite.com/shop), they may automatically be redirected to a
translated version according to their browser language preference (e.g.
yourwebsite.com/fr\_FR/shop).

Next time, it keeps a cookie of the current language to avoid any
redirection.

To force a visitor to stick to the default language, you can use the
code of the default language in your link, example:
yourwebsite.com/en\_US/shop. This will always land visitors to the
English version of the page, without using the browser language
preferences.

## Page Speed

### Introduction

The time to load a page is an important criteria for search engines. A
faster website not only improves your visitor's experience, but gives
you a better page ranking. Some studies have shown that, if you divide
the time to load your pages by two (e.g. 2 seconds instead of 4
seconds), the visitor abandonment rate is also divided by two. (25% to
12.5%). One extra second to load a page could [cost $1.6b to Amazon in
sales](http://www.fastcompany.com/1825005/how-one-second-could-cost-amazon-16-billion-sales).

![image](seo/seo06.png)

Fortunately, Odoo does all the magic for you. Below, you will find the
tricks Odoo uses to speed up your page loading time. You can compare how
your website ranks using these two tools:

  - [Google Page
    Speed](https://developers.google.com/speed/pagespeed/insights/)
  - [Pingdom Website Speed Test](http://tools.pingdom.com/fpt/)

### Images

When you upload new images, Odoo automatically compresses them to reduce
their sizes (lossless compression for .PNG and .GIF and lossy
compression for .JPG).

From the upload button, you have the option to keep the original image
unmodified if you prefer to optimize the quality of the image rather
than performance.

![image](seo/seo07.png)

<div class="note">

<div class="title">

Note

</div>

Odoo compresses images when they are uploaded to your website, not when
requested by the visitor. Thus, it's possible that, if you use a
third-party theme, it will provide images that are not compressed
efficiently. But all images used in Odoo official themes have been
compressed by default.

</div>

When you click on an image, Odoo shows you the Alt and title attributes
of the `<img>` tag. You can click on it to set your own title and Alt
attributes for the image.

![image](seo/seo08.png)

When you click on this link, the following window will appear:

![image](seo/seo09.png)

Odoo's pictograms are implemented using a font ([Font
Awesome](https://fortawesome.github.io/Font-Awesome/icons/) in most Odoo
themes). Thus, you can use as many pictograms as you want in your page,
they will not result in extra requests to load the page.

![image](seo/seo10.png)

### Static Resources: CSS

All CSS files are pre-processed, concatenated, minified, compressed and
cached (server-side and browser-side). The result:

  - only one CSS file request is needed to load a page
  - this CSS file is shared and cached amongst pages, so that when the
    visitor clicks on another page, the browser doesn't have to even
    load a single CSS resource.
  - this CSS file is optimized to be small

**Pre-processed:** The CSS framework used by Odoo is Bootstrap. Although
a theme might use another framework, most of [Odoo
themes](https://www.odoo.com/apps/themes) extend and customize Bootstrap
directly. Since Odoo supports Less and Sass, you can modify CSS rules
instead of overwriting them through extra CSS lines, resulting in a
smaller file.

**Concatenated:** every module or library you might use in Odoo has its
own set of CSS, Less or Sass files (eCommerce, blogs, themes, etc.).
Having several CSS files is great for the modularity, but not good for
the performance because most browsers can only perform 6 requests in
parallel resulting in lots of files loaded in series. The latency time
to transfer a file is usually much longer than the actual data transfer
time, for small files like .JS and .CSS. Thus, the time to load CSS
resources depends more on the number of requests to be done than the
actual file size.

To address this issue, all CSS / Less / Sass files are concatenated into
a single .CSS file to send to the browser. So a visitor has **only one
.CSS file to load** per page, which is particularly efficient. As the
CSS is shared amongst all pages, when the visitor clicks on another
page, the browser does not even have to load a new CSS file\!

<table>
<thead>
<tr class="header">
<th><strong>Both files in the &lt;head&gt;</strong></th>
<th><strong>What the visitor gets (only one file)</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><blockquote>
<p>/* From bootstrap.css */</p>
</blockquote></td>
<td>.text-muted {</td>
</tr>
<tr class="even">
<td><blockquote>
<p>.text-muted {</p>
</blockquote></td>
<td>color: #666;</td>
</tr>
<tr class="odd">
<td><blockquote>
<p>color: #777;</p>
</blockquote></td>
<td>background: yellow</td>
</tr>
<tr class="even">
<td><blockquote>
<p>background: yellow; }</p>
<p>/* From my-theme.css */ .text-muted { color: #666; }</p>
</blockquote></td>
<td><p>}</p></td>
</tr>
</tbody>
</table>

The CSS sent by Odoo includes all CSS / Less / Sass of all pages /
modules. By doing this, additional page views from the same visitor will
not have to load CSS files at all. But some modules might include huge
CSS/Javascript resources that you do not want to prefetch at the first
page because they are too big. In this case, Odoo splits this resource
into a second bundle that is loaded only when the page using it is
requested. An example of this is the backend that is only loaded when
the visitor logs in and accesses the backend (/web).

<div class="note">

<div class="title">

Note

</div>

If the CSS file is very big, Odoo will split it into two smaller files
to avoid the 4095 selectors limit per sheet of Internet Explorer. But
most themes fit below this limit.

</div>

**Minified:** After being pre-processed and concatenated, the resulting
CSS is minified to reduce its size.

<table>
<thead>
<tr class="header">
<th><strong>Before minification</strong></th>
<th><strong>After minification</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><blockquote>
<p>/* some comments */ .text-muted { color: #666; }</p>
</blockquote></td>
<td><blockquote>
<p>.text-muted {color: #666}</p>
</blockquote></td>
</tr>
</tbody>
</table>

The final result is then compressed, before being delivered to the
browser.

Then, a cached version is stored server-side (so we do not have to
pre-process, concatenate, minify at every request) and browser-side (so
the same visitor will load the CSS only once for all pages they visit).

### Static Resources: Javascript

As with CSS resources, Javascript resources are also concatenated,
minified, compressed and cached (server-side and browser-side).

Odoo creates three Javascript bundles:

  - One for all pages of the website (including code for parallax
    effects, form validation, etc.)
  - One for common Javascript code shared among frontend and backend
    (Bootstrap)
  - One for backend specific Javascript code (Odoo Web Client interface
    for your employees using Odoo)

Most visitors of your website will only need the first two bundles,
resulting in a maximum of two Javascript files to load to render one
page. As these files are shared across all pages, further clicks by the
same visitor will not load any other Javascript resource.

<div class="note">

<div class="title">

Note

</div>

If you work on `developer mode <developer-mode>`, the CSS and Javascript
are neither concatenated, nor minified. Thus, it's much slower. But it
allows you to easily debug with the Chrome debugger as CSS and
Javascript resources are not transformed from their original versions.

</div>

### CDN

If you activate the CDN feature in Odoo, static resources (Javascript,
CSS, images) are loaded from a Content Delivery Network. Using a Content
Delivery Network has three advantages:

  - Load resources from a nearby server (most CDN have servers in main
    countries around the globe)
  - Cache resources efficiently (no computation resources usage on your
    own server)
  - Split the resource loading on different services allowing to load
    more resources in parallel (since the Chrome limit of 6 parallel
    requests is by domain)

You can configure your CDN options from the **Website Admin** app, using
the Configuration menu. Here is an example of configuration you can use:

![image](seo/seo11.png)

### HTML Pages

The HTML pages can be compressed, but this is usually handled by your
web server (NGINX or Apache).

The Odoo Website builder has been optimized to guarantee clean and short
HTML code. Building blocks have been developed to produce clean HTML
code, usually using Bootstrap and the HTML editor.

As an example, if you use the color picker to change the color of a
paragraph to the primary color of your website, Odoo will produce the
following code:

`<p class="text-primary">My Text</p>`

Whereas most HTML editors (such as CKEditor) will produce the following
code:

`<p style="color: #AB0201">My Text</p>`

### Responsive Design

Websites that are not mobile-friendly are negatively impacted in search
engine rankings. All Odoo themes rely on Bootstrap to render efficiently
according to the device: desktop, tablet or mobile.

![image](seo/seo12.png)

As all Odoo modules share the same technology, absolutely all pages in
your website are mobile friendly.

### Browser Caching

Javascript, images and CSS resources have an URL that changes
dynamically when their content change. As an example, all CSS files are
loaded through this URL:
[localhost:8069/web/content/457-0da1d9d/web.assets\_common.0.css](http://localhost:8069/web/content/457-0da1d9d/web.assets_common.0.css).
The `457-0da1d9d` part of this URL will change if you modify the CSS of
your website.

This allows Odoo to set a very long cache delay (XXX) on these
resources: XXX secs, while being updated instantly if you update the
resource.

### Scalability

In addition to being fast, Odoo is also more scalable than traditional
CMS and eCommerce (Drupal, Wordpress, Magento, Prestashop).

Here is the slide that summarizes the scalability of Odoo Website &
eCommerce.

![image](seo/seo13.png)

## Search Engines Files

### Sitemap

The sitemap points out pages to index to search engine robots. Odoo
generates a `/sitemap.xml` file automatically for you. For performance
reasons, this file is cached and updated every 12 hours.

By default, all URLs will be in a single `/sitemap.xml` file, but if you
have a lot of pages, Odoo will automatically create a Sitemap Index
file, respecting the [sitemaps.org
protocol](http://www.sitemaps.org/protocol.html) grouping sitemap URL's
in 45000 chunks per file.

Every sitemap entry has 4 attributes that are computed automatically:

  - `<loc>` : the URL of a page
  - `<lastmod>` : last modification date of the resource, computed
    automatically based on related object. For a page related to a
    product, this could be the last modification date of the product or
    the page.
  - `<priority>` : modules may implement their own priority algorithm
    based on their content (example: a forum might assign a priority
    based on the number of votes on a specific post). The priority of a
    static page is defined by it's priority field, which is normalized
    (16 is the default).

### Structured Data Markup

Structured Data Markup is used to generate Rich Snippets in search
engine results. It is a way for website owners to send structured data
to search engine robots; helping them understand your content and create
well-presented search results.

Google supports a number of rich snippets for content types, including:
Reviews, People, Products, Businesses, Events and Organizations.

Odoo implements micro data as defined in the
[schema.org](http://schema.org) specification for events, eCommerce
products, forum posts and contact addresses. This allows your product
pages to be displayed in Google using extra information like the price
and rating of a product:

![image](seo/seo14.png)

### robots.txt

When indexing your website, search engines take a first look at the
general indexing rules of the `/robots.txt` file (allowed robots,
sitemap path, etc.). Odoo automatically creates it. Its content is:

User-agent: \* Sitemap: <https://www.odoo.com/sitemap.xml>

It means that all robots are allowed to index your website and there is
no other indexing rule than specified in the sitemap to be found at
following address.

You can customize the file *robots* in `developer mode <developer-mode>`
from *Settings --\> Technical --\> User Interface --\> Views* (exclude
robots, exclude some pages, redirect to a custom Sitemap). Make the
Model Data of the view *Non Updatable* to not reset the file after
system upgrades.


---
## File: ./content/applications/websites/website.md

  - nosearch

  - show-content

  - hide-page-toc

  - show-toc

# Website

Discover the best **Open-Source Website Builder** and learn how to build
beautiful websites that convert visitors into leads or revenues.

<div class="important">

<div class="title">

Important

</div>

Odoo offers a `free custom domain name <domain-name/odoo-register>` to
all Odoo Online databases for one year. Visitors can then access your
website with an address such as `www.example.com` rather than the
default `example.odoo.com`.

</div>

<div class="seealso">

\- [Odoo Tutorials: Website](https://www.odoo.com/slides/website-25) -
[Odoo Tutorials: eCommerce](https://www.odoo.com/slides/ecommerce-26)

</div>

<div class="toctree" data-titlesonly="">

website/pages website/configuration website/reporting

</div>


---
## File: ./content/applications/websites/livechat/ratings.md

# Ratings

Giving users the opportunity to rate their interactions can help you
improving the experience you offer. That means staying on top of your
customers' needs, besides keeping track of your operators’ performances.

## Customer Rating

Once the user chooses to close the chat window, he can rate his
interaction.  
If the user is *Not satisfied* or *Highly dissatisfied*, a field
allowing for an explanation is shown.  
A copy of the conversation can also be sent by email.

![View of the chat window from a user’s side for Odoo Live
Chat](ratings/user_chatwindow.png)

The rating is shown on the chat window itself for the operator.

![View of a chat window from an operator’s side highlighting a rating
for Odoo Live Chat](ratings/operator_chatwindow.png)

And under `Report --> Customer Ratings`.

![View of the customer ratings page in Odoo Live
Chat](ratings/customer_ratings.png)

## Make the rating public

Go to `Website --> Configuration --> Settings`, access your channel
form, click on *Go to Website* and on *Unpublished*, to publish the
rating of that channel on your website.

![View of the public ratings in the website for Odoo Live
Chat](ratings/publish_ratings.png)

<div class="seealso">

\- `responses`

</div>


---
## File: ./content/applications/websites/livechat/responses.md

# Commands and Canned Responses

Using canned responses can help you save time and have a previous,
well-thought response, to some of your most common questions and
comments.

## Use commands

Commands are shortcuts that do specific actions within the chat window:

1.  **/help**: shows a help message.
2.  **/helpdesk**: creates a helpdesk ticket.
3.  **/helpdesk\_search**: searches for a helpdesk ticket.
4.  **/history**: shows the last 15 visited pages.
5.  **/lead**: creates a new lead.
6.  **/leave**: leaves the channel.

<div class="important">

<div class="title">

Important

</div>

| - For *helpdesk tickets*: make sure the application is installed on
your database and the option *Live Chat* under `Helpdesk -->
Configuration --> Helpdesk Teams` is enabled. | - For *leads*: the *CRM*
application must be installed on your database.

</div>

To access the ticket or lead created from the chat, click on the
shortcut link.

![View of the chat window with a helpdesk ticket created in Odoo Live
Chat](responses/create_ticket.png)

<div class="tip">

<div class="title">

Tip

</div>

Helpdesk tickets created from the chat automatically add the
conversation as a description of the ticket. The same goes for the
creation of a lead.

</div>

## Send canned responses

Canned responses allow you to have a full piece of text being placed
when you type a shortcut word. To create them, go to `Live Chat -->
Configuration --> Canned Responses`.  
To use them during a conversation, simply type **:** followed by the
shortcut word you created.

![View of a chat window and the use of a canned response in Odoo Live
Chat](responses/canned_response.png)

<div class="seealso">

\- `ratings`

</div>


---
## File: ./content/applications/websites/livechat.md

  - show-content

  - show-toc

# Live Chat

Live Chat has the highest satisfaction rating of any communication tool.
It allows fast responses and it is accessible and convenient, as your
customers can keep doing what they are doing while interacting with you.
Remember: your customers want to talk to you, so let's make it easy.

<div class="seealso">

\- [Live Chat: product page](https://www.odoo.com/app/live-chat) -
`livechat/ratings` - `livechat/responses`

</div>

## Set up

Once *Live Chat* is installed on your database, if your website was
created with Odoo, the application is automatically added to it. All
that is left to do is to go to `Website --> Configuration --> Settings
--> Live Chat`.

![View of the settings page and the live chat feature for Odoo Live
Chat](livechat/livechat_settings.png)

Select the channel to be linked to your website or create one on the
fly.

![View of a live chat channel form for Odoo Live
Chat](livechat/channels.png)

For both scenarios, under:  
\- **Operators**: add agents to respond to the chat requests. Add as
many as you like, and keep in mind that operators that do not show any
activity in Odoo for more than 30min are considered disconnected.  
\- **Options**: set the default text to be shown on the live chat
button; an automated welcome message to be seen by visitors when a
conversation is initiated, and the text that prompts the user to
initiate a chat.  
\- **Channel Rules**: choose an action for a given URL, and/or per
country. In the example below, the chat window automatically pops-up 3
seconds after users (from any country) land on the contact us page.

![View of a channel’s rules form for Odoo Live Chat](livechat/rules.png)

<div class="note">

<div class="title">

Note

</div>

GeoIP, which refers to the process of finding a computer terminal’s
geographical location by its IP address, must be installed on your
server. Otherwise, under *Channel Rules*, countries are not taken into
account.

</div>

### External options

If your website was not created with Odoo, you can find the code to be
added to your own, under the *Widget* tab.  
Odoo also offers an URL you can send to users so they can have access to
a single live chat page.

![View of the widget tab for Odoo Live Chat](livechat/widget.png)

## Managing chat requests

Conversations initiated by visitors pop up as a direct message, and are
shown in *Discuss*. Therefore, inquiries can be answered wherever you
are in Odoo.

![View of the discuss application with a message sent through live chat
in Odoo](livechat/discuss.png)

<div class="note">

<div class="title">

Note

</div>

Conversations are dispatched based on the current workload of the online
operators.

</div>

## Leave or join a channel

Go to `Website --> Configuration --> Settings`, access your channel
under *Live Chat*, and *Join Channel* or *Leave Channel*.

![View of a channel form and the option to join a channel for Odoo Live
Chat](livechat/joinchannel.png)

<div class="toctree" data-titlesonly="">

livechat/ratings livechat/responses

</div>


---
## File: ./content/applications/productivity/studio/concepts.md

  - nosearch

# Concepts

<div class="toctree" data-titlesonly="">

concepts/understanding\_general
concepts/understanding\_automated\_actions

</div>


---
## File: ./content/applications/productivity/studio/how_to.md

  - nosearch

# How To

<div class="toctree" data-titlesonly="">

how\_to/rainbow\_man how\_to/reports how\_to/export\_import

</div>


---
## File: ./content/applications/productivity/studio/use_cases.md

  - nosearch

# Use Cases

<div class="toctree" data-titlesonly="">

use\_cases/models\_fields use\_cases/filters\_status\_bar
use\_cases/automated\_actions use\_cases/views

</div>


---
## File: ./content/applications/productivity/studio/how_to/reports.md

# Customizing Reports

Odoo uses HTML and CSS technologies to create reports. HTML is a markup
language that uses tags, also called elements. It is the core of any
webpage because it provides its basic structure. CSS interacts with HTML
elements to add style to the page, establishing how the HTML is shown to
the user. Odoo’s reports also use Bootstrap’s grid layout, which is the
containers, rows, and columns to align content, and support Odoo's
website themes.  
When creating a new report, choose the purpose of it and if you would
like the report to include header and footer (company logo, name,
address, phone, email address, etc.).

![View of the types of new reports in Odoo
Studio](reports/report_typing.png)

Under the tab **Add**, you find the fields to be dragged and dropped to
the view. *Fields*, *Data tables*, *Subtotal & Total*, and *Address
Book* are dynamic elements (meaning that they need a `one2many or a
many2many <../concepts/understanding_general>` related object). *Text*,
*Title Block*, *Image*, and *Text in Cell* are static elements.

![View of a report and the tab add in Odoo Studio](reports/add_tab.png)

Once the element is added to the view, select it to see its **Options**.
The first section shows the hierarchy of the selected object and its
properties, allowing you to individually edit them. Fields with related
objects have their directives shown on *Field Expression*.

![View of a report and the tab options in Odoo
Studio](reports/options_tab.png)

Under **Visible if**, define the rule(s) to set visibility conditions to
fields.  
Example: if choosing to display a product image, you could set a
visibility rule to only display the ones that are *set* in the product
form, avoiding having a plain icon when they are not set.  
**Visible for** is used to set which `groups
</applications/general/users>` can have access to specific elements in
the report. **Limit visibility to groups**, under *Report*, sets the
visibility of the report to specifics groups, meaning that users
belonging to other groups do not see the same final document.

![View of a report’s settings emphasizing the field limit visibility to
groups in Odoo Studio](reports/limit_visibility.png)

Under the **Report** tab, name your report, choose the paper format, and
if the report should be added to the *Print* menu list on its respective
document form.

![View of an invoice form emphasizing the menu print for Odoo
Studio](reports/print_menu.png)

If activating the `developer mode <developer-mode>`, additional fields
such as *Class* under *Options*, and *Reload from attachment* under
*Report*, become visible.

  - *Class*: add custom CSS classes to the selected element (e.g.
    Bootstrap classes such as *text-danger*).
  - *Reload from attachment*: saves the report as an attachment of the
    document when printed. When the report is reprinted, it re-downloads
    that attachment instead of re-printing it. This means that if the
    underlying record (e.g. Invoice) changes when compared to the first
    impression, the report does not reflect the changes because they
    were done after the attachment was created. This is typically useful
    for reports linked to documents that should not change, such as
    Invoices.

<div class="tip">

<div class="title">

Tip

</div>

Actions in Odoo Studio can be undone until you *Close* the toolbox. Once
you have closed Studio, changes can not be undone anymore.

![View of a report being built and emphasizing the undo and redo buttons
in Odoo Studio](reports/undo_redo.png)

</div>


---
## File: ./content/applications/productivity/studio/how_to/rainbow_man.md

# Customizing the Rainbow Man

The Rainbow Man in Odoo is an animation shown once the user completes
certain tasks and clicks on certain buttons. It is a way to make the
software fun to use, and rewarding, for employees.

![View of a sales form and the tab properties and its rainbow man field
in Odoo Studio](rainbow_man/crm_rainbow.png)

On most buttons in Odoo, such as *Send by Email*, *Confirm* or *Cancel*,
once they are selected in Studio, under their *Properties*, the *Rainbow
Man* effect can be applied.  
By default, the feature is active:

  - when opportunities are marked as won;
  - when users empty their inboxes;
  - when the user finishes a tour;
  - when the user finishes doing reconciliations.

![View of a sales form and the tab properties and its rainbow man field
in Odoo Studio](rainbow_man/properties_rainbow.png)


---
## File: ./content/applications/productivity/studio/how_to/export_import.md

# Export and Import Modules

When you do customizations in Odoo Studio, a new module is created in
your database, making it easy to use Studio for prototyping.

To export these customizations, activate Studio on the main dashboard
and, under the menu *Customizations*, click on *Export*. The default
filename is *customizations.zip*.

![View of the menu customizations in Odoo
Studio](export_import/customizations_menu.png)

The module created contains the definition of custom models and fields,
as well as the UI elements of any customization in an XML format.  
To import and install the customizations in another instance, connect to
the destination database, activate Studio and, under *Customizations*,
click on *Import*.

![View of the import modules window for Odoo
Studio](export_import/import_modules.png)

<div class="warning">

<div class="title">

Warning

</div>

Studio does not know which apps are customized (because the same view
can be modified on different apps), therefore, it *does not* add the
underlying modules as dependencies of the exported module. In other
words, the applications installed on the source database should be
installed on the destination database.

</div>


---
## File: ./content/applications/productivity/studio/concepts/understanding_automated_actions.md

# Understanding Automated Actions

Automated actions are used to trigger actions. They are based on
conditions and happen on top of Odoo’s default business logic.  
Examples of automated actions include: creating a next activity upon a
quote's confirmation; adding a user as a follower of a confirmed invoice
if its total is higher than a certain amount; or preventing a lead from
changing stage if a field is not filled in.

![Flowchart to exemplify an automated action rule for Odoo
Studio](understanding_automated_actions/automated_action_flow.png)

Let's understand how to properly define *when* an automated action runs
and *how* to create one:  
The first step is to choose the `Model <understanding_general>` on which
the action is applied.  
The **Trigger** field defines the event that causes the automated action
to happen:

  - *On Creation*: when a new record is created. Note that the record is
    created once saved for the first time.
  - *On Update*: when the record is updated. Note that the update
    happens once the record is saved.
  - *On Creation & Update*: on the creation and/or on the update of a
    record once the form is saved.
  - *On Deletion*: on the removal of a record under the condition set.
  - *Based on Form Modification*: when the value of the specified
    *Trigger* field is changed in the interface (user sees the changes
    before saving the record). Note that this action can only be used
    with the *Execute Python Code* action type.
  - *Based on Timed Condition*: a delay happens after a specific
    date/time. Set a *Delay after trigger date* if you need a delay to
    happen before the *Trigger Date*. Example: to send a reminder 15min
    before a meeting. If the date/time is not set on the form of the
    model chosen, the date/time considered is the one of the
    creation/update of the record.

For every Trigger option, **conditions** can be applied, such as:

  - *Before Update Domain*: if designated, this condition must be
    satisfied before the record is updated.
  - *Apply on*: if designated, this condition must be satisfied before
    executing the action rule (*Action To Do*), and after the update.

The **Active** option is to be turned off when the rule should be hidden
and not executed.

<div id="studio/automated-actions/actions">

Under **Action To Do** choose the type of server action that must be
executed once records meet the *Trigger* conditions:

</div>

  - *Execute Python Code*: a block of code is executed. A *Help* tab
    with the variables that can be used is available.
  - *Create New Record*: a new record with new values is created.
  - *Update a Record*: updates the record that triggered the action.
  - *Execute several actions*: defines an action that triggers other
    server actions.
  - *Send Email*: an automatic `email
    </applications/general/email_communication/email_template>` is sent.
  - *Add Followers*: followers are notified of changes in the task.
  - *Create Next Activity*: creates an activity such as: *Call*,
    *Email*, *Reminder*.
  - *Send SMS Text Message*: sends an `SMS
    </applications/marketing/sms_marketing/pricing/pricing_and_faq>`.

## Example

This is the process of which the update of the *Email* field on the
Lead/Opportunity *Model*, with a *Trigger Condition* set to *On Update*,
goes through:

![View of an automated action being created in Odoo
Studio](understanding_automated_actions/action_update_lead_example.png)

1.  The user creates the record without an email address set.
2.  The user updates the record defining an email address.
3.  Once the change is saved, the automation checks if any of the
    *Watched Fields* are being updated (for the example: field name
    *email\_from* (Email).
4.  If true, it checks if the record matches the *Before Update Domain*
    (for the example: *email is not set*).
5.  If true, it checks (*after the update*) whether the record matches
    the *Apply on* domain (for the example: *email is set*).
6.  If true, the chosen *Action To Do* is performed on the record.

<div class="seealso">

\- `understanding_general` - `../use_cases/automated_actions`

</div>


---
## File: ./content/applications/productivity/studio/concepts/understanding_general.md

# Understanding General Concepts

Odoo Studio is a toolbox that allows you to add models or adapt
functionalities on top of Odoo’s standard behavior without coding
knowledge. You can also create custom views and modify existing ones
without having to get into the XML code.  
Even for experienced developers, typing out code requires time. By using
Odoo Studio, you can quickly get your models up and going and focus on
the crucial parts of your application. The result is a user-friendly
solution that makes customizations and designing new applications easy
with or without programming skills.

## Getting started

One you start using Odoo Studio, you automatically create a new *module*
that contains all your modifications. These modifications can be done on
existing screens (*views*), by adding new *fields* in existing
applications, or by creating an entirely new *model*.

### What is a Module?

An Odoo **Module** can contain a number of elements, such as: business
objects (models), object views, data files, web controllers, and static
web data. An application is a collection of modules.  
In object-oriented programming, models usually represent a concept from
the real world. Example: Odoo has models for Sales Orders, Users,
Countries, etc. If you were to build an application to manage Real
Estate sales, a model that represents the Properties for sale would
probably be your first step.

![Overview of the main dashboard emphasizing the option to create a new
app in Odoo Studio](understanding_general/new_app.png)

### What is a Model (also called Object)?

A **Model** determines the logical structure of a database and
fundamentally determines in which manner data can be stored, organized,
and manipulated. In other words, a model is a table of information that
can be bridged with other tables.

### What are Fields?

**Fields** compose models. It is where a record (a piece of data) is
registered.  
Example: on the Real Estate application, fields on the Properties model
would include the price, address, a picture, a link to the current
owner, etc.  
There are 2 main types of fields in Odoo: *basic (or scalar) fields* and
*relational fields*.  
Basic fields represent simple values, like numbers or text. Relational
fields represent relations between models. So, if you have a model for
*Customers* and another one for *Properties*, you would use a relational
field to link each Property to its Customer.

#### Relational Fields in detail

**Relational Fields** provide the option to link the data of one model
with the data of another model.  
In Odoo, relational field types are: *One2many*, *Many2one*,
*Many2many*.

![Tables with a visual explanation of related fields for Odoo
Studio](understanding_general/relational_fields.png)

An **One2many** field is a *one-way* direction of selecting *multiple*
records from a table.  
Example: a Sales Order can contain multiple Sales Order Lines, which
also contain multiple fields of information.  
A **Many2one** field is a *one-way* direction of selecting *one* record
from a table.  
Example: you can have many product categories, but each product can only
belong to one category.  
A **Many2many** field is a *two-way* direction of selecting records from
a table.  
Example: multiple tags can be added to a lead’s form.

<div class="note">

<div class="title">

Note

</div>

An *One2many* field must have a *Many2one* related to it.

</div>

### What are Views?

**Views** define how records are displayed. They are specified in XML
which means that they can be edited independently from the models that
they represent. There are various types of views in Odoo, and each of
them represents a mode of visualization. Some examples are: *form*,
*list*, *kanban*.

### What is a Menu?

A **Menu** is a button that executes an action. In Odoo Studio, to
create menus (models) and rearrange their hierarchy, click on *Edit
Menu*.

![Overview of a menu being edit in Odoo
Studio](understanding_general/edit_menu.png)

<div class="seealso">

\- [Studio Basics](https://www.odoo.com/fr_FR/slides/studio-31)

</div>


---
## File: ./content/applications/productivity/studio/use_cases/automated_actions.md

# Advanced Use Cases: Automated Actions

  - **Case scenario 1: when a Belgian lead is created, a 3-stars
    priority should be automatically applied.**

Under *Automations*, click on *Create* and set the following rules:

  - *Model*: Lead/Opportunity
  - *Active*: On
  - *Trigger*: On Creation & Update
  - *Apply on*: Country \> Country Name = Belgium
  - *Action To Do*: Update the Record
  - *Data to Write*: Lead/Opportunity \> Value \> 3

![View of an automated action that sets a high priority to Belgian leads
in Odoo Studio](automated_actions/hight_priority_leads.png)

<div class="tip">

<div class="title">

Tip

</div>

Check `this doc <filters_status_bar>` in order to have another automated
action example.

</div>

<div class="seealso">

\- `../concepts/understanding_automated_actions` -
`../concepts/understanding_general`

</div>


---
## File: ./content/applications/productivity/studio/use_cases/views.md

# Advanced Use Cases: Views

  - **Case scenario 1: in Sales, show orders in a Kanban View instead of
    a List View.**

From the Sales page, access Studio and, under *Views*, set the *Kanban*
option as the default one.

![View of the Kanban option being set as the default one in Odoo
Studio](views/kanban_default.png)

  - **Case scenario 2: allow for the list of leads to be edited inline
    without having to switch to the form view.**

On the *List View*, under *View* \> *Editable*, choose between *New
record on top* or *New record at the bottom*. This way, besides defining
the order in which new records are displayed in the view, you are able
to edit them.  
If the field is left blank, no editing is possible and records are shown
based on your column preferences on the lead's page (front-end).

![View options emphasizing the editable options of a leads page in Odoo
Studio](views/view_editable.png)

<div class="seealso">

\- `../concepts/understanding_general`

</div>


---
## File: ./content/applications/productivity/studio/use_cases/models_fields.md

# Advanced Use Cases: Creating Models and Adding Fields

  - **Case scenario 1: on the leads’ form, if the chosen country is
    France, show a field 'Pay by check?'**

On your leads’ form, add a *Related Field* to *Country \> Country
Name*.  
Now, add a *Checkbox* field and define its invisibility options as
*Country* (carefully select the one just created) *\> is not = \>
France.*  
You can now hide the related field created (*Country*) if you wish.

![View of the invisibility domain of a field being set in Odoo
Studio](models_fields/invisible_domain.png)

Another approach is to use the country’s ID. To do so, go to `Contacts
--> Configuration --> Countries`, select France (for example), and on
the URL check its *ID*.  
The related field invisibility path should now be *Country* (carefully
select the one just created) *\> is not = \> 75*.  
Again, hide the related field with the country’s ID if you prefer.

![View of an URL emphasizing where a country’s ID can be found for Odoo
Studio](models_fields/url_id.png)

  - **Case scenario 2: create a model called 'Properties' and add fields
    called: company, value, name, address, active, image.**

From the dashboard, (optionally) start a new module. Then, click on
*Edit Menu* and start a *New Menu* (model). Set your menu name and
*Confirm*. Now, on its form, drag & drop the necessary fields.

![View of the recommended fields for an object in Odoo
Studio](models_fields/new_menu.png)

  - **Case scenario 2.a: now, you would like to have a model called
    'Regions' to which each property must be linked. And, on 'Regions',
    you would like to see the properties for each region.**

Go to *Edit Menu \> New Menu* and create your menu, calling it
*Regions*. Add the necessary fields on its form by dragging & dropping
them.  
Now, in the form view of *Properties*, add a *Many2one* field with a
relation to your model *Region*.

<div class="tip">

<div class="title">

Tip

</div>

The *Existing Fields* are the ones that are on the current model but not
yet in the view.

![Form view and a Many2one field being dropped in Odoo
Studio](models_fields/new_existing_fields.png)

</div>

![Form view and a Many2one field being dropped in Odoo
Studio](models_fields/real_estate_many2one.png)

Now, go to the model *Regions*, select the form view, and add a status
button selecting *Regions (Properties)* as your relational field.  
*Status buttons* are computed fields, meaning that they count the
numbers of records on the related model, and allow you to access them.

![Form view and the status button window being shown in Odoo
Studio](models_fields/add_button.png)

<div class="tip">

<div class="title">

Tip

</div>

When searching for relations, click on *Search more* and filter it by
*Custom*. This way you avoid creating duplicates.

![View of the search model window in Odoo
Studio](models_fields/search_model_custom.png)

</div>

  - **Case scenario 2.b: in the model 'Properties', show all the tags as
    checkboxes instead of tags.**

Once the field *Tags* is added to the form, select it and, under its
*Properties \> Widgets*, choose *Checkboxes*.

![Form view showing the widgets available in Odoo
Studio](models_fields/widget.png)

  - **Case scenario 3: on the leads’ form, add a selection field with
    the values:'Tags' & 'List' & 'Checkboxes'. According to the value of
    the field, show tags as many2many\_tags, many2many\_radio, or
    many2many(\_list).**

In your form view, add a *Tags* field and relate it to *Partners Tag*.
Under *Properties*, define its *Widget* as *Many2many*. Do the same
process another 2 times for *Checkboxes* and *Tags*.

![Form view emphasizing the widget property in Odoo
Studio](models_fields/widget_checkboxes.png)

Now, add a *Selection* field and the necessary values.  
Continue by selecting your *Tags* fields, one by one, to set their
*Invisible* options according to their *Widget*. In the example below,
the invisibility rule for the *Partner Tags* is set as: *Select Tag type
\> is not = \> Tags.*

![Form view emphasizing a field added and its invisibility properties in
Odoo Studio](models_fields/domain_select_tag_type.png)

  - **Case scenario 4: on a quotation’s form, add a selection field
    called 'Manager Validation' with the values: ‘Accepted’ and
    ‘Refused’. Only a sales manager can see it, and the field should
    be set as mandatory if the untaxed amount is higher than 500€.**

On your quotation form, add a *Selection* field with the values
*Accepted* and *Refused*. Set its *Required* condition as *Untaxed
Amount \> 500* and the *Limit visibility to groups* as *Sales /
Administrator* or managers.

![Form view of a required domain being set in Odoo
Studio](models_fields/domain_higher_500.png)

  - **Case scenario 5: change the tooltip of a field for all views.**

Activate the `developer mode <developer-mode>` and open Studio.  
Select the necessary field and, under *Properties*, click on *More* to
write your tooltip message on *Field Help*. The tooltip message is the
explanatory message shown when the user hovers the field. The message
here written is displayed on all views forms where the field is added.

![Form view showing more property options and emphasizing the help
feature in Odoo Studio](models_fields/field_help.png)

<div class="note">

<div class="title">

Note

</div>

The *Field Help* message can only be applied to *new* fields. If you
would like to change/apply a tooltip for a specific field, use the *Help
Tooltip* option under *Properties*.

![View of the properties emphasizing the help tooltip option in Odoo
Studio](models_fields/help_tooltip.png)

</div>

<div class="seealso">

\- `../concepts/understanding_general`

</div>


---
## File: ./content/applications/productivity/studio/use_cases/filters_status_bar.md

# Advanced Use Cases: Filters and Status Bar

  - **Case scenario 1: on Sales, set a filter on Belgian customers and
    define it as the default one (the user should still be able to unset
    the filter).**

On your customer’s page, use *Filters* \> *Add Custom Filter* to group
customers by country. Now, under *Favorites*, *Save Current Search*
enabling *Use by default* and *Save*.

![View of a custom filter being set to be used by default in
Odoo](filters_status_bar/customer_filter.png)

On *Filter Rules* in Studio mode, select the respective filter and
enable *Default Filter*.

![View of a filter’s rule form emphasizing the field default filter in
Odoo Studio](filters_status_bar/sales_default_filter.png)

  - **Case scenario 2: add a status bar on the product form to manage
    its life cycle. Set the values: ‘Prototype’, ‘In use’ and
    ‘Deprecated’. By default, the Kanban view must be grouped by
    status.**

On your product form, *Add a pipeline status bar* and name its values.
Status bars are *selection* fields that give you the ability to follow a
specific flow. They are useful to show you the progress that has been
made.  
On the *Views* menu, access *Kanban* and, under its *View* options, set
the *Default Group by* as *Pipeline status bar*.

![Form view emphasizing the button add a pipeline bar in Odoo
Studio](filters_status_bar/add_pipeline.png)

Now, open your product form and set the right status for that product.
As you move products throughout stages (also through the product’s
form), stages are shown in the Kanban view.

<div class="tip">

<div class="title">

Tip

</div>

To make modifications in the pipeline status bar, for example, remember
to go back to *Form View*.

![View of Studio emphasizing the form view button in Odoo
Studio](filters_status_bar/form_view.png)

</div>

  - **Case scenario 2.a: when a product goes from ‘In use’ to
    ‘Deprecate’, set its cost to 0€.**

Create an `automated action
<../concepts/understanding_automated_actions>` with the selected values:

  - *Model*: Product Template
  - *Trigger*: On Update
  - *First Domain*: Pipeline status bar = In use
  - *Second Domain*: Pipeline status bar = Deprecated
  - *Action To Do*: Update the Record
  - *Data to Write*: Cost (Product Template) \> Value \> 0

![View of the automated action created to set the price of a product to
zero in Odoo Studio](filters_status_bar/automations_zero_price.png)

<div class="seealso">

\- `../concepts/understanding_general`

</div>


---
## File: ./content/applications/productivity/calendar.md

  - nosearch

# Calendar

<div class="toctree" data-titlesonly="">

calendar/outlook calendar/google

</div>


---
## File: ./content/applications/productivity/calendar/outlook.md

# Outlook Calendar synchronization

Synchronizing a user's Outlook Calendar with Odoo is useful for keeping
track of their tasks and appointments across all related applications.

<div class="seealso">

\- `/applications/general/auth/azure` -
`/administration/maintain/azure_oauth`

</div>

## Register the application with Microsoft Azure

To sync the Outlook Calendar with Odoo's Calendar, a Microsoft Azure
account is needed. Creating an account is free for users who have never
tried or paid for Azure. For more information, [click
here](https://azure.microsoft.com/en-us/free/?WT.mc_id=A261C142F).

Refer to [Microsoft's documentation
\<https://docs.microsoft.com/en-us/azure/active-directory/
develop/quickstart-create-new-tenant\>]() on how to set up an Microsoft
Entra ID (formally called *Microsoft Azure Active Directory (Azure
AD)*), which is a representation of an organization to manage and
register apps.

Then, [Register an Application
\<https://docs.microsoft.com/en-us/azure/active-directory/develop/
quickstart-register-app\>](), choosing the appropriate `Supported
account type`. Users who wish to connect their Outlook calendar to Odoo
should select the `Accounts in any
organizational directory (Any Microsoft Entra ID directory -
Multitenant) and personal Microsoft
accounts (e.g. Skype, Xbox)` option for `Supported account types`.

When configuring the `Redirect URI`, choose `Web` and copy the Odoo
database URI (URL) followed by
<span class="title-ref">/microsoft\_account/authentication</span>.

<div class="example">

Enter
<span class="title-ref">https://www.companyname.odoo.com/microsoft\_account/authentication</span>
for the `Redirect URI`.

</div>

![The "Supported account type" and "Redirect URI" settings in the
Microsoft Entra ID portal.](outlook/azure-register-application.png)

For more information on the restrictions and limitations of URIs, [check
this page \<https://docs.
microsoft.com/en-us/azure/active-directory/develop/reply-url\>]().

Regarding the application credentials, the user *must* add a client
secret, which allows Odoo to authenticate itself, requiring no
interaction from the user's side. `Certificates` are optional.

To do add a client secret, click `Add a certificate or secret` and then
click `New client secret`. Next, type a `Description` and select when
the client secret `Expires`.

Since resetting the synchronization can be tricky, Odoo recommends
setting the maximum allowed expiration date for the client secret (24
months), so there is no need to re-synchronize soon. Finally, click
`Add` to generate the client secret (`Secret ID`).

## Configuration in Odoo

In the Odoo database, go to `Settings --> General Settings -->
Integrations` and activate the `Outlook Calendar` setting.

![The "Outlook Calendar" setting activated in
Odoo.](outlook/outlook-calendar-setting.png)

From the Microsoft Azure portal, under the `Overview` section of the
application, copy the `Application (Client) ID`, and paste it into the
`Client ID` field in Odoo.

![The "Client ID" in the Microsoft Azure portal.](outlook/client-id.png)

In the Microsoft Azure portal, under the `Certificates & secrets`
section, copy the `Client Secret Value` and paste it into the `Client
Secret` field in Odoo.

![The "Client Secret" token to be copied from Microsoft to
Odoo.](outlook/client-secret-value.png)

Finally, on the Odoo `Settings --> General Settings` page, click `Save`.

## Sync with Outlook

<div class="warning">

<div class="title">

Warning

</div>

Odoo highly recommends testing the Outlook calendar synchronization on a
test database and a test email address (that is not used for any other
purpose) before attempting to sync the desired Outlook Calendar with the
user's production database.

If the user has any past, present, or future events on their Odoo
calendar before syncing their Outlook calendar, Outlook will treat the
events pulled from Odoo's calendar during the sync as new events,
causing an email notification to be sent from Outlook to all the event
attendees.

To avoid unwanted emails being sent to all past, present, and future
event attendees, the user must add the events from the Odoo calendar to
the Outlook calendar before the first ever sync, delete the events from
Odoo, and then start the sync.

Even after synchronizing the Odoo Calendar with the Outlook calendar,
Outlook will still send a notification to all event participants every
time an event is edited (created, deleted, unarchived, or event
date/time changed), with no exceptions. This is a limitation that cannot
be fixed from Odoo's side.

After one user syncs their Outlook calendar to the Odoo database,
unwanted email notifications are unavoidable because the first
synchronized user's events will be in the Odoo Calendar. If the Odoo
database is shared amongst multiple users, and another user wants to
sync their Outlook calendar with Odoo Calendar, Outlook will again pull
the existing Odoo Calendar events during the sync and treat them as new
events, causing Outlook to send email invitations to all event
attendees.

In summary, once a user synchronizes their Outlook calendar with the
Odoo calendar:

  - Creating an event in Odoo causes Outlook to send an invitation to
    all event attendees.
  - Deleting an event in Odoo causes Outlook to send a cancellation to
    all event attendees.
  - Unarchiving an event in Odoo causes Outlook to send an invitation to
    all event attendees.
  - Archiving an event in Odoo causes Outlook to send a cancellation to
    all event attendees.
  - Adding a contact to an event causes Outlook to send an invitation to
    all event attendees.
  - Removing a contact from an event causes Outlook to send a
    cancellation to all event attendees.

</div>

### Sync Odoo Calendar and Outlook

In the Odoo database, go to the `Calendar` module and click the
`Outlook` sync button. The page will redirect to a Microsoft login page,
and the user is asked to log in to their account, if they are not
already, and grant the required permissions.

![The "Outlook" sync button in Odoo
Calendar.](outlook/outlook-sync-button.png)

The synchronization is a two-way process, meaning that events are
reconciled in both accounts (Outlook and Odoo).

<div class="note">

<div class="title">

Note

</div>

All users that want to use the synchronization simply need to `sync
their calendar with
Outlook <outlook/sync>`. The configuration of Microsoft's Azure account
is only done once, as Microsoft Entra ID tenants' Client IDs and Client
Secrets are unique, and represent an organization that helps the user to
manage a specific instance of Microsoft cloud services for their
internal and external users.

</div>

<div class="seealso">

\- `../../sales/crm/optimize/outlook_extension` - `google`

</div>


---
## File: ./content/applications/productivity/calendar/google.md

# Synchronize Google calendar with Odoo

Synchronize Google Calendar with Odoo to see and manage meetings from
both platforms (updates go in both directions). This integration helps
organize schedules, so a meeting is never missed.

<div class="seealso">

\- `/applications/general/auth/google` -
`/administration/maintain/google_oauth`

</div>

## Setup in Google

### Select (or create) a project

Create a new Google API project and enable the Google Calendar API.
First, go to the [Google API
Console](https://console.developers.google.com) and log into the Google
account.

<div class="note">

<div class="title">

Note

</div>

If this is the first time visiting this page, Google will prompt the
user to enter a country and agree to the Terms of Service. Select a
country from the drop-down list and agree to the `ToS (Terms of
Service)`.

</div>

Next, click `Select a project` and select (or create) an API project to
configure OAuth in, and store credentials. Click `New Project`.

![Create a new API project to store
credentials.](google/new-api-project.png)

<div class="tip">

<div class="title">

Tip

</div>

Give the API Project a clear name, like "Odoo Sync", so it can be easily
identified.

</div>

### Enable Google calendar API

Now, click on `Enabled APIs and Services` in the left menu. Select
`Enabled APIs
and Services` again if the `Search bar` doesn't appear.

![Enable APIs and Services on the API
Project.](google/enable-apis-services.png)

After that, search for <span class="title-ref">Google Calendar
API</span> using the search bar and select `Google
Calendar API` from the search results. Click `Enable`.

![Enable the Google Calendar API.](google/enable-google-cal-api.png)

### OAuth consent screen

Now that the API project has been created, OAuth should be configured.
To do that, click on `OAuth consent` in the left menu and then select
the `User Type`.

<div class="warning">

<div class="title">

Warning

</div>

*Personal* Gmail Accounts are only allowed to be **External** User Type,
which means Google may require an approval, or for *Scopes* to be added
on. However, using a *Google WorkSpace* account allows for **Internal**
User Type to be used.

Note, as well, that while the API connection is in the *External*
testing mode, then no approval is necessary from Google. User limits in
this testing mode is set to 100 users.

</div>

In the second step, `OAuth Consent Screen`, type
<span class="title-ref">Odoo</span> in the `App name` field, select the
email address for the `User support email` field, and type the email
address for the `Developer contact information` section. Then, click
`Save and
Continue`.

Skip the third step, `Scopes`, by clicking `Save and Continue`.

Next, if continuing in testing mode (External), add the email addresses
being configured under the `Test users` step, by clicking on `Add
Users`, and then the `Save and
Continue` button. A summary of the app registration appears.

Finally, scroll to the bottom, and click on `Back to Dashboard`.

Now, the OAuth consent has been configured, and it's time to create
credentials.

### Create credentials

The *Client ID* and the *Client Secret* are both needed to connect
Google Calendar to Odoo. This is the last step in the Google console.
Begin by clicking `Credentials` in the left menu. Then, click `Create
Credentials`, and select `OAuth client ID`, Google will open a guide to
create credentials.

Under `Create OAuth Client ID`, select `Website application` for the
`Application Type` field, and type <span class="title-ref">My Odoo
Database</span> for the `Name`.

  - Under the `Authorized JavaScript Origins` section, click `+ Add URI`
    and type the company's Odoo full `URL (Uniform Resource Locator)`
    address.
  - Under the `Authorized redirect URIs` section, click `+ Add URI` and
    type the company's Odoo `URL (Uniform Resource Locator)` address
    followed by
    <span class="title-ref">/google\_account/authentication</span>.
    Finally, click `Create`.

![Add the authorized JavaScript origins and the authorized redirect
URIs.](google/uri.png)

A `Client ID` and `Client Secret` will appear, copy these to a notepad.

## Setup in Odoo

Once the *Client ID* and the *Client Secret* are located, open the Odoo
database and go to `Settings --> General Settings --> Integrations -->
Google Calendar`. Check the box next to `Google Calendar`.

![The Google Calendar checkbox in General
Settings.](google/settings-google-cal.png)

Next, copy and paste the *Client ID* and the *Client Secret* from the
Google Calendar API credentials page into their respective fields below
the `Google Calendar` checkbox. Then, click `Save`.

## Sync calendar in Odoo

Finally, open the `Calendar` app in Odoo and click on the `Google` sync
button to sync Google Calendar with Odoo.

![Click the Google sync button in Odoo Calendar to sync Google Calendar
with Odoo.](google/sync-google.png)

<div class="note">

<div class="title">

Note

</div>

When syncing Google Calendar with Odoo for the first time, the page will
redirect to the Google Account. From there, select the `Email Account`
that should have access, then select `Continue` (should the app be
unverifed), and finally select `Continue` (to give permission for the
transfer of data)\`.

</div>

![Give Odoo permission to access Google
Calendar.](google/trust-odoo.png)

Now, Odoo Calendar is successfully synced with Google Calendar\!

<div class="warning">

<div class="title">

Warning

</div>

Odoo highly recommends testing the Google calendar synchronization on a
test database and a test email address (that is not used for any other
purpose) before attempting to sync the desired Google Calendar with the
user's production database.

Once a user synchronizes their Google calendar with the Odoo calendar:

  - Creating an event in Odoo causes Google to send an invitation to all
    event attendees.
  - Deleting an event in Odoo causes Google to send a cancellation to
    all event attendees.
  - Adding a contact to an event causes Google to send an invitation to
    all event attendees.
  - Removing a contact from an event causes Google to send a
    cancellation to all event attendees.

Events can be created in Google Calendar without sending a notification
by selecting `Don't Send` when prompted to send invitation emails.

</div>


---
## File: ./content/applications/productivity/iot.md

  - nosearch

  - show-content

  - hide-page-toc

  - show-toc

# Internet of Things (IoT)

<div class="toctree" data-titlesonly="">

iot/config iot/devices

</div>


---
## File: ./content/applications/productivity/discuss.md

  - nosearch

  - show-content

  - hide-page-toc

  - show-toc

# Discuss

<div class="toctree" data-titlesonly="">

discuss/overview

</div>


---
## File: ./content/applications/productivity/iot/config/https_certificate_iot.md

# HTTPS certificate (IoT)

## What is HTTPS?

*Hypertext Transfer Protocol Secure* (HTTPS) is the secure version of
*Hypertext Transfer Protocol* (HTTP), which is the primary protocol used
to send data back and forth between a web browser and a website. `HTTPS
(Hypertext Transfer Protocol Secure)` is encrypted in order to increase
the security of data transfer.

`HTTPS (Hypertext Transfer Protocol Secure)` uses an encryption protocol
to encrypt communications. The protocol is called *Transport Layer
Security* (TLS), although formerly it was known as *Secure Sockets
Layer* (SSL).

`HTTPS (Hypertext Transfer Protocol Secure)` occurs based upon the
transmission of `TLS
(Transport Layer Security)`/`SSL (Secure Sockets Layer)` certificates,
which verify that a particular provider is who they say they are.

<div class="note">

<div class="title">

Note

</div>

In this documentation and throughout Odoo the term "HTTPS certificate"
will be used to define the fact that the `SSL (Secure Sockets Layer)`
certificate is valid and allows a `HTTPS
(Hypertext Transfer Protocol Secure)` connection.

</div>

### Why is it needed?

In order to communicate with certain network devices (in particular for
payment terminals), the usage of `HTTPS (Hypertext Transfer Protocol
Secure)` is mandatory. If the `HTTPS
(Hypertext Transfer Protocol Secure)` certificate isn't valid, some
devices won't be able to interact with the `IoT (Internet of Things)`
Box.

## How to obtain a Hypertext Transfer Protocol Secure (HTTPS) certificate

The generation of the `HTTPS (Hypertext Transfer Protocol Secure)`
certificate is automatic.

The `IoT (Internet of Things)` Box will send a specific request to
<https://www.odoo.com> which will send back the `HTTPS (Hypertext
Transfer Protocol Secure)` certificate if the `IoT (Internet of Things)`
box and database are eligible.

### Internet of Things (IoT) eligibility

> 1.  The database should be a **production** instance. The database
>     instance should not be a copy, a duplicate, a staging, or a
>     development environment.
> 
> 2.  The Odoo subscription must:
>     
>     >   - Have an `IoT Box Subscription` line.
>     >   - `Status` must be `In Progress`.
>     
>     If the subscription is linked to a <https://www.odoo.com> portal
>     user check the information on the portal subscription page.
>     
>     ![In this case, both subscriptions are considered "in progress" as
>     the `Filter By\:
>     In Progress` was
>     used.](https_certificate_iot/sub-example-in-progress.png)
>     
>     <div class="note">
>     
>     <div class="title">
>     
>     Note
>     
>     </div>
>     
>     If the subscription is in question, contact the database's Account
>     Manager or Partner regarding the matter.
>     
>     </div>

## Troubleshooting Hypertext Transfer Protocol Secure (HTTPS) certificate errors

If anything goes wrong during the process of the "HTTPS certificate"
generation or reception, a specific error will code be given on the `IoT
(Internet of Things)` box home page.

<div class="tip">

<div class="title">

Tip

</div>

Accessing the `IoT (Internet of Things)` box homepage will check for the
presence of the "HTTPS certificate" and will attempt its generation if
it is missing. As such, if there is an error on the `IoT (Internet of
Things)` box home page, refresh the `IoT (Internet of
Things)` home page to see if the error disappears.

</div>

### <span class="title-ref">ERR\_IOT\_HTTPS\_CHECK\_NO\_SERVER</span>

  - Reason:  
    The configuration regarding the server is missing. In other words,
    the Odoo instance is not connected with the IoT box.

  - Solution:  
    Ensure that the server is configured.

<div class="seealso">

`/applications/productivity/iot/config/connect`

</div>

### <span class="title-ref">ERR\_IOT\_HTTPS\_CHECK\_CERT\_READ\_EXCEPTION</span>

  - Reason:  
    An unhandled error happened when trying to read the existing `HTTPS
    (Hypertext Transfer
    Protocol Secure)` certificate.

  - Solution:  
    Ensure that the `HTTPS (Hypertext Transfer Protocol Secure)`
    certificate file is readable.

### <span class="title-ref">ERR\_IOT\_HTTPS\_LOAD\_NO\_CREDENTIAL</span>

  - Reason:  
    The contract and/or database `UUID (Universal Unique Identifier)` is
    missing.

  - Solution:  
    Ensure that both values are configured as intended. To modify them,
    go to the `IoT
    (Internet of Things)` box home page, and navigate to `Credential`.

### <span class="title-ref">ERR\_IOT\_HTTPS\_LOAD\_REQUEST\_EXCEPTION</span>

  - Reason:  
    An unexpected error happened when the `IoT (Internet of Things)` box
    tried to reach <https://www.odoo.com>. The causes are likely due to
    the network infrastructure/configuration:
    
    >   - The `IoT (Internet of Things)` box does not have access to
    >     internet.
    >   - The network does not allow the `IoT (Internet of Things)` box
    >     to communicate with <https://www.odoo.com>. This may be due to
    >     network devices preventing the communication (firewalls, etc.)
    >     or the network configuration (`VPN (Virtual Private Network)`,
    >     etc.).
    
    <div class="note">
    
    <div class="title">
    
    Note
    
    </div>
    
    More information regarding the error that occurred can be found in
    the full request exception details, which are in the `IoT (Internet
    of Things)` box logs.
    
    </div>

  - Solution:
    
    <div class="warning">
    
    <div class="title">
    
    Warning
    
    </div>
    
    Consult with your system or network administrator should this issue
    arise. This error code depends on the network infrastructure and
    goes beyond Odoo support's service scope.
    
    </div>

### <span class="title-ref">ERR\_IOT\_HTTPS\_LOAD\_REQUEST\_STATUS</span>

  - Reason:  
    The IoT-box was able to reach <https://www.odoo.com> but received an
    unusual [HTTP response (status
    codes)](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status).
    
    This error code will also give the HTTP response status codes. For
    example, if the error reads
    <span class="title-ref">ERR\_IOT\_HTTPS\_LOAD\_REQUEST\_STATUS
    404</span> it means that the page returned a 404 error, which is the
    "Page Not Found" code.

  - Solution:  
    Check if <https://www.odoo.com> is down using a web browser, as it's
    possible that it is down due to maintenance.
    
    >   - If <https://www.odoo.com> is down due to maintenance,
    >     unfortunately there is nothing that can be done but instead
    >     wait for it to recover.
    >   - If <https://www.odoo.com> is not down due to maintenance, open
    >     a [support ticket](https://www.odoo.com/help) on the matter.
    >     Ensure that the 3 digits status code next to the code error is
    >     included in the support ticket.

### <span class="title-ref">ERR\_IOT\_HTTPS\_LOAD\_REQUEST\_NO\_RESULT</span>

  - Reason:  
    The `IoT (Internet of Things)` box was able to reach
    <https://www.odoo.com> but it refused to deliver the `HTTPS
    (Hypertext Transfer Protocol Secure)` certificate.

  - Solution:  
    Ensure that the `IoT (Internet of Things)` box and database are
    eligible for a certificate: `Internet of Things (IoT) eligibility
    <iot/iot-eligibility>`.

## How to ensure that the HTTPS certificate is correct

If the certificate has been applied successfully, a new `HTTPS
(Hypertext Transfer Protocol
Secure)` `URL (Uniform Resource Locator)` for the `IoT (Internet of
Things)` box ending with <span class="title-ref">.odoo-iot.com</span>
will appear on the Odoo database, inside of the `IoT` application on
that specific device's form.

![Odoo IoT app IoT box with .odoo-iot.com
domain.](https_certificate_iot/odoo-new-domain.png)

When navigating to the `URL (Uniform Resource Locator)` in a browser a
secured `HTTPS
(Hypertext Transfer Protocol Secure)` connection will be established.

![Padlock in Chrome on Windows 10 attesting the fact that the connection
is secured in `HTTPS
(Hypertext Transfer Protocol
Secure)`.](https_certificate_iot/secured-connection.png)

The IoT-box homepage will now display an
<span class="title-ref">OK</span> status next to
<span class="title-ref">HTTPS certificate</span>. The drop-down menu
icon, when clicked, will reveal information regarding the certificate.

![IoT box homepage with HTTPS certificate OK
status.](https_certificate_iot/status-ok.png)

## Domain Name System (DNS) issue

If the `IoT (Internet of Things)` box can be accessed from its `IP
(Intrernet Protocol)` address but not the Odoo assigned domain:
<span class="title-ref">.odoo-iot.com</span>; then the `IoT (Internet of
Things)` box is likely running into a `DNS (Domain Name System)` issue.
On some browsers, it will give an error code mentioning `DNS (Domain
Name System)` (like
<span class="title-ref">DNS\_PROBE\_FINISHED\_NXDOMAIN</span>).

These `DNS (Domain Name System)` issues may appear as the following in
different browsers:

<div class="tabs">

<div class="tab">

Chrome

![DNS issue on Chrome browser on Windows
10.](https_certificate_iot/dns-chrome.png)

</div>

<div class="tab">

Firefox

![DNS issue on Firefox browser on Windows
10.](https_certificate_iot/dns-firefox.png)

</div>

<div class="tab">

Edge

![DNS issue on Edge browser on Windows
10.](https_certificate_iot/dns-edge.png)

</div>

</div>

### Domain Name System (DNS) issue solution

1.  Should the router allow the `DNS (Domain Name System)` to be
    manually changed, change the DNS to use [Google
    DNS](https://developers.google.com/speed/public-dns).

2.  If your router doesn't allow for this, then a change will need to be
    made on the `DNS
    (Domain Name System)` settings of each of the devices using [Google
    DNS](https://developers.google.com/speed/public-dns). This will need
    to occur on **every** device that plans to interact with the `IoT
    (Internet of Things)` box (e.g. computer, tablet or phone). The
    individual device configuration processes can be found on the
    website of the device's manufacturer.
    
    <div class="note">
    
    <div class="title">
    
    Note
    
    </div>
    
    Other `IoT (Internet of Things)` devices such as payment terminals
    likely won't need their `DNS (Domain Name System)` settings changed
    as they are already configured with custom `DNS (Domain Name
    System)`.
    
    </div>
    
    <div class="warning">
    
    <div class="title">
    
    Warning
    
    </div>
    
    Consult with your system or network administrator should this issue
    arise. This error code depends on the network infrastructure, and it
    goes beyond Odoo support's service scope.
    
    </div>


---
## File: ./content/applications/productivity/iot/config/troubleshooting.md

# Troubleshooting

## IoT box connection

### Unable to locate the pairing code to connect the IoT box

The pairing code should be printed on receipt printers connected to the
`IoT (Internet of
Things)` box and should also be displayed on connected monitors.

The pairing code doesn't show under the following circumstances:

  - The `IoT (Internet of Things)` box is already connected to an Odoo
    database.
  - The `IoT (Internet of Things)` box is not connected to the Internet.
  - The code is only valid for 5 minutes after the `IoT (Internet of
    Things)` box has started. It's automatically removed from connected
    displays when this time has expired.
  - The version of the `IoT (Internet of Things)` box image is too old.
    If the `IoT
    (Internet of Things)` box image is from an earlier version, then the
    SD card of the `IoT
    (Internet of Things)` box will need to be re-flashed to update the
    image (see `Flashing the
    SD Card <flash_sdcard>`).

If none of the cases listed above correct the issue, then make sure that
the `IoT (Internet of
Things)` box has correctly started, by checking that a fixed green LED
is showing next to the power port.

### IoT box is connected but it's not showing in the database

When an `IoT (Internet of Things)` box connects to a database, it may
restart. If so, it can take up to five minutes before appearing in the
database. If the `IoT (Internet of Things)` box is still not showing
after five minutes, make sure that the `IoT (Internet of Things)` box
can reach the database and that the server doesn't use a multi-database
environment.

To access the database from the `IoT (Internet of Things)` box, open a
browser and type in the database address.

### The IoT box is connected to the Odoo database, but cannot be reached

Make sure that the `IoT (Internet of Things)` box and the computer
running the browser are located on the same network, as the `IoT
(Internet of Things)` box cannot be reached from outside the local
network.

### The HTTPS certificate doesn't generate

In order to generate a `HTTPS (Hypertext Transfer Protocol Secure)`
certificate, an IoT box subscription is required for the `IoT (Internet
of Things)` box. Connecting the `IoT
(Internet of Things)` box prior to configuring an `IoT (Internet of
Things)` subscription for the database and `IoT (Internet of Things)`
box with the Account Manager will result in an unsecured connection.

In addition, a firewall can also prevent the `HTTPS (Hypertext Transfer
Protocol Secure)` certificate from generating correctly. In this case,
deactivate the firewall until the certificate is successfully generated.
It should also be noted that certain devices, such as a router that has
a built-in firewall, can prevent the `HTTPS (Hypertext Transfer Protocol
Secure)` certificate from generating.

<div class="seealso">

`HTTPS certificate (IoT) <https_certificate_iot>`

</div>

## Printer

### The printer is not detected

If a printer doesn't show up in the devices list, go to the `IoT
(Internet of Things)` box homepage and make sure that it is listed under
`Printers`.

![The IoT box Home Page landing
page.](troubleshooting/printer-status.png)

If the printer is not present on the `IoT (Internet of Things)` box
homepage, click `Printers Server`, go to the `Administration` tab and
click on `Add
Printer`. If the printer is not present in the list, it's likely not
connected properly.

### The printer outputs random text

For most printers, the correct driver should be automatically detected
and selected. However, in some cases, the automatic detection mechanism
might not be enough, and if no driver is found, the printer might print
random characters.

The solution is to manually select the corresponding driver. On the `IoT
(Internet of Things)` box homepage, click on `Printers Server`, go to
the `Printers` tab and select the printer in the list. In the
`Administration` dropdown, click on `Modify
Printer`. Follow the steps and select the *make* and *model*
corresponding to the printer.

![Edit the printer connected to the IoT
box.](troubleshooting/modify-printer.png)

<div class="note">

<div class="title">

Note

</div>

Epson and Star receipt printers and Zebra label printers do not need a
driver to work. Make sure that no driver is selected for those printers.

</div>

### The Zebra printer doesn't print anything

Zebra printers are quite sensitive to the format of the Zebra
Programming Language (ZPL) code that is printed. If nothing comes out of
the printer or blank labels are printed, try changing the format of the
report that is sent to the printer by accessing `Settings --> Technical
-->
User Interface --> Views` in `developer mode <developer-mode>` and look
for the corresponding template.

<div class="seealso">

Check out Zebra's instructions on printing `ZPL (Zebra Programming
Language)` files
[here](https://supportcommunity.zebra.com/s/article/Print-a-zpl-file-using-the-Generic-Text-Printer).

</div>

## Barcode scanner

### The characters read by the barcode scanner don't match the barcode

By default, most barcode scanners are configured in the US QWERTY
format. If the barcode scanner uses a different layout, go to the form
view of the device (`IoT App --> Devices -->
Barcode Device`) and select the correct format.

### Nothing happens when a barcode is scanned

Make sure that the correct device is selected in the `Point of Sale`
configuration and that the barcode is configured to send an
<span class="title-ref">ENTER</span> character (keycode 28) at the end
of every barcode. To do so, navigate to `PoS app --> 3-Dot Menu on the
PoS --> IoT Box section
--> Edit`.

### The barcode scanner is detected as a keyboard

<div class="important">

<div class="title">

Important

</div>

Some barcode scanners do not advertise themselves as barcode scanners
but as a USB keyboard instead, and will not be recognized by the `IoT
(Internet of Things)` box.

</div>

The device type can be manually changed by going to its form view (`IoT
App -->
Devices --> Barcode Device`) and activating the `Is scanner` option.

![Modifying the form view of the barcode
scanner.](troubleshooting/barcode-scanner-settings.png)

## Cash drawer

### The cash drawer does not open

The cash drawer should be connected to the printer and the `Cash drawer`
checkbox should be ticked in the `PoS (Point of Sale)` configuration. To
do so, navigate to `POS app --> 3-Dot Menu on the POS --> IoT Box
section --> Edit --> Receipt Printer
--> Cashdrawer checkbox`.


---
## File: ./content/applications/productivity/iot/config/flash_sdcard.md

# Flashing the SD card

In some circumstances, the `IoT (Internet of Things)` box's micro SD
Card may need to be re-flashed to benefit from Odoo's latest `IoT
(Internet of Things)` image update. This means that the Odoo `IoT
(Internet of Things)` box software may need to be updated.

## Upgrade from the IoT box home page

Go to the `IoT (Internet of Things)` box homepage by navigating to `IoT
app -->
IoT Boxes` and clicking on the `IP address` of the `IoT (Internet of
Things)` box. Then click on `Update` (next to the version number).

If a new version of the `IoT (Internet of Things)` Box image is
available, an `Upgrade to _xx.xx_` button will appear at the bottom of
the page. Click this button to upgrade the unit and the `IoT (Internet
of Things)` box will then flash itself to the new version. All of the
previous configurations will be saved.

<div class="note">

<div class="title">

Note

</div>

This process can take more than 30 minutes. Do not turn off or unplug
the `IoT (Internet of
Things)` box as it would leave it in an inconsistent state. This means
that the `IoT
(Internet of Things)` box will need to be re-flashed with a new image.
See `flash_sdcard/etcher`.

</div>

![IoT box software upgrade in the IoT Box Home
Page.](flash_sdcard/flash-upgrade.png)

## Upgrade with Etcher Software

<div class="note">

<div class="title">

Note

</div>

A computer with a micro SD card reader/adapter is required in order to
re-flash the micro SD card.

</div>

Navigate to Balena's website and download
[Etcher](https://www.balena.io/). It's a free and open-source utility
used for burning image files onto drives. Click to
[download](https://www.balena.io/etcher#download-etcher). Install and
launch the program on the computer.

Then download the version-specific `IoT (Internet of Things)` image from
[nightly](http://nightly.odoo.com/master/iotbox/).

The following are image versions on the
[nightly](http://nightly.odoo.com/master/iotbox/) website with their
corresponding Odoo database version:

  - Odoo V16 --\> iotbox-latest.zip
  - Odoo V15 --\> iotboxv21\_10.zip
  - Odoo V14 --\> iotboxv21\_04.zip
  - Odoo V13 --\> iotboxv20\_10.zip

The images should be downloaded and extracted to a convenient file
location.

After this step is complete, insert the `IoT (Internet of Things)` box's
micro SD card into the computer or reader. Open *Etcher* and select
`Flash from file`, then find and select the image just downloaded and
extracted. Next, select the drive the image should be burned to. Lastly,
click on `Flash` and wait for the process to finish.

![Balena's Etcher software dashboard.](flash_sdcard/etcher-app.png)

<div class="note">

<div class="title">

Note

</div>

An alternative software for flashing the micro SD card is *Raspberry Pi
Imager*. Download the *Raspberry Pi* software
[here](https://www.raspberrypi.com/software/).

</div>


---
## File: ./content/applications/productivity/iot/config/connect.md

# Connect an IoT box to Odoo

An Internet of Things (IoT) box is a micro-computer device that allows
for the connection of input and output devices to an Odoo database. An
`IoT (Internet of Things)` box subscription is required in order to use
the `IoT (Internet of Things)` box with a secured connection. A computer
is also required to set up the `IoT (Internet of Things)` box.

<div class="seealso">

[IoT Box FAQ](https://www.odoo.com/app/iot-faq)

</div>

Begin the `IoT (Internet of Things)` configuration process by
`installing the IoT app
<general/install>` on the Odoo database through the `Apps` application.

![The Internet of Things (IoT) app on the Odoo
database.](connect/install-iot-app.png)

Next, after the *IoT app* is installed, navigate to `IoT app --> IoT
Boxes`, and then click on the `Connect` button located in the upper-left
corner of the `IoT
Boxes` dashboard.

![Connecting an IoT box to the Odoo database.](connect/connect-iot.png)

There are two recommended ways to connect the `IoT (Internet of Things)`
box to the database once the *IoT app* is installed. Follow the steps in
either of the next two sections to connect the `IoT (Internet of
Things)` box via `wired ethernet connection <iot_connect/ethernet>` or
via `WiFi <iot_connect/wifi>`.

![Connection steps for a wired connection or WiFi
connection.](connect/connect-iot-box.png)

<div class="important">

<div class="title">

Important

</div>

The disk image that the `IoT (Internet of Things)` box SD card is
formatted with is unique to the version of the Odoo database that the
`IoT (Internet of Things)` box is running on. Ensure that the `IoT
(Internet of Things)` box is `flashed <flash_sdcard>` with the most
up-to-date disk image.

</div>

## Ethernet connection

The following is the process to connect the `IoT (Internet of Things)`
box via an ethernet cable to the Odoo database (by way of the ethernet
port; RJ-45).

First, connect all wired devices to the `IoT (Internet of Things)` box
(ethernet, `USB
(Universal Serial Bus)` devices, etc.). At minimum, an HDMI screen
should be connected. Then, plug the `IoT (Internet of Things)` box into
a power source.

Immediately after the unit powers on and boots up, read the *pairing
code* from the screen or from the printout of a receipt printer
connected to the `IoT (Internet of Things)` box.

<div class="warning">

<div class="title">

Warning

</div>

By default, the `IoT (Internet of Things)` box will display the *pairing
code* for a maximum of 5 minutes after the unit boots up. After 5
minutes, the *pairing code* will disappear for security purposes and the
`IoT (Internet of Things)` box will need to be rebooted manually by
unplugging the unit from the power source for ten seconds and
re-plugging it back in.

</div>

<div class="note">

<div class="title">

Note

</div>

If no screen is attached to the `IoT (Internet of Things)` box, then the
*pairing code* can be accessed from the `IoT (Internet of Things)` box
homepage by clicking on the `POS Display` button. For instructions on
how to access the `IoT (Internet of
Things)` box homepage visit `iot_connect/token`.

</div>

On the computer, navigate to `IoT app --> IoT Boxes`, and then click on
the `Connect` button located in the upper-left corner of the the `IoT
Boxes` dashboard. Input the *pairing code* in the `Pairing Code` field
and click on the `Pair` button. The database will now link to the `IoT
(Internet of Things)` box and it will appear on the `IoT Boxes` page.

## WiFi connection

The following is the process to connect the `IoT (Internet of Things)`
box via a WiFi connection to the Odoo database.

First, ensure there is no ethernet cable plugged into the `IoT (Internet
of Things)` box. Then, connect all wired devices to the `IoT (Internet
of Things)` box (`USB (Universal
Serial Bus)` devices, etc.).

After connecting the devices, plug the `IoT (Internet of Things)` box
into to a power source. On the computer, navigate to `IoT app --> IoT
Boxes`, and then click on the `Connect` button located in the upper-left
corner of the the `IoT Boxes` dashboard. Then copy the `Token` from the
`WiFi connection` section as this will later be used to link the Odoo
database to the `IoT (Internet of Things)` box.

Back on the computer, navigate to the available WiFi networks and
connect to the `IoT
(Internet of Things)` box WiFi network. The WiFi network dispersed by
the `IoT (Internet of
Things)` box will start with
<span class="title-ref">IoTBox-xxxxxxxxxx</span>.

![WiFi networks available on the
computer.](connect/connect-iot-wifi.png)

Upon connecting to the `IoT (Internet of Things)` box WiFi, a browser
will automatically redirect to the `Configure Iot Box` wizard. Name the
`IoT (Internet of Things)` box, then paste the previously copied *token*
into the `Server Token` field, and then click on `Next`.

![Enter the server token into the IoT box.](connect/server-token.png)

<div class="note">

<div class="title">

Note

</div>

If the `IoT (Internet of Things)` box WiFi connection wizard doesn't
start, then see the documentation on `connecting with a token
<iot_connect/token>`.

</div>

Now, choose the WiFi network that the `IoT (Internet of Things)` box
will connect with (enter the password if there is one) and click on
`Connect`. Wait a few seconds and the browser will redirect to the `IoT
(Internet of Things)` box homepage. The computer may need to be manually
re-connected back to the original WiFi connection, if this does not
happen automatically.

![Configuring the WiFi for the IoT
box.](connect/configure-wifi-network-iot.png)

After completing each step, the `IoT (Internet of Things)` box should
appear when navigating to `IoT app --> IoT Boxes` on the Odoo database.

![The IoT box has been successfully configured on the Odoo
database.](connect/iot-box-connected.png)

<div class="important">

<div class="title">

Important

</div>

The `IoT (Internet of Things)` box may need to be manually rebooted upon
successfully connecting via WiFi for the box to appear in the *IoT app*
on the Odoo database. To do so, simply unplug the device and plug it
back into the power source after ten seconds.

</div>

## Manually connecting the IoT box using the token

A manual connection of the `IoT (Internet of Things)` box to the `IoT
(Internet of
Things)` app can be made using the *token*, from a computer. The *token*
can be found by navigating to `IoT app --> IoT Boxes` and clicking on
`Connect`.

Under the `WiFi Connection` section of the `Connect an IoT Box` page
that appears, click `Copy` to the right of the `Token`. This token will
be entered into the `IoT (Internet of Things)` box homepage.

Access the `IoT (Internet of Things)` box homepage by entering the `IP
(Internet
Protocol)` address of the `IoT (Internet of Things)` box into a browser
window from a computer on the same network as the `IoT (Internet of
Things)` box (preferably by ethernet connection).

<div class="note">

<div class="title">

Note

</div>

The `IP (Internet Protocol)` address can be accessed by the router admin
console that the `IoT (Internet of Things)` box is connected to, or by
connecting a receipt printer to the `IoT (Internet of Things)` box. A
receipt will print out with the `IoT (Internet of
Things)` box's `IP (Internet Protocol)` address on it.

</div>

On the `IoT (Internet of Things)` box homepage, enter the *token* under
the `Server` section by clicking on `Configure`. Then, paste the *token*
into the `Server
Token` field and click `Connect`. The `IoT (Internet of Things)` box
will then link to the Odoo database.

## IoT box schema

### Raspberry Pi 4

![The Odoo IoT box (Raspberry Pi 4) schema with
labels.](connect/iot-box-schema.png)

### Raspberry Pi 3

![The Odoo IoT box (Raspberry Pi 3) schema with
labels.](connect/iox-box-schema-3.png)


---
## File: ./content/applications/productivity/iot/config/pos.md

# Use an IoT box with a PoS

## Prerequisites

Before starting, make sure the following equipment is available:

  - An `IoT (Internet of Things)` box, with its power adapter.
  - A computer or tablet with an up-to-date web browser.
  - Odoo Online or an Odoo instance with the *Point of Sale* and *IoT*
    applications installed.
  - A local network set up with `DHCP (Dynamic Host Configuration
    Protocol)` (this is the default setting).
  - An RJ45 Ethernet Cable (optional, but preferred over WiFi, which is
    already built in).
  - Any of the supported hardware (receipt printer, barcode scanner,
    cash drawer, payment terminal, scale, customer display, etc.). The
    list of supported hardware can be found on the [POS Hardware
    page](https://www.odoo.com/page/point-of-sale-hardware).

## Setup

![A suggested configuration for a point of sale
system.](pos/pos-connections.png)

To connect hardware to the `PoS (Point of Sale)`, the first step is to
connect an `IoT
(Internet of Things)` box to the database. To do this, follow these
instructions: `Connect an
Internet of Things (IoT) box to the Odoo database <connect>`.

Then, connect the peripheral devices to the `IoT (Internet of Things)`
box.

| Device Name      | Instructions                                                                                                                                                                                                      |
| ---------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Printer          | Connect a supported receipt printer to a `USB (Universal Serial Bus)` port or to the network, and power it on. Refer to `/applications/sales/point_of_sale/restaurant/kitchen_printing`.                          |
| Cash drawer      | The cash drawer should be connected to the printer with an RJ25 cable.                                                                                                                                            |
| Barcode scanner  | In order for the barcode scanner to be compatible it must end barcodes with an <span class="title-ref">ENTER</span> character (keycode 28). This is most likely the default configuration of the barcode scanner. |
| Scale            | Connect the scale and power it on. Refer to `/applications/productivity/iot/devices/scale`.                                                                                                                       |
| Customer display | Connect a screen to the `IoT (Internet of Things)` box to display the `PoS (Point
of Sale)` order. Refer to `/applications/productivity/iot/devices/screen`.                                                      |
| Payment terminal | The connection process depends on the terminal. Refer to the `payment terminals
documentation </applications/sales/point_of_sale/payment_methods>`.                                                               |

Once this is completed, connect the `IoT (Internet of Things)` box to
the `PoS` application. To do this, go to `Point of Sale -->
Configuration --> PoS`, tick the `IoT Box` option, and select the
devices to be used in this `PoS (Point of Sale)`. `Save` the the
changes.

![Configuring the connected devices in the POS
application.](pos/iot-connected-devices.png)

Once set up is done, a new `PoS (Point of Sale)` session can be
launched.


---
## File: ./content/applications/productivity/iot/devices.md

  - nosearch

# Devices

<div class="toctree" data-titlesonly="" data-glob="">

devices/screen devices/measurement\_tool devices/camera
devices/footswitch devices/printer devices/scale

</div>


---
## File: ./content/applications/productivity/iot/config.md

  - nosearch

# Configuration

<div class="toctree" data-titlesonly="" data-glob="">

config/connect config/pos config/https\_certificate\_iot
config/flash\_sdcard config/troubleshooting

</div>


---
## File: ./content/applications/productivity/iot/devices/camera.md

# Connect a camera

A camera can be connected to an `IoT (Internet of Things)` box with an
Odoo database in just a few steps. Once a camera is connected to an `IoT
(Internet of Things)` box, it can be used in a manufacturing process, or
it can be linked to a quality control point/quality check. Doing so
allows for the taking of pictures when a chosen quality control
point/check has been reached, or when a specific key is pressed during
manufacturing.

## Connection

To connect a camera to an `IoT (Internet of Things)` box, simply connect
the two via cable. This is usually done with a `USB (Universal Serial
Bus)` cable of some sort.

If the camera is [supported](https://www.odoo.com/page/iot-hardware),
there is no need to set up anything, as it'll be detected as soon as
it's connected.

![Camera recognized on the IoT box.](camera/camera-dropdown.png)

## Link camera to quality control point in manufacturing process

In the `Quality app`, a device can be set up on a `Quality Control
Point`. To do that, navigate to the `Quality app --> Quality Control -->
Control Points` and open the desired `Control Point` that'll be linked
to the camera.

On the control point form, edit the control point by selecting the
`Type` field, and clicking on `Take a Picture` from the drop-down menu.
Doing so reveals a field called `Device`, wherein the attached *device*
can be selected. `Save` the changes, if required.

![Setting up the device on the quality control
point.](camera/control-point-device.png)

The camera is now useable with the selected quality control point. When
the quality control point is reached during the manufacturing process,
the database prompts the operator to take a picture.

![Graphic user interface of the device on the quality control
point.](camera/serial-number-picture.png)

<div class="note">

<div class="title">

Note

</div>

Quality control points can also be accessed by navigating to `IoT App
-->
Devices`. From here, select the device. There is a `Quality Control
Points` tab, where they can be added with the device.

</div>

<div class="tip">

<div class="title">

Tip

</div>

On a quality check form, the `Type` of check can also be specified to
`Take a
Picture`. Navigate to `Quality app --> Quality Control --> Quality
Checks --> New` to create a new quality check from the `Quality Checks`
page.

</div>

<div class="seealso">

\-
`../../../inventory_and_mrp/manufacturing/quality_control/quality_control_points`
-
`../../../inventory_and_mrp/manufacturing/quality_control/quality_alerts`

</div>

## Link camera to a work center in the Manufacturing app

To link a camera to an action, it first needs to be configured on a work
center. Navigate to `Manufacturing app --> Configuration --> Work
Centers`. Next, go to the desired `Work Center` in which a camera will
be used to reveal that specific work center's detail form. From here,
add the device in the `IoT Triggers` tab, in the `Device` column, by
clicking `Add a Line`.

Now, the camera device can be linked to the `Action` column drop-down
option labeled `Take a Picture`. A key can also be added to trigger the
action.

<div class="important">

<div class="title">

Important

</div>

The first trigger listed is chosen first. The order of triggers matters,
and they can be dragged into any desired order.

</div>

<div class="note">

<div class="title">

Note

</div>

On the `Work Order` screen, a status graphic indicates whether the
database is correctly connected to the camera.

</div>

<div class="seealso">

`workcenter_iot`

</div>


---
## File: ./content/applications/productivity/iot/devices/scale.md

# Connect a scale

A scale can be connected to the `IoT (Internet of Things)` box on an
Odoo database in a few easy steps. After setup, the *Point of Sale* app
can be used to weigh products, which is helpful if their prices are
calculated based on weight.

## Connection

To link the scale to the `IoT (Internet of Things)` box, connect it with
a `USB
(Universal Serial Bus)` cable.

<div class="note">

<div class="title">

Note

</div>

In some cases, a serial port to `USB (Universal Serial Bus)` adapter may
be needed.

</div>

If the scale is [compatible with Odoo IoT
Box](https://www.odoo.com/page/iot-hardware), there is no need to set up
anything because it will be automatically detected as soon as it is
connected.

![IOT box auto detection.](scale/iot-choice.png)

The `IoT (Internet of Things)` box may need to be restarted and the
scale's drivers may need to be downloaded to the box in some cases. To
update the drivers, go to the `IoT (Internet of
Things)` box homepage and click on `Drivers List`. Then, click on `Load
Drivers`.

![View of the IoT box settings and driver list.](scale/driver-list.png)

If loading the drivers still doesn't allow for the scale to function, it
may be that the scale is not compatible with the Odoo `IoT (Internet of
Things)` box. In this case, a different scale will need to be used.

## Use a scale in a point of sale (POS) system

To use the scale in the *Point of Sale app*, go to `PoS app --> 3-Dot
Menu on the PoS
--> Settings`, then enable the `IoT (Internet of Things)` box feature.
After this is complete, the scale device can be set.

Select the scale from the `Electronic Scale` drop-down menu. Then click
`Save` to save the changes, if required.

![List of the external tools that can be used with PoS and the IoT
box.](scale/electronic-scale-feature.png)

The scale is now available in all the `PoS (Point of Sale)` sessions.
Now, if a product has a price per weight set, clicking on it on the
`PoS` screen opens the scale screen, where the cashier can weigh the
product and add the correct price to the cart.

![Electronic Scale dashboard view when no items are being
weighed.](scale/scale-view.png)


---
## File: ./content/applications/productivity/iot/devices/measurement_tool.md

# Connect a measurement tool

With Odoo's `IoT (Internet of Things)` box, it is possible to connect
measurement tools to the Odoo database for use in the *Quality app* on a
quality control point/quality check, or for use in a work center during
the manufacturing process.

Find the list of supported devices here: [Supported
devices](https://www.odoo.com/page/iot-hardware).

## Connect with universal serial bus (USB)

To add a device connected by `USB (Universal Serial Bus)`, plug the `USB
(Universal
Serial Bus)` cable into the `IoT (Internet of Things)` box, and the
device appears in the Odoo database.

![Measurement tool recognized on the IoT
box.](measurement_tool/device-dropdown.png)

## Connect with bluetooth

Activate the Bluetooth functionality on the device (see the device
manual for further explanation), and the `IoT (Internet of Things)` box
automatically connects to the device.

![Bluetooth indicator on measurement
tool.](measurement_tool/measurement-tool.jpeg)

## Link a measurement tool to a quality control point in the manufacturing process

In the *Quality app*, a device can be set up on a quality control point.
To do that, navigate to `Quality app --> Quality Control --> Control
Points`, and open the desired control point to which the measurement
tool should be linked.

From here, edit the control point, by selecting the `Type` field, and
clicking `Measure` from the drop-down menu. Doing so reveals a field
called `Device`, where the attached device can be selected.

Additionally, `Norm` and `Tolerance` can be configured. `Save` the
changes, if required.

At this point, the measurement tool is linked to the chosen quality
control point. The value, which usually needs to be changed manually, is
automatically updated while the tool is being used.

![Measurement tool input in the Odoo
database.](measurement_tool/measurement-control-point.png)

<div class="tip">

<div class="title">

Tip

</div>

Quality control points can also be accessed by navigating to `IoT App
-->
Devices`, then select the device. There is a `Quality Control Points`
tab, where they can be added with the device.

</div>

<div class="note">

<div class="title">

Note

</div>

On a quality check detail form, the `Type` of check can also be
specified to `Measure`. Access a new quality check detail page, by
navigating to `Quality app --> Quality Control --> Quality Checks -->
New`.

</div>

<div class="seealso">

\-
`../../../inventory_and_mrp/manufacturing/quality_control/quality_control_points`
-
`../../../inventory_and_mrp/manufacturing/quality_control/quality_alerts`

</div>

## Link a measurement tool to a work center in the Manufacturing app

To link a measurement tool to an action, it first needs to be configured
on a work center. To do that, navigate to `Manufacturing app -->
Configuration --> Work Centers`. Then, select the desired work center in
which the measurement tool will be used.

On the work center page, add the device in the `IoT Triggers` tab, under
the `Device` column, by selecting `Add a Line`. Then, the measurement
tool can be linked to the `Action` drop-down menu option labeled `Take
Measure`. A key can be added to trigger the action.

<div class="important">

<div class="title">

Important

</div>

It should be noted that the first listed trigger is chosen first. The
order matters, and these triggers can be dragged into any order.

</div>

<div class="note">

<div class="title">

Note

</div>

On the `Work Order` screen, a status graphic indicates whether the
database is correctly connected to the measurement tool.

</div>

<div class="seealso">

`workcenter_iot`

</div>


---
## File: ./content/applications/productivity/iot/devices/printer.md

# Connect a printer

Printer installation can be done in a few easy steps. The printer can be
used to print receipts, labels, orders, or even reports from the
different Odoo apps. In addition, printer actions can be assigned as an
*action on a trigger* during the manufacturing process, or added onto a
quality control point or a quality check.

## Connection

The `IoT (Internet of Things)` box supports printers connected through
`USB (Universal
Serial Bus)`, network connection, or Bluetooth. [Supported
printers](https://www.odoo.com/page/iot-hardware) are detected
automatically, and appear in the `Devices` list of the *IoT app*.

![The printer as it would appear in the IoT app devices
list.](printer/printer-detected.png)

<div class="note">

<div class="title">

Note

</div>

The printer can take up to two minutes to appear in the *IoT app*
devices list.

</div>

## Link printer

### Link printer to work orders

*Work Orders* can be linked to printers, via a quality control point, to
print labels for manufactured products.

In the *Quality app*, a device can be set up on a quality control point.
To do that, go to the `Quality app --> Quality Control --> Control
Points`, and open the desired control point to which the printer will be
linked.

<div class="important">

<div class="title">

Important

</div>

A *Manufacturing Operation* and *Work Order Operation* need to be
attached to a quality control point before the `Type` field allows for
the `Print Label` option to be selected.

</div>

From here, edit the control point, by selecting the `Type` field, and
selecting `Print Label` from the drop-down menu of options. Doing so
reveals a field called `Device`, where the attached *device* can be
selected. `Save` the changes, if required.

![This is the quality control point
setup.](printer/printer-controlpoint.png)

The printer can now be used with the selected quality control point.
When the quality control point is reached during the manufacturing
process, the database presents the option to print labels for a specific
product.

![image](printer/printer-prompt.png)

<div class="tip">

<div class="title">

Tip

</div>

Quality control points can also be accessed by navigating to `IoT App
-->
Devices`, then select the device. There is a `Quality Control Points`
tab, where they can be added with the device.

</div>

<div class="note">

<div class="title">

Note

</div>

On a quality check detail form, the `Type` of check can also be
specified to `Print Label`. To create new quality checks, navigate to
`Quality app
--> Quality Control --> Quality Checks --> New`.

</div>

<div class="seealso">

\-
`../../../inventory_and_mrp/manufacturing/quality_control/quality_control_points`
-
`../../../inventory_and_mrp/manufacturing/quality_control/quality_alerts`

</div>

### Link a printer to a work center in the Manufacturing app

To link a printer to an action, it first needs to be configured on a
work center. To do that, navigate to `Manufacturing app -->
Configuration --> Work Centers`. From here, select the desired work
center in which the printer will be used. Next, add the device in the
`IoT Triggers` tab, under the `Device` column, by selecting `Add a
Line`.

Then, the printer can be linked to either of the following options in
the `Actions` drop-down menu: `Print Labels`, `Print Operation`, or
`Print Delivery
Slip`. A key can also be added to trigger the action.

<div class="important">

<div class="title">

Important

</div>

The first listed trigger on the form will be chosen first. So, the order
matters, and these triggers can be dragged into any order.

</div>

<div class="note">

<div class="title">

Note

</div>

On the `Work Order` screen, a status graphic indicates whether the
database is correctly connected to the printer.

</div>

<div class="seealso">

`workcenter_iot`

</div>

### Link printer to reports

It's also possible to link a type of report to a certain printer. In the
*IoT app*, go to the `Devices` menu, and select the desired printer that
needs to be configured.

From here, click `Edit`, go to the `Printer Reports` tab, and select
`Add a line`. In the window that appears, check all the types of
`Reports` that should be linked to this printer.

![The printer devices listed in the IoT Devices
menu.](printer/printers-listed.png)

Now, each time `Print` is selected in the control panel, instead of
downloading a PDF, Odoo sends the report to the selected printer, and
automatically prints it.

<div class="seealso">

`POS Order Printing
<../../../sales/point_of_sale/restaurant/kitchen_printing>`

</div>

<div class="tip">

<div class="title">

Tip

</div>

Reports can also be configured in the `Technical Menu` while in `debug
mode
<developer-mode>`. To do that, navigate to `Settings App --> Technical
Menu -->
Actions --> Reports`. From here, the individual report can be found in
this list, where the `IoT Device` can be set on the report.

</div>


---
## File: ./content/applications/productivity/iot/devices/footswitch.md

# Connect a footswitch

When working in a manufacturing environment, it's always better for an
operator to have both hands available at all times. Odoo's `IoT
(Internet of Things)` box makes this possible when using a footswitch.

In fact, with a footswitch, the operator is able to go from one screen
to another, and perform actions using their foot. This can be configured
in just a few steps on the work center in the *Manufacturing* app.

## Connection

To connect a footswitch to the `IoT (Internet of Things)` box, connect
the two devices via cable. More often than not, this is done with a `USB
(Universal Serial Bus)` cable.

If the footswitch is a [supported
device](https://www.odoo.com/page/iot-hardware), there is no need to
take further action, since it'll be automatically detected when
connected.

![Footswitch recognized on the IoT
box.](footswitch/footswitch-dropdown.png)

## Link a footswitch to a work center in the Odoo Manufacturing app

To link a footswitch to an action, it first needs to be configured on a
work center. Navigate to `Manufacturing app --> Configuration --> Work
Centers`. From here, go to the desired `Work Center` in which the
footswitch will be used, and add the device in the `IoT Triggers` tab,
under the `Device` column, by selecting `Add a
Line`. Doing so means the footswitch can be linked to an option in the
`Action` column drop-down, and optionally, a key can be added to trigger
it. An example of an `Action` in the *Manufacturing app* could be the
`Validate` or `Mark as Done` buttons on a manufacturing work order.

![Footswitch trigger setup on the Odoo
database.](footswitch/footswitch-example.png)

<div class="important">

<div class="title">

Important

</div>

It should be noted that the first listed trigger is chosen first. So,
the order matters, and these triggers can be dragged into any order. In
the picture above, using the footswitch automatically skips the part of
the process that's currently being worked on.

</div>

<div class="note">

<div class="title">

Note

</div>

On the `Work Order` screen, a status graphic indicates whether the
database is correctly connected to the footswitch.

</div>

<div class="seealso">

`workcenter_iot`

</div>


---
## File: ./content/applications/productivity/iot/devices/screen.md

# Connect a screen

In Odoo, an `IoT (Internet of Things)` box can be connected to a screen
display. After being configured, the screen can be used to display a
Point of Sale (PoS) order to a client.

![An example of a PoS (point of sale) order on a screen
display.](screen/screen-pos-client-display.png)

Access the customer display by going to the `IoT (Internet of Things)`
box homepage and clicking on the `PoS Display` button. To get to the
`IoT (Internet of Things)` box homepage, navigate to `IoT app --> IoT
Boxes` and click on the `IoT (Internet
of Things)` box homepage link.

## Connection

The way to connect the screen display to the `IoT (Internet of Things)`
box differs depending on the model.

<div class="tabs">

<div class="tab">

IoT Box model 4

Connect up to two screens with micro-HDMI cables on the side of the `IoT
(Internet of
Things)` box. If two screens are connected, they can display distinct
content (see `Screen Usage <iot/usage_screen>`).

</div>

<div class="tab">

IoT Box model 3

Connect the screen with an HDMI cable on the side of the `IoT (Internet
of Things)` box.

</div>

</div>

<div class="seealso">

`See the Raspberry Pi Schema <iot/connect_schema>`.

</div>

<div class="important">

<div class="title">

Important

</div>

Screen(s) should be connected before the `IoT (Internet of Things)` box
is switched on. If it is already on, connect the screen(s), and then
restart the `IoT (Internet of Things)` box by unplugging it for ten
seconds and plugging it back into its power source.

</div>

<div class="warning">

<div class="title">

Warning

</div>

The usage of HDMI/micro-HDMI adapters may cause issues which will result
in a blank, black screen on the screen display. Using the specific cable
for the display connection is recommended.

</div>

If the connection was successful, the screen should display the `POS
Client display` screen.

![The default "POS Client Display" screen that appears when a screen
display is successfully&#10;connected to an IoT
box.](screen/screen-pos-client-display-no-order.png)

The screen should also appear in the list of `Displays` on the `IoT
(Internet of
Things)` box homepage. Alternatively, the display can be seen by
accessing `IoT app
--> Devices`.

![An example of a screen display name shown on the IoT Box Home
Page.](screen/screen-screen-name-example.png)

<div class="note">

<div class="title">

Note

</div>

If no screen is detected, a default display named `Distant Display` will
be displayed instead. This indicates that there is no hardware screen
connected.

![The "Distant Display" screen name will be used if no screen is
detected.](screen/screen-no-screen.png)

</div>

## Usage

### Show Point of Sale orders to customers

To use the screen in the *Point of Sale app*, go to `Point of Sale -->
Configuration --> Point of Sale`, select a `PoS (Point of Sale)`, click
`Edit` if necessary, and enable the `IoT Box` feature.

Next, select the screen from the `Customer Display` drop-down menu. Then
click `Save`, if required.

![Connect the screen display to the Point of Sale
app.](screen/screen-pos-screen-config.png)

The screen is now available for `PoS (Point of Sale)` sessions. A screen
icon will appear in the menu at the top of the screen to indicate the
screen's connection status.

![The "screen" icon on the Point of Sale display shows the connection
status with the&#10;screen.](screen/screen-pos-icon.png)

The screen will automatically show the `PoS (Point of Sale)` orders and
update when changes are made to the order.

![An example of a PoS order on a screen
display.](screen/screen-pos-client-display.png)

### Display a website on the screen

Open the screen form view by accessing `IoT app --> Devices --> Customer
Display`. This allows the user to choose a particular website URL to
display on the screen using the `Display URL` field.


---
## File: ./content/applications/productivity/studio.md

  - nosearch

  - show-content

  - hide-page-toc

  - show-toc

# Studio

Learn all you need in order to build custom applications: customize
views, create specific reports, automate actions, define approval
workflows, etc.

<div class="seealso">

\- [Odoo Tutorials: Studio](https://www.odoo.com/slides/studio-31)

</div>

<div class="toctree" data-titlesonly="">

studio/concepts studio/use\_cases studio/how\_to

</div>


---
## File: ./content/applications/productivity/discuss/overview.md

  - nosearch

# Overview

<div class="toctree" data-titlesonly="">

overview/get\_started overview/team\_communication
overview/plan\_activities

</div>


---
## File: ./content/applications/productivity/discuss/overview/plan_activities.md

# Get Organized by Planning Activities

When you plan activities you minimize the risk of uncertainties, as you
provide clear directions for the course of your next action. In addition
to that, you do not leave space for wasteful activities and reduce the
chance of having overlapping actions between team members.

## Where do I see my schedule activities?

Access and manage your activities wherever you are in Odoo by the
*Activities* menu.

![View of crm leads page emphasizing the activities menu for Odoo
Discuss](plan_activities/activities_menu.png)

## Plan activities

Activities can be planned and managed from the chatter by clicking on
*Schedule activity*, or through Kanban views.

![View of crm leads and the option to schedule an activity for Odoo
Discuss](plan_activities/schedule_activity.png)

### Set your activity types

A number of activities types are available by default in Odoo (call,
email, meeting, etc.). However, you can set new ones going to `Settings
--> Activity types`.

![View of the settings page emphasizing the menu activity types for Odoo
Discuss](plan_activities/settings_activities_types.png)

<div class="tip">

<div class="title">

Tip

</div>

If you need to create an activity type with an available calendar, make
sure to create it with an *Action to Perform* set as *Meeting*.

</div>

### Recommend next activities

Odoo helps you to plan a flow of activities by allowing you to set
*Recommended Next Activities*.

![View of an activity type form emphasizing the field recommended next
activities for
Odoo&#10;Discuss](plan_activities/recommended_activities.png)

Once the respective activity is completed, select *Done & Schedule Next*
and next steps are suggested to you.

![View of an activity being schedule emphasizing the recommended
activities field being&#10;shown for Odoo
Discuss](plan_activities/schedule_recommended_activity.png)

<div class="seealso">

\- `get_started` - `team_communication`

</div>


---
## File: ./content/applications/productivity/discuss/overview/team_communication.md

# Efficiently Communicate Using Channels

You can use channels to organize discussions between individual teams,
departments, projects, or any other group that requires regular
communication. This way, you keep everyone in the loop updated with the
latest developments.

## Public and Private channels

A *Public* channel can be seen by everyone, while a *Private* one is
only visible to users invited to it.

![View of discuss’s sidebar and a channel being created in Odo
Discuss](team_communication/create_channel.png)

<div class="tip">

<div class="title">

Tip

</div>

A public channel is best used when many employees need to access
information (such as company announcements), whereas a private channel
could be used whenever information should be limited to specific groups
(such as a specific department).

</div>

### Configuration options

You can configure a channel’s name, description, email alias, and
privacy by clicking on the *Channel Settings* icon on the sidebar.

![View of a channel’s settings form in Odoo
Discuss](team_communication/channel_settings.png)

#### Privacy and Members

Changing *Who can follow the group’s activities?* allows you to control
which groups can have access to the channel. Note that allowing
*Everyone* to follow a private channel lets other users view and join
it, as they would a public one.  
If you choose *Invited people only*, go to the *Members* tab to add your
members, or, go to Discuss’ main page, select the channel and click on
*Invite*.

![View of Discuss’ sidebar emphasizing the option to invite members in
Odoo Discuss](team_communication/invite_channel.png)

For *Selected group of users*, the option *Auto Subscribe Groups*
automatically add its members as followers. In other words, while
*Authorized Groups* limits which users can access the channel, *Auto
Subscribe Groups* automatically adds the user as a member as long as
they are part of the group.

### Use a channel as a mailing list

Choosing to *Send messages by email* configures the channel to behave as
a mailing list.  
Enabling this option allows you to *Moderate this channel*, meaning that
messages will need to be approved before being sent.

![View of a message with a pending moderation status in Odoo
Discuss](team_communication/pending_moderation.png)

Under the *Moderation* tab choose as many moderators as you need, and if
you would like them to receive an *Automatic notification*.  
Mark *Send guidelines to new subscribers* to automatically send
instructions to newcomers.

![View of a channel’s settings form emphasizing the tab moderation in
Odoo Discuss](team_communication/moderation_settings.png)

Moderators can: *Accept*, *Reject*, *Discard*, *Always Allow* or *Ban*
messages.

![View of a message to be moderated in Odoo
Discuss](team_communication/moderate_messages.png)

<div class="note">

<div class="title">

Note

</div>

Members of a mailing channel receive messages through email regardless
of their `notification preference <get_started>`.

</div>

Once a channel is moderated, the menu *Ban List* allows you to add email
addresses per moderated channel to auto-ban them from sending messages.

![View of a channel’s setting form emphasizing the ban Lists menu in
Odoo Discuss](team_communication/ban_list.png)

## Quick search bar

Once at least 20 channels, direct message and live chat conversations
(if the module is installed on your database) are pinned in the sidebar,
a *Quick search…* bar is displayed. It is a clever way to filter
conversations and quickly find the one you need.

![View of the Discuss’ sidebar emphasizing the quick search bar in Odoo
Discuss](team_communication/quick_search.png)

### Finding channels

Click on *Channels* (on the sidebar), browse through the list of public
channels, and join or leave them from a single screen.  
Apply filters criteria and save it for later use. The search function
accepts wildcards by using the underscore character *(\_)* to represent
a single character.

![View of a channel being searched through filters in Odoo
Discuss](team_communication/filter.png)

<div class="seealso">

\- `get_started` - `plan_activities`

</div>


---
## File: ./content/applications/productivity/discuss/overview/get_started.md

# Get started with Discuss

Odoo *Discuss* is an internal communication app that allows users to
connect through messages, notes, and file sharing, either through a
persistent chat window that works across applications, or through the
dedicated *Discuss* dashboard.

## Choose notifications preference

Access user-specific preferences for the *Discuss* app by navigating to
`Settings app
--> Users --> User --> Preferences tab`.

![View of the Preferences tab for Odoo
Discuss.](get_started/preferences-user.png)

By default, the `Notification` field is set as `Handle by Emails`. With
this setting enabled, a notification email will be sent by Odoo every
time a message is sent from the chatter, a note is sent with an
<span class="title-ref">@</span> mention (from chatter), or a
notification is sent for a record that the user follows. Something that
triggers a notification is changing of the stage (if an emailis
configured to be sent, for example if the task is set to `Done`).

By choosing `Handle in Odoo`, the above notifications are shown in the
*Discuss* app's *inbox*. Messages can have the following actions taken
on them: respond with an emoji by clicking `Add a Reaction`, or reply to
the message by clicking on `Reply`. Additional actions may include
starring the message by clicking `Marked as Todo`, or pinning the
message by selecting `Pin` or even mark the message as unread by
selecting `Marked as unread`.

![View of an inbox message and its action options in Odoo
Discuss.](get_started/reactions-discuss.png)

Clicking `Mark as Todo` on a message causes it to appear on the
`Starred` page, while clicking `Mark as Read` moves the message to
`History`.

![View of messages marked as todo in Odoo
Discuss.](get_started/starred-messages.png)

## Start chatting

The first time a user logs in to their account, OdooBot sends a message
asking for permission to send desktop notifications for chats. If
accepted, the user will receive push notifications on their desktop for
the messages they receive, regardless of where the user is in Odoo.

![View of the messages under the messaging menu emphasizing the request
for push&#10;notifications for Odoo
Discuss.](get_started/odoobot-push.png)

<div class="tip">

<div class="title">

Tip

</div>

To stop receiving desktop notifications, reset the notifications
settings of the browser.

</div>

To start a chat, go to the `Discuss` app and click on the `+ (plus)`
icon next to `Direct Messages` or `Channels` in the left menu of the
dashboard.

![View of Discuss's panel emphasizing the titles channels and direct
messages in Odoo&#10;Discuss.](get_started/channels-direct-messages.png)

A company can also easily create `public and private channels
</applications/productivity/discuss/overview/team_communication>`.

### Mentions in the chat and on the chatter

To mention a user within a chat or the chatter, type
<span class="title-ref">@user-name</span>; to refer to a channel, type
<span class="title-ref">\#channel-name</span>. The user mentioned will
be notified in their *inbox* or through an email, depending on their
communication settings.

![View of a couple of chat window messages for Odoo
Discuss.](get_started/chat-windows.png)

<div class="tip">

<div class="title">

Tip

</div>

When a user is mentioned, the search list (list of names) suggests
values first based on the task's followers, and secondly on employees.
If the record being searched does not match with either a follower or
employee, the scope of the search becomes all partners.

</div>

### User status

It is helpful to see what colleagues are up to and how quickly they can
respond to messages by checking their *status*. The status is shown on
the left side of a contact's name on the `Discuss` sidebar, on the
*messaging menu* and when listed in the *chatter*.

  - Green = online
  - Orange = away
  - White = offline
  - Airplane = out of the office

![View of the contacts' status for Odoo
Discuss.](get_started/status.png)

<div class="seealso">

\- `/applications/productivity/discuss/overview/team_communication` -
`/applications/productivity/discuss/overview/plan_activities`

</div>


---
## File: ./content/administration/install/cdn.md

# Set up a content delivery network (CDN)

## Deploying with KeyCDN

A `CDN (Content Delivery Network)` or *content distribution network*, is
a geographically distributed network of servers that provides high speed
internet content. The `CDN (Content
Delivery Network)` provides quick, high-quality content delivery for
content-heavy websites.

This document will guide you through the setup of a
[KeyCDN](https://www.keycdn.com) account with an Odoo powered website.

### Create a pull zone in the KeyCDN dashboard

On the KeyCDN dashboard, start by navigating to the `Zones` menu item on
the left. On the form, give a value to the `Zone Name`, which will
appear as part of the `CDN
(Content Delivery Network)`'s `URL (Uniform Resource Locator)`. Then,
set the `Zone
Status` to `active` to engage the zone. For the `Zone Type` set the
value to `Pull`, and then, finally, under the `Pull Settings`, enter the
`Origin URL`— this address should be the full Odoo database `URL
(Uniform Resource
Locator)`.

<div class="example">

Use `https://yourdatabase.odoo.com` and replace the *yourdatabase*
subdomain prefix with the actual name of the database. A custom `URL
(Uniform Resource Locator)` can be used, as well, in place of the Odoo
subdomain that was provided to the database.

</div>

![KeyCDN's Zone configuration page.](cdn/keycdn-zone.png)

Under the `General Settings` heading below the zone form, click the
`Show all
settings` button to expand the zone options. This should be the last
option on the page. After expanding the `General Settings` ensure that
the `CORS` option is `enabled`.

Next, scroll to the bottom of the zone configuration page and `Save` the
changes. KeyCDN will indicate that the new zone will be deployed. This
can take about 10 minutes.

![KeyCDN deploying the new Zone.](cdn/zone-url.png)

<div class="note">

<div class="title">

Note

</div>

A new `Zone URL` has been generated for your Zone, in this example it is
`pulltest-xxxxx.kxcdn.com`. This value will differ for each database.

</div>

Copy this `Zone URL` to a text editor for later, as it will be used in
the next steps.

### Configure the Odoo instance with the new zone

In the Odoo `Website` app, go to the `Settings` and then activate the
`Content Delivery Network (CDN)` setting and copy/paste the `Zone URL`
value from the earlier step into the `CDN Base URL` field. This field is
only visible and configurable when `Developer Mode
<../../applications/general/developer_mode>` is activated.

<div class="note">

<div class="title">

Note

</div>

Ensure that there are two *forward slashes*
(<span class="title-ref">//</span>) before the `CDN Base URL` and one
forward slash (<span class="title-ref">/</span>) after the `CDN Base
URL`.

</div>

`Save` the settings when complete.

![Activate the CDN setting in Odoo.](cdn/cdn-base-url.png)

Now the website is using the CDN for the resources matching the `CDN
filters` regular expressions.

In the HTML of the Odoo website, the `CDN (content delivery network)`
integration is evidenced as working properly by checking the `URL
(Uniform Resource Locators)` of images. The *CDN Base URL* value can be
seen by using your web browser's `Inspect` feature on the Odoo website.
Look for it's record by searching within the `Network` tab inside of
devtools.

![The CDN Base URL can be seen using the inspect function on the Odoo
website.](cdn/test-pull.png)

### Prevent security issues by activating cross-origin resource sharing (CORS)

A security restriction in some browsers (such as Mozilla Firefox and
Google Chrome) prevents a remotely linked CSS file to fetch relative
resources on this same external server.

If the `CORS (Cross-Origin Resource Sharing)` option isn't enabled in
the `CDN
Zone`, the more obvious resulting problem on a standard Odoo website
will be the lack of *Font Awesome* icons because the font file declared
in the *Font Awesome* CSS won't be loaded from the remote server.

When these cross-origin resource issues occur, a security error message
similar to the output below will appear in the web browser's developer
console:

`Font from origin 'http://pulltest-xxxxx.kxcdn.com' has been blocked
from loading /shop:1 by Cross-Origin Resource Sharing policy: No
'Access-Control-Allow-Origin' header is present on the requested
resource. Origin 'http://yourdatabase.odoo.com' is therefore not allowed
access.`

![Error message populated in the browser
console.](cdn/odoo-security-message.png)

Enabling the `CORS (Cross-Origin Resource Sharing)` option in the `CDN
(Content Delivery
Network)` settings fixes this issue.


---
## File: ./content/administration/install/email_gateway.md

# Email gateway

The Odoo mail gateway allows you to inject directly all the received
emails in Odoo.

Its principle is straightforward: your SMTP server executes the
"mailgate" script for every new incoming email.

The script takes care of connecting to your Odoo database through
XML-RPC, and send the emails via the
<span class="title-ref">MailThread.message\_process()</span> feature.

## Prerequisites

  - Administrator access to the Odoo database.
  - Your own mail server such as Postfix or Exim.
  - Technical knowledge on how to configure an email server.

## For Postfix

In you alias config (`/etc/aliases`):

``` text
email@address: "|/odoo-directory/addons/mail/static/scripts/odoo-mailgate.py -d <database-name> -u <userid> -p <password>"
```

<div class="note">

<div class="title">

Note

</div>

Resources

  - [Postfix](http://www.postfix.org/documentation.html)
  - [Postfix aliases](http://www.postfix.org/aliases.5.html)
  - [Postfix virtual](http://www.postfix.org/virtual.8.html)

</div>

## For Exim

``` text
*: |/odoo-directory/addons/mail/static/scripts/odoo-mailgate.py -d <database-name> -u <userid> -p <password>
```

<div class="note">

<div class="title">

Note

</div>

Resources

  - [Exim](https://www.exim.org/docs.html)

</div>

<div class="tip">

<div class="title">

Tip

</div>

If you don't have access/manage your email server, use `inbound messages
<email_communication/inbound_messages>`.

</div>


---
## File: ./content/administration/install/source.md

# Source

The source 'installation' is not about installing Odoo but running it
directly from the source instead.

Using the Odoo source can be more convenient for module developers as it
is more easily accessible than using packaged installers.

It makes starting and stopping Odoo more flexible and explicit than the
services set up by the packaged installers. Also, it allows overriding
settings using `command-line parameters
<reference/cmdline>` without needing to edit a configuration file.

Finally, it provides greater control over the system's setup and allows
to more easily keep (and run) multiple versions of Odoo side-by-side.

## Fetch the sources

There are two ways to obtain the source code of Odoo: as a ZIP
**archive** or through **Git**.

### Archive

Community edition:

  - [Odoo download page](https://www.odoo.com/page/download)
  - [GitHub Community repository](https://github.com/odoo/odoo)
  - [Nightly server](https://nightly.odoo.com)

Enterprise edition:

  - [Odoo download page](https://www.odoo.com/page/download)
  - [GitHub Enterprise repository](https://github.com/odoo/enterprise)

### Git

<div class="note">

<div class="title">

Note

</div>

It is required to have [Git](https://git-scm.com/) installed, and it is
recommended to have a basic knowledge of Git commands to proceed.

</div>

To clone a Git repository, choose between cloning with HTTPS or SSH. In
most cases, the best option is HTTPS. However, choose SSH to contribute
to Odoo source code or when following the `Getting
Started developer tutorial </developer/tutorials/getting_started>`.

<div class="tabs">

<div class="group-tab">

Linux

<div class="tabs">

<div class="tab">

Clone with HTTPS

``` console
$ git clone https://github.com/odoo/odoo.git
$ git clone https://github.com/odoo/enterprise.git
```

</div>

<div class="tab">

Clone with SSH

``` console
$ git clone git@github.com:odoo/odoo.git
$ git clone git@github.com:odoo/enterprise.git
```

</div>

</div>

</div>

<div class="group-tab">

Windows

<div class="tabs">

<div class="tab">

Clone with HTTPS

``` doscon
C:\> git clone https://github.com/odoo/odoo.git
C:\> git clone https://github.com/odoo/enterprise.git
```

</div>

<div class="tab">

Clone with SSH

``` doscon
C:\> git clone git@github.com:odoo/odoo.git
C:\> git clone git@github.com:odoo/enterprise.git
```

</div>

</div>

</div>

<div class="group-tab">

Mac OS

<div class="tabs">

<div class="tab">

Clone with HTTPS

``` console
$ git clone https://github.com/odoo/odoo.git
$ git clone https://github.com/odoo/enterprise.git
```

</div>

<div class="tab">

Clone with SSH

``` console
$ git clone git@github.com:odoo/odoo.git
$ git clone git@github.com:odoo/enterprise.git
```

</div>

</div>

</div>

</div>

<div class="note">

<div class="title">

Note

</div>

**The Enterprise git repository does not contain the full Odoo source
code**. It is only a collection of extra add-ons. The main server code
is in the Community edition. Running the Enterprise version means
running the server from the Community version with the
<span class="title-ref">addons-path</span> option set to the folder with
the Enterprise edition. It is required to clone both the Community and
Enterprise repositories to have a working Odoo Enterprise installation.

</div>

## Prepare

### Python

Odoo requires **Python 3.7** or later to run.

<div class="tabs">

<div class="group-tab">

Linux

Use a package manager to download and install Python 3 if needed.

</div>

<div class="group-tab">

Windows

[Download the latest version of
Python 3](https://www.python.org/downloads/windows/) and install it.

During installation, check **Add Python 3 to PATH**, then click
**Customize Installation** and make sure that **pip** is checked.

</div>

<div class="group-tab">

Mac OS

Use a package manager ([Homebrew](https://brew.sh/),
[MacPorts](https://www.macports.org)) to download and install Python 3
if needed.

</div>

</div>

<div class="note">

<div class="title">

Note

</div>

If Python 3 is already installed, make sure that the version is 3.7 or
above, as previous versions are not compatible with Odoo.

<div class="tabs">

<div class="group-tab">

Linux

``` console
$ python3 --version
```

</div>

<div class="group-tab">

Windows

``` doscon
C:\> python --version
```

</div>

<div class="group-tab">

Mac OS

``` console
$ python3 --version
```

</div>

</div>

Verify that [pip](https://pip.pypa.io) is also installed for this
version.

<div class="tabs">

<div class="group-tab">

Linux

``` console
$ pip3 --version
```

</div>

<div class="group-tab">

Windows

``` doscon
C:\> pip --version
```

</div>

<div class="group-tab">

Mac OS

``` console
$ pip3 --version
```

</div>

</div>

</div>

### PostgreSQL

Odoo uses PostgreSQL as its database management system.

<div class="tabs">

<div class="group-tab">

Linux

Use a package manager to download and install PostgreSQL (supported
versions: 12.0 or above). It can be achieved by executing the following:

``` console
$ sudo apt install postgresql postgresql-client
```

</div>

<div class="group-tab">

Windows

[Download PostgreSQL](https://www.postgresql.org/download/windows)
(supported versions: 12.0 or above) and install it.

</div>

<div class="group-tab">

Mac OS

Use [Postgres.app](https://postgresapp.com) to download and install
PostgreSQL (supported version: 12.0 or above).

<div class="tip">

<div class="title">

Tip

</div>

To make the command line tools bundled with Postgres.app available, make
sure to set up the <span class="title-ref">$PATH</span> variable by
following the [Postgres.app CLI tools
instructions](https://postgresapp.com/documentation/cli-tools.html).

</div>

</div>

</div>

By default, the only user is <span class="title-ref">postgres</span>. As
Odoo forbids connecting as <span class="title-ref">postgres</span>,
create a new PostgreSQL user.

<div class="tabs">

<div class="group-tab">

Linux

``` console
$ sudo -u postgres createuser -s $USER
$ createdb $USER
```

<div class="note">

<div class="title">

Note

</div>

Because the PostgreSQL user has the same name as the Unix login, it is
possible to connect to the database without a password.

</div>

</div>

<div class="group-tab">

Windows

1.  Add PostgreSQL's <span class="title-ref">bin</span> directory (by
    default: `C:\\Program Files\\PostgreSQL\\<version>\\bin`) to the
    <span class="title-ref">PATH</span>.
2.  Create a postgres user with a password using the pg admin gui:
    1.  Open **pgAdmin**.
    2.  Double-click the server to create a connection.
    3.  Select `Object --> Create --> Login/Group Role`.
    4.  Enter the username in the **Role Name** field (e.g.,
        <span class="title-ref">odoo</span>).
    5.  Open the **Definition** tab, enter a password (e.g.,
        <span class="title-ref">odoo</span>), and click **Save**.
    6.  Open the **Privileges** tab and switch **Can login?** to
        <span class="title-ref">Yes</span> and **Create database?** to
        <span class="title-ref">Yes</span>.

</div>

<div class="group-tab">

Mac OS

``` console
$ sudo -u postgres createuser -s $USER
$ createdb $USER
```

<div class="note">

<div class="title">

Note

</div>

Because the PostgreSQL user has the same name as the Unix login, it is
possible to connect to the database without a password.

</div>

</div>

</div>

### Dependencies

<div class="tabs">

<div class="group-tab">

Linux

Using **distribution packages** is the preferred way of installing
dependencies. Alternatively, install the Python dependencies with
**pip**.

<div class="tabs">

<div class="tab">

Debian/Ubuntu

For Debian-based systems, the packages are listed in the
[debian/control](%7BGITHUB_PATH%7D/debian/control) file of the Odoo
sources.

On Debian/Ubuntu, the following commands should install the required
packages:

``` console
$ cd /CommunityPath
$ sed -n -e '/^Depends:/,/^Pre/ s/ python3-\(.*\),/python3-\1/p' debian/control | sudo xargs apt-get install -y
```

</div>

<div class="tab">

Install with pip

As some of the Python packages need a compilation step, they require
system libraries to be installed.

On Debian/Ubuntu, the following command should install these required
libraries:

``` console
$ sudo apt install python3-pip libldap2-dev libpq-dev libsasl2-dev
```

Odoo dependencies are listed in the `requirements.txt` file located at
the root of the Odoo Community directory.

<div class="note">

<div class="title">

Note

</div>

The Python packages in `requirements.txt` are based on their stable/LTS
Debian/Ubuntu corresponding version at the moment of the Odoo release.
For example, for Odoo 15.0, the
<span class="title-ref">python3-babel</span> package version is 2.8.0 in
Debian Bullseye and 2.6.0 in Ubuntu Focal. The lowest version is then
chosen in the `requirements.txt`.

</div>

<div class="tip">

<div class="title">

Tip

</div>

It can be preferable not to mix Python module packages between different
instances of Odoo or with the system. However, it is possible to use
[virtualenv](https://pypi.org/project/virtualenv/) to create isolated
Python environments.

</div>

Navigate to the path of the Odoo Community installation
(`CommunityPath`) and run **pip** on the requirements file to install
the requirements for the current user.

``` console
$ cd /CommunityPath
$ pip install -r requirements.txt
```

</div>

</div>

</div>

<div class="group-tab">

Windows

Before installing the dependencies, download and install the [Build
Tools for Visual Studio](https://visualstudio.microsoft.com/downloads/).
Select **C++ build tools** in the **Workloads** tab and install them
when prompted.

Odoo dependencies are listed in the
<span class="title-ref">requirements.txt</span> file located at the root
of the Odoo Community directory.

> 
> 
> <div class="tip">
> 
> <div class="title">
> 
> Tip
> 
> </div>
> 
> It can be preferable not to mix Python module packages between
> different instances of Odoo or with the system. However, it is
> possible to use [virtualenv](https://pypi.org/project/virtualenv/) to
> create isolated Python environments.
> 
> </div>

Navigate to the path of the Odoo Community installation
(<span class="title-ref">CommunityPath</span>) and run **pip** on the
requirements file in a terminal **with Administrator privileges**:

``` doscon
C:\> cd \CommunityPath
C:\> pip install setuptools wheel
C:\> pip install -r requirements.txt
```

</div>

<div class="group-tab">

Mac OS

Odoo dependencies are listed in the
<span class="title-ref">requirements.txt</span> file located at the root
of the Odoo Community directory.

> 
> 
> <div class="tip">
> 
> <div class="title">
> 
> Tip
> 
> </div>
> 
> It can be preferable not to mix Python module packages between
> different instances of Odoo or with the system. However, it is
> possible to use [virtualenv](https://pypi.org/project/virtualenv/) to
> create isolated Python environments.
> 
> </div>

Navigate to the path of the Odoo Community installation
(<span class="title-ref">CommunityPath</span>) and run **pip** on the
requirements file:

``` console
$ cd /CommunityPath
$ pip3 install setuptools wheel
$ pip3 install -r requirements.txt
```

<div class="warning">

<div class="title">

Warning

</div>

Non-Python dependencies must be installed with a package manager
([Homebrew](https://brew.sh/), [MacPorts](https://www.macports.org)).

1.  Download and install the **Command Line Tools**:
    
    ``` console
    $ xcode-select --install
    ```

2.  Use the package manager to install non-Python dependencies.

</div>

</div>

</div>

<div class="note">

<div class="title">

Note

</div>

For languages using a **right-to-left interface** (such as Arabic or
Hebrew), the <span class="title-ref">rtlcss</span> package is required.

<div class="tabs">

<div class="group-tab">

Linux

1.  Download and install **nodejs** and **npm** with a package manager.

2.  Install \`rtlcss\`:
    
    ``` console
    $ sudo npm install -g rtlcss
    ```

</div>

<div class="group-tab">

Windows

1.  Download and install [nodejs](https://nodejs.org/en/download).

2.  Install \`rtlcss\`:
    
    ``` doscon
    C:\> npm install -g rtlcss
    ```

3.  Edit the system environment's variable
    <span class="title-ref">PATH</span> to add the folder where
    <span class="title-ref">rtlcss.cmd</span> is located (typically:
    `C:\\Users\\<user>\\AppData\\Roaming\\npm\\`).

</div>

<div class="group-tab">

Mac OS

1.  Download and install **nodejs** with a package manager
    ([Homebrew](https://brew.sh/),
    [MacPorts](https://www.macports.org)).

2.  Install \`rtlcss\`:
    
    ``` console
    $ sudo npm install -g rtlcss
    ```

</div>

</div>

</div>

<div class="warning">

<div class="title">

Warning

</div>

<span class="title-ref">wkhtmltopdf</span> is not installed through
**pip** and must be installed manually in
[version 0.12.5](https://github.com/wkhtmltopdf/wkhtmltopdf/releases/tag/0.12.5)
for it to support headers and footers. Check out the [wkhtmltopdf
wiki](https://github.com/odoo/odoo/wiki/Wkhtmltopdf) for more details on
the various versions.

</div>

## Running Odoo

Once all dependencies are set up, Odoo can be launched by running
<span class="title-ref">odoo-bin</span>, the command-line interface of
the server. It is located at the root of the Odoo Community directory.

To configure the server, either specify `command-line arguments
<reference/cmdline/server>` or a `configuration file
<reference/cmdline/config>`.

<div class="tip">

<div class="title">

Tip

</div>

For the Enterprise edition, add the path to the
<span class="title-ref">enterprise</span> add-ons to the
<span class="title-ref">addons-path</span> argument. Note that it must
come before the other paths in
<span class="title-ref">addons-path</span> for add-ons to be loaded
correctly.

</div>

Common necessary configurations are:

  - PostgreSQL user and password.
  - Custom addon paths beyond the defaults to load custom modules.

A typical way to run the server would be:

<div class="tabs">

<div class="group-tab">

Linux

``` console
$ cd /CommunityPath
$ python3 odoo-bin --addons-path=addons -d mydb
```

Where <span class="title-ref">CommunityPath</span> is the path of the
Odoo Community installation, and <span class="title-ref">mydb</span> is
the name of the PostgreSQL database.

</div>

<div class="group-tab">

Windows

``` doscon
C:\> cd CommunityPath/
C:\> python odoo-bin -r dbuser -w dbpassword --addons-path=addons -d mydb
```

Where <span class="title-ref">CommunityPath</span> is the path of the
Odoo Community installation, <span class="title-ref">dbuser</span> is
the PostgreSQL login, <span class="title-ref">dbpassword</span> is the
PostgreSQL password, and <span class="title-ref">mydb</span> is the name
of the PostgreSQL database.

</div>

<div class="group-tab">

Mac OS

``` console
$ cd /CommunityPath
$ python3 odoo-bin --addons-path=addons -d mydb
```

Where <span class="title-ref">CommunityPath</span> is the path of the
Odoo Community installation, and <span class="title-ref">mydb</span> is
the name of the PostgreSQL database.

</div>

</div>

After the server has started (the INFO log
<span class="title-ref">odoo.modules.loading: Modules loaded.</span> is
printed), open <http://localhost:8069> in a web browser and log into the
Odoo database with the base administrator account: use
<span class="title-ref">admin</span> as the email and, again,
<span class="title-ref">admin</span> as the password.

<div class="tip">

<div class="title">

Tip

</div>

\- From there, create and manage new `users
<../../applications/general/users/manage_users>`. - The user account
used to log into Odoo's web interface differs from the `--db_user
<odoo-bin -r>` CLI argument.

</div>

<div class="seealso">

`The list of CLI arguments for odoo-bin </developer/reference/cli>`

</div>


---
## File: ./content/administration/install/deploy.md

# System configuration

This document describes basic steps to set up Odoo in production or on
an internet-facing server. It follows `installation <../install>`, and
is not generally necessary for a development systems that is not exposed
on the internet.

<div class="warning">

<div class="title">

Warning

</div>

If you are setting up a public server, be sure to check our `security`
recommendations\!

</div>

## dbfilter

Odoo is a multi-tenant system: a single Odoo system may run and serve a
number of database instances. It is also highly customizable, with
customizations (starting from the modules being loaded) depending on the
"current database".

This is not an issue when working with the backend (web client) as a
logged-in company user: the database can be selected when logging in,
and customizations loaded afterwards.

However it is an issue for non-logged users (portal, website) which
aren't bound to a database: Odoo needs to know which database should be
used to load the website page or perform the operation. If multi-tenancy
is not used that is not an issue, there's only one database to use, but
if there are multiple databases accessible Odoo needs a rule to know
which one it should use.

That is one of the purposes of `--db-filter <odoo-bin --db-filter>`: it
specifies how the database should be selected based on the hostname
(domain) that is being requested. The value is a [regular
expression](https://docs.python.org/3/library/re.html), possibly
including the dynamically injected hostname (`%h`) or the first
subdomain (`%d`) through which the system is being accessed.

For servers hosting multiple databases in production, especially if
`website` is used, dbfilter **must** be set, otherwise a number of
features will not work correctly.

### Configuration samples

  - Show only databases with names beginning with 'mycompany'

in `the configuration file <reference/cmdline/config_file>` set:

``` ini
[options]
dbfilter = ^mycompany.*$
```

  - Show only databases matching the first subdomain after `www`: for
    example the database "mycompany" will be shown if the incoming
    request was sent to `www.mycompany.com` or `mycompany.co.uk`, but
    not for `www2.mycompany.com` or `helpdesk.mycompany.com`.

in `the configuration file <reference/cmdline/config_file>` set:

``` ini
[options]
dbfilter = ^%d$
```

<div class="note">

<div class="title">

Note

</div>

Setting a proper `--db-filter <odoo-bin --db-filter>` is an important
part of securing your deployment. Once it is correctly working and only
matching a single database per hostname, it is strongly recommended to
block access to the database manager screens, and to use the
`--no-database-list` startup parameter to prevent listing your
databases, and to block access to the database management screens. See
also [security](#security).

</div>

## PostgreSQL

By default, PostgreSQL only allows connection over UNIX sockets and
loopback connections (from "localhost", the same machine the PostgreSQL
server is installed on).

UNIX socket is fine if you want Odoo and PostgreSQL to execute on the
same machine, and is the default when no host is provided, but if you
want Odoo and PostgreSQL to execute on different machines\[1\] it will
need to [listen to network
interfaces](https://www.postgresql.org/docs/9.6/static/runtime-config-connection.html)\[2\],
either:

  - Only accept loopback connections and [use an SSH
    tunnel](https://www.postgresql.org/docs/9.6/static/ssh-tunnels.html)
    between the machine on which Odoo runs and the one on which
    PostgreSQL runs, then configure Odoo to connect to its end of the
    tunnel
  - Accept connections to the machine on which Odoo is installed,
    possibly over ssl (see [PostgreSQL connection
    settings](https://www.postgresql.org/docs/9.6/static/runtime-config-connection.html)
    for details), then configure Odoo to connect over the network

### Configuration sample

  - Allow tcp connection on localhost
  - Allow tcp connection from 192.168.1.x network

in `/etc/postgresql/9.5/main/pg_hba.conf` set:

``` text
# IPv4 local connections:
host    all             all             127.0.0.1/32            md5
host    all             all             192.168.1.0/24          md5
```

in `/etc/postgresql/9.5/main/postgresql.conf` set:

``` text
listen_addresses = 'localhost,192.168.1.2'
port = 5432
max_connections = 80
```

### Configuring Odoo

Out of the box, Odoo connects to a local postgres over UNIX socket via
port 5432. This can be overridden using `the database options
<reference/cmdline/server/database>` when your Postgres deployment is
not local and/or does not use the installation defaults.

The `packaged installers <packages>` will automatically create a new
user (`odoo`) and set it as the database user.

  - The database management screens are protected by the `admin_passwd`
    setting. This setting can only be set using configuration files, and
    is simply checked before performing database alterations. It should
    be set to a randomly generated value to ensure third parties can not
    use this interface.

  - All database operations use the `database options
    <reference/cmdline/server/database>`, including the database
    management screen. For the database management screen to work
    requires that the PostgreSQL user have `createdb` right.

  - Users can always drop databases they own. For the database
    management screen to be completely non-functional, the PostgreSQL
    user needs to be created with `no-createdb` and the database must be
    owned by a different PostgreSQL user.
    
    <div class="warning">
    
    <div class="title">
    
    Warning
    
    </div>
    
    the PostgreSQL user *must not* be a superuser
    
    </div>

#### Configuration sample

  - connect to a PostgreSQL server on 192.168.1.2
  - port 5432
  - using an 'odoo' user account,
  - with 'pwd' as a password
  - filtering only db with a name beginning with 'mycompany'

in `the configuration file <reference/cmdline/config_file>` set:

``` ini
[options]
admin_passwd = mysupersecretpassword
db_host = 192.168.1.2
db_port = 5432
db_user = odoo
db_password = pwd
dbfilter = ^mycompany.*$
```

### SSL Between Odoo and PostgreSQL

Since Odoo 11.0, you can enforce ssl connection between Odoo and
PostgreSQL. in Odoo the db\_sslmode control the ssl security of the
connection with value chosen out of 'disable', 'allow', 'prefer',
'require', 'verify-ca' or 'verify-full'

[PostgreSQL
Doc](https://www.postgresql.org/docs/current/static/libpq-ssl.html)

## Builtin server

Odoo includes built-in HTTP, cron, and live-chat servers, using either
multi-threading or multi-processing.

The **multi-threaded** server is a simpler server primarily used for
development, demonstrations, and its compatibility with various
operating systems (including Windows). A new thread is spawned for every
new HTTP request, even for long-running requests such as long polling.
Extra daemonic cron threads are spawned too. Due to a Python limitation
(GIL), it doesn't make the best use of the hardware.

The multi-threaded server is the default server, also for docker
containers. It is selected by leaving the `--workers <odoo-bin
--workers>` option out or setting it to `0`.

The **multi-processing** server is a full-blown server primarily used
for production. It is not liable to the same Python limitation (GIL) on
resource usage and hence makes the best use of the hardware. A pool of
workers is created upon server startup. New HTTP requests are queued by
the OS until there are workers ready to process them. An extra
event-driven HTTP worker for the live chat is spawned on an alternative
port. Extra cron workers are spawned too. A configurable process reaper
monitors resource usage and can kill/restart failed workers.

The multi-processing server is opt-in. It is selected by setting the
`--workers
<odoo-bin --workers>` option to a non-null integer.

<div class="note">

<div class="title">

Note

</div>

Because it is highly customized for Linux servers, the multi-processing
server is not available on Windows.

</div>

### Worker number calculation

  - Rule of thumb : (\#CPU \* 2) + 1
  - Cron workers need CPU
  - 1 worker \~= 6 concurrent users

### memory size calculation

  - We consider 20% of the requests are heavy requests, while 80% are
    simpler ones
  - A heavy worker, when all computed field are well designed, SQL
    requests are well designed, ... is estimated to consume around 1GB
    of RAM
  - A lighter worker, in the same scenario, is estimated to consume
    around 150MB of RAM

Needed RAM = \#worker \* ( (light\_worker\_ratio \*
light\_worker\_ram\_estimation) + (heavy\_worker\_ratio \*
heavy\_worker\_ram\_estimation) )

### LiveChat

In multi-processing, a dedicated LiveChat worker is automatically
started and listens on the `--longpolling-port <odoo-bin
--longpolling-port>`. By default, the HTTP requests will keep accessing
the normal HTTP workers instead of the LiveChat one. You must deploy a
proxy in front of Odoo and redirect incoming requests whose path starts
with `/longpolling` to the LiveChat worker. You must also start Odoo in
`--proxy-mode <odoo-bin --proxy-mode>` so it uses the real client
headers (such as hostname, scheme, and IP) instead of the proxy ones.

### Configuration sample

  - Server with 4 CPU, 8 Thread
  - 60 concurrent users
  - 60 users / 6 = 10 \<- theorical number of worker needed
  - (4 \* 2) + 1 = 9 \<- theorical maximal number of worker
  - We'll use 8 workers + 1 for cron. We'll also use a monitoring system
    to measure cpu load, and check if it's between 7 and 7.5 .
  - RAM = 9 \* ((0.8\*150) + (0.2\*1024)) \~= 3Go RAM for Odoo

in `the configuration file <reference/cmdline/config_file>`:

``` ini
[options]
limit_memory_hard = 1677721600
limit_memory_soft = 629145600
limit_request = 8192
limit_time_cpu = 600
limit_time_real = 1200
max_cron_threads = 1
workers = 8
```

## HTTPS

Whether it's accessed via website/web client or web service, Odoo
transmits authentication information in cleartext. This means a secure
deployment of Odoo must use HTTPS\[3\]. SSL termination can be
implemented via just about any SSL termination proxy, but requires the
following setup:

  - Enable Odoo's `proxy mode <odoo-bin --proxy-mode>`. This should only
    be enabled when Odoo is behind a reverse proxy
  - Set up the SSL termination proxy ([Nginx termination
    example](https://nginx.com/resources/admin-guide/nginx-ssl-termination/))
  - Set up the proxying itself ([Nginx proxying
    example](https://nginx.com/resources/admin-guide/reverse-proxy/))
  - Your SSL termination proxy should also automatically redirect
    non-secure connections to the secure port

### Configuration sample

  - Redirect http requests to https
  - Proxy requests to odoo

in `the configuration file <reference/cmdline/config_file>` set:

``` ini
proxy_mode = True
```

in `/etc/nginx/sites-enabled/odoo.conf` set:

``` nginx
#odoo server
upstream odoo {
  server 127.0.0.1:8069;
}
upstream odoochat {
  server 127.0.0.1:8072;
}

# http -> https
server {
  listen 80;
  server_name odoo.mycompany.com;
  rewrite ^(.*) https://$host$1 permanent;
}

server {
  listen 443 ssl;
  server_name odoo.mycompany.com;
  proxy_read_timeout 720s;
  proxy_connect_timeout 720s;
  proxy_send_timeout 720s;

  # Add Headers for odoo proxy mode
  proxy_set_header X-Forwarded-Host $host;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header X-Forwarded-Proto $scheme;
  proxy_set_header X-Real-IP $remote_addr;

  # SSL parameters
  ssl_certificate /etc/ssl/nginx/server.crt;
  ssl_certificate_key /etc/ssl/nginx/server.key;
  ssl_session_timeout 30m;
  ssl_protocols TLSv1.2;
  ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;
  ssl_prefer_server_ciphers off;

  # log
  access_log /var/log/nginx/odoo.access.log;
  error_log /var/log/nginx/odoo.error.log;

  # Redirect longpoll requests to odoo longpolling port
  location /longpolling {
    proxy_pass http://odoochat;
  }

  # Redirect requests to odoo backend server
  location / {
    proxy_redirect off;
    proxy_pass http://odoo;
  }

  # common gzip
  gzip_types text/css text/scss text/plain text/xml application/xml application/json application/javascript;
  gzip on;
}
```

## Odoo as a WSGI Application

It is also possible to mount Odoo as a standard
[WSGI](https://wsgi.readthedocs.org/) application. Odoo provides the
base for a WSGI launcher script as `odoo-wsgi.example.py`. That script
should be customized (possibly after copying it from the setup
directory) to correctly set the configuration directly in
`odoo.tools.config` rather than through the command-line or a
configuration file.

However the WSGI server will only expose the main HTTP endpoint for the
web client, website and webservice API. Because Odoo does not control
the creation of workers anymore it can not setup cron or livechat
workers

### Cron Workers

Starting one of the built-in Odoo servers next to the WSGI server is
required to process cron jobs. That server must be configured to only
process crons and not HTTP requests using the `--no-http <odoo-bin
--no-http>` cli option or the `http_enable = False` configuration file
setting.

On Linux-like systems, using the multi-processing server over the
multi-threading one is recommended to benefit from better hardware usage
and increased stability, i.e., using the `--workers=-1 <odoo-bin
--workers>` and `--max-cron-threads=n
<odoo-bin --max-cron-threads>` cli options.

### LiveChat

Using a gevent-compatible WSGI server is required for the correct
operation of the live chat feature. That server should be able to handle
many simultaneous long-lived HTTP requests but doesn't need a lot of
processing power. All requests whose path starts with `/longpolling`
should be directed to that server. A regular (thread/process-based) WSGI
server should be used for all other requests.

The Odoo cron server can also be used to serve the live chat requests.
Just drop the `--no-http <odoo-bin --no-http>` cli option from the cron
server and make sure requests whose path starts with `/longpolling` are
directed to this server, either on the `--http-port <odoo-bin
--http-port>` (multi-threading server) or on the `--longpolling-port
<odoo-bin --longpolling-port>` (multi-processing server).

## Serving Static Files

For development convenience, Odoo directly serves all static files in
its modules. This may not be ideal when it comes to performances, and
static files should generally be served by a static HTTP server.

Odoo static files live in each module's `static/` folder, so static
files can be served by intercepting all requests to
`/{MODULE}/static/{FILE}`, and looking up the right module (and file) in
the various addons paths.

<div class="todo">

test whether it would be interesting to serve filestored attachments via
this, and how (e.g. possibility of mapping ir.attachment id to filestore
hash in the database?)

</div>

## Security

For starters, keep in mind that securing an information system is a
continuous process, not a one-shot operation. At any moment, you will
only be as secure as the weakest link in your environment.

So please do not take this section as the ultimate list of measures that
will prevent all security problems. It's only intended as a summary of
the first important things you should be sure to include in your
security action plan. The rest will come from best security practices
for your operating system and distribution, best practices in terms of
users, passwords, and access control management, etc.

When deploying an internet-facing server, please be sure to consider the
following security-related topics:

  - Always set a strong super-admin admin password, and restrict access
    to the database management pages as soon as the system is set up.
    See `db_manager_security`.

  - Choose unique logins and strong passwords for all administrator
    accounts on all databases. Do not use 'admin' as the login. Do not
    use those logins for day-to-day operations, only for
    controlling/managing the installation. *Never* use any default
    passwords like admin/admin, even for test/staging databases.

  - Do **not** install demo data on internet-facing servers. Databases
    with demo data contain default logins and passwords that can be used
    to get into your systems and cause significant trouble, even on
    staging/dev systems.

  - Use appropriate database filters ( `--db-filter <odoo-bin
    --db-filter>`) to restrict the visibility of your databases
    according to the hostname. See `db_filter`. You may also use `-d
    <odoo-bin -d>` to provide your own (comma-separated) list of
    available databases to filter from, instead of letting the system
    fetch them all from the database backend.

  - Once your `db_name` and `db_filter` are configured and only match a
    single database per hostname, you should set `list_db` configuration
    option to `False`, to prevent listing databases entirely, and to
    block access to the database management screens (this is also
    exposed as the `--no-database-list <odoo-bin --no-database-list>`
    command-line option)

  - Make sure the PostgreSQL user (`--db_user <odoo-bin --db_user>`) is
    *not* a super-user, and that your databases are owned by a different
    user. For example they could be owned by the `postgres` super-user
    if you are using a dedicated non-privileged `db_user`. See also
    `setup/deploy/odoo`.

  - Keep installations updated by regularly installing the latest
    builds, either via GitHub or by downloading the latest version from
    <https://www.odoo.com/page/download> or <http://nightly.odoo.com>

  - Configure your server in multi-process mode with proper limits
    matching your typical usage (memory/CPU/timeouts). See also
    `builtin_server`.

  - Run Odoo behind a web server providing HTTPS termination with a
    valid SSL certificate, in order to prevent eavesdropping on
    cleartext communications. SSL certificates are cheap, and many free
    options exist. Configure the web proxy to limit the size of
    requests, set appropriate timeouts, and then enable the `proxy mode
    <odoo-bin --proxy-mode>` option. See also `https_proxy`.

  - If you need to allow remote SSH access to your servers, make sure to
    set a strong password for **all** accounts, not just
    <span class="title-ref">root</span>. It is strongly recommended to
    entirely disable password-based authentication, and only allow
    public key authentication. Also consider restricting access via a
    VPN, allowing only trusted IPs in the firewall, and/or running a
    brute-force detection system such as
    <span class="title-ref">fail2ban</span> or equivalent.

  - Consider installing appropriate rate-limiting on your proxy or
    firewall, to prevent brute-force attacks and denial of service
    attacks. See also `login_brute_force` for specific measures.
    
    Many network providers provide automatic mitigation for Distributed
    Denial of Service attacks (DDOS), but this is often an optional
    service, so you should consult with them.

  - Whenever possible, host your public-facing demo/test/staging
    instances on different machines than the production ones. And apply
    the same security precautions as for production.

  - If your public-facing Odoo server has access to sensitive internal
    network resources or services (e.g. via a private VLAN), implement
    appropriate firewall rules to protect those internal resources. This
    will ensure that the Odoo server cannot be used accidentally (or as
    a result of malicious user actions) to access or disrupt those
    internal resources. Typically this can be done by applying an
    outbound default DENY rule on the firewall, then only explicitly
    authorizing access to internal resources that the Odoo server needs
    to access. [Systemd IP traffic access
    control](http://0pointer.net/blog/ip-accounting-and-access-lists-with-systemd.html)
    may also be useful to implement per-process network access control.

  - If your public-facing Odoo server is behind a Web Application
    Firewall, a load-balancer, a transparent DDoS protection service
    (like CloudFlare) or a similar network-level device, you may wish to
    avoid direct access to the Odoo system. It is generally difficult to
    keep the endpoint IP addresses of your Odoo servers secret. For
    example they can appear in web server logs when querying public
    systems, or in the headers of emails posted from Odoo. In such a
    situation you may want to configure your firewall so that the
    endpoints are not accessible publicly except from the specific IP
    addresses of your WAF, load-balancer or proxy service. Service
    providers like CloudFlare usually maintain a public list of their IP
    address ranges for this purpose.

  - If you are hosting multiple customers, isolate customer data and
    files from each other using containers or appropriate "jail"
    techniques.

  - Setup daily backups of your databases and filestore data, and copy
    them to a remote archiving server that is not accessible from the
    server itself.

  - Deploying Odoo on Linux is strongly recommended over Windows. Should
    you choose nevertheless to deploy on a Windows platform, a thorough
    security hardening review of the server should be conducted and is
    outside of the scope of this guide.

### Blocking Brute Force Attacks

For internet-facing deployments, brute force attacks on user passwords
are very common, and this threat should not be neglected for Odoo
servers. Odoo emits a log entry whenever a login attempt is performed,
and reports the result: success or failure, along with the target login
and source IP.

The log entries will have the following form.

Failed login:

    2018-07-05 14:56:31,506 24849 INFO db_name odoo.addons.base.res.res_users: Login failed for db:db_name login:admin from 127.0.0.1

Successful login:

    2018-07-05 14:56:31,506 24849 INFO db_name odoo.addons.base.res.res_users: Login successful for db:db_name login:admin from 127.0.0.1

These logs can be easily analyzed by an intrusion prevention system such
as <span class="title-ref">fail2ban</span>.

For example, the following fail2ban filter definition should match a
failed login:

    [Definition]
    failregex = ^ \d+ INFO \S+ \S+ Login failed for db:\S+ login:\S+ from <HOST>
    ignoreregex =

This could be used with a jail definition to block the attacking IP on
HTTP(S).

Here is what it could look like for blocking the IP for 15 minutes when
10 failed login attempts are detected from the same IP within 1 minute:

    [odoo-login]
    enabled = true
    port = http,https
    bantime = 900  ; 15 min ban
    maxretry = 10  ; if 10 attempts
    findtime = 60  ; within 1 min  /!\ Should be adjusted with the TZ offset
    logpath = /var/log/odoo.log  ;  set the actual odoo log path here

### Database Manager Security

`setup/deploy/odoo` mentioned `admin_passwd` in passing.

This setting is used on all database management screens (to create,
delete, dump or restore databases).

If the management screens must not be accessible at all, you should set
`list_db` configuration option to `False`, to block access to all the
database selection and management screens.

<div class="warning">

<div class="title">

Warning

</div>

It is strongly recommended to disable the Database Manager for any
internet-facing system\! It is meant as a development/demo tool, to make
it easy to quickly create and manage databases. It is not designed for
use in production, and may even expose dangerous features to attackers.
It is also not designed to handle large databases, and may trigger
memory limits.

On production systems, database management operations should always be
performed by the system administrator, including provisioning of new
databases and automated backups.

</div>

Be sure to setup an appropriate `db_name` parameter (and optionally,
`db_filter` too) so that the system can determine the target database
for each request, otherwise users will be blocked as they won't be
allowed to choose the database themselves.

If the management screens must only be accessible from a selected set of
machines, use the proxy server's features to block access to all routes
starting with `/web/database` except (maybe) `/web/database/selector`
which displays the database-selection screen.

If the database-management screen should be left accessible, the
`admin_passwd` setting must be changed from its `admin` default: this
password is checked before allowing database-alteration operations.

It should be stored securely, and should be generated randomly e.g.

``` console
$ python3 -c 'import base64, os; print(base64.b64encode(os.urandom(24)))'
```

which will generate a 32 characters pseudorandom printable string.

## Supported Browsers

Odoo supports all the major desktop and mobile browsers available on the
market, as long as they are supported by their publishers.

Here are the supported browsers:

  - Google Chrome
  - Mozilla Firefox
  - Microsoft Edge
  - Apple Safari

<div class="warning">

<div class="title">

Warning

</div>

Please make sure your browser is up-to-date and still supported by its
publisher before filing a bug report.

</div>

<div class="note">

<div class="title">

Note

</div>

Since Odoo 13.0, ES6 is supported. Therefore, IE support is dropped.

</div>

1.  to have multiple Odoo installations use the same PostgreSQL
    database, or to provide more computing resources to both software.

2.  technically a tool like [socat](http://www.dest-unreach.org/socat/)
    can be used to proxy UNIX sockets across networks, but that is
    mostly for software which can only be used over UNIX sockets

3.  or be accessible only over an internal packet-switched network, but
    that requires secured switches, protections against [ARP
    spoofing](https://en.wikipedia.org/wiki/ARP_spoofing) and precludes
    usage of WiFi. Even over secure packet-switched networks, deployment
    over HTTPS is recommended, and possible costs are lowered as
    "self-signed" certificates are easier to deploy on a controlled
    environment than over the internet.


---
## File: ./content/administration/install/packages.md

# Packaged installers

Odoo provides packaged installers for Debian-based Linux distributions
(Debian, Ubuntu, etc.), RPM-based Linux distributions (Fedora, CentOS,
RHEL, etc.), and Windows for the Community and Enterprise editions.

Official **Community** nightly packages with all relevant dependency
requirements are available on the [nightly
server](https://nightly.odoo.com).

<div class="note">

<div class="title">

Note

</div>

Nightly packages may be difficult to keep up to date.

</div>

Official **Community** and **Enterprise** packages can be downloaded
from the [Odoo download page](https://www.odoo.com/page/download).

<div class="note">

<div class="title">

Note

</div>

It is required to be logged in as a paying customer or partner to
download the Enterprise packages.

</div>

## Linux

### Prepare

Odoo needs a [PostgreSQL](https://www.postgresql.org/) server to run
properly.

<div class="tabs">

<div class="group-tab">

Debian/Ubuntu

The default configuration for the Odoo 'deb' package is to use the
PostgreSQL server on the same host as the Odoo instance. Execute the
following command to install the PostgreSQL server:

``` console
$ sudo apt install postgresql -y
```

</div>

<div class="group-tab">

Fedora

Make sure that the <span class="title-ref">sudo</span> command is
available and well configured and, only then, execute the following
command to install the PostgreSQL server:

``` console
$ sudo dnf install -y postgresql-server
$ sudo postgresql-setup --initdb --unit postgresql
$ sudo systemctl enable postgresql
$ sudo systemctl start postgresql
```

</div>

</div>

<div class="warning">

<div class="title">

Warning

</div>

<span class="title-ref">wkhtmltopdf</span> is not installed through
**pip** and must be installed manually in
[version 0.12.5](https://github.com/wkhtmltopdf/wkhtmltopdf/releases/tag/0.12.5)
for it to support headers and footers. Check out the [wkhtmltopdf
wiki](https://github.com/odoo/odoo/wiki/Wkhtmltopdf) for more details on
the various versions.

</div>

### Repository

Odoo S.A. provides a repository that can be used to install the
**Community** edition by executing the following commands:

<div class="tabs">

<div class="group-tab">

Debian/Ubuntu

``` console
$ wget -q -O - https://nightly.odoo.com/odoo.key | sudo gpg --dearmor -o /usr/share/keyrings/odoo-archive-keyring.gpg
$ echo 'deb [signed-by=/usr/share/keyrings/odoo-archive-keyring.gpg] https://nightly.odoo.com/{CURRENT_MAJOR_BRANCH}/nightly/deb/ ./' | sudo tee /etc/apt/sources.list.d/odoo.list
$ sudo apt-get update && sudo apt-get install odoo
```

Use the usual <span class="title-ref">apt-get upgrade</span> command to
keep the installation up-to-date.

</div>

<div class="group-tab">

Fedora

``` console
$ sudo dnf config-manager --add-repo=https://nightly.odoo.com/{CURRENT_MAJOR_BRANCH}/nightly/rpm/odoo.repo
$ sudo dnf install -y odoo
$ sudo systemctl enable odoo
$ sudo systemctl start odoo
```

</div>

</div>

<div class="note">

<div class="title">

Note

</div>

Currently, there is no nightly repository for the Enterprise edition.

</div>

### Distribution package

Instead of using the repository, packages for both the **Community** and
**Enterprise** editions can be downloaded from the [Odoo download
page](https://www.odoo.com/page/download).

<div class="tabs">

<div class="group-tab">

Debian/Ubuntu

<div class="note">

<div class="title">

Note

</div>

Odoo {CURRENT\_MAJOR\_VERSION} 'deb' package currently supports [Debian
Buster](https://www.debian.org/releases/buster/) and
[Ubuntu 18.04](https://releases.ubuntu.com/18.04) or above.

</div>

Once downloaded, execute the following commands **as root** to install
Odoo as a service, create the necessary PostgreSQL user, and
automatically start the server:

``` console
# dpkg -i <path_to_installation_package> # this probably fails with missing dependencies
# apt-get install -f # should install the missing dependencies
# dpkg -i <path_to_installation_package>
```

<div class="warning">

<div class="title">

Warning

</div>

\- The <span class="title-ref">python3-xlwt</span> Debian package,
needed to export into the XLS format, does not exist in Debian Buster
nor Ubuntu 18.04. If needed, install it manually with the following:

``` console
$ sudo pip3 install xlwt
```

\- The <span class="title-ref">num2words</span> Python package - needed
to render textual amounts - does not exist in Debian Buster nor Ubuntu
18.04, which could cause problems with the
<span class="title-ref">l10n\_mx\_edi</span> module. If needed, install
it manually with the following:

``` console
$ sudo pip3 install num2words
```

</div>

</div>

<div class="group-tab">

Fedora

<div class="note">

<div class="title">

Note

</div>

Odoo {CURRENT\_MAJOR\_VERSION} 'rpm' package supports Fedora 36.

</div>

Once downloaded, the package can be installed using the 'dnf' package
manager:

``` console
$ sudo dnf localinstall odoo_{CURRENT_MAJOR_BRANCH}.latest.noarch.rpm
$ sudo systemctl enable odoo
$ sudo systemctl start odoo
```

</div>

</div>

## Windows

> 
> 
> <div class="warning">
> 
> <div class="title">
> 
> Warning
> 
> </div>
> 
> Windows packaging is offered for the convenience of testing or running
> single-user local instances but production deployment is discouraged
> due to a number of limitations and risks associated with deploying
> Odoo on a Windows platform.
> 
> </div>

1.  Download the installer from the [nightly
    server](https://nightly.odoo.com) (Community only) or the Windows
    installer from the [Odoo download
    page](https://www.odoo.com/page/download) (any edition.

2.  Execute the downloaded file.
    
    <div class="warning">
    
    <div class="title">
    
    Warning
    
    </div>
    
    On Windows 8 and later, a warning titled *Windows protected your PC*
    may be displayed. Click **More Info** and then **Run anyway** to
    proceed.
    
    </div>

3.  Accept the [UAC](https://en.wikipedia.org/wiki/User_Account_Control)
    prompt.

4.  Go through the installation steps.

Odoo launches automatically at the end of the installation.


---
## File: ./content/administration/install/online.md

# Online

Online instances are accessed using any web browser and do not require a
local installation.

## Demo

To quickly try out Odoo, shared [demo](https://demo.odoo.com) instances
are available. No registration is required, but each instance only lives
for a few hours.

## Odoo Online

[Odoo Online](https://www.odoo.com/trial) provides private instances
which are fully managed and hosted by Odoo. It can be used for long-term
production or to test Odoo thoroughly, including customizations that
don't require code.

<div class="note">

<div class="title">

Note

</div>

Odoo Online is incompatible with custom modules or the Odoo App Store.

</div>


---
## File: ./content/administration/odoo_sh/advanced/submodules.md

# Submodules

## Overview

A [Git submodule](https://git-scm.com/book/en/v2/Git-Tools-Submodules)
allows you to integrate other Git projects into your code, without the
need to copy-paste all their code.

Indeed, your custom modules can depend on modules from other
repositories. Regarding Odoo, this feature allows you to add modules
from other Git repositories into the branches of your repository. Adding
these dependencies in your branch through submodules makes the
deployment of your code and servers easier, as you can clone the
repositories added as submodules at the same time you clone your own
repository.

Besides, you can choose the branch of the repository added as submodule
and you have the control of the revision you want. It's up to you to
decide whether you want to pin the submodule to a specific revision and
when you want to update to a newer revision.

In Odoo.sh, the submodules give you the possibility to use and depend on
modules available in other repositories. The platform will detect that
you added modules through submodules in your branches and add them to
your addons path automatically so you can install them in your
databases.

If you add private repositories as submodules in your branches, you need
to configure a deploy key in your Odoo.sh project settings and in your
repository settings. Otherwise Odoo.sh won't be allowed to download
them. The procedure is detailed in the chapter `Settings > Submodules
<odoosh-gettingstarted-settings-submodules>`.

## Adding a submodule

### With Odoo.sh (simple)

<div class="warning">

<div class="title">

Warning

</div>

For now it is not possible to add **private** repositories with this
method. You can nevertheless do so `with Git
<odoosh-advanced-submodules-withgit>`.

</div>

On Odoo.sh, in the branches view of your project, choose the branch in
which you want to add a submodule.

In the upper right corner, click on the *Submodule* button, and then on
*Run*.

![image](submodules/advanced-submodules-button.png)

A dialog with a form is shown. Fill the inputs as follows:

  - Repository URL: The SSH URL of the repository.
  - Branch: The branch you want to use.
  - Path: The folder in which you want to add this submodule in your
    branch.

![image](submodules/advanced-submodules-dialog.png)

On Github, you can get the repository URL with the *Clone or download*
button of the repository. Make sure to *use SSH*.

![image](submodules/advanced-submodules-github-sshurl.png)

### With Git (advanced)

In a terminal, in the folder where your Git repository is cloned,
checkout the branch in which you want to add a submodule:

``` bash
$ git checkout <branch>
```

Then, add the submodule using the command below:

``` bash
$ git submodule add -b <branch> <git@yourprovider.com>:<username/repository.git> <path>
```

Replace

  - *\<git@yourprovider.com\>:\<username/repository.git\>* by the SSH
    URL of the repository you want to add as submodule,
  - *\<branch\>* by the branch you want to use in the above repository,
  - *\<path\>* by the folder in which you want to add this submodule.

Commit and push your changes:

``` bash
$ git commit -a && git push -u <remote> <branch>
```

Replace

  - \<remote\> by the repository on which you want to push your changes.
    For a standard Git setup, this is *origin*.
  - \<branch\> by the branch on which you want to push your changes.
    Most likely the branch you used `git checkout` on in the first step.

You can read the [git-scm.com
documentation](https://git-scm.com/book/en/v2/Git-Tools-Submodules) for
more details about the Git submodules. For instance, if you would like
to update your submodules to have their latest revision, you can follow
the chapter [Pulling in Upstream
changes](https://git-scm.com/book/en/v2/Git-Tools-Submodules#_pulling_in_upstream_changes_from_the_submodule_remote).

## Ignore modules

If you're adding a repository that contains a lot of modules, you may
want to ignore some of them in case there are any that are installed
automatically. To do so, you can prefix your submodule folder with a
`.`. The platform will ignore this folder and you can hand pick your
modules by creating symlinks to them from another folder.


---
## File: ./content/administration/odoo_sh/advanced/frequent_technical_questions.md

# Frequent Technical Questions

## "Scheduled actions do not run at the exact time they were expected"

On the Odoo.sh platform, we cannot guarantee an exact running time for
scheduled actions.

This is due to the fact that there might be multiple customers on the
same server, and we must guarantee a fair share of the server for every
customer. Scheduled actions are therefore implemented slightly
differently than on a regular Odoo server, and are run on a *best
effort* policy.

<div class="warning">

<div class="title">

Warning

</div>

Do not expect any scheduled action to be run more often than every 5
min.

</div>

## Are there "best practices" regarding scheduled actions?

**Odoo.sh always limits the execution time of scheduled actions (\*aka\*
crons).** Therefore, you must keep this fact in mind when developing
your own crons.

We advise that:

  - Your scheduled actions should work on small batches of records.
  - Your scheduled actions should commit their work after processing
    each batch; this way, if they get interrupted by the time-limit,
    there is no need to start over.
  - Your scheduled actions should be
    [idempotent](https://stackoverflow.com/a/1077421/3332416): they must
    not cause side-effects if they are started more often than expected.


---
## File: ./content/administration/odoo_sh/advanced/containers.md

# Containers

## Overview

Each build is isolated within its own container (Linux namespaced
container).

The base is an Ubuntu system, where all of Odoo's required dependencies,
as well as common useful packages, are installed.

If your project requires additional Python dependencies, or more recent
releases, you can define a `requirements.txt` file in the root of your
branches listing them. The platform will take care to install these
dependencies in your containers. [The pip requirements
specifiers](https://pip.pypa.io/en/stable/reference/pip_install/#requirement-specifiers)
documentation can help you write a `requirements.txt` file. To have a
concrete example, check out the [requirements.txt file of
Odoo](%7BGITHUB_PATH%7D/requirements.txt).

The `requirements.txt` files of submodules are taken into account as
well. The platform looks for `requirements.txt` files in each folder
containing Odoo modules: Not in the module folder itself, but in their
parent folder.

## Directory structure

As the containers are Ubuntu based, their directory structure follows
the linux Filesystem Hierarchy Standard. [Ubuntu's filesystem tree
overview](https://help.ubuntu.com/community/LinuxFilesystemTreeOverview#Main_directories)
explains the main directories.

Here are the Odoo.sh pertinent directories:

    .
    ├── home
    │    └── odoo
    │         ├── src
    │         │    ├── odoo                Odoo Community source code
    │         │    │    └── odoo-bin       Odoo server executable
    │         │    ├── enterprise          Odoo Enterprise source code
    │         │    ├── themes              Odoo Themes source code
    │         │    └── user                Your repository branch source code
    │         ├── data
    │         │    ├── filestore           database attachments, as well as the files of binary fields
    │         │    └── sessions            visitors and users sessions
    │         └── logs
    │              ├── install.log         Database installation logs
    │              ├── odoo.log            Running server logs
    │              ├── update.log          Database updates logs
    │              └── pip.log             Python packages installation logs
    └── usr
         ├── lib
         │    ├── python2.7
         │         └── dist-packages       Python 2.7 standard libraries
         │    ├── python3
         │         └── dist-packages       Python 3 standard libraries
         │    └── python3.5
         │         └── dist-packages       Python 3.5 standard libraries
         ├── local
         │    └── lib
         │         ├── python2.7
         │         │    └── dist-packages  Python 2.7 third-party libraries
         │         └── python3.5
         │              └── dist-packages  Python 3.5 third-party libraries
         └── usr
              └── bin
                   ├── python2.7           Python 2.7 executable
                   └── python3.5           Python 3.5 executable

Both Python 2.7 and 3.5 are installed in the containers. However:

  - If your project is configured to use Odoo 10.0, the Odoo server runs
    with Python 2.7.
  - If your project is configured to use Odoo 11.0 or above, the Odoo
    server runs with Python 3.5.

## Database shell

While accessing a container with the shell, you can access the database
using *psql*.

``` bash
odoo@odoo-addons-master-1.odoo.sh:~$ psql
psql (9.5.2, server 9.5.11)
SSL connection (protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384, bits: 256, compression: off)
Type "help" for help.

odoo-addons-master-1=>
```

**Be careful \!** [Use
transactions](https://www.postgresql.org/docs/current/static/sql-begin.html)
(*BEGIN...COMMIT/ROLLBACK*) for every *sql* statements leading to
changes (*UPDATE*, *DELETE*, *ALTER*, ...), especially for your
production database.

The transaction mechanism is your safety net in case of mistake. You
simply have to rollback your changes to revert your database to its
previous state.

For example, it may happen that you forget to set your *WHERE*
condition.

``` sql
odoo-addons-master-1=> BEGIN;
BEGIN
odoo-addons-master-1=> UPDATE res_users SET password = '***';
UPDATE 457
odoo-addons-master-1=> ROLLBACK;
ROLLBACK
```

In such a case, you can rollback to revert the unwanted changes that you
just mistakenly did, and rewrite the statement:

``` sql
odoo-addons-master-1=> BEGIN;
BEGIN
odoo-addons-master-1=> UPDATE res_users SET password = '***' WHERE id = 1;
UPDATE 1
odoo-addons-master-1=> COMMIT;
COMMIT
```

However, do not forget to either commit or rollback your transaction
after having done it. Open transactions may lock records in your tables
and your running database may wait for them to be released. It can cause
a server to hang indefinitely.

In addition, when possible, use your staging databases to test your
statements first. It gives you an extra safety net.

## Run an Odoo server

You can start an Odoo server instance from a container shell. You won't
be able to access it from the outside world with a browser, but you can
for instance:

  - use the Odoo shell,

<!-- end list -->

``` bash
$  odoo-bin shell
>>> partner = env['res.partner'].search([('email', '=', 'asusteK@yourcompany.example.com')], limit=1)
>>> partner.name
'ASUSTeK'
>>> partner.name = 'Odoo'
>>> env['res.partner'].search([('email', '=', 'asusteK@yourcompany.example.com')], limit=1).name
'Odoo'
```

  - install a module,

<!-- end list -->

``` bash
$  odoo-bin -i sale --without-demo=all --stop-after-init
```

  - update a module,

<!-- end list -->

``` bash
$  odoo-bin -u sale --stop-after-init
```

  - run the tests for a module,

<!-- end list -->

``` bash
$  odoo-bin -i sale --test-enable --log-level=test --stop-after-init
```

In the above commands, the argument:

  - `--without-demo=all` prevents demo data to be loaded for all modules
  - `--stop-after-init` will immediately shutdown the server instance
    after it completed the operations you asked.

More options are available and detailed in the `CLI documentation
</developer/reference/cli>`.

You can find in the logs (*\~/logs/odoo.log*) the addons path used by
Odoo.sh to run your server. Look for "*odoo: addons paths*":

    2018-02-19 10:51:39,267 4 INFO ? odoo: Odoo version {BRANCH}
    2018-02-19 10:51:39,268 4 INFO ? odoo: Using configuration file at /home/odoo/.config/odoo/odoo.conf
    2018-02-19 10:51:39,268 4 INFO ? odoo: addons paths: ['/home/odoo/data/addons/{BRANCH}', '/home/odoo/src/user', '/home/odoo/src/enterprise', '/home/odoo/src/themes', '/home/odoo/src/odoo/addons', '/home/odoo/src/odoo/odoo/addons']

**Be careful**, especially with your production database. Operations
that you perform running this Odoo server instance are not isolated:
Changes will be effective in the database. Always, make your tests in
your staging databases.

## Debugging in Odoo.sh

Debugging an Odoo.sh build is not really different than another Python
app. This article only explains the specificities and limitations of the
Odoo.sh platform, and assumes that you already know how to use a
debugger.

<div class="note">

<div class="title">

Note

</div>

If you don't know how to debug a Python application yet, there are
multiple introductory courses that can be easily found on the Internet.

</div>

You can use `pdb`, `pudb` or `ipdb` to debug your code on Odoo.sh. As
the server is run outside a shell, you cannot launch the debugger
directly from your Odoo instance backend as the debugger needs a shell
to operate.

  - [pdb](https://docs.python.org/3/library/pdb.html) is installed by
    default in every container.

  - If you want to use [pudb](https://pypi.org/project/pudb/) or
    [ipdb](https://pypi.org/project/ipdb/) you have to install it
    before.
    
    To do so, you have two options:
    
    >   - temporary (only in the current build):
    >     
    >     ``` bash
    >     $  pip install pudb --user
    >     ```
    >     
    >     or
    >     
    >     ``` bash
    >     $  pip install ipdb --user
    >     ```
    > 
    >   - permanent: add `pudb` or `ipdb` to your project
    >     `requirements.txt` file.

Then edit the code where you want to trigger the debugger and add this:

``` python
import sys
if sys.__stdin__.isatty():
    import pdb; pdb.set_trace()
```

The condition `sys.__stdin__.isatty()` is a hack that detects if you run
Odoo from a shell.

Save the file and then run the Odoo Shell:

``` bash
$ odoo-bin shell
```

Finally, *via* the Odoo Shell, you can trigger the piece of
code/function/method you want to debug.

![Console screenshot showing \`\`pdb\`\` running in an Odoo.sh
shell.](containers/pdb_sh.png)


---
## File: ./content/administration/odoo_sh/overview.md

  - nosearch

# Overview

<div class="toctree" data-titlesonly="">

overview/introduction

</div>


---
## File: ./content/administration/odoo_sh/getting_started.md

  - nosearch

# Get started

<div class="toctree" data-titlesonly="">

getting\_started/create getting\_started/branches
getting\_started/builds getting\_started/status
getting\_started/settings getting\_started/online-editor
getting\_started/first\_module

</div>


---
## File: ./content/administration/odoo_sh/advanced.md

  - nosearch

# Advanced

<div class="toctree" data-titlesonly="">

advanced/containers advanced/submodules
advanced/frequent\_technical\_questions

</div>


---
## File: ./content/administration/odoo_sh/overview/introduction.md

# Introduction to Odoo.sh

<div class="youtube" data-align="right" width="700" height="394">

QuNsa9n9PMg

</div>

The documentation will help you go live with your Odoo.sh project in no
time.


---
## File: ./content/administration/odoo_sh/getting_started/online-editor.md

# Online Editor

## Overview

The online editor allows you to edit the source code of your builds from
a web browser. It also gives you the possibility to open terminals,
Python consoles, Odoo Shell consoles and
[Notebooks](https://jupyterlab.readthedocs.io/en/stable/user/notebook.html).

![image](online-editor/interface-editor.png)

You can access the editor of a build through `the branches tabs
<odoosh-gettingstarted-branches-tabs>`, `the builds dropdown menu
<odoosh-gettingstarted-builds-dropdown-menu>` or by adding
*/odoo-sh/editor* to your build domain name (e.g.
*https://odoo-addons-master-1.dev.odoo.com/odoo-sh/editor*).

## Edit the source code

The working directory is composed of the following folders:

    .
    ├── home
    │    └── odoo
    │         ├── src
    │         │    ├── odoo                Odoo Community source code
    │         │    │    └── odoo-bin       Odoo server executable
    │         │    ├── enterprise          Odoo Enterprise source code
    │         │    ├── themes              Odoo Themes source code
    │         │    └── user                Your repository branch source code
    │         ├── data
    │         │    ├── filestore           database attachments, as well as the files of binary fields
    │         │    └── sessions            visitors and users sessions
    │         └── logs
    │              ├── install.log         Database installation logs
    │              ├── odoo.log            Running server logs
    │              ├── update.log          Database updates logs
    │              └── pip.log             Python packages installation logs

You can edit the source code (files under */src*) in development and
staging builds.

<div class="note">

<div class="title">

Note

</div>

Your changes won't be propagated to a new build, you must commit them in
your source code if you want to make them persist.

</div>

For production builds, the source code is read-only, because applying
local changes on a production server is not a good practice.

  - The source code of your Github repository is located under
    */src/user*,
  - The source code of Odoo is located under
      - */src/odoo* ([odoo/odoo](https://github.com/odoo/odoo)),
      - */src/enterprise*
        ([odoo/enterprise](https://github.com/odoo/enterprise)),
      - */src/themes*
        ([odoo/design-themes](https://github.com/odoo/design-themes)).

To open a file in the editor, just double-click on it in the file
browser panel on the left.

![image](online-editor/interface-editor-open-file.png)

You can then begin to make your changes. You can save your changes with
the menu `File --> Save .. File` or by hitting the `Ctrl+S` shortcut.

![image](online-editor/interface-editor-save-file.png)

If you save a Python file which is under your Odoo server addons path,
Odoo will detect it and reload automatically so your changes are
reflected immediately, without having to restart the server manually.

![image](online-editor/interface-editor-automaticreload.gif)

However, if the change is a data stored in database, such as the label
of a field, or a view, you have to update the according module to apply
the change. You can update the module of the currently opened file by
using the menu `Odoo --> Update current module`. Note that the file
considered as currently opened is the file focused in the text editor,
not the file highlighted in the file browser.

![image](online-editor/interface-editor-update-current-module.png)

You can also open a terminal and execute the command:

``` bash
$ odoo-bin -u <comma-separated module names> --stop-after-init
```

## Commit & Push your changes

You have the possibility to commit and push your changes to your Github
repository.

  - Open a terminal (`File --> New --> Terminal`),
  - Change the directory to *\~/src/user* using `cd ~/src/user`,
  - Stage your changes using `git add`,
  - Commit your changes using `git commit`,
  - Push your changes using `git push https HEAD:<branch>`.

In this last command,

  - *https* is the name of your *HTTPS* Github remote repository (e.g.
    <https://github.com/username/repository.git>),
  - HEAD is the reference to the latest revision you committed,
  - \<branch\> must be replaced by the name of the branch to which you
    want to push the changes, most-likely the current branch if you work
    in a development build.

![image](online-editor/interface-editor-commit-push.png)

<div class="note">

<div class="title">

Note

</div>

The SSH Github remote is not used because your SSH private key is not
hosted in your build containers (for obvious security concerns) nor
forwarded through an SSH Agent (as you access this editor through a web
browser) and you therefore cannot authenticate yourself to Github using
SSH. You have to use the HTTPS remote of your Github repository to push
your changes, which is added automatically named as *https* in your Git
remotes. You will be prompted to enter your Github username and
password. If you activated the two-factor authentication on Github, you
can create a [personal access
token](https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/)
and use it as password. Granting the `repo` permission suffices.

</div>

<div class="note">

<div class="title">

Note

</div>

The Git source folder *\~/src/user* is not checked out on a branch but
rather on a detached revision: This is because builds work on specific
revisions rather than branches. In other words, this means you can have
multiple builds on the same branch, but on different revisions.

</div>

Once your changes are pushed, according to your `branch push behavior
<odoosh-gettingstarted-branches-tabs-settings>`, a new build may be
created. You can continue to work in the editor you pushed from, as it
will have the same revision as the new build that was created, but
always make sure to be in an editor of a build using the latest revision
of your branch.

## Consoles

You can open Python consoles, which are [IPython interactive
shells](https://ipython.readthedocs.io/en/stable/interactive/tutorial.html).
One of the most interesting addition to use a Python console rather than
a IPython shell within a terminal is the [rich
display](https://ipython.readthedocs.io/en/stable/config/integrating.html#rich-display)
capabilities. Thanks to this, you will be able to display objects in
HTML.

You can for instance display cells of a CSV file using
[pandas](https://pandas.pydata.org/pandas-docs/stable/tutorials.html).

![image](online-editor/interface-editor-console-python-read-csv.png)

You can also open an Odoo Shell console to play around with the Odoo
registry and model methods of your database. You can also directly read
or write on your records.

<div class="warning">

<div class="title">

Warning

</div>

In an Odoo Console, transactions are automatically committed. This
means, for instance, that changes in records are applied effectively in
the database. If you change the name of a user, the name of the user is
changed in your database as well. You therefore should use Odoo consoles
carefully on production databases.

</div>

You can use *env* to invoke models of your database registry, e.g.
`env['res.users']`.

``` python
env['res.users'].search_read([], ['name', 'email', 'login'])
[{'id': 2,
'login': 'admin',
'name': 'Administrator',
'email': 'admin@example.com'}]
```

The class `Pretty` gives you the possibility to easily display lists and
dicts in a pretty way, using the [rich
display](https://ipython.readthedocs.io/en/stable/config/integrating.html#rich-display)
mentioned above.

![image](online-editor/interface-editor-console-odoo-pretty.png)

You can also use
[pandas](https://pandas.pydata.org/pandas-docs/stable/tutorials.html) to
display graphs.

![image](online-editor/interface-editor-console-odoo-graph.png)


---
## File: ./content/administration/odoo_sh/getting_started/settings.md

# Settings

## Overview

The settings allow you to manage the configuration of your project.

![image](settings/interface-settings.png)

## Project name

The name of your project.

![image](settings/interface-settings-projectname.png)

This defines the address that will be used to access your production
database.

Addresses of your staging and development builds are derived from this
name and assigned automatically. However, when you change your project
name, only future builds will use the new name.

## Collaborators

Manage the Github users who can access your project.

![image](settings/interface-settings-collaborators.png)

There are two levels of users:

  - Admin: has access to all features of Odoo.sh.
  - User: does not have access to the project settings nor to the
    production and staging databases.

The user group is meant for developers who can make modifications in
your code but are not allowed to access the production data. Users of
this group cannot connect to the production and staging databases using
the *1-click connect* feature, but they can of course use their regular
account on these databases if they have one, using their regular
credentials.

In addition, they cannot use the webshell nor have access to the server
logs.

|  |
|  |
|  |
|  |
|  |
|  |
|  |
|  |
|  |
|  |
|  |
|  |
|  |
|  |
|  |
|  |
|  |
|  |
|  |
|  |

<div class="note">

<div class="title">

Note

</div>

\* Only in staging branches

</div>

## Public Access

Allow public access to your development builds.

![image](settings/interface-settings-public.png)

If activated, this option exposes the Builds page publicly, allowing
visitors to connect to your development builds.

In addition, visitors have access to the logs, shell and mails of your
development builds.

Production and staging builds are excluded, visitors can only see their
status.

## Custom domains

To configure additional domains please refer to the corresponding
branch's `settings tab
<odoosh-gettingstarted-branches-tabs-settings>`.

## Submodules

Configure the deploy keys for the private repositories you use as
submodules in your branches to allow Odoo.sh to download them.

<div class="warning">

<div class="title">

Warning

</div>

These settings are required for **private repositories** only. If you
are looking on how to set up your submodules, instructions are available
in the chapter `Submodules
<odoosh-advanced-submodules>` of this documentation.

</div>

![image](settings/interface-settings-submodules.png)

When a repository is private, it is not possible to publicly download
its branches and revisions. For that reason, you need to configure a
deploy key for Odoo.sh, so the remote Git server allows our platform to
download the revisions of this private repository.

To configure the deploy key for a private repository, proceed as
follows:

  - in the input, paste the SSH URL of your private sub-repository and
    click on *Add*,
      - e.g. *git@github.com:USERNAME/REPOSITORY.git*
      - it can be another Git server than Github, such as Bitbucket,
        Gitlab or even your own self-hosted server
  - copy the public key,
      - it should look like *ssh-rsa
        some...random...characters...here...==*
  - in the settings of the private sub-repository, add the public key
    amongst the deploy keys.
      - Github.com: `Settings --> Deploy keys --> Add deploy key`
      - Bitbucket.com: `Settings --> Access keys --> Add key`
      - Gitlab.com: `Settings --> Repository --> Deploy Keys`
      - Self-hosted: append the key to the git user’s authorized\_keys
        file in its .ssh directory

## Storage Size

This section shows the storage size used by your project.

![image](settings/interface-settings-storage.png)

Storage size is computed as follows:

  - the size of the PostgreSQL database
  - the size of the disk files available in your container: database
    filestore, sessions storage directory...

<div class="warning">

<div class="title">

Warning

</div>

In case you want to analyze disk usage, you can run the tool
[ncdu](https://dev.yorhel.nl/ncdu/man) in your Web Shell.

</div>

Should your production database size grow to exceed what's provisioned
in your subscription, it will automatically be synchronized with it.

## Database Workers

Additional database workers can be configured here. More workers help
increase the load your production database is able to handle. If you add
more, it will automatically be synchronized with your subscription.

![image](settings/interface-settings-workers.png)

<div class="warning">

<div class="title">

Warning

</div>

Adding more workers will not magically solve all performance issues. It
only allows the server to handle more connections at the same time. If
some operations are unusually slow, it's most likely a problem with the
code, if it's not due to your own customizations you can open a ticket
[here](https://www.odoo.com/help).

</div>

## Staging Branches

Additional staging branches allow you to develop and test more features
at the same time. If you add more, it will automatically be synchronized
with your subscription.

![image](settings/interface-settings-staging-branches.png)

## Activation

Shows the status of the project's activation. You can change the
project's activation code if needed.

![image](settings/interface-settings-activation.png)


---
## File: ./content/administration/odoo_sh/getting_started/status.md

# Status

## Overview

The status page shows statistics regarding the servers your project
uses. It includes the servers availability.

![image](status/interface-status.png)


---
## File: ./content/administration/odoo_sh/getting_started/branches.md

# Branches

## Overview

The branches view gives you an overview of the different branches your
repository has.

![image](branches/interface-branches.png)

## Stages

Odoo.sh offers three different stages for your branches: production,
staging and development.

You can change the stage of a branch by drag and dropping it into the
stage section title.

![image](branches/interface-branches-stagechange.png)

### Production

This is the branch holding the code on which your production database
runs. There can be only one production branch.

When you push a new commit in this branch, your production server is
updated with the code of the new revision and is then restarted.

If your changes require the update of a module, such as a change in a
form view, and you want it to be performed automatically, increase the
version number of the module in its manifest (*\_\_manifest\_\_.py*).
The platform will then take care to perform the update during which the
instance will be held temporarily unavailable for maintenance reason.

This method is equivalent to perform an upgrade of the module through
the Apps menu, or through the `-u` switch of `the command line
</developer/reference/cli>`.

In the case the changes in the commit prevent the server to restart, or
if the modules update fails, the server is automatically reverted to the
previous successful code revision and the database is roll-backed as it
was before the update. You still have access to the log of the failed
update, so you can troubleshoot it.

The demo data is not loaded, as it is not meant to be used in a
production database. The unit tests are not performed, as it would
increase the unavailability time of the production database during the
updates.

Partners using trial projects should be aware their production branch,
along with all the staging branches, will automatically be set back to
the development stage after 30 days.

### Staging

Staging branches are meant to test your new features using the
production data without compromising the actual production database with
test records. They will create databases that are neutralized duplicates
of the production database.

The neutralization includes:

  - Disabling scheduled actions. If you want to test them, you can
    trigger their action manually or re-enable them. Be aware that the
    platform will trigger them less often if no one is using the
    database in order to save up resources.
  - Disabling outgoing emails by intercepting them with a mailcatcher.
    An `interface to view <odoosh-gettingstarted-branches-tabs-mails>`
    the emails sent by your database is provided. That way, you do not
    have to worry about sending test emails to your contacts.
  - Setting payment acquirers and shipping providers in test mode.
  - Disabling IAP services

The latest database will be kept alive indefinitely, older ones from the
same branch may get garbage collected to make room for new ones. It will
be valid for 3 months, after which you will be expected to rebuild the
branch. If you make configuration or view changes in these databases,
make sure to document them or write them directly in the modules of the
branch, using XML data files overriding the default configuration or
views.

The unit tests are not performed as, in Odoo, they currently rely on the
demo data, which is not loaded in the production database. In the
future, if Odoo supports to run the unit tests without the demo data,
Odoo.sh will then consider running the tests on staging databases.

### Development

Development branches create new databases using the demo data to run the
unit tests. The installed modules are the ones included in your
branches. You can change this list of modules to install in your
`project Settings
<odoosh-gettingstarted-settings-modules-installation>`.

When you push a new commit in one of these branches, a new server is
started, with a database created from scratch and the new revision of
the branch. The demo data is loaded, and the unit tests are performed by
default. This verifies your changes do not break any of the features
tested by them. If you wish, you can disable the tests or allow specific
tests to be run with custom tags in the `branch's settings
<odoosh-gettingstarted-branches-tabs-settings>`.

Similar to staging branches, the emails are not sent but are intercepted
by a mailcatcher and scheduled actions are not triggered as long as the
database is not in use.

The databases created for development branches are meant to live around
three days. After that, they can be automatically garbage collected to
make room for new databases without prior notice.

### Merging your branches

You can merge your branches easily by drag and dropping them into each
other.

![image](branches/interface-branches-merge.png)

When you want to test the changes of your development branches with the
production data, you can either:

  - merge the development branch into your staging branch, by drag and
    dropping it onto the desired staging branch,
  - drag and dropping the development branch on the staging section
    title, to make it become a staging branch.

When your latest changes are ready for production, you can drag and drop
your staging branch onto your production branch to merge and deploy in
production your newest features.

If you are bold enough, you can merge your development branches into
your production branch as well. It just means you skip the validation of
your changes with the production data through a staging branch.

You can merge your development branches into each other, and your
staging branches into each other.

Of course, you can also use `git merge` directly on your workstation to
merge your branches. Odoo.sh will be notified when new revisions have
been pushed in your branches.

Merging a staging branch in the production branch only merges the source
code: Any configuration changes you made in the staging databases are
not passed to the production database.

If you test configuration changes in staging branches, and want them to
be applied in the production, you have to either:

  - write the configuration changes in XML data files overriding the
    default configuration or views in your branches, and then increase
    the version of your module in its manifest (*\_\_manifest\_\_.py*)
    to trigger the update of the module when you merge your staging
    branch in your production branch. This is the best practice for a
    better scalability of your developments as you will use the Git
    versioning features for all your configuration changes, and
    therefore have a traceability for your changes.
  - pass them manually from your staging to your production database, by
    copy/pasting them.

## Tabs

### History

An overview of your branch history:

  - The messages of the commits and their authors,
  - The various events linked to the platform, such as stage changes,
    database imports, backup restores.

![image](branches/interface-branches-history.png)

For each event, a status is displayed in the top right-hand corner. It
can provide information about the ongoing operation on the database
(installation, update, backup import, ...), or its result (tests
feedback, successful backup import, ...). When an operation is
successful, you can access the database thanks to the *connect* button.

### Mails

This tab contains the mail catcher. It displays an overview of the
emails sent by your database. The mail catcher is available for your
development and staging branches as the emails of your production
database are really sent instead of being intercepted.

![image](branches/interface-branches-mails.png)

### Shell

A shell access to your container. You can perform basic linux commands
(`ls`, `top`) and open a shell on your database by typing `psql`.

![image](branches/interface-branches-shell.png)

You can open multiple tabs and drag-and-drop them to arrange the layout
as you wish, for instance side by side.

<div class="note">

<div class="title">

Note

</div>

Long running shell instances are not guaranteed. Idle shells can be
disconnected at anytime in order to free up resources.

</div>

### Editor

An online integrated development environment (IDE) to edit the source
code. You can also open terminals, Python consoles and even Odoo Shell
consoles.

![image](branches/interface-branches-editor.png)

You can open multiple tabs and drag-and-drop them to arrange the layout
as you wish, for instance side by side.

### Monitoring

This link contains various monitoring metrics of the current build.

![image](branches/interface-branches-monitoring.png)

You can zoom, change the time range or select a specific metric on each
graph. On the graphs, annotations help you relate to changes on the
build (database import, git push, etc...).

### Logs

A viewer to have a look to your server logs.

![image](branches/interface-branches-logs.png)

Different logs are available:

  - install.log: The logs of the database installation. In a development
    branch, the logs of the tests are included.
  - pip.log: The logs of the Python dependencies installation.
  - odoo.log: The logs of the running server.
  - update.log: The logs of the database updates.
  - pg\_long\_queries.log: The logs of psql queries that take an unusual
    amount of time.

If new lines are added in the logs, they will be displayed
automatically. If you scroll to the bottom, the browser will scroll
automatically each time a new line is added.

You can pause the logs fetching by clicking on the according button in
the upper right corner of the view. The fetching is automatically
stopped after 5 minutes. You can restart it using the play button.

### Backups

A list of the backups available for download and restore, the ability to
perform a manual backup and to import a database.

![image](branches/interface-branches-backups.png)

Odoo.sh makes daily backups of the production database. It keeps 7
daily, 4 weekly and 3 monthly backups. Each backup includes the database
dump, the filestore (attachments, binary fields), logs and sessions.

Staging and development databases are not backed up. You nevertheless
have the possibility to restore a backup of the production database in
your staging branches, for testing purposes, or to manually recover data
that has been deleted by accident from the production database.

The list contains the backups kept on the server your production
database is hosted on. This server only keeps one month of backups: 7
daily and 4 weekly backups.

Dedicated backup servers keep the same backups, as well as 3 additional
monthly backups. To restore or download one of these monthly backups,
please [contact us](https://www.odoo.com/help).

If you merge a commit updating the version of one or several modules (in
`__manifest__.py`), or their linked python dependencies (in
`requirements.txt`), then Odoo.sh performs a backup automatically
(flagged with type Update in the list), as either the container will be
changed by the installation of new pip packages, either the database
itself will be changed with the module update triggered afterwards. In
these two cases, we are doing a backup as it may potentially break
things.

If you merge a commit that only changes some code without the
above-mentioned modifications, then no backup is done by Odoo.sh, as
neither the container nor the database is modified so the platform
considers this safe enough. Of course, as an extra precaution, you can
make a backup manually before making big changes in your production
sources in case something goes wrong (those manual backups are available
for about one week). To avoid abuse, we limit manual backups to 5 per
day.

The *import database* feature accepts database archives in the format
provided by:

  - the standard Odoo databases manager, (available for on-premise Odoo
    servers under `/web/database/manager`)
  - the Odoo online databases manager,
  - the Odoo.sh backup download button of this *Backups* tab,
  - the Odoo.sh dump download button in the `Builds view
    <odoosh-gettingstarted-builds>`.

### Upgrade

Available for production and staging branches for valid projects.

<div class="seealso">

`Upgrade documentation <../../upgrade>`

</div>

### Settings

Here you can find a couple of settings that only apply to the currently
selected branch.

![image](branches/interface-branches-settings.jpg)

**Behaviour upon new commit**

For development and staging branches, you can change the branch's
behavior upon receiving a new commit. By default, a development branch
will create a new build and a staging branch will update the previous
build (see the `Production Stage <stage_production>`). This is
especially useful should the feature you're working on require a
particular setup or configuration, to avoid having to manually set it up
again on every commit. If you choose new build for a staging branch, it
will make a fresh copy from the production build every time a commit is
pushed. A branch that is put back from staging to development will
automatically be set to 'Do nothing'.

**Modules installation**

Choose the modules to install automatically for your development builds.

![image](branches/interface-settings-modulesinstallation.png)

  - *Install only my modules* will install the modules of the branch
    only. This is the default option. The `submodules
    <odoosh-advanced-submodules>` are excluded.
  - *Full installation (all modules)* will install the modules of the
    branch, the modules included in the submodules and all standard
    modules of Odoo. When running the full installation, the test suite
    is disabled.
  - *Install a list of modules* will install the modules specified in
    the input just below this option. The names are the technical name
    of the modules, and they must be comma-separated.

If the tests are enabled, the standard Odoo modules suite can take up to
1 hour. This setting applies to development builds only. Staging builds
duplicate the production build and the production build only installs
base.

**Test suite**

For development branches, you can choose to enable or disable the test
suite. It's enabled by default. When the test suite is enabled, you can
restrict them by specifying test tags `test tags
<developer/reference/testing/selection>`.

**Odoo Version**

For development branches only, you can change the version of Odoo,
should you want to test upgraded code or develop features while your
production database is in the process of being upgraded to a newer
version.

In addition, for each version you have two options regarding the code
update.

  - You can choose to benefit from the latest bug, security and
    performance fixes automatically. The sources of your Odoo server
    will be updated weekly. This is the 'Latest' option.
  - You can choose to pin the Odoo sources to a specific revision by
    selecting them from a list of dates. Revisions will expire after 3
    months. You will be notified by mail when the expiration date
    approaches and if you don't take action afterwards, you will
    automatically be set to the latest revision.

**Custom domains**

Here you can configure additional domains for the selected branch. It's
possible to add other *\<name\>.odoo.com* domains or your own custom
domains. For the latter you have to:

  - own or purchase the domain name,
  - add the domain name in this list,
  - in your registrar's domain name manager, configure the domain name
    with a `CNAME` record set to your production database domain name.

For instance, to associate *www.mycompany.com* to your database
*mycompany.odoo.com*:

  - in Odoo.sh, add *www.mycompany.com* in the custom domains of your
    project settings,
  - in your domain name manager (e.g. *godaddy.com*, *gandi.net*,
    *ovh.com*), configure *www.mycompany.com* with a `CNAME` record with
    as value *mycompany.odoo.com*.

Bare domains (e.g. *mycompany.com*) are not accepted:

  - they can only be configured using `A` records,
  - `A` records only accept IP addresses as value,
  - the IP address of your database can change, following an upgrade, a
    hardware failure or your wish to host your database in another
    country or continent.

Therefore, bare domains could suddenly no longer work because of this
change of IP address.

In addition, if you would like both *mycompany.com* and
*www.mycompany.com* to work with your database, having the first
redirecting to the second is amongst the [SEO best
practices](https://support.google.com/webmasters/answer/7451184?hl=en)
(See *Provide one version of a URL to reach a document*) in order to
have one dominant URL. You can therefore just configure *mycompany.com*
to redirect to *www.mycompany.com*. Most domain managers have the
feature to configure this redirection. This is commonly called a web
redirection.

**HTTPS/SSL**

If the redirection is correctly set up, the platform will automatically
generate an SSL certificate with [Let's
Encrypt](https://letsencrypt.org/about/) within the hour and your domain
will be accessible through HTTPS.

While it is currently not possible to configure your own SSL
certificates on the Odoo.sh platform we are considering the feature if
there is enough demand.

**SPF and DKIM compliance**

In case the domain of your users email addresses use SPF (Sender Policy
Framework) or DKIM (DomainKeys Identified Mail), don't forget to
authorize Odoo as a sending host in your domain name settings to
increase the deliverability of your outgoing emails. The configuration
steps are explained in the documentation about `SPF
<email_communication/spf_compliant>` and `DKIM
<email_communication/dkim_compliant>`.

<div class="warning">

<div class="title">

Warning

</div>

Forgetting to configure your SPF or DKIM to authorize Odoo as a sending
host can lead to the delivery of your emails as spam in your contacts
inbox.

</div>

## Shell commands

In the top right-hand corner of the view, different shell commands are
available.

![image](branches/interface-branches-shellcommands.png)

Each command can be copied in the clipboard to be used in a terminal,
and some of them can be used directly from Odoo.sh by clicking the *run*
button in such case a popup will prompt the user in order to define
eventual placeholders such as `<URL>`, `<PATH>`, ...

### Clone

Download the Git repository.

``` bash
$ git clone --recurse-submodules --branch master git@github.com:odoo/odoo.git
```

Clones the repository *odoo/odoo*.

  - `--recurse-submodules`: Downloads the submodules of your repository.
    Submodules included in the submodules are downloaded as well.
  - `--branch`: checks out a specific branch of the repository, in this
    case *master*.

The *run* button is not available for this command, as it is meant to be
used on your machines.

### Fork

Create a new branch based on the current branch.

``` bash
$ git checkout -b feature-1 master
```

Creates a new branch called *feature-1* based on the branch *master*,
and then checkouts it.

``` bash
$ git push -u origin feature-1
```

Uploads the new branch *feature-1* on your remote repository.

### Merge

Merge the current branch in another branch.

``` bash
$ git merge staging-1
```

Merges the branch *staging-1* in the current branch.

``` bash
$ git push -u origin master
```

Uploads the changes you just added in the *master* branch on your remote
repository.

### SSH

#### Setup

In order to use SSH, you have to set up your profile SSH public key (if
it is not already done). To do so, follow these steps:

1.  [Generate a new SSH
    key](https://help.github.com/en/github/authenticating-to-github/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent#generating-a-new-ssh-key)

2.  [Copy the SSH key to your
    clipboard](https://help.github.com/en/github/authenticating-to-github/adding-a-new-ssh-key-to-your-github-account)
    (only apply the step 1)

3.  Paste the copied content to your profile SSH keys and press "Add"
    
    ![image](branches/SSH-key-pasting.png)

4.  The key should appear below
    
    ![image](branches/SSH-key-appearing.png)

#### Connection

To connect to your builds using ssh use the following command in a
terminal:

``` bash
$ ssh <build_id>@<domain>
```

You will find a shortcut for this command into the SSH tab in the upper
right corner.

![image](branches/SSH-panel.png)

Provided you have the `correct access rights
<odoosh-gettingstarted-settings-collaborators>` on the project, you'll
be granted ssh access to the build.

<div class="note">

<div class="title">

Note

</div>

Long running ssh connections are not guaranteed. Idle connections will
be disconnected in order to free up resources.

</div>

### Submodule

Add a branch from another repository in your current branch as a
*submodule*.

*Submodules* allows you to use modules from other repositories in your
project.

The submodules feature is detailed in the chapter `Submodules
<odoosh-advanced-submodules>` of this documentation.

``` bash
$ git submodule add -b master <URL> <PATH>
```

Adds the branch *master* of the repository *\<URL\>* as a submodule
under the path *\<PATH\>* in your current branch.

``` bash
$ git commit -a
```

Commits all your current changes.

``` bash
$ git push -u origin master
```

Uploads the changes you just added in the *master* branch on your remote
repository.

### Delete

Delete a branch from your repository.

``` bash
$ git push origin :master
```

Deletes the branch in your remote repository.

``` bash
$ git branch -D master
```

Deletes the branch in your local copy of the repository.


---
## File: ./content/administration/odoo_sh/getting_started/create.md

# Create your project

## Deploy your platform

Go to [Odoo.sh](https://www.odoo.sh/) and hit the *Deploy your platform*
button.

![image](create/deploy.png)

## Sign in with Github

Sign in with your Github account. If you do not have an account yet, hit
the *Create an account* link.

![image](create/github-signin.png)

## Authorize Odoo.sh

Grant Odoo.sh the required accesses to your account by clicking the
*Authorize* button.

![image](create/github-authorize.png)

Odoo.sh basically needs:

  - to know your Github login and email,
  - to create a new repository in case you decide to start from scratch,
  - to read your existing repositories, including the ones of your
    organizations, in case you want to start from an existing
    repository,
  - to create a webhook to be notified each time you push changes,
  - to commit changes to make your deployment easier, merging branches
    or adding new
    [submodules](https://git-scm.com/book/en/v2/Git-Tools-Submodules)
    for example.

## Submit your project

Choose if you want to start from scratch by creating a new repository,
or if you want to use an existing repository.

Then, choose a name or select the repository you want to use.

Choose the Odoo version you want to use. If you plan to import an
existing database or an existing set of applications, you might need to
choose the according version. If you start from scratch, use the latest
version.

Enter your *subscription code*. This is also called *subscription
referral*, *contract number* or *activation code*.

It should be the code of your Enterprise subscription that includes
Odoo.sh.

Partners can use their partnership codes to start a trial. Should their
clients start a project, they ought to get an Enterprise subscription
including Odoo.sh and use its subscription code. The partner will get
50% of the amount back as commission. Contact your sales representative
or account manager in order to get it.

When submitting the form, if you are notified your subscription is not
valid, it either means:

  - it is not an existing subscription,
  - it is not a partnership subscription,
  - it is an enterprise subscription, but which does not include
    Odoo.sh,
  - it is neither a partnership subscription or an enterprise
    subscription (e.g. an online subscription).

In case of doubt with your subscription, please contact the [Odoo
support](https://www.odoo.com/help).

![image](create/deploy-form.png)

## You're done \!

You can start using Odoo.sh. Your first build is about to be created.
You will soon be able to connect to your first database.

![image](create/deploy-done.png)

## Import your database

You can import your database in your Odoo.sh project as long as it is in
a `supported version
</administration/maintain/supported_versions>` of Odoo.

### Push your modules in production

If you use community or custom modules, add them in a branch in your
Github repository. Databases hosted on the Odoo.com online platform do
not have any custom modules. Users of these databases can therefore skip
this step.

You can structure your modules as you wish, Odoo.sh will automatically
detect the folders containing Odoo addons. For instance, you can put all
your modules folder in the root directory of your repository, or group
the modules in folders by categories that you define (accounting,
project, ...).

For community modules available in public Git repositories, you can also
consider to add them using `Submodules <odoosh-advanced-submodules>`.

Then, either `make this branch the production branch
<odoosh-gettingstarted-branches-stages>`, or `merge it into your
production branch <odoosh-gettingstarted-branches-mergingbranches>`.

### Download a backup

#### On-premise databases

Access the URL `/web/database/manager` of your on-premise database and
download a backup.

<div class="warning">

<div class="title">

Warning

</div>

If you cannot access the database manager, it may have been disabled by
your system administrator. See the `database manager security
documentation <db_manager_security>`.

</div>

You will need the master password of your database server. If you do not
have it, contact your system administrator.

![image](create/create-import-onpremise-backup.png)

Choose a zip including the filestore as the backup format.

![image](create/create-import-onpremise-backup-dialog.png)

#### Odoo Online databases

[Access your databases
manager](https://accounts.odoo.com/my/databases/manage) and download a
backup of your database.

![image](create/create-import-online-backup.png)

<div class="warning">

<div class="title">

Warning

</div>

Online versions (e.g. *saas-*\*) are not supported on Odoo.sh.

</div>

### Upload the backup

Then, in your Odoo.sh project, in the backups tab of your production
branch, import the backup you just downloaded.

![image](create/create-import-production.png)

Once the backup imported, you can access the database using the
*Connect* button in the history of the branch.

![image](create/create-import-production-done.png)

### Check your outgoing email servers

There is a default mail server provided with Odoo.sh. To use it, there
must be no enabled outgoing mail server configured in your database in
`Settings --> Technical --> Outgoing Mail Servers` (`Developer mode
<developer-mode>` must be activated).

After the import of your database, all outgoing email servers are
disabled so you use the Odoo.sh email server provided by default.

<div class="warning">

<div class="title">

Warning

</div>

Port 25 is (and will stay) closed. If you want to connect to an external
SMTP server, you should use ports 465 and 587.

</div>

### Check your scheduled actions

All scheduled actions are disabled after the import.

This is to prevent your newly imported database to perform actions that
could impact your running production, such as sending the mails
remaining in the queue, processing mass mailings, or third-party
services synchronization (Calendars, files hosting, ...).

If you plan to make the imported database your production, enable the
scheduled actions you need. You can check what is enabled in the
database of origin and enable the same actions in the imported database.
Scheduled actions are located under `Settings --> Technical -->
Automation
--> Scheduled Actions`.

### Register your subscription

Your subscription is unlinked after the import.

The imported database is considered a duplicate by default and the
enterprise subscription is therefore removed, as you can only have one
database linked per subscription.

If you plan to make it your production, unlink your former database from
the subscription, and register the newly imported database. Read the
`database registration documentation
<../../maintain/on_premise>` for instructions.


---
## File: ./content/administration/odoo_sh/getting_started/builds.md

# Builds

## Overview

In Odoo.sh, a build is considered as a database loaded by an Odoo server
([odoo/odoo](https://github.com/odoo/odoo) &
[odoo/enterprise](https://github.com/odoo/enterprise)) running on a
specific revision of your project repository in a containerized
environment. Its purpose is to test the well-behavior of the server, the
database and the features with this revision.

![image](builds/interface-builds.png)

In this view, a row represents a branch, and a cell of a row represents
a build of this branch.

Most of the time, builds are created following pushes on your Github
repository branches. They can be created as well when you do other
operations, such as importing a database on Odoo.sh or asking a rebuild
for a branch in your project.

A build is considered successful if no errors or warnings come up during
its creation. A successful build is highlighted in green.

A build is considered failed if errors come up during its creation. A
failed build is highlighted in red.

If warnings come up during the creation, but there are no errors, the
build is considered almost successful. It is highlighted in yellow to
notify the developer warnings were raised.

Builds do not always create a database from scratch. For instance, when
pushing a change on the production branch, the build created just starts
the server with your new revision and tries to load the current
production database on it. If no errors come up, the build is considered
successful, and otherwise failed.

## Stages

### Production

The first build of a production branch creates a database from scratch.
If this build is successful, this database is considered as the
production database of your project.

From then, pushes on the production branch will create new builds that
attempt to load the database using a server running with the new
revision.

If the build is successful, or has warnings but no errors, the
production database will now run with this build, along with the
revision associated to this build.

If the build fails to load or update the database, then the previous
successful build is re-used to load the database, and therefore the
database will run using a server running with the previous successful
revision.

The build used to run the production database is always the first of the
builds list. If a build fails, it is put after the build currently
running the production database.

### Staging

Staging builds duplicate the production database, and try to load this
duplicate with the revisions of the staging branches.

Each time you push a new revision on a staging branch, the build created
uses a new copy of the production database. The databases are not
re-used between builds of the same branch. This ensures:

  - staging builds use databases that are close to what the production
    looks like, so you do not make your tests with outdated data,
  - you can play around as much as you want in the same staging
    database, and you can then ask for a rebuild when you want to
    restart with a new copy of the production.

Nevertheless, this means that if you make configuration changes in
staging databases and do not apply them in the production, they will not
be passed on the next build of the same staging branch.

### Development

Development builds create new databases, load the demo data and run the
unit tests.

A build will be considered failed and highlighted in red if tests fail
during the installation, as they are meant to raise errors if something
wrong occurs.

If all tests pass, and there is no error, the build will be considered
successful.

According to the list of modules to install and test, a development
build can take up to 1 hour to be ready. This is due to the large number
of tests set in the default Odoo modules suite.

## Features

The production branch will always appear first, and then the other
branches are ordered by last build created. You can filter out the
branches.

![image](builds/interface-builds-branches.png)

For each branch, you can access the last build's database using the
*Connect* link and jump to the branch code using the *Github* link. For
other branches than the production, you can create a new build which
will use the latest revision of the branch using the link *rebuild*.
This last link is not available when there is already a build in
progress for the branch.

![image](builds/interface-builds-build.png)

For each build, you can access the revision changes using the button
with the Github icon. You can access the build's database as the
administrator using the *Connect* button. Also, you can access the
database with another user using the *Connect as* button, in the
dropdown menu of the *Connect* button.

<div id="odoosh-gettingstarted-builds-download-dump">

![image](builds/interface-builds-build-dropdown.png)

</div>

<div id="odoosh-gettingstarted-builds-dropdown-menu">

In the dropdown menu of the build, you can access the same features than
in `the branches view
<odoosh-gettingstarted-branches-tabs>`: *Logs*, *Web Shell*, *Editor*,
*Outgoing e-mails*. You also have the possibility to *Download a dump*
of the build's database.

</div>


---
## File: ./content/administration/odoo_sh/getting_started/first_module.md

# Your first module

## Overview

This chapter helps you to create your first Odoo module and deploy it in
your Odoo.sh project.

This tutorial requires `you created a project on Odoo.sh
<odoosh-gettingstarted-create>`, and you know your Github repository's
URL.

Basic use of Git and Github is explained.

The below assumptions are made:

  - *\~/src* is the directory where are located the Git repositories
    related to your Odoo projects,
  - *odoo* is the Github user,
  - *odoo-addons* is the Github repository,
  - *feature-1* is the name of a development branch,
  - *master* is the name of the production branch,
  - *my\_module* is the name of the module.

Replace these by the values of your choice.

## Create the development branch

### From Odoo.sh

In the branches view:

  - hit the `+` button next to the development stage,

  - choose the branch *master* in the *Fork* selection,

  - type *feature-1* in the *To* input.
    
    ![pic1](first_module/firstmodule-development-+.png)
    ![pic2](first_module/firstmodule-development-fork.png)

Once the build created, you can access the editor and browse to the
folder *\~/src/user* to access to the code of your development branch.

![image](first_module/firstmodule-development-editor.png)

![image](first_module/firstmodule-development-editor-interface.png)

### From your computer

Clone your Github repository on your computer:

``` bash
$ mkdir ~/src
$ cd ~/src
$ git clone https://github.com/odoo/odoo-addons.git
$ cd ~/src/odoo-addons
```

Create a new branch:

``` bash
$ git checkout -b feature-1 master
```

## Create the module structure

### Scaffolding the module

While not necessary, scaffolding avoids the tedium of setting the basic
Odoo module structure. You can scaffold a new module using the
executable *odoo-bin*.

From the Odoo.sh editor, in a terminal:

``` bash
$ odoo-bin scaffold my_module ~/src/user/
```

Or, from your computer, if you have an `installation of Odoo
<../../install/source>`:

``` bash
$ ./odoo-bin scaffold my_module ~/src/odoo-addons/
```

If you do not want to bother installing Odoo on your computer, you can
also `download this module structure template
<first_module/my_module.zip>` in which you replace every occurrences of
*my\_module* to the name of your choice.

The below structure will be generated:

    my_module
    ├── __init__.py
    ├── __manifest__.py
    ├── controllers
    │   ├── __init__.py
    │   └── controllers.py
    ├── demo
    │   └── demo.xml
    ├── models
    │   ├── __init__.py
    │   └── models.py
    ├── security
    │   └── ir.model.access.csv
    └── views
        ├── templates.xml
        └── views.xml

<div class="warning">

<div class="title">

Warning

</div>

Do not use special characters other than the underscore ( \_ ) for your
module name, not even an hyphen ( - ). This name is used for the Python
classes of your module, and having classes name with special characters
other than the underscore is not valid in Python.

</div>

Uncomment the content of the files:

  - *models/models.py*, an example of model with its fields,

  - *views/views.xml*, a tree and a form view, with the menus opening
    them,

  - *demo/demo.xml*, demo records for the above example model,

  - *controllers/controllers.py*, an example of controller implementing
    some routes,

  - *views/templates.xml*, two example qweb views used by the above
    controller routes,

  - *\_\_manifest\_\_.py*, the manifest of your module, including for
    instance its title, description and data files to load. You just
    need to uncomment the access control list data file:
    
    ``` xml
    # 'security/ir.model.access.csv',
    ```

### Manually

If you want to create your module structure manually, you can follow the
`/developer/tutorials/getting_started` tutorial to understand the
structure of a module and the content of each file.

## Push the development branch

Stage the changes to be committed

``` bash
$ git add my_module
```

Commit your changes

``` bash
$ git commit -m "My first module"
```

Push your changes to your remote repository

From an Odoo.sh editor terminal:

``` bash
$ git push https HEAD:feature-1
```

The above command is explained in the section `Commit & Push your
changes
<odoosh-gettingstarted-online-editor-push>` of the `Online Editor
<odoosh-gettingstarted-online-editor>` chapter. It includes the
explanation regarding the fact you will be prompted to type your
username and password, and what to do if you use the two-factor
authentication.

Or, from your computer terminal:

``` bash
$ git push -u origin feature-1
```

You need to specify *-u origin feature-1* for the first push only. From
that point, to push your future changes from your computer, you can
simply use

``` bash
$ git push
```

## Test your module

Your branch should appear in your development branches in your project.

![image](first_module/firstmodule-test-branch.png)

In the branches view of your project, you can click on your branch name
in the left navigation panel to access its history.

![image](first_module/firstmodule-test-branch-history.png)

You can see here the changes you just pushed, including the comment you
set. Once the database ready, you can access it by clicking the
*Connect* button.

![image](first_module/firstmodule-test-database.png)

If your Odoo.sh project is configured to install your module
automatically, you will directly see it amongst the database apps.
Otherwise, it will be available in the apps to install.

You can then play around with your module, create new records and test
your features and buttons.

## Test with the production data

You need to have a production database for this step. You can create it
if you do not have it yet.

Once you tested your module in a development build with the demo data
and believe it is ready, you can test it with the production data using
a staging branch.

You can either:

  - Make your development branch a staging branch, by drag and dropping
    it onto the *staging* section title.
    
    ![image](first_module/firstmodule-test-devtostaging.png)

  - Merge it in an existing staging branch, by drag and dropping it onto
    the given staging branch.
    
    ![image](first_module/firstmodule-test-devinstaging.png)

You can also use the `git merge` command to merge your branches.

This will create a new staging build, which will duplicate the
production database and make it run using a server updated with your
latest changes of your branch.

![image](first_module/firstmodule-test-mergedinstaging.png)

Once the database ready, you can access it using the *Connect* button.

### Install your module

Your module will not be installed automatically, you have to install it
from the apps menu. Indeed, the purpose of the staging build is to test
the behavior of your changes as it would be on your production, and on
your production you would not like your module to be installed
automatically, but on demand.

Your module may not appear directly in your apps to install either, you
need to update your apps list first:

  - Activate the `developer mode <developer-mode>`

  - in the apps menu, click the *Update Apps List* button,

  - in the dialog that appears, click the *Update* button.
    
    ![image](first_module/firstmodule-test-updateappslist.png)

Your module will then appear in the list of available apps.

![image](first_module/firstmodule-test-mymoduleinapps.png)

## Deploy in production

Once you tested your module in a staging branch with your production
data, and believe it is ready for production, you can merge your branch
in the production branch.

Drag and drop your staging branch on the production branch.

![image](first_module/firstmodule-test-mergeinproduction.png)

You can also use the `git merge` command to merge your branches.

This will merge the latest changes of your staging branch in the
production branch, and update your production server with these latest
changes.

![image](first_module/firstmodule-test-mergedinproduction.png)

Once the database ready, you can access it using the *Connect* button.

### Install your module

Your module will not be installed automatically, you have to install it
manually as explained in the `above section about installing your module
in staging databases
<odoosh-gettingstarted-firstmodule-productiondata-install>`.

## Add a change

This section explains how to add a change in your module by adding a new
field in a model and deploy it.

  - From the Odoo.sh editor,
    
      - browse to your module folder *\~/src/user/my\_module*,
      - then, open the file *models/models.py*.

  - Or, from your computer,
    
      - use the file browser of your choice to browse to your module
        folder *\~/src/odoo-addons/my\_module*,
      - then, open the file *models/models.py* using the editor of your
        choice, such as *Atom*, *Sublime Text*, *PyCharm*, *vim*, ...

Then, after the description field

``` python
description = fields.Text()
```

Add a datetime field

``` python
start_datetime = fields.Datetime('Start time', default=lambda self: fields.Datetime.now())
```

Then, open the file *views/views.xml*.

After

``` xml
<field name="value2"/>
```

Add

``` xml
<field name="start_datetime"/>
```

These changes alter the database structure by adding a column in a
table, and modify a view stored in database.

In order to be applied in existing databases, such as your production
database, these changes requires the module to be updated.

If you would like the update to be performed automatically by the
Odoo.sh platform when you push your changes, increase your module
version in its manifest.

Open the module manifest *\_\_manifest\_\_.py*.

Replace

``` python
'version': '0.1',
```

with

``` python
'version': '0.2',
```

The platform will detect the change of version and trigger the update of
the module upon the new revision deployment.

Browse to your Git folder.

Then, from an Odoo.sh terminal:

``` bash
$ cd ~/src/user/
```

Or, from your computer terminal:

``` bash
$ cd ~/src/odoo-addons/
```

Then, stage your changes to be committed

``` bash
$ git add my_module
```

Commit your changes

``` bash
$ git commit -m "[ADD] my_module: add the start_datetime field to the model my_module.my_module"
```

Push your changes:

From an Odoo.sh terminal:

``` bash
$ git push https HEAD:feature-1
```

Or, from your computer terminal:

``` bash
$ git push
```

The platform will then create a new build for the branch *feature-1*.

![image](first_module/firstmodule-test-addachange-build.png)

Once you tested your changes, you can merge your changes in the
production branch, for instance by drag-and-dropping the branch on the
production branch in the Odoo.sh interface. As you increased the module
version in the manifest, the platform will update the module
automatically and your new field will be directly available. Otherwise
you can manually update the module within the apps list.

## Use an external Python library

If you would like to use an external Python library which is not
installed by default, you can define a *requirements.txt* file listing
the external libraries your modules depends on.

<div class="note">

<div class="title">

Note

</div>

\- It is not possible to install or upgrade system packages on an
Odoo.sh database (e.g., apt packages). However, under specific
conditions, packages can be considered for installation. This also
applies to **Python modules** requiring system packages for their
compilation, and **third-party Odoo modules**. - **PostgreSQL
extensions** are not supported on Odoo.sh. - For more information,
consult our [FAQ](https://www.odoo.sh/faq#install_dependencies).

</div>

The platform will use this file to automatically install the Python
libraries your project needs.

The feature is explained in this section by using the [Unidecode
library](https://pypi.python.org/pypi/Unidecode) in your module.

Create a file *requirements.txt* in the root folder of your repository

From the Odoo.sh editor, create and open the file
\~/src/user/requirements.txt.

Or, from your computer, create and open the file
\~/src/odoo-addons/requirements.txt.

Add

``` text
unidecode
```

Then use the library in your module, for instance to remove accents from
characters in the name field of your model.

Open the file *models/models.py*.

Before

``` python
from odoo import models, fields, api
```

Add

``` python
from unidecode import unidecode
```

After

``` python
start_datetime = fields.Datetime('Start time', default=lambda self: fields.Datetime.now())
```

Add

``` python
@api.model
def create(self, values):
    if 'name' in values:
        values['name'] = unidecode(values['name'])
    return super(my_module, self).create(values)

def write(self, values):
    if 'name' in values:
        values['name'] = unidecode(values['name'])
    return super(my_module, self).write(values)
```

Adding a Python dependency requires a module version increase for the
platform to install it.

Edit the module manifest *\_\_manifest\_\_.py*

Replace

``` python
'version': '0.2',
```

with

``` python
'version': '0.3',
```

Stage and commit your changes:

``` bash
$ git add requirements.txt
$ git add my_module
$ git commit -m "[IMP] my_module: automatically remove special chars in my_module.my_module name field"
```

Then, push your changes:

In an Odoo.sh terminal:

``` bash
$ git push https HEAD:feature-1
```

In your computer terminal:

``` bash
$ git push
```


---
## File: ./content/administration/install.md

  - show-content

# Install

Depending on the intended use case, there are multiple ways to install
Odoo - or not install it at all.

  - `Online <install/online>` is the easiest way to use Odoo in
    production or to try it.
  - `Packaged installers <install/packages>` are suitable for testing
    Odoo and developing modules. They can be used for long-term
    production with additional deployment and maintenance work.
  - `Source install <install/source>` provides greater flexibility, as
    it allows, for example, running multiple Odoo versions on the same
    system. It is adequate to develop modules and can be used as a base
    for production deployment.
  - A [Docker](https://hub.docker.com/_/odoo/) base image is available
    for development or deployment.

## Editions

There are two different editions.

**Odoo Community** is the free and open-source version of the software,
licensed under the [GNU
LGPLv3](https://github.com/odoo/odoo/blob/master/LICENSE). It is the
core upon which Odoo Enterprise is built.

**Odoo Enterprise** is the shared source version of the software, giving
access to more functionalities, including functional support, upgrades,
and hosting. [Pricing](https://www.odoo.com/pricing-plan) starts from
one app free.

<div class="tip">

<div class="title">

Tip

</div>

`Switch from Community to Enterprise <maintain/enterprise>` at any time
(except for the source install).

</div>

<div class="toctree">

install/online install/packages install/source install/deploy
install/cdn install/email\_gateway

</div>


---
## File: ./content/administration/odoo_sh.md

  - nosearch

# Odoo.sh

<div class="toctree">

odoo\_sh/overview odoo\_sh/getting\_started odoo\_sh/advanced

</div>


---
## File: ./content/administration/maintain/on_premise.md

# On-premise database management

## Register a database

To register your database, you just need to enter your Subscription Code
in the banner in the App Switcher. Make sure you do not add extra spaces
before or after your subscription code. If the registration is
successful, it will turn green and will provide you with the Expiration
Date of your freshly-registered database. You can check this Expiration
Date in the About menu (Odoo 9) or in the Settings Dashboard (Odoo 10).

### Registration Error Message

If you are unable to register your database, you will likely encounter
this message:

![Something went wrong while registering your database, you can try
again or contact Odoo&#10;Help](on_premise/error_message_sub_code.png)

#### Solutions

  - Do you have a valid Enterprise subscription?
      - Check if your subscription details get the tag "In Progress" on
        your [Odoo Account](https://accounts.odoo.com/my/subscription)
        or with your Account Manager
  - Have you already linked a database with your subscription reference?
      - You can link only one database per subscription. (Need a test or
        a development database? [Find a
        partner](https://www.odoo.com/partners))
    
      - You can unlink the old database yourself on your [Odoo
        Contract](https://accounts.odoo.com/my/subscription) with the
        button "Unlink database"
        
        ![image](on_premise/unlink_single_db.png)
        
        A confirmation message will appear; make sure this is the
        correct database as it will be deactivated shortly:
        
        ![image](on_premise/unlink_confirm_enterprise_edition.png)
  - Do you have the updated version of Odoo 9?
      - From July 2016 onward, Odoo 9 now automatically change the uuid
        of a duplicated database; a manual operation is no longer
        required.
    
      - If it's not the case, you may have multiple databases sharing
        the same UUID. Please check on your [Odoo
        Contract](https://accounts.odoo.com/my/subscription), a short
        message will appear specifying which database is problematic:
        
        ![image](on_premise/unlink_db_name_collision.png)
        
        In this case, you need to change the UUID on your test databases
        to solve this issue. You will find more information about this
        in `this section <duplicate_premise>`.
        
        For your information, we identify database with UUID. Therefore,
        each database should have a distinct UUID to ensure that
        registration and invoicing proceed effortlessly for your and for
        us.
  - Check your network and firewall settings
      - The Update notification must be able to reach Odoo's
        subscription validation servers. In other words, make sure that
        the Odoo server is able to open outgoing connections towards:
        
        >   - services.odoo.com on port 443 (or 80)
        >   - services.openerp.com on port 443 (or 80) for older
        >     deployments
    
      - Once you activated your database, you must keep these ports
        open, as the Update notification runs once a week.

### Error message due to too many users

If you have more users in your local database than provisionned in your
Odoo Enterprise subscription, you may encounter this message:

![This database will expire in X days, you have more users than your
subscription allows](on_premise/add_more_users.png)

When the message appears you have 30 days before the expiration. The
countdown is updated everyday.

#### Solutions

  - **Add more users** on your subscription: follow the link and
    Validate the upsell quotation and pay for the extra users.
  - **Deactivate users** as explained in this
    [documentation](documentation.html#deactivating-users) and
    **Reject** the upsell quotation.

Once your database has the correct number of users, the expiration
message will disappear automatically after a few days, when the next
verification occurs. We understand that it can be a bit frightening to
see the countdown, so you can `force an Update Notification
<force_ping>` to make the message disappear right away.

### Database expired error message

If your database reaches its expiration date before your renew your
subscription, you will encounter this message:

![This database has expired.](on_premise/database_expired.png)

This **blocking** message appears after a non-blocking message that
lasts 30 days. If you fail to take action before the end of the
countdown, the database is expired.

#### Solutions

  -   - Renew your subscription: follow the link and renew your
        subscription - note that  
        if you wish to pay by Wire Transfer, your subscription will
        effectively be renewed only when the payment arrives, which can
        take a few days. Credit card payments are processed immediately.

  - Contact our [Support](https://www.odoo.com/help)

None of those solutions worked for you? Please contact our
[Support](https://www.odoo.com/help)

## Duplicate a database<span id="force_ping"></span>

You can duplicate your database by accessing the database manager on
your server (\<odoo-server\>/web/database/manager). In this page, you
can easily duplicate your database (among other things).

![image](on_premise/db_manager.gif)

When you duplicate a local database, it is **strongly** advised to
change the duplicated database's uuid (Unniversally Unique Identifier),
since this uuid is how your database identifies itself with our servers.
Having two databases with the same uuid could result in invoicing
problems or registration problems down the line.

<div class="note">

<div class="title">

Note

</div>

From July 2016 onward, Odoo 9 now automatically change the uuid of a
duplicated database; a manual operation is no longer required.

</div>

The database uuid is currently accessible from the menu `Settings -->
Technical -->
System Parameters`, we advise you to use a [uuid
generator](https://www.uuidtools.com) or to use the unix command
`uuidgen` to generate a new uuid. You can then simply replace it like
any other record by clicking on it and using the edit button.

![image](on_premise/db_uuid.png)


---
## File: ./content/administration/maintain/google_oauth.md

# Connect Gmail to Odoo using Google OAuth

Odoo is compatible with Google's OAuth for Gmail. In order to send
secure emails from a custom domain, all that is required is to configure
a few settings on Google's *Workspace* platform, as well as on the back
end of the Odoo database. This configuration works by using either a
personal email address or an address created by a custom domain.

<div class="tip">

<div class="title">

Tip

</div>

For more information, visit [Google's
documentation](https://support.google.com/cloud/answer/6158849) on
setting up OAuth.

</div>

<div class="seealso">

\- `/applications/general/auth/google` -
`/applications/productivity/calendar/google`

</div>

## Setup in Google

### Create a new project

To get started, go to the [Google API
Console](https://console.developers.google.com). Log in with your
*Google Workspace* account if you have one, otherwise log in with your
personal Gmail account (this should match the email address you want to
configure in Odoo).

After that, click on `Create Project`, located on the far right of the
`OAuth
consent screen`. If a project has already been created in this account,
then the `New
Project` option will be located on the top right under the `Select a
project` drop-down menu.

On the `New Project` screen, rename the `Project name` to
<span class="title-ref">Odoo</span> and browse for the `Location`. Set
the `Location` as the *Google Workspace organization*. If you are using
a personal Gmail account, then leave the `Location` as `No
Organization`.

![Project Name and Location for Google
OAuth.](google_oauth/new-project.png)

Click on `Create` to finish this step.

### OAuth consent screen

If the page doesn't redirect to the `User Type` options, click on `OAuth
consent screen` in the left menu.

Under `User Type` options, select the appropriate `User Type`, and then
click on `Create` again, which will finally navigate to the `Edit app
registration` page.

<div class="warning">

<div class="title">

Warning

</div>

*Personal* Gmail Accounts are only allowed to be **External** User Type,
which means Google may require an approval, or for *Scopes* to be added
on. However, using a *Google WorkSpace* account allows for **Internal**
User Type to be used.

Note, as well, that while the API connection is in the *External*
testing mode, then no approval is necessary from Google. User limits in
this testing mode is set to 100 users.

</div>

### Edit app registration

Next we will configure the app registration of the project.

On the `OAuth consent screen` step, under the `App information` section,
enter <span class="title-ref">Odoo</span> in the `App name` field.
Select the organization's email address under the `User support` email
field.

Next, under `App Domain --> Authorized domains`, click on `Add Domain`
and enter <span class="title-ref">odoo.com</span>.

After that, under the `Developer contact information` section, enter the
organization's email address. Google uses this email address to notify
the organization about any changes to your project.

Next, click on the `Save and Continue` button. Then, skip the `Scopes`
page by scrolling to the bottom and clicking on `Save and Continue`.

If continuing in testing mode (External), add the email addresses being
configured under the `Test users` step, by clicking on `Add Users`, and
then the `Save and
Continue` button. A summary of the app registration appears.

Finally, scroll to the bottom and click on `Back to Dashboard` to finish
setting up the project.

### Create Credentials

Now that the project is set up, credentials should be created, which
includes the *Client ID* and *Client Secret*. First, click on
`Credentials` in the left sidebar menu.

Then, click on `Create Credentials` in the top menu and select `OAuth
client ID` from the dropdown menu.

  - Under `Application Type`, select `Web Application` from the dropdown
    menu.
  - In the `Name` field, enter <span class="title-ref">Odoo</span>.
  - Under the `Authorized redirect URIs` label, click the button `ADD
    URI`, and then input
    <span class="title-ref">https://yourdbname.odoo.com/google\_gmail/confirm</span>
    in the `URIs 1` field. Be sure to replace the *yourdbname* part of
    the URL with the actual Odoo database name.
  - Next, click on `Create` to generate an OAuth `Client ID` and `Client
    Secret`. Finally, copy each generated value for later use when
    configuring in Odoo, and then navigate to the Odoo database.

![Client ID and Client Secret for Google
OAuth.](google_oauth/client-credentials.png)

## Setup in Odoo

### Enter Google Credentials

First, open Odoo and navigate to the `Apps` module. Then, remove the
`Apps` filter from the search bar and type in
<span class="title-ref">Google</span>. Install the module called `Google
Gmail`.

Next, navigate to `Settings --> General Settings`, and under the
`Discuss` section, ensure that the checkbox for `Custom Email Servers`
or `External Email
Servers` is checked. This populates a new option for `Gmail Credentials`
or `Use
a Gmail Sever`. Then, copy and paste the respective values into the
`Client ID` and `Client Secret` fields and `Save` the settings.

### Configure outgoing email server

To configure the external Gmail account, return to the top of the
`Custom Email Servers` setting and then click the `Outgoing Email
Servers` link.

![Configure Outgoing Email Servers in
Odoo.](google_oauth/outgoing-servers.png)

Then, click on `New` or `Create` to create a new email server, and fill
in the `Name`, `Description`, and the email `Username` (if required).

Next, click on `Gmail OAuth Authentication` or `Gmail` (under the
`Authenticate with` or `Connection` section). Finally, click on `Connect
your Gmail Account`.

A new window labeled `Google` opens to complete the authorization
process. Select the appropriate email address that is being configured
in Odoo.

If the email address is a personal account, then an extra step pops up,
so click `Continue` to allow the verification and connect the Gmail
account to Odoo.

Then, allow Odoo to access the Google account by clicking on `Continue`
or `Allow`. After that, the page navigates back to the newly configured
outgoing email server in Odoo. The configuration automatically loads the
token in Odoo, and a tag stating `Gmail Token Valid` appears in green.

![Configure Outgoing Email Servers in
Odoo.](google_oauth/green-token.png)

Finally, `Test the Connection`. A confirmation message should appear.
The Odoo database can now send safe, secure emails through Google using
OAuth authentication.

## Google OAuth FAQ

### Production VS Testing Publishing Status

Choosing `Production` as the `Publishing Status` (instead of `Testing`)
will display the following warning message:

![OAuth is Limited to 100 Sensitive Scope
Logins.](google_oauth/published-status.png)

To correct this warning, navigate to the [Google API
Platform](https://console.cloud.google.com/apis/credentials/consent). If
the `Publishing status` is `In Production`, click `Back to Testing` to
correct the issue.

### No Test Users Added

If no test users are added to the OAuth consent screen, then a 403
access denied error will populate.

![403 Access Denied Error.](google_oauth/403-error.png)

To correct this error, return to the `OAuth consent screen` under `APIs
&
Services` and add test user(s) to the app. Add the email that you are
configuring in Odoo.

### Gmail Module not updated

If the *Google Gmail* module in Odoo has not been updated to the latest
version, then a `Forbidden` error message populates.

![Forbidden you don't have the permission to access the requested
resource.](google_oauth/forbidden-error.png)

To correct this error, go to the `Apps` module and clear out the search
terms. Then, search for <span class="title-ref">Gmail</span> or
<span class="title-ref">Google</span> and upgrade the `Google Gmail`
module. Finally, click on the three dots on the upper right of the
module and select `Upgrade`.

### Application Type

When creating the credentials (OAuth *Client ID* and *Client Secret*),
if `Desktop App` is selected for the `Application Type`, an
`Authorization Error` appears.

![Error 400 Redirect URI Mismatch.](google_oauth/error-400.png)

To correct this error, delete the credentials already created and create
new credentials, selecting `Web Application` for the `Application Type`.
Then, under `Authorized
redirect URIs`, click `ADD URI` and type:
<span class="title-ref">https://yourdbname.odoo.com/google\_gmail/confirm</span>
in the field, being sure to replace *yourdbname* in the URL with the
Odoo database name.


---
## File: ./content/administration/maintain/enterprise.md

# Switch from Community to Enterprise

Depending on your current installation, there are multiple ways to
upgrade your community version. In any case the basic guidelines are:

  - Backup your community database
    
    ![image](enterprise/db_manager.png)

  - Shutdown your server

  - Install the web\_enterprise module

  - Restart your server

  - Enter your Odoo Enterprise Subscription code

![image](enterprise/enterprise_code.png)

## On Linux, using an installer

  - Backup your community database

  - Stop the odoo service
    
    ``` console
    $ sudo service odoo stop
    ```

  - Install the enterprise .deb (it should install over the community
    package)
    
    ``` console
    $ sudo dpkg -i <path_to_enterprise_deb>
    ```

  - Update your database to the enterprise packages using
    
    ``` console
    $ python3 /usr/bin/odoo-bin -d <database_name> -i web_enterprise --stop-after-init
    ```

  - You should be able to connect to your Odoo Enterprise instance using
    your usual mean of identification. You can then link your database
    with your Odoo Enterprise Subscription by entering the code you
    received by e-mail in the form input

## On Linux, using the source code

There are many ways to launch your server when using sources, and you
probably have your own favourite. You may need to adapt sections to your
usual workflow.

  - Shutdown your server

  - Backup your community database

  - Update the `--addons-path` parameter of your launch command (see
    `../install/source`)

  - Install the web\_enterprise module by using
    
    ``` console
    $ -d <database_name> -i web_enterprise --stop-after-init
    ```
    
    Depending on the size of your database, this may take some time.

  - Restart your server with the updated addons path of point 3. You
    should be able to connect to your instance. You can then link your
    database with your Odoo Enterprise Subscription by entering the code
    you received by e-mail in the form input

## On Windows

  - Backup your community database

  - Uninstall Odoo Community (using the Uninstall executable in the
    installation folder) -PostgreSQL will remain installed
    
    ![image](enterprise/windows_uninstall.png)

  - Launch the Odoo Enterprise Installer and follow the steps normally.
    When choosing the installation path, you can set the folder of the
    Community installation (this folder still contains the PostgreSQL
    installation). Uncheck `Start Odoo` at the end of the installation
    
    ![image](enterprise/windows_setup.png)

  - Using a command window, update your Odoo Database using this command
    (from the Odoo installation path, in the server subfolder)
    
    ``` console
    $ ..\python\python.exe odoo-bin -d <database_name> -i web_enterprise --stop-after-init
    ```

  - No need to manually launch the server, the service is running. You
    should be able to connect to your Odoo Enterprise instance using
    your usual mean of identification. You can then link your database
    with your Odoo Enterprise Subscription by entering the code you
    received by e-mail in the form input


---
## File: ./content/administration/maintain/azure_oauth.md

# Connect Microsoft Outlook 365 to Odoo using Azure OAuth

Odoo is compatible with Microsoft's Azure OAuth for Microsoft 365. In
order to send and receive secure emails from a custom domain, all that
is required is to configure a few settings on the Azure platform and on
the back end of the Odoo database. This configuration works with either
a personal email address or an address created by a custom domain.

<div class="tip">

<div class="title">

Tip

</div>

For more information, visit [Microsoft's documentation
\<https://learn.microsoft.com/en-us/azure/
active-directory/develop/quickstart-register-app\>]() on setting up
OAuth in Azure.

</div>

<div class="seealso">

\- `/applications/general/auth/azure` -
`/applications/productivity/calendar/outlook`

</div>

## Setup in Microsoft Azure Portal

### Create a new application

To get started, go to [Microsoft's Azure
Portal](https://portal.azure.com/). Log in with the `Microsoft Outlook
Office 365` account if there is one, otherwise log in with the personal
`Microsoft account`. A user with administrative access to the Azure
Settings will need to connect and perform the following configuration.
Next, navigate to the section labeled `Manage Microsoft Entra ID`
(formally *Azure Active Directory*).

Now, click on `Add (+)`, located in the top menu, and then select `App
registration`. On the `Register an application` screen, rename the
`Name` to <span class="title-ref">Odoo</span> or something recognizable.
Under the `Supported account types` section select `Accounts in any
organizational directory (Any Microsoft Entra ID directory -
Multitenant)
and personal Microsoft accounts (e.g. Skype, Xbox)`.

Under the `Redirect URL` section, select `Web` as the platform, and then
input <span class="title-ref">https://\<odoo base
url\>/microsoft\_outlook/confirm</span> in the `URL` field. The Odoo
base URL is the canonical domain at which your Odoo instance can be
reached (e.g. mydatabase.odoo.com if you are hosted on Odoo.com) in the
URL field. Then, click `Register` and the application is created.

### API permissions

The `API permissions` should be set next. Odoo will need specific API
permissions to be able to read (IMAP) and send (SMTP) emails in the
Microsoft 365 setup. First, click the `API permissions` link, located in
the left menu bar. Next, click on the `(+) Add a Permission` button and
select `Microsoft Graph` under `Commonly Used Microsoft APIs`. After,
select the `Delegated Permissions` option.

In the search bar, search for the following `Deregulated permissions`
and click `Add permissions` for each one:

  - `SMTP.Send`
  - `IMAP.AccessAsUser.All`

<div class="note">

<div class="title">

Note

</div>

The `User.Read` permission will be added by default.

</div>

![API permissions added for the app.](azure_oauth/permissions.png)

## Assign users and groups

After adding the API permissions, navigate back to the `Overview` of the
`Application` in the top of the left sidebar menu.

Now, add users to this application. Under the `Essentials` overview
table, click on the link labeled `Managed Application in Local
Directory`, or the last option on the bottom right-hand side of the
table.

![Link to the created application and to add
users/groups.](azure_oauth/managed-application.png)

In the left sidebar menu, select `Users and Groups`. Next, click on `(+)
Add
User/Group`. Depending on the account, either a `Group` and a `User` can
be added, or only `Users`. Personal accounts will only allow for `Users`
to be added.

Under `Users` or `Groups`, click on `None Selected` and add the users or
group of users that will be sending emails from the `Microsoft account`
in Odoo. `Add` the users/groups, click `Select`, and then `Assign` them
to the application.

### Create credentials

Now that the Microsoft Azure app is set up, credentials need to be
created for the Odoo setup. These include the `Client ID` and `Client
Secret`. To start, the `Client ID` can be copied from the `Overview`
page of the app. The `Client ID` or `Application ID` is located under
the `Display Name` in the `Essentials` overview of the app.

![Application/Client ID located in the Overview of the
app.](azure_oauth/application-id.png)

Next, the `Client Secret Value` needs to be retrieved. To get this
value, click on `Certificates & Secrets` in the left sidebar menu. Then,
a `Client Secret` needs to be produced. In order to do this, click on
the `(+) New Client Secret` button.

A window on the right will populate with a button labeled `Add a client
secret`. Under `Description`, type in <span class="title-ref">Odoo
Fetchmail</span> or something recognizable, and then set the `expiration
date`.

<div class="important">

<div class="title">

Important

</div>

A new `Client Secret` will need to be produced and configured if the
first one expires. In this event, there could be an interruption of
service, so the expiration date should be noted and set to the furthest
possible date.

</div>

Next, click on `Add` when these two values are entered. A `Client Secret
Value` and `Secret ID` will be created. It is important to copy the
`Value` or `Client Secret Value` into a notepad as it will become
encrypted after leaving this page. The `Secret ID` is not needed.

![Client Secret Value or Value in the app's
credentials.](azure_oauth/secretvalue.png)

After these steps, the following items should be ready to be set up in
Odoo:

  - A client ID (`Client ID` or `Application ID`)
  - A client secret (`Value` or `Client Secret Value`)

This completes the setup on the `Microsoft Azure Portal` side.

## Setup in Odoo

### Enter Microsoft Outlook credentials

First, open the Odoo database and navigate to the `Apps` module. Then,
remove the `Apps` filter from the search bar and type in
<span class="title-ref">Outlook</span>. After that, install the module
called `Microsoft Outlook`.

Next, navigate to `Settings --> General Settings`, and under the
`Discuss` section, ensure that the checkbox for `External Email Servers`
is checked. This populates a new option for `Outlook Credentials`.

`Save` the progress.

Then, copy and paste the `Client ID` (Application ID) and `Client Secret
(Client Secret Value)` into the respective fields and `Save` the
settings.

### Configure outgoing email server

On the `General Settings` page, under the `External Email Servers`
setting, click the `Outgoing Email Servers` link to configure the
Microsoft account.

Then, create a new email server and check the box for `Outlook`. Next,
fill in the `Description` (it can be anything) and the Microsoft Outlook
email `Username`.

Then, cick on `Connect your Outlook account`.

A new window from Microsoft opens to complete the `authorization
process`. Select the appropriate email address that is being configured
in Odoo.

![Permission page to grant access between newly created app and
Odoo.](azure_oauth/verify-outlook.png)

Then, allow Odoo to access the Microsoft account by clicking on `Yes`.
After this, the page will navigate back to the newly configured
`Outgoing Mail Server` in Odoo. The configuration automatically loads
the `token` in Odoo, and a tag stating `Outlook Token Valid` appears in
green.

Finally, click `Test Connection`. A confirmation message should appear.
The Odoo database can now send safe, secure emails through Microsoft
Outlook using OAuth authentication.

<div class="tip">

<div class="title">

Tip

</div>

To extend the server's use, set a `mail.force.smtp.from` system
parameter so that email is sent from a default *from email address* for
all emails sent from the database. The value of the system parameter
should be the `username` being configured in Microsoft Outlook.

</div>

<div class="note">

<div class="title">

Note

</div>

The `System Parameters` can be accessed by activating
`../../applications/general/developer_mode` in the `Settings -->
Technical
--> Parameters --> System Parameters` menu.

</div>

<div class="seealso">

\- `../../applications/general/email_communication/email_domain`

</div>


---
## File: ./content/administration/maintain/odoo_online.md

# Odoo Online database management

To manage a database, go to the [database
manager](https://www.odoo.com/my/databases) and sign in as the database
administrator.

All the main database management options are available by clicking the
database name, except the upgrade option, which can be accessed by
clicking the **arrow in a circle** icon next to the database name. It is
only displayed if an upgrade is available.

![Accessing the database management
options](odoo_online/database-manager.png)

  - `odoo_online/upgrade`
  - `odoo_online/duplicate`
  - `odoo_online/rename`
  - `odoo_online/download`
  - `odoo_online/domains`
  - `odoo_online/tags`
  - `odoo_online/delete`
  - `odoo_online/contact-support`
  - `odoo_online/users`

## Upgrade

Trigger a database upgrade.

<div class="seealso">

For more information about the upgrade process, check out the `Odoo
Online upgrade
documentation <upgrade/request-test-database>`.

</div>

## Duplicate

Create an exact copy of the database, which can be used to perform
testing without compromising daily operations.

<div class="important">

<div class="title">

Important

</div>

\- By checking `For testing purposes`, all external actions (emails,
payments, delivery orders, etc.) are disabled by default on the
duplicated database. - Duplicated databases expire automatically after
15 days.

</div>

## Rename

Rename the database and its URL.

## Download

Download a ZIP file containing a backup of the database.

<div class="note">

<div class="title">

Note

</div>

Databases are backed up daily as per the [Odoo Cloud Hosting
SLA](https://www.odoo.com/cloud-sla).

</div>

## Domain names

Use a custom `domain name <domain_names>` to access the database via
another URL.

<div class="tip">

<div class="title">

Tip

</div>

You can `register a domain name for free <domain-name/odoo-register>`.

</div>

## Tags

Add tags to easily identify and sort your databases.

<div class="tip">

<div class="title">

Tip

</div>

You can search for tags in the search bar.

</div>

## Delete

Delete a database instantly.

<div class="danger">

<div class="title">

Danger

</div>

Deleting a database means that all data is permanently lost. The
deletion is instant and applies to all users. It is recommended to
create a backup of the database before deleting it.

</div>

Carefully read the warning message and only proceed if the implications
of deleting a database are fully understood.

![The warning message displayed before deleting a
database](odoo_online/delete.png)

<div class="note">

<div class="title">

Note

</div>

\- Only an administrator can delete a database. - The database name is
immediately made available to anyone. - Deleting a database if it has
expired or is linked to a subscription is impossible. In that case,
contact [Odoo Support](https://www.odoo.com/help).

</div>

## Contact us

Access the [Odoo.com support page](https://www.odoo.com/help) with the
database's details already pre-filled.

## Invite / remove users

To invite users, fill out the new user's email address and click
`Invite`. To add multiple users, click `Add more users`.

![Inviting a user on a database](odoo_online/invite-users.png)

To remove users, select them and click `Remove`.

<div class="seealso">

\- `/applications/general/users/manage_users` -
`/applications/general/users/odoo_account`

</div>


---
## File: ./content/administration/maintain/supported_versions.md

  - hide-page-toc

# Supported versions

Odoo provides support and bug fixing **for the 3 last major versions**
of Odoo.

<div class="note">

<div class="title">

Note

</div>

Odoo releases intermediary versions called **Online versions** on the
`Odoo Online
<odoo_online>` hosting every two months. Odoo Online users can then
benefit from the latest features of Odoo.

  - Admins of Odoo Online databases are invited to `upgrade
    <../upgrade>` them regularly.
  - Online versions are *not* released for Odoo.sh and On-Premise
    installations.
  - Online versions are listed below as *SaaS*.

</div>

This matrix shows the support status of every version.

**Major releases are in bold type.**

|                 | Odoo Online | Odoo.sh | On-Premise | Release date  | End of support          |
| --------------- | ----------- | ------- | ---------- | ------------- | ----------------------- |
| **Odoo 17.0**   |             |         |            | November 2023 | November 2026 (planned) |
| Odoo saas\~16.4 |             | N/A     | N/A        | August 2023   |                         |
| Odoo saas\~16.3 |             | N/A     | N/A        | June 2023     |                         |
| Odoo saas\~16.2 |             | N/A     | N/A        | March 2023    |                         |
| Odoo saas\~16.1 |             | N/A     | N/A        | February 2023 |                         |
| **Odoo 16.0**   |             |         |            | October 2022  | November 2025 (planned) |
| Odoo saas\~15.2 |             | N/A     | N/A        | March 2022    | January 2023            |
| Odoo saas\~15.1 |             | N/A     | N/A        | February 2022 | July 2022               |
| **Odoo 15.0**   |             |         |            | October 2021  | November 2024 (planned) |
| **Odoo 14.0**   |             |         |            | October 2020  | November 2023           |
| **Odoo 13.0**   |             |         |            | October 2019  | October 2022            |
| Older versions  |             |         |            | Before 2019   | Before 2022             |

<div class="admonition">

Legend

Supported version

End-of-support

N/A Never released for this platform

</div>

<div class="important">

<div class="title">

Important

</div>

Even though we don't support older versions, you can always [upgrade
from any version](https://upgrade.odoo.com/).

</div>


---
## File: ./content/administration/maintain/update.md

# Bugfix updates

## Introduction

In order to benefit from the latest improvements, security fixes, bug
corrections and performance boosts, you may need to update your Odoo
installation from time to time.

This guide only applies when are using Odoo on your own hosting
infrastructure. If you are using one of the Odoo Cloud solutions,
updates are automatically performed for you.

The terminology surrounding software updates is often confusing, so here
are some preliminary definitions:

  - Updating (an Odoo installation)  
    Refers to the process of obtaining the latest revision of the source
    code for your current Odoo Edition. For example, updating your Odoo
    Enterprise 13.0 to the latest revision. This does not directly cause
    any change to the contents of your Odoo database, and can be undone
    by reinstalling the previous revision of the source code.

  - Upgrading (an Odoo database)  
    Refers to a complex data processing operation where the structure
    and contents of your database is permanently altered to make it
    compatible with a new release of Odoo. This operation is
    irreversible and typically accomplished via Odoo's [database upgrade
    service](https://upgrade.odoo.com), when you decide to switch to a
    newer release of Odoo. Historically, this process has also been
    known as a "migration" because it involves moving data around inside
    the database, even though the database may end up at the same
    physical location after the upgrade.

This page describes the typical steps needed to *update* an Odoo
installation to the latest version. If you'd like more information about
upgrading a database, please visit the [Odoo Upgrade
page](https://upgrade.odoo.com) instead.

## In a nutshell

Updating Odoo is accomplished by simply reinstalling the latest version
of your Odoo Edition on top of your current installation. This will
preserve your data without any alteration, as long as you do not
uninstall PostgreSQL (the database engine that comes with Odoo).

The main reference for updating is logically our `installation guide
<../install>`, which explains the common installation methods.

Updating is also most appropriately accomplished by the person who
deployed Odoo initially, because the procedure is very similar.

<div class="note">

<div class="title">

Note

</div>

We always recommend to download a complete new up-to-date Odoo version,
rather than manually applying patches, such as the security patches that
come with Security Advisories. The patches are mainly provided for
installations that are heavily customized, or for technical personnel
who prefer to apply minimal changes temporarily while testing a complete
update.

</div>

## Step 1: Download an updated Odoo version

The central download page is <https://www.odoo.com/page/download>. If
you see a "Buy" link for the Odoo Enterprise download, make sure you are
logged into Odoo.com with the same login that is linked to your Odoo
Enterprise subscription.

Alternatively, you can use the unique download link that was included
with your Odoo Enterprise purchase confirmation email.

<div class="note">

<div class="title">

Note

</div>

Downloading an updated version is not necessary if you installed via
Github (see below)

</div>

## Step 2: Make a backup of your database

The update procedure is quite safe and should not alter you data.
However it's always best to take a full database backup before
performing any change on your installation, and to store it somewhere
safe, on a different computer.

If you have not disabled the database manager screen (see `here
<security>` why you should), you can use it (link at bottom of your
database selection screen) to download a backup of your database(s). If
you disabled it, use the same procedure than for your usual backups.

## Step 3: Install the updated version

Choose the method that matches your current installation:

### Packaged Installers

If you installed Odoo with an installation package downloaded on our
website (the recommended method), updating is very simple. All you have
to do is download the installation package corresponding to your system
(see step \#1) and install it on your server. They are updated daily and
include the latest security fixes. Usually, you can simply double-click
the package to install it on top of the current installation. After
installing the package, be sure to restart the Odoo service or reboot
your server, and you're all set.

### Source Install (Tarball)

If you have originally installed Odoo with the "tarball" version (source
code archive), you have to replace the installation directory with a
newer version. First download the latest tarball from Odoo.com. They are
updated daily and include the latest security fixes (see step \#1) After
downloading the package, extract it to a temporary location on your
server.

You will get a folder labelled with the version of the source code, for
example "odoo-13.0+e.20190719", that contains a folder "odoo.egg-info"
and the actual source code folder named "odoo" (for Odoo 10 and later)
or "openerp" for older versions. You can ignore the odoo.egg-info
folder. Locate the folder where your current installation is deployed,
and replace it with the newer "odoo" or "openerp" folder that was in the
archive you just extracted.

Be sure to match the folder layout, for example the new "addons" folder
included in the source code should end up exactly at the same path it
was before. Next, watch out for any specific configuration files that
you may have manually copied or modified in the old folder, and copy
them over to the new folder. Finally, restart the Odoo service or reboot
the machine, and you are all set.

### Source Install (Github)

If you have originally installed Odoo with a full Github clone of the
official repositories, the update procedure requires you to pull the
latest source code via git. Change into the directory for each
repository (the main Odoo repository, and the Enterprise repository),
and run the following commands:

    git fetch
    git rebase --autostash

The last command may encounter source code conflicts if you had edited
the Odoo source code locally. The error message will give you the list
of files with conflicts, and you will need to resolve the conflicts
manually, by editing them and deciding which part of the code to keep.

Alternatively, if you prefer to simply discard the conflicting changes
and restore the official version, you can use the following command:

    git reset --hard

Finally, restart the Odoo service or reboot the machine, and you should
be done.

### Docker

Please refer to our [Docker image
documentation](https://hub.docker.com/_/odoo/) for specific update
instructions.


---
## File: ./content/administration/maintain/domain_names.md

# Domain names

A **domain name** works as an address for your website. It makes the
Internet much more accessible as it allows users to type a meaningful
web address, such as `www.odoo.com`, rather than its server's IP address
with a series of numbers.

You can use a custom domain name to access your Odoo database and
websites:

  - By `registering a free domain name with Odoo
    <domain-name/odoo-register>` (for Odoo Online databases)
  - By `configuring a custom domain that you already own
    <domain-name/existing>`.

<div class="note">

<div class="title">

Note

</div>

Odoo Online and Odoo.sh databases, including their websites, use by
default a subdomain of `odoo.com` for both the URL and the emails (e.g.,
`https://example.odoo.com`).

</div>

<div class="important">

<div class="title">

Important

</div>

Odoo offers a `free custom domain name <domain-name/odoo-register>` to
all Odoo Online databases for one year. Visitors can then access your
website with an address such as `www.example.com` rather than the
default `example.odoo.com`.

</div>

<div class="seealso">

\- [Odoo Tutorials: Register a Free Domain
Name](https://www.odoo.com/slides/slide/register-a-free-domain-name-1663)
- [Odoo Quick Tips: Get a free domain
name\!](https://www.youtube.com/watch?v=eAfgeNOHLP4)

</div>

## About domain names

Having a **good domain name** is as important to your branding as the
name of your business or organization as it is the first thing your
visitors will notice. We recommend you keep them *simple, short, easy to
remember and spell*.

A **subdomain** is a domain that is a part of another domain. It often
refers to the additional part that comes before the main domain name.
Traditionally, most websites use the `www.` subdomain, but any string of
letters can be used as well. You can use subdomains to direct your
visitors to other websites than your main website or to specific pages
(e.g., `experience.odoo.com` points to a specific page.)

All domain names are referenced in the **Domain Name System**, or
**DNS**, which works as a giant directory for the Internet. There are
many DNS servers, so any modification to the DNS can take up to 72 hours
to propagate worldwide on all servers.

### Indexing of domain names by search engines

Search engines, such as Google and Bing, rely on web crawlers (`robots
that explore and analyze
the web`) to index all websites and their related domain names. These
crawlers discover new URLs thanks to links on known web pages. As a
result, search engines should index domain names automatically after a
while, as long as their URLs are mentioned elsewhere on the Internet.

Improving the appearance and positioning of web pages on search engines
is a practice named "Search Engine Optimization" (SEO).

<div class="tip">

<div class="title">

Tip

</div>

Adding relevant content, optimizing metadata, and building high-quality
backlinks can all help improve a website's search engine visibility.

</div>

Some search engines provide tools for web admins, such as [Google Search
Console](https://search.google.com/search-console) and [Bing Webmaster
Tools](https://www.bing.com/webmasters), to help you analyze and improve
your page ranking. To use these services, you must prove that you are
the owner of your domain name. One way to verify the ownership of your
domain name is by adding a DNS record. You can do this for `domain names
registered with Odoo <domain-name/odoo-manage>` and for domain names
managed by other providers.

<div class="seealso">

\- `/applications/websites/website/pages/seo` - [Google Search Console
Help - Verify your site
ownership](https://support.google.com/webmasters/answer/9008080) - [Bing
Webmaster Tools - Add and Verify
site](https://www.bing.com/webmasters/help/add-and-verify-site-12184f8b)

</div>

## Register a free domain name with Odoo

You can register a domain name for your Odoo Online database directly
from Odoo Website or your database manager.

<div class="important">

<div class="title">

Important

</div>

\- Your domain name is **free for one year** if you register it with
Odoo\! - The domain name is registered with
[Gandi](https://www.gandi.net/), the domain name registrar. - You are
the owner of the domain name and can use it for other purposes. - Odoo
manages payment and technical support for you. - This offer doesn't
include any mailbox. However, you can `configure your MX records
<domain-name/odoo-manage>` to use your own email server or solution such
as Google Workspace.

</div>

To do so, go to `Website --> Go to website --> Promote --> Domain Name`.
Alternatively, open your [database
manager](https://www.odoo.com/my/databases), click on the `settings`
button next to your database, then on `Domain names`.

![Clicking on Domain Names from an Odoo
website](domain_names/register-promote.png)

Search for the domain name of your choice to check its availability,
then select the one you want to register for your website.

![The search of the domain name example.com shows which associated
domains are available.](domain_names/register-search.png)

Next, fill in the form with your information to become the domain name
owner.

Your domain name is directly linked to your database, but you still have
to `map your domain
name with your website <domain-name/website-map>`.

<div class="note">

<div class="title">

Note

</div>

\- Free domain names are also available for free Odoo Online databases
(if you installed one app only, for example). In this case, Odoo reviews
your request and your website to avoid abuse. This process can take
several days due to the success of the offer. - This is not available
for Odoo.sh databases yet.

</div>

### Manage your domain name registered with Odoo

To manage the DNS records of your domain name registered with Odoo or to
visualize the contacts associated with it, open your [database
manager](https://www.odoo.com/my/databases), click on the `settings`
button next to your database, on `Domain names`, and then on `Contacts`
or `DNS`.

![Management of the domain names linked to an Odoo
database](domain_names/manage.png)

<div class="note">

<div class="title">

Note

</div>

Please [submit a support ticket](https://www.odoo.com/help) if you need
further assistance to manage your domain name.

</div>

## Configure your existing domain name

If you already own a domain name, you can use it to point to your
website.

To avoid any issue with the `SSL certificate validation
<domain-name/ssl>`, we highly recommend that you proceed with the
following actions in this order:

1.  `Add a CNAME record <domain-name/cname>` on your domain name's DNS
    zone.
2.  `Map your domain name with your Odoo database <domain-name/db-map>`.
3.  `Map your domain name with your Odoo website
    <domain-name/website-map>`.
4.  Optionally: `Change the web base address of your database
    <domain-name/web-base-url>`.

### Add a CNAME record

A **CNAME record** is a type of DNS record that points to the domain of
another website rather than directly to an IP address.

You need a CNAME record that points to your Odoo database. The
requirements are detailed in your database manager.

<div class="tabs">

<div class="group-tab">

Odoo Online

The target address is the current address of your database, as defined
at its creation (e.g., `example.odoo.com`)

</div>

<div class="group-tab">

Odoo.sh

Your project's main address is defined in `Settings --> Project Name`.

If you want to target a specific branch (production, staging or
development), go to `Branches --> select your branch --> Settings -->
Custom domains`, and click on `How to set up my domain?`. A message
indicates which address your CNAME record should target.

</div>

</div>

1.  Open your domain name's manager dashboard.
2.  Open the **DNS zone** management page for the domain name you want
    to configure.
3.  Create a **CNAME record** pointing to the address of your database.

While Odoo suggests creating a CNAME record for your `www.` subdomain
(`www.example.com`), you can of course use any domain name of your
choice, with any subdomain (e.g., `anything.example.com`).

<div class="example">

You own the domain name `example.com`, and you have an Odoo Online
database at the address `example.odoo.com`. You want to access your Odoo
database primarily with the domain `www.example.com` but also with the
`naked domain <domain-name/naked-domain>` `example.com`.

To do so, you create a CNAME record for the `www` subdomain, with
`example.odoo.com` as the target. The DNS zone manager generates the
following rule and adds it to your DNS zone: `www IN CNAME
example.odoo.com.`

You also create a redirection from `example.com` to `wwww.example.com`.

Your new DNS records are propagated to all DNS servers.

</div>

<div class="note">

<div class="title">

Note

</div>

Here are some specific guidelines to create a CNAME record:

  - [GoDaddy](https://www.godaddy.com/help/add-a-cname-record-19236)
  - [Namecheap](https://www.namecheap.com/support/knowledgebase/article.aspx/9646/2237/how-to-create-a-cname-record-for-your-domain)
  - [OVH](https://docs.ovh.com/us/en/domains/web_hosting_how_to_edit_my_dns_zone/#add-a-new-dns-record)
  - [CloudFlare](https://support.cloudflare.com/hc/en-us/articles/360019093151)
  - [Google
    Domains](https://support.google.com/domains/answer/3290350?hl=en)

</div>

#### Naked domain

A **naked domain** is a domain name that doesn't have any subdomain at
the beginning of the address (e.g., `odoo.com` instead of
`www.odoo.com`).

You may want your naked domain to redirect to your website as some
visitors may not type the full domain name to access your website.

1.  Open your domain name's manager dashboard.
2.  Create a **redirection** from the naked domain (`example.com`) to
    your main domain name (`www.example.com`).

<div class="note">

<div class="title">

Note

</div>

Depending on your domain name registrar, this redirection may be already
pre-configured.

</div>

### Map your domain name with your Odoo database

<div class="tabs">

<div class="group-tab">

Odoo Online

Open your [database manager](https://www.odoo.com/my/databases), click
on the `settings` button next to your database, on `Domain names`, and
then on `Use my own domain` at the bottom of the right column.

Type the domain name you want to add to this database, then click on
`Verify` to check if the CNAME record is correctly configured. Once
done, click on `I confirm,
it's done`.

![Verification of the CNAME records of a domain name before mapping it
with a database](domain_names/online-map.png)

</div>

<div class="group-tab">

Odoo.sh

Go to `Branches --> select your branch --> Settings --> Custom domains`,
type the domain name you want to add to this database, then click on
`Add domain`.

![Mapping a domain name with an Odoo.sh
branch](domain_names/odoo-sh-map.png)

<div class="seealso">

\- `Odoo.sh branches: settings tab
<odoosh-gettingstarted-branches-tabs-settings>`

</div>

</div>

</div>

<div class="warning">

<div class="title">

Warning

</div>

Make sure to `add a CNAME record <domain-name/cname>` to your domain
name's DNS **before** mapping your domain name with your Odoo database.

Failing to do so may impede the validation of the `SSL certificate
<domain-name/ssl>` and would result in a *certificate name mismatch*
error. This is often displayed by web browsers as a warning such as
*"Your connection is not private"*.

If this is the case and you have added the domain name to your
database's settings less than five days ago, wait 24 hours as the
validation may still happen. Otherwise, please [submit a support
ticket](https://www.odoo.com/help) including screenshots of your CNAME
records.

</div>

#### SSL encryption (HTTPS protocol)

**SSL encryption** is an encryption-based Internet security protocol. It
allows your visitors to navigate your website through a secure
connection, which appears as an `https://` protocol at the beginning of
your web address, rather than a non-secure `http://` protocol.

Odoo generates a separate SSL certificate for each domain `mapped in the
database manager
<domain-name/db-map>`, using integration with [Let's Encrypt Certificate
Authority and ACME protocol](https://letsencrypt.org/how-it-works/).

<div class="note">

<div class="title">

Note

</div>

\- The certificate generation may take up to 24h. - Several attempts to
validate your certificate are made during the five days following the
moment you add your domain name in your database's settings. - If you
already use another service, you can keep using it or simply change for
Odoo.

</div>

#### Web base URL of a database

The **web base URL** of a database, or **root URL** affects your main
website address and all the links sent to your customers (e.g.,
quotations, portal links, etc.).

To configure it, access your Odoo database with your custom address,
then log in as an administrator of your database (any user in the
*Settings* group) from the login screen.

<div class="warning">

<div class="title">

Warning

</div>

Connecting to your database with the original Odoo subdomain address
(e.g., `example.odoo.com` also updates the web base URL of your
database. See below to prevent these automatic updates.

</div>

Alternatively, you can do it manually. To do so, activate the `developer
mode
<developer-mode>`, then go to `Settings --> Technical --> System
Parameters`.

Find the key called `web.base.url` (or create it if it does not exist)
and enter the full address of your website as value, such as
`https://www.example.com`.

<div class="note">

<div class="title">

Note

</div>

The URL must include the protocol `https://` (or `http://`) and must not
end with a slash (`/`).

</div>

To prevent the automatic update of the web base URL when an
administrator logs in the database, you can create the following System
Parameter:

  - key: `web.base.url.freeze`
  - value: `True`

## Map your domain name with your website

Mapping your domain name to your website isn't the same as mapping it
with your database:

  - It defines your domain name as the main one for your website,
    helping search engines to index your website properly.
  - If you have multiple websites, it maps your domain name with the
    appropriate website.

Go to `Website --> Configuration --> Settings --> Website Info`. If you
have multiple websites, select the one you want to configure.

In the `Domain` field, fill in the web address of your website (e.g.,
`https://www.example.com`) and click on `Save`.

![Configuring https://www.example.com as the Domain of the
website](domain_names/website-settings.png)

<div class="warning">

<div class="title">

Warning

</div>

Mapping your domain name with your Odoo website prevents Google from
indexing both your custom domain name `www.example.com` and your
original odoo database address `example.odoo.com`.

If both addresses are already indexed, it may take some time before
Google removes the indexation of the second address. You may also try
using the [Google Search
Console](https://search.google.com/search-console) to fix this.

</div>

<div class="seealso">

\- `/applications/general/email_communication/email_servers`

</div>


---
## File: ./content/administration/maintain/hosting_changes.md

# Change hosting solution

The instructions to change the hosting type of a database depend on the
current solution used and to which solution the database should be
moved.

## Transferring an on-premise database

### To Odoo Online

<div class="important">

<div class="title">

Important

</div>

\- Odoo Online is *not* compatible with **non-standard apps**. - The
database's current version must be `supported <supported_versions>`.

</div>

1.  Create a `duplicate <duplicate_premise>` of the database.
2.  In this duplicate, uninstall all **non-standard apps**.
3.  Use the database manager to grab a *dump with filestore*.
4.  [Submit a support ticket](https://www.odoo.com/help) including the
    following:
      - your **subscription number**,
      - the **URL** you want to use for the database (e.g.,
        <span class="title-ref">company.odoo.com</span>), and
      - the **dump** as an attachment or as a link to the file (required
        for 60 MB+ files).
5.  Odoo then makes sure the database is compatible before putting it
    online. In case of technical issues during the process, Odoo might
    contact you.

<div class="note">

<div class="title">

Note

</div>

If you have time constraints, [submit a support
ticket](https://www.odoo.com/help) as soon as possible to schedule the
transfer.

</div>

### To Odoo.sh

Follow the instructions found in `the Import your database section
<odoo_sh_import_your_database>` of the Odoo.sh *Create your project*
documentation.

## Transferring an Odoo Online database

<div class="important">

<div class="title">

Important

</div>

Odoo Online's `intermediary versions <supported_versions>` cannot be
hosted on-premise as that type of hosting does not support those
versions. Therefore, if the database to transfer is running an
intermediary version, it must be upgraded first to the next `major
version
<supported_versions>`, waiting for its release if necessary.

<div class="example">

Transferring an online database running on Odoo 16.3 would require first
upgrading it to Odoo 17.0.

</div>

<div class="tip">

<div class="title">

Tip

</div>

Click the gear icon (`⚙`) next to the database name on the [Odoo Online
database manager](https://www.odoo.com/my/databases/) to display its
version number.

</div>

</div>

### To on-premise

1.  Sign in to [the Odoo Online database
    manager](https://www.odoo.com/my/databases/) and click the gear icon
    (`⚙`) next to the database name to `Download` a backup. If the
    download fails due to the file being too large, [contact Odoo
    support](https://www.odoo.com/help).
2.  Restore the database from the database manager on your local server
    using the backup.

### To Odoo.sh

1.  Sign in to [the Odoo Online database
    manager](https://www.odoo.com/my/databases/) and click the gear icon
    (`⚙`) next to the database name to `Download` a backup. If the
    download fails due to the file being too large, [contact Odoo
    support](https://www.odoo.com/help).
2.  Follow the instructions found in `the Import your database section
    <odoo_sh_import_your_database>` of the Odoo.sh *Create your project*
    documentation.

## Transferring an Odoo.sh database

### To Odoo Online

<div class="important">

<div class="title">

Important

</div>

Odoo Online is *not* compatible with **non-standard apps**.

</div>

1.  Uninstall all **non-standard apps** in a staging build before doing
    it in the production build.
2.  [Create a support ticket](https://www.odoo.com/help) including the
    following:
      - your **subscription number**,
      - the **URL** you want to use for the database (e.g.,
        <span class="title-ref">company.odoo.com</span>),
      - which **branch** should be migrated,
      - in which **region** you want the database to be hosted
        (Americas, Europe, or Asia),
      - which user(s) will be the **administrator(s)**, and
      - **when** (and in which timezone) you want the database to be up
        and running.
3.  Odoo then makes sure the database is compatible before putting it
    online. In case of technical issues during the process, Odoo might
    contact you.

<div class="note">

<div class="title">

Note

</div>

\- If you have time constraints, [submit a support
ticket](https://www.odoo.com/help) as soon as possible to schedule the
transfer. - Select the **region** closest to most of your users to
reduce latency. - Future **administrator(s)** must have an Odoo.com
account. - The **date and time** you want the database to be up and
running are helpful to organize the switch from the Odoo.sh server to
the Odoo Online servers. - Databases are **not reachable** during their
migration.

</div>

### To on-premise

1.  Download a `backup of your Odoo.sh production database
    <odoo_sh_branches_backups>`.
2.  Restore the database from the database manager on your local server
    using the backup.


---
## File: ./content/administration/upgrade.md

# Upgrade

An upgrade is the process of moving your database from an older version
to a newer `supported
version <maintain/supported_versions>` (e.g., Odoo 14.0 to Odoo 16.0).
Frequently upgrading is essential as each version comes with new and
improved features, bug fixes, and security patches.

<div id="upgrade_faq/rolling_release">

<div class="spoiler">

Automatic upgrades: Odoo Online's Rolling Release process

The Rolling Release process allows Odoo Online customers to upgrade
their database directly from a message prompt sent to the database
administrator as soon as a new version is released. The invitation to
upgrade is only sent if no issues are detected during the automatic
tests.

![The upgrade message prompt on the top right of the
database](upgrade/rr-upgrade-message.png)

It is strongly recommended to manually `test the upgrade first
<upgrade/test_your_db>`. Clicking `I want to test first` redirects to
[the database manager](https://www.odoo.com/my/databases/), where it is
possible to request an upgraded test database and check it for any
discrepancies.

It is **not** recommended to click `Upgrade Now` without testing first,
as it immediately triggers the live production database upgrade.

If the Rolling Release process detects an issue with the upgrade, it
will be deactivated until the issue is resolved.

</div>

</div>

An upgrade does not cover:

>   - Downgrading to a previous version of Odoo
>   - `Switching editions <maintain/enterprise>` (e.g., from Community
>     to Enterprise)
>   - `Changing hosting type </administration/maintain/hosting_changes>`
>     (e.g., from on-premise to Odoo Online)
>   - Migrating from another ERP to Odoo

<div class="warning">

<div class="title">

Warning

</div>

If your database contains a **custom module**, you must first upgrade
its source code to be compatible with the new version of Odoo **before
upgrading**.

</div>

## Upgrading in a nutshell

1.  Request an upgraded test database (see `obtaining an upgraded test
    database
    <upgrade/request-test-database>`).
2.  Thoroughly test the upgraded database (see `testing the new version
    of the database
    <upgrade/test_your_db>`).
3.  Report any issue encountered during the testing to Odoo via the
    [support page](https://odoo.com/help?stage=migration).
4.  (If applicable) : upgrade the source code of your custom module to
    be compatible with the new version of Odoo.
5.  Once all issues are resolved and you are confident that the upgraded
    database can be used as your main database without any issues, plan
    the upgrade of your production database.
6.  Request the upgrade for the production database, rendering it
    unavailable for the time it takes to complete the process (see
    `upgrading the production database <upgrade/upgrade-prod>`).
7.  Report any issue encountered during the upgrade to Odoo via the
    [support page](https://odoo.com/help?stage=post_upgrade).

## Obtaining an upgraded test database

The [Upgrade page](https://upgrade.odoo.com/) is the main platform for
requesting an upgraded database. However, depending on the hosting type,
you can upgrade from the command line (on-premise), the [Odoo Online
database manager](https://odoo.com/my/databases), or your [Odoo.sh
project](https://odoo.sh/project).

<div class="note">

<div class="title">

Note

</div>

The Upgrade platform follows the same [Privacy
Policy](https://www.odoo.com/privacy) as the other Odoo.com services.
Visit the [General Data Protection Regulation
page](https://www.odoo.com/gdpr) to learn more about how Odoo handles
your data and privacy.

</div>

<div class="tabs">

<div class="group-tab">

Odoo Online

Odoo Online databases can be manually upgraded via the [database
manager](https://odoo.com/my/databases).

The database manager displays all databases associated with the user's
account. Databases not on the most recent version of Odoo display an
arrow in a circle icon next to their name, indicating that they can be
upgraded.

![The database manager with an upgrade button next to the name of a
database.](upgrade/databases-page.png)

Click the **arrow in a circle** icon to start the upgrade process. In
the popup, fill in:

  - The **version** of Odoo you want to upgrade to, usually the latest
    version
  - The **email** address that should receive the link to the upgraded
    database
  - The `Purpose` of the upgrade, which is automatically set to `Test`
    for your first upgrade request

![The "Upgrade your database" popup.](upgrade/upgrade-popup.png)

The `Upgrade in progress` tag is displayed next to the database name
until completion. Once the process succeeds, an email containing a link
to the upgraded test database is sent to the address provided. The
database can also be accessed from the database manager by clicking the
dropdown arrow before the database name.

![Clicking the menu arrow displays the upgraded test
database.](upgrade/access-upgraded-db.png)

</div>

<div class="group-tab">

Odoo.sh

Odoo.sh is integrated with the upgrade platform to simplify the upgrade
process.

![Odoo.sh project and tabs](upgrade/odoo-sh-staging.png)

The **latest production daily automatic backup** is then sent to the
[upgrade platform](https://upgrade.odoo.com).

Once the upgrade platform is done upgrading the backup and uploading it
on the branch, it is put in a **special mode**: each time a **commit is
pushed** on the branch, a **restore operation** of the upgraded backup
and an **update of all the custom modules** occur. This allows you to
test your custom modules on a pristine copy of the upgraded database.
The log file of the upgrade process can be found in your newly upgraded
staging build by going to `~/logs/upgrade.log`.

<div class="note">

<div class="title">

Note

</div>

In databases where custom modules are installed, their source code must
be up-to-date with the target version of Odoo before the upgrade can be
performed. If there are none, the "update on commit" mode is skipped,
the upgraded database is built as soon as it is transferred from the
upgrade platform, and the upgrade mode is exited.

</div>

</div>

<div class="group-tab">

On-premise

The standard upgrade process can be initiated by entering the following
command line on the machine where the database is hosted:

``` console
$ python <(curl -s https://upgrade.odoo.com/upgrade) test -d <your db name> -t <target version>
```

The following command can be used to display the general help and the
main commands:

``` console
$ python <(curl -s https://upgrade.odoo.com/upgrade) --help
```

An upgraded test database can also be requested via the [Upgrade
page](https://upgrade.odoo.com/).

<div class="note">

<div class="title">

Note

</div>

\- For security reasons, only the person who submitted the upgrade
request can download it. - For storage reasons, the database's copy is
submitted without a filestore to the upgrade server. Therefore, the
upgraded database does not contain the production filestore. - Before
restoring the upgraded database, its filestore must be merged with the
production filestore to be able to perform tests in the same conditions
as it would be in the new version. - The upgraded database contains:

  - A <span class="title-ref">dump.sql</span> file containing the
    upgraded database
  - A <span class="title-ref">filestore</span> folder containing files
    extracted from in-database records into attachments (if there are
    any) and new standard Odoo files from the targeted Odoo version
    (e.g., new images, icons, payment provider's logos, etc.). This is
    the folder that should be merged with the production filestore in
    order to get the full upgraded filestore.

</div>

</div>

</div>

<div class="note">

<div class="title">

Note

</div>

You can request multiple test databases if you wish to test an upgrade
more than once.

</div>

<div id="upgrade/upgrade_report">

<div class="note">

<div class="title">

Note

</div>

When an upgrade request is completed, an upgrade report is attached to
the successful upgrade email, and it becomes available in the Discuss
app for users who are part of the "Administration / Settings" group.
This report provides important information about the changes introduced
by the new version.

</div>

</div>

## Testing the new version of the database

It is essential to spend some time testing the upgraded test database to
ensure that you are not stuck in your day-to-day activities by a change
in views, behavior, or an error message once the upgrade goes live.

<div class="note">

<div class="title">

Note

</div>

Test databases are neutralized, and some features are disabled to
prevent them from impacting the production database:

1.  Scheduled actions are disabled.
2.  Outgoing mail servers are disabled by archiving the existing ones
    and adding a fake one.
3.  Payment providers and delivery carriers are reset to the test
    environment.

</div>

Testing as many of your business flows as possible is strongly
recommended to ensure they are working correctly and to get more
familiar with the new version.

<div class="admonition">

Basic test checklist

  - Are there views that are deactivated in your test database but
    active in your production database?
  - Are your usual views still displayed correctly?
  - Are your reports (invoice, sales order, etc.) correctly generated?
  - Are your website pages working correctly?
  - Are you able to create and modify records? (sales orders, invoices,
    purchases, users, contacts, companies, etc.)
  - Are there any issues with your mail templates?
  - Are there any issues with saved translations?
  - Are your search filters still present?
  - Can you export your data?

</div>

<div class="spoiler">

Example of end-to-end testing

  - Checking a random product in your product catalog and comparing its
    test and production data to verify everything is the same (product
    category, selling price, cost price, vendor, accounts, routes,
    etc.).
  - Buying this product (Purchase app).
  - Confirming the reception of this product (Inventory app).
  - Checking if the route to receive this product is the same in your
    production database (Inventory app).
  - Selling this product (Sales app) to a random customer.
  - Opening your customer database (Contacts app), selecting a customer
    (or company), and checking its data.
  - Shipping this product (Inventory app).
  - Checking if the route to ship this product is the same as in your
    production database (Inventory app).
  - Validating a customer invoice (Invoicing or Accounting app).
  - Crediting the invoice (issuing a credit note) and checking if it
    behaves as in your production database.
  - Checking your reports' results (Accounting app).
  - Randomly checking your taxes, currencies, bank accounts, and fiscal
    year (Accounting app).
  - Making an online order (Website apps) from the product selection in
    your shop until the checkout process and checking if everything
    behaves as in your production database.

This list is **not** exhaustive. Extend the example to your other apps
based on your use of Odoo.

</div>

If you face an issue while testing your upgraded test database, you can
request the assistance of Odoo via the [support
page](https://odoo.com/help?stage=migration) by selecting the option
related to testing the upgrade. In any case, it is essential to report
any problem encountered during the testing to fix it before upgrading
your production database.

You might encounter significant differences with standard views,
features, fields, and models during testing. Those changes cannot be
reverted on a case-by-case basis. However, if a change introduced by a
new version breaks a customization, it is the responsibility of the
maintainer of your custom module to make it compatible with the new
version of Odoo.

<div class="tip">

<div class="title">

Tip

</div>

Do not forget to test:

  - Integrations with external software (EDI, APIs, etc.)
  - Workflows between different apps (online sales with eCommerce,
    converting a lead all the way to a sales order, delivery of
    products, etc.)
  - Data exports
  - Automated actions
  - Server actions in the action menu on form views, as well as by
    selecting multiple records on list views

</div>

## Upgrading the production database

Once the `tests <upgrade/test_your_db>` are completed and you are
confident that the upgraded database can be used as your main database
without any issues, it is time to plan the go-live day. It can be
planned in coordination with Odoo's upgrade support analysts, reachable
via the [support page](https://odoo.com/help).

Your production database will be unavailable during its upgrade.
Therefore, we recommend planning the upgrade at a time when the use of
the database is minimal.

As the standard upgrade scripts and your database are constantly
evolving, it is also recommended to frequently request another upgraded
test database to ensure that the upgrade process is still successful,
especially if it takes a long time to finish. Fully rehearsing the
upgrade process the day before upgrading the production database is also
recommended.

<div class="important">

<div class="title">

Important

</div>

\- Going into production without first testing may lead to:

  - Users failing to adjust to the changes and new features
  - Business interruptions (e.g., no longer having the possibility to
    validate an action)
  - Poor customer experience (e.g., an eCommerce website that does not
    work correctly)

</div>

The process of upgrading a production database is similar to upgrading a
test database with a few exceptions.

<div class="tabs">

<div class="group-tab">

Odoo Online

The process is similar to `obtaining an upgraded test database
<upgrade/request-test-database>`, except for the purpose option, which
must be set to `Production` instead of `Test`.

<div class="warning">

<div class="title">

Warning

</div>

Once the upgrade is requested, the database will be unavailable until
the upgrade is finished. Once the process is completed, it is impossible
to revert to the previous version.

</div>

</div>

<div class="group-tab">

Odoo.sh

The process is similar to `obtaining an upgraded test database
<upgrade/request-test-database>` on the `Production` branch.

![View from the upgrade tab](upgrade/odoo-sh-prod.png)

The process is **triggered as soon as a new commit is made** on the
branch. This allows the upgrade process to be synchronized with the
deployment of the custom modules' upgraded source code. If there are no
custom modules, the upgrade process is triggered immediately.

<div class="important">

<div class="title">

Important

</div>

The database is unavailable throughout the process. If anything goes
wrong, the platform automatically reverts the upgrade, as it would be
for a regular update. In case of success, a backup of the database
before the upgrade is created.

</div>

The update of your custom modules must be successful to complete the
entire upgrade process. Make sure the status of your staging upgrade is
`successful` before trying it in production.

</div>

<div class="group-tab">

On-premise

The command to upgrade a database to production is similar to the one of
upgrading a test database except for the argument
<span class="title-ref">test</span>, which must be replaced by
\`production\`:

``` console
$ python <(curl -s https://upgrade.odoo.com/upgrade) production -d <your db name> -t <target version>
```

An upgraded production database can also be requested via the [Upgrade
page](https://upgrade.odoo.com/). Once the database is uploaded, any
modification to your production database will **not** be present on your
upgraded database. This is why we recommend not using it during the
upgrade process.

<div class="important">

<div class="title">

Important

</div>

When requesting an upgraded database for production purposes, the copy
is submitted without a filestore. Therefore, the upgraded database
filestore must be merged with the production filestore before deploying
the new version.

</div>

</div>

</div>

In case of an issue with your production database, you can request the
assistance of Odoo via the [support
page](https://odoo.com/help?stage=post_upgrade) by selecting the option
related to the upgrade in production.

## Service-level agreement (SLA)

With Odoo Enterprise, upgrading a database to the most recent version of
Odoo is **free**, including any support required to rectify potential
discrepancies in the upgraded database.

Information about the upgrade services included in the Enterprise
Licence is available in the `Odoo Enterprise Subscription Agreement
<upgrade>`. However, this section clarifies what upgrade services you
can expect.

### Upgrade services covered by the SLA

Databases hosted on Odoo's cloud platforms (Odoo Online and Odoo.sh) or
self-hosted (On-Premise) can benefit from upgrade services at all times
for:

  - the upgrade of all **standard applications**;
  - the upgrade of all **customizations created with the Studio app**,
    as long as Studio is still installed and the respective subscription
    is still active; and
  - the upgrade of all **developments and customizations covered by a
    maintenance of customizations subscription**.

Upgrade services are limited to the technical conversion and adaptation
of a database (standard modules and data) to make it compatible with the
version targeted by the upgrade.

### Upgrade services not covered by the SLA

The following upgrade-related services are **not** included:

  - the **cleaning** of pre-existing data and configurations while
    upgrading;
  - the upgrade of **custom modules created in-house or by third
    parties**, including Odoo partners;
  - lines of **code added to standard modules**, i.e., customizations
    created outside the Studio app, code entered manually, and
    `automated actions using Python code
    <studio/automated-actions/actions>`; and
  - **training** on using the upgraded version's features and workflows.

<div class="seealso">

\- `Odoo.sh documentation <odoo_sh>` - `Supported Odoo versions
<maintain/supported_versions>`

</div>


---
## File: ./content/administration/maintain.md

  - nosearch

# Maintain

<div class="toctree">

maintain/domain\_names maintain/azure\_oauth maintain/google\_oauth
maintain/update maintain/enterprise maintain/hosting\_changes
maintain/odoo\_online maintain/on\_premise maintain/supported\_versions

</div>


---
## File: ./content/legal/terms/terms_of_sale_tex.md

  - nosearch

  - orphan

<div class="toctree" data-maxdepth="4" hidden="">

terms\_of\_sale

</div>


---
## File: ./content/legal/terms/terms_of_sale.md

# General Terms of Sale

<div class="only">

html

[Download
PDF](https://www.odoo.com/documentation/%7BCURRENT_BRANCH%7D/terms_of_sale.pdf)

</div>

<div class="note">

<div class="title">

Note

</div>

Last revision: September 12, 2023.

</div>

These General Terms of Sale govern the sale of products and services by
Odoo S.A. and its affiliates (collectively, "Odoo S.A.") to the client.
Additional terms may apply for services provided by Odoo S.A. (for
example, the Enterprise Subscription Agreement). If these additional
terms are inconsistent with the General Terms of Sale, the additional
terms will prevail over these General Terms of Sale.

Please read these terms carefully before placing an order with Odoo S.A.
By accepting an order with Odoo S.A., the client marks his acceptance
with these terms.

The client explicitly waives its own standard terms and conditions, even
if these were drawn up after these standard terms and conditions of
sale. In order to be valid, any derogation must be expressly agreed to
in advance in writing.

Our invoices are payable within 21 working days, unless another payment
timeframe is indicated on either the invoice or the order. In the event
of non-payment by the due date, Odoo S.A. reserves the right to request
a fixed interest payment amounting to 15% of the sum remaining due. Odoo
S.A. will be authorised to suspend any provision of services without
prior warning in the event of late payment.

If a payment is still outstanding more than sixty (60) days after the
due payment date, Odoo S.A. reserves the right to call on the services
of a debt recovery company. All legal expenses will be payable by the
client.

Certain countries apply withholding at source on the amount of invoices,
in accordance with their internal legislation. Any withholding at source
will be paid by the client to the tax authorities. Under no
circumstances can Odoo S.A. become involved in costs related to a
country's legislation. The amount of the invoice will therefore be due
to Odoo S.A. in its entirety and does not include any costs relating to
the legislation of the country in which the client is located.

For clients with a global presence, the applicable pricing is always
based on the client location with the highest price list, unless
otherwise specified in writing at the time of purchase.

Monthly Subscriptions are only available for hosting on the Cloud
Platform (Odoo SaaS and Odoo SH). Payment of Monthly Subscriptions can
only be made by credit card or an equivalent supported automatic debit
method. Odoo S.A. reserves the right to refuse any Monthly Subscription
that does not comply with these conditions.

Odoo S.A. undertakes to do its best to supply services in due time in
accordance with the agreed timeframes. However, none of its obligations
can be considered as being an obligation to achieve results. Odoo S.A.
cannot, under any circumstances, be required by the client to appear as
a third party in the context of any claim for damages filed against the
client by an end consumer.

In order for it to be admissible, Odoo S.A. must be notified of any
claim by means of a letter sent by recorded delivery to its registered
office within 8 days of the delivery of the goods or the provision of
the services.

To the maximum extent permitted by law, the aggregate liability of each
party together with its affiliates arising will not exceed 50% of the
total amount paid by the Customer under these terms during the 12 months
immediately preceding the date of the event giving rise to such claim.
Multiple claims shall not enlarge this limitation.

Odoo S.A. reserves the right to modify these terms at any time without
prior notice. The client will be subject to the terms in force at the
time of acceptation of those terms.

All our contractual relations will be governed exclusively by Belgian
law. Moreover, any dispute that may arise will be subject exclusively to
the jurisdiction of the courts of the Nivelles arrondissement (Belgium).


---
## File: ./content/legal/terms/odoo_sh_terms.md

# Odoo.sh Beta Program

<div class="note">

<div class="title">

Note

</div>

Version 1 - Last revision: October 3, 2017.

</div>

TERMS & CONDITIONS OF THE ODOO.SH BETA PROGRAM

You understand and acknowledge that the Service is being provided as a
“Public Beta”, and is made available on an “AS IS” and “AS AVAILABLE”
basis for the purpose of providing Odoo S.A. and its affiliates with
feedback on the quality and usability of the Service.

The Service may contain errors or inaccuracies that could cause
failures, corruption or loss of data and/or information from your test,
staging and production instances.

You assume all risks and all costs associated with your use of the
service, including, without limitation, any loss of information or data.

In addition, Odoo S.A. is not obligated to provide any maintenance,
technical or other support for the Service.


---
## File: ./content/legal/terms/enterprise.md

# Odoo Enterprise Subscription Agreement

<div class="only">

html

[Download
PDF](https://www.odoo.com/documentation/%7BCURRENT_BRANCH%7D/odoo_enterprise_agreement.pdf)

</div>

<div class="note">

<div class="title">

Note

</div>

Version 10a - 2022-10-27

</div>

By subscribing to the Odoo Enterprise services (the "Services") provided
by Odoo SA and its affiliates (collectively, "Odoo SA") in relation with
Odoo Enterprise Edition or Odoo Community Edition (the "Software"),
hosted on Odoo SA's Cloud platforms (the "Cloud Platform") or
on-premises ("Self-Hosting"), you (the "Customer") are agreeing to be
bound by the following terms and conditions (the "Agreement").

## 1 Term of the Agreement

The duration of this Agreement (the “Term”) shall be specified in
writing on conclusion of this Agreement, beginning on the date of
conclusion. It is automatically renewed for an equal Term, unless either
party provides a written notice of termination minimum 30 days before
the end of the Term to the other party.

## 2 Definitions

  - User  
    Any user account indicated as active in the Software, with access to
    creation and/or edition mode. Deactivated user accounts and accounts
    used by external people (or systems) who only have limited access to
    the Software through the portal facilities (known as "portal Users")
    are not counted as Users.

  - App  
    An "App" is a specialized group of features available for
    installation in the Software.

  - Odoo Partner  
    An Odoo Partner is a third-party company or individual, chosen by
    the Customer, and working with the Customer for their Odoo related
    services. The Customer can decide at any time to work with a
    different Odoo Partner, or to work with Odoo SA directly (subject to
    prior notice).

  - Extra Module  
    An extra module is a directory of source code files, or a set of
    Python-based customizations created in a database (e.g. with Odoo
    Studio), that adds features or changes the standard behavior of the
    Software. It may have been developed by the Customer, by Odoo SA, by
    an Odoo Partner on behalf of the Customer, or by third parties.

  - Covered Extra Module  
    A Covered Extra Module is an Extra Module for which the Customer
    chooses to pay a maintenance fee in order to get support, upgrade
    and bug fixing services.

  - Bug  
    Is considered a Bug any failure of the Software or of a Covered
    Extra Module that results in a complete stop, error traceback or
    security breach, and is not directly caused by a defective
    installation or configuration. Non-compliance with specifications or
    requirements will be considered as Bugs at the discretion of Odoo SA
    (typically, when the Software does not produce the results or
    performance it was designed to produce, or when a country-specific
    feature does not meet legal accounting requirements anymore).

  - Covered Versions  
    Unless specified otherwise, the Services provided under this
    Agreement are applicable only to the Covered Versions of the
    Software, which include the 3 most recently released major versions.

  - Subscription Plan  
    A Subscription Plan defines a set of Apps, features and hosting
    solutions covered by this Agreement, and is defined in writing at
    the conclusion of this Agreement.

## 3 Access to the Software

The Customer can use the Software hosted on the Cloud Platform, or
choose the Self-Hosting option. The Cloud Platform is hosted and fully
managed by Odoo SA, and accessed remotely by the Customer. With the
Self-Hosting option, the Customer instead hosts the Software on computer
systems of their choice, that are not under the control of Odoo SA.

For the duration of this Agreement, Odoo SA gives the Customer a
non-exclusive, non-transferable license to use (execute, modify, execute
after modification) the Odoo Enterprise Edition software, under the
terms set forth in `appendix_a`.

The Customer agrees to take all necessary measures to guarantee the
unmodified execution of the part of the Software that verifies the
validity of the Odoo Enterprise Edition usage and collects statistics
for that purpose, including but not limited to the running of an
instance, the number of Users, the installed Apps, and the number of
lines of code of Covered Extra Modules.

Odoo SA commits not to disclose individual or named figures to third
parties without the consent of the Customer, and to deal with all
collected data in compliance with its official Privacy Policy, published
at <https://www.odoo.com/privacy>.

Upon expiration or termination of this Agreement, this license is
revoked immediately and the Customer agrees to stop using the Odoo
Enterprise Edition software and the Cloud Platform.

Should the Customer breach the terms of this section, the Customer
agrees to pay Odoo SA an extra fee equal to 300% of the applicable list
price for the actual number of Users.

## 4 Services

### 4.1 Bug Fixing Service

For the duration of this Agreement, Odoo SA commits to making all
reasonable efforts to remedy any Bug of the Software and Covered Extra
Modules submitted by the Customer through the appropriate channel
(typically, the web form or phone numbers listed on
[odoo.com/help](https://www.odoo.com/help), or when working with an Odoo
Partner, the channel provided by the partner), and to start handling
such Customer submissions within 2 business days.

As soon as the Bug is fixed an appropriate remedy will be communicated
to the Customer. If the Customer is using a Covered Version, they will
not be asked to upgrade to a more recent Covered Version of the Software
as a remedy to a Bug.

When a Bug is fixed in any Covered Version, Odoo SA commits to fixing
the Bug in all more recent Covered Versions of the Software.

Both parties acknowledge that as specified in the license of the
Software and in the `liability` section of this Agreement, Odoo SA
cannot be held liable for Bugs in the Software or in Covered Extra
Modules.

### 4.2 Security Updates Service

#### Self-Hosting

For the duration of this Agreement, Odoo SA commits to sending a
"Security Advisory" to the Customer for any security Bug that is
discovered in the Covered Versions of the Software (this excludes Extra
Modules), at least 2 weeks before making the Security Advisory public,
unless the Bug has already been disclosed publicly by a third party.
Security Advisories include a complete description of the Bug, its
cause, its possible impacts on the Customer's systems, and the
corresponding remedy for each Covered Version.

The Customer understands that the Bug and the information in the
Security Advisory must be treated as Confidential Information as
described in `confidentiality` during the embargo period prior to the
public disclosure.

#### Cloud Platform

Odoo SA commits to apply the security remedies for any security Bug
discovered in a version of the Software hosted on the Cloud Platform, on
all systems under its control, as soon as the remedy is available,
without requiring any manual action of the Customer.

### 4.3 Upgrade Services

#### Upgrade Service for the Software

For the duration of this Agreement, the Customer can submit upgrade
requests through the appropriate channel (typically Odoo SA's upgrade
service website), in order to convert a database of the Software from
any version of the Software to a more recent Covered Version (the
"Target Version").

For the Cloud Platform, upgrade requests are submitted directly from the
control panel of the Cloud Platform, and do not require any data upload.
For Self-Hosting, upgrade requests must include a copy of the Customer's
database and the associated data (typically obtained from the Backup
menu of the Software).

This service provided through an automated platform in order to allow
the Customer to perform unattended upgrades once a previous version of
the Customer's database has been successfully upgraded for a Covered
Version.

The Upgrade Service is limited to the technical conversion and
adaptation of the Customer's database to make it compatible with the
Target Version, the correction of any Bug directly caused by the upgrade
operation and not normally occurring in the Target Version, and the
conversion of the source code and data of Covered Extra Modules for the
Target Version.

It is the responsibility of the Customer to verify and validate the
upgraded database in order to detect Bugs, to analyze the impact of
changes and new features implemented in the Target Version, and to
convert and adapt for the Target Version any third-party extensions of
the Software that were installed in the database before the upgrade
(e.g. non-convered Extra Modules). The Customer may submit multiple
upgrade requests for a database, until an acceptable result is achieved.

### 4.4 Cloud Hosting Services

For the duration of this Agreement, when the Customer chooses to use the
Cloud Platform, Odoo SA commits to providing at least the following
services:

  - Choice of multiple hosting regions (minimum 3: Europe, America,
    Asia/Pacific)
  - Hosting in Tier-III data centers or equivalent, with 99.9% network
    uptime
  - Grade A SSL (HTTPS) Encryption of communication
  - Fully automated, verified backups, replicated in multiple regions
  - Disaster Recovery Plan, tested regularly

The details of the Cloud Hosting Services are described on the Service
Level Agreement page at <https://www.odoo.com/cloud-sla>.

### 4.5 Support Services

#### Scope

For the duration of this Agreement, the Customer may open an unlimited
number of support tickets free of charge, exclusively for questions
regarding Bugs (see `bugfix`) or guidance with respect to the use of the
standard features of the Software and Covered Extra Modules.

Other assistance requests, such as questions related to development or
customizations may be covered through the purchase of a separate service
agreement. In case it’s not clear if a request is covered by this
Agreement, the decision is at the discretion of Odoo SA.

#### Availability

Tickets can be submitted via the web form or phone numbers listed on
[odoo.com/help](https://www.odoo.com/help), or when working with an Odoo
Partner, the channel provided by the partner, subject to local opening
hours.

### 4.6 Working with an Odoo Partner

For bug fixes, support and upgrade services, the Customer may either
work with an Odoo Partner as the main point of contact, or work with
Odoo SA directly.

If the Customer decides to work with an Odoo Partner, Odoo SA will
subcontract services related to the Covered Extra Modules to the Odoo
Partner, who becomes the main point of contact of the customer. The Odoo
Partner may contact Odoo SA on behalf of the customer for second-level
assistance with regard to standard features of the Software.

If the Customer decides to work with Odoo SA directly, services related
to Covered Extra Modules are provided *if and only if* the Customer is
hosted on the Odoo Cloud Platform.

## 5 Charges and Fees

### 5.1 Standard charges

The standard charges for the Odoo Enterprise subscription and the
Services are based on the number of Users and the Subscription Plan used
by the Customer, and specified in writing at the conclusion of the
Agreement.

When during the Term, the Customer has more Users or uses features that
require another Subscription Plan than specified at the time of
conclusion of this Agreement, the Customer agrees to pay an extra fee
equivalent to the applicable list price (at the time of the deviation
from the specified number of Users or Subscription Plan) for the
additional Users or the required Subscription Plan, for the remainder of
the Term.

In addition, services for Covered Extra Modules are charged based on the
number of lines of code in these modules. When the Customer opts for the
maintenance of Covered Extra Modules, the charge is a monthly fee per
100 lines of code (rounded up to the next hundred), as specified in
writing at the conclusion of the Agreement. Lines of code will be
counted with the `cloc` command of the Software, and include all text
lines in the source code of those modules, regardless of the programming
language (Python, Javascript, XML, etc.), excluding blank lines, comment
lines and files that are not loaded when installing or executing the
Software.

When the Customer requests an upgrade, for each Covered Extra Module
that has not been covered by a maintenance fee for the last 12 months,
Odoo SA may charge a one-time extra fee for each missing month of
coverage.

### 5.2 Renewal charges

Upon renewal as covered in section `term`, if the charges applied during
the previous Term are lower than the most current applicable list price,
these charges will increase by up to 7%.

### 5.3 Taxes

All fees and charges are exclusive of all applicable federal,
provincial, state, local or other governmental taxes, fees or charges
(collectively, "Taxes"). The Customer is responsible for paying all
Taxes associated with purchases made by the Customer under this
Agreement, except when Odoo SA is legally obliged to pay or collect
Taxes for which the Customer is responsible.

## 6 Conditions of Services

### 6.1 Customer Obligations

The Customer agrees to:

  - pay Odoo SA any applicable charges for the Services of the present
    Agreement, in accordance with the payment conditions specified at
    the signature of this contract ;
  - immediately notify Odoo SA when their actual number of Users exceeds
    the number specified at the conclusion of the Agreement, and in this
    event, pay the applicable additional fee as described in section
    `charges_standard`;
  - take all measures necessary to guarantee the unmodified execution of
    the part of the Software that verifies the validity of the Odoo
    Enterprise Edition usage, as described in `enterprise_access` ;
  - appoint 1 dedicated Customer contact person for the entire duration
    of the Agreement;
  - provide written notice to Odoo SA 30 days before changing their main
    point of contact to work with another Odoo Partner, or to work with
    Odoo SA directly.

When the Customer chooses to use the Cloud Platform, the Customer
further agrees to:

  - take all reasonable measures to keep their user accounts secure,
    including by choosing a strong password and not sharing it with
    anyone else;
  - make a reasonable use of the Hosting Services, to the exclusion of
    any illegal or abusive activities, and strictly observe the rules
    outlined in the Acceptable Use Policy published at
    <https://www.odoo.com/acceptable-use>.

When the Customer chooses the Self-Hosting option, the Customer further
agrees to:

  - take all reasonable measures to protect Customer’s files and
    databases and to ensure Customer’s data is safe and secure,
    acknowledging that Odoo SA cannot be held liable for any data loss;
  - grant Odoo SA the necessary access to verify the validity of the
    Odoo Enterprise Edition usage upon request (e.g. if the automatic
    validation is found to be inoperant for the Customer).

### 6.2 No Soliciting or Hiring

Except where the other party gives its consent in writing, each party,
its affiliates and representatives agree not to solicit or offer
employment to any employee of the other party who is involved in
performing or using the Services under this Agreement, for the duration
of the Agreement and for a period of 12 months from the date of
termination or expiration of this Agreement. In case of any breach of
the conditions of this section that leads to the termination of said
employee toward that end, the breaching party agrees to pay to the other
party an amount of EUR (€) 30 000.00 (thirty thousand euros).

### 6.3 Publicity

Except where notified otherwise in writing, each party grants the other
a non-transferable, non-exclusive, royalty free, worldwide license to
reproduce and display the other party’s name, logos and trademarks,
solely for the purpose of referring to the other party as a customer or
supplier, on websites, press releases and other marketing materials.

### 6.4 Confidentiality

  - Definition of "Confidential Information":  
    All information disclosed by a party (the "Disclosing Party") to the
    other party (the "Receiving Party"), whether orally or in writing,
    that is designated as confidential or that reasonably should be
    understood to be confidential given the nature of the information
    and the circumstances of disclosure. In particular any information
    related to the business, affairs, products, developments, trade
    secrets, know-how, personnel, customers and suppliers of either
    party should be regarded as confidential.

For all Confidential Information received during the Term of this
Agreement, the Receiving Party will use the same degree of care that it
uses to protect the confidentiality of its own similar Confidential
Information, but not less than reasonable care.

The Receiving Party may disclose Confidential Information of the
Disclosing Party to the extent compelled by law to do so, provided the
Receiving Party gives the Disclosing Party prior notice of the compelled
disclosure, to the extent permitted by law.

### 6.5 Data Protection

  - Definitions  
    "Personal Data", "Controller", "Processing" take the same meanings
    as in the Regulation (EU) 2016/679 and the Directive 2002/58/EC, and
    any regulation or legislation that amends or replaces them
    (hereafter referred to as “Data Protection Legislation”)

#### Processing of Personal Data

The parties acknowledge that the Customer's database may contain
Personal Data, for which the Customer is the Controller. This data will
be processed by Odoo SA when the Customer instructs so, by using any of
the Services that require a database (e.g. the Cloud Hosting Services or
the Database Upgrade Service), or if the Customer transfers their
database or a part of their database to Odoo SA for any reason
pertaining to this Agreement.

This processing will be performed in conformance with Data Protection
Legislation. In particular, Odoo SA commits to:

  - (a) only process the Personal Data when and as instructed by the
    Customer, and for the purpose of performing one of the Services
    under this Agreement, unless required by law to do so, in which case
    Odoo SA will provide prior notice to the Customer, unless the law
    forbids it ;
  - (b) ensure that all persons within Odoo SA authorised to process the
    Personal Data have committed themselves to confidentiality ;
  - (c) implement and maintain appropriate technical and organizational
    measures to protect the Personal Data against unauthorized or
    unlawful processing and against accidental loss, destruction,
    damage, theft, alteration or disclosure ;
  - (d) forward promptly to the Customer any Data Protection request
    that was submitted to Odoo SA with regard to the Customer's database
    ;
  - (e) notify the Customer promptly upon becoming aware of and
    confirming any accidental, unauthorized, or unlawful processing of,
    disclosure of, or access to the Personal Data ;
  - (f) notify the Customer if the processing instructions infringe
    applicable Data Protection Legislation, in the opinion of Odoo SA;
  - (g) make available to the Customer all information necessary to
    demonstrate compliance with the Data Protection Legislation, allow
    for and contribute reasonably to audits, including inspections,
    conducted or mandated by the Customer;
  - (h) permanently delete all copies of the Customer's database in
    possession of Odoo SA, or return such data, at the Customer’s
    choice, upon termination of this Agreement, subject to the delays
    specified in Odoo SA's [Privacy
    Policy](https://www.odoo.com/privacy) ;

With regard to points (d) to (f), the Customer agrees to provide Odoo SA
with accurate contact information at all times, as necessary to notify
the Customer's Data Protection responsible.

#### Subprocessors

The Customer acknowledges and agrees that in order to provide the
Services, Odoo SA may use third-party service providers (Subprocessors)
to process Personal Data. Odoo SA commits to only use Subprocessors in
compliance with Data Protection Legislation. This use will be covered by
a contract between Odoo SA and the Subprocessor that provides guarantees
to that effect. Odoo SA's Privacy Policy, published at
<https://www.odoo.com/privacy> provides up-to-date information regarding
the names and purposes of Subprocessors currently in use by Odoo SA for
the execution of the Services.

### 6.6 Termination

In the event that either Party fails to fulfill any of its obligations
arising herein, and if such breach has not been remedied within 30
calendar days from the written notice of such breach, this Agreement may
be terminated immediately by the non-breaching Party.

Further, Odoo SA may terminate the Agreement immediately in the event
the Customer fails to pay the applicable fees for the Services within 21
days following the due date specified on the corresponding invoice, and
after minimum 3 reminders.

  - Surviving Provisions:  
    The sections "`confidentiality`”, “`disclaimers`”, “`liability`”,
    and “`general_provisions`” will survive any termination or
    expiration of this Agreement.

## 7 Warranties, Disclaimers, Liability

### 7.1 Warranties

Odoo SA owns the copyright or an equivalent\[1\] on 100% of the code of
the Software, and confirms that all the software libraries required to
use the Software are available under a licence compatible with the
licence of the Software.

For the duration of this Agreement, Odoo SA commits to using
commercially reasonable efforts to execute the Services in accordance
with the generally accepted industry standards provided that:

  - the Customer’s computing systems are in good operational order and,
    for Self-Hosting, that the Software is installed in a suitable
    operating environment;
  - the Customer provides adequate troubleshooting information and, for
    Self-Hosting, any access that Odoo SA may need to identify,
    reproduce and address problems;
  - all amounts due to Odoo SA have been paid.

The Customer's sole and exclusive remedy and Odoo SA's only obligation
for any breach of this warranty is for Odoo SA to resume the execution
of the Services at no additional charge.

### 7.2 Disclaimers

Except as expressly provided herein, neither party makes any warranty of
any kind, whether express, implied, statutory or otherwise, and each
party specifically disclaims all implied warranties, including any
implied warranty of merchantability, fitness for a particular purpose or
non-infringement, to the maximum extent permitted by applicable law.

Odoo SA does not warrant that the Software complies with any local or
international law or regulations.

### 7.3 Limitation of Liability

To the maximum extent permitted by law, the aggregate liability of each
party together with its affiliates arising out of or related to this
Agreement will not exceed 50% of the total amount paid by the Customer
under this Agreement during the 12 months immediately preceding the date
of the event giving rise to such claim. Multiple claims shall not
enlarge this limitation.

In no event will either party or its affiliates be liable for any
indirect, special, exemplary, incidental or consequential damages of any
kind, including but not limited to loss of revenue, profits, savings,
loss of business or other financial loss, costs of standstill or delay,
lost or corrupted data, arising out of or in connection with this
Agreement regardless of the form of action, whether in contract, tort or
otherwise, even if a party or its affiliates have been advised of the
possibility of such damages, or if a party or its affiliates' remedy
otherwise fails of its essential purpose.

### 7.4 Force Majeure

Neither party shall be liable to the other party for the delay in any
performance or failure to render any performance under this Agreement
when such failure or delay finds its cause in a case of *force majeure*,
such as governmental regulations, fire, strike, war, flood, accident,
epidemic, embargo, appropriation of plant or product in whole or in part
by any government or public authority, or any other cause or causes,
whether of like or different nature, beyond the reasonable control of
such party as long as such cause or causes exist.

## 8 General Provisions

### 8.1 Governing Law

This Agreement and all Customer orders will be subject to Belgian law.
Any dispute arising out of or in connection with this Agreement or any
Customer order will be subject to the exclusive jurisdiction of the
Nivelles Business Court.

### 8.2 Severability

In case any one or more of the provisions of this Agreement or any
application thereof shall be invalid, illegal or unenforceable in any
respect, the validity, legality and enforceability of the remaining
provisions of this Agreement and any application thereof shall be in no
way thereby affected or impaired. Both parties undertake to replace any
invalid, illegal or unenforceable provision of this Agreement by a valid
provision having the same effects and objectives.

## 9 Appendix A: Odoo Enterprise Edition License

<div class="only">

latex

Odoo Enterprise Edition is licensed under the Odoo Enterprise Edition
License v1.0, defined as follows:

<div class="literalinclude">

../licenses/enterprise\_license.txt

</div>

</div>

<div class="only">

html

See `odoo_enterprise_license`.

</div>

<div class="only">

disabled

## Agreement Registration

### Customer contact information

Company name: Company address: VAT number (if applicable): Contact name:
Email: Phone:

### Technical contact information (can be an Odoo partner):

Company name: Contact name: Email: Phone:

By signing this Agreement I confirm I am a legal representative of
Customer as stated in the resent section and approve all provisions and
conditions of the present Agreement:

For and on behalf of (company name): Last name, first name: Title: Date:

Signature:

</div>

1.  External contributions are covered by a [Copyright License
    Agreement](https://www.odoo.com/cla) that provides a permanent, free
    and irrevocable, copyright and patent licence to Odoo SA.


---
## File: ./content/legal/terms/enterprise_tex.md

  - nosearch

  - orphan

<div class="toctree" data-maxdepth="4" hidden="">

enterprise

</div>


---
## File: ./content/legal/terms/partnership.md

# Odoo Partnership Agreement

<div class="only">

html

[Download PDF](../../odoo_partnership_agreement.pdf)

</div>

<div class="note">

<div class="title">

Note

</div>

Version 11 - 2023-05-19

</div>

BETWEEN:  
 Odoo S.A., having its registered office at Chaussée de Namur, 40, 1367
Grand-Rosière,  
 Belgium, and its affiliates (collectively referred to as “ODOO”)  
AND:  
 \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_,
a company having its registered office at  
 \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_.  
 (hereinafter referred to as “PARTNER”)

ODOO and PARTNER are individually referred to as a "Party" and
collectively referred to as "the Parties".

## 1 Purpose

The purpose of this agreement is to set forth the conditions under which
ODOO provides services to PARTNER, access to the Odoo Enterprise Edition
software, and under which PARTNER complies with the obligations set out
hereafter.

ODOO hereby appoints PARTNER, and PARTNER hereby accepts the
appointment, to be a non-exclusive partner promoting and selling "Odoo
Enterprise Edition" to customers.

PARTNER commits to doing its best effort to sell Odoo Enterprise
contracts to its clients. To support that, PARTNER will market in
priority the "Odoo Enterprise Edition" version to prospects and
customers. PARTNER still has the option to sell services on other
versions of the software, like "Odoo Community Edition", should it be
needed.

## 2 Term of the Agreement

The duration of this Agreement (the “Term”) shall be one year beginning
on the date of the signature. It is automatically renewed for an equal
Term unless either party provides written notice of termination minimum
30 days before the end of the Term to the other party.

## 3 Access to Odoo Enterprise Edition

### 3.1 Project platform access

To help PARTNER promote Odoo Enterprise Edition, ODOO grants PARTNER
access to its project code repository for all "Odoo Enterprise Edition"
Apps, under the terms set forth in `appendix_p_a` and the conditions
restricted under this Agreement.

In addition, ODOO grants PARTNER free access to the ODOO.SH platform for
testing and development purposes.

### 3.2 Restrictions

PARTNER commits to keeping confidentiality of the source code of Odoo
Enterprise Edition Apps within its staff. Access to the source code of
Odoo Enterprise Edition for customers is governed by the Odoo Enterprise
Subscription Agreement. PARTNER agrees to NOT redistribute this code to
third parties without the written permission of ODOO.

PARTNER commits to not offer services on Odoo Enterprise Edition to
customers who are not covered by an Odoo Enterprise subscription, even
during the implementation phase.

Notwithstanding the above, PARTNER commits to wholly preserve the
integrity of the Odoo Enterprise Edition code that is required to verify
the validity of usage of Odoo Enterprise Edition and to collect
statistics that are needed for that purpose.

PARTNER is not allowed to block, restrict or limit in any way the
customer's access and use of the Odoo Enterprise Edition License,
without prior consultation and written authorisation from ODOO.

## 4 Partnership Services

### 4.1 Partnership levels

The Odoo partner program consists of two types of partnerships and four
levels; “Learning Partners” is for companies who want everything
necessary to start implementing Odoo, without visibility as an official
partner until they get the required experience; “Official Partners” is
for companies who want the visibility as Ready, Silver, and Gold,
according to their experience with Odoo.

Partnership level granted to PARTNER depends on the *net new Odoo
Enterprise users sold* in the last 12 months, the number of certified
resources and the customer Retention Rate. The *net new Odoo Enterprise
users sold* includes new customers, upsells on existing customer,
downsells on existing customers, and customer churn. Renewals of
existing contracts do not count towards the number of Users Sold, but
PARTNER still gets a commission on these contracts as stated in section
`benefits`.

The table below summarizes the requirements that have to be met for each
partnership level.

The customer *Retention Rate* is calculated by dividing the total number
of Odoo Enterprise customers acquired by PARTNER in the last 3 years
that are currently active by the total number of Odoo Enterprise
customers acquired by PARTNER in the last 3 years.

<table>
<colgroup>
<col style="width: 35%" />
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 16%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Learning Partner</th>
<th>Official: Ready</th>
<th>Official: Silver</th>
<th>Official: Gold</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Annual Net New Odoo Enterprise Users Sold</td>
<td><blockquote>
<p>0</p>
</blockquote></td>
<td><blockquote>
<p>10</p>
</blockquote></td>
<td>75</td>
<td>300</td>
</tr>
<tr class="even">
<td>Number of Certified Employees on at least one of the 3 last Odoo versions</td>
<td><blockquote>
<p>0</p>
</blockquote></td>
<td><blockquote>
<p>1</p>
</blockquote></td>
<td>3</td>
<td>6</td>
</tr>
<tr class="odd">
<td>Minimum Retention Rate</td>
<td><blockquote>
<p>n/a</p>
</blockquote></td>
<td><blockquote>
<p>n/a</p>
</blockquote></td>
<td>70%</td>
<td><blockquote>
<p>80%</p>
</blockquote></td>
</tr>
</tbody>
</table>

Certifications are personal, so when a certified staff member leaves or
joins the company, PARTNER must notify ODOO.

PARTNER's partnership level will be reviewed quarterly by ODOO, and
adjusted to the highest level for which the 3 requirements are met.

However, "Official Partners" may be upgraded automatically to a higher
level once they reach the 3 requirements for that higher partnership
level.

### 4.2 Benefits

The details of the benefits for each level of the partnership are
described in the table below:

<div class="only">

latex

<div class="tabularcolumns">

p{1.5cm}p{1.5cm}

</div>

</div>

|                                                             | Learning Partner | Official: Ready | Official: Silver | Official: Gold |
| ----------------------------------------------------------- | ---------------- | --------------- | ---------------- | -------------- |
| **Recognition**                                             |                  |                 |                  |                |
| Visibility on odoo.com                                      | No               | "Ready Partner" | "Silver Partner" | "Gold Partner" |
| Right to use "Odoo" trademark and Partner Logo              | Yes              | Yes             | Yes              | Yes            |
| **Training benefits**                                       |                  |                 |                  |                |
| Sales Coaching & Webinars                                   | Yes              | Yes             | Yes              | Yes            |
| Access to Odoo Knowledge Base                               | Yes              | Yes             | Yes              | Yes            |
| **Software benefits**                                       |                  |                 |                  |                |
| Access to Odoo Enterprise source code and Github repository | Yes              | Yes             | Yes              | Yes            |
| Odoo Enterprise trial extension code                        | Yes              | Yes             | Yes              | Yes            |
| Access to Odoo.sh for testing and development purposes      | Yes              | Yes             | Yes              | Yes            |
| **Sales benefits**                                          |                  |                 |                  |                |
| Commission on Odoo SH platform\[1\]                         | 10%              | 50%             | 50%              | 50%            |
| Commission on Odoo Enterprise                               | 10%              | 10%             | 15%              | 20%            |
| Commission on Maintenance of Extra Modules                  | 82%              | 82%             | 82%              | 82%            |
| Dedicated Account Manager & Partner Dashboard               | No               | Yes             | Yes              | Yes            |
| **Marketing benefits**                                      |                  |                 |                  |                |
| Access to marketing material                                | Yes              | Yes             | Yes              | Yes            |
| PARTNER Event - ODOO support & Promotion                    | No               | Yes             | Yes              | Yes            |

### 4.3 Partner Recognition

ODOO will promote "Official Partners" on the Odoo Partners list on
odoo.com.

ODOO grants PARTNER, on a non-exclusive basis, the right to use and
reproduce the ODOO Partner logo of the corresponding partnership level,
and the "Odoo" name in relation to this partnership agreement.

Each Party undertakes to respect all the rights of the other Party in
all the items referred to in the previous paragraph and, more
particularly, each Party shall refrain from causing any analogy or
creating any confusion between their respective company in the mind of
the general public.

### 4.4 Training Benefits

PARTNER has access to the ODOO knowledge base for the duration of this
Agreement. The ODOO knowledge base is an online e-platform containing a
set of commercial, marketing and functional documents, to help PARTNER
acquire and leverage Odoo knowledge, grow its business, attract more
customers, and build brand awareness.

PARTNER will have access to commercial coaching provided by their
dedicated Account Manager, as appointed by ODOO.

PARTNER also has the option to purchase support services or training by
subscribing to an Odoo Success Pack, for an extra fee.

### 4.5 Commissions on Odoo Services sold by PARTNER

For ODOO services purchased by a customer through PARTNER, and as long
as PARTNER maintains a contractual relationship with the corresponding
customer, PARTNER shall receive a commission according to the table of
section `benefits` and their Partnership level at the date of the
customer invoice.

Once a month, PARTNER will receive a purchase order with the commission
due for the preceding month. Based on this purchase order, PARTNER shall
invoice ODOO, and will be paid within 15 days upon receipt of the
invoice.

**Maintenance of Covered Extra Modules**

PARTNER acknowledges and agrees that when a customer decides to Work
with PARTNER\[2\] , ODOO will delegate the Maintenance of Covered Extra
Modules to PARTNER, who becomes the main point of contact of the
customer.

PARTNER shall only receive the commission for the Maintenance of Covered
Extra Modules as long as the customer does not notify ODOO that they
want to stop Working with PARTNER.

## 5 Fees

PARTNER agrees to pay the Partnership Annual Fee upon receipt of the
annual invoice sent by ODOO. The fee will be specified in writing at the
time of signature of this agreement.

PARTNER acknowledges that the above-mentioned Partnership fee is not
refundable.

All fees and charges are exclusive of all applicable federal,
provincial, state, local or other governmental taxes, fees or charges
(collectively, “Taxes”). PARTNER is responsible for paying all Taxes
associated with purchases made by PARTNER under this Agreement, except
when ODOO is legally obliged to pay or collect Taxes for which PARTNER
is responsible.

## 6 Termination

In the event that either Party fails to fulfill any of its obligations
arising herein, and if such a breach has not been remedied within 30
calendar days from the written notice of such breach, this Agreement may
be terminated immediately by the non-breaching Party.

  - Surviving Provisions:  
    The sections "`restrictions`”, “`p_liability`”, and “`gov_law`” will
    survive any termination or expiration of this Agreement.

### 6.1 Consequence of termination

  - On expiry or termination of this Agreement, PARTNER:
    
      - shall not use anymore the materials and the Odoo brand name,
        trademarks and logos or claim the existence of any partnership
        or relationship with ODOO ;
      - shall comply with its obligations during any notice period prior
        to such termination ;
      - may not use Odoo Enterprise anymore, for development, test or
        production purpose

## 7 Liability and Indemnities

Both Parties are bound by a best endeavours obligation hereunder.

To the maximum extent permitted by law, the liability of each Party for
any and all claims, losses, damages or expenses from any cause
whatsoever and howsoever arising under this Agreement will be limited to
the direct damages proved, but will in no event exceed for all
damage-causing event or series of connected events causing damages the
total amount for the fees paid by PARTNER in the course of the six (6)
months immediately preceding the date of the event giving rise to such
claim.

In no event will each Party be liable for any indirect or consequential
damages, including but not limited third parties or customer claims,
loss of revenue, profits, savings, loss of business or other financial
loss, costs of standstill or delay, lost or corrupted data arising out
of or in connection with the performance of its obligations under this
Agreement.

PARTNER acknowledges that he has no expectations and has received no
assurances that any investment made in execution of this Agreement and
the Odoo Partnership Program will be recovered or recouped or that he
shall obtain any anticipated amount of profits by virtue of this
Agreement.

## 8 Brand Image

The "Odoo" mark (including the word mark and its visual representations
and logos) is the exclusive property of ODOO.

ODOO authorizes PARTNER to use the "Odoo" mark to promote its products
and services, for the duration of this agreement only, as long as:

  - There is no possible confusion that the service is provided by
    PARTNER, not ODOO;
  - PARTNER does not use the word “Odoo” in their company name, product
    name, domain name, and does not register any trademark that includes
    it.

Both Parties shall refrain from harming the brand image and reputation
of the other Party, in any way whatsoever, in the performance of this
Agreement.

Non-compliance with the provisions of this section shall be a cause for
termination of this Agreement.

### 8.1 Publicity

PARTNER grants ODOO the non-exclusive right to use PARTNER's name or
trademarks in press releases, advertisements or other public
announcements.

In particular, PARTNER accepts to be mentioned in the official list of
Odoo Partners on odoo.com, and that PARTNER's logo and trademarks may be
used for this purpose only.

### 8.2 No Soliciting or Hiring

Except where the other Party gives its consent in writing, each Party,
its affiliates and representatives agree not to solicit or offer
employment to any employee of the other Party who is involved in
performing or using the Services under this Agreement, for the duration
of the Agreement and for a period of 12 months from the date of
termination or expiration of this Agreement. In case of any breach of
the conditions of this section that leads to the termination of said
employee toward that end, the breaching Party agrees to pay the other
Party an amount of EUR (€) 30 000.00 (thirty thousand euros).

### 8.3 Independent Contractors

The Parties are independent contractors, and this Agreement shall not be
construed as constituting either Party as a partner, joint venture or
fiduciary of the other, as creating any other form of a legal
association that would impose liability on one Party for the act or
failure to act of the other or as providing either Party with the right,
power or authority (express or implied) to create any duty or obligation
of the other.

## 9 Governing Law and Jurisdiction

This Agreement will be governed by and construed in accordance with the
laws of Belgium. All disputes arising in connection with the Agreement
for which no amicable settlement can be found shall be finally settled
by the Courts of Belgium in Nivelles.

<div class="only">

html

**Signatures**

|           |             |
| --------- | ----------- |
| For ODOO, | For PARTNER |

</div>

<div class="only">

latex

<div class="topic">

**Signatures**

For ODOO, For PARTNER,

</div>

</div>

## 10 Appendix A: Odoo Enterprise Edition License

<div class="only">

latex

</div>

<div class="only">

html

See `odoo_enterprise_license`.

</div>

1.  up to a maximum of 150€ (or $180) of monthly commission per
    subscription, or 1440€ (or $1728) of yearly commission per
    subscription

2.  “Working with an Odoo Partner” and “Covered Extra Modules” are
    defined in the Odoo Enterprise Subscription Agreement between ODOO
    and customers.


---
## File: ./content/legal/terms/i18n/enterprise_tex_pt_BR.md

  - nosearch

  - orphan

<div class="toctree" data-maxdepth="4" hidden="">

enterprise\_pt\_BR

</div>


---
## File: ./content/legal/terms/i18n/terms_of_sale_tex_fr.md

  - nosearch

  - orphan

<div class="toctree" data-maxdepth="4" hidden="">

terms\_of\_sale\_fr

</div>


---
## File: ./content/legal/terms/i18n/enterprise_pt_BR.md

# Odoo Enterprise Subscription Agreement (PT)

<div class="only">

html

[Download
PDF](https://www.odoo.com/documentation/%7BCURRENT_BRANCH%7D/odoo_enterprise_agreement_pt_BR.pdf)

</div>

<div class="warning">

<div class="title">

Warning

</div>

Esta é uma tradução em português do Contrato “Odoo Enterprise
Subscription Agreement”. A tradução é fornecida com o intuito de
facilitar a sua compreensão, mas não tem valor legal. A única referência
oficial aos termos do Contrato “Odoo Enterprise Subscription Agreement”
é a `versão original em inglês <enterprise_agreement>`.

</div>

<div class="note">

<div class="title">

Note

</div>

Versão 10a - 2022-10-27

</div>

Ao assinar os serviços do Odoo Enterprise (os "Serviços") fornecidos
pela Odoo SA e suas afiliadas (coletivamente, "Odoo SA") em relação ao
Odoo Enterprise Edition ou Odoo Community Edition (o "Logiciel"),
hospedado nas plataformas de nuvem da Odoo SA ("Cloud Platform") ou no
local ("Hospedagem Própria"), você (o "Cliente") concorda em estar
vinculado aos seguintes termos e condições (o "Contrato").

## 1 Vigência do Contrato

A duração deste Contrato (a "Vigência") será especificada por escrito no
ato da celebração deste Contrato, começando a partir da data de
assinatura. O Contrato é automaticamente renovado por uma Vigência
igual, a menos que qualquer uma das partes forneça um aviso por escrito
de rescisão para a outra parte, no mínimo 30 dias antes do final da
Vigência.

## 2 Definições

  - Usuário  
    Qualquer conta de usuário indicada como ativa no Software, com
    acesso ao modo de criação e/ou edição. Contas de usuário desativadas
    e contas usadas por pessoas externas (ou sistemas) que têm apenas
    acesso limitado ao Software por meio das instalações do portal
    (conhecidas como "Usuários do Portal") não são consideradas como
    Usuários.

  - App  
    Um "Aplicativo" (App) é um grupo especializado de recursos
    disponíveis para instalação no Software.

  - Parceiro Odoo  
    Um Parceiro Odoo é uma empresa ou indivíduo terceirizado, escolhido
    pelo Cliente e que trabalha com o Cliente para seus serviços
    relacionados ao Odoo. O Cliente pode decidir a qualquer momento
    trabalhar com um Parceiro Odoo diferente ou trabalhar diretamente
    com a Odoo SA (sujeito a aviso prévio).

  - Módulo Extra  
    Um Módulo Extra é um diretório de arquivos de código-fonte ou um
    conjunto de customizações baseadas em Python, criadas em uma base de
    dados (por exemplo, com o Odoo Studio), que adiciona recursos ou
    altera o comportamento padrão do Software. Pode ter sido
    desenvolvido pelo Cliente, pela Odoo SA, por um Parceiro Odoo em
    nome do Cliente ou por terceiros.

  - Módulo Extra Coberto  
    Um Módulo Extra Coberto é um Módulo Extra pelo qual o Cliente
    escolhe pagar uma taxa de manutenção para obter serviços de suporte,
    atualização e correção de bugs.

  - Bug  
    É considerado Bug qualquer falha do Software ou de um Módulo Extra
    Coberto que resulte em uma parada completa, rastreamento de erro ou
    violação de segurança e não seja causada diretamente por uma
    instalação ou configuração defeituosa. A não conformidade com
    especificações ou requisitos será considerada como Bug, a critério
    da Odoo SA (normalmente, quando o Software não produz os resultados
    ou desempenho para o qual foi projetado ou quando um recurso
    específico do país não atende mais aos requisitos legais de
    contabilidade).

  - Versões Cobertas  
    A menos que seja especificado, os Serviços fornecidos sob este
    Contrato são aplicáveis apenas às Versões Cobertas do Software, que
    incluem as 3 versões principais lançadas mais recentemente.

  - Plano de Assinatura  
    Um Plano de Assinatura define um conjunto de Aplicativos, recursos e
    soluções de hospedagem cobertos por este Contrato e é definido por
    escrito na celebração deste Contrato.

## 3 Acesso ao Software

O Cliente pode utilizar o Software hospedado na Cloud Platform, ou
escolher a opção de Hospedagem Própria. A Cloud Platform é hospedada e
totalmente gerenciada pela Odoo SA e acessada remotamente pelo Cliente.
Com a opção de Hospedagem Própria, o Cliente hospeda o Software em
sistemas de computador de sua escolha, que não estão sob o controle da
Odoo SA.

Durante a vigência deste Contrato, a Odoo SA concede ao Cliente uma
licença não exclusiva e intransferível para usar (executar, modificar,
executar após modificação) o software Odoo Enterprise Edition, nos
termos estabelecidos em `appendix_a_pt`.

O Cliente concorda em tomar todas as medidas necessárias para garantir a
execução inalterada da parte do Software que verifica a validade de uso
do Odoo Enterprise Edition e coleta estatísticas para esse fim,
incluindo, entre outros, a execução de uma instância, o número de
Usuários, os Aplicativos instalados e o número de linhas de código dos
Módulos Extras Cobertos.

A Odoo SA compromete-se a não divulgar figuras individuais ou nomeadas a
terceiros sem o consentimento do Cliente, e a tratar todos os dados
recolhidos em conformidade com a sua Política de Privacidade oficial,
publicada em <https://www.odoo.com/privacy>.

Após a expiração ou rescisão deste Contrato, esta licença é revogada
imediatamente e o Cliente concorda em parar de usar o software Odoo
Enterprise Edition e a Cloud Platform.

Se o Cliente violar os termos desta seção, o Cliente concorda em pagar à
Odoo SA uma taxa extra igual a 300% do preço de tabela aplicável ao
número real de Usuários.

## 4 Serviços

### 4.1 Serviço de Correção de Bugs

Durante a vigência deste Contrato, a Odoo SA se compromete a realizar
todos os esforços razoáveis para corrigir qualquer Bug do Software e
Módulos Extras Cobertos relatados pelo Cliente por meio de um canal
apropriado (normalmente, o formulário da Web ou os números de telefone
listados em <http://www.odoo.com/help>, ou, ao trabalhar com um parceiro
Odoo, o canal fornecido pelo parceiro) e começar a lidar com essas
solicitações do Cliente em 2 dias úteis.

Assim que o Bug for corrigido, uma solução apropriada será comunicada ao
Cliente. Se o Cliente estiver usando uma Versão Coberta, ele não será
solicitado a atualizar para uma Versão Coberta mais recente do Software
como solução para um Bug.

Quando um Bug é corrigido em qualquer Versão Coberta, a Odoo SA se
compromete a corrigir o Bug em todas as Versões Cobertas mais recentes
do Software.

Ambas as partes reconhecem que, conforme especificado na licença do
Software e na seção `liability_pt` deste Contrato, a Odoo SA não pode
ser responsabilizada por Bugs no Software ou nos Módulos Extras
Cobertos.

### 4.2 Serviço de Atualizações de Segurança

#### Hospedagem Própria

Durante a vigência deste Contrato, a Odoo SA se compromete a enviar um
“Aviso de Segurança” ao Cliente para qualquer Bug de segurança
descoberto nas Versões Cobertas do Software (isso exclui Módulos
Extras), pelo menos 2 semanas antes de publicar o Comunicado de
Segurança, a menos que o Bug já tenha sido divulgado publicamente por
terceiros. Os Comunicados de Segurança incluem uma descrição completa do
Bug, sua causa, seus possíveis impactos nos sistemas do Cliente e a
solução correspondente para cada Versão Coberta.

O Cliente entende que o Bug e as informações do Comunicado de Segurança
devem ser tratados como Informações Confidenciais conforme descrito em
`confidentiality_pt` durante o período de embargo que precede a
divulgação pública.

#### Cloud Platform

A Odoo SA se compromete a aplicar os reparos de segurança para qualquer
Bug de segurança descoberto em uma versão do Software hospedada na Cloud
Platform, em todos os sistemas sob seu controle, assim que o reparo
estiver disponível, sem exigir nenhuma ação manual do Cliente.

### 4.3 Serviços de Atualização

#### Serviço de Atualização para o Software

Durante a vigência deste Contrato, o Cliente pode enviar solicitações de
atualização por meio do canal apropriado (geralmente, o site do serviço
de atualização da Odoo SA), a fim de converter uma base de dados do
Software de qualquer versão do Software para uma Versão Coberta mais
recente (a "Versão de Destino").

Para a Cloud Platform, as solicitações de atualização são enviadas
diretamente do painel de controle da Cloud Platform e não requerem
nenhum upload de dados. Para Hospedagem Própria, as solicitações de
atualização devem incluir uma cópia da base de dados do Cliente e os
dados associados (normalmente obtidos no menu Backup do Software).

Este serviço é fornecido por meio de uma plataforma automatizada para
permitir que o Cliente execute atualizações autônomas, uma vez que uma
versão anterior da base de dados do Cliente tenha sido atualizada com
sucesso para uma Versão Coberta.

O Serviço de Atualização é limitado à conversão técnica e adaptação da
base de dados do Cliente para torná-lo compatível com a Versão de
Destino, a correção de qualquer Bug causado diretamente pela operação de
atualização e que não ocorre normalmente na Versão de Destino, e a
conversão do código-fonte e dados dos Módulos Extras Cobertos para a
Versão de Destino.

É responsabilidade do Cliente verificar e validar a base de dados
atualizada para detectar Bugs, analisar o impacto de alterações e novos
recursos implementados na Versão de Destino e converter e adaptar para a
Versão de Destino quaisquer extensões de terceiros do Software que
tenham sido instaladas na base de dados antes da atualização (por
exemplo, Módulos Extras não cobertos). O Cliente pode fazer várias
solicitações de atualização para uma base de dados, até que um resultado
aceitável seja alcançado.

### 4.4 Serviços de Hospedagem na Nuvem

Durante a vigência deste Contrato, quando o Cliente optar por usar a
Cloud Platform, a Odoo SA se compromete a fornecer pelo menos os
seguintes serviços:

  - Opções de várias regiões de hospedagem (mínimo 3: Europa, América,
    Ásia/Pacífico)
  - Hospedagem em data centers Tier III ou equivalente, com 99,9% de
    tempo de atividade da rede
  - Criptografia SSL (HTTPS) de comunicação classe A
  - Backups totalmente automatizados e verificados, replicados em várias
    regiões
  - Plano de recuperação de desastres, testado regularmente

Os detalhes dos Serviços de Hospedagem na Nuvem são descritos na página
do Acordo de Nível de Serviço (SLA) em <https://www.odoo.com/cloud-sla>.

### 4.5 Serviços de Suporte

#### Escopo

Durante a vigência deste Contrato, o Cliente pode abrir um número
ilimitado de chamados de suporte gratuitamente, exclusivamente para
questões relacionadas a Bugs (consulte `bugfix_pt`) ou orientação com
relação ao uso dos recursos padrão do Software e Módulos Extras
Cobertos.

Outras solicitações de assistência, como questões relacionadas a
desenvolvimento ou customizações, podem ser cobertas por meio da compra
de um contrato de serviço separado. Caso não esteja claro se uma
solicitação é coberta por este Contrato, a decisão fica a critério da
Odoo SA.

#### Disponibilidade

Os chamados podem ser feitos por meio do formulário da web ou dos
números de telefone listados em <https://www.odoo.com/help>, ou, ao
trabalhar com um Parceiro Odoo, o canal fornecido pelo parceiro, sujeito
ao horário de funcionamento local.

### 4.6 Trabalhando com um Parceiro Odoo

Para correções de bugs, suporte e serviços de atualização, o cliente
pode trabalhar com um parceiro Odoo como principal ponto de contato ou
trabalhar diretamente com a Odoo SA.

Se o Cliente decidir trabalhar com um Parceiro Odoo, a Odoo SA
subcontratará os serviços relacionados com os Módulos Extras Cobertos ao
Parceiro Odoo, que se torna o principal ponto de contacto do Cliente. O
Parceiro Odoo pode entrar em contato com a Odoo SA em nome do Cliente
para obter assistência de segundo nível com relação aos recursos padrão
do Software.

Se o Cliente decidir trabalhar diretamente com a Odoo SA, os serviços
relacionados aos Módulos Extras Cobertos serão fornecidos somente se o
Cliente estiver hospedado na Odoo Cloud Platform.

## 5 Preços e Taxas

### 5.1 Preços Padrões

Os preços padrões para a assinatura do Odoo Enterprise e os Serviços são
baseados no número de Usuários e no Plano de Assinatura usado pelo
Cliente e especificados por escrito na celebração do Contrato.

Se durante a Vigência, o Cliente tiver mais Usuários ou usar recursos
que exijam outro Plano de Assinatura do que o especificado no momento da
celebração deste Contrato, o Cliente concorda em pagar uma taxa extra
equivalente ao preço de tabela aplicável (no momento do desvio do número
especificado de Usuários ou Plano de Assinatura) para os Usuários
adicionais ou o Plano de Assinatura necessário, pelo restante da
Vigência.

Além disso, os serviços dos Módulos Extras Cobertos são cobrados com
base no número de linhas de código nesses módulos. Quando o Cliente
optar pela manutenção dos Módulos Extras Cobertos, a cobrança será
mensal por 100 linhas de código (arredondadas para a próxima centena),
conforme especificado por escrito na celebração do Contrato. As linhas
de código serão contabilizadas com o comando `cloc` do Software, e
incluirão todas as linhas de texto no código fonte desses módulos,
independente da linguagem de programação (Python, Javascript, XML etc.),
excluindo linhas em branco, linhas de comentário e arquivos que não são
carregados durante a instalação ou execução do Software.

Quando o Cliente solicitar uma atualização, para cada Módulo Extra
Coberto que não tenha sido coberto por uma taxa de manutenção nos
últimos 12 meses, a Odoo SA poderá cobrar uma taxa extra única para
cada mês de cobertura faltante.

### 5.2 Custos de Renovação

Após a renovação, conforme previsto na seção `term_pt`, se os preços
aplicados durante a Vigência anterior forem inferiores ao preço de
tabela aplicável mais atual, tais preços aumentarão em até 7%.

### 5.3 Impostos

Todas as taxas e preços não incluem quaisquer impostos, taxas ou
encargos federais, provinciais, estaduais, locais ou outros aplicáveis
(coletivamente, “Impostos”). O Cliente é responsável pelo pagamento de
todos os Impostos associados às compras feitas pelo Cliente nos termos
deste Contrato, exceto quando a Odoo SA for legalmente obrigada a pagar
ou cobrar impostos pelos quais o Cliente é responsável.

## 6 Condições dos Serviços

### 6.1 Obrigações do Cliente

O Cliente concorda em:

  - pagar à Odoo SA quaisquer valores aplicáveis pelos Serviços do
    presente Contrato, de acordo com as condições de pagamento
    especificadas na assinatura deste contrato;
  - notificar imediatamente a Odoo SA quando seu número real de Usuários
    exceder o número especificado no ato da celebração do Contrato e,
    nesse caso, pagar a taxa adicional aplicável, conforme descrito na
    seção `charges_standard_pt`;
  - tomar todas as medidas necessárias para garantir a execução
    inalterada da parte do Software que verifica a validade do uso do
    Odoo Enterprise Edition, conforme descrito em
    `enterprise_access_pt`;
  - nomear 1 pessoa de contato dedicada ao Cliente durante toda a
    vigência do Contrato;
  - fornecer notificação por escrito à Odoo SA 30 dias antes de mudar
    seu ponto de contato principal para trabalhar com outro Parceiro
    Odoo ou para trabalhar diretamente com a Odoo SA.

Quando o Cliente opta por usar a Cloud Platform, o Cliente concorda
ainda em:

  - tomar todas as medidas razoáveis para manter suas contas de usuário
    seguras, inclusive escolhendo uma senha forte e não compartilhando
    com ninguém;
  - fazer uso razoável dos Serviços de Hospedagem, renunciando quaisquer
    atividades ilegais ou abusivas, e observar estritamente as regras
    descritas na Política de Uso Aceitável publicada em
    <https://www.odoo.com/acceptable-use>.

Quando o cliente escolhe a opção de Hospedagem Própria, o cliente
concorda ainda em:

  - tomar todas as medidas razoáveis para proteger os arquivos e bases
    de dados do Cliente e garantir que os dados do Cliente estejam
    seguros e protegidos, reconhecendo que a Odoo SA não pode ser
    responsabilizada por qualquer perda de dados;
  - conceder à Odoo SA o acesso necessário para verificar a validade do
    uso do Odoo Enterprise Edition mediante solicitação (por exemplo, se
    a validação automática for considerada inoperante para o Cliente).

### 6.2 Sem Aliciamento ou Contratações

Exceto quando a outra parte der seu consentimento por escrito, cada
parte, suas afiliadas e representantes concordam em não solicitar ou
oferecer emprego a qualquer funcionário da outra parte que esteja
envolvido na execução ou uso dos Serviços sob este Contrato, durante a
vigência do Contrato e por um período de 12 meses a partir da data de
rescisão ou vencimento deste Contrato. Em caso de descumprimento das
condições desta seção que leve à demissão do referido funcionário para o
efeito, a parte infratora obriga-se a pagar à outra parte um montante de
30 000,00 euros (€) (trinta mil euros).

### 6.3 Publicidade

Exceto quando vetado através de notificação por escrito, cada parte
concede à outra uma licença mundial intransferível, não exclusiva e
isenta de royalties para reproduzir e exibir o nome, logotipos e marcas
registradas da outra parte, exclusivamente para fins de referência à
outra parte como um cliente ou fornecedor, em sites, press releases e
outros materiais de marketing.

### 6.4 Confidencialidade

  - Definição de “Informações Confidenciais”:  
    Todas as informações divulgadas por uma parte (a “Parte
    Divulgadora”) à outra parte (a “Parte Receptora”), oralmente ou
    por escrito, que seja designada como confidencial ou que
    razoavelmente deva ser entendida como confidencial, dada a natureza
    do informações e as circunstâncias da divulgação. Em particular,
    qualquer informação relacionada a negócios, assuntos, produtos,
    desenvolvimentos, segredos comerciais, know-how, pessoal, clientes e
    fornecedores de qualquer uma das partes deve ser considerada
    confidencial.

Para todas as Informações Confidenciais recebidas durante a Vigência
deste Contrato, a Parte Receptora usará o mesmo grau de cuidado que usa
para proteger a confidencialidade de suas próprias Informações
Confidenciais semelhantes, mas não menos do que o cuidado razoável.

A Parte Receptora pode divulgar Informações Confidenciais da Parte
Divulgadora na medida em que for obrigada por lei a fazê-lo, desde que a
Parte Receptora notifique a Parte Divulgadora com antecedência sobre a
divulgação obrigatória, na medida permitida por lei.

### 6.5 Proteção de Dados

  - Definições  
    "Dados Pessoais", "Controlador", "Processamento" têm os mesmos
    significados que no Regulamento (UE) 2016/679 e na Diretiva
    2002/58/EC, e qualquer regulamento ou legislação que os altere ou
    substitua (doravante referido como "Legislação de Proteção de
    Dados")

#### Processamento de Dados Pessoais

As partes reconhecem que a base de dados do Cliente pode conter Dados
Pessoais, dos quais o Cliente é o Controlador. Estes dados serão
processados pela Odoo SA quando o Cliente assim o instruir, mediante a
utilização de algum dos Serviços que necessitem de uma base de dados
(e.g. os Serviços de Hospedagem na Nuvem ou o Serviço de Atualização da
Base de Dados), ou se o Cliente transferir a sua base de dados ou parte
da sua base de dados à Odoo SA por qualquer motivo relacionado a este
Contrato.

Este processamento será realizado em conformidade com a Legislação de
Proteção de Dados. Em particular, a Odoo SA compromete-se a:

  - (a) apenas processar os Dados Pessoais quando e conforme instruído
    pelo Cliente, e com a finalidade de executar um dos Serviços sob
    este Contrato, a menos que haja exigência por lei, caso em que a
    Odoo SA notificará o Cliente com antecedência, a não ser que a lei a
    proíba;
  - (b) garantir que todas as pessoas dentro da Odoo SA autorizadas a
    processar os Dados Pessoais se comprometam com a confidencialidade;
  - (c) implementar e manter medidas técnicas e organizacionais
    apropriadas para proteger os Dados Pessoais contra processamento não
    autorizado ou ilegal e contra perda, destruição, dano, roubo,
    alteração ou divulgação acidental;
  - (d) encaminhar prontamente ao Cliente qualquer solicitação de
    Proteção de Dados que tenha sido enviada à Odoo SA em relação à
    base de dados do Cliente;
  - (e) notificar o Cliente imediatamente ao tomar conhecimento e
    confirmar qualquer processamento acidental, não autorizado ou
    ilegal, divulgação ou acesso aos Dados Pessoais;
  - (f) notificar o Cliente se as instruções de processamento
    infringirem a Legislação de Proteção de Dados aplicável, na opinião
    da Odoo SA;
  - (g) disponibilizar ao Cliente todas as informações necessárias para
    demonstrar conformidade com a Legislação de Proteção de Dados,
    permitir e contribuir razoavelmente para auditorias, incluindo
    inspeções, conduzidas ou ordenadas pelo Cliente;
  - (h) excluir permanentemente todas as cópias da base de dados do
    Cliente em posse da Odoo SA, ou devolver tais dados, à escolha do
    Cliente, após a rescisão deste Contrato, sujeito aos atrasos
    especificados na [Política de
    Privacidade](https://www.odoo.com/privacy) da Odoo SA;

No que diz respeito às alíneas (d) a (f), o Cliente concorda em fornecer
à Odoo SA informações de contato precisas em todos os momentos, conforme
necessário para notificar o responsável pela Proteção de Dados do
Cliente.

#### Subprocessadores

O Cliente reconhece e concorda que, para fornecer os Serviços, a Odoo SA
pode usar provedores de serviços terceirizados (Subprocessadores) para
tratar Dados Pessoais. A Odoo SA compromete-se a usar apenas
Subprocessadores em conformidade com a Legislação de Proteção de Dados.
Esta utilização estará abrangida por um contrato entre a Odoo SA e o
Subprocessador que dá garantias nesse sentido. A Política de Privacidade
da Odoo SA, publicada em <https://www.odoo.com/privacy>, fornece
informações atualizadas sobre os nomes e propósitos dos
Subprocessadores atualmente em uso pela Odoo SA para a execução dos
Serviços.

### 6.6 Cessão

Caso qualquer uma das partes não cumpra qualquer uma de suas obrigações
decorrentes deste Contrato, e se tal violação não for sanada dentro de
30 dias corridos a partir da notificação por escrito de tal violação,
este Contrato poderá ser rescindido imediatamente pela parte não
infratora.

Além disso, a Odoo SA pode rescindir o Contrato imediatamente caso o
Cliente não pague as taxas aplicáveis pelos Serviços dentro de 21 dias
após a data de vencimento especificada na fatura correspondente e após
no mínimo 3 lembretes.

  - Cláusulas Subsistentes:  
    As seções "`confidentiality_pt`", “`disclaimers_pt`",
    “`liability_pt`", e “`general_provisions_pt`" subsistirão a
    qualquer rescisão ou expiração deste Contrato.

## 7 Garantias, Isenções de Responsabilidade, Limitação de Responsabilidade

### 7.1 Garantias

A Odoo SA detém os direitos autorais ou equivalente\[1\] de 100% do
código do Software e confirma que todas as bibliotecas de software
necessárias para usar o Software estão disponíveis sob uma licença
compatível com a licença do Software.

Durante a vigência deste Contrato, a Odoo SA se compromete a realizar
esforços comercialmente razoáveis para executar os Serviços de acordo
com os padrões de indústria geralmente aceitos, desde que:

  - os sistemas computacionais do Cliente estejam em bom estado de
    funcionamento e, para o caso de Hospedagem Própria, o Software
    esteja instalado num ambiente operacional adequado;
  - o Cliente forneça informações adequadas de solução de problemas e,
    para o caso de Hospedagem Própria, qualquer acesso que a Odoo SA
    possa precisar para identificar, reproduzir e resolver problemas;
  - todos os valores devidos à Odoo SA sejam pagos.

O único e exclusivo recurso do Cliente e a única obrigação da Odoo SA
por qualquer violação desta garantia é que a Odoo SA retome a execução
dos Serviços sem custo adicional.

### 7.2 Isenções de Responsabilidade

Exceto conforme expressamente disposto neste documento, nenhuma das
partes oferece qualquer garantia de qualquer tipo, seja expressa,
implícita, estatutária ou de outra maneira, e cada parte se isenta
especificamente de todas as garantias implícitas, incluindo qualquer
garantia implícita de comercialização, adequação a uma finalidade
específica ou não violação, na extensão máxima permitida pela lei
aplicável.

A Odoo SA não garante que o Software esteja em conformidade com qualquer
lei ou regulamentação local ou internacional.

### 7.3 Limitação de Responsabilidade

Na extensão máxima permitida por lei, a responsabilidade agregada de
cada parte juntamente com suas afiliadas, decorrente ou relacionada a
este Contrato, não excederá 50% do valor total pago pelo Cliente sob
este Contrato durante os 12 meses imediatamente anteriores à data do
evento que deu origem a tal ação judicial. Reivindicações múltiplas não
devem ampliar esta limitação.

Em nenhum caso, qualquer uma das partes ou suas afiliadas serão
responsáveis por quaisquer danos indiretos, especiais, exemplares,
incidentais ou consequentes de qualquer tipo, incluindo, mas não
limitado a, perda de receita, lucros, economias, perda de negócios ou
outras perdas financeiras, custos de paralisação ou atraso, dados
perdidos ou corrompidos, decorrentes ou relacionados a este Contrato,
independentemente da forma de ação, seja por contrato, ato ilícito ou
não, mesmo que uma parte ou suas afiliadas tenham sido avisadas da
possibilidade de tais danos, ou se o reparo de uma parte ou de suas
afiliadas falhar em seu propósito essencial.

### 7.4 Força Maior

Nenhuma das partes será responsável perante a outra parte pelo atraso em
qualquer cumprimento ou falha em cumprir qualquer ação sob este Contrato
quando tal falha ou atraso encontrar sua causa em um caso de *força
maior*, como regulamentações governamentais, incêndio, greve, guerra,
inundação, acidente, epidemia, embargo, apropriação total ou parcial de
fábrica ou produto por qualquer governo ou autoridade pública, ou
qualquer outra causa ou causas, de natureza semelhante ou diferente,
fora do controle razoável de tal parte, desde que tal causa ou causas
existam.

## 8 Disposições Gerais

### 8.1 Jurisdição

Este Contrato e todas as ordens do Cliente estarão sujeitos à lei belga.
Qualquer disputa decorrente ou relacionada a este Contrato ou a qualquer
ordem do Cliente estará sujeita à jurisdição exclusiva do Tribunal
Comercial de Nivelles.

### 8.2 Independência das Disposições Contratuais

No caso de qualquer uma ou mais das disposições deste Contrato ou
qualquer aplicação do mesmo ser inválida, ilegal ou inexequível em
qualquer aspecto, a validade, legalidade e aplicabilidade das demais
disposições deste Contrato e qualquer aplicação do mesmo não serão de
forma alguma afetadas ou prejudicadas. Ambas as partes se comprometem a
substituir qualquer disposição inválida, ilegal ou inexequível deste
Contrato por uma disposição válida com os mesmos efeitos e objetivos.

## 9 Anexo A: Licença do Odoo Enterprise Edition

A versão Enterprise do Odoo tem a licença Odoo Enterprise Edition v1.0,
que é definida da seguinte forma:

<div class="warning">

<div class="title">

Warning

</div>

Esta é uma tradução em português da "Licença Odoo Enterprise Edition
v1.0". A tradução é fornecida com o intuito de facilitar a sua
compreensão, mas não tem valor legal. A única referência oficial aos
termos da "Licença Odoo Enterprise Edition" é a `versão original em
inglês <odoo_enterprise_license>`

</div>

<tt>

Licença Odoo Enterprise Edition v1.0

Este software e arquivos associados (o "Software") só podem ser usados
(executados, modificados, executados após modificações) com uma
Assinatura do Odoo Enterprise válida para o número correto de usuários.

Com um Acordo de Parceria válido com a Odoo S.A., as permissões acima
também são concedidas, desde que o uso seja limitado a um ambiente de
testes ou desenvolvimento.

Você pode desenvolver módulos Odoo com base no Software e distribuí-los
sob a licença de sua escolha, desde que seja compatível com os termos da
Licença Odoo Enterprise Edition (por exemplo: LGPL, MIT ou licenças
proprietárias similares a esta).

Você pode usar módulos Odoo publicados sob qualquer licença junto com o
Software, desde que a licença deles seja compatível com os termos da
Licença Odoo Enterprise (incluindo, mas não se limitando a, qualquer
módulo publicado na Odoo Apps Store em odoo.com/apps).

É proibido publicar, distribuir, sublicenciar ou vender cópias do
Software ou cópias modificadas do Software.

O aviso de direitos autorais acima e este aviso de permissão devem ser
incluídos em todas as cópias ou partes substanciais do Software.

O SOFTWARE É FORNECIDO "COMO ESTÁ", SEM GARANTIA DE QUALQUER TIPO,
EXPRESSA OU IMPLÍCITA, INCLUINDO, MAS NÃO SE LIMITANDO A, GARANTIAS DE
COMERCIALIZAÇÃO, ADEQUAÇÃO A UM PROPÓSITO ESPECÍFICO E NÃO VIOLAÇÃO. EM
NENHUMA CIRCUNSTÂNCIA, OS AUTORES OU TITULARES DE DIREITOS AUTORAIS
SERÃO RESPONSÁVEIS POR QUALQUER REIVINDICAÇÃO, DANOS OU OUTRA
RESPONSABILIDADE, SEJA EM AÇÃO DE CONTRATO, DELITO OU DE OUTRA FORMA,
DECORRENTE DE, OU EM CONEXÃO COM O SOFTWARE OU O USO OU OUTRAS
TRANSAÇÕES NO SOFTWARE.

</tt>

1.  As contribuições externas são cobertas por um [Contrato de Licença
    de Direitos Autorais](https://www.odoo.com/cla) fornece uma licença
    permanente, gratuita e irrevogável de direitos autorais e patente
    para a Odoo SA.


---
## File: ./content/legal/terms/i18n/terms_of_sale_tex_es.md

  - nosearch

  - orphan

<div class="toctree" data-maxdepth="4" hidden="">

terms\_of\_sale\_es

</div>


---
## File: ./content/legal/terms/i18n/partnership_tex_fr.md

  - nosearch

  - orphan

<div class="toctree" data-maxdepth="4" hidden="">

partnership\_fr

</div>


---
## File: ./content/legal/terms/i18n/partnership_fr.md

# Odoo Partnership Agreement (FR)

<div class="only">

html

[Download
PDF](https://www.odoo.com/documentation/%7BCURRENT_BRANCH%7D/odoo_partnership_agreement_fr.pdf)

</div>

<div class="warning">

<div class="title">

Warning

</div>

Ceci est une traduction en français du contrat “Odoo Partnership
Agreement”. Cette traduction est fournie dans l’espoir qu’elle
facilitera sa compréhension, mais elle n'a aucune valeur légale. La
seule référence officielle des termes du contrat “Odoo Partnership
Agreement” est la `version originale en anglais
<partnership_agreement>`.

</div>

<div class="note">

<div class="title">

Note

</div>

Version 11 - 2023-05-19

</div>

ENTRE:  
 Odoo S.A., une entreprise dont le siège social se situe Chaussée de
Namur, 40,  
 1367 Grand-Rosière, Belgique, et ses filialies (désignées
collectivement « ODOO »)  
ET:  
 \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_,
une entreprise dont le siège social se situe à  
 \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_.  
 (ci-après dénommée « PARTENAIRE »)

ODOO et PARTENAIRE sont désignées individuellement par le terme
« Partie » et collectivement par le terme « les Parties ».

## 1 Objectif

L’objectif de ce Contrat est de présenter les conditions auxquelles ODOO
fournit des services au PARTENAIRE et l’accès au logiciel Odoo
Enterprise Edition, et en vertu desquelles le PARTENAIRE se plie aux
obligations énoncées ci-après.

Par le présent accord, ODOO désigne le PARTENAIRE, désignation acceptée
par le PARTENAIRE, comme partenaire non exclusif pour promouvoir et
vendre « Odoo Enterprise Edition » à des clients.

Le PARTENAIRE s’engage à faire tous les efforts possibles pour vendre
des contrats Odoo Enterprise à ses clients. Pour étayer ces efforts, le
PARTENAIRE commercialisera en priorité la version « Odoo Enterprise
Edition » aux prospects et clients. Si nécessaire, le PARTENAIRE peut
vendre des services sur d’autres versions du logiciel, comme « Odoo
Community Edition ».

## 2 Durée du Contrat

Ce Contrat restera en vigueur pendant un an (la « Durée ») à compter de
la date de la signature. Il est automatiquement renouvelé pour une Durée
équivalente, à moins qu’une partie transmette à l’autre partie une
dénonciation écrite au moins 30 jours avant la fin de la Durée.

## 3 Accès à Odoo Enterprise Edition

### 3.1 Accès à la plate-forme projet

Pour aider le PARTENAIRE à promouvoir Odoo Enterprise Edition, ODOO
octroie au PARTENAIRE l’accès à son dépôt de code pour toutes les «
Apps Odoo Enterprise Edition » sous les conditions présentées dans
`appendix_p_a_fr` et les conditions reprises dans ce Contrat.

ODOO accorde aussi au PARTENAIRE un accès gratuit à la plate-forme
ODOO.SH, exclusivement dans un but de test et de développement.

### 3.2 Restrictions

Le PARTENAIRE s’engage à maintenir la confidentialité du code source des
Apps Odoo Enterprise Edition au sein de son personnel. L’accès au code
source d’Odoo Enterprise Edition pour les clients est régi par l'Odoo
Enterprise Subscription Agreement. Le PARTENAIRE s'engage à ne PAS
redistribuer ce code à un tiers sans l’autorisation écrite d’ODOO.

Le PARTENAIRE s'engage à n'offrir des services relatifs à Odoo
Enterprise Edition qu'aux clients qui disposent d'un contrat Odoo
Enterprise valide, et ce même pendant la phase d'implémentation.

Nonobstant ce qui précède, le PARTENAIRE s’engage à préserver totalement
l’intégrité du code d’Odoo Enterprise Edition requis pour vérifier la
validité de l’utilisation d’Odoo Enterprise Edition et recueillir les
données statistiques nécessaires à cette fin.

Le PARTENAIRE n'est pas autorisé à bloquer, restreindre ou limiter
d'aucune manière l'accès et l'usage de la licence Odoo Enterprise
Edition pour les clients, sauf en cas de consultation préalable et
accord écrit d'ODOO.

## 4 Services du partenariat

### 4.1 Niveaux de partenariat

Le programme partenaire d’Odoo consiste en deux types de partenariat et
quatre niveaux. Le type “Learning Partners” est prévu les sociétés
souhaitent démarrer la mise en oeuvre d'Odoo, mais sans la visibilité
d'un partenaire officiel, en attendant d'acquérir l'expérience requise;
tandis qu' "Official Partners" est prévu pour les sociétés qui veulent
la visibilité en tant que partenaire Ready, Silver ou Gold, suivant leur
niveau d'expérience.

Le niveau de partenariat accordé au PARTENAIRE dépend du *nombre net de
nouveaux utilisateurs Odoo Enterprise vendus* au cours des 12 derniers
mois, du nombre de ressources internes certifiées, et du Taux de
Rétention de clients. Le *nombre net de nouveaux utilisateurs Odoo
Enterprise vendus* comprend les nouveaux clients, les ventes
supplémentaires aux clients existants, les ventes réduites aux clients
existants ainsi que la perte de clients.

Les renouvellements des contrats existants ne sont pas pris en compte
dans le nombre d'utilisateurs vendus, mais le PARTENAIRE reçoit toujours
une commission sur ces contrats, comme indiqué à la section
`benefits_fr`.

Le tableau ci-dessous résume les exigences pour chaque niveau de
partenariat.

Le *Taux de Rétention* de clients est calculé en divisant le nombre
total de clients Odoo Enterprise acquis par le PARTENAIRE au cours des 3
dernières années et actuellement actifs par le nombre total de clients
Odoo Enterprise acquis par le PARTENAIRE au cours des 3 dernières
années.

<table style="width:100%;">
<colgroup>
<col style="width: 36%" />
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 16%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Learning Partner</th>
<th>Official: Ready</th>
<th>Official: Silver</th>
<th>Official: Gold</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Nouveaux utilisateurs net Odoo Enterprise vendus annuellement</td>
<td><blockquote>
<p>0</p>
</blockquote></td>
<td><blockquote>
<p>10</p>
</blockquote></td>
<td>75</td>
<td>300</td>
</tr>
<tr class="even">
<td>Nombre d'employés certifiés sur au moins une des 3 dernières version d'Odoo</td>
<td><blockquote>
<p>0</p>
</blockquote></td>
<td><blockquote>
<p>1</p>
</blockquote></td>
<td><blockquote>
<p>3</p>
</blockquote></td>
<td><blockquote>
<p>6</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>Taux de Rétention minimum</td>
<td><blockquote>
<p>n/a</p>
</blockquote></td>
<td><blockquote>
<p>n/a</p>
</blockquote></td>
<td>70%</td>
<td><blockquote>
<p>80%</p>
</blockquote></td>
</tr>
</tbody>
</table>

Les certifications sont personnelles, donc lorsqu’un membre du personnel
quitte ou rejoint l’entreprise, le PARTENAIRE doit en informer ODOO.

Le niveau de partenariat du PARTENAIRE sera revu trimestriellement par
ODOO, et ajusté au plus haut niveau pour lequel les 3 exigences sont
atteintes.

Cependant les "Official Partners" pourront monter de niveau de
partenariat dès qu’ils répondent aux 3 exigences pour ce niveau.

### 4.2 Avantages

Les avantages de chaque niveau de partenariat sont détaillés dans le
tableau ci-dessous :

<div class="only">

latex

<div class="tabularcolumns">

p{1.5cm}p{1.5cm}

</div>

</div>

|                                                                   | Learning Partner | Official: Ready | Official: Silver | Official: Gold |
| ----------------------------------------------------------------- | ---------------- | --------------- | ---------------- | -------------- |
| **Reconnaissance**                                                |                  |                 |                  |                |
| Visibilité sur odoo.com                                           | Non              | "Ready Partner" | "Silver Partner" | "Gold Partner" |
| Droit d’utiliser la marque déposée et les logos                   | Oui              | Oui             | Oui              | Oui            |
| **Avantages formation**                                           |                  |                 |                  |                |
| Coaching Vente & Webinars                                         | Oui              | Oui             | Oui              | Oui            |
| Accès à la base de connaissances Odoo                             | Oui              | Oui             | Oui              | Oui            |
| **Avantages logiciel**                                            |                  |                 |                  |                |
| Accès au code source Odoo Enterprise                              | Oui              | Oui             | Oui              | Oui            |
| Code extension d'essai Odoo Enterprise                            | Oui              | Oui             | Oui              | Oui            |
| Accès à Odoo.SH dans un but de test ou de développement           | Oui              | Oui             | Oui              | Oui            |
| **Avantages Ventes**                                              |                  |                 |                  |                |
| Commission sur la plateforme Odoo SH\[1\]                         | 10%              | 50%             | 50%              | 50%            |
| Commission sur Odoo Enterprise                                    | 10%              | 10%             | 15%              | 20%            |
| Commission sur la Maintenance de Modules Supplémentaires          | 82%              | 82%             | 82%              | 82%            |
| Accès à un Account Manager dédié et au Tableau de Bord Partenaire | Non              | Oui             | Oui              | Oui            |
| **Avantages marketing**                                           |                  |                 |                  |                |
| Accès au matériel de marketing                                    | Oui              | Oui             | Oui              | Oui            |
| Événement PARTENAIRE - ODOO support & promotion                   | Non              | Oui             | Oui              | Oui            |

### 4.3 Reconnaissance du partenaire

ODOO promouvra les "Official Partners" dans la liste des partenaires
Odoo sur odoo.com.

ODOO octroie au PARTENAIRE, sur une base non exclusive, le droit
d’utiliser et de reproduire le logo partenaire d’ODOO du niveau de
partenariat correspondant et le nom « Odoo » en relation avec ce Contrat
de partenariat.

Chacune des Parties s’engage à respecter les droits de l’autre Partie
pour tous les éléments repris dans le paragraphe précédent et
s’abstiendra plus particulièrement de créer des analogies ou une
confusion entre leurs entreprises respectives dans l’esprit du grand
public, pour quelque raison et par quelque moyen que ce soit.

### 4.4 Avantages formation

Le PARTENAIRE a accès à la base de connaissances d’ODOO pour toute la
durée de ce Contrat. La base de connaissance d’ODOO est une plateforme
en ligne reprenant une série de documents commerciaux, marketing et de
documentation sur les fonctionnalités, pour aider le PARTENAIRE à
engranger et exploiter des connaissances Odoo, étendre son entreprise,
attirer davantage de clients et augmenter la visibilité de sa marque.

Le PARTENAIRE aura accès à un coaching commercial fourni par son Account
Manager dédié désigné par ODOO.

Le PARTENAIRE a également la possibilité d'acheter des services de
support ou de formation en souscrivant à un Odoo Success Pack, moyennant
un supplément.

### 4.5 Commissions sur les Services Odoo vendus par le PARTENAIRE

Pour les services ODOO achetés par un client par le biais du PARTENAIRE,
et pour autant que le PARTENAIRE maintienne une relation contractuelle
avec ce client, le PARTENAIRE recevra une commission en fonction du
tableau de la section `benefits_fr` et du niveau de partenariat à la
date de la facture client correspondante.

Une fois par mois, le PARTENAIRE recevra un bon de commande pour la
commission due pour le mois précédent. Sur base de ce bon de commande,
le PARTENAIRE facturera ODOO, et sera payé dans un délai de 15 jours
suivant la réception de cette facture.

**Maintenance of Covered Extra Modules**

Le PARTENAIRE comprend et accepte que lorsqu'un client choisit de
Collaborer avec le PARTENAIRE, ODOO lui déléguera la Maintenance des
Modules Supplémentaires Couverts\[2\], et qu'il deviendra le point de
contact principal du client.

Le PARTENAIRE ne recevra de commission pour la Maintenance des Modules
Supplémentaires Couverts que pour autant que le client ne signale pas à
ODOO sa volonté d'arrêter de Collaborer avec le PARTENAIRE.

## 5 Frais

Le PARTENAIRE s’engage à payer les frais annuels de Partenariat à la
réception de la facture annuelle envoyée par ODOO. Ces frais seront
spécifiés par écrit au moment de la signature de ce Contrat.

Le PARTENAIRE accepte que les frais de partenariat susmentionnés ne
soient pas remboursables.

Tous les frais et tarifs sont indiqués hors taxes, frais et charges
fédérales, provinciales, locales ou autres taxes gouvernementales
applicables (collectivement, les "Taxes"). Le PARTENAIRE est responsable
du paiement de toutes les Taxes liées aux achats effectués par le
PARTENAIRE en vertu de ce Contrat, sauf lorsque ODOO est légalement tenu
de payer ou de percevoir les Taxes dont le PARTENAIRE est responsable.

## 6 Résiliation

Dans le cas où l’une des Parties ne remplirait pas l’une des obligations
mentionnées ici et qu’un tel manquement ne serait remédié dans les 30
jours calendrier suivant la communication écrite d’un tel manquement, la
Partie non fautive peut mettre un terme immédiat à ce Contrat.

  - Maintien des dispositions:  
    Les sections « `restrictions_fr` », « `p_liability_fr` », et
    « `gov_law_fr` » seront maintenues après expiration ou résiliation
    de ce Contrat.

### 6.1 Conséquences de la résiliation

  - À l’expiration ou la résiliation de ce Contrat, le PARTENAIRE :
    
      - n’utilisera plus le matériel et le nom de marque d’Odoo et ses
        marques déposées, et ne revendiquera plus l’existence d’un
        partenariat ou d’une relation quelconque avec ODOO ;
      - respectera ses engagements pendant toute période de préavis
        précédant une telle résiliation ;
      - ne pourra plus utiliser Odoo Enterprise, que ce soit à des fins
        de développement, de test ou de production.

## 7 Responsabilité et Indemnités

Les deux Parties sont liées par l’obligation de moyens ci-après.

Dans les limites autorisées par la loi, la responsabilité de chaque
Partie pour quelque réclamation, perte, dommage ou dépense que ce soit
découlant de n’importe quelle cause et survenant de quelque manière que
ce soit dans le cadre de ce Contrat sera limitée aux dommages directs
prouvés, mais ne dépassera en aucun cas, pour tous les événements ou
séries d’événements connexes entraînant des dommages, le montant total
des frais payés par le PARTENAIRE au cours de six (6) mois précédant
immédiatement la date de l’événement donnant naissance à une telle
plainte.

En aucun cas chaque Partie ne sera responsable pour tout dommage
indirect ou consécutif, y compris, mais sans s’y restreindre, aux
plaintes, pertes de revenu, de recettes, d’économies, d’entreprise ou
autre perte financière, coûts d’arrêt ou de retard, pertes de données ou
données corrompues de tiers ou de clients résultant de ou en lien avec
l’exécution de ses obligations dans le cadre de ce Contrat.

Le PARTENAIRE comprend qu’il n’a aucune attente et n’a reçu aucune
assurance qu’un investissement effectué dans l’exécution de ce Contrat
et du Programme de partenariat d’Odoo sera récupéré ou recouvert ou
qu’il obtiendra un quelconque montant de bénéfices anticipé en vertu
de ce Contrat.

## 8 Image de marque

La marque "Odoo" (y compris le nom et ses représentations visuelles et
logos) est la propriété exclusive d'ODOO.

ODOO autorise le PARTENAIRE à utiliser la marque "Odoo" pour promouvoir
ses produits et services, pour la Durée de ce Contrat seulement, et tant
que les conditions suivantes sont remplies:

  - Aucune confusion n'est possible sur le fait que les services sont
    fournis par le PARTENAIRE, et non par ODOO;
  - Le PARTENAIRE n'utilise pas la marque "Odoo" dans un nom
    d'entreprise, un nom de produit, ou un nom de domaine, et ne dépose
    aucune marque qui la contienne.

Les Parties s’abstiendront de nuire à l’image de marque et à la
réputation de l’autre Partie de quelque façon que ce soit, dans
l’exécution de ce Contrat.

Le non-respect des dispositions de cette section sera une cause de
résiliation du Contrat.

### 8.1 Publicité

Le PARTENAIRE octroie à ODOO un droit non exclusif d’utilisation du nom
ou de la marque déposée du PARTENAIRE dans des communiqués de presse,
annonces publicitaires ou autres annonces publiques.

Le PARTENAIRE accepte en particulier d’être mentionné dans la liste
officielle des partenaires ODOO et que son logo ou sa marque déposée
soient utilisés à cette fin uniquement.

### 8.2 Pas de candidature ou d’engagement

À moins que l’autre Partie ne donne son consentement écrit, chaque
Partie, ses filiales et ses représentants acceptent de ne pas solliciter
ou proposer un emploi à un travailleur de l’autre Partie impliqué dans
l’exécution ou l’utilisation des Services repris dans ce Contrat, pour
toute la durée de l’accord et une période de 12 mois suivant la date de
résiliation ou d’expiration de ce Contrat. En cas de non-respect des
conditions de cette section qui mène à la résiliation dudit travailleur
à cet effet, la Partie fautive accepte de payer à l’autre Partie la
somme de 30 000,00 (trente mille) euros (€).

### 8.3 Contracteurs indépendants

Les Parties sont des contracteurs indépendants et ce Contrat ne sera pas
interprété comme constituant une Partie comme partenaire, joint-venture
ou fiduciaire de l’autre ni créant tout autre forme d’association légale
qui imposerait à l’une des Parties la responsabilité pour l’action ou
l’inaction de l’autre ou fournissant à l’une des Parties le droit, le
pouvoir ou l’autorité (expresse ou implicite) de créer quelque devoir ou
obligation que ce soit.

## 9 Loi applicable et compétence

Ce Contrat sera gouverné par et interprété en accord avec la loi belge.
Tout litige naissant en lien avec le Contrat et pour lequel aucun
règlement à l’amiable ne peut être trouvé sera finalement réglé par les
Tribunaux de Belgique à Nivelles.

<div class="only">

html

**Signatures**

|            |                     |
| ---------- | ------------------- |
| Pour ODOO, | Pour le PARTENAIRE, |

</div>

<div class="only">

latex

<div class="topic">

**Signatures**

Pour ODOO, Pour le PARTENAIRE,

</div>

</div>

## 10 Annexe A : Licence Odoo Enterprise Edition

Odoo Enterprise Edition est publié sous la licence Odoo Enterprise
Edition License v1.0, définie ci-dessous.

<div class="warning">

<div class="title">

Warning

</div>

Ceci est une traduction en français de la licence “Odoo Enterprise
Edition License”. Cette traduction est fournie dans l’espoir qu’elle
facilitera sa compréhension, mais elle n'a aucune valeur légale. La
seule référence officielle des termes de la licence “Odoo Enterprise
Edition License” est la `version originale <odoo_enterprise_license>`.

</div>

<tt>

Odoo Enterprise Edition License v1.0

Ce logiciel et les fichiers associés (le "Logiciel") ne peuvent être
utilisés (c'est-à-dire exécutés, modifiés, ou exécutés avec des
modifications) qu'avec un contrat Odoo Enterprise Subscription en ordre
de validité, et pour le nombre d'utilisateurs prévus dans ce contrat.

Un contrat de Partnariat avec Odoo S.A. en ordre de validité donne les
mêmes permissions que ci-dessus, mais uniquement pour un usage
restreint à un environnement de test ou de développement.

Vous êtes autorisé à développer des modules Odoo basés sur le Logiciel
et à les distribuer sous la license de votre choix, pour autant que
cette licence soit compatible avec les conditions de la licence Odoo
Enterprise Edition Licence (Par exemple: LGPL, MIT ou d'autres licenses
propriétaires similaires à celle-ci).

Vous êtes autorisé à utiliser des modules Odoo publiés sous n'importe
quelle licence, pour autant que leur licence soit compatible avec les
conditions de la licence Odoo Enterprise Edition License (Notamment tous
les modules publiés sur l'Odoo Apps Store sur odoo.com/apps).

Il est interdit de publier, distribuer, accorder des sous-licences, ou
vendre tout copie du Logiciel ou toute copie modifiée du Logiciel.

Toute copie du Logiciel ou d'une partie substantielle de celui-ci doit
inclure l'avis de droit d'auteur original ainsi que le texte de la
présente licence.

LE LOGICIEL EST FOURNI "EN L'ETAT", SANS AUCUNE GARANTIE DE QUELQUE
NATURE QUE CE SOIT, EXPRESSE OU IMPLICITE, Y COMPRIS, MAIS SANS Y ETRE
LIMITE, LES GARANTIES IMPLICITES DE COMMERCIABILITE, DE CONFORMITE A UNE
UTILISATION PARTICULIERE, OU DE NON INFRACTION AUX DROITS D'UN TIERS.

EN AUCUN CAS LES AUTEURS OU TITULAIRES DE DROITS D'AUTEUR NE POURRONT
ETRE TENUS POUR RESPONSABLE A VOTRE EGARD DE RECLAMATIONS, DOMMAGES OU
AUTRES RESPONSABILITES, EN VERTU D'UN CONTRAT, DÉLIT OU AUTREMENT,
RELATIVEMENT AU LOGICIEL, A L'UTILISATION DU LOGICIEL, OU A TOUTE AUTRE
MANIPULATION RELATIVE AU LOGICIEL.

</tt>

1.  jusqu'à un maximum de 150€ (ou $180) de commission mensuelle par
    contrat Odoo.SH, ou 1440€ (ou $1728) de commission annuelle par
    contrat Odoo.SH.

2.  “Collaborer avec un Partenaire Odoo” et “Modules Supplémentaires
    Couverts” sont définis dans le contrat "Odoo Enterprise Subscription
    Agreement" entre ODOO et le client.


---
## File: ./content/legal/terms/i18n/partnership_tex_es.md

  - nosearch

  - orphan

<div class="toctree" data-maxdepth="4" hidden="">

partnership\_es

</div>


---
## File: ./content/legal/terms/i18n/partnership_es.md

# Odoo Partnership Agreement (ES)

<div class="only">

html

[Download
PDF](https://www.odoo.com/documentation/%7BCURRENT_BRANCH%7D/odoo_partnership_agreement_es.pdf)

</div>

<div class="note">

<div class="title">

Note

</div>

Versión 11 - 2023-05-19

</div>

ENTRE:  
 Odoo S.A., una empresa que tiene su sede social en Chaussée de Namur,
40, 1367 Grand-Rosière,  
 Bélgica, y sus filiales (en adelante denominados conjuntamente
“ODOO”)  
Y:  
 \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_,
una empresa que tiene su domicilio social en  
 \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_.  
 (en adelante denominado “EL COLABORADOR”)

ODOO y EL COLABORADOR se denominan individualmente “Parte” y
conjuntamente “las Partes”.

## 1 Objeto

El presente Contrato tiene por objeto regular las condiciones bajo las
cuales ODOO presta servicios a EL COLABORADOR, acceso al software Odoo
Enterprise Edition, y bajo las cuales EL COLABORADOR cumple con las
obligaciones establecidas a continuación.

Por la presente ODOO nombra a EL COLABORADOR, y EL COLABORADOR acepta
ser nombrado, socio no exclusivo para promover y vender “Odoo Enterprise
Edition” a los clientes.

EL COLABORADOR se compromete a hacer su mejor esfuerzo para vender
contratos de Odoo Enterprise a sus clientes. En apoyo a esta afirmación,
EL COLABORADOR dará prioridad a la comercialización de la versión “Odoo
Enterprise Edition” a clientes potenciales y clientes. EL COLABORADOR
siempre tiene la posibilidad de vender servicios con otras versiones del
software, como “Odoo Community Edition”, en caso de ser necesario.

## 2 Duración del Contrato

La duración de este contrato será de un año ("la Duración") a partir de
la fecha de la firma. Se renueva automáticamente por una duración igual,
a menos que cualquiera de las partes notifique por escrito a la otra
parte su terminación como mínimo 30 días antes del final de la duración.

## 3 Acceso a Odoo Enterprise Edition

### 3.1 Acceso a la plataforma del proyecto

Para ayudar a EL COLABORADOR a promover Odoo Enterprise Edition, ODOO
otorga a EL COLABORADOR acceso a su repositorio de código del proyecto
para todas las “Aplicaciones Odoo Enterprise Edition”, en los términos
establecidos en `appendix_p_a_es` y las condiciones restringidas del
presente Contrato.

Además, ODOO otorga a EL COLABORADOR acceso gratuito a la plataforma
ODOO.SH con fines de prueba y desarrollo.

EL COLABORADOR no tiene permitido bloquear, restringir o limitar de
ninguna manera el acceso y uso de la Licencia Odoo Enterprise Edition
por parte del cliente, sin consulta previa y autorización por escrito de
ODOO.

### 3.2 Restricciones

EL COLABORADOR se compromete a mantener la confidencialidad del código
fuente de las aplicaciones Odoo Enterprise Edition entre su personal. El
acceso al código fuente de Odoo Enterprise Edition para los clientes se
rige por el Contrato de suscripción de Odoo Enterprise. EL COLABORADOR
se compromete a NO redistribuir este código a terceros sin el permiso
por escrito de ODOO.

PARTNER se compromete a no ofrecer servicios en Odoo Enterprise Edition
a clientes que no estén cubiertos por una suscripción de Odoo
Enterprise, incluso durante la fase de implementación.

A pesar de lo anterior, EL COLABORADOR se compromete a preservar por
completo la integridad del código de Odoo Enterprise Edition necesario
para verificar la validez del uso de Odoo Enterprise Edition y para
recopilar estadísticas necesarias para este fin.

## 4 Servicios de colaboración

### 4.1 Niveles de colaboración

El programa de socios de Odoo consta de dos tipos de asociaciones y
cuatro niveles; "Learning Partners" es para empresas que desean todo lo
necesario para comenzar a implementar Odoo, sin visibilidad como socio
oficial hasta que obtengan la experiencia requerida; "Official Partners"
es para empresas que desean la visibilidad como Ready, Silver y Gold,
según su experiencia con Odoo.

El nivel de colaboración otorgado a EL COLABORADOR depende de los
*nuevos usuarios netos de Odoo Enterprise vendidos* en los últimos 12
meses, el número de recursos certificados y la Tasa de Retención de
clientes. Los *nuevos usuarios netos de Odoo Enterprise vendidos*
incluyen nuevos clientes, ventas adicionales a clientes existentes,
reducciones en ventas a clientes existentes y la pérdida de clientes.
Las renovaciones de contratos existentes no se cuentan como parte del
número de usuarios vendidos, pero EL COLABORADOR aún recibe una
comisión por estos contratos según se establece en la sección
`benefits_es`.

La tabla siguiente resume los requisitos para cada nivel de
colaboración.

La *Tasa de Retención* de clientes se calcula dividiendo el número total
de clientes de Odoo Enterprise adquiridos por EL COLABORADOR en los
últimos 3 años que están actualmente activos, entre el número total de
clientes de Odoo Enterprise adquiridos por EL COLABORADOR en los últimos
3 años.

<table>
<colgroup>
<col style="width: 38%" />
<col style="width: 14%" />
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Learning Partner</th>
<th>Official: Ready</th>
<th>Official: Silver</th>
<th>Official: Gold</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Nuevos Usuarios netos de Odoo Enterprise vendidos anualmente</td>
<td><blockquote>
<p>0</p>
</blockquote></td>
<td><blockquote>
<p>10</p>
</blockquote></td>
<td>50</td>
<td>300</td>
</tr>
<tr class="even">
<td>Número de empleados certificados en al menos uno de las 3 últimas versiones de Odoo</td>
<td><blockquote>
<p>0</p>
</blockquote></td>
<td><blockquote>
<p>1</p>
</blockquote></td>
<td><blockquote>
<p>3</p>
</blockquote></td>
<td><blockquote>
<p>6</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>Tasa de Retención mínima</td>
<td><blockquote>
<p>n/a</p>
</blockquote></td>
<td><blockquote>
<p>n/a</p>
</blockquote></td>
<td>70%</td>
<td><blockquote>
<p>80%</p>
</blockquote></td>
</tr>
</tbody>
</table>

Las certificaciones son personales, por lo que cuando un miembro
certificado del personal deja la empresa, EL COLABORADOR debe
notificarlo a ODOO para que actualice la cantidad de recursos
certificados activos para el contrato de colaboración.

ODOO revisará trimestralmente el nivel de colaboración de EL COLABORADOR
y lo ajustará al nivel más alto para el cual se cumplan los 3
requisitos.

Sin embargo, los "Official Partners" pueden actualizarse automáticamente
a un nivel superior una vez que alcancen los 3 requisitos para ese nivel
de colaboración.

### 4.2 Ventajas

En la tabla siguiente se describen los detalles de las ventajas para
cada nivel de colaboración:

<div class="only">

latex

<div class="tabularcolumns">

p{1.5cm}p{1.5cm}

</div>

</div>

|                                                                 | Learning Partner | Official: Ready | Official: Silver | Official: Gold |
| --------------------------------------------------------------- | ---------------- | --------------- | ---------------- | -------------- |
| **Reconocimiento**                                              |                  |                 |                  |                |
| Visibilidad en odoo.com                                         | No               | "Ready Partner" | "Silver Partner" | "Gold Partner" |
| Derechos de uso de la marca registrada “Odoo” y logotipos       | Sí               | Sí              | Sí               | Sí             |
| **Ventajas de la formación**                                    |                  |                 |                  |                |
| Coaching de ventas y webinars                                   | Sí               | Sí              | Sí               | Sí             |
| Acceso a la base de conocimiento Odoo                           | Sí               | Sí              | Sí               | Sí             |
| **Ventajas del software**                                       |                  |                 |                  |                |
| Acceso al código fuente de Odoo Enterprise y repositorio Github | Sí               | Sí              | Sí               | Sí             |
| Código de extensión de prueba de Odoo Enterprise                | Sí               | Sí              | Sí               | Sí             |
| Acceso a Odoo.sh con fines de prueba y desarrollo.              | Sí               | Sí              | Sí               | Sí             |
| **Ventajas de las ventas**                                      |                  |                 |                  |                |
| Comisión por la plataforma Odoo SH \[1\]                        | 10%              | 50%             | 50%              | 50%            |
| Comisión por Odoo Enterprise                                    | 10%              | 10%             | 15%              | 20%            |
| Acceso a un gestor de cuentas especializado y Partner Dashboard | No               | Sí              | Sí               | Sí             |
| **Ventajas de marketing**                                       |                  |                 |                  |                |
| Material de marketing                                           | Sí               | Sí              | Sí               | Sí             |
| Evento de EL COLABORADOR - Asistencia y promoción de ODOO       | No               | Sí              | Sí               | Sí             |

### 4.3 Reconocimiento de socios

ODOO promocionará EL COLABORADOR como socio oficial en el sitio web
oficial (odoo.com).

ODOO concede a EL COLABORADOR, de forma no exclusiva, el derecho a usar
y reproducir el logotipo de socio de ODOO del nivel de colaboración
correspondiente y el nombre “Odoo” en relación con este contrato de
colaboración.

Cada Parte se compromete a respetar todos los derechos de la otra Parte
en todos los elementos mencionados en el párrafo anterior y, más
concretamente, cada Parte debe abstenerse de causar cualquier analogía o
crear confusión entre sus respectivas compañías en el público general,
por cualquier motivo y por cualquier medio.

### 4.4 Ventajas de la formación

EL COLABORADOR tiene acceso a la base de conocimiento de ODOO durante la
duración de este Contrato. La base de conocimiento de ODOO es una
plataforma electrónica en línea que contiene un conjunto de documentos
comerciales, funcionales y de marketing para ayudar a EL COLABORADOR a
adquirir y aprovechar el conocimiento de Odoo, hacer crecer su negocio,
atraer más clientes y crear conciencia de marca.

EL COLABORADOR podrá acceder al coaching comercial facilitado por su
gestor de cuentas especializado, designado por ODOO.

EL COLABORADOR también tiene la opción de comprar servicios de soporte o
de formación suscribiéndose a un Success Pack de Odoo, por una tarifa
adicional.

### 4.5 Comisiones por los servicios de Odoo vendidos por EL COLABORADOR

Para los servicios ODOO comprados por un cliente a través de EL
COLABORADOR, y siempre que el PARTNER mantenga una relación contractual
con el cliente correspondiente, EL COLABORADOR ecibirá una comisión de
acuerdo con la tabla de la sección `benefits_es` y su nivel de
asociación en la fecha de la factura del cliente.

## 5 Tarifas

EL COLABORADOR se compromete a pagar la tarifa de la colaboración al
recibir la factura anual enviada por ODOO. La tarifa se especificará por
escrito al momento de la firma de este contracto.

EL COLABORADOR reconoce que la tarifa de colaboración mencionadas
anteriormente no son reembolsables.

Todos los honorarios y cargos son exclusivos de todos los impuestos,
tarifas o cargos gubernamentales, federales, provinciales, estatales,
locales u otros aplicables (en conjunto, "Impuestos"). EL COLABORADOR es
responsable de pagar todos los Impuestos asociados a las compras
realizadas por EL COLABORADOR bajo este Contrato, excepto cuando ODOO
esté legalmente obligado a pagar o recaudar Impuestos de los cuales EL
COLABORADOR es responsable.

## 6 Resolución

En el caso de que cualquiera de las Partes no cumpla con cualquiera de
sus obligaciones que se derivan de este documento, y si tal
incumplimiento no se ha rectificado en un período de 30 días naturales a
partir de la notificación por escrito de dicho incumplimiento, la Parte
que no incumplió sus obligaciones puede rescindir este contrato
inmediatamente.

  - Disposiciones subsistentes:  
    Las secciones « `restrictions_es` », « `p_liability_es` », y
    « `gov_law_es` » mantendrán su vigencia tras cualquier resolución
    o expiración de este contrato.

### 6.1 Consecuencia de la resolución

  - En el momento de la resolución de este contrato, EL COLABORADOR:
    
      - no deberá utilizar más los materiales y/o la marca Odoo ni
        reclamar la existencia de ninguna colaboración o relación con
        ODOO;
      - deberá cumplir con sus obligaciones durante cualquier período de
        aviso previo a dicha resolución;
      - ya no podrá usar Odoo Enterprise para fines de desarrollo,
        prueba o producción

## 7 Responsabilidad e indemnizaciones

Ambas Partes están vinculadas por una obligación de medios aquí
descrita.

En la medida máxima permitida por la ley, la responsabilidad de cada
Parte por cualquier reclamo, pérdida, daño o gasto derivado de cualquier
manera o bajo cualquier circunstancia del presente contrato se limitará
a los daños directos demostrados, pero en ningún caso excederá por todos
los eventos o series de eventos relacionados que ocasionen daños la
cantidad total de las tarifas pagadas por EL COLABORADOR en el
transcurso de los seis (6) meses inmediatamente anteriores a la fecha
del evento que dio lugar a dicha reclamación.

En ningún caso cada Parte será responsable de ningún daño indirecto o
consecuente, incluyendo, entre otros, pero no limitándose a,
reclamaciones de clientes o terceros, pérdidas de ingresos, ganancias,
ahorros, pérdidas de negocios y otras pérdidas financieras, costos de
paralización y retraso, datos perdidos o dañados derivados o
relacionados con el cumplimiento de sus obligaciones en virtud de este
Contrato.

EL COLABORADOR reconoce que no tiene ninguna expectativa y que no ha
recibido garantías de recuperar ninguna inversión realizada en la
ejecución de este contrato y el programa de socios de Odoo o de obtener
ninguna cantidad anticipada de ganancias en virtud de este contrato.

## 8 Imagen de marca

La marca "Odoo" (incluida la palabra y sus representaciones visuales y
logotipos) es exclusiva propiedad de ODOO.

ODOO autoriza a PARTNER a usar la marca "Odoo" para promocionar sus
productos y servicios, solo por la Duración del Contrato, siempre que:

  - no hay confusión posible de que el servicio sea proporcionado por
    PARTNER, no por ODOO;
  - PARTNER no use la palabra "Odoo" en el nombre de su compañía, nombre
    de producto, nombre de dominio y no registrar ninguna marca que la
    incluya.

Ambas Partes se abstendrán de dañar de ninguna manera la imagen de marca
y la reputación de la otra Parte en el cumplimiento de este contrato.

El incumplimiento de las disposiciones de esta sección será causa de
resolución de este Contrato.

### 8.1 Publicidad

EL COLABORADOR concede a ODOO el derecho no exclusivo de utilizar el
nombre y las marcas comerciales de EL COLABORADOR en comunicados de
prensa, promociones u otros anuncios públicos. En concreto, EL
COLABORADOR acepta que se le mencione, y que el logotipo y la marca
comercial de EL COLABORADOR se use solo para este fin, en la lista
oficial de socios de ODOO.

### 8.2 No captación o contratación

Excepto cuando la otra Parte dé su consentimiento por escrito, cada
Parte, sus afiliados y representantes acuerdan no captar u ofrecer
empleo a ningún empleado de la otra Parte que participe en la
realización o uso de los servicios de este contrato, durante la
duración de este contrato y por un período de 24 meses a partir de la
fecha de resolución o expiración de este contrato. En caso de cualquier
incumplimiento de las condiciones de esta sección que conduzca al
despido de dicho empleado con este objetivo, la Parte incumplidora se
compromete a pagar a la otra parte la cantidad de 30 000,00 EUR (€)
(treinta mil euros).

### 8.3 Contratistas independientes

Las Partes son contratistas independientes, y este contrato no debe
interpretarse como la configuración de cualquier Parte como socia,
empresa conjunta o fiduciaria de la otra, como la creación de otra forma
de asociación legal que exigiría responsabilidad a una Parte por la
acción o la falta de acción de la otra, o como la prestación a cada
Parte del derecho, poder o autoridad (expresa o implícita) para crear
cualquier deber u obligación de la otra.

## 9 Ley y jurisdicción aplicables

Este contrato se rige y se interpreta de acuerdo con las leyes de
Bélgica. Todas las disputas que surjan en relación con este contrato
para las que no se pueda encontrar una solución amistosa serán resueltas
definitivamente en los Tribunales de Bélgica en Nivelles.

<div class="only">

html

**Firmas**

|           |                    |
| --------- | ------------------ |
| Por ODOO, | Por EL COLABORADOR |

</div>

<div class="only">

latex

<div class="topic">

**Firmas**

Por ODOO, Por EL COLABORADOR,

</div>

</div>

## 10 Anexo A: Licencia Odoo Enterprise Edition

<div class="only">

latex

</div>

<div class="only">

html

See `odoo_enterprise_license`.

</div>

1.  hasta un máximo de 150€ (o $180) de comisión mensual por
    suscripción, o 1440€ (o $1728) de comisión anual por suscripción.


---
## File: ./content/legal/terms/i18n/terms_of_sale_tex_de.md

  - nosearch

  - orphan

<div class="toctree" data-maxdepth="4" hidden="">

terms\_of\_sale\_de

</div>


---
## File: ./content/legal/terms/i18n/terms_of_sale_fr.md

# Conditions Générales de Vente

<div class="only">

html

[Download
PDF](https://www.odoo.com/documentation/%7BCURRENT_BRANCH%7D/terms_of_sale_fr.pdf)

</div>

<div class="note">

<div class="title">

Note

</div>

Dernière modification: 12 septembre 2023.

</div>

Ces conditions régissent la vente de produits et services entre Odoo
S.A. et ses filiales (collectivement, "Odoo S.A.") et le client. Des
conditions supplémentaires peuvent s'appliquer pour d'autres services
offerts par Odoo S.A. (par exemple, l'Odoo Enterprise Subscription
Agreement). Si ces conditions supplémentaires entrent en contradiction
avec les Conditions Générales de Vente, les conditions supplémentaires
prévaudront.

Veuillez lire ces conditions attentivement avant de faire une commande
auprès d'Odoo S.A. En commandant auprès d'Odoo S.A., le client marque
son accord avec les présentes conditions.

Le client renonce explicitement à ses propres conditions générales, même
dans le cas où celles-ci seraient postérieures aux présentes conditions
générales. Toute dérogation doit, pour être valable, être convenue de
manière expresse, préalable et par écrit. Les présentes conditions sont
une prolongation du contrat signé entre parties et font en tant que
telles partie intégrante de la relation contractuelle entre parties.

Toutes les offres, tarifs ou listes de prix d’Odoo S.A. s’entendent,
sauf stipulation contraire, sans engagement. Sauf stipulation contraire,
toutes les factures sont payables à Odoo S.A. au comptant, au moment de
la livraison. L'endroit de paiement est le siège social de Odoo S.A.
peut envoyer des factures pour des marchandises déjà livrées même avant
la livraison complète des marchandises. Le Client ne peut en aucun cas
compenser une quelconque créance sur Odoo S.A. avec son obligation de
paiement, sauf stipulation contraire.

Si la facture n’est pas payée à son échéance, elle sera, à titre
d’indemnité forfaitaire, majorée de 15% et majorée d'autres
indemnités, éventuellement dues pour tout préjudice, à démontrer par
Odoo S.A.. Le non-paiement de tout ou partie d’une facture à son
échéance rend immédiatement exigibles toutes sommes ou toutes factures
dues non-encore échue. En cas de non-paiement d’une facture, Odoo S.A.
 a le droit de rompre toutes les conventions de vente qui restent
encore à exécuter.

Si le Client est autorisé à effectuer des paiements à terme, l’absence
de paiement d’un seul terme entraînera de plein droit et sans mise en
demeure l’exigibilité de toute la dette, nonobstant toute indemnité
supplémentaire.

Certains pays appliquent une retenue à la source sur le montant de la
facture, conformément à leur législation interne. La retenue à la source
sera réglée par le client, auprès de l'administration fiscale. En aucun
cas, Odoo S.A. ne sera impliquée dans les coûts liés à la législation du
pays. Le montant de la facture est donc dû à Odoo S.A. dans son
intégralité et n’inclus pas les coûts relatifs à la législation du pays
où se trouve le client.

Pour les clients implantés dans plusieurs pays, les prix applicables
seront toujours basés sur l'implantation géographique ayant la liste de
prix la plus élevée, sauf stipulation contraire par écrit au moment de
la commande.

Les abonnements mensuels sont uniquement disponibles pour l'hébergement
sur la Plate-forme Cloud (Odoo SaaS et Odoo SH). Le paiement des
abonnements mensuels ne peut être effectué que par carte de crédit ou
par une méthode de prélèvement automatique équivalente prise en charge.
Odoo S.A. se réserve le droit de refuser tout abonnement mensuel ne
respectant pas ces conditions.

Odoo S.A. s'engage à faire ses meilleurs efforts en vue de fournir en
temps utile des services performants. Toutefois, aucune de ses
obligations ne peut être considérée comme étant une obligation de
résultat. Odoo S.A. ne peut, en aucun cas, être appelée en garantie par
le client dans le cadre de demandes en dommages et intérêts formulée par
le consommateur final à l'encontre du client.

Dans la limite autorisée par la loi, la responsabilité globale de chaque
partie, ainsi que de ses filiales ne dépassera pas 50% du montant total
réglé par le Client en vertu des présentes conditions au cours des 12
mois précédant la date de l'événement donnant lieu à une telle
réclamation. Des réclamations multiples n'augmenteront pas cette
limite.

Toute réclamation doit, pour être recevable, être notifiée à Odoo S.A.,
à son siège social, par courrier recommandé dans les 8 jours suivant la
livraison des marchandises ou la prestation des services.

Odoo S.A. se réserve le droit de modifier ces conditions à n'importe
quel moment et sans notification préalable. Le client est soumis aux
conditions en application au moment de son acceptation de ces
conditions.

Tout litige résultant de la présente convention ressort de l’application
du droit belge et est de la compétence des Tribunaux de l’arrondissement
du siège social d’Odoo S.A. hormis le droit d’Odoo S.A. de porter le
litige devant une autre juridiction compétente.


---
## File: ./content/legal/terms/i18n/enterprise_de.md

# Odoo Enterprise Abonnementsvertrag

<div class="only">

html

[Download
PDF](https://www.odoo.com/documentation/%7BCURRENT_BRANCH%7D/odoo_enterprise_agreement_de.pdf)

</div>

<div class="warning">

<div class="title">

Warning

</div>

Dies ist eine deutsche Übersetzung des "Odoo Enterprise Subscription
Agreement". Diese Übersetzung soll das Verständnis erleichtern, hat aber
keinen rechtlichen Wert. Der einzige offizielle Verweis auf die
Geschäftsbedingungen des "Odoo Enterprise Subscription Agreement" ist
`die englische Original version <enterprise_agreement>`.

</div>

<div class="warning">

<div class="title">

Warning

</div>

DIESE VERSION IST NICHT AKTUELL, FÜR DIE AKTUELLE VERSION SIEHE
`original english version
<enterprise_agreement>`.

</div>

<div class="note">

<div class="title">

Note

</div>

Version 9c - 2020-06-15

</div>

Indem Sie (der "Kunde") die Odoo Enterprise-Dienstleistungen (die
"Dienstleistungen"), die von Odoo SA und seinen verbundenen Unternehmen
(zusammen "Odoo SA") in Verbindung mit der Odoo Enterprise Edition oder
der Odoo Community Edition (die "Software") bereitgestellt und auf den
Cloud-Plattformen von Odoo SA (die "Cloud-Plattform") oder vor Ort
("Self-Hosting") gehostet werden, abonnieren, erklären Sie sich mit den
folgenden Bedingungen einverstanden (die "Vereinbarung").

## 1\. Laufzeit der Vereinbarung

Die Dauer dieser Vereinbarung (die "Laufzeit") wird bei Abschluss dieser
Vereinbarung schriftlich festgelegt und beginnt mit dem Datum des
Abschlusses. Sie verlängert sich automatisch um die gleiche Laufzeit, es
sei denn, eine der beiden Parteien kündigt die Vereinbarung mindestens
30 Tage vor Ablauf der Laufzeit schriftlich gegenüber der anderen
Partei.

## 2\. Definitionen

  - Benutzer  
    Jedes Benutzerkonto, das in der Software als aktiv angegeben ist und
    Zugang zum Erstell-und/oder Bearbeitungsmodus hat. Deaktivierte
    Benutzerkonten und Konten, die von externen Personen (oder Systemen)
    verwendet werden, die nur begrenzten Zugang zur Software über die
    Portalfunktionen haben ("Portalbenutzer"), werden nicht als Benutzer
    gezählt.

  - App  
    Eine "App" ist eine spezielle Gruppe von Funktionen, die zur
    Installation in der Software zur Verfügung steht und in der
    öffentlichen Preisliste der [Odoo SA-Website](https://www.odoo.com)
    aufgeführt ist.

  - Odoo-Partner  
    Ein Odoo-Partner ist ein Drittunternehmen oder eine Einzelperson,
    die vom Kunden ausgewählt wurde und mit dem Kunden hinsichtlich
    seiner Dienstleistungen im Zusammenhang mit Odoo zusammenarbeitet.
    Der Kunde kann jederzeit entscheiden, mit einem anderen Odoo-Partner
    oder direkt mit Odoo SA zusammenzuarbeiten (nach vorheriger
    Ankündigung).

  - Zusatzmodul  
    Ein Zusatzmodul ist ein Verzeichnis von Quellcodedateien oder eine
    Reihe von Python-basierten Anpassungen, die in einer Datenbank
    erstellt (z. B. mit Odoo Studio) wurden, das der Software Funktionen
    hinzufügt oder ihr Standardverhalten ändert. Es kann vom Kunden, von
    Odoo SA, von einem Odoo-Partner im Namen des Kunden oder von Dritten
    entwickelt worden sein.

  - Odoo unterstütztes Zusatzmodul  
    Ein unterstütztes Zusatzmodul ist ein Zusatzmodul, für das der Kunde
    eine Wartungsgebühr entrichtet, um Support-, Upgrade- und
    Fehlerbehebungsdienste zu erhalten.

  - Bug  
    Als Bug gilt jeder Ausfall der Software oder eines unterstützten
    Zusatzmoduls, der zu einem vollständigen Stopp, einer Fehlersuche
    oder einer Sicherheitsverletzung führt und nicht direkt durch eine
    fehlerhafte Installation oder Konfiguration verursacht wird. Die
    Nichteinhaltung von Spezifikationen oder Anforderungen wird nach dem
    Ermessen von Odoo SA als Bug betrachtet (typischerweise, wenn die
    Software nicht die Ergebnisse oder die Leistung erbringt, für die
    sie entwickelt wurde, oder wenn eine länderspezifische Funktion
    nicht mehr den gesetzlichen Buchhaltungsanforderungen entspricht).

  - Unterstützte Versionen  
    Sofern nicht anders angegeben, gelten die im Rahmen dieser
    Vereinbarung erbrachten Dienstleistungen nur für die unterstützten
    Versionen der Software, zu denen die drei zuletzt veröffentlichten
    Hauptversionen gehören.

## 3\. Zugang zur Software

Der Kunde kann die auf der Cloud-Plattform gehostete Software nutzen
oder die Option Self-Hosting wählen. Die Cloud-Plattform wird von Odoo
SA gehostet und vollständig verwaltet, der Kunde kann per Fernzugriff
darauf zugreifen. Bei der Self-Hosting-Option hostet der Kunde die
Software stattdessen auf Computersystemen seiner Wahl, über die Odoo SA
keine Kontrolle hat.

Odoo SA gewährt dem Kunden für die Dauer dieser Vereinbarung eine nicht
exklusive, nicht übertragbare Lizenz zur Nutzung (Ausführung, Änderung,
Ausführung nach Änderung) der Odoo Enterprise Edition Software unter den
in `appendix_a_de` genannten Bedingungen.

Der Kunde verpflichtet sich, alle erforderlichen Maßnahmen zu ergreifen,
um die unveränderte Ausführung des Teils der Software zu gewährleisten,
der die Gültigkeit der Nutzung der Odoo Enterprise Edition überprüft und
zu diesem Zweck Statistiken sammelt, unter anderem zur Ausführung einer
Instanz, der Anzahl der Benutzer, den installierten Apps und der Anzahl
der Codezeilen der unterstützten Zusatzmodule.

Odoo SA verpflichtet sich, ohne Zustimmung des Kunden keine
individuellen oder namentlichen Angaben an Dritte weiterzugeben und alle
gesammelten Daten in Übereinstimmung mit der offiziellen
Datenschutzpolitik zu behandeln, die unter
<https://www.odoo.com/privacy> veröffentlicht ist.

Bei Ablauf oder Kündigung dieser Vereinbarung wird diese Lizenz
unverzüglich widerrufen und der Kunde verpflichtet sich, die Nutzung
der Odoo Enterprise Edition Software und der Cloud-Plattform
einzustellen.

Sollte der Kunde gegen die Bestimmungen dieses Abschnitts verstoßen,
erklärt er sich bereit, Odoo SA eine zusätzliche Gebühr in Höhe von 300
% des geltenden Listenpreises für die tatsächliche Anzahl der Benutzer
und installierten Apps zu zahlen.

## 4\. Dienstleistungen

### 4.1 Fehlerbehebung

Während der Laufzeit dieser Vereinbarung verpflichtet sich Odoo SA, alle
zumutbaren Anstrengungen zu unternehmen, um Fehler der Software und der
unterstützten Zusatzmodule zu beheben, die vom Kunden über den
entsprechenden Kanal eingereicht werden (in der Regel das Webformular
oder die Telefonnummern, die auf <https://odoo.com/help> aufgeführt
sind, oder - im Falle der Zusammenarbeit mit einem Odoo-Partner - der
vom Partner bereitgestellte Kanal), und mit der Bearbeitung innerhalb
von zwei Werktagen nach Eingang zu beginnen.

Sobald der Fehler behoben ist, wird dem Kunden eine entsprechende
Problemlösung mitgeteilt. Wenn der Kunde eine unterstützte Version
Version verwendet, wird er nicht zu einem Upgrade auf eine neuere
unterstützte Version der Software aufgefordert, um einen Fehler zu
beheben.

Wenn ein Fehler in einer unterstützten Version behoben wird,
verpflichtet sich Odoo SA, den Fehler ebenfalls in allen neueren
unterstützten Versionen der Software zu beheben.

Beide Parteien erkennen an, dass Odoo SA, wie in der Lizenz der Software
und im Abschnitt `liability_de` dieser Vereinbarung angegeben, nicht für
Fehler in der Software oder in unterstützten Zusatzmodulen haftbar
gemacht werden kann.

### 4.2 Service für Sicherheitsupdates

#### Self-Hosting

> Für die Dauer dieser Vereinbarung verpflichtet sich Odoo SA, dem
> Kunden für jeden Sicherheitsfehler, der in den unterstützten Versionen
> der Software (dies schließt Zusatzmodule aus) entdeckt wird, einen
> Sicherheitsbericht zuzusenden, mindestens zwei Wochen vor dessen
> Veröffentlichung, es sei denn, der Fehler wurde bereits von einer
> dritten Partei öffentlich bekannt gegeben. Sicherheitsberichte
> enthalten eine vollständige Beschreibung des Fehlers, seiner Ursache,
> seiner möglichen Auswirkungen auf die Systeme des Kunden und der
> entsprechenden Lösung für jede unterstützte Version.
> 
> Der Kunde nimmt zur Kenntnis, dass der Bug und die Informationen im
> Sicherheitsbericht während der Sperrfrist vor der öffentlichen
> Bekanntgabe als vertrauliche Informationen gemäß `confidentiality_de`
> zu behandeln sind.

#### Cloud-Plattform

> Odoo SA verpflichtet sich, die Sicherheitsmaßnahmen für jeden
> Sicherheitsfehler, der in einer auf der Cloud-Plattform gehosteten
> Version der Software entdeckt wird, auf alle von Odoo SA
> kontrollierten Systemen anzuwenden, sobald die entsprechenden Mittel
> verfügbar sind, ohne dass der Kunde manuell eingreifen muss.

### 4.3 Upgrade-Dienste

#### Upgrade-Service für die Software

Während der Laufzeit dieser Vereinbarung kann der Kunde über den
entsprechenden Kanal (in der Regel die Upgrade-Service-Website von Odoo
SA) Upgrade-Anträge stellen, um eine Datenbank der Software von einer
beliebigen Version der Software auf eine neuere unterstützte Version
(die "Zielversion") zu konvertieren.

Bei Nutzung der Cloud-Plattform werden Upgrade-Anträge direkt über das
Bedienfeld der Cloud-Plattform eingereicht und erfordern keinen
Daten-Upload. Im Falle von Self-Hosting müssen Upgrade-Anträge eine
Kopie der Datenbank des Kunden und der zugehörigen Daten enthalten (in
der Regel über das Backup-Menü der Software).

Dieser Service wird über eine automatisierte Plattform bereitgestellt,
um dem Kunden die Ausführung unbeaufsichtigter Upgrades zu ermöglichen,
sobald eine frühere Version der Datenbank des Kunden erfolgreich für
eine unterstützte Version aktualisiert wurde.

Der Upgrade-Service beschränkt sich auf die technische Konvertierung und
Anpassung der Datenbank des Kunden, um sie mit der Zielversion
kompatibel zu machen, auf die Korrektur von Fehlern, die direkt durch
den Upgrade-Vorgang verursacht werden und in der Zielversion
normalerweise nicht auftreten, sowie auf die Konvertierung des
Quellcodes und der Daten der abgedeckten Zusatzmodule für die
Zielversion.

Es liegt in der Verantwortung des Kunden, die aktualisierte Datenbank zu
überprüfen, um Fehler zu erkennen, die Auswirkungen von Änderungen und
neuen Funktionen, die in der Zielversion implementiert sind, zu
analysieren und Erweiterungen von Drittanbietern der Software, die vor
dem Upgrade in der Datenbank installiert waren (z. B. nicht unterstützte
Zusatzmodule), zu konvertieren und für die Zielversion anzupassen. Der
Kunde kann mehrere Upgrade-Anträge für eine Datenbank stellen, bis ein
akzeptables Ergebnis erzielt wird.

### 4.4 Cloud-Hosting-Dienste

Wenn sich der Kunde für die Nutzung der Cloud-Plattform entscheidet,
verpflichtet sich Odoo SA, während der Laufzeit dieser Vereinbarung
mindestens folgendes anzubieten:

  - mehrere Hosting-Regionen (mindestens drei: Europa, Amerika,
    Asien/Pazifik)
  - Hosting in Tier-III-Rechenzentren oder gleichwertigen Zentren mit
    einer Netzwerkverfügbarkeit von 99,9%
  - erstklassige SSL (HTTPS) Verschlüsselung der Kommunikation
  - vollautomatische, verifizierte Backups, repliziert in mehreren
    Regionen
  - Notfallplan, regelmäßig getestet

Die Einzelheiten der Cloud-Hosting-Dienste sind in der
Dienstgütevereinbarung unter <https://www.odoo.com/cloud-sla>
beschrieben.

### 4.5 Support-Dienste

#### Umfang

Während der Laufzeit dieser Vereinbarung kann der Kunde eine unbegrenzte
Anzahl von kostenlosen Support-Tickets öffnen, die ausschließlich Fragen
zu Fehlern (siehe `bugfix_de`) oder Anleitungen zur Nutzung der
Standardfunktionen der Software und der unterstützten Zusatzmodule
betreffen.

Andere Supportanfragen, wie z. B. Fragen zur Entwicklung oder zu
Anpassungen, können durch den Erwerb einer separaten Servicevereinbarung
abgedeckt werden. Falls nicht klar ist, ob eine Anfrage von diesem
Vertrag abgedeckt ist, liegt die Entscheidung im Ermessen von Odoo SA.

#### Verfügbarkeit

Tickets können über das Webformular oder die auf <https://odoo.com/help>
aufgeführten Telefonnummern eingereicht werden, oder, wenn Sie mit einem
Odoo-Partner zusammenarbeiten, über den von diesem bereitgestellten
Kanal, abhängig von den örtlichen Öffnungszeiten.

### 4.6 Zusammenarbeit mit einem Odoo-Partner

Für Fehlerbehebungen, Support- und Upgrade-Leistungen kann der Kunde
entweder mit einem Odoo-Partner als Hauptansprechpartner oder direkt mit
Odoo SA zusammenarbeiten.

Entscheidet sich der Kunde für die Zusammenarbeit mit einem
Odoo-Partner, beauftragt Odoo SA diesen mit Dienstleistungen im
Zusammenhang mit den unterstützten Zusatzmodulen. Der Odoo-Partner kann
sich im Namen des Kunden an Odoo SA wenden, um in Bezug auf die
Standardfunktionen der Software Second Level Support zu erhalten.

Entscheidet sich der Kunde dafür, direkt mit Odoo SA zusammenzuarbeiten,
werden Dienstleistungen im Zusammenhang mit unterstützten Zusatzmodulen
*ausschließlich* dann erbracht, wenn der Kunde auf der Odoo
Cloud-Plattform gehostet wird.

## 5\. Kosten und Gebühren

### 5.1 Standardkosten

Die Standardkosten für das Odoo Enterprise Abonnement und die
Dienstleistungen basieren auf der Anzahl der Benutzer und der
installierten Apps, die der Kunde nutzt, und werden bei
Vertragsabschluss schriftlich festgehalten.

Wenn der Kunde während der Laufzeit eine höhere Anzahl an Benutzern oder
installierten Apps nutzt, als zum Zeitpunkt des Vertragsabschlusses
angegeben, stimmt der Kunde zu, hierfür für den Rest der Laufzeit eine
zusätzliche Gebühr in Höhe des zu Beginn der Laufzeit geltenden
Listenpreises zu zahlen.

Darüber hinaus werden die Kosten der Dienstleistungen im Zusammenhang
mit unterstützten Zusatzmodulen basierend auf der Anzahl der Codezeilen
in diesen Modulen berechnet. Entscheidet sich der Kunde für die Wartung
von unterstützten Zusatzmodulen, beträgt die Gebühr monatlich 16,00 €
pro 100 Codezeilen (aufgerundet auf die nächsten Hundert), sofern bei
Vertragsabschluss nichts anderes schriftlich vereinbart wurde.
Codezeilen werden mit dem cloc-Befehl der Software gezählt und umfassen
alle Textzeilen im Quellcode dieser Module, unabhängig von der
Programmiersprache (Python, Javascript, XML etc.), ausgenommen
Leerzeilen, Kommentarzeilen und Dateien, die bei der Installation oder
Ausführung der Software nicht geladen werden.

Wenn der Kunde ein Upgrade beantragt, kann Odoo SA für jedes
unterstützte Zusatzmodul, das in den letzten 12 Monaten nicht durch
eine Wartungsgebühr abgedeckt wurde, eine einmalige Zusatzgebühr von
16,00 € pro 100 Codezeilen für jeden fehlenden Abdeckungsmonat erheben.

### 5.2 Verlängerungsgebühren

Bei einer Verlängerung gemäß Abschnitt `term_de` erhöhen sich die
Gebühren um bis zu 7 %, wenn die während der vorherigen Laufzeit
erhobenen Gebühren (mit Ausnahme etwaiger "Erstnutzerrabatte") unter dem
jeweils gültigen Listenpreis liegen.

### 5.3 Steuern

Alle Gebühren und Entgelte verstehen sich zuzüglich aller anwendbaren
Bundes-, Landes-, Staats-, Kommunal- oder sonstigen staatlichen Steuern,
Gebühren oder Abgaben (zusammenfassend "Steuern"). Der Kunde ist für die
Zahlung aller Steuern verantwortlich, die mit seinen im Rahmen dieser
Vereinbarung getätigten Käufen verbunden sind, es sei denn, Odoo SA ist
gesetzlich zur Zahlung oder Erhebung von Steuern verpflichtet, für die
der Kunde verantwortlich ist.

## 6\. Dienstleistungsbedingungen

### 6.1 Verpflichtungen des Kunden

Der Kunde verpflichtet sich:

  - Odoo SA alle anfallenden Gebühren für die Dienstleistungen dieser
    Vereinbarung gemäß den bei der Unterzeichnung dieses Vertrages
    festgelegten Zahlungsbedingungen zu zahlen;
  - Odoo SA unverzüglich zu benachrichtigen, wenn die tatsächliche
    Anzahl der Benutzer oder der installierten Apps die bei
    Vertragsabschluss angegebene Anzahl übersteigt, und in diesem Fall
    die entsprechende Zusatzgebühr zu entrichten, wie in Abschnitt
    `charges_standard_de` beschrieben;
  - alle erforderlichen Maßnahmen zu ergreifen, um die unveränderte
    Ausführung des Teils der Software zu gewährleisten, der die
    Gültigkeit der Nutzung der Odoo Enterprise Edition prüft, wie in
    `enterprise_access_de` beschrieben;
  - einen festen Ansprechpartner für die gesamte Laufzeit des
    Vereinbarung zu benennen;
  - Odoo SA den Wechsel seines Hauptansprechpartners zu einem anderen
    Odoo-Partner oder zu einer direkten Zusammenarbeit mit Odoo SA 30
    Tage vorher schriftlich mitzuteilen.

Wenn sich der Kunde für die Nutzung der Cloud-Plattform entscheidet,
erklärt er sich außerdem damit einverstanden:

  - alle angemessenen Maßnahmen zu ergreifen, um die Sicherheit seiner
    Benutzerkonten zu gewährleisten, einschließlich der Wahl eines
    sicheren Passworts und der Nichtweitergabe dieses Passworts an
    andere Personen;
  - die Hosting-Dienste in angemessener Weise und unter Ausschluss
    jeglicher illegaler oder missbräuchlicher Aktivitäten zu nutzen und
    sich strikt an die Regeln zu halten, die in der unter
    <https://www.odoo.com/acceptable-use> veröffentlichten Acceptable
    Use Policy (Nutzungsrichtlinien) aufgeführt sind.

Sollte der Kunde die Self-Hosting-Option gewählt haben, erklärt er sich
des weiteren dazu bereit:

  - alle angemessenen Maßnahmen zu ergreifen, um seine Dateien und
    Datenbanken zu schützen, wobei Odoo SA nicht für Datenverluste
    haftbar gemacht werden kann;
  - Odoo SA den notwendigen Zugang zu gewähren, um die Gültigkeit der
    Nutzung der Odoo Enterprise Edition auf Anfrage überprüfen zu können
    (z.B. wenn die automatische Validierung für den Kunden nicht
    funktioniert)

### 6.2 Verzicht auf Abwerbung oder Einstellung

Falls schriftlich nicht anders vereinbart, verpflichten sich die
Parteien, ihre verbundenen Unternehmen und Vertreter, für die Dauer der
Vereinbarung und für einen Zeitraum von 12 Monaten ab dem Datum der
Beendigung oder des Ablaufs dieser Vereinbarung keinen Mitarbeiter der
anderen Partei, der an der Erbringung oder Nutzung der Dienstleistungen
im Rahmen dieser Vereinbarung beteiligt ist, abzuwerben oder ihm eine
Beschäftigung anzubieten. Im Falle eines Verstoßes gegen die Bedingungen
dieses Abschnitts, der zum Austritt des Mitarbeiters führt, verpflichtet
sich die verletzende Partei, der anderen Partei einen Betrag von
30.000,00 € (dreißigtausend Euro) zu zahlen.

### 6.3 Werbung

Sofern nicht anders schriftlich mitgeteilt, gewährt jede Partei der
anderen eine nicht übertragbare, nicht exklusive, gebührenfreie,
weltweite Lizenz, den Namen, die Logos und die Marken der anderen Partei
zu reproduzieren und darzustellen, und zwar ausschließlich zu dem Zweck,
auf die andere Partei als Kunden oder Lieferanten zu verweisen, und zwar
auf Websites, in Pressemitteilungen und anderen Marketingmaterialien.

### 6.4 Vertraulichkeit

  - Definition "Vertrauliche Informationen":  
    Alle von einer Partei (der "offenlegenden Partei") der anderen
    Partei (der "empfangenden Partei") mündlich oder schriftlich
    offengelegten Informationen, die als vertraulich bezeichnet werden
    oder die angesichts Ihrer Beschaffenheit und der Umstände der
    Offenlegung als vertraulich zu verstehen sind. Als vertraulich sind
    insbesondere alle Informationen zu betrachten, die sich auf die
    Geschäfte, Angelegenheiten, Produkte, Entwicklungen,
    Geschäftsgeheimnisse, das Know-how, die Mitarbeiter, Kunden und
    Lieferanten einer der Parteien beziehen.

Für alle vertraulichen Informationen, die die empfangende Partei während
der Laufzeit dieser Vereinbarung erhält, wendet sie die gleiche Sorgfalt
an wie für den Schutz der Vertraulichkeit ihrer eigenen ähnlich
vertraulichen Informationen, sofern es sich um ein Mindestmaß an
Sorgfalt handelt.

Die empfangende Partei darf vertrauliche Informationen der offenlegenden
Partei veröffentlichen, soweit sie gesetzlich dazu gezwungen ist,
vorausgesetzt, die empfangende Partei unterrichtet die offenlegende
Partei vorher über die erzwungene Offenlegung, soweit dies gesetzlich
zulässig ist.

### 6.5 Datenschutz

  - Definitionen  
    "Personenbezogene Daten", "Verantwortliche" und
    "Auftragsverarbeiter" haben dieselbe Bedeutung wie in der Verordnung
    (EU) 2016/679 und der Richtlinie 2002/58/EG sowie in allen
    Verordnungen oder Rechtsvorschriften, die diese ändern oder ersetzen
    (im Folgenden als "Datenschutzgesetzgebung" bezeichnet).

#### Verarbeitung von personenbezogenen Daten

Die Parteien erkennen an, dass die Datenbank des Kunden personenbezogene
Daten enthalten kann, für die der Kunde verantwortlich ist. Diese Daten
werden von Odoo SA verarbeitet, wenn der Kunde dies anweist, indem er
eine der Dienstleistungen nutzt, für die eine Datenbank erforderlich ist
(z. B. Cloud-Hosting-Dienste oder Datenbank-Upgrade-Service), oder wenn
der Kunde seine Datenbank oder einen Teil seiner Datenbank aus
irgendeinem Grund im Zusammenhang mit dieser Vereinbarung an Odoo SA
überträgt.

Diese Verarbeitung erfolgt in Übereinstimmung mit der
Datenschutzgesetzgebung. Insbesondere verpflichtet sich Odoo SA dazu:

  - (a) die personenbezogenen Daten nur zu verarbeiten, wenn und wie sie
    vom Kunden angewiesen werden, und zwar zum Zweck der Erbringung
    einer der Dienstleistungen im Rahmen dieser Vereinbarung, es sei
    denn, dies ist gesetzlich vorgeschrieben; in diesem Fall wird Odoo
    SA den Kunden vorher informieren, es sei denn, das Gesetz verbietet
    dies;
  - (b) sicherzustellen, dass alle Personen innerhalb von Odoo SA, die
    zur Verarbeitung der personenbezogenen Daten befugt sind, sich zur
    Vertraulichkeit verpflichtet haben;
  - (c) angemessene technische und organisatorische Maßnahmen zu
    ergreifen und einzuhalten, um die personenbezogenen Daten vor
    unbefugter oder unrechtmäßiger Verarbeitung und vor versehentlichem
    Verlust, Zerstörung, Beschädigung, Diebstahl, Änderung oder
    Offenlegung zu schützen;
  - d) alle Datenschutzanfragen, die an Odoo SA in Bezug auf die
    Datenbank des Kunden gestellt werden, unverzüglich an den Kunden
    weiterzuleiten;
  - (e) den Kunden unverzüglich zu benachrichtigen, sobald Odoo SA von
    einer versehentlichen, unbefugten oder rechtswidrigen Verarbeitung,
    Offenlegung oder einem Zugriff auf die personenbezogenen Daten
    erfährt und dies bestätigt;
  - (f) den Kunden zu benachrichtigen, wenn die Verarbeitungsanweisungen
    nach Ansicht von Odoo SA gegen die geltende Datenschutzgesetzgebung
    verstoßen;
  - (g) dem Kunden alle Informationen zur Verfügung zu stellen, die
    erforderlich sind, um die Einhaltung der Datenschutzgesetzgebung
    nachzuweisen, und Prüfungen, einschließlich Inspektionen, die vom
    Kunden durchgeführt oder in Auftrag gegeben werden, zuzulassen und
    in angemessener Weise dazu beizutragen;
  - (h) je nach Wahl des Kunden, alle Kopien der Datenbank des Kunden,
    die sich im Besitz von Odoo SA befinden, bei Beendigung dieser
    Vereinbarung entweder dauerhaft zu löschen oder zurückzugeben, unter
    Einhaltung der in der
    [Datenschutzrichtlinie](https://www.odoo.com/de_DE/privacy) von Odoo
    SA genannten Fristen

In Bezug auf die Punkte (d) bis (f) verpflichtet sich der Kunde, Odoo SA
jederzeit genaue Kontaktinformationen zur Verfügung zu stellen, die für
die Benachrichtigung des Datenschutzbeauftragten des Kunden erforderlich
sind.

#### Unterauftragsverarbeiter

Der Kunde nimmt zur Kenntnis und erklärt sich damit einverstanden, dass
Odoo SA zur Erbringung der Dienstleistungen Dritte
(Unterauftragsverarbeiter) mit der Verarbeitung personenbezogener Daten
beauftragt. Odoo SA verpflichtet sich, Unterauftragsverarbeiter nur in
Übereinstimmung mit der Datenschutzgesetzgebung einzusetzen. Diese
Nutzung wird durch einen Vertrag zwischen Odoo SA und dem
Unterauftragsverarbeiter abgedeckt, der entsprechende Garantien enthält.
Die Datenschutzrichtlinie von Odoo SA, die unter
<https://www.odoo.com/privacy> veröffentlicht ist, enthält aktuelle
Informationen zu den Namen und Zwecken der Unterauftragsverarbeiter, die
Odoo SA derzeit für die Erbringung der Dienstleistungen einsetzt.

### 6.6 Beendigung

Für den Fall, dass eine der Parteien eine ihrer Verpflichtungen aus
diesem Vertrag nicht erfüllt und diese Verletzung nicht innerhalb von 30
Kalendertagen nach der schriftlichen Benachrichtigung über diese
Verletzung behoben wird, kann diese Vereinbarung umgehend von der nicht
verletzenden Partei gekündigt werden.

Ferner kann Odoo SA den Vertrag mit sofortiger Wirkung kündigen, sollte
der Kunde die für die Dienstleistungen anfallenden Gebühren innerhalb
von 21 Tagen nach dem auf der entsprechenden Rechnung angegebenen
Fälligkeitsdatum und nach mindestens drei Mahnungen nicht bezahlt
haben.

  - Fortgeltende Bestimmungen:  
    Die Abschnitte `confidentiality_de`, `disclaimers_de`,
    `liability_de` und `general_provisions_de` gelten auch nach
    Beendigung oder Ablauf dieser Vereinbarung.

## 7\. Garantien, Haftungsausschlüsse, Haftung

### 7.1 Garantien

Odoo SA besitzt das Urheberrecht oder ein gleichwertiges Recht\[1\] an
100 % des Codes der Software und bestätigt, dass alle
Softwarebibliotheken, die für die Nutzung der Software erforderlich
sind, unter einer mit der Softwarelizenz kompatiblen Lizenz verfügbar
sind.

Odoo SA verpflichtet sich für die Dauer dieser Vereinbarung,
Dienstleistungen nach wirtschaftlich vertretbarem Aufwand in
Übereinstimmung mit den allgemein anerkannten Branchenstandards
auszuführen, vorausgesetzt, dass:

  - die Computersysteme des Kunden sich in einem guten Betriebszustand
    befinden und die Software bei Self-Hosting in einer geeigneten
    Betriebsumgebung installiert ist;
  - der Kunde angemessene Informationen zur Fehlerbehebung zur Verfügung
    stellt und Odoo SA im Falle von Self-Hosting jeden nötigen Zugang
    gewährt, um Probleme zu identifizieren, zu reproduzieren und zu
    beheben;
  - alle an Odoo SA geschuldeten Beträge bezahlt wurden.

Das einzige und ausschließliche Rechtsmittel des Kunden und die einzige
Verpflichtung von Odoo SA bei einem Verstoß gegen diese Garantie besteht
darin, dass Odoo SA die Ausführung der Dienstleistungen ohne zusätzliche
Kosten wieder aufnimmt.

### 7.2 Haftungsausschlüsse

Sofern nicht ausdrücklich in diesem Dokument vorgesehen, übernimmt keine
der Parteien irgendeine Garantie, sei es ausdrücklich, stillschweigend,
gesetzlich oder anderweitig, und jede Partei lehnt ausdrücklich alle
stillschweigenden Garantien ab, einschließlich jeglicher
stillschweigenden Garantie der Marktgängigkeit, Eignung für einen
bestimmten Zweck oder Nichtverletzung von Rechten Dritter, soweit dies
nach geltendem Recht zulässig ist.

Odoo SA übernimmt keine Garantie dafür, dass die Software mit lokalen
oder internationalen Gesetzen oder Vorschriften konform ist.

### 7.3 Haftungsbeschränkung

Soweit gesetzlich zulässig, übersteigt die Gesamthaftung jeder Partei
zusammen mit ihren verbundenen Unternehmen, die sich aus dieser
Vereinbarung ergibt oder mit ihr in Zusammenhang steht, nicht 50 % des
Gesamtbetrags, den der Kunde im Rahmen dieser Vereinbarung in den 12
Monaten unmittelbar vor dem Datum des Ereignisses, das einen solchen
Anspruch begründet, gezahlt hat. Mehrfachansprüche führen nicht zu einer
Ausweitung dieser Begrenzung.

In keinem Fall haften die Parteien oder ihre verbundenen Unternehmen für
indirekte, besondere, exemplarische, zufällige oder Folgeschäden
jeglicher Art, einschließlich, aber nicht beschränkt auf
Einnahmeverluste, Gewinne, Einsparungen, Geschäftsverluste oder andere
finanzielle Verluste, Kosten für Stockungen oder Verzögerung, verlorene
oder beschädigte Daten, die sich aus oder in Verbindung mit dieser
Vereinbarung ergeben, unabhängig von der Form der Klage, ob auf
vertraglicher Basis, aufgrund unerlaubter Handlung (einschließlich
strikter Fahrlässigkeit) oder einer anderen rechtlichen oder
gerechtfertigten Grundlage, selbst wenn eine Partei oder ihre Partner
auf die Möglichkeit solcher Schäden hingewiesen wurden oder wenn das
Rechtsmittel einer Partei oder ihrer Partner auf andere Weise seinen
wesentlichen Zweck verfehlt.

### 7.4 Höhere Gewalt

Keine der Parteien haftet gegenüber der anderen Partei für die
Verzögerung oder das Nichterbringen einer Leistung aus dieser
Vereinbarung, wenn die Ursache für die Verzögerung oder das
Nichterbringen auf höhere Gewalt zurückzuführen ist, wie z. B.
behördliche Vorschriften, Feuer, Streik, Krieg, Überschwemmung, Unfall,
Epidemie, Embargo, vollständige oder teilweise Aneignung von Anlagen
oder Produkten durch eine Regierung oder Behörde oder andere Ursachen
gleicher oder anderer Art, die außerhalb der zumutbaren Kontrolle der
betreffenden Partei liegen, solange diese Ursachen bestehen.

## 8\. Allgemeine Bestimmungen

### 8.1 Geltendes Recht

Diese Vereinbarung und alle Kundenaufträge unterliegen dem belgischen
Recht. Alle Streitigkeiten, die sich aus oder im Zusammenhang mit dieser
Vereinbarung oder einem Kundenauftrag ergeben, unterliegen der
ausschließlichen Zuständigkeit des Handelsgerichts von Nivelles.

### 8.2 Salvatorische Klausel

Sollten eine oder mehrere Bestimmungen dieser Vereinbarung oder ihrer
Anwendung ungültig, rechtswidrig oder nicht durchsetzbar sein, so wird
die Gültigkeit, Rechtmäßigkeit und Durchsetzbarkeit der übrigen
Bestimmungen dieser Vereinbarung und ihrer Anwendung dadurch in keiner
Weise berührt oder beeinträchtigt. Beide Parteien verpflichten sich,
jede ungültige, rechtswidrige oder nicht durchsetzbare Bestimmung dieser
Vereinbarung durch eine gültige Bestimmung zu ersetzen, die die gleichen
Auswirkungen und Ziele hat.

## 9\. Anhang A: Odoo Enterprise Edition-Lizenz

<div class="only">

latex

Die Odoo Enterprise Edition ist unter nachstehend definierten der Odoo
Enterprise Edition Lizenz v1.0 lizenziert:

<div class="literalinclude">

../../licenses/enterprise\_license.txt

</div>

</div>

<div class="only">

html

Siehe `odoo_enterprise_license`.

</div>

1.  Externe Beiträge sind durch einen
    [Copyright-Lizenzvertrag](https://www.odoo.com/cla) abgedeckt, der
    Odoo SA eine dauerhafte, kostenlose und unwiderrufliche Copyright-
    und Patentlizenz gewährt.


---
## File: ./content/legal/terms/i18n/enterprise_tex_es.md

  - nosearch

  - orphan

<div class="toctree" data-maxdepth="4" hidden="">

enterprise\_es

</div>


---
## File: ./content/legal/terms/i18n/terms_of_sale_es.md

# Términos Generales de Venta

<div class="only">

html

[Descargar
PDF](https://www.odoo.com/documentation/%7BCURRENT_BRANCH%7D/terms_of_sale_es.pdf)

</div>

<div class="note">

<div class="title">

Note

</div>

Última revisión: 12 de septiembre de 2023.

</div>

Estos Términos Generales de Venta rigen la venta de productos y
servicios por parte de Odoo S.A. y sus filiales (en adelante denominadas
conjuntamente "Odoo S.A.") al cliente. Para los servicios proporcionados
por Odoo S.A., pueden aplicarse términos adicionales (por ejemplo, el
Acuerdo de suscripción de Odoo Enterprise). Si estos términos
adicionales son inconsistentes con los Términos Generales de Venta,
prevalecerán sobre estos Términos Generales de Venta.

Lea estos términos detenidamente antes de realizar un pedido a Odoo S.A.
Al aceptar un pedido con Odoo S.A., el cliente manifiesta su aceptación
de estos términos.

El cliente renuncia explícitamente a sus propias condiciones y términos
estándar, incluso si estos se redactaron después de estos términos y
condiciones estándar de venta. Para que una derogación sea válida, debe
acordarse expresamente por adelantado por escrito.

Nuestras facturas son pagaderas en un plazo de 21 días laborables, a
menos que en la factura o el pedido se indique otro plazo de pago. En
caso de falta de pago en la fecha de vencimiento, Odoo S.A. se reserva
el derecho de solicitar un pago de intereses fijos del 15% sobre la suma
pendiente. Odoo S.A. estará autorizada a suspender la prestación de
servicios sin previo aviso en caso de retraso en el pago.

Si un pago aún está pendiente más de sesenta (60) días después de la
fecha de vencimiento, Odoo S.A. se reserva el derecho de recurrir a los
servicios de una empresa de recuperación de deudas. Todos los gastos
legales serán a cargo del cliente.

En algunos países se aplica la retención en la fuente sobre el monto de
las facturas, de acuerdo con su legislación interna. Cualquier retención
en la fuente será pagada por el cliente a las autoridades fiscales. En
ningún caso Odoo S.A. podrá involucrarse en los costos relacionados con
la legislación de un país. El monto de la factura, por lo tanto, será
debido a Odoo S.A. en su totalidad y no incluye ningún costo relacionado
con la legislación del país en el que se encuentra el cliente.

Para clientes con presencia global, la tarificación aplicable siempre se
basa en la ubicación del cliente con la lista de precios más alta, a
menos que se especifique lo contrario por escrito en el momento de la
compra.

Las Suscripciones Mensuales solo están disponibles para alojamiento en
la Plataforma en la Nube (Odoo SaaS y Odoo SH). El pago de las
Suscripciones Mensuales solo puede realizarse con tarjeta de crédito o
un método de débito automático equivalente admitido. Odoo S.A. se
reserva el derecho de rechazar cualquier Suscripción Mensual que no
cumpla con estas condiciones.

Odoo S.A. se compromete a hacer lo posible para suministrar los
servicios a tiempo de acuerdo con los plazos acordados. Sin embargo,
ninguna de sus obligaciones puede considerarse como una obligación de
lograr resultados. Odoo S.A. no puede, bajo ninguna circunstancia, ser
requerida por el cliente para aparecer como tercero en el contexto de
cualquier reclamación por daños presentada contra el cliente por un
consumidor final.

Para que sea admisible, Odoo S.A. debe ser notificada de cualquier
reclamación mediante una carta enviada por correo certificado a su sede
registrada dentro de los 8 días posteriores a la entrega de los bienes o
la prestación de los servicios.

En la medida máxima permitida por la ley, la responsabilidad agregada de
cada parte junto con sus filiales que surja no superará el 50% del monto
total pagado por el Cliente en virtud de estos términos durante los 12
meses inmediatamente anteriores a la fecha del evento que dé lugar a
dicha reclamación. Múltiples reclamaciones no ampliarán esta limitación.

Odoo S.A. se reserva el derecho de modificar estos términos en cualquier
momento sin previo aviso. El cliente estará sujeto a los términos
vigentes en el momento de la aceptación de dichos términos.

Todas nuestras relaciones contractuales estarán reguladas exclusivamente
por la ley belga. Además, cualquier disputa que pueda surgir estará
sujeta exclusivamente a la jurisdicción de los tribunales del distrito
de Nivelles (Bélgica).


---
## File: ./content/legal/terms/i18n/enterprise_tex_fr.md

  - nosearch

  - orphan

<div class="toctree" data-maxdepth="4" hidden="">

enterprise\_fr

</div>


---
## File: ./content/legal/terms/i18n/enterprise_tex_nl.md

  - nosearch

  - orphan

<div class="toctree" data-maxdepth="4" hidden="">

enterprise\_nl

</div>


---
## File: ./content/legal/terms/i18n/enterprise_tex_de.md

  - nosearch

  - orphan

<div class="toctree" data-maxdepth="4" hidden="">

enterprise\_de

</div>


---
## File: ./content/legal/terms/i18n/enterprise_es.md

# Acuerdo de suscripción de Odoo Enterprise

<div class="only">

html

[Download
PDF](https://www.odoo.com/documentation/%7BCURRENT_BRANCH%7D/odoo_enterprise_agreement_es.pdf)

</div>

<div class="note">

<div class="title">

Note

</div>

Version 10a - 2022-10-27

</div>

Al suscribirse a los servicios de Odoo Enterprise (en adelante “los
Servicios”) proporcionados por Odoo SA y sus filiales (en adelante
denominadas conjuntamente “Odoo SA”), relacionados con las versiones
Odoo Enterprise o Odoo community (en adelante “el Software”) y alojados
en los servidores de la nube de Odoo SA (en adelante “Servicio en la
Nube”) o en servidores locales (en adelante “Auto-hospedaje”), usted (en
adelante “el Cliente”) acepta los términos y condiciones establecidos a
continuación (en adelante “el Acuerdo”).

## 1 Término del Acuerdo

La duración de la suscripción (en adelante el “Plazo”) será indicada por
escrito en este Acuerdo, y comenzará a partir de la fecha de firma del
Acuerdo. La suscripción se considerará renovada automáticamente por un
período igual al Plazo estipulado originalmente, salvo que alguna de las
partes del Acuerdo proporcione un aviso por escrito expresando su deseo
de culminar los Servicios al menos 30 días antes de la fecha de
culminación del Acuerdo.

## 2 Definiciones

  - Usuario  
    El término usuario hace referencia a cualquier cuenta de usuario
    identificada como activa en el Software, con potestates de creación
    y/o edición. No se consideran como Usuarios a las cuentas
    desactivadas y aquellas cuentas utilizadas por personas (o sistemas)
    que solo tienen acceso limitado al Software a través del portal del
    usuario.

  - Aplicación  
    Una ‘Aplicación’ es un grupo especializado de funciones disponibles
    para ser instaladas en el Software.

  - Partner de Odoo  
    Un ‘Partner’ de Odoo es una empresa o individuo externo a Odoo SA
    que ofrece servicios relacionados con el Software, y quien ha sido
    seleccionado por el Cliente para trabajar directamente con él. En
    cualquier momento, el cliente puede decidir trabajar con un Partner
    diferente o con Odoo SA directamente (sujeto a previo aviso).

  - Módulo Adicional  
    Un Módulo Adicional es un directorio de archivos de código fuente, o
    un conjunto de personalizaciones basadas en lenguaje de programación
    Python, creadas en una base de datos (por ejemplo, con Odoo Studio),
    que agrega características o cambia el comportamiento estándar de
    Software. Pueden haber sido desarrolladas por el Cliente, por Odoo
    SA, por un Partner de Odoo en nombre del Cliente o por terceros.

  - Módulo Adicional Cubierto  
    Un Módulo Adicional Cubierto es un Módulo Adicional por el cual el
    Cliente ha elegido pagar un costo de mantenimiento con el fin de
    obtener servicios de soporte, actualizaciones y corrección de Bugs.

  - Bug  
    Se considera un Bug cualquier falla del Software o de un Módulo
    Adicional Cubierto que resulte en una parada completa, mensaje de
    error de fallo, o un fallo de seguridad, y que no es causado
    directamente por una instalación o configuración defectuosa. El
    incumplimiento de algunas especificaciones o requisitos será
    considerado como un Bug a la discreción de Odoo SA (por ejemplo,
    cuando el Software no cumple con el comportamiento ni los resultados
    para el cual fue diseñado, o cuando una característica específica
    del país deja de cumplir los requisitos legales de contabilidad).

  - Versiones Cubiertas  
    A menos que se especifique lo contrario, los Servicios
    proporcionados por en virtud de este Acuerdo son únicamente
    aplicables a las versiones cubiertas del Software, las cuales
    incluyen las últimas tres (3) versiones publicadas.

  - Plan de Suscripción  
    Un Plan de Suscripción define un conjunto de Aplicaciones, funciones
    y soluciones de alojamiento cubiertas por este Acuerdo, y se define
    por escrito al concluir este Acuerdo.

## 3 Acceso al Software

El Cliente puede hacer uso del Software alojado en la nube o instalar el
Software en un servidor propio. La plataforma en la nube es ofrecida y
administrada en su totalidad por Odoo SA, y el Cliente puede acceder a
ella de forma remota. Si el cliente elige la opción de instalar el
Software en un servidor propio o un sistema informático de su elección,
Odoo SA no tendrá control sobre el Software.

Durante la vigencia de este Acuerdo, Odoo SA le otorga al Cliente una
licencia no exclusiva e intransferible para usar (ejecutar, modificar,
ejecutar después de las modificaciones) el Software, bajo los términos
establecidos en el Anexo A: Licencia de la versión Enterprise de Odoo.

El Cliente acepta tomar todas las medidas necesarias para garantizar que
no se modificará la parte del Software que ejecuta y verifica el uso y
la recolección de estadísticas válidas, incluyendo pero sin limitarse a
la ejecución de una instancia, el número de usuarios, las aplicaciones
instaladas y el número de líneas de códigos incluidas en los Módulos
Adicionales Cubiertos.

Odoo SA se compromete a no divulgar cifras individuales o mencionadas a
terceros sin el consentimiento del Cliente, y a tratar todos los datos
recopilados de conformidad con la Política de Privacidad oficial
publicada en [Odoo Privacy](https://www.odoo.com/privacy/)

Después de la expiración o terminación de este Acuerdo, la licencia
concedida al Cliente será revocada inmediatamente y el Cliente acepta
dejar de usar el Software, especialmente la versión Odoo Enterprise, y
la plataforma en la nube.

En caso de que exista algún incumplimiento por parte del Cliente a los
términos de esta sección, el Cliente acuerda indemnizar a Odoo SA una
cuota adicional equivalente al 300% del precio aplicable por el número
actual de usuarios.

## 4 Servicios

### 4.1 Servicio de corrección de Bugs

Durante la vigencia de este Acuerdo, Odoo SA se compromete a hacer todos
los esfuerzos razonables para remediar cualquier Bug presente en el
Software y los Módulos Adicionales Cubiertos, que haya reportado el
Cliente a través del medio apropiado (como el formulario del sitio web o
vía llamada telefónica a los numeros enlistados en [Odoo
Help](https://www.odoo.com/help/), o cuando se trabaja con un Partner a
través del medio establecido por el Partner), y a manejar las
solicitudes del Cliente dentro de 2 días hábiles posteriores a la
creación del reporte por parte del Cliente.

El Cliente recibirá una notificación de la solución adecuada una vez se
haya solucionado el Bug. En caso que el Cliente esté usando una versión
cubierta, no se le pedirá que actualice el Software a una versión más
reciente como solución a un Bug.

Cuando se corrige un Bug de cualquiera de las versiones cubiertas, Odoo
SA se compromete a corregir el error en todas las versiones cubiertas
más recientes del software.

Las partes de este Acuerdo reconocen que Odoo SA no es responsable de
los Bugs en el Software o en los Módulos Adicionales Cubiertos de
conformidad con lo establecido en la sección 7.3 de este Acuerdo y en la
licencia del Software.

### 4.2 Servicio de actualizaciones de seguridad

#### Hospedaje en servidores propios

Durante la vigencia de este Acuerdo, Odoo SA se compromete a enviar un
“Aviso de Seguridad” al Cliente al identificar algún Bug de seguridad
en las versiones cubiertas del Software (excluyendo módulos
adicionales), al menos 2 semanas antes de hacer público el Aviso de
Seguridad, al menos que el Bug ya haya sido revelado públicamente por
algún tercero. Los Avisos de Seguridad pueden incluir una descripción
completa del Bug, sus causas, el posible impacto en los sistemas del
Cliente y la respectiva solución para cada una de las versiones
cubiertas del Software.

El Cliente entiende que el Bug y la información establecida en el Aviso
de Seguridad deben ser tratados como Información Confidencial de acuerdo
a lo descrito en la sección `confidentiality_es` del presente Acuerdo,
hasta la fecha de publicación del Aviso de Seguridad.

#### Plataforma en la nube

En el momento que exista una medida de seguridad, Odoo SA se compromete
a aplicar dicha medida de seguridad ante cualquier Bug que comprometa la
seguridad del Software, siempre y cuando este Bug haya sido encontrado
en la versión de Odoo Enterprise alojada en la nube y en todos los
sistemas bajo el control de esta plataforma, sin requerir de alguna
acción manual por parte del Cliente.

### 4.3 Servicios de actualización

#### Servicio de actualización para el software

Durante la vigencia de este Acuerdo, el Cliente puede solicitar la
actualización de su versión del Software a través del medio apropiado
(generalmente a través de la sección de servicios de actualizaciones del
sitio web de Odoo SA), con la finalidad de actualizar la base de datos
del Software que tiene a una versión más reciente de las versiones
cubiertas (en adelante la “Versión Deseada”).

Las solicitudes de actualización de los Clientes que usan los servicios
en la nube deben ser solicitadas directamente desde el panel de control
de la Plataforma en la nube y no requieren ninguna data adicional. Para
servicios de hospedaje en servidores locales, el Cliente debe incluir
una copia de su base de datos y de la data asociada para realizar la
solicitud (usualmente esta información se obtiene del menú de respaldo
del Software).

Este servicio se proporciona a través de una plataforma automatizada que
le permite al Cliente realizar actualizaciones sin asistencia una vez
que una versión anterior de la base de datos del Cliente ha sido
exitosamente actualizada a una versión cubierta.

El Servicio de Actualización se limita a la conversión técnica y
adaptación de la base de datos del Cliente para hacerla compatible con
la Versión Deseada, y la corrección de cualquier Bug causado
directamente por la operación de actualización que no ocurre usualmente
en la Versión Deseada.

El Cliente tiene la responsabilidad de verificar y validar la base de
datos actualizada para detectar Bugs, analizar e impacto de los cambios
y las nuevas funcionalidades implementadas en la Versión Deseada, y de
convertir y adaptar cualquier extensión del Software desarrollada por
terceros que haya sido instalada antes de la actualización a la Versión
Deseada (por ejemplo, módulos adicionales sin mantenimiento de Odoo). El
Cliente puede enviar múltiples solicitudes de actualización de una base
de datos hasta que se haya logrado un resultado aceptable.

### 4.4 Servicios de alojamiento en la nube

Si el Cliente decide alojar sus datos en la Plataforma en la Nube, Odoo
SA se compromete a proporcionar los siguientes servicios durante la
vigencia de este Acuerdo:

  - Alojamiento de datos en diferentes regiones geográficas (al menos 3:
    Europa, América, Asia/Pacifico);
  - Alojamiento en centros de datos nivel III o equivalentes, con un
    tiempo de actividad de la red del 99.9%;
  - Cifrado de comunicaciones SSL de grado A (HTTPS);
  - Copias de seguridad completamente verificadas y automatizadas,
    duplicadas en múltiples regiones;
  - Plan de Contingencia ante desastres, probado regularmente.

Los detalles de los Servicios de alojamiento de datos en la nube están
descritos en el Acuerdo sobre el nivel del servicio, disponible en
[Cloud SLA](http://www.odoo.com/cloud-sla).

### 4.5 Servicios de soporte

#### Alcance

Durante la vigencia del presente Acuerdo, el Cliente puede crear un
número ilimitado de tickets de soporte sin costos adicionales,
exclusivamente para preguntas relacionadas a Bugs (consultar sección
`bugfix_es`) u orientación en cuanto al uso de las funcionalidades
estándares del Software y de los Módulos Adicionales Cubiertos.

Otras solicitudes de asistencias como preguntas relacionadas con
desarrollos o personalizaciones pueden ser cubiertas mediante otros
servicios a contratar por parte de Odoo SA. En caso que no sea claro si
una solicitud puede ser respondida por el Servicio de soporte, la
decisión queda a discreción de Odoo SA.

#### Disponibilidad

Los tickets de soporte pueden ser enviados a través del formulario en el
sitio web o a los números de contacto que se encuentran en [Odoo
Help](https://www.odoo.com/es_ES/help), o cuando se trabaje con un
Partner, en el canal señalado por el Partner, sujeto a los horarios de
apertura.

### 4.6 Trabajar con un Partner de Odoo

Para la corrección de Bugs, soporte y servicios de actualización, el
Cliente puede trabajar un Partner de Odoo como su principal punto de
contacto, o directamente con Odoo SA.

Odoo SA subcontratará los servicios relacionados a los Módulos
Adicionales Cubiertos al Partner de Odoo, quien se convierte en el
principal punto de contacto del Cliente en caso que el Cliente decida
trabajar con un Partner de Odoo. El Partner de Odoo puede contactar a
Odoo SA en nombre del Cliente para obtener asistencia de segundo nivel
con respecto a las características estándar del Software.

Si el cliente decide trabajar con Odoo SA directamente, los servicios
relacionados con los Módulos Adicionales Cubioertos serán cubiertos por
Odoo SA siempre que el Cliente esté alojado en la plataforma de la nube
de Odoo.

## 5 Cargos y Tarifas

### 5.1 Cargos estándares

Los cargos estándares de la suscripción de Odoo Enterprise y los
Servicios están basados en la cantidad de Usuarios y el Plan de
Suscripción utilizado por el Cliente, y se especifican por escrito al
concluir el Acuerdo.

Si durante el Plazo del Acuerdo, el Cliente tiene más Usuarios o utiliza
funciones que requieren otro Plan de Suscripción diferente al
especificado en el momento de la conclusión de este Acuerdo, el Cliente
acepta pagar una tarifa adicional equivalente al precio aplicable de
conformidad con la lista de precios (en el momento de la desviación del
número especificado de Usuarios o del Plan de Suscripción) por los
Usuarios adicionales o el Plan de Suscripción requerido, por el resto
del Plazo.

Además, los servicios de los Módulos Adicionales Cubiertos se cobran en
función al número de líneas de código de estos módulos. Cuando el
cliente opta por el mantenimiento de Módulos Adicionales Cubiertos, el
costo es una tarifa mensual de 16 € por 100 líneas de código
(redondeadas a las siguientes 100), al menos que se especifique lo
contrario por escrito al celebrar este Acuerdo. Las líneas de código
serán contadas con el comando ‘cloc’ del Software, e incluyen todas las
líneas de texto en el código fuente de esos módulos, independientemente
del lenguaje de programación (Python, Javascript, XML, etc), excluyendo
líneas en blanco, comentarios y archivos que no se cargan al instalar o
ejecutar el software.

Cuando el Cliente solicita una actualización, por cada Módulo Adicional
Cubierto que no haya sido cubierto por los costos de mantenimiento
durante los últimos 12 meses, Odoo SA puede cobrar una tarifa adicional
única, por cada mes faltante de cobertura.

### 5.2 Cargos de renovación

Siguiendo la renovación descrita en la sección `term_es` del presente
Acuerdo, si los cargos aplicados durante el Plazo anterior son más bajos
que el precio aplicable en la lista de precios actual, dichos cargos
podrán aumentar 7% como máximo.

### 5.3 Impuestos

Todas las tarifas y cargos son exclusivos de todos los impuestos,
tarifas o cargos federales, provinciales, estatales, locales o
gubernamentales aplicables (conjuntamente los “Impuestos”). El Cliente
es responsable de pagar todos los Impuestos asociados con las compras
realizadas por el Cliente en virtud de este Acuerdo, excepto cuando Odoo
SA esté legítimamente obligado a pagar o recolectar los Impuestos que el
Cliente debe asumir.

## 6 Condiciones de los servicios

### 6.1 Obligaciones del cliente

El Cliente se compromete a:

  - Pagar a Odoo SA cualquier cargo aplicable por los Servicios del
    presente Acuerdo, según las condiciones de pago especificadas en la
    factura correspondiente;
  - Notificar inmediatamente a Odoo SA cuando su número real de Usarios
    exceda la cantidad especificada al momento de la conclusión del
    Acuerdo, y en este caso, pagar la tarifa adicional aplicable como se
    describe en la sección `charges_standard_es`;
  - Tomar todas las medidas necesarias para garantizar la ejecución no
    modificada de la parte del Software que verifica la validez del uso
    de Odoo Enterprise Edition, como se describe en la sección
    `enterprise_access_es`;
  - Designar a 1 persona de contacto dedicada del Cliente durante toda
    la duración del Acuerdo;
  - Designar a 1 persona de contacto que se dedique al Cliente a lo
    largo de la Duración del Acuerdo;
  - Notificar por escrito a Odoo SA 30 días antes de cambiar el punto
    principal de contacto para trabajar con otro Partner de Odoo o
    directamente con Odoo SA

Cuando el Cliente elige usar la Plataforma en la nube, el Cliente
acuerda además:

  - Tomar todas las medidas razonables para mantener sus cuentas de
    Usuario seguras, incluso al elegir una contraseña segura y no
    compartirla con nadie más;
  - Hacer uso razonable de los servicios de alojamiento, cone xclusiónde
    cualquier actividad ilegal o actividades abusivas, y observar
    estrictamente las reglas descritas en la Política de uso aceptable
    publicada en [acceptable use](https://www.odoo.com/acceptable-use).

Cuando el Cliente elige la opción de Auto-alojamiento, el Cliente acepta
además:

  - Tomar todas las medidas razonables para proteger los archivos y las
    bases de datos del Cliente y para garantizar que los datos del
    Cliente sean seguros y estén protegidos, reconociendo que Odoo SA no
    se hace responsable de ninguna pérdida de datos
  - Otorgar a Odoo SA el acceso necesario para verificar la validez de
    la Edición Enterprise de Odoo uso a solicitud (por ejemplo, si la
    validación automática no es válida para el Cliente).

### 6.2 No solicitar o contratar

Excepto cuando la otra Parte de su consentimiento por escrito, cada una
de las Partes, sus filiales y representantes acuerdan no solicitar u
ofrecer empleo a ningún empleado de la otra Parte que esté involucrado
en la prestación o el uso de los Servicios en virtud de este Acuerdo,
durante la vigencia del Acuerdo y por un periodo de 12 meses a partir de
la fecha de terminación o vencimiento de este Acuerdo. En caso que
ocurra algún incumplimiento de las condiciones de esta sección, se dará
por terminado el contrato con el empleado en cuestión y la Parte que ha
incumplido esta prohibición acuerda indemnizar a la otra Parte la cifra
de treinta mil euros 30.000 EUR (€).

### 6.3 Publicidad

Salvo que se notifique lo contrario por escrito, cada Parte otorga a la
otra una licencia mundial intransferible, no exclusiva, libre de
regalías, para reproducir y mostrar el nombre, logotipos y marcas de la
otra Parte, con el único propósito de referirse a la otra Parte como su
cliente o proveedor, en sitios web, comunicados de prensa y otros medios
de marketing.

### 6.4 Confidencialidad

  - Definición de "Información confidencial":  
    Toda la información divulgada por una de las Partes del presente
    Acuerdo, ya sea oralmente o por escrito, designada como confidencial
    o razonablemente considerada confidencial dada la naturaleza de la
    información y las circunstancias de divulgación. En particular,
    cualquier información relacionada a los negocios, asuntos,
    productos, desarrollos, secretos comerciales, “know-how”, el
    personal, los clientes y los proveedores de cualquiera de las Partes
    del presente Acuerdo, debe ser considerada como confidencial.

Para cualquier tipo de información confidencial recibida durante el
Plazo de este Acuerdo, la Parte que haya recibido la información
confidencial hará uso del mismo grado de precaución que usaría esta
Parte para proteger la confidencialidad de información similar que le
pertenezca con un grado de precaución razonable.

La Parte que haya recibido la información confidencial puede dar a
conocer Información Confidencial de la Parte que haya divulgado dicha
información en la medida en que la ley se lo permita. La Parte que haya
recibido la información confidencial le dará aviso previo a la Parte que
haya divulgado dicha información sobre la información que planea dar a
conocer, en la medida en que la ley se lo permita.

### 6.5 Protección de datos

  - Definiciones  
    Los términos “Datos Personales”, “Responsable del tratamiento”,
    “Tratamiento” tienen los mismos significados que en el Reglamento
    (UE) 2016/679 y la Directiva 2002/58 / CE, y cualquier reglamento o
    legislación que los modifique o sustituya (en adelante, “Legislacion
    de Proteccion de Datos”).

#### Procesamiento de datos personales

Las Partes reconocen que la base de datos del Cliente puede contener
Datos Personales, de los cuales el Cliente es el Responsable del
tratamiento. Esta data será procesada por Odoo SA cuando el Cliente lo
indique, al usar cualquiera de los Servicios que requieran una base de
datos (por ejemplo, el servicio de hospedaje en la nube o los servicios
de actualizaciones), o si el Cliente transfiere su base de datos o una
parte de su base de datos a Odoo SA por cualquier motivo relacionado con
este Acuerdo.

Este procesamiento se realizará de conformidad con la legislación de
protección de datos. En particular, Odoo SA se compromete a:

  - (a) Solo procesar los datos personales cuando y como lo indique el
    Cliente, y para elp ropósito de realizar uno de los Servicios en
    virtud de este Acuerdo, a menos que sea requerido por la ley, en
    cuyo caso, Odoo SA proporcionará un aviso previo al Cliente, a menos
    que la ley lo prohíba;
  - (b) garantizar que todas las personas dentro de Odoo SA” autorizadas
    para procesar los Datos personales estén comprometidos con la
    confidencialidad;
  - (c) implementar y mantener medidas técnicas y organizativas
    adecuadas para proteger los datos personales contra el procesamiento
    no autorizado o ilegal y contra la pérdida accidental, destrucción,
    daño, robo, alteración o divulgación;
  - (d) enviará sin demora al Cliente cualquier solicitud de protección
    de datos que se haya enviado a Odoo SA con respecto a la base de
    datos del Cliente;
  - (e) notificar al Cliente inmediatamente al momento de conocer y
    confirmar cualquier accidente, el procesamiento no autorizado o
    ilegal de, la divulgación o el acceso a los datos personales;
  - (f) notificar al Cliente si las instrucciones de procesamiento
    infringen la Protección de datos aplicables a la legislación, en
    opinión de Odoo SA;
  - (g) poner a disposición del Cliente toda la información necesaria
    para demostrar el cumplimiento con la legislación de protección de
    datos, permitir y contribuir razonablemente a las auditorías,
    incluidas las inspecciones, realizadas o exigidas por el Cliente;
  - (h) eliminar permanentemente todas las copias de la base de datos
    del Cliente en posesión de Odoo SA, o devolver dichos datos, a
    elección del Cliente, a la terminación de este Acuerdo, sujeto a los
    retrasos especificados en la Política de privacidad de Odoo SA
    ([Privacy](https://www.odoo.com/privacy)).

En relación a los puntos (d) y (f), el Cliente acepta proporcionar a
Odoo SA información de contacto precisa en todo momento, según sea
necesario para notificar al responsable de la Legislación de Protección
de Datos del Cliente.

#### Sub procesadores

El Cliente reconoce y acepta que, para proporcionar los Servicios, Odoo
SA puede utilizar a terceros como proveedores de servicios para procesar
Datos Personales (en adelante “Sub-procesadores”). Odoo SA se compromete
a utilizar Sub-procesadores únicamente de conformidad con la Legislación
de Protección de Datos. Este uso estará amparado bajo un contrato entre
Odoo SA y el Sub-procesador que de garantías para estos servicios.

La Política de privacidad de Odoo SA, publicada en [Odoo
Privacy](https://www.odoo.com/privacy) establece información actualizada
en relación a los nombres y propósitos de los Sub-procesadores que se
encuentran actualmente en uso por Odoo SA para la ejecución de los
Servicios.

### 6.6 Terminación

En el supuesto de que alguna de las Partes incumpla con alguna de sus
obligaciones establecidas en el presente Acuerdo, y si dicho
incumplimiento no ha sido subsanado entre los siguientes 30 días
contados a partir de la fecha de notificación escrita de dicho
incumplimiento, este Acuerdo se considerará como terminado
inmediatamente por la Parte que ha cumplido sus obligaciones.

De igual manera, Odoo SA puede terminar el Acuerdo inmediatamente si el
Cliente no cumple con su obligación de pago del Servicio dentro de los
21 días siguientes a la fecha de la respectiva facturación, y después de
haber emitido al menos 3 recordatorios de pago.

Disposiciones supervivientes: Las secciones "`confidentiality_es`",
“`disclaimers_es`",“`liability_es`", y “`general_provisions_es`”
estarán vigentes incluso después de cualquier terminación o vencimiento
del presente Acuerdo.

## 7 Garantías, Renuncias, Responsabilidad Civil.

### 7.1 Garantías

Odoo SA posee los derechos de autor o un equivalente\[1\] sobre el 100%
del código del Software. Odoo SA confirma que todas las bibliotecas de
software necesarias para el uso del Software están disponibles bajo una
licencia compatible con la licencia del Software.

Durante la vigencia del presente Acuerdo, Odoo SA se compromete a
emplear esfuerzos comercialmente razonables para ejecutar los Servicios
de conformidad con los estándares de la industria generalmente
aceptados, siempre que:

  - Los sistemas informáticos del Cliente se encuentren en un buen
    estado operacional y, para el alojamiento en servidores propios, el
    Software será instalado en un ambiente adecuado y operativo;
  - El Cliente brindará información pertinente para la resolución de
    problemas y, para el alojamiento en servidores propios, cualquier
    acceso que Odoo SA pueda necesitar para identificar, reproducir y
    solventar los problemas;
  - Todas las cantidades debidas a Odoo SA hayan sido pagadas.

Odoo SA está obligado únicamente a reanudar la ejecución de los
Servicios sin cargos adicionales en caso que Odoo SA incumpla alguna de
las garantías establecidas. Este será el único y exclusivo recurso que
el Cliente podrá usar.

Contribuciones externas son cubiertas por el Acuerdo de Licencia de
Derechos de Autor, el cual provee a Odoo SA una licencia de derechos de
autor y de patente permanente, gratis e irrevocable.

### 7.2 Aviso legal

Excepto por lo establecido expresamente en este Acuerdo, ninguna de las
Partes podrá ofrecer garantías de ningún tipo, ya sean expresas,
implícitas, estatutarias o de otro tipo, y cada Parte rechaza cualquier
garantía implícita, tal y como garantías de comercialización, idóneas
para un propósito especifico o de no cumplimiento, en la medida máxima
permitida por la ley aplicable.

Odoo SA no garantiza que el Software cumpla con leyes o regulaciones
locales o internacionales.

### 7.3 Limitación de responsabilidad

De conformidad a la medida máxima permitida por la ley, la
responsabilidad agregada de cada una de las Partes junto con sus
afiliados que surjan de o estén relacionados con este Acuerdo, no
excederá el 50% del monto total pagado por el Cliente en virtud de este
Acuerdo durante los 12 meses inmediatamente anteriores a la fecha del
evento que da lugar a tal reclamo. Las reclamaciones múltiples no
ampliarán esta limitación.

En ningún caso, ninguna de las Parte o sus afiliados serán responsables
por daños directos, especiales, ejemplares, incidentales o consecuentes
de cualquier tipo, incluidos, entre otros, la pérdida de ingresos,
ganancias, ahorros, pérdida de negocios u otras pérdidas financieras,
costos de inactividad o demora, datos perdidos o dañados, que surjan de
o en conexión con este Acuerdo, independientemente de la forma de
acción, ya sea en contrato, agravio u otra forma, incluso si una de las
Partes o sus afiliados han sido informados de la posibilidad de tales
daños, o si el remedio de una de las Partes o sus afiliados no cumplen
con su propósito esencial.

### 7.4 Fuerza mayor

Ninguna de las Partes será responsable ante la otra Parte por la demora
o la falta de cumplimiento de sus obligaciones estipuladas en este
Acuerdo cuando tal incumplimiento o retraso sea causado por fuerza
mayor, tal y como regulaciones gubernamentales, incendios, huelgas,
guerras, inundaciones, accidentes, epidemias, embargos, apropiaciones de
instalaciones o productos en su totalidad o en parte por cualquier
autoridad gubernamental o pública, o cualquier otra causa o causas, ya
sean de naturaleza similares o diferentes, que están más allá del
control razonable de dicha parte siempre que tal causa o causas existan
efectivamente.

## 8 Disposiciones generales

### 8.1 Ley aplicable

Este Acuerdo y todos los pedidos del Cliente estarán sujetos a las leyes
del Reino de Bélgica. Cualquier disputa que surja en relación a este
Acuerdo o de cualquier pedido del Cliente será sujeta a la jurisdicción
exclusiva del Tribunal de Nivelles pertinente para litigar estas
disputas.

### 8.2 Divisibilidad

En caso de que una o más de las disposiciones establecidas en este
Acuerdo o cualquiera de sus aplicaciones sean inválidas, ilegales o no
exigibles en algún aspecto, la validez, legalidad y exigibilidad de las
disposiciones restantes del presente Acuerdo y sus aplicaciones no se
verán afectadas ni menoscabadas ninguna manera. Ambas Partes se
comprometen a reemplazar cualquier provisión inválida, ilegal o
inaplicable de este Acuerdo por una provisión válida que tenga el mismo
efecto y objetivo.

## 9 Apéndice A: Licencia de Odoo Enterprise Edition

<div class="only">

latex

La versión Enterprise de Odoo tiene la licencia Odoo Enterprise Edition
v1.0, la cual es definida de la siguiente manera:

> 
> 
> <div class="literalinclude">
> 
> ../../licenses/enterprise\_license.txt
> 
> </div>

</div>

<div class="only">

html

Ver `odoo_enterprise_license`.

</div>

1.  Las contribuciones externas están cubiertas por un [acuerdo de
    licencia de derechos de autor](https://www.odoo.com/cla), que
    proporciona una licencia de derechos de autor y patente permanente,
    gratuita e irrevocable a Odoo SA.


---
## File: ./content/legal/terms/i18n/terms_of_sale_de.md

# Allgemeine Verkaufsbedingungen

<div class="only">

html

[PDF
herunterladen](https://www.odoo.com/documentation/%7BCURRENT_BRANCH%7D/terms_of_sale_de.pdf)

</div>

<div class="note">

<div class="title">

Note

</div>

Letzte Änderung: 12. September 2023.

</div>

Diese Allgemeinen Verkaufsbedingungen regeln den Verkauf von Produkten
und Dienstleistungen durch Odoo S.A. und seine verbundenen Unternehmen
(zusammen "Odoo SA") an den Kunden. Für von Odoo S.A. erbrachte
Dienstleistungen können zusätzliche Bedingungen gelten (z. B. der
Enterprise-Abonnementvertrag). Falls diese zusätzlichen Bedingungen im
Widerspruch zu den Allgemeinen Verkaufsbedingungen stehen, haben die
zusätzlichen Bedingungen Vorrang vor diesen Allgemeinen
Verkaufsbedingungen.

Bitte lesen Sie diese Bedingungen sorgfältig durch, bevor Sie eine
Bestellung bei Odoo S.A. aufgeben. Durch die Annahme einer Bestellung
bei Odoo S.A. erklärt der Kunde seine Zustimmung zu diesen Bedingungen.

Der Kunde verzichtet ausdrücklich auf seine eigenen
Standardgeschäftsbedingungen, auch wenn diese nach diesen
Standardgeschäftsbedingungen des Verkaufs erstellt wurden. Damit eine
Abweichung gültig ist, muss sie im Voraus schriftlich vereinbart werden.

Unsere Rechnungen sind innerhalb von 21 Arbeitstagen zahlbar, sofern auf
der Rechnung oder der Bestellung keine andere Zahlungsfrist angegeben
ist. Bei Nichtzahlung bis zum Fälligkeitsdatum behält sich Odoo S.A. das
Recht vor, eine pauschale Verzugszinszahlung in Höhe von 15% des noch
ausstehenden Betrags zu verlangen. Odoo S.A. ist berechtigt, bei
verspäteter Zahlung ohne vorherige Ankündigung die Erbringung von
Dienstleistungen auszusetzen.

Ist eine Zahlung mehr als sechzig (60) Tage nach dem Fälligkeitsdatum
noch ausstehend, behält sich Odoo S.A. das Recht vor, die Dienste eines
Inkassounternehmens in Anspruch zu nehmen. Alle rechtlichen Kosten gehen
zu Lasten des Kunden.

In bestimmten Ländern wird nach den internen Gesetzen Quellensteuer auf
den Rechnungsbetrag erhoben. Jegliche Quellensteuer ist vom Kunden an
die Steuerbehörden zu zahlen. Odoo S.A. kann unter keinen Umständen in
Kosten im Zusammenhang mit den Gesetzen eines Landes verwickelt werden.
Der Rechnungsbetrag ist daher vollständig an Odoo S.A. zu zahlen und
enthält keine Kosten im Zusammenhang mit den Gesetzen des Landes, in dem
sich der Kunde befindet.

Für Kunden mit globaler Präsenz erfolgt die Anwendung der Preise immer
auf der Grundlage des Standorts des Kunden mit der höchsten Preisliste,
sofern nicht schriftlich zum Zeitpunkt des Kaufs anders vereinbart.

Monatliche Abonnements sind nur für die Nutzung auf der Cloud-Plattform
(Odoo SaaS und Odoo SH) verfügbar. Die Zahlung von monatlichen
Abonnements kann nur per Kreditkarte oder einem gleichwertig
unterstützten automatischen Lastschriftverfahren erfolgen. Odoo S.A.
behält sich das Recht vor, ein monatliches Abonnement abzulehnen, das
diesen Bedingungen nicht entspricht.

Odoo S.A. verpflichtet sich, sein Bestes zu tun, um die Dienstleistungen
rechtzeitig gemäß den vereinbarten Zeitplänen bereitzustellen. Keine
seiner Verpflichtungen kann jedoch als Verpflichtung zur Erzielung von
Ergebnissen angesehen werden. Odoo S.A. kann unter keinen Umständen vom
Kunden verlangt werden, als Dritter im Rahmen einer Schadensersatzklage
aufzutreten, die gegen den Kunden von einem Endverbraucher eingereicht
wird.

Damit sie zulässig ist, muss Odoo S.A. über jede Beanstandung innerhalb
von 8 Tagen nach Lieferung der Waren oder Erbringung der
Dienstleistungen per Einschreiben an seinen Geschäftssitz informiert
werden.

Soweit gesetzlich zulässig, wird die Gesamthaftung jeder Partei zusammen
mit ihren Tochtergesellschaften 50% des Gesamtbetrags, den der Kunde
unter diesen Bedingungen in den 12 Monaten unmittelbar vor dem Ereignis,
das zu einer solchen Klage geführt hat, gezahlt hat, nicht
überschreiten. Mehrere Ansprüche vergrößern diese Begrenzung nicht.

Odoo S.A. behält sich das Recht vor, diese Bedingungen jederzeit ohne
vorherige Ankündigung zu ändern. Der Kunde unterliegt den zum Zeitpunkt
der Zustimmung geltenden Bedingungen.

Alle unsere vertraglichen Beziehungen unterliegen ausschließlich dem
belgischen Recht. Darüber hinaus unterliegt jeder Streitfall
ausschließlich der Zuständigkeit der Gerichte des Arrondissements
Nivelles (Belgien).


---
## File: ./content/legal/terms/i18n/enterprise_nl.md

# Odoo Enterprise Subscription Agreement (NL)

<div class="only">

html

[Download
PDF](https://www.odoo.com/documentation/%7BCURRENT_BRANCH%7D/odoo_enterprise_agreement_nl.pdf)

</div>

<div class="warning">

<div class="title">

Warning

</div>

Dit is een Nederlandse vertaling van de "Odoo Enterprise Subscription
Agreement". Deze vertaling wordt verstrekt in de hoop dat deze het
begrip zal vergemakkelijken, maar heeft geen juridische waarde. De enige
officiële referentie van de algemene voorwaarden van de "Odoo Enterprise
Subscription Agreement" is `de originele Engelse versie
<enterprise_agreement>`

</div>

<div class="note">

<div class="title">

Note

</div>

Version 10a - 2022-10-27

</div>

Door u op de Odoo Enterprise-diensten (de “Diensten”) te abonneren die
door Odoo NV en haar dochterondernemingen (gezamenlijk “Odoo NV”) worden
verleend met betrekking tot de Odoo Enterprise Edition of de Odoo
Community Edition (de “Software”) gehost op de Cloudplatforms van Odoo
NV (het "Cloudplatform") of op locatie ("Self-Hosting"), gaat u (de
"Klant") ermee akkoord om gebonden te zijn door de volgende algemene
voorwaarden (de “Overeenkomst”).

## 1 Looptijd van de Overeenkomst

De duur van deze Overeenkomst (de "Looptijd") wordt schriftelijk bepaald
bij het afsluiten van deze Overeenkomst en gaat in op de datum van de
afsluiting. De duur wordt automatisch verlengd met dezelfde Looptijd,
tenzij een van beide partijen de andere partij minstens 30 dagen voor
het einde van de Looptijd schriftelijk in kennis stelt van de
beëindiging.

## 2 Definities

  - Gebruiker  
    Elke actieve gebruikersaccount met toegang tot de Software in de
    creatie- en/of bewerkingsmodus. Gedeactiveerde gebruikersaccounts en
    accounts die worden gebruikt door externe personen (of systemen) die
    slechts beperkte toegang hebben tot de Software via de
    portaalfaciliteiten ("Portaalgebruikers") tellen niet mee als
    Gebruikers.

  - App  
    Een "App" is een gespecialiseerde groep functies die beschikbaar is
    voor installatie in de Software.

  - Odoo Partner  
    Een Odoo Partner is een derde bedrijf of persoon, gekozen door de
    Klant, die met de Klant samenwerkt voor zijn Odoo-gerelateerde
    diensten. De Klant kan op elk moment beslissen om met een andere
    Odoo Partner of rechtstreeks met Odoo NV samen te werken (mits
    voorafgaande kennisgeving).

  - Extra Module  
    Een extra module is een map met broncode bestanden of een reeks op
    Python gebaseerde aanpassingen die in een database zijn gemaakt
    (bijv. met Odoo Studio), die functies toevoegt of het
    standaardgedrag van de Software wijzigt. Het kan zijn ontwikkeld
    door een Klant, door Odoo NV, door een Odoo Partner namens de klant,
    of door derden.

  - Ondersteunde Extra Module  
    Een Ondersteunde Extra Module is een extra module waarvoor de Klant
    ervoor kiest een onderhoudsbijdrage te betalen om van
    ondersteunings-, upgrade- en bugfixingdiensten te genieten.

  - Bug  
    Wordt beschouwd als een Bug, elke storing van de Software of een
    Ondersteunde Extra Module die resulteert in een volledige stilstand,
    foutopsporing of beveiligingsinbreuk en die niet rechtstreeks wordt
    veroorzaakt voor een gebrekkige installatie of configuratie. De
    niet-naleving van specificaties of vereisten zal als een Bug worden
    beschouwd naar goeddunken van Odoo NV (doorgaans wanneer de Software
    niet de resultaten of prestaties levert die hij moet leveren of
    wanneer een landspecifieke functie niet langer aan de wettelijke
    boekhoudkundige vereisten voldoet).

  - Ondersteunde Versies  
    Behalve anderluidende bepaling zijn de Diensten die op grond van
    deze Overeenkomst worden verleend, uitsluitend van toepassing op de
    Ondersteunde Versies van de Software, waaronder de 3 (drie) laatst
    uitgebrachte hoofdversies.

  - Abonnementsplan  
    Een abonnementsplan bepaalt een reeks Apps, functies en
    hostingoplossingen die onder deze Overeenkomst vallen en wordt
    schriftelijk vastgelegd bij het afsluiten van deze Overeenkomst.

## 3 Toegang tot de Software

De Klant kan de op het Cloudplatform gehoste Software gebruiken of
kiezen voor de Self-Hosting optie. Het Cloudplatform wordt gehost en
volledig beheerd door Odoo NV, en is op afstand toegankelijk voor de
Klant. Met de Self-Hosting optie host de Klant de Software op een
computersysteem naar keuze, die niet onder de controle staat van Odoo
NV.

Voor de duur van deze Overeenkomst verstrekt Odoo NV aan de Klant een
niet-exclusieve, niet-overdraagbare licentie om de Odoo Enterprise
Edition Software te gebruiken (uitvoeren, wijzigen, uitvoeren na
wijziging) onder de voorwaarden uiteengezet in `appendix_a_nl`.

De Klant gaat ermee akkoord alle nodige maatregelen te nemen om de
ongewijzigde uitvoering te waarborgen van het deel van de Software dat
de geldigheid van het gebruik van de Odoo Enterprise Edition controleert
en dat statistieken verzamelt voor dat doel, met inbegrip van, maar niet
beperkt tot het uitvoeren van de Software, het aantal Gebruikers, de
geïnstalleerde Apps en het aantal coderegels van de Ondersteunde Extra
Modules.

Odoo NV verbindt zich ertoe om individuele of persoonlijke cijfers niet
bekend te maken aan derden zonder de toestemming van de Klant en om alle
verzamelde gegevens te behandelen in overeenstemming met haar officiële
Privacybeleid, gepubliceerd op <https://www.odoo.com/privacy>.

Bij het aflopen of beëindigen van deze Overeenkomst wordt deze licentie
onmiddellijk ingetrokken en gaat de Klant ermee akkoord om de Odoo
Enterprise Edition Software en het Cloudplatform niet meer te gebruiken.

Indien de Klant de voorwaarden van deze sectie schendt, gaat de Klant
ermee akkoord om aan Odoo NV een extra vergoeding te betalen gelijk aan
300% van het toepasselijke tarief voor het werkelijke aantal Gebruikers.

## 4 Diensten

### 4.1 Bugfixingdienst

Voor de duur van deze Overeenkomst verbindt Odoo NV zich ertoe alle
redelijke inspanningen te leveren om elke Bug van de Software en de
Ondersteunde Extra Modules die door de klant via het juiste kanaal
(doorgaans het websiteformulier of de telefoonnummers vermeld op
<https://odoo.com/help> of, in geval van een samenwerking met een Odoo
Partner, het door de partner verstrekte kanaal) te verhelpen en binnen
de 2 werkdagen de behandeling van dergelijke door de Klant ingediende
klachten aan te vatten.

Zodra de Bug verholpen is, zal een passende oplossing aan de Klant
worden meegedeeld. Indien de Klant een Ondersteunde Versie gebruikt, zal
hem niet worden gevraagd te upgraden naar een recentere Ondersteunde
Versie van de Software als oplossing voor een Bug.

Wanneer een Bug verholpen is in een Ondersteunde Versie verbindt Odoo NV
zich ertoe om de Bug in alle recentere Ondersteunde Versies van de
Software te verhelpen.

Beide partijen erkennen dat, zoals gespecificeerd in de licentie van de
Software en in de sectie `liability_nl` van deze Overeenkomst, Odoo NV
niet aansprakelijk kan worden gesteld voor Bugs in de Software of in de
Ondersteunde Extra Modules.

### 4.2 Veiligheidsupdatedienst

#### Self-Hosting

Voor de duur van deze Overeenkomst verbingt Odoo NV zich ertoe een
"Veiligheidsadvies" naar de Klant te sturen voor elke beveiligingsfout
die wordt ontdekt in de Ondersteunde Versies van de Software (met
uitzondering van de Extra Modules), ten minste 2 weken voordat het
Veiligheidsadvies openbaar wordt gemaakt, tenzij de Bug reeds openbaar
is gemaakt door een derde partij. Veiligheidsadviezen bevatten een
volledige beschrijving van de Bug, de oorzaak ervan, de mogelijke
gevolgen ervan voor de systemen van de Klant en de bijbehorende
oplossing voor elke Ondersteunde Versie.

De Klant begrijpt dat de Bug en de informatie in het Veiligheidsadvies
gedurende de embargoperiode die voorafgaat aan de bekendmaking moeten
worden behandeld als Vertrouwelijke Informatie zoals beschreven in
`confidentiality_nl`.

#### Cloudplatform

Odoo NV verbindt zich ertoe om de beveiligingsoplossingen voor elke
beveiligingsbug die wordt ontdekt in een versie van de Software die op
het Cloudplatform wordt gehost, toe te passen op alle systemen onder
zijn controle, zodra de oplossing beschikbaar is, zonder dat daarvoor
enige handmatige actie van de Klant nodig is.

### 4.3 Upgradediensten

#### Upgradedienst voor de Software

Voor de duur van deze Overeenkomst kan de Klant via het juiste kanaal
(doorgaans de upgradedienstwebsite van Odoo NV) upgradeaanvragen
indienen om een database van eender welke Versie van de Software om te
zetten naar een meer recente Ondersteunde Versie (de "Doelversie").

Voor het Cloudplatform worden upgradeaanvragen rechtstreeks via het
controlpaneel van het Cloudplatform ingediend en vereisen ze geen
gegevensupload. In geval van Self-Hosting moeten upgradeaanvragen een
kopie van de database van de Klant en de bijbehorende gegevens bevatten
(doorgaans verkregen via het Back-up menu van de Softare).

Deze dienst wordt verleend via een geautomatiseerd platform om de Klant
in staat te stellen zonder toezicht te upgraden zodra een eerdere versie
van de database van de Klant met succes werd geüpgraded voor een
bepaalde Ondersteunde Versie.

De Upgradedienst is beperkt tot de technische conversie en aanpassing
van de database van de Klant om deze compatibel te maken met de
Doelversie, de correctie van elke Bug die rechtstreeks wordt veroorzaakt
door de upgradebewerking en die normaal niet voorkomt in de Doelversie
en de conversie van de broncode en gegevens van de Ondersteunde Extra
Modules voor de Doelversie.

Het is de exclusieve verantwoordelijkheid van de Klant om de geüpgradede
database te controleren en te valideren teneinde Bugs te detecteren, om
de impact van wijzigingen en nieuwe functies te analyseren die in de
Doelversie zijn geïmplementeerd, om eventuele uitbreidingen van derden
van de Software die vóór de upgrade in de database waren geïnstalleerd
om te zetten en aan te passen (bijv. niet-ondersteunde extra modules).
De Klant kan meerdere upgradeaanvragen voor een database indienen totdat
een aanvaardbaar resultaat wordt bereikt.

### 4.4 Cloudhostingdiensten

Voor de duur van deze Overeenkomst, indien de Klant ervoor kiest het
Cloudplatform te gebruiken, verbindt Odoo SA zich ertoe ten minste de
volgende diensten aan te bieden:

  - Keuze uit meerdere hostingregio's (minimaal 3: Europa, Amerika,
    Azië/Pacific)
  - Hosting in Tier-III of gelijkwaardige datacenters, met 99,9 %
    netwerk-uptime
  - Graad A SSL (HTTPS) versleuteling van communicatie
  - Volledig geautomatiseerde, geverifieerde back-ups, gerepliceerd in
    meerdere regio's
  - Regelmatig getest herstelplan voor rampen

De details van de Cloudhostingdiensten worden beschreven op de Service
Level Agreement-pagina op <https://www.odoo.com/cloud-sla>.

### 4.5 Ondersteuningsdienst

#### Toepassingsgebied

Voor de duur van deze Overeenkomst kan de klant gratis een onbeperkt
aantal ondersteuningstickets openen, uitsluitend voor vragen over Bugs
(zie `bugfix_nl`) of begeleiding met betrekking tot het gebruik van de
standaardfuncties van de Software en de Ondersteunde Extra Modules.

Andere ondersteuningsaanvragen, zoals vragen over ontwikkelingen of
aanpassingen, kunnen worden gedekt door de aankoop van een afzonderlijke
serviceovereenkomst. Als het niet duidelijk is of een verzoek onder deze
Overeenkomst valt, ligt het uiteindelijke besluit bij Odoo NV.

#### Beschikbaarheid

Tickets kunnen worden ingediend via het websiteformulier of de
telefoonnummers vermeld op <https://www.odoo.com/help> of, in geval van
samenwerking met een Odoo Partner, het door de partner verstrekt kanaal,
afhankelijk van de lokale openingstijden.

### 4.6 Werken met een Odoo Partner

Voor bugfixing-, ondersteunings- en upgradediensten kan de Klant ofwel
werken met een Odoo Partner als hoofdcontactpersoon, ofwel rechtstreeks
met Odoo NV.

Als de Klant beslist met een Odoo Partner te werken, zal Odoo NV de
diensten met betrekking tot de Ondersteunde Extra Modules uitbesteden
aan de Odoo Partner, die de hoofdcontactpersoon van de klant wordt. De
Odoo Partner kan namens de klant contact opnemen met Odoo NV voor tweede
niveau ondersteuning met betrekking tot de standaardfuncties van de
Software.

Als de Klant beslist rechtstreeks met Odoo NV samen te werken, worden de
diensten met betrekking tot de Ondersteunde Extra Modules geleverd *als
en alleen als* de Klant wordt gehost op het Cloudplatform van Odoo.

## 5 Kosten en vergoedingen

### 5.1 Standaardkosten

De standaardkosten voor het Odoo Enterprise-abonnement en de diensten
zijn gebaseerd op het aantal Gebruikers en het Abonnementsplan die door
de klant wordt gebruikt en schriftelijk wordt gespecificeerd bij het
afsluiten van de Overeenkomst.

Wanneer de Klant tijdens de Looptijd van de Overeenkomst meer Gebruikers
of meer functies gebruikt waarvoor een ander Abonnementsplan nodig is
dan dat gespecifieerd bij het afsluiten van deze Overeenkomst, gaat de
Klant ermee akkoord om een extra vergoeding te betalen gelijk aan het
toepasselijke tarief (op het moment van de afwijking van het opgegeven
aantal Gebruikers of Abonnementsplan) voor de bijkomende Gebruikers of
het vereiste Abonnementsplan, voor de rest van de Looptijd.

Daarnaast worden de diensten voor Ondersteunde Extra Modules in rekening
gebracht op basis van het aantal coderegels in deze modules. Wanneer de
Klant kiest voor het onderhoud van de Ondersteunde Extra Modules,
bedraagt het tarief de maandelijkse vergoeding per 100 regels code (naar
boven afgerond op honderdtallen), zoals schriftelijk gepreciseerd bij
het afsluiten van de Overeenkomst. Coderegels worden geteld met het
`cloc` commando van de Software en omvatten alle tekstregels in de
broncode van die modules, ongeacht de programmeertaal (Python,
Javascript, XML, enz.), met uitzondering van lege regels,
commentaarregels en bestanden die niet worden geladen bij het
installeren of uitvoeren van de Software.

Wanneer de Klant een upgrade aanvraagt, kan Odoo NV voor elke
Ondersteunde Extra Module die de afgelopen 12 maanden niet werd gedekt
door een onderhoudsvergoeding, een eenmalige extra vergoeding aanrekenen
voor elke ontbrekende maand dekking.

### 5.2 Verlengingskosten

Indien, bij verlenging zoals beschreven in de sectie `term_nl`, de
kosten gedurende de vorige Looptijd lager zijn dan de meest actuele
geldende tarieven, zullen de kosten met maximaal 7% stijgen.

### 5.3 Belastingen

Alle vergoedingen en kosten zijn exclusief alle toepasselijke federale,
provinciale, gewestelijke, lokale of andere overheidsbelastingen,
vergoedingen of heffingen (gezamenlijk "Belastingen"). De Klant is
verantwoordelijk voor het betalen van alle Belastingen die verbonden
zijn aan de aankopen die de Klant in het kader van deze Overeenkomst
doet, behalve wanneer Odoo NV wettelijk verplicht is om Belastingen te
betalen of te heffen waarvoor de Klant verantwoordelijk is.

## 6 Voorwaarden van de Diensten

### 6.1 Verplichtingen van de Klant

De Klant gaat ermee akkoord om:

  - Odoo NV alle toepasselijke kosten voor de Diensten van deze
    Overeenkomst te betalen in overeenstemming met de
    betalingsvoorwaarden bepaald bij het afsluiten van deze
    Overeenkomst;
  - Odoo NV onmiddellijk op de hoogte te brengen wanneer het werkelijke
    aantal Gebruikers de aantallen overschrijden die bij het afsluiten
    van de Overeenkomst werden bepaald, en in dat geval de toepasselijke
    extra vergoeding te betalen zoals beschreven in de sectie
    `charges_standard_nl`;
  - alle nodige maatregelen te nemen om de ongewijzigde uitvoering te
    waarborgen van het deel van de Software dat de geldigheid van het
    gebruik van de Odoo Enterprise Edition bevestigt, zoals beschreven
    in `enterprise_access_nl`;
  - 1 toegewijde Klantcontactpersoon aan te duiden voor de volledige
    duur van de Overeenkomst;
  - Odoo NV 30 dagen voor het veranderen van zijn hoofdcontactpersoon
    schriftelijk in kennis te stellen dat hij met een andere Odoo
    Partner of rechtstreeks met Odoo NV wenst samen te werken.

Wanneer de Klant kiest voor het Cloudplatform, gaat de Klant ermee
akkoord om:

  - alle redelijke maatregelen te nemen om zijn gebruikersaccount veilig
    te houden, onder meer door een sterk wachtwoord te kiezen en dit
    niet met anderen te delen;
  - een redelijk gebruik te maken van de Hostingdiensten, met
    uitsluiting van illegale of onrechtmatige activiteiten, en zich
    strikt te houden aan de regels gepreciseerd in het Beleid voor
    acceptabel gebruik, beschikbaar op
    <https://odoo.com/acceptable-use>.

Wanneer de Klant kiest voor de Self-Hosting optie, gaat de Klant ermee
akkoord om:

  - alle redelijke maatregelen te nemen om de bestanden en databases van
    de Klant te beschermen en om ervoor te zorgen dat de gegevens van de
    Klant veilig zijn, waarbij wordt erkend dat Odoo NV niet
    aansprakelijk kan worden gesteld voor enig verlies van gegevens;
  - Odoo NV de nodige toegang te verlenen om op verzoek de geldigheid
    van het gebruik van de Odoo Enterprise Edition te controleren (bijv.
    als de automatische validatie voor de klant niet blijkt te werken).

### 6.2 Niet benaderen of aanwerven

Behalve wanneer de andere partij schriftelijk haar toestemming daartoe
verleent, gaan elke partij, haar dochterondernemingen en
vertegenwoordigers ermee akkoord om geen werknemers te benaderen of aan
te werven van de andere partij die betrokken zijn bij de uitvoering of
het gebruik van de Diensten volgens deze Overeenkomst, voor de duur van
de Overeenkomst en voor een periode van 12 maanden na de datum van
beëindiging of afloop van deze Overeenkomst. In geval van een schending
van de voorwaarden van deze sectie die leidt tot het ontslag van
voornoemde werknemer gaat de inbreukmakende partij ermee akkoord om de
andere partij een bedrag van (€) 30 000,00 euro (dertigduizend euro) te
betalen.

### 6.3 Publiciteit

Behoudens andersluidende schriftelijke vermelding verleent elke partij
de andere partij een niet-overdraagbare, niet-exclusieve, rechtenvrije,
wereldwijde licentie om de naam, de logo's en handelsmerken van de
andere partij te reproduceren en weer te geven, uitsluitend om naar de
andere partij te verwijzen als een klant of leverancier, op websites, in
persberichten en ander marketingmateriaal.

### 6.4 Vertrouwelijkheid

  - Definitie van "Vertrouwelijke informatie":  
    Alle informatie die door een partij (de "Bekendmakende Partij") aan
    de andere partij (de "Ontvangende Partij") wordt bekendgemaakt,
    hetzij mondeling of schriftelijk, en die als vertrouwelijk wordt
    aangemerkt of die redelijkerwijs als vertrouwelijk moet worden
    beschouwd gezien de aard van de informatie en de omstandigheden van
    de bekendmaking. In het bijzonder moet alle informatie met
    betrekking tot het bedrijf, zaken, producten, ontwikkelingen,
    handelsgeheimen, knowhow, personeel, klanten en leveranciers van
    beide partijen als vertrouwelijk worden beschouwd.

Voor alle Vertrouwelijke Informatie die tijdens de Looptijd van deze
Overeenkomst wordt ontvangen, zal de Ontvangende Partij dezelfde mate
van zorgvuldigheid aan de dag leggen die welke zij aanwendt om de
vertrouwelijkheid van haar eigen gelijkaardige Vertrouwelijke Informatie
te beschermen, doch niet minder dan een redelijke zorgvuldigheid.

De Ontvangende Partij mag Vertrouwelijke Informatie van de Bekendmakende
Partij bekendmaken voor zover ze wettelijk verplicht is om dit te doen,
mits de Ontvangende Partij de Bekendmakende Partij vooraf in kennis
stelt van de verplichte bekendmaking, voor zover toegestaan door de wet.

### 6.5 Gegevensbescherming

  - Definities  
    "Persoonsgegevens", "Verwerkingsverantwoordelijke", "Verwerken"
    hebben dezelfde betekenis als in de Verordening (EU) 2016/679 en de
    Richtlijn 2002/58/EG en elke verordening of wetgeving die deze
    wijzigt of vervangt (hierna "Gegevensbeschermingswetgeving"
    genoemd).

#### Verwerken van persoonsgegevens

De partijen erkennen dat de database van de Klant Persoonsgegevens kan
bevatten, waarvoor de Klant de Verwerkingsverantwoordelijke is. Deze
gegevens worden verwerkt door Odoo NV wanneer de Klant hiertoe opdracht
geeft, door gebruik te maken van een van de Diensten waarvoor een
database nodig is (bijv. de Cloudhostingdiensten of de Database
Upgradediensten) of wanneer de Klant zijn of haar database of een deel
daarvan overdraagt aan Odoo NV om welke reden dan ook die verband houdt
met deze Overeenkomst.

Deze gegevensverwerking wordt uitgevoerd in overeenstemming met de
Gegevensbeschermingswetgeving. In het bijzonder verbindt Odoo NV zich
ertoe:

  - (a) de Persoonsgegevens enkel te verwerken wanneer en zoals
    opgedragen door de Klant, en met oog op de uitvoering van één van de
    Diensten in het kader van deze Overeenkomst, tenzij de wet dit
    vereist, in welk geval Odoo NV de Klant hiervan voorafgaand in
    kennis stelt, tenzij de wet dit verbiedt;
  - (b) ervoor te zorgen dat alle personen binnen Odoo NV die gemachtigd
    zijn om de Persoonsgegevens te verwerken, zich tot geheimhouding
    verplichten;
  - (c) passende technische en organisatorische maatregelen te nemen en
    te handhaven om de Persoonsgegevens te beschermen tegen
    ongeoorloofde of onwettige verwerking en tegen onopzettelijk
    verlies, vernietiging, beschadiging, diefstal, wijziging of
    openbaarmaking;
  - (d) elk verzoek om gegevensbescherming dat is ingediend bij Odoo NV
    met betrekking tot de database van de Klant onverwijld door te
    sturen naar de Klant;
  - (e) de Klant onverwijld op de hoogte te stellen wanneer zij kennis
    neemt en bevestiging krijgt van een onopzettelijke, ongeoorloofde of
    onwettige verwerking van, openbaarmaking van of toegang tot de
    Persoonsgegevens;
  - (f) de Klant te informeren indien de verwerkingsinstructies naar het
    oordeel van Odoo NV in strijd zijn met de toepasselijke
    Gegevensbeschermingswetgeving;
  - (g) aan de Klant alle informatie ter beschikking te stellen die
    nodig is om de naleving van de Gegevensbeschermingswetgeving aan te
    tonen en audits, met inbegrip van inspecties, die door de Klant
    worden uitgevoerd of opgedragen, toe te staan en er redelijkerwijs
    aan bij te dragen;
  - (h) alle kopieën van de database van de Klant die in het bezit zijn
    van Odoo NV definitief te verwijderen, of dergelijke gegevens terug
    te geven, naar keuze van de Klant, bij beëindiging van deze
    Overeenkomst, met inachtneming van de termijnen die in het
    [Privacybeleid](https://www.odoo.com/privacy) van Odoo NV zijn
    bepaald.

Met betrekking tot punten (d) tot (f) verbindt de klant zich ertoe Odoo
NV te allen tijde te voorzien van nauwkeurige contactgegevens, die nodig
zijn om de verantwoordelijke van de gegevensbescherming van de Klant in
kennis te stellen.

#### Subverwerkers

De Klant erkent en gaat ermee akkoord dat Odoo NV voor de levering van
de Diensten een beroep kan doen op externe dienstverleners
(Subverwerkers) om Persoonsgegevens te verwerken. Odoo NV verbindt zich
ertoe alleen Subverwerkers te gebruiken in overeenstemming met de
Gegevensbeschermingswetgeving. Dit gebruik zal het voorwerp zijn van een
contract tussen Odoo NV en de Subverwerker dat daartoe garanties biedt.
Het Privacybeleid van Odoo NV, beschikbaar op
<https://www.odoo.com/privacy> biedt actuele informatie over de namen en
doeleinden van Subverwerkers waarop Odoo NV momenteel een beroep doet in
het kader van de uitvoering van de Diensten.

### 6.6 Beëindiging

Indien een van de Partijen niet voldoet aan een van de uit deze
Overeenkomst voortvloeiende verplichtingen en indien deze nalatigheid
niet binnen 30 kalenderdagen na de schriftelijke kennisgeving van deze
nalatigheid verholpen is, kan de niet in gebreke blijvende Partij deze
Overeenkomst onmiddellijk beëindigen.

Bovendien kan Odoo NV de Overeenkomst onmiddellijk beëindigen in het
geval dat de Klant de toepasselijke vergoedingen voor de Diensten niet
betaalt binnen de 21 dagen na de vervaldatum die op de desbetreffende
factuur vermeld wordt, en na minstens 2 herinneringen.

  - Overlevende bepalingen:  
    De secties "`confidentiality_nl`”, "`disclaimers_nl`”,
    "`liability_nl`” en "`general_provisions_nl`” blijven geldig na de
    beëindiging of het afloop van deze Overeenkomst.

## 7 Garanties, Uitsluitingen en Aansprakelijkheid

### 7.1 Garanties

Odoo NV bezit het auteursrecht of een gelijkwaardig recht\[1\] op 100 %
van de code van de Software en bevestigt dat alle softwarebibliotheken
die nodig zijn om de Software te gebruiken beschikbaar zijn onder een
licentie die compatibel is met de licentie van de Software.

Voor de duur van deze Overeenkomst verbindt Odoo NV zich ertoe om
commercieel redelijke inspanningen aan te wenden om de Diensten uit te
voeren in overeenstemming met de algemeen aanvaarde industrienormen op
voorwaarde dat:

  - de computersystemen van de Klant in goede bedrijfsstaat zijn en, in
    geval van Self-Hosting, de Software geïnstalleerd is in een
    geschikte werkomgeving;
  - de Klant passende probleemoplossingsen verstrekt en, in geval van
    Self-Hosting, Odoo NV de nodige toegang verleent opdat Odoo NV de
    problemen zou kunnen identificeren, reproduceren en verhelpen;
  - alle aan Odoo NV verschuldigde bedragen zijn betaald.

Het enige en exclusieve verhaal van de Klant en de enige verplichting
van Odoo NV in geval van een inbreuk op deze garantie is dat Odoo NV de
uitvoering van de Diensten zonder extra kosten hervat.

### 7.2 Uitsluiting van garantie

Behoudens uitdrukkelijke andersluidende bepalingen, geeft geen enkele
partij enige uitdrukkelijke, impliciete, wettelijke of andere garantie
en wijst elke partij nadrukkelijk alle impliciete garanties van de hand,
met inbegrip van enige impliciete garanties van verkoopbaarheid,
geschiktheid voor een bepaald doel of niet-inbreuk, voor zover
toegestaan door de toepasselijke wetgeving.

Odoo NV garandeert niet dat de Software voldoet aan alle lokale of
internationale wetgeving of regelgeving.

### 7.3 Beperking van aansprakelijkheid

Voor zover maximaal toegestaan door de wet, zal de totale
aansprakelijkheid van elke partij samen met haar dochterondernemingen
die voortvloeit uit of verband houdt met deze Overeenkomst niet meer
bedragen dan 50% van het totale bedrag betaald door de Klant in het
kader van deze Overeenkomst gedurende de 12 maanden onmiddellijk
voorafgaand aan de datum van de gebeurtenis die aanleiding geeft tot
dergelijke claim. Meerdere claims zullen deze beperking niet vergroten.

In geen geval zal een van de partijen of haar dochterondernemingen
aansprakelijk zijn voor enige indirecte, bijzondere, exemplaire,
incidentele of gevolgschade van welke aard dan ook, met inbegrip van,
maar niet beperkt tot verlies van inkomsten, winst, besparingen, verlies
van zaken of ander financieel verlies, kosten van stilstand of
vertraging, verloren of beschadigde gegevens, voortkomend uit of in
verband met deze Overeenkomst, ongeacht de vorm van actie, hetzij uit
overeenkomst, hetzij uit onrechtmatige daad of anderszins, zelfs indien
een partij of haar dochterondernemingen op de hoogte zijn gebracht van
het risico van dergelijke schade, of indien het verhaal van een partij
of haar dochterondernemingen anderszins haar wezenlijke doel
voorbijschiet.

### 7.4 Overmacht

Geen enkele partij zal aansprakelijk zijn jegens de andere partij voor
de vertraging in de uitvoering of het verzuim om een prestatie in het
kader van deze Overeenkomst te verrichten wanneer dergelijk verzuim of
dergelijke vertraging wordt veroorzaakt door een geval van overmacht,
zoals overheidsbepalingen, brand, staking, oorlog, overstroming,
ongeval, epidemie, embargo, volledige of gedeeltelijke toe-eigening van
een fabriek of product door een regering of overheidsinstantie, of enige
andere oorzaak of oorzaken, hetzij van gelijke of andere aard, buiten de
redelijke controle van die partij, zolang dergelijke oorzaak of oorzaken
bestaan.

## 8 Algemene bepalingen

### 8.1 Toepasselijk recht

Onderhavige Overeenkomst en alle orders van de Klant zijn onderworpen
aan het Belgische recht. Elk geschil dat voortvloeit uit of verband
houdt met deze Overeenkomst of een order van een Klant is onderworden
aan de exclusieve bevoegdheid van de Ondernemingsrechtbank van Nivelles.

### 8.2 Scheidbaarheid

Ingeval een of meerdere bepalingen van deze Overeenkomst of een
toepassing daarvan in enig opzicht ongeldig, onwettig of
niet-afdwingbaar is/zijn, zullen de geldigheid, wettigheid en
afdwingbaarheid van de overige bepalingen van deze Overeenkomst en elke
toepassing daarvan op geen enkele wijze worden beïnvloed of aangetast.
Beide partijen verbinden zich ertoe om elke eventuele ongeldige,
onwettige of niet-afdwingbare bepaling van deze Overeenkomst te
vervangen door een geldige bepaling met dezelfde effecten en
doelstellingen.

## 9 Bijlage A: Odoo Enterprise Edition-licentie

<div class="only">

latex

De Odoo Enterprise Edition wordt in licentie gegeven onder de Odoo
Enterprise Edition License v1.0, die als volgt wordt gedefinieerd:

<div class="literalinclude">

../../licenses/enterprise\_license.txt

</div>

</div>

<div class="only">

html

Zie `odoo_enterprise_license`.

</div>

1.  Externe bijdragen worden gedekt door een [Copyright License
    Agreement](https://www.odoo.com/cla) die een permanente, gratis en
    onherroepelijke auteursrecht- en octrooilicentie aan Odoo NV
    verstrekt.


---
## File: ./content/legal/terms/i18n/enterprise_fr.md

# Odoo Enterprise Subscription Agreement (FR)

<div class="only">

html

[Download
PDF](https://www.odoo.com/documentation/%7BCURRENT_BRANCH%7D/odoo_enterprise_agreement_fr.pdf)

</div>

<div class="warning">

<div class="title">

Warning

</div>

Ceci est une traduction en français du contrat “Odoo Enterprise
Subscription Agreement”. Cette traduction est fournie dans l’espoir
qu’elle facilitera sa compréhension, mais elle n'a aucune valeur
légale. La seule référence officielle des termes du contrat “Odoo
Enterprise Subscription Agreement” est la `version originale en anglais
<enterprise_agreement>`.

</div>

<div class="note">

<div class="title">

Note

</div>

Version 10a - 2022-10-27

</div>

En vous abonnant aux services de Odoo Enterprise (les "Services")
fournis par Odoo SA et ses filiales (collectivement, "Odoo SA") en
relation avec Odoo Enterprise Edition ou Odoo Community Edition (le
"Logiciel"), hébergé sur le plate-formes Cloud d'Odoo SA (la
"Plate-forme Cloud") ou sur site ("Auto-Hébergement"), vous (le
"Client") acceptez d'être lié par les conditions générales suivantes (le
"Contrat").

## 1 Durée du Contrat

La durée du présent Contrat (la "Durée") sera spécifiée par écrit à la
conclusion du Contrat, à compter de la date de la conclusion. Celui-ci
est automatiquement reconduit pour une même durée, à moins que l'une des
parties n’envoie à l'autre partie un préavis écrit de résiliation, et au
moins 30 jours avant la date d'échéance du contrat.

## 2 Définitions

  - Utilisateur  
    Tout compte utilisateur indiqué comme actif dans le Logiciel et
    donnant accès au mode création et/ou édition. Les comptes désactivés
    ainsi que ceux utilisés par des personnes ou systèmes extérieurs
    n'ayant qu'un accès limité au Logiciel via le portail ("Utilisateurs
    Portail") ne sont pas comptés comme Utilisateurs.

  - App  
    Une "App" est un ensemble de fonctionnalités, disponible pour
    installation dans le Logiciel.

  - Partenaire Odoo  
    Un Partenaire Odoo est un individu ou société tierce, choisi par le
    Client et qui collabore avec celui-ci pour les services liés à Odoo.
    Le Client peut choisir à tout moment de travailler avec un autre
    Partenaire Odoo, ou avec Odoo SA directement (moyennant préavis).

  - Module Supplémentaire  
    Un Module Supplémentaire est un répertoire de fichiers de code
    source, ou un ensemble de personnalisations nécessitant du code
    Python créées dans une base de données (par ex. avec Odoo Studio),
    pour ajouter des fonctionnalités ou changer des comportements du
    Logiciel. Il peut avoir été développé par le Client, par Odoo SA,
    par un Partenaire Odoo pour le compte du Client, ou par des tiers.

  - Module Supplémentaire Couvert  
    Un Module Supplémentaire Couvert est un Module Supplémentaire pour
    lequel le Client choisit de payer un abonnement de maintenance afin
    d'obtenir de l'assistance, des corrections de bugs et des
    migrations.

  - Bug  
    Désigne toute défaillance du Logiciel ou d'un Module Supplémentaire
    Couvert, qui se traduit par un arrêt complet, un message d'erreur
    avec trace d'exécution, ou une brèche de sécurité, et n'est pas
    directement causé par un problème d'installation ou une
    configuration défectueuse. Un non-respect des spécifications ou des
    besoins sera considéré comme un Bug à la discrétion d'Odoo SA (en
    général, lorsque le Logiciel ne produit pas les résultats ou la
    performance pour lesquels il a été conçu, ou lorsqu'une
    fonctionnalité spécifique à un pays ne répond plus aux exigences
    comptables légales de ce pays).

  - Versions Couvertes  
    Sauf exception explicite, tous les Services dans le cadre du présent
    contrat s'appliquent uniquement aux Versions Couvertes du Logiciel,
    qui comprennent les 3 plus récentes versions majeures.

  - Formule d'Abonnement  
    Une Formule d'Abonnement définit un ensemble d'Apps, fonctionnalités
    et solutions d'hébergement couvertes par ce Contrat, tel que précisé
    par écrit à la conclusion de ce Contrat.

## 3 Accès au Logiciel

Le Client peut utiliser le Logiciel hébergé sur la Plate-forme Cloud, ou
choisir l'option de l'Auto-Hébergement. La Plate-forme Cloud est
hébergée et entièrement gérée par Odoo SA, and accédée à distance par
le Client. En cas d'Auto-Hébergement, le Client héberge lui-même le
Logiciel sur un système informatique de son choix, hors du contrôle
d'Odoo SA.

Pour toute la durée du présent Contrat, Odoo SA octroie au Client une
licence non exclusive, non transférable d'utilisation (exécution,
modification, exécution après modification) du logiciel Odoo Enterprise
Edition, conformément aux conditions énoncées à la section
`appendix_a_fr`.

Le Client accepte de prendre toutes les mesures nécessaires pour
garantir l'exécution sans aucune modification de la partie du Logiciel
qui vérifie la validité de l'utilisation d'Odoo Enterprise Edition et
recueille des statistiques à cet effet, y compris mais sans s'y limiter,
l'exécution du Logiciel, le nombre d'Utilisateurs, les Apps installées
et le nombre de lignes de code des Modules Supplémentaires Couverts.

Odoo SA s'engage à ne pas divulguer à une tierce partie d'informations
chiffrées personnelles ou spécifiques sans le consentement du Client, et
à traiter toutes les données recueillies en respectant sa politique
officielle de confidentialité, telle que publiée sur
<https://www.odoo.com/privacy>.

À l'expiration ou la résiliation de ce Contrat, cette licence est
immédiatement révoquée et le Client accepte de cesser toute utilisation
du logiciel Odoo Enterprise Edition et de la Plate-forme Cloud.

Si le Client devait enfreindre les dispositions de la présente section,
il accepte de payer à Odoo SA des frais supplémentaires équivalents à
300 % du tarif en vigueur applicable correspondant au nombre réel
d'Utilisateurs.

## 4 Services inclus

### 4.1 Service de correction de Bugs

Pour la durée de ce Contrat, Odoo SA s'engage à déployer tous les
efforts raisonnables pour corriger tout Bug du Logiciel ou des Modules
Supplémentaires Couverts qui pourrait être signalé par le Client en
suivant la procédure appropriée (généralement par le biais du formulaire
en ligne ou des numéros de téléphone indiqués sur
<http://www.odoo.com/help>, ou en cas de travail avec un Partenaire
Odoo, le canal prévu par le partenaire), et de commencer à traiter ces
signalements du Client dans un délai de 2 jours ouvrables.

Dès que le Bug est remédié, un correctif approprié sera communiqué au
Client. Si le Client utilise une Version Couverte, il ne lui sera jamais
demandé de passer à une Version Couverte plus récente pour obtenir un
correctif.

Lorsqu'un Bug est corrigé dans une Version Couverte, Odoo SA s'engage à
le corriger dans toutes les Versions Couvertes plus récentes du
Logiciel.

Les deux parties reconnaissent que comme spécifié dans la licence du
Logiciel et à la section `liability_fr` de ce Contrat, Odoo SA ne peut
être tenue responsable des Bugs du Logiciel ou des Modules
Supplémentaires Couverts.

### 4.2 Mises à jour de sécurité

#### Auto-Hébergement

Pour la durée du Contrat, Odoo SA s'engage à envoyer une "alerte de
sécurité"" au Client pour tout Bug présentant un risque de sécurité qui
serait découvert dans les Versions Couvertes du Logiciel (à l'exclusion
des Modules Supplémentaires), au moins 2 semaines avant de rendre ladite
alerte de sécurité publique, et ce à moins que le Bug ait déjà été rendu
public par un tiers. Les alertes de sécurité comprennent une description
complète du Bug, de sa cause, ses conséquences possibles sur les
systèmes du Client, et le correctif correspondant pour chaque Version
Couverte.

Le Client s'engage à traiter le Bug de sécurité et les informations
figurant dans l'alerte de sécurité comme des Informations
Confidentielles telles que décrites à la section `confidentiality_fr`
pendant toute la période d'embargo avant la divulgation publique.

#### Plate-forme Cloud

Odoo SA s'engage à appliquer les correctifs de sécurité pour tout Bug de
sécurité découvert dans une version du Logiciel hébergé sur la
Plate-forme Cloud, sur tous les systèmes sous son contrôle, dès que le
correctif est disponible, et sans intervention manuelle du Client.

### 4.3 Service de migration

#### Service de migration du Logiciel

Pour la durée du présent Contrat, le Client peut soumettre des demandes
de migration en suivant les procédures appropriées (généralement, via le
site du service de migration d'Odoo SA), afin de convertir une base de
données du Logiciel depuis n'importe quelle version du Logiciel vers une
Version Couverte plus récente (la "Version Cible").

Pour la Plate-forme Cloud, les demandes de migration sont envoyées
directement depuis le panneau de contrôle de la Plate-forme Cloud, et ne
requièrent pas d'envoi de données. Pour l'Auto-Hébergement, les demandes
de migration doivent inclure une copie complète de la base de données du
Client et les données associées (généralement obtenues à partir du menu
Backup du Logiciel).

Ce service est fourni par le biais d'une plate-forme automatisée, afin
de permettre au Client d'effectuer des migrations sans intervention
humaine, dès lors qu’une version précédente de la base de données du
Client a été migrée avec succès pour une Version Couverte donnée.

Le service de migration est limité à la conversion et à l'adaptation
techniques de la base de données du Client pour la rendre compatible
avec la Version Cible, à la correction de tout Bug directement causé par
l'opération de migration, et ne se produisant normalement pas dans la
Version Cible, et la conversion du code source et des données des
Modules Supplémentaires Couverts vers la Version Cible.

Il incombe au Client de vérifier et valider la base de données migrée
afin de détecter tout Bug, d'analyser l'impact des changements et des
nouvelles fonctionnalités ajoutées dans la Version Cible, de convertir
et d'adapter pour la Version Cible les modules tiers du Logiciel qui
auraient été installées dans la base de données avant la migration (par
ex. des Modules Supplémentaires non-couverts). Le client peut soumettre
plusieurs demandes de migration pour une base de données, jusqu'à ce
qu'un résultat satisfaisant soit obtenu.

### 4.4 Service d'Hébergement Cloud

Pour la durée du présent Contrat, lorsque le Client choisit d'utiliser
la Plate-forme Cloud, Odoo SA s'engage à fournir au minimum le service
suivant:

  - Choix de plusieurs régions d'hébergement (minimum 3: Europe,
    Amérique, Asie/Pacifique)
  - Hébergement en centre de données Tiers-III ou équivalent, avec 99.9%
    de disponibilité
  - Cryptage des communications SSL Grade A (HTTPS)
  - Sauvegardes automatisées et vérifiées, répliquées dans plusieurs
    régions
  - Plan de Reprise d'Activité, testé régulièrement

Les détails du Service d'Hébergement Cloud sont décrits sur la page du
Service Level Agreement: <https://www.odoo.com/cloud-sla>.

### 4.5 Service d'Assistance

#### Portée

Pour la durée du présent Contrat, le Client peut ouvrir un nombre non
limité de demandes d'assistance sans frais, exclusivement pour des
questions relatives à des Bugs (voir `bugfix_fr`) ou des explications au
sujet de l'utilisation des fonctions standards du Logiciel et des
Modules Supplémentaires Couverts

D'autres types de demandes, telles que celles relatives à des
développements ou des personnalisations, peuvent être couvertes par
l'achat d'un contrat de service séparé. Au cas où il n'est pas clair
qu'une demande est couverte par ce Contrat, la décision sera à la
discrétion d'Odoo SA.

#### Disponibilité

Les demandes d'assistances peuvent être soumises via le formulaire en
ligne ou les numéros de téléphone indiqués sur
<https://www.odoo.com/help>, ou en cas de travail avec un Partenaire
Odoo, le canal préconisé par ce partenaire, pendant les heures de bureau
correspondantes.

### 4.6 Collaboration avec un Partenaire Odoo

Pour les services de correction de Bugs, d'assistance et de migration,
le Client peut choisir de collaborer avec un Partenaire Odoo comme point
de contact principal, ou directement avec Odoo SA.

Si le Client choisit un Partenaire Odoo, Odoo SA sous-traitera les
services liés au Modules Supplémentaires Couverts à ce partenaire, qui
deviendra le point de contact principal du client. Le Partenaire Odoo
peut obtenir de l'assistance de second niveau auprès d'Odoo SA pour le
compte du Client, concernant les fonctions standards du Logiciel.

Si le Client décide de collaborer directement avec Odoo SA, les services
liés aux Modules Supplémentaires Couverts ne seront fournis que *si et
seulement si* le Client est hébergé sur la Plate-forme Cloud d'Odoo.

## 5 Tarifs et Frais

### 5.1 Tarifs standards

Les tarifs standards pour le contrat d'abonnement à Odoo Enterprise et
les Services sont basés sur le nombre d'Utilisateurs et la Formule
d'Abonnement utilisés par le Client, et précisés par écrit à la
conclusion du contrat.

Pendant la durée du contrat, si le Client a plus d'Utilisateurs ou
utilise des fonctionnalités qui requièrent une autre Formule
d'Abonnement que celle précisée au moment de la conclusion du présent
Contrat, le Client accepte de payer un supplément équivalent au tarif en
vigueur applicable (au moment de la divergence par rapport au nombre
d'Utilisateurs ou de la Formule d'Abonnement spécifiés) pour les
utilisateurs supplémentaires ou la Formule d'Abonnement requise, pour le
reste de la Durée.

Par ailleurs, les services concernant les Modules Supplémentaires
Couverts sont facturés sur base du nombre de lignes de code dans ces
modules. Lorsque le client opte pour l'abonnement de maintenance des
Modules Supplémentaires Couverts, le coût mensuel est défini par 100
lignes de code (arrondi à la centaine supérieure), tel que spécifié par
écrit à la conclusion du Contrat. Les lignes de code sont comptées avec
la commande `cloc` du Logiciel, et comprennent toutes les lignes de
texte du code source de ces modules, peu importe le langage de
programmation (Python, Javascript, XML, etc.), à l'exclusion des lignes
vides, des lignes de commentaires et des fichiers qui ne sont pas
chargés à l'installation ou à l'exécution du Logiciel.

Lorsque le Client demande une migration, pour chaque Module
Supplémentaire Couvert qui n'a pas fait l'objet de frais de maintenance
pour les 12 derniers mois, Odoo SA peut facturer des frais
supplémentaires uniques, pour chaque mois de maintenance manquant.

### 5.2 Tarifs de reconduction

Lors de la reconduction telle que décrite à la section `term_fr`, si les
tarifs appliqués pendant la Durée précédente du contrat sont inférieurs
aux tarifs en vigueur les plus récents, ces frais augmenteront de
maximum 7 %.

### 5.3 Taxes et impôts

Tous les frais et tarifs sont indiqués hors taxes, frais et charges
fédérales, provinciales, locales ou autres taxes gouvernementales
applicables (collectivement, les "Taxes"). Le Client est responsable du
paiement de toutes les Taxes liées aux achats effectués par le Client en
vertu du présent Contrat, sauf lorsque Odoo SA est légalement tenue de
payer ou de percevoir les Taxes dont le client est responsable.

## 6 Conditions des Services

### 6.1 Obligations du Client

Le Client accepte de / d':

  - Payer à Odoo SA les frais applicables pour les Services en vertu du
    présent Contrat, conformément aux conditions de paiement spécifiées
    à la souscription du présent Contrat ;
  - Aviser immédiatement Odoo SA si le nombre réel d'Utilisateurs
    dépasse le nombre spécifié à la conclusion du Contrat, et dans ce
    cas, de régler les frais supplémentaires applicables telles que
    décrits à la section `charges_standard_fr`;
  - Prendre toutes les mesures nécessaires pour garantir l'exécution non
    modifiée de la partie du Logiciel qui vérifie la validité de
    l'utilisation de Odoo Enterprise Edition, comme décrit à la section
    `enterprise_access_fr`;
  - Désigner 1 personne de contact représentant le Client pour toute la
    durée du contrat ;
  - Signaler par écrit à Odoo SA avec un préavis de 30 jours en cas de
    changement de point de contact principal, pour collaborer avec un
    autre Partenaire Odoo, ou directement avec Odoo SA.

Lorsque le Client choisit d'utiliser la Plate-forme Cloud, il accepte
aussi de:

  - Prendre toute mesure raisonnable pour garantir la sécurité de ses
    comptes utilisateurs, y compris en choisissant un mot de passe sûr
    et en ne le partageant avec personne;
  - Faire une utilisation raisonnable des Services d'Hébergement, à
    l'exclusion de toute activité illégale ou abusive, et de respecter
    strictement les règles indiquées dans la Politique d'Utilisation
    Acceptable: <https://www.odoo.com/acceptable-use>.

Lorsque le Client choisit l'Auto-Hébergement, il accepte aussi de:

  - Fournir tout accès nécessaire à Odoo SA pour vérifier la validité de
    l'utilisation d'Odoo Enterprise Edition sur demande (par exemple, si
    la validation automatique ne fonctionne pas pour le Client) ;
  - Prendre toutes les mesures raisonnables pour protéger les fichiers
    et les bases de données du Client et s'assurer que les données du
    Client sont en sûreté et sécurisées, en reconnaissant qu'Odoo SA ne
    peut être tenue responsable de toute perte de données ;

### 6.2 Non solicitation ou embauche

Sauf si l'autre partie donne son consentement par écrit, chaque partie,
ses sociétés affiliées et ses représentants conviennent de ne pas
solliciter ou offrir un emploi à tout employé de l'autre partie qui est
impliqué dans l'exécution ou l'utilisation des Services en vertu du
présent Contrat, pendant la Durée du Contrat et pendant une période de
12 mois à compter de la date de résiliation ou de l'expiration du
présent Contrat. En cas de violation des conditions de la présente
section qui conduirait à la démission dudit employé à cette fin, la
partie ayant enfreint ces dispositions accepte de payer à l'autre partie
un montant forfaitaire de 30 000,00 euros (€) (trente mille euros).

### 6.3 Publicité

Sauf demande contraire par écrit, chaque partie accorde à l'autre partie
une licence mondiale libre de droits, non transférable, non exclusive
pour reproduire et afficher le nom, les logos et les marques de l'autre
partie, dans le seul but de citer l'autre partie en tant que client ou
fournisseur, sur les sites Web, dans des communiqués de presse et autres
documents de marketing.

### 6.4 Confidentialité

  - Définition des "Informations Confidentielles" :  
    Désigne toutes les informations divulguées par une partie (la
    "Partie Communicante") à l'autre partie (la "Partie Bénéficiaire"),
    que ce soit oralement ou par écrit, qui sont désignées comme
    confidentielles ou qui devraient raisonnablement être comprises
    comme étant confidentielles étant donné la nature des informations
    et les circonstances de la divulgation. En particulier, toute
    information liée aux activités, aux affaires, aux produits, aux
    développements, aux secrets commerciaux, au savoir-faire, au
    personnel, aux clients et aux fournisseurs de l'une des parties doit
    être considérée comme confidentielle.

Pour toute Information Confidentielle reçue pendant la durée du présent
contrat, la Partie Bénéficiaire utilisera le même degré de précaution
qu'elle utilise pour protéger la confidentialité de ses propres
Informations Confidentielles de même importance. Ce degré de précaution
devra correspondre au minimum à une précaution raisonnable.

La Partie Bénéficiaire peut divulguer les Informations Confidentielles
de la Partie Communicante dans la mesure où la loi l'y oblige, à
condition que la Partie Bénéficiaire avise au préalable par écrit la
Partie Communicante de son obligation de divulgation, dans la mesure
permise par la loi.

### 6.5 Protection de données

  - Définitions  
    "Données à Caractère Personnel", "Responsable de Traitement",
    "Traitement" prennent le même sens que dans le Règlement (EU)
    2016/679 et la Directive 2002/58/EC, et dans tout règlement ou
    législation qui les amende ou les remplace (collectivement, la
    "Législation sur la Protection des Données")

#### Traitement de Données à Caractère Personnel

Les parties conviennent que la base de données du Client peut contenir
des Données à Caractère Personnel, pour lesquelles le Client est le
Responsable de Traitement. Ces données seront traitées par Odoo SA quand
le Client en donnera l'instruction, par son utilisation des Services qui
requièrent une base de données (tels que le Service d'Hébergement ou le
Service de migration), ou si le Client transfère sa base de données ou
une partie de celle-ci à Odoo SA pour toute autre raison relative à
l'exécution du présent Contrat.

Ce traitement sera exécuté en conformité avec la Législation sur la
Protection des Données. En particulier, Odoo SA s'engage à:

  - (a) Ne traiter les Données à Caractère Personnel que quand et comme
    demandé par le Client, et pour la finalité de l'exécution de l'un
    des Services du Contrat, à moins que la loi ne l'exige, auquel cas
    Odoo SA préviendra préalablement le Client, à moins que la loi ne
    l'interdise;
  - (b) S'assurer que tout le personnel d'Odoo SA autorisé à traiter les
    Données à Caractère Personnel soit soumis à un devoir de
    confidentialité ;
  - (c) Mettre en oeuvre et maintenir des mesures de sécurité
    appropriées au niveau technique et organisationnel, afin de
    protéger les Données à Caractère Personnel de tout traitement non
    autorisé ou illégal, et de toute perte accidentelle, destruction,
    dégât, vol, altération ou divulgation ;
  - (d) Transmettre promptement au Client toute demande relative à des
    Données à Caractère Personnel qui aurait été soumise à Odoo SA au
    sujet de la base de données du Client ;
  - (e) Signaler au Client dès la prise de connaissance et la
    confirmation de tout traitement, accès ou divulgation non autorisés,
    accidentels ou illégal des Données à Caractère Personnel ;
  - (f) Signaler au Client lorsque ses instructions de traitement vont à
    l'encontre de la Législation sur la Protection des Données, d'après
    Odoo SA ;
  - (g) Fournir au Client toute information nécessaire à la
    démonstration de la conformité avec la Législation sur la
    Protection des Données, autoriser et contribuer de façon raisonnable
    à des audits, y compris des inspections, conduits ou mandatés par le
    Client dans ce but;
  - (h) Supprimer définitivement tout copie de la base de données du
    Client en possession d'Odoo SA, ou retourner ces données, au choix
    du Client, lors de la résiliation de ce Contrat, en respect des
    délais indiqués dans la [Politique de Protection des
    Données](https://www.odoo.com/privacy) d'Odoo SA ;

Concernant les points (d) à (f), le Client s'engage à fournir à Odoo SA
des informations de contact valables, tel que nécessaire pour toute
notification auprès du responsable de protection des données du Client.

#### Sous-traitants

Le Client convient et accepte que pour fournir les Services, Odoo SA
peut faire appel à des prestataires de service tiers (Sous-traitants)
pour traiter les Données à Caractère Personnel. Odoo SA s'engage à
n'utiliser de tels Sous-traitants qu'en conformité avec la Législation
sur la Protection des Données. Cet usage sera couvert par un contrat
entre Odoo SA et le Sous-traitant qui offrira toutes les garanties
nécessaires à cet effet. La Politique de Protection des Données d'Odoo
SA, publiée à l'adresse <https://www.odoo.com/privacy> fournit des
informations actualisées sur les noms et les finalités des
Sous-traitants utilisés par Odoo SA pour l'exécution des Services.

### 6.6 Résiliation

Dans le cas où l'une des parties ne remplit pas ses obligations
découlant du présent contrat, et si une telle violation n’est pas
résolue dans les 30 jours civils à compter de la notification écrite de
cette violation, le présent contrat peut être résilié immédiatement par
la partie qui n'a pas commis la violation.

En outre, Odoo SA peut résilier le contrat immédiatement dans le cas où
le Client ne paie pas les frais applicables pour les services dans les
21 jours suivant la date d'échéance indiquée sur la facture
correspondante, après minimum 3 rappels.

  - Durée de l'applicabilité des dispositions:  
    Les sections "`confidentiality_fr`", “`disclaimers_fr`",
    “`liability_fr`", et “`general_provisions_fr`" survivront la
    résiliation ou l'expiration du présent contrat.

## 7 Limitations de garantie et de responsabilité

### 7.1 Garantie

Odoo SA détient le copyright ou un équivalent\[1\] sur 100% du code du
Logiciel, et confirme que toutes les librairies logicielles nécessaires
au fonctionnement du Logiciel sont disponibles sous une licence
compatible avec la licence du Logiciel.

Pendant la durée du présent contrat, Odoo SA s'engage à déployer les
efforts raisonnables sur le plan commercial pour exécuter les Services
conformément aux normes du secteur généralement acceptées à condition
que :

  - Les systèmes informatiques du Client soient en bon état de
    fonctionnement et, pour l'Auto-Hébergement, que le Logiciel soit
    installé selon les bonnes pratiques en vigueur;
  - Le Client fournisse les informations adéquates nécessaires au
    dépannage et, pour l'Auto-Hébergement, tout accès utile, de telle
    sorte qu'Odoo SA puisse identifier, reproduire et gérer les
    problèmes ;
  - Tous les montants dus à Odoo SA, qui sont échus, aient été réglés.

La reprise de l'exécution des Services par Odoo SA sans frais
supplémentaires constitue la seule et unique réparation pour le Client
et la seule obligation d'Odoo SA pour tout manquement à cette garantie.

### 7.2 Limitation de garantie

Mis à part les dispositions expresses du présent Contrat, aucune des
parties ne donne de garantie d'aucune sorte, expresse, implicite ou
autre, et chaque partie décline expressément toutes garanties
implicites, y compris toute garantie implicite de qualité marchande,
d'adéquation à un usage particulier ou de non-contrefaçon, dans les
limites autorisées par la loi en vigueur.

Odoo SA ne garantit pas que le Logiciel soit conforme à toute loi ou
réglementation locale ou internationale.

### 7.3 Limitation de responsabilité

Dans la limite autorisée par la loi, la responsabilité globale de chaque
partie, ainsi que de ses filiales, découlant ou liée au présent Contrat
ne dépassera pas 50% du montant total réglé par le Client en vertu du
présent Contrat au cours des 12 mois précédant la date de l'événement
donnant lieu à une telle réclamation. Des réclamations multiples
n'augmenteront pas cette limite.

Les parties et leurs filiales ne pourront en aucun cas être tenues
responsables des dommages indirects, spéciaux, punitifs, accessoires ou
consécutifs de quelque nature que ce soit, y compris, mais sans s'y
limiter, la perte de revenus, perte de profits, perte d’économies, perte
commerciale ou toute autre perte financière, les coûts relatifs à
l'arrêt ou au retard, la perte ou altération des données, découlant ou
en relation avec le présent Contrat, quelle que soit la forme de
l'action, qu'elle soit fondée sur une obligation contractuelle,
délictuelle ou autre, même si la partie ou ses filiales ont été
informées du risque de tels dommages, ou si le recours proposé par la
partie ou ses filiales n'atteint pas son but essentiel.

### 7.4 Force Majeure

Aucune des parties ne sera tenue pour responsable envers l'autre partie
de tout retard ou manquement d'exécution en vertu du présent Contrat, si
ce manquement ou retard trouve sa cause dans un cas de *force majeure*,
comme une règlementation gouvernementale, un incendie, une grève, une
guerre, une inondation, un accident, une épidémie, un embargo, la saisie
d'une usine ou d'un produit dans son intégralité ou en partie par un
gouvernement ou une autorité publique, ou toute (s) autre (s) cause (s),
qu’elle (s) soit (soient) de nature similaire ou différente, pour autant
que cette cause soit hors du contrôle raisonnable de la partie
concernée, et tant qu'une telle cause existe.

## 8 Dispositions générales

### 8.1 Droit applicable

Le présent contrat et les commandes passées par le client sont
exclusivement régis par le droit belge. Tout différend relatif au
présent contrat ou à une commande passée par le Client relève de la
compétence exclusive du tribunal de l’entreprise de Nivelles.

### 8.2 Divisibilité

Dans le cas où une ou plusieurs des dispositions du présent contrat ou
toute autre application de celles-ci se trouvent non valables, illégales
ou non exécutoires, la validité, la légalité et le caractère exécutoire
des autres dispositions du présent contrat et toute application de
celles-ci ne doivent en aucun cas en être affectés ou compromis. Les
parties s'engagent à remplacer toute disposition non valable, illégale
ou non exécutoire du présent contrat par une disposition valable ayant
les mêmes effets et objectifs.

## 9 Appendice A: Odoo Enterprise Edition License

Odoo Enterprise Edition est publié sous la licence Odoo Enterprise
Edition License v1.0, définie ci-dessous.

<div class="warning">

<div class="title">

Warning

</div>

Ceci est une traduction en français de la licence “Odoo Enterprise
Edition License”. Cette traduction est fournie dans l’espoir qu’elle
facilitera sa compréhension, mais elle n'a aucune valeur légale. La
seule référence officielle des termes de la licence “Odoo Enterprise
Edition License” est la `version originale <odoo_enterprise_license>`.

This is a french translation of the "Odoo Enterprise Edition License”.
This translation is provided in the hope that it will facilitate
understanding, but it has no legal value. The only official reference of
the terms of the “Odoo Enterprise Edition License” is the `original
english version <odoo_enterprise_license>`.

</div>

<tt>

Odoo Enterprise Edition License v1.0

Ce logiciel et les fichiers associés (le "Logiciel") ne peuvent être
utilisés (c'est-à-dire exécutés, modifiés, ou exécutés avec des
modifications) qu'avec un contrat Odoo Enterprise Subscription en ordre
de validité, et pour le nombre d'utilisateurs prévus dans ce contrat.

Un contrat de Partnariat avec Odoo S.A. en ordre de validité donne les
mêmes permissions que ci-dessus, mais uniquement pour un usage
restreint à un environnement de test ou de développement.

Vous êtes autorisé à développer des modules Odoo basés sur le Logiciel
et à les distribuer sous la license de votre choix, pour autant que
cette licence soit compatible avec les conditions de la licence Odoo
Enterprise Edition Licence (Par exemple: LGPL, MIT ou d'autres licenses
propriétaires similaires à celle-ci).

Vous êtes autorisé à utiliser des modules Odoo publiés sous n'importe
quelle licence, pour autant que leur licence soit compatible avec les
conditions de la licence Odoo Enterprise Edition License (Notamment tous
les modules publiés sur l'Odoo Apps Store sur odoo.com/apps).

Il est interdit de publier, distribuer, accorder des sous-licences, ou
vendre tout copie du Logiciel ou toute copie modifiée du Logiciel.

Toute copie du Logiciel ou d'une partie substantielle de celui-ci doit
inclure l'avis de droit d'auteur original ainsi que le texte de la
présente licence.

LE LOGICIEL EST FOURNI "EN L'ETAT", SANS AUCUNE GARANTIE DE QUELQUE
NATURE QUE CE SOIT, EXPRESSE OU IMPLICITE, Y COMPRIS, MAIS SANS Y ETRE
LIMITE, LES GARANTIES IMPLICITES DE COMMERCIABILITE, DE CONFORMITE A UNE
UTILISATION PARTICULIERE, OU DE NON INFRACTION AUX DROITS D'UN TIERS.

EN AUCUN CAS LES AUTEURS OU TITULAIRES DE DROITS D'AUTEUR NE POURRONT
ETRE TENUS POUR RESPONSABLE A VOTRE EGARD DE RECLAMATIONS, DOMMAGES OU
AUTRES RESPONSABILITES, EN VERTU D'UN CONTRAT, DÉLIT OU AUTREMENT,
RELATIVEMENT AU LOGICIEL, A L'UTILISATION DU LOGICIEL, OU A TOUTE AUTRE
MANIPULATION RELATIVE AU LOGICIEL.

</tt>

1.  Les contributions externes sont couvertes par un [Copyright License
    Agreement](https://www.odoo.com/cla) fournissant une licence de
    copyright et de brevet permanente, gratuite et irrévocable à Odoo
    SA.


---
## File: ./content/legal/terms/partnership_tex.md

  - nosearch

  - orphan

<div class="toctree" data-maxdepth="4" data-numbered="">

partnership

</div>


---
## File: ./content/legal/coc.md

  - orphan

# Odoo Mailing Lists - Code of Conduct

<div class="note">

<div class="title">

Note

</div>

Version 1 - Last revision: Novembre 16, 2017.

</div>

## Introduction

The Odoo community lists are for enthusiast users, partners and
developers who want to have constructive discussions about Odoo. As the
lists have thousands of subscribers, this code of conduct aims to ensure
a quality discussion for everyone.

These lists are not systematically reviewed by Odoo staff - while you
will see responses from staff members from time to time, there are other
paid support channels available if you require an official response.

## We Strive To

1.  Be friendly and patient
      - If someone asks for help it is because they need it. Politely
        suggest specific documentation or more appropriate venues where
        appropriate. Avoid aggressive or vague responses.
      - We all want to live in a positive and friendly environment.
        Negative behaviors and non-constructive criticisms are not
        allowed.
2.  Be civil and considerate
      - Disagreement is no excuse for poor conduct or personal attacks.
        A community where people feel uncomfortable is not a productive
        one.
3.  Assume good faith
      - Remember that technical questions may be very complex. If you
        disagree, please do so politely, by disputing factual premises
        rather than by attacking individuals.
      - If something seems outrageous, check that you did not
        misinterpret it. Ask for clarification, rather than assuming the
        worst.
4.  Respect time and attention
      - List members are busy people. So, we value concision and
        clarity. Emails that are brief and to the point take more time
        to write, but are repaid many times over when other members of
        the list make the same effort.
      - Avoid talking about the same topics several times, or hijacking
        other's threads.
      - Provide extra valuable information or a question in every reply.
        (e.g. avoid just “Thank you” or “+1” emails)
5.  Respect the topics
      - Conversations should remain focused and on-topic. If you must
        change the topic, start a new thread by changing the topic line
        of your emails. Avoid flooding the list with long threads by
        reading the entire thread first, instead of responding quickly
        to many emails in a short period of time.
      - You can not use these mailing lists to advertise your services,
        commercial offers or discuss software other than Odoo. New
        modules and features can be announced on the “Announcements”
        mailing list only.
      - Don't use the list to report copyright or licenses
        infringements, report issues to <abuse@odoo.com> instead.
6.  Don't feed the trolls
      - Don't get involved in flame wars. Neither post nor respond to
        incendiary material.
      - If you should find yourself in a disagreement with one person,
        make your responses to each other over email rather than
        continue to send messages to the list or the group.
      - Avoid sending messages or posting articles which are no more
        than gratuitous replies to replies.

## Enforcement

Experienced members of the Odoo community comply with this code, not
because of the existence of the code, but because they have long
experience participating in communities where the conduct described
above is normal and expected. However, failure to observe the code may
be grounds for reprimand, probation, or removal from the lists.

If you have concerns about someone’s conduct: Direct contact: it is
always appropriate to email a list member, mention that you think their
behavior was out of line, and (if necessary) point them to this
document. Moderators: You can reach the list moderators through
<community-mods@odoo.com>

This policy was inspired by

  - <https://opensource.org/codeofconduct/licensing>
  - <https://www.ietf.org/rfc/rfc1855.txt>


---
## File: ./content/legal/licenses.md

# Licenses

## Odoo 14 Community Edition

Odoo 14 Community Edition is licensed under [LGPL
version 3](http://www.gnu.org/licenses/lgpl-3.0.en.html) (also known as
LGPLv3). See also the [GPL
FAQ](http://www.gnu.org/licenses/gpl-faq.en.html) and the [compatibility
matrix](http://www.gnu.org/licenses/gpl-faq.en.html#AllCompatibility).

## Odoo 14 Enterprise Edition

Odoo 14 Enterprise Edition is licensed under the Odoo Enterprise Edition
License v1.0, defined as follows:

<tt>

</tt>

## Odoo Apps

Unless otherwise stated, Odoo Apps by Odoo SA (including the website
themes) are published under the Odoo Proprietary License v1.0, defined
as follows

<tt>

Odoo Proprietary License v1.0

This software and associated files (the "Software") may only be used
(executed, modified, executed after modifications) if you have purchased
a valid license from the authors, typically via Odoo Apps, or if you
have received a written agreement from the authors of the Software (see
the COPYRIGHT file).

You may develop Odoo modules that use the Software as a library
(typically by depending on it, importing it and using its resources),
but without copying any source code or material from the Software. You
may distribute those modules under the license of your choice, provided
that this license is compatible with the terms of the Odoo Proprietary
License (For example: LGPL, MIT, or proprietary licenses similar to this
one).

It is forbidden to publish, distribute, sublicense, or sell copies of
the Software or modified copies of the Software.

The above copyright notice and this permission notice must be included
in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

</tt>

## Odoo 9 - Odoo 13

The licenses for both Community Edition and Enterprise Edition of all
Odoo versions since Odoo 9 are respectively the same as for
`odoo_community_license` and `odoo_enterprise_license`.

## Odoo 8

Odoo 8 is licensed under [AGPL
version 3](http://www.gnu.org/licenses/agpl-3.0.en.html) (also known as
AGPLv3). See also the [GPL
FAQ](http://www.gnu.org/licenses/gpl-faq.en.html) and the [compatibility
matrix](http://www.gnu.org/licenses/gpl-faq.en.html#AllCompatibility).


---
## File: ./content/legal/cla.md

# Contributor License Agreement

In order to contribute to any of the Odoo projects, companies and
individuals have to sign the Odoo Contributor License Agreement (CLA).

More information about this requirement, the procedure to sign the
agreement, and a FAQ can be found on our [GitHub project
page](%7BGITHUB_PATH%7D/doc/cla/sign-cla.md).


---
## File: ./content/legal/terms.md

  - nosearch

# Terms and Conditions

<div class="toctree" data-titlesonly="">

terms/odoo\_sh\_terms terms/enterprise terms/partnership
terms/terms\_of\_sale

</div>


---
## File: ./content/applications.md

  - nosearch

  - show-content

  - hide-page-toc

  - show-toc

# User Docs

Discover our user guides and configuration tutorials per application.

<div class="toctree" data-maxdepth="2">

applications/finance applications/sales applications/websites
applications/inventory\_and\_mrp applications/hr applications/marketing
applications/services applications/productivity applications/general

</div>


---
## File: ./readme.md

# RST to Markdown Conversion

## Description
This repository contains the scripts and configuration needed to automatically convert reStructuredText (RST) files to Markdown (MD). The process is automated using a GitHub Actions workflow, converting the files regularly on a weekly basis.

## Features
- Automatic conversion of RST files to MD.
- Utilization of Pandoc for precise conversions.
- Management of subdirectories to maintain the project structure.